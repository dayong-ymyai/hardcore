{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///./src/layout/SpiralLayout.js","webpack:///./src/diagram/tianpan.js","webpack:///webpack/bootstrap 292dfdb8913581862bc6","webpack:///./src/helpers/helpers.gojs.js","webpack:///./src/nodeTemplate/base.js","webpack:///./src/nodeTemplate/createPictureSingleNodeTemplate.js","webpack:///./src/nodeTemplate/createTextNodeTemplate.js","webpack:///./src/nodeTemplate/createPictureNodeTemplate.js","webpack:///./src/nodeTemplate/createNodeSvgTemplate.js","webpack:///./src/nodeTemplate/createNodeTemplate.js","webpack:///./src/datas/svg.template.js","webpack:///./src/layout/waveGroupLayout.js","webpack:///./src/diagram/trtd.js","webpack:///./src/nodeTemplate/factory.js","webpack:///./src/assets/localization.js","webpack:///./src/main.js","webpack:///./src/nodeTemplate/waveNodeTemplate.js","webpack:///./src/nodeTemplate/waveTailNodeTemplate.js","webpack:///./src/nodeTemplate/waveGroupNodeTemplate.js","webpack:///./src/nodeTemplate/axisGroupNodeTemplate.js","webpack:///./src/layout/axisGroupLayout.js","webpack:///./src/nodeTemplate/iconTextNodeTemplate.js","webpack:///./src/nodeTemplate/autoTextNodeTemplate.js","webpack:///./src/nodeTemplate/labelGroupNodeTemplate.js","webpack:///./src/nodeTemplate/picNodeTemplate.js","webpack:///./src/nodeTemplate/picGroupNodeTemplate.js","webpack:///./src/nodeTemplate/yunGroupNodeTemplate.js","webpack:///./src/layout/yunGroupLayout.js","webpack:///./src/nodeTemplate/yunpanGroupNodeTemplate.js","webpack:///./src/layout/yunpanGroupLayout.js","webpack:///./src/nodeTemplate/shapeNodeTemplate.js","webpack:///./src/nodeTemplate/shapeTextNodeTemplate.js","webpack:///./src/linkTemplate/createTianpanLink.js","webpack:///./src/diagram/dipan.js","webpack:///./src/diagram/jin.js","webpack:///./src/diagram/huo.js","webpack:///./src/diagram/shui.js","webpack:///./src/diagram/yunpan.js","webpack:///./src/diagram/wheel.js","webpack:///./src/diagram/dspiral.js","webpack:///./src/nodeTemplate/createArcNodeTemplate.js","webpack:///./src/nodeTemplate/createLineNodeTemplate.js","webpack:///./src/nodeTemplate/createWaveNodeTemplate.js","webpack:///./src/tools/GroupRotatingTool.js","webpack:///./src/tools/textEditor.js"],"names":["Math","newStartAngle","exports","module","checkPhone","navigator","guid","S4","getElementByAttr","aElements","document","aEle","i","clear","chart","nodeInfo","str","d","linkInfo","groupInfo","g","adornment","mems","links","part","go","queue","tdTravelTdpDataWidth","dealingNode","collector","childNodeData","model","tdTravelTdpData","nodeData","nextNodeData","deleteOldData","window","item","temp","JSON","diff","saveModelToLocalStorage","checkModel","data","nodeDataArray","root","key","level","parent","isparent","prev","next","checkDataExists","tdTransToNum","arguments","defaultVal","result","simulateEnterWithAlt","myDiagram","e","evt","start","end","val","travelParts","diagram","rootNode","callback","group","stack","node","child","link","nextChild","$","over","x","buttonFillNormal","buttonStrokeNormal","paddingHorizontal","paddingVertical","button","enabledChanged","shape","btn","enabled","cursor","name","figure","spot1","spot2","parameter1","parameter2","stroke","brush","oldskip","constructor","options","getNodeProperties","that","getNodeSelectionAdornmentTemplate","fill","strokeWidth","getBinding","getTextBuild","alignment","font","overflow","wrap","textAlign","spacingAbove","spacingBelow","portId","stretch","Uniform","helpers","v","getNodeTemplate","click","doubleClick","mouseOver","mouseLeave","mouseDragEnter","obj","selnode","mouseDragLeave","mouseDrop","layerName","zOrder","locationSpot","resizeCellSize","locationObjectName","resizeObjectName","rotateObjectName","angle","layoutConditions","alignmentFocus","resizeAdornmentTemplate","contextMenu","selectionAdornmentTemplate","width","height","isActionable","centerPicture","equalWidthHeightPicture","bringToLayer","successFunction","pict","sourceCrossOrigin","Date","properties","fontSize","location","toMaxLinks","strokeDashArray","minSize","Fill","_","randomColor","luminosity","count","tmpColor","follower","preNode","cur","nextNode","parNode","parGroup","tdCurrentTheme","childGroup","getRootNodeData","rootLoc","rootPoint","firstChild","firstLoc","relativeFirstLoc","relativeMidLoc","midLoc","offset","computeOffset","curLoc","relativeLoc","depth","nextLoc","relativeNextLoc","prevLoc","relativeLocPrev","lastLoc","dy","newR","dx","arr","SpiralLayout","require","TRTD_BASE","lang","createNodeTemplate","createPictureSingleNodeTemplate","createPictureNodeTemplate","createTextNodeTemplate","createNodeSvgTemplate","createTianpanLink","colorMap","config","initDiagram","diagramConfig","Object","getTdData","getDefaultCustomMenuDivStr","getShowContextMenus","showIds","apiInsertTianpanNode","fixPictureMenu","activePictureMenu","addTextNode","text","message","category","initModel","tmpModel","loadModel","initListener","addGroupTemplate","contextClick","copyable","layout","radius","isInitial","LayoutAdded","parseInt","size","margin","addNodeTemplate","addLinkTemplate","setNodeAsChildren","disconnectFromTreeStructure","newLink","from","to","applyTheme2Link","newGroup","nodeGroup","addGroupForNode","setNodeAsSibling","sibling","preLink","parentGroup","deleteSelection","cmd","locateNode","tempArray","deleteNode","mainNode","n","nextNodeLink","intoLink","tmpNodeData","oldlink","nodes","mylinks","grandNode","addLevelNodeData","isautolayout","currentType","toKey","nextkey","color","nextnode","nextlink","l","nextLocation","parentNode","linkToFollower","copyLink","addFollower","tb","ControlAutoLayout","autoLayoutPart","newnode","startNewSpiral","addChildNodeData","firstNode","firstLink","InitialFontSize","moveWithinNodes","prevNode","selectText","dokeyDownFn","autoLayoutAll","centerNode","centerCurrentNode","zoomToFit","downloadImage","imgdata","scale","background","type","maxSize","tinycolor","toolTip","desiredSize","orderChildNode","first","pushChildKeyToArr","re","clearOrderChildNode","Trtd","interactions","va","svg","doubleClickCreateNodeType","selectionObjectName","geometryString","column","row","alert","rowSpan","setTimeout","groupTextAngle","shi","textAngle","computeNewRotateLoc","xu","collection","oliveWidth","oliveHeight","shiStroke","xuStroke","centerStroke","oliveType","haveTail","waveTotalSize","shiTextColl","xuTextColl","centerTextColl","it","line","xuStrokeWidth","shiStrokeWidth","shiStrokeDashArray","xuStrokeDashArray","Number","a","b","lastOlive","oldOrder","newOrder","index","loc","centerText","textStroke","initCenterText","objCenterText","adustOliveText","adjustTextAngle","rotateCenter","nodeOrigin","currentLoc","newNodeOrigin","newNodeLoc","WaveGroupLayout","layoutWaveGroup","coll","parts","fromnode","tonode","nodeTemplateFactory","id","borderWidth","borderColor","groupColor","groupStroke","groupStrokeWidth","themeName","linkColor","colorRange","resetZoom","insertPicture","apiInsertPicture","documentPoint","localStorage","apiGetTheme","themeText","insertFigure","apiDuplicateNode","newData","apiPreviewImage","imageParas","list","p","apiDeleteSelection","apiUndo","apiRedo","saveModel","addNodeTemplateBase","addWater","groupKey","basePoint","groupData","picData","themeData","timeData","energeData","text1Data","text2Data","text3Data","initDiagramBase","defaultConfig","initialContentAlignment","initialAutoScale","initialDocumentSpot","initialViewportSpot","padding","maxScale","minScale","scrollMode","scrollMargin","maxSelectionCount","validCycle","ViewportBoundsChanged","forelayer","nodeCopy","removeNodeRemarkTips","doms","showNodeRemarkTips","info","box","toolTipText","nodeResizeAdornmentTemplate","customMenu","div","mainbox","contextMeluDom","bindMenuEventListener","menuList","cxElement","addDiagramContextMenu","cxTool","contextmenu","mousePt","showMenus","liL","getNodeContextMenu","waveNodeTemplate","waveTailNodeTemplate","waveGroupNodeTemplate","axisGroupNodeTemplate","iconTextNodeTemplate","autoTextNodeTemplate","labelGroupNodeTemplate","picNodeTemplate","picGroupNodeTemplate","yunGroupNodeTemplate","yunpanGroupNodeTemplate","shapeNodeTemplate","shapeTextNodeTemplate","nodeType","nodeTemplateClass","eval","localization","outlineeditor","en","chn","modificationbuttons","browsingbuttons","show","hide","moveupnode","movedownnode","removenode","editnode","prevnode","expandnode","collapsenode","expandall","collapseall","preview","cancel","apply","buildtdp","cn","success","warning","error","typeModules","console","trtdClass","cos","sin","nodesRectList","rect","_cover","tdSpiralMode","copy","topNodes","findFlag","cw","initialAngle","nodesDealed","distance","edge","vert","childCount","hasGroup","nextedge","nextvert","rad","tmpR","radiusDis","tmpPoint","adjustAngleCount","fromVert","y","point","getInvolutePoint","equaldistance","dangle","angleOld","newPoint","curRect","res","dept","equalSpiral","dia","_do","get","set","Base","makeGeo","radiusX","radiusY","geo","makeGeoWave","seg","getShiHalfEllipseShape","Bottom","clockwiseFlag","getXuHalfEllipseShape","getTailShiShape","getTailXuShape","textEdited","textBlock","newv","shiText","xuText","deleteObjs","cbian","tips","elt","waveGroupLayout","axisGroupLayout","addFreeText","AxisGroupLayout","dataCollection","maxWidth","maxHeight","axisYText","axisXText","labelText1","labelText2","labelText3","labelGroup","centerLine","axisX","axisY","waveGroup","x1","x2","itl","verticalAlignment","maxLines","Right","clearBorder","oliveNode","selOrderX","selOrderY","selDimKey","nodeCoreTexts","selnodeCoreTexts","yunnodeCoreTexts","yunselnodeCoreTexts","normDim","selOrder","nodeOrder","centerOrderX","centerOrderY","tmpX","tmpY","selectionChanged","orderX","orderY","shapeStrokes","showShape","gridWidth","shapeData","nod","olive","switchBorder","flag","hiddenAllText","oldStatus","addLabelText","spacing","cellSize","arrangement","wrappingColumn","Location","opacity","Center","LayoutNodeSized","yunGroupLayout","snapToGrid","minX","minY","tmp","YunGroupLayout","gridHeight","verticalLines","horizontalLines","freelLines","allLines","freeTexts","shapeNodes","snapType","beginSpark","allPointsX","allPointsY","shapeWidth","dimXLoc","dimYLoc","addFreeShapeText","horizontalDim","verticalDim","shadowColor","shadowOffset","C","A","B","O","locD","r","direction","OC","directionOC","directionFlagOD","directionOD","angleDOC","OD","cent","sweep","p1","ctl1","ctl2","SmoothLink","centorPoint","centInfo","rcenter","rstart","rend","center2mid","af","start2","end2","computeControlPoint","isNaN","curve","curviness","adjusting","draggedNode","fromNode","toNode","toArrow","tmpNode","lastNode","layerThickness","q","o","globalProperties","tdDipanTextAngle","createDipanTemplate","changeTemp2normal","selectionAdorned","getDipanRootTemplate","BottomRight","tdGetModelData1","currentThemeID","splitLayer","tdGetModelData","maxCircle","totalCount","dipanRoot","getMaxCircle","nodeArr","nodeLevelArr","maxNodeArr","max","addNewCircle","maxCircles","firstnodeData","sectotLayerThickNess","addFollowerGround","groundLayout","radlay1","found","newdata","rootRadius","layer","separator","label","tmpDataObj","childNum","sweepUnit","length","tmpArray","tmpAngle","followerNode","changeLayout","radialLayout","splitRadlayout","dokeyDownFnq","Trtd_tianpan","geometry","mouseEnter","mouseHover","dir","addy","addx","del","yl","locy","locL","loco","newy","newytext","xl","min","newx","newxtext","locx","changelen","changelenx","datalocx","gs","gs2","shapeShowblur","circleStroke","initDiagramYun","createArcNodeTemplate","createLineNodeTemplate","createWaveNodeTemplate","GroupRotatingTool","rotatingTool","PartResized","waveCount","lastWave","nodeSize","waveSize","SelectionMoved","waveColl","tool","deleteNodes","deleteLines","unnormDim","lineRole","layoutLabelGroup","layoutAllGroup","splitOlive2Half","axisData","curOrder","splitOlive","splitOlive2Cbian","addCbian","addOlive","maxOlive","curShiText","curXuText","order","getAxisGroupData","baseLoc","axisGroupKey","labelGroupKey","waveGroupKey","olive1Key","olive2Key","olive3Key","olive4Key","olive1ShiTextKey","olive1XuTextKey","olive2ShiTextKey","olive2XuTextKey","olive3ShiTextKey","olive3XuTextKey","olive4ShiTextKey","olive4XuTextKey","olive1CenterTextKey","olive2CenterTextKey","olive3CenterTextKey","olive4CenterTextKey","addAxisGroup","axisGroupCount","clearAllTextBorder","apiSwitchWaveTail","waveTail","tailOlive","apiSwitchToEllipse","apiSwitchToWave","apiSwitchTextAngle","mapObj","addDimTtext","curLine","dimTextData","lineData","bringToBackground","bringToForeground","bringdownLayer","toLayerName","bringupLayer","tempData","showRect","hideRect","autoShowRedline","offShowRedLine","findPrevOlive","prenode","findNextOlive","findUpOlive","upnode","findDownOlive","downnode","upNode","downNode","strokeCap","position","infos","locoffset","relloc","newangle","ang","cp","newrad","dist","textarea","TextEditor","tempText","handlers","t","element","observe","handler","keynum","pos","sc","textscale","textwidth","textheight","left","top","paddingsize"],"mappings":"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","file":"hardcore0.0.4.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"hardcore0.0.4\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"hardcore0.0.4\"] = factory();\n\telse\n\t\troot[\"hardcore0.0.4\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","\r\n/*\r\n*  Copyright (C) 1998-2015 by Northwoods Software Corporation. All Rights Reserved.\r\n*/\r\n\r\n// A custom Layout that lays out a chain of nodes in a spiral\r\n\r\n/**\r\n * @constructor\r\n * @extends Layout\r\n * @class\r\n * This layout assumes the graph is a chain of Nodes,\r\n * {@link #spacing} controls the spacing between nodes.\r\n */\r\n\r\n'use strict';\r\n\r\n// import * as go from 'gojs';\r\nvar $ = go.GraphObject.make;\r\nvar tdDebug = false;\r\nvar tdSpacing = 0.7;\r\nvar tdSpiralMode = 'sparse';\r\n\r\nfunction SpiralLayout() {\r\n    go.Layout.call(this);\r\n    this._radius = NaN;\r\n    this._spacing = 10;\r\n    this._clockwise = true;\r\n    this._pointlist = [];\r\n}\r\ngo.Diagram.inherit(SpiralLayout, go.Layout);\r\n\r\n/**\r\n * @ignore\r\n * Copies properties to a cloned Layout.\r\n * @this {SpiralLayout}\r\n * @param {Layout} copy\r\n * @override\r\n */\r\nSpiralLayout.prototype.cloneProtected = function(copy) {\r\n    go.Layout.prototype.cloneProtected.call(this, copy);\r\n\r\n    copy._radius = this._radius;\r\n    copy._spacing = this._spacing;\r\n    copy._clockwise = this._clockwise;\r\n};\r\n\r\n//根据基圆半径和角度参数确定螺旋线上的一个点\r\n//渐开线的参数方程\r\nfunction getInvolutePoint(radius, angle) {\r\n    var cos = Math.cos(angle);\r\n    var sin = Math.sin(angle);\r\n    var x = radius * (cos + angle * sin);\r\n    var y = radius * (sin - angle * cos);\r\n    return new go.Point(x, y);\r\n}\r\n\r\n//检查给定区域是否和nodes内所有节点重叠\r\nfunction checkCoveredWithNodes(rect, nodesRectList) {\r\n    var _cover = false;\r\n\r\n    var it = nodesRectList.iterator;\r\n    while (it.next()) {\r\n\r\n        if (Math.sqrt(rect.point.distanceSquaredPoint(it.value.point)) < (rect.radius + it.value.radius)) {\r\n            //console.log([\" node:\", it.value.node.data.key,'is in the radius ',node.actualBounds.width,' of:',node.data.key].join(\" \"));\r\n            _cover = true;\r\n            break;\r\n        }\r\n    }\r\n    return _cover;\r\n}\r\n\r\n/**\r\n * This method actually positions all of the Nodes, assuming that the ordering of the nodes\r\n * is given by a single link from one node to the next.\r\n * This respects the {@link #spacing} property to affect the layout.\r\n * @this {SpiralLayout}\r\n * @param {Diagram|Group|Iterable} coll the collection of Parts to layout.\r\n */\r\nSpiralLayout.prototype.doLayout = function(coll) {\r\n\r\n\r\n    if (this.network === null) {\r\n        this.network = this.makeNetwork(coll);\r\n    }\r\n    //console.log(\"begin new layout\");\r\n    var root = null;\r\n    var findFlag = false;\r\n    var v;\r\n    // find a root vertex -- one without any incoming edges\r\n    var it = this.network.vertexes.iterator;\r\n    var topNodes = [];\r\n    while (it.next()) {\r\n        //console.log(it.value.node.data.key+\":\"+it.value.node.data.text);\r\n        v = it.value;\r\n        if (!findFlag) {\r\n            if (root === null) root = v; // in case there are only circles\r\n            if (v.sourceEdges.count === 0) {\r\n                root = v;\r\n                findFlag = true;\r\n            }\r\n        } else {\r\n            if (v.sourceEdges.count === 0) {\r\n                topNodes.push(v);\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n\r\n    // couldn't find a root vertex\r\n    if (root === null) {\r\n        this.network = null;\r\n        return;\r\n    }\r\n\r\n    var cw = (this.clockwise ? 1 : -1);\r\n    var rad;\r\n\r\n    var angle = 2.5;\r\n    var isautolayout = window.localStorage.getItem('isautolayout') == null ? true : window.localStorage.getItem('isautolayout') == 'true';\r\n    // now locate each of the following nodes, in order, along a spiral\r\n    var vert;\r\n    var x, y;\r\n    var _pointlist;\r\n    var _do = true;\r\n    var count = 0; //循环计数\r\n    var res;\r\n    var initialAngle = 5;\r\n    var edge, fromVert, dangle, index, dept, dl, nextedge, nextvert,\r\n        nodesDealed = new go.List(),\r\n        curRect, //当前节点的矩形区域\r\n        newPoint,\r\n        dia,\r\n        distance = 150,\r\n        equaldistance;\r\n    if (tdSpiralMode == 'terse') {\r\n        distance = 20;\r\n    }\r\n    if (tdSpiralMode == 'sparse') {\r\n        distance = 150;\r\n    }\r\n    var tmpR; //计算中间值\r\n    edge = root.destinationEdges.first();\r\n    vert = (edge !== null ? edge.toVertex : null);\r\n\r\n    root.node.rad = rad;\r\n    var childCount = 0;\r\n    var hasGroup = false;\r\n    while (vert !== null) {\r\n        childCount++;\r\n        if (vert.node.data['isGroup']) {\r\n            hasGroup = true;\r\n        }\r\n        nextedge = vert.destinationEdges.first();\r\n        nextvert = (nextedge !== null ? nextedge.toVertex : null);\r\n        edge = nextedge;\r\n        //fromVert = vert;\r\n        vert = nextvert;\r\n    }\r\n    edge = root.destinationEdges.first();\r\n    vert = (edge !== null ? edge.toVertex : null);\r\n\r\n    rad = 1;\r\n    var tmpPoint;\r\n    //找到第一个节点和根节点不相交的rad值\r\n    if (vert) {\r\n        tmpR = vert.node.actualBounds.width;\r\n        //var rootRect = new go.Rect(root.node.location.x - root.node.actualBounds.width / 2, root.node.location.y - root.node.actualBounds.height / 2, root.node.actualBounds.width, root.node.actualBounds.height);\r\n        var radiusDis = root.node.actualBounds.width / 2 + vert.node.actualBounds.width / 2;\r\n        while (true) {\r\n            tmpPoint = getInvolutePoint(rad, initialAngle);\r\n            tmpPoint = new go.Point(tmpPoint.x + root.node.location.x, tmpPoint.y + root.node.location.y);\r\n            if ((Math.sqrt(tmpPoint.distanceSquaredPoint(root.node.location))) > (radiusDis + 10)) { //+10 是为了防止第一个子节点和根节点接壤\r\n                break;\r\n            } else {\r\n                rad += 0.1;\r\n            }\r\n        }\r\n    }\r\n    var adjustAngleCount = 0;\r\n\r\n    while (_do) {\r\n\r\n        count++; //计数\r\n        //初始化参数\r\n        angle = initialAngle;\r\n        edge = root.destinationEdges.first();\r\n        //if (edge !== null && edge.link !== null) edge.link.curviness = rad;\r\n        root.node.data.angle = 0;\r\n        if (edge !== null && edge.link !== null) edge.link.curviness = cw * rad;\r\n        var curviness = edge == null ? 20 : edge.link.curviness;\r\n        // now locate each of the following nodes, in order, along a spiral\r\n        vert = (edge !== null ? edge.toVertex : null);\r\n\r\n        fromVert = root;\r\n        index = 0;\r\n        var angleOld; //增加angle时保留的原始值，用于恢复\r\n        x = 0, y = 0;\r\n        //_pointlist = [];\r\n        // _pointlist.push(root.node.data.key + \":(0,0)\");\r\n        if (vert) vert.node.data.angle = angle;\r\n        nodesDealed.clear();\r\n        //nodesDealed.add(new go.Rect(root.node.location.x - root.node.actualBounds.width / 2, root.node.location.y - root.node.actualBounds.height / 2, root.node.actualBounds.width, root.node.actualBounds.height));\r\n        nodesDealed.add({ point: root.node.location, radius: root.node.actualBounds.width / 2 });\r\n\r\n        //等弧长\r\n        //equaldistance = Math.sqrt(getInvolutePoint(rad, 5 * Math.PI / 2).distanceSquaredPoint(getInvolutePoint(rad, 5 * Math.PI / 2 - tdSpacing)));\r\n\r\n        //equaldistance = Math.sqrt(getInvolutePoint(rad, 5 * Math.PI / 2).distanceSquaredPoint(getInvolutePoint(rad, 5 * Math.PI / 2 - tdSpacing)));\r\n        if (tdSpiralMode == 'terse') {\r\n            equaldistance = Math.sqrt(getInvolutePoint(rad, 5).distanceSquaredPoint(getInvolutePoint(rad, 6)));\r\n        } else {\r\n            equaldistance = Math.sqrt(getInvolutePoint(rad, 5 * Math.PI / 2).distanceSquaredPoint(getInvolutePoint(rad, 5 * Math.PI / 2 - tdSpacing)));\r\n        }\r\n        //重新开始布局节点\r\n        while (vert !== null) {\r\n            index++;\r\n            root.node.data.rad = rad;\r\n            //console.log(vert.node.data.key + \":\" + vert.node.data.text);\r\n            // involute spiral\r\n            //循环判断是否有覆盖，如果覆盖增加基圆半径，重新计算下一个位置\r\n            dangle = 0.4;\r\n            angleOld = angle;\r\n            //for(dangle=0.1;dangle<=0.9;dangle+=0.1){\r\n            for (var i = 0; i <= 20; i++) {\r\n                //圆的渐开线参数方程算出下一个节点位置\r\n                newPoint = getInvolutePoint(rad, angle);\r\n                newPoint = new go.Point(newPoint.x + root.node.location.x, newPoint.y + root.node.location.y);\r\n                x = newPoint.x;\r\n                y = newPoint.y;\r\n\r\n                if (vert.node instanceof go.Group && edge.link.toNode !== vert.node) {\r\n                    var offset = edge.link.toNode.location.copy().subtract(vert.node.location);\r\n                    newPoint.x -= offset.x;\r\n                    newPoint.y -= offset.y;\r\n                }\r\n                //tmpR = vert.node.actualBounds.width / 2 * Math.sqrt(2);\r\n                tmpR = vert.node.actualBounds.width / 2;\r\n                //curRect = new go.Rect(newPoint.x - tmpR/ 2, newPoint.y - tmpR / 2, tmpR, tmpR);\r\n                curRect = { point: newPoint, radius: tmpR };\r\n                res = checkCoveredWithNodes(curRect, nodesDealed);\r\n                //res = checkCovered(vert.node, newPoint, this.network.vertexes,nodesDealed);\r\n                //  //检查覆盖\r\n                if (res) {\r\n                    adjustAngleCount++;\r\n                    if (angle >= fromVert.node.data.angle + Math.PI / 2) {\r\n                        angle = fromVert.node.data.angle + Math.PI / 2;\r\n                        break;\r\n                    }\r\n                    //if (angle <= fromVert.node.data.angle + 0.2) {\r\n                    //  angle = fromVert.node.data.angle + 0.2;\r\n                    //}\r\n                    if (tdSpiralMode != 'equidistant') { //等距模式，不自动调节距离\r\n                        angle = fromVert.node.data.angle + (i + 1) * Math.PI / 16; //加的算法\r\n                        //dia = Math.max(equaldistance,vert.node.actualBounds.width / 2+ nextvert.node.actualBounds.width / 2);\r\n                        dept = cw * Math.atan((vert.node.actualBounds.width / 2 + fromVert.node.actualBounds.width / 2 + distance) / Math.sqrt(vert.node.location.distanceSquaredPoint(root.node.location)));\r\n                        if (angle <= fromVert.node.data.angle + dept) { //保证最小间距\r\n                            angle = fromVert.node.data.angle + dept;\r\n                        }\r\n                    } else {\r\n                        break;\r\n                    }\r\n\r\n                } else {\r\n                    break;\r\n                }\r\n\r\n            }\r\n\r\n            //检查覆盖，如果增加angle的方式没有消除覆盖，则增加半径\r\n            if (res) {\r\n                rad += 1; //加的算法\r\n                //angle = angleOld;\r\n                break; //如果有覆盖，则增加基圆半径，保证没有覆盖\r\n                //console.log(\"rad:\"+rad);\r\n            }\r\n\r\n            nextedge = vert.destinationEdges.first();\r\n            nextvert = (nextedge !== null ? nextedge.toVertex : null);\r\n\r\n            vert.centerX = newPoint.x;\r\n            vert.centerY = newPoint.y;\r\n            vert.node.data.angle = angle;\r\n\r\n            edge.link.data.unautoLink = false;\r\n            edge.link.rad = rad;\r\n            edge.link.angle1 = fromVert.node.data.angle;\r\n            edge.link.angle2 = vert.node.data.angle;\r\n\r\n            var equalSpiral = false;\r\n            if ('0512' == '0512') {\r\n                //角度小于一圈，且节点个数小于等于4个时，为了优化线条，节点间距离拉大，节点距离通过angle控制\r\n                //if (childCount <= 6  ) {\r\n                if (tdSpiralMode != 'terse') { //紧凑模式下，不自动调节节点\r\n                    if (childCount <= 6) {\r\n                        if (childCount * 1.3 < 3 * Math.PI / 2 && !hasGroup) {\r\n                            angle += Math.min((3 * Math.PI / 2 / childCount), Math.PI / 2);\r\n                        } else {\r\n                            if (vert.node.data[\"isGroup\"]) {\r\n                                equalSpiral = true;\r\n                            } else {\r\n                                angle += 1.3;\r\n                            }\r\n\r\n                        }\r\n                        //angle += 0.9;\r\n                    } else { //角度大于一圈，时等间距\r\n                        equalSpiral = true;\r\n                    }\r\n                } else {\r\n                    equalSpiral = true;\r\n                }\r\n\r\n                if (equalSpiral) {\r\n                    if (nextvert == null) {\r\n                        dia = equaldistance;\r\n                        dept = cw * Math.atan((dia + distance) / Math.sqrt(newPoint.distanceSquaredPoint(root.node.location))); //why?\r\n                    } else {\r\n                        dia = Math.max(equaldistance, vert.node.actualBounds.width / 2 + nextvert.node.actualBounds.width / 2);\r\n                        dept = cw * Math.atan((dia + distance) / Math.sqrt(newPoint.distanceSquaredPoint(root.node.location))); //why?\r\n                    }\r\n                    angle += dept;\r\n                }\r\n            }\r\n\r\n            tmpR = vert.node.actualBounds.width;\r\n            nodesDealed.add(curRect);\r\n            //nodesDealed.add({point:new go.Point(vert.centerX, vert.centerY), radius:vert.node.actualBounds.width/2});\r\n            edge = nextedge;\r\n            fromVert = vert;\r\n            vert = nextvert;\r\n        }\r\n\r\n        if (vert == null) {\r\n            _do = false;\r\n        }\r\n    }\r\n\r\n    // console.log(root.node.data.key + \":total compute layout times:\" + count);\r\n    this.updateParts();\r\n\r\n    this.network = null;\r\n    if (tdDebug) {\r\n        console.log(\"spiral dolayout end \" + root.node.data.key);\r\n    }\r\n};\r\n\r\nSpiralLayout.prototype.commitLayout = function() {\r\n    this.network.vertexes.each(function(v) {\r\n        v.commit();\r\n    });\r\n    this.network.edges.each(function(v) {\r\n        v.commit();\r\n    });\r\n    if (tdDebug) {\r\n        console.log(\"spiral layout end \");\r\n    }\r\n    //this.invalidateLayout();\r\n};\r\n\r\n/**\r\n * @ignore\r\n * Compute the effective diameter of a Node.\r\n * @this {SpiralLayout}\r\n * @param {LayoutVertex} v\r\n * @return {number}\r\n */\r\nSpiralLayout.prototype.diameter = function(v) {\r\n    if (!v) return 0;\r\n    var b = v.bounds;\r\n    return Math.sqrt(b.width * b.width / 4 + b.height * b.height / 4);\r\n};\r\n\r\n/**\r\n * Gets or sets the radius distance.\r\n * The default value is NaN.\r\n * @name SpiralLayout#radius\r\n * @function.\r\n * @return {number}\r\n */\r\n\r\nObject.defineProperty(SpiralLayout.prototype, \"radius\", {\r\n    get: function() { return this._radius; },\r\n    set: function(val) {\r\n        if (typeof val !== \"number\") throw new Error(\"new value for SpiralLayout.radius must be a number, not: \" + val);\r\n        if (this._radius !== val) {\r\n            this._radius = val;\r\n            this.invalidateLayout();\r\n        }\r\n    }\r\n});\r\n\r\n/**\r\n * Gets or sets the spacing between nodes.\r\n * The default value is 100.\r\n * @name SpiralLayout#spacing\r\n * @function.\r\n * @return {number}\r\n */\r\nObject.defineProperty(SpiralLayout.prototype, \"spacing\", {\r\n    get: function() { return this._spacing; },\r\n    set: function(val) {\r\n        if (typeof val !== \"number\") throw new Error(\"new value for SpiralLayout.spacing must be a number, not: \" + val);\r\n        if (this._spacing !== val) {\r\n            this._spacing = val;\r\n            this.invalidateLayout();\r\n        }\r\n    }\r\n});\r\n\r\nfunction computeOffset(newR, newStartAngle) {\r\n    //console.log(\"newStartAngle:\"+newStartAngle);\r\n    var ctl2, dy, dx; //需要调整\r\n    if (newStartAngle >= 0 && newStartAngle <= 90) {\r\n        dy = newR * Math.sin(newStartAngle * Math.PI / 180);\r\n        dx = newR * Math.cos(newStartAngle * Math.PI / 180);\r\n        return [dx, dy];\r\n    } else if (newStartAngle > 90 && newStartAngle <= 180) {\r\n        dy = newR * Math.sin((180 - newStartAngle) * Math.PI / 180);\r\n        dx = newR * Math.cos((180 - newStartAngle) * Math.PI / 180);\r\n        return [-dx, dy];\r\n    } else if (newStartAngle > 180 && newStartAngle <= 270) {\r\n        dy = newR * Math.sin((newStartAngle - 180) * Math.PI / 180);\r\n        dx = newR * Math.cos((newStartAngle - 180) * Math.PI / 180);\r\n        return [-dx, -dy];\r\n    } else if (newStartAngle > 270 && newStartAngle <= 360) {\r\n        dy = newR * Math.sin((360 - newStartAngle) * Math.PI / 180);\r\n        dx = newR * Math.cos((360 - newStartAngle) * Math.PI / 180);\r\n        return [dx, -dy];\r\n    }\r\n}\r\n\r\nfunction computeControlPoint(p1, p2, p3) {\r\n\r\n    var result;\r\n    result = arguments[3] ? arguments[3] : triangleCircle(p1, p2, p3);\r\n    var radius = result[0];\r\n    var cent = new go.Point(result[1], result[2]);\r\n\r\n    //起始节点的弧度\r\n    var sweep = Math.abs(cent.directionPoint(p1) - cent.directionPoint(p3));\r\n    sweep = sweep > 180 ? 360 - sweep : sweep;\r\n    //console.log(\"sweep:\"+sweep);\r\n    var newR = radius / Math.cos(sweep / 3 * Math.PI / 180);\r\n    var geo = new go.Geometry(go.Geometry.Line);\r\n    geo.startX = cent.x;\r\n    geo.startY = cent.y;\r\n    geo.endX = p1.x;\r\n    geo.endY = p1.y;\r\n    geo.rotate(sweep / 3, cent.x, cent.y); //相对圆心旋转3分之1弧度\r\n    var newStartAngle = cent.direction(geo.endX, geo.endY);\r\n    var ctl1;\r\n    result = computeOffset(newR, newStartAngle);\r\n    ctl1 = cent.copy().offset(result[0], result[1]);\r\n\r\n    geo.rotate(sweep / 3, cent.x, cent.y); //相对圆心旋转3分之1弧度\r\n    newStartAngle = cent.direction(geo.endX, geo.endY);\r\n\r\n    var ctl2; //需要调整\r\n    result = computeOffset(newR, newStartAngle);\r\n    ctl2 = cent.copy().offset(result[0], result[1]);\r\n\r\n    return [ctl1, ctl2];\r\n}\r\n\r\n/**\r\n * Gets or sets whether the spiral should go clockwise or counter-clockwise.\r\n * The default value is true.\r\n * @name SpiralLayout#clockwise\r\n * @function.\r\n * @return {boolean}\r\n */\r\nObject.defineProperty(SpiralLayout.prototype, \"clockwise\", {\r\n    get: function() { return this._clockwise; },\r\n    set: function(val) {\r\n        if (typeof val !== \"boolean\") throw new Error(\"new value for SpiralLayout.clockwise must be a boolean, not: \" + val);\r\n        if (this._clockwise !== val) {\r\n            this._clockwise = val;\r\n            this.invalidateLayout();\r\n        }\r\n    }\r\n});\r\n\r\n/**\r\n 处理：如三点共线，则返回false；否则，返回true，并将计算得到的圆心与半径存放在center和radius众返回。\r\n    */\r\nfunction triangleCircle(p1, p2, p3) {\r\n    //检查三点是否共线\r\n    if (isThreePointsOnOneLine(p1, p2, p3))\r\n        return false;\r\n\r\n    var x1, x2, x3, y1, y2, y3, radius;\r\n\r\n    x1 = p1.x;\r\n    x2 = p2.x;\r\n    x3 = p3.x;\r\n    y1 = p1.y;\r\n    y2 = p2.y;\r\n    y3 = p3.y;\r\n\r\n    //求外接圆半径\r\n    var a = Math.sqrt((x1 - x2) * (x1 - x2) + (y1 - y2) * (y1 - y2));\r\n    var b = Math.sqrt((x1 - x3) * (x1 - x3) + (y1 - y3) * (y1 - y3));\r\n    var c = Math.sqrt((x2 - x3) * (x2 - x3) + (y2 - y3) * (y2 - y3));\r\n    var p = (a + b + c) / 2;\r\n    var S = Math.sqrt(p * (p - a) * (p - b) * (p - c));\r\n    radius = a * b * c / (4 * S);\r\n\r\n    //求外接圆圆心\r\n    var t1 = x1 * x1 + y1 * y1;\r\n    var t2 = x2 * x2 + y2 * y2;\r\n    var t3 = x3 * x3 + y3 * y3;\r\n    var temp = x1 * y2 + x2 * y3 + x3 * y1 - x1 * y3 - x2 * y1 - x3 * y2;\r\n    var x = (t2 * y3 + t1 * y2 + t3 * y1 - t2 * y1 - t3 * y2 - t1 * y3) / temp / 2;\r\n    var y = (t3 * x2 + t2 * x1 + t1 * x3 - t1 * x2 - t2 * x3 - t3 * x1) / temp / 2;\r\n\r\n\r\n    var result = [];\r\n    result = [radius, x, y];\r\n    return result;\r\n}\r\n\r\n/**\r\n 判断3个点是否共线\r\n    */\r\nfunction isThreePointsOnOneLine(p1, p2, p3) {\r\n    return false;\r\n}\r\n\r\n\r\nmodule.exports = SpiralLayout;\n\n\n// WEBPACK FOOTER //\n// ./src/layout/SpiralLayout.js","// require('./core/core.controller')(Trtd);\r\n// import * as go from 'gojs';\r\nlet SpiralLayout = require('../layout/SpiralLayout');\r\nvar helpers = require('../helpers/helpers.gojs')\r\n// var commonFun = require('./commonFun')\r\nvar TRTD_BASE = require('./trtd').Trtd\r\nlet lang = require('../assets/localization');\r\nvar createNodeTemplate = require('../nodeTemplate/createNodeTemplate')\r\nvar createPictureSingleNodeTemplate = require('../nodeTemplate/createPictureSingleNodeTemplate')\r\nvar createPictureNodeTemplate = require('../nodeTemplate/createPictureNodeTemplate')\r\nvar createTextNodeTemplate = require('../nodeTemplate/createTextNodeTemplate')\r\nvar createNodeSvgTemplate = require('../nodeTemplate/createNodeSvgTemplate')\r\n\r\nvar createTianpanLink = require('../linkTemplate/createTianpanLink')\r\n\r\nvar $ = go.GraphObject.make;\r\n\r\nvar colorMap = [\r\n    \"#FFBFBF\",\r\n    \"#E9BFFF\",\r\n    \"#D1FF72\",\r\n    \"#00A2E8\",\r\n    \"#99D9EA\"\r\n];\r\n\r\n\r\nclass Trtd  extends TRTD_BASE {\r\n\tconstructor(div, config){\r\n        super(div, config)\r\n\t\tthis.config = config;\r\n\t\tthis.modelChangedListener = config.modelChangedListener;\r\n\t\tthis.type = config.type;\r\n\t\tthis.diagram = {};\r\n        this.model = config.model;\r\n        this.initDiagramBase(div, config); // 基类初始化diagram\r\n\t\t// 初始化diagram\r\n        this.initDiagram(div, config);\r\n        // this.diagram.__trtd = this;\r\n\t\tthis.initListener();\r\n\t\t// Then you will need to construct a Model (usually a GraphLinksModel) for the Diagram, initialize its data by setting its Model.nodeDataArray and other properties, and then set the diagram's model.\r\n        if(this.model){\r\n            this.initModel();\r\n        }\r\n\t}\r\n/**\r\n * method 初始化diagram\r\n * @param {*} div \r\n * @param {*} config \r\n */\r\n\tinitDiagram(div, config){\r\n        var defaultConfig = {\r\n            // layout: go.GraphObject.make(SpiralLayout, {\r\n            //     isRealtime: false,\r\n            //     radius: NaN,\r\n            //     clockwise: true,\r\n            //     //,spacing:100,\r\n            //     isInitial: true\r\n            // }) \r\n          }\r\n        var diagramConfig = Object.assign(defaultConfig, config.diagramConfig);\r\n        this.diagram.setProperties(diagramConfig);\r\n        this.addNodeTemplate();\r\n        // this.customMenu();\r\n \r\n        this.addLinkTemplate();\r\n        this.addGroupTemplate();\r\n    }\r\n    getTdData(){\r\n        return this.diagram.model.toJson()\r\n    }\r\n    // 以下两个方法控制菜单显示\r\n    getDefaultCustomMenuDivStr(){\r\n        return `\r\n        <ul>\r\n            <li trtd_action=\"addFollower\"><a class=\"i18n\" data-lang=\"insertsl\">插入同级节点</a></li>\r\n            <li trtd_action=\"startNewSpiral\"><a class=\"i18n\" data-lang=\"icn\">插入子节点</a></li>\r\n            <li trtd_action=\"apiDuplicateNode\"><a class=\"i18n\" data-lang=\"duplicateNode\">复制节点</a></li>\r\n            <li trtd_action=\"apiDeleteSelection\"><a class=\"i18n\" data-lang=\"remove\">删除</a></li>\r\n            <li trtd_action=\"orderChildNode\"><a class=\"i18n\" data-lang=\"ordernode\">子节点编号</a></li>\r\n            <li trtd_action=\"clearOrderChildNode\"><a class=\"i18n\" data-lang=\"clearordernode\">取消子节点编号</a></li>\r\n            <li trtd_action=\"clearNodeTextMenu\"><a class=\"i18n\" data-lang=\"emptynodetext\">清空节点文本</a></li>\r\n            <li trtd_action=\"apiInsertTianpanNode\"><a class=\"i18n\" data-lang=\"insertnodetianpan\">插入天盘节点</a></li>\r\n            <li trtd_action=\"addTextNode\"><a class=\"i18n\" data-lang=\"inserttext\">插入文本</a></li>\r\n            <li trtd_action=\"locateRootNodeMenu\"><a class=\"i18n\" data-lang=\"locaterootnode\">定位根节点</a></li>\r\n            <li trtd_action=\"showAllNodesMenu\"><a class=\"i18n\" data-lang=\"displayallnodes\">显示所有节点</a></li>\r\n            <li trtd_action=\"fixPictureMenu\"><a class=\"i18n\" data-lang=\"fixnode\">固定节点</a></li>\r\n            <li trtd_action=\"activePictureMenu\"><a class=\"i18n\" data-lang=\"cancelfix\">取消固定</a></li>\r\n\r\n            <li trtd_action=\"delYunpanAxis\"><a class=\"i18n\" data-lang=\"cancelfix\">删除 CTRL+DEL</a></li>\r\n            <li trtd_action=\"addYunpanAxis\"><a class=\"i18n\" data-lang=\"cancelfix\">增加 CTRL+X/Y</a></li>\r\n        </ul>\r\n        `\r\n    }\r\n    \r\n    getShowContextMenus(node){\r\n        var showIds = \"\"\r\n        if(node){\r\n            if(node.data.category == \"autoText\"){\r\n                return \"apiDeleteSelection\"\r\n            }\r\n            if(node.data.category == \"picGroup\"){\r\n                return \"apiDeleteSelection\"\r\n            }\r\n            if( node.data.category == \"8\"){\r\n                showIds = \"apiDeleteSelection,\";\r\n            }\r\n            if( node.data.category == \"text\"){\r\n                showIds = \"apiDeleteSelection,\" + \"apiDuplicateNode\";\r\n            }\r\n            if( node.data.category == \"3\"){\r\n                showIds = \"apiDeleteSelection,\";\r\n                if(node.selectable){\r\n                    showIds += \",fixPictureMenu\"\r\n                }else{\r\n                    showIds += \",activePictureMenu\"\r\n                }\r\n            }\r\n            if( node.data.category == \"0\" || node.data.category == \"1\" || node.data.category == \"2\" || node.data.category == \"\"){\r\n                showIds = \"apiDeleteSelection,apiDuplicateNode,addFollower,startNewSpiral,orderChildNode,clearOrderChildNode\";\r\n            }\r\n            if(node.data.category == \"yunpanx\"||node.data.category == \"yunpany\"){\r\n                showIds = \"delYunpanAxis,addYunpanAxis\";\r\n            }\r\n            // return \"addFollowerGround,\" + \"addNewCircle,\"+\"apiDeleteSelection\";\r\n        }else{\r\n            // return \"addFollowerGround\"\r\n            showIds = \"addTextNode,apiInsertTianpanNode\"\r\n        }\r\n        return showIds;\r\n    }\r\n\r\n    apiInsertTianpanNode(){\r\n        var myDiagram = this.diagram;\r\n        myDiagram.startTransaction();\r\n        var nodeData = {\r\n            \"key\":helpers.guid(), \"text\":\"双击编辑内容\", \"level\":0,\r\n         \"radius\":100,  \"fill\":\"white\", \"category\":\"0\", \r\n         \"strokeWidth\":2, \"stroke\":\"black\", \"font\":\"bold 18px 幼圆\", \"textStroke\":\"black\", \"newAdd\":true, \"angle\":5}\r\n        // var text = { text: message||lang.trans('blankText'), category: 'text' };\r\n        nodeData.loc = go.Point.stringify(myDiagram.lastInput.documentPoint);\r\n        myDiagram.model.addNodeData(nodeData);\r\n        myDiagram.commitTransaction()\r\n        // this.diagram.toolManager.clickCreatingTool.insertPart(this.diagram.lastInput.documentPoint);\r\n    }\r\n    fixPictureMenu(){\r\n        var myDiagram = this.diagram\r\n        // var node = myDiagram.selection.first();\r\n        var node = myDiagram.findPartAt(myDiagram.lastInput.documentPoint, false);\r\n        myDiagram.startTransaction();\r\n        myDiagram.model.setDataProperty(node.data, \"selectable\", node.data.selectable != undefined ? (!node.data.selectable) : false);\r\n        myDiagram.commitTransaction();\r\n    }\r\n\r\n    activePictureMenu(){\r\n        this.fixPictureMenu()\r\n    }\r\n    addTextNode(message){\r\n        console.log('eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee:');\r\n        var myDiagram = this.diagram;\r\n        myDiagram.startTransaction();\r\n        var text = { text: message||lang.trans('blankText'), category: 'autoText' };\r\n        text.loc = go.Point.stringify(myDiagram.lastInput.documentPoint);\r\n        myDiagram.model.addNodeData(text);\r\n        myDiagram.commitTransaction()\r\n    }\r\n    guid() {\r\n        function S4() {\r\n            return (((1+Math.random())*0x10000)|0).toString(16).substring(1);\r\n        }\r\n    return (S4()+S4()+\"-\"+S4()+\"-\"+S4()+\"-\"+S4()+\"-\"+S4()+S4()+S4());\r\n    }\r\n    \r\n\r\n    /**\r\n     * method 初始化model\r\n     */\r\n\tinitModel(model){\r\n        if(model){\r\n            this.model = model;\r\n        }\r\n        console.log('initModel')\r\n        var tmpModel = go.Model.fromJson(this.model);\r\n        if(tmpModel.modelData.currentType == 'dipan'){\r\n            tmpModel.nodeDataArray = tmpModel.nodeDataArray.filter((d)=>{\r\n                if(!d.isGroup){\r\n                    delete d.group\r\n                    return true;\r\n                }\r\n            })\r\n            // tmpModel.nodeDataArray = \r\n            tmpModel.linkDataArray=[]\r\n        }\r\n        if(!tmpModel.modelData.currentType){\r\n            tmpModel.modelData.currentType = this.type;\r\n        }\r\n        if([\"jin\",\"shui\",\"wheel\",\"huo\"].indexOf(this.type)>-1 ){\r\n            tmpModel.modelData.currentType = \"tianpan\"\r\n        }\r\n        console.log(\" tmpModel.modelData.currentType\")\r\n        this.diagram.layout.isInitial = false;\r\n        //randomUrl(tmpModel);\r\n        tmpModel.modelData.type = this.type\r\n        for(var i = 0;i<tmpModel.nodeDataArray.length;i++){\r\n            if(tmpModel.nodeDataArray[i].category == \"waveGroup\"){\r\n                if(!tmpModel.nodeDataArray[i].centerTextAngle){\r\n                    tmpModel.nodeDataArray[i].centerTextAngle = \"independent\"\r\n                }\r\n                if(!tmpModel.nodeDataArray[i].centerTextMode){\r\n                    tmpModel.nodeDataArray[i].centerTextMode = \"independent\"\r\n                }\r\n                if(!tmpModel.nodeDataArray[i].maxOlive){\r\n                    tmpModel.nodeDataArray[i].maxOlive = 50\r\n                }\r\n            }\r\n            if(tmpModel.nodeDataArray[i].category == \"yunGroup\"){\r\n                if(!tmpModel.nodeDataArray[i].shapeStrokes){\r\n                    tmpModel.nodeDataArray[i].shapeStrokes = [\"RGBA(237,28,36,0.3)\",\"RGBA(255,192,0,0.3)\",\"RGBA(255,255,0,0.3)\",\"RGBA(146,208,80,0.3)\",\"RGBA(192,200,250,0.3)\",\"RGBA(255,178,125,0.3)\",\"RGBA(209,110,210,0.3)\",\"RGBA(248,163,62,0.3)\",\"RGBA(248,161,164,0.3)\",\"RGBA(244,115,120,0.3)\"]\r\n                }\r\n                if(!tmpModel.nodeDataArray[i].beginSpark){\r\n                    tmpModel.nodeDataArray[i].beginSpark = \"line\"\r\n                }\r\n                if(tmpModel.nodeDataArray[i].showShape == null){\r\n                    tmpModel.nodeDataArray[i].showShape = true\r\n                }\r\n            }\r\n            if(tmpModel.nodeDataArray[i].category == \"shape\" && tmpModel.nodeDataArray[i].role == \"background\"){\r\n                tmpModel.nodeDataArray[i].visible = true\r\n            }\r\n            if(tmpModel.nodeDataArray[i].role && tmpModel.nodeDataArray[i].role.indexOf(\"labelText\") > -1 ){\r\n                tmpModel.nodeDataArray[i].movable = true;\r\n            }\r\n            if(tmpModel.nodeDataArray[i].category == \"labelGroup\"){\r\n                tmpModel.nodeDataArray[i].selectable = false\r\n            }\r\n        }\r\n        // tmpModel.modelData.version = Trtd.version\r\n        // console.log(\" tmpModel.modelData.version \",  tmpModel.modelData.version)\r\n        this.diagram.model = tmpModel;\r\n        // this.diagram.model.copyNodeDataFunction = function(object, model) {\r\n        //     console.log(\"copyNodeDataFunctioncopyNodeDataFunctioncopyNodeDataFunction\")\r\n        //     // if (object.isGroup) {\r\n        //     //     return null;\r\n        //     // }\r\n        //     // var outputObj = null;\r\n        //     var outputObj = JSON.parse(JSON.stringify(object))\r\n        //     // outputObj.level = 0;\r\n        //     // outputObj.next = undefined;\r\n        //     // outputObj.group = undefined;\r\n        //     // outputObj.prev = undefined;\r\n        //     // outputObj.isparent = undefined;\r\n        //     // outputObj.parent = undefined;\r\n        //     // outputObj.copiedKey = outputObj.key;\r\n        //     delete outputObj.key;\r\n        //     delete outputObj.__gohashid;\r\n        //     delete outputObj.points;\r\n        //     // if(object.category == \"autoText\" && object.role != \"freeText\"){\r\n        //     //     delete object.dimKey;\r\n        //     //     delete object.role;\r\n        //     //     delete object.subRole;\r\n        //     // }\r\n        //     return object;\r\n        // }\r\n        // configModel(myDiagram.model);\r\n        this.diagram.updateAllTargetBindings();\r\n        // this.saveModel()\r\n    }\r\n    loadModel(model){\r\n        // console.log(model)\r\n        this.initModel(model)\r\n    }\r\n    // addNodeFile(model){\r\n    //     console.log(model)\r\n    // }\r\n    /**\r\n     * method: 初始化监听方法\r\n     */\r\n\tinitListener(){\r\n\t\tconsole.log('initListener')\r\n    }\r\n\r\n    addGroupTemplate(){\r\n        // return function getGroupTemplate() {\r\n            this.diagram.groupTemplateMap.add(\"\", $(go.Group, \"Auto\", {\r\n                    layerName: \"Background\",\r\n                    selectable: false,\r\n                    pickable: false,\r\n                    locationSpot: go.Spot.Center,\r\n                    ungroupable: true,\r\n                    alignment: go.Spot.Center,\r\n                    click: function(d) {\r\n                        // alert('click group');\r\n                        // d.diagram.clearSelection();\r\n                    },\r\n                    contextClick: function(d) {\r\n                        // alert('click right group');\r\n                    },\r\n                    alignmentFocus: go.Spot.Center,\r\n                    // contextMenu: nodeContextMenu,\r\n                    selectionAdornmentTemplate: $(go.Adornment, \"Spot\",\r\n                        $(go.Panel, \"Auto\",\r\n                            $(go.Shape, 'Circle', { stroke: \"dodgerblue\", strokeWidth: 2, fill: null },\r\n                                new go.Binding(\"width\", \"\", function(v) {\r\n                                    var node = myDiagram.selection.first();\r\n                                    if (node instanceof go.Group) {\r\n                                        return node.actualBounds.width;\r\n                                    }\r\n                                }),\r\n                                new go.Binding(\"height\", \"\", function(v) {\r\n                                    var node = myDiagram.selection.first();\r\n                                    if (node instanceof go.Group) {\r\n                                        return node.actualBounds.height;\r\n                                    }\r\n                                })),\r\n                            //new go.Binding('wit')),\r\n                            $(go.Placeholder)\r\n                        ),\r\n                        $(go.Panel, \"Horizontal\", { alignment: go.Spot.Top, alignmentFocus: go.Spot.Bottom })\r\n                    ),\r\n                    copyable: false\r\n                }, {\r\n                    layout: $(SpiralLayout, {\r\n                        isRealtime: false,\r\n                        radius: NaN,\r\n                        clockwise: true,\r\n                        isInitial: false\r\n                    }),\r\n                    layoutConditions: go.Part.LayoutStandard & ~go.Part.LayoutNodeSized & ~go.Part.LayoutAdded\r\n                },\r\n                new go.Binding(\"location\", \"loc\", go.Point.parse).makeTwoWay(go.Point.stringify),\r\n                $(go.Panel, \"Auto\",\r\n                    $(go.Shape, \"Circle\", {\r\n                            name: \"SHAPE\",\r\n                            fill: \"rgba(212,230,188,0)\",\r\n                            stroke: null,\r\n                            // ,\r\n                            //width:300,\r\n                            //height:300,\r\n                            spot1: new go.Spot(0.01, 0.01),\r\n                            spot2: new go.Spot(0.99, 0.99)\r\n                        },\r\n                        new go.Binding(\"stroke\", \"stroke\", function(v) {\r\n                            return v instanceof go.Brush ? v.stroke : v;\r\n                        }).makeTwoWay(),\r\n                        new go.Binding(\"strokeWidth\", \"strokeWidth\", function(d) {\r\n                            return d;\r\n                        }).makeTwoWay(function(d) {\r\n                            return d;\r\n                        }),\r\n                        new go.Binding(\"figure\", \"figure\").makeTwoWay(),\r\n                        new go.Binding(\"desiredSize\", \"radius\", function(v) {\r\n                            //alert(v);\r\n        \r\n                            var radius = parseInt(v ? v : 100);\r\n                            var size = new go.Size(radius, radius);\r\n                            return size;\r\n                        }).makeTwoWay(function(v) {\r\n                            return v.width;\r\n                        })\r\n                    ),\r\n                    $(go.Placeholder, {\r\n                        // margin: tdSpiralMode == 'terse' ? -10 : 0\r\n                        margin: 0\r\n                    })\r\n                )\r\n            )\r\n        )\r\n    }\r\n    /**\r\n     * 添加节点模板\r\n     */\r\n    addNodeTemplate(){\r\n\r\n        var that = this;\r\n        var myDiagram = this.diagram\r\n        // var globalProperties = this.tdGetModelData(null, myDiagram.model,myDiagram); //获取所有全局属性到一个对象中,从localstorage中\r\n        //var layerThickness = myDiagram.model.modelData.layerThickness;\r\n        // var layerThickness = parseInt(globalProperties['layerThickness']);\r\n        // console.log(layerThickness)\r\n        // var tdDipanTextAngle = globalProperties['tdDipanTextAngle'];\r\n        // console.log(tdDipanTextAngle)\r\n\r\n        // myDiagram.nodeTemplateMap.add(\"dipan\", this.createDipanTemplate(layerThickness,tdDipanTextAngle));\r\n        // myDiagram.nodeTemplateMap.add(\"Root\", this.getDipanRootTemplate(layerThickness));\r\n        // myDiagram.nodeTemplateMap.add(\"text\", );\r\n        this.addNodeTemplateBase()\r\n        myDiagram.nodeTemplateMap.add(\"0\", createNodeTemplate(this.diagram));\r\n        myDiagram.nodeTemplateMap.add(\"1\", createNodeTemplate(this.diagram));\r\n        myDiagram.nodeTemplateMap.add(\"2\", createNodeTemplate(this.diagram));\r\n        myDiagram.nodeTemplateMap.add(\"3\", createPictureSingleNodeTemplate(this.diagram));\r\n        myDiagram.nodeTemplateMap.add(\"4\", createPictureNodeTemplate(this.diagram));\r\n        // myDiagram.nodeTemplateMap.add(\"text\", createTextNodeTemplate(this.diagram));\r\n        myDiagram.nodeTemplateMap.add(\"\", createNodeTemplate(this.diagram));\r\n\r\n        myDiagram.nodeTemplateMap.add(\"8\",createNodeSvgTemplate(this.diagram));\r\n\r\n        \r\n    }\r\n\r\n    addLinkTemplate(){\r\n        this.diagram.linkTemplateMap.add(\"\", createTianpanLink(this.diagram));\r\n        // myDiagram.linkTemplateMap.add(\"\", linkTemplate.getTianpanLink());\r\n    }\r\n\r\n    /***\r\n     * 将node(包括它的后代)设置为parent的第一个孩子. 如果parent是Node的后代，则不操作\r\n     * @param node go.Node Type\r\n     * @param parent go.Node Type\r\n     */\r\n    setNodeAsChildren(node, parent) {\r\n        if (isDescendant(parent, node)) {\r\n            //illegal action\r\n            return;\r\n        }\r\n        if (parent.data.isparent == node.data.key) {\r\n            return;\r\n        }\r\n\r\n        var diagram = node.diagram,\r\n            model = node.diagram.model;\r\n\r\n        model.startTransaction('setNodeAsChildren');\r\n        disconnectFromTreeStructure(node);\r\n\r\n        //add as the child of parent\r\n        if (parent.data.isparent) {\r\n            //if has children\r\n            var firstChild = diagram.findNodeForKey(parent.data.isparent);\r\n            model.setDataProperty(parent.data, 'isparent', node.data.key);\r\n            model.setDataProperty(firstChild.data, 'prev', node.data.key);\r\n            model.setDataProperty(node.data, 'next', firstChild.data.key);\r\n            model.setDataProperty(node.data, 'parent', parent.data.key);\r\n            // model.setDataProperty(node.data, 'fill', firstChild.data.fill);\r\n\r\n            var link = parent.findLinksTo(firstChild).first();\r\n            model.setToKeyForLinkData(link.data, node.data.key);\r\n            var newLink = model.copyLinkData(link.data);\r\n            newLink.from = node.data.key;\r\n            newLink.to = firstChild.data.key;\r\n            model.addLinkData(newLink);\r\n\r\n        } else {\r\n            //if it's a single node which has no children\r\n            model.setDataProperty(parent.data, 'isparent', node.data.key);\r\n            model.setDataProperty(node.data, 'next', null);\r\n            model.setDataProperty(node.data, 'parent', parent.data.key);\r\n            var newLink = { from: parent.data.key, to: node.data.key, level: parent.data.level + 1, isTreeLink: true };\r\n            // if (parent.findLinksInto().first()) {\r\n            //     newLink.strokeWidth = Math.max(1, parent.findLinksInto().first().data.strokeWidth - 0.5);\r\n            // } else {\r\n            //     newLink.strokeWidth = 4;\r\n            // }\r\n\r\n            newLink.strokeWidth = 2;\r\n\r\n            applyTheme2Link(newLink, node);\r\n            model.addLinkData(newLink);\r\n\r\n            var newGroup = {\r\n                isGroup: true,\r\n                group: parent.data.group,\r\n                parent: parent.data.key,\r\n                key: \"g_\" + parent.data.key,\r\n                level: parent.data.level\r\n            }\r\n            model.addNodeData(newGroup);\r\n            model.setDataProperty(parent.data, \"group\", newGroup.key);\r\n        }\r\n\r\n        //update group\r\n        var nodeGroup = node.containingGroup;\r\n        if (nodeGroup && nodeGroup.data.parent == node.data.key) {\r\n            model.setDataProperty(nodeGroup.data, 'group', parent.data.group);\r\n        } else {\r\n            if (node.data.parent == null && node.data.isparent != null) {\r\n                //add group for root node\r\n                addGroupForNode(node, parent.data.group);\r\n            } else {\r\n                model.setDataProperty(node.data, \"group\", parent.data.group);\r\n            }\r\n        }\r\n\r\n        //update level\r\n        var diff = node.data.level - parent.data.level - 1;\r\n        helpers.travelParts(node, function(part) {\r\n            model.setDataProperty(part.data, 'level', part.data.level - diff);\r\n        });\r\n        model.commitTransaction('setNodeAsChildren');\r\n    }\r\n\r\n    /***\r\n     * 将node(包括它的后代)设置为sibling的下一个兄弟\r\n     * @param node  go.Node Type\r\n     * @param sibling go.Node Type\r\n     */\r\n    setNodeAsSibling(node, sibling) {\r\n        if (isDescendant(sibling, node)) {\r\n            //illegal action\r\n            return;\r\n        }\r\n        if (sibling.data.next == node.data.key) {\r\n            return;\r\n        }\r\n    \r\n        var diagram = node.diagram,\r\n            model = node.diagram.model;\r\n    \r\n        model.startTransaction('setNodeAsSibling');\r\n        disconnectFromTreeStructure(node);\r\n    \r\n        //add as next brother of sibling\r\n        if (sibling.data.next != null) {\r\n            var nextNode = diagram.findNodeForKey(sibling.data.next);\r\n            model.setDataProperty(sibling.data, 'next', node.data.key);\r\n            model.setDataProperty(node.data, 'next', nextNode.data.key);\r\n            model.setDataProperty(node.data, 'prev', sibling.data.key);\r\n            model.setDataProperty(nextNode.data, 'prev', node.data.key);\r\n            model.setDataProperty(node.data, 'parent', sibling.data.parent);\r\n            // model.setDataProperty(node.data, 'fill', sibling.data.fill);\r\n    \r\n            var link = sibling.findLinksTo(nextNode).first();\r\n            model.setToKeyForLinkData(link.data, node.data.key);\r\n            var newLink = model.copyLinkData(link.data);\r\n            newLink.from = node.data.key;\r\n            newLink.to = nextNode.data.key;\r\n            model.addLinkData(newLink);\r\n        } else {\r\n            model.setDataProperty(sibling.data, 'next', node.data.key);\r\n            model.setDataProperty(node.data, 'next', null);\r\n            model.setDataProperty(node.data, 'prev', sibling.data.key);\r\n            model.setDataProperty(node.data, 'parent', sibling.data.parent);\r\n            // console.log(\"sibling.data.fill\",sibling.data.fill)\r\n            model.setDataProperty(node.data, 'fill', sibling.data.fill);\r\n    \r\n            var preLink = sibling.findLinksInto().first();\r\n            var newLink = model.copyLinkData(preLink.data);\r\n            newLink.from = sibling.data.key;\r\n            newLink.to = node.data.key;\r\n            model.addLinkData(newLink);\r\n        }\r\n    \r\n        //update level\r\n        var diff = node.data.level - sibling.data.level;\r\n        helpers.travelParts(node, function(part) {\r\n            model.setDataProperty(part.data, 'level', part.data.level - diff);\r\n        });\r\n    \r\n        //update group\r\n        var nodeGroup = node.containingGroup;\r\n        var parent = diagram.findNodeForKey(sibling.data.parent);\r\n        if (nodeGroup && nodeGroup.data.parent == node.data.key) {\r\n            model.setDataProperty(node.containingGroup.data, 'group', parent.data.group);\r\n        } else {\r\n            if (node.data.parent == null && node.data.isparent != null) {\r\n                //add group for root node\r\n                addGroupForNode(node, parent.data.group);\r\n            } else {\r\n                model.setDataProperty(node.data, \"group\", parent.data.group);\r\n            }\r\n        }\r\n        if (parent && parent.containingGroup) {\r\n            var parentGroup = parent.containingGroup;\r\n            if (parentGroup) {\r\n                parentGroup.layout.isOngoing = true;\r\n                parentGroup.layout.isValidLayout = false;\r\n            }\r\n        }\r\n        model.commitTransaction('setNodeAsSibling');\r\n    }\r\n\r\n\r\n    /***\r\n     * 将node(包括它的后代)设置为parent的第一个孩子. 如果parent是Node的后代，则不操作\r\n     * @param node go.Node Type\r\n     * @param parent go.Node Type\r\n     */\r\n    setNodeAsChildren(node, parent) {\r\n        if (isDescendant(parent, node)) {\r\n            //illegal action\r\n            return;\r\n        }\r\n        if (parent.data.isparent == node.data.key) {\r\n            return;\r\n        }\r\n\r\n        var diagram = node.diagram,\r\n            model = node.diagram.model;\r\n\r\n        model.startTransaction('setNodeAsChildren');\r\n        disconnectFromTreeStructure(node);\r\n\r\n        //add as the child of parent\r\n        if (parent.data.isparent) {\r\n            //if has children\r\n            var firstChild = diagram.findNodeForKey(parent.data.isparent);\r\n            model.setDataProperty(parent.data, 'isparent', node.data.key);\r\n            model.setDataProperty(firstChild.data, 'prev', node.data.key);\r\n            model.setDataProperty(node.data, 'next', firstChild.data.key);\r\n            model.setDataProperty(node.data, 'parent', parent.data.key);\r\n            // model.setDataProperty(node.data, 'fill', firstChild.data.fill);\r\n\r\n            var link = parent.findLinksTo(firstChild).first();\r\n            model.setToKeyForLinkData(link.data, node.data.key);\r\n            var newLink = model.copyLinkData(link.data);\r\n            newLink.from = node.data.key;\r\n            newLink.to = firstChild.data.key;\r\n            model.addLinkData(newLink);\r\n\r\n        } else {\r\n            //if it's a single node which has no children\r\n            model.setDataProperty(parent.data, 'isparent', node.data.key);\r\n            model.setDataProperty(node.data, 'next', null);\r\n            model.setDataProperty(node.data, 'parent', parent.data.key);\r\n            var newLink = { from: parent.data.key, to: node.data.key, level: parent.data.level + 1, isTreeLink: true };\r\n            // if (parent.findLinksInto().first()) {\r\n            //     newLink.strokeWidth = Math.max(1, parent.findLinksInto().first().data.strokeWidth - 0.5);\r\n            // } else {\r\n            //     newLink.strokeWidth = 4;\r\n            // }\r\n\r\n            newLink.strokeWidth = 2;\r\n\r\n            applyTheme2Link(newLink, node);\r\n            model.addLinkData(newLink);\r\n\r\n            var newGroup = {\r\n                isGroup: true,\r\n                group: parent.data.group,\r\n                parent: parent.data.key,\r\n                key: \"g_\" + parent.data.key,\r\n                level: parent.data.level\r\n            }\r\n            model.addNodeData(newGroup);\r\n            model.setDataProperty(parent.data, \"group\", newGroup.key);\r\n        }\r\n\r\n        //update group\r\n        var nodeGroup = node.containingGroup;\r\n        if (nodeGroup && nodeGroup.data.parent == node.data.key) {\r\n            model.setDataProperty(nodeGroup.data, 'group', parent.data.group);\r\n        } else {\r\n            if (node.data.parent == null && node.data.isparent != null) {\r\n                //add group for root node\r\n                addGroupForNode(node, parent.data.group);\r\n            } else {\r\n                model.setDataProperty(node.data, \"group\", parent.data.group);\r\n            }\r\n        }\r\n\r\n        //update level\r\n        var diff = node.data.level - parent.data.level - 1;\r\n        helpers.travelParts(node, function(part) {\r\n            model.setDataProperty(part.data, 'level', part.data.level - diff);\r\n        });\r\n        model.commitTransaction('setNodeAsChildren');\r\n    }\r\n\r\n\r\n    // tdGetModelData(name,model) { //获取盘的model.modelData中的全局属性 \r\n    //     // if(myDiagram1){\r\n    //     //     myDiagram = myDiagram1\r\n    //     // }\r\n    //     var myDiagram = this.diagram\r\n    //     var  model = myDiagram.model\r\n    //     var defaultVal = {\r\n    //         currentType: 'tianpan',\r\n    //         currentThemeID: 0,\r\n    //         layerThickness: 100,\r\n    //         splitLayer: 1,\r\n    //         layout: 'inner',\r\n    //         tdDipanTextAngle: 'xuanzhuan'\r\n    //     };\r\n    //     console.log(\"getRootNodeData1111111111111111111111\")\r\n    //     var root = getRootNodeData(model);\r\n    //     if (typeof(name) != 'undefined' && name != null) { //返回指定的属性值\r\n    //         if (root) {\r\n    //             return root[name] || model.modelData[name] || defaultVal[name]\r\n    //         } else {\r\n    //             return model.modelData[name] || defaultVal[name];\r\n    //         }\r\n    //     }\r\n    //     //返回所有属性值\r\n    //     if (root) {\r\n    //         for (var key in defaultVal) {\r\n    //             if (root[key]) {\r\n    //                 defaultVal[key] = root[key];\r\n    //             } else {\r\n    //                 if (model.modelData && model.modelData[key]) {\r\n    //                     defaultVal[key] = model.modelData[key];\r\n    //                 }\r\n    //             }\r\n    //         }\r\n    //     } else {\r\n    //         for (var key in defaultVal) {\r\n    //             if (model.modelData && model.modelData[key]) {\r\n    //                 defaultVal[key] = model.modelData[key];\r\n    //             }\r\n    //         }\r\n    //     }\r\n    //     return defaultVal;\r\n    // }\r\n    deleteSelection (e) {\r\n        var myDiagram = this.diagram;\r\n        var cmd = myDiagram.commandHandler;\r\n        var node = myDiagram.selection.first();\r\n        \r\n        if (!node) {\r\n            return;\r\n        }\r\n        // var nodeCopy = JSON.parse(JSON.stringify(node.data))\r\n        if (node instanceof go.Group) {\r\n            return;\r\n        }\r\n        if (node.data.key == 1 || node.data.key == 'g_1') {\r\n            //root node or root group\r\n            return;\r\n        }\r\n    \r\n        var locateNode = null;\r\n        var tempArray = [\"next\",\"prev\",\"parent\"]\r\n        for(var i=0;i<tempArray.length;i++){\r\n            if(node.data[tempArray[i]]){\r\n                locateNode = myDiagram.findNodeForKey(node.data[tempArray[i]])\r\n                break;\r\n            }\r\n        }\r\n        // if (node.findNodesOutOf().first()) {\r\n        //     locateNode = node.findNodesOutOf().first();\r\n        // } else if (node.findNodesInto().first()) {\r\n        //     locateNode = node.findNodesInto().first();\r\n        // }\r\n    \r\n        myDiagram.startTransaction(\"deleteSelection1\");\r\n        try {\r\n    \r\n            if (node instanceof go.Link) {\r\n                return;\r\n            }\r\n            myDiagram.startTransaction('sub');\r\n            this.deleteNode(node, e);\r\n    \r\n            myDiagram.commitTransaction('sub');\r\n            // myDiagram.model.removeNodeData(node.data);\r\n            go.CommandHandler.prototype.deleteSelection.call(cmd);\r\n    \r\n            // myDiagram.updateAllTargetBindings();\r\n    \r\n        } catch (ex) {\r\n            console.log(ex);\r\n            myDiagram.commitTransaction(\"deleteSelection1\");\r\n        }\r\n        // myDiagram.updateAllTargetBindings();\r\n        myDiagram.commitTransaction(\"deleteSelection1\");\r\n        if (locateNode) {\r\n            myDiagram.select(locateNode);\r\n        }\r\n\r\n    }\r\n    //删除节点\r\n    deleteNode(node, e) {\r\n        console.log(\"deleteNodedeleteNodedeleteNodedeleteNode\")\r\n        var myDiagram = this.diagram;\r\n        var mainNode = null;\r\n        if (node instanceof go.Group) {\r\n            //查找第一个节点\r\n            node.memberParts.each(function(n) {\r\n                if (n.data.isparent) {\r\n                    mainNode = n;\r\n                }\r\n            })\r\n        }\r\n        node = mainNode == null ? node : mainNode;\r\n        if (node instanceof go.Node) {\r\n            var preNode = node.findNodesInto().first() ? node.findNodesInto().first() : null;\r\n            var nextNode = node.data.next ? myDiagram.findNodeForKey(node.data.next) : null;\r\n            if (nextNode) {\r\n                var nextNodeLink = nextNode.findLinksInto().first();\r\n            } else {\r\n                var nextNodeLink = null;\r\n            }\r\n\r\n            var intoLink = node.findLinksInto().first();\r\n            var tmpNodeData = {};\r\n            // _.extendOwn(tmpNodeData, node.data);\r\n            // tmpNodeData = helpers.extend(tmpNodeData, node.data);\r\n            tmpNodeData = JSON.parse(JSON.stringify(node.data));\r\n            var oldlink = node.findLinksInto().first() ? node.findLinksInto().first().data : null;\r\n            var link = {};\r\n            // link = _.extendOwn(link, oldlink);\r\n            // link = helpers.extend(link, oldlink);\r\n            delete oldlink.points;\r\n            link = JSON.parse(JSON.stringify(oldlink))\r\n            delete link.__gohashid;\r\n            delete link.points;\r\n            if (node.data.group) {\r\n                var nodeGroup = myDiagram.findNodeForKey(node.data.group);\r\n                // var nodeGroupData = nodeGroup.data;\r\n            } else {\r\n                var nodeGroup = null;\r\n                var nodeGroupData = null;\r\n            }\r\n\r\n            //如果不是根节点,除了根节点都有一条入边\r\n            // myDiagram.startTransaction(\"changeLinks\");\r\n            try {\r\n                if (node.data.isparent) {\r\n                    var nodes = [],\r\n                        groups = [],\r\n                        mylinks = [];\r\n                    myDiagram.nodes.each(function(n) {\r\n                        if (n.isMemberOf(nodeGroup) && n.data.key != node.data.key) {\r\n                            nodes.push(n.data);\r\n                            if (n.findLinksInto().count > 0) {\r\n                                mylinks.push(n.findLinksInto().first().data);\r\n                            }\r\n\r\n                        }\r\n                    });\r\n\r\n                    if (mainNode) {\r\n                        nodes.push(node.data);\r\n                    }\r\n                    myDiagram.model.removeNodeDataCollection(nodes);\r\n                    myDiagram.model.removeLinkDataCollection(mylinks);\r\n                    myDiagram.model.removeNodeData(nodeGroup.data);\r\n                }\r\n\r\n                if (preNode != null) {\r\n                    ////如果是父节点，则删除所有子孙节点,包括group\r\n\r\n                    //当前节点为第一个子节点\r\n                    if (preNode.data.key == tmpNodeData.parent) {\r\n                        //如果当前节点是最后一个子节点\r\n                        if (nextNode == null) {\r\n\r\n                            var parGroup = myDiagram.findNodeForKey(preNode.data.group);\r\n                            var grandNode = myDiagram.findNodeForKey(preNode.data.parent);\r\n                            if(preNode.data.category!==\"Root\"){//zyy增加判断\r\n                                if (grandNode) {\r\n                                    myDiagram.model.setDataProperty(preNode.data, \"group\", grandNode.data.group);\r\n                                } else {\r\n                                    if(parGroup && parGroup.data.group){\r\n                                        myDiagram.model.setDataProperty(preNode.data, \"group\", parGroup.data.group);\r\n                                    }else{\r\n                                        myDiagram.model.setDataProperty(preNode.data, \"group\", undefined);\r\n                                    }\r\n                                }\r\n                            }\r\n\r\n                            //父节点的isparent属性\r\n                            myDiagram.model.setDataProperty(preNode.data, \"isparent\", undefined);\r\n                            //var parGroup = myDiagram.findNodeForKey(preNode.data.group);\r\n                            if (parGroup) {\r\n                                myDiagram.model.removeNodeData(parGroup.data);\r\n                            }\r\n                        } else {\r\n                            link.from = preNode.data.key;\r\n                            link.to = nextNode.data.key;\r\n                            myDiagram.model.setDataProperty(nextNode.data, \"prev\", undefined);\r\n                            myDiagram.model.addLinkData(link);\r\n                            myDiagram.model.setDataProperty(myDiagram.model.findNodeDataForKey(tmpNodeData.parent), \"isparent\", nextNode.data.key);\r\n\r\n                        }\r\n                    } else {\r\n                        //\r\n                        myDiagram.model.setDataProperty(preNode.data, \"next\", nextNode == null ? null : nextNode.data.key);\r\n\r\n                        if (nextNode != null) {\r\n                            link.from = preNode.data.key;\r\n                            link.to = nextNode.data.key;\r\n                            myDiagram.model.setDataProperty(nextNode.data, \"prev\", preNode.data.key);\r\n                            myDiagram.model.addLinkData(link);\r\n                        }\r\n                    }\r\n\r\n                    //var parLink = node.findLinksInto().first();\r\n                    if (intoLink) {\r\n                        myDiagram.model.removeLinkData(intoLink.data);\r\n                    }\r\n                    if (nextNodeLink) {\r\n                        myDiagram.model.removeLinkData(nextNodeLink.data);\r\n                    }\r\n                }\r\n            } catch (ex) {\r\n                console.log(ex.message);\r\n            }\r\n\r\n        }\r\n        myDiagram.isModified = true;\r\n    }\r\n\r\n    addLevelNodeData(node) {\r\n        var isautolayout = window.localStorage.getItem('isautolayout') == null ? true : window.localStorage.getItem('isautolayout') == 'true';\r\n        // var isautoselect =  window.localStorage.getItem('isautoselect') == null?true:window.localStorage.getItem('isautoselect') == 'true';\r\n        var myDiagram = node.diagram;\r\n        var currentType = 'tianpan';\r\n        var toKey = node.data.next;\r\n        //delete the next link\r\n    \r\n        var nextkey = (myDiagram.model.nodeDataArray.length + 1).toString();\r\n        //var follower = {key: nextkey, text: nextkey, color: \"yellow\"};\r\n    \r\n        var follower = { key: nextkey, text: lang.trans(\"dce\"), color: \"yellow\" };\r\n        myDiagram.model.makeNodeDataKeyUnique(follower);\r\n        nextkey = follower.key;\r\n        var nextnode = null;\r\n        var nextlink = null;\r\n        var group = myDiagram.model.findNodeDataForKey(node.data.parent).group;\r\n        //找到下一个子节点\r\n        node.findNodesOutOf().each(function(n) {\r\n            if (n.data.level == node.data.level) {\r\n                nextnode = n;\r\n            }\r\n        });\r\n    \r\n        var nextlink = null;\r\n        //找到下一条边\r\n        node.findLinksOutOf().each(function(l) {\r\n            if (l.data.level == node.data.level) {\r\n                nextlink = l;\r\n            }\r\n        });\r\n        //ControlAutoLayout(false);\r\n        myDiagram.model.startTransaction();\r\n    \r\n        follower = applyTheme2Node(follower, node);\r\n        //delete the next link\r\n        var deleteLink = null;\r\n    \r\n        //if has next node\r\n        if (nextnode != null) {\r\n            follower.next = nextnode.data.key;\r\n            myDiagram.model.setDataProperty(nextnode.data, \"prev\", follower.key);\r\n        }\r\n    \r\n        if (group) {\r\n            follower.group = group;\r\n        }\r\n    \r\n    \r\n        follower.level = node.data.level;\r\n        if (currentType == \"tianpan\") {\r\n            follower.radius = node.data.radius;\r\n            //follower.fill = colorMap[follower.level % 5];\r\n            follower.fill = node.data.fill;\r\n        } else {\r\n            follower.radius = node.data.radius;\r\n            follower.fill = node.data.fill;\r\n            //follower.fill =go.Brush.randomColor(128, 240);\r\n            follower.dangle = node.data.dangle;\r\n            follower.dradius = node.data.dradius;\r\n            follower.sweep = node.data.sweep;\r\n            follower.layerThickness = node.data.layerThickness || 100;\r\n            follower.tdDipanTextAngle = node.data.tdDipanTextAngle || 'xuanzhuan';\r\n        }\r\n        follower.parent = node.data.parent;\r\n        follower.prev = node.data.key;\r\n        follower.strokeWidth = node.data.strokeWidth;\r\n        follower.stroke = node.data.stroke;\r\n        follower.font = node.data.font;\r\n        //follower.font = node.data.font;\r\n        follower.textStroke = node.findObject(\"TEXT\").stroke;\r\n        if (node.data.figure) {\r\n            follower.figure = node.data.figure;\r\n        }\r\n        follower.loc = node.data.loc;\r\n        if (currentType == 'tianpan') {\r\n    \r\n            var nextLocation = node.location.copy();\r\n            if (node.data.parent) {\r\n                var parentNode = myDiagram.findNodeForKey(node.data.parent);\r\n                if (parentNode) {\r\n                    nextLocation = computeNextLoc(node, parentNode);\r\n                }\r\n            }\r\n            follower.loc = go.Point.stringify(nextLocation);\r\n    \r\n        }\r\n        if (node.data.width) {\r\n            follower.width = node.data.width;\r\n        }\r\n        if (node.data.height) {\r\n            follower.height = node.data.height;\r\n        }\r\n        follower.category = node.data.category;\r\n        follower.newAdd = true;\r\n        // add a new node\r\n        myDiagram.model.addNodeData(follower);\r\n    \r\n        // add a link from the selected node to the new node\r\n        var linkToFollower = { from: node.data.key, to: follower.key };\r\n        linkToFollower.level = node.data.level;\r\n        linkToFollower.color = follower.fill;\r\n        linkToFollower.isTreeLink = true;\r\n        linkToFollower = applyTheme2Link(linkToFollower, node);\r\n    \r\n        // linkToFollower.strokeWidth = node.data.level == 1 ? 4 : Math.max(1, 3 - (linkToFollower.level - 1) * 0.5);\r\n        linkToFollower.strokeWidth = 2;\r\n        if (node.findLinksInto() && node.findLinksInto().first()) {\r\n            linkToFollower.color = node.findLinksInto().first().data.color;\r\n            linkToFollower.strokeWidth = node.findLinksInto().first().data.strokeWidth;\r\n            linkToFollower.toArrow = node.findLinksInto().first().data.toArrow;\r\n            linkToFollower.strokeDashArray = node.findLinksInto().first().data.strokeDashArray;\r\n        } else {\r\n            linkToFollower = applyTheme2Link(linkToFollower, node);\r\n        }\r\n        if (currentType == 'dipan') {\r\n            if (node.data.category == 'Root' || node.data.category == 'dipan') {\r\n                linkToFollower.category = 'dipan';\r\n            }\r\n        }\r\n        myDiagram.model.addLinkData(linkToFollower, node);\r\n    \r\n        myDiagram.model.setDataProperty(node.data, \"next\", nextkey);\r\n        if (nextlink != null) {\r\n            var copyLink = {};\r\n            // _.extendOwn(copyLink, nextlink.data);\r\n            // copyLink = helpers.extend(copyLink, nextlink.data);\r\n            delete nextlink.data.points\r\n            copyLink = JSON.parse(JSON.stringify(nextlink.data));\r\n\r\n            delete copyLink.__gohashid;\r\n            delete copyLink.points;\r\n            copyLink.from = follower.key;\r\n            copyLink.to = nextlink.data.to;\r\n            myDiagram.model.removeLinkData(nextlink.data);\r\n            myDiagram.model.addLinkData(copyLink);\r\n        }\r\n        myDiagram.model.commitTransaction();\r\n        myDiagram.isModified = true;\r\n        return follower;\r\n    }\r\n\r\n    addFollower(e, iskeyboard) {\r\n        if(!e){\r\n            var e = this.diagram.lastInput\r\n        }\r\n        var myDiagram = e.diagram;\r\n        var node = myDiagram.selection.first();\r\n        if (!node) return;\r\n        var diagram = node.diagram;\r\n        // var isautolayout = window.localStorage.getItem('isautolayout') == null ? true : window.localStorage.getItem('isautolayout') == 'true';\r\n        var isautolayout = true\r\n        if (node === null || !(node instanceof go.Node) || node instanceof go.Group) return;\r\n        if (node.findLinksInto().count == 0) return;\r\n        if (myDiagram.toolManager.textEditingTool.isActive) {\r\n            var tb = myDiagram.selection.first().findObject('TEXT');\r\n            tb.text = myDiagram.toolManager.textEditingTool.currentTextEditor.innerText;\r\n            myDiagram.toolManager.textEditingTool.stopTool();\r\n        }\r\n        if (!isautolayout) {\r\n            ControlAutoLayout(e, false);\r\n        } else {\r\n            if (node.data.level >= 3) {\r\n                ControlAutoLayout(e, false);\r\n                autoLayoutPart(node);\r\n            } else {\r\n                ControlAutoLayout(e, true);\r\n            }\r\n        }\r\n    \r\n        myDiagram.model.startTransaction('all');\r\n    \r\n        var follower = this.addLevelNodeData(node);\r\n        myDiagram.model.commitTransaction('all');\r\n    \r\n        if (typeof iskeyboard != 'undefined' && iskeyboard == true) { // check whether is a keyboard trigger the action\r\n            var newnode = diagram.findNodeForData(follower);\r\n            if (newnode) {\r\n                diagram.select(newnode);\r\n            }\r\n    \r\n            //myDiagram.scale = 0.6588944708324703;\r\n            myDiagram.isModified = true;\r\n    \r\n            var tb = myDiagram.selection.first().findObject('TEXT');\r\n            // // console.log(tb)\r\n            if (tb) myDiagram.commandHandler.editTextBlock(tb);\r\n            helpers.simulateEnterWithAlt(e);\r\n        }\r\n    }\r\n\r\n    startNewSpiral(iskeyboard) {\r\n        var myDiagram = this.diagram;\r\n        var e = myDiagram.lastInput;\r\n        var node = myDiagram.selection.first();\r\n        if (!node) return;\r\n        var diagram = node.diagram;\r\n        // var isautolayout = window.localStorage.getItem('isautolayout') == null ? true : window.localStorage.getItem('isautolayout') == 'true';\r\n        var isautolayout = true\r\n        // var isautoselect =  window.localStorage.getItem('isautoselect') == null?true:window.localStorage.getItem('isautoselect') == 'true';\r\n        if (node === null || !(node instanceof go.Node) || node instanceof go.Group) return;\r\n    \r\n        if (node.data.isparent && myDiagram.findNodeForKey(node.data.isparent) && !myDiagram.findNodeForKey(node.data.isparent).visible) {\r\n            return;\r\n        }\r\n        if (!isautolayout) {\r\n            ControlAutoLayout(e, false);\r\n        } else {\r\n            if (node.data.level >= 2) {\r\n                ControlAutoLayout(e, false);\r\n                autoLayoutPart(node);\r\n            } else {\r\n                ControlAutoLayout(e, true);\r\n            }\r\n        }\r\n        myDiagram.startTransaction();\r\n        myDiagram.startTransaction(\"addChildNodeData\");\r\n        var follower = this.addChildNodeData(node);\r\n        // var root = getRootNodeData(node.data, myDiagram.model, 0);\r\n        myDiagram.commitTransaction(\"addChildNodeData\");\r\n        myDiagram.commitTransaction();\r\n    \r\n        // select the new Node\r\n        if (typeof iskeyboard != 'undefined' && iskeyboard == true) {\r\n            var newnode = myDiagram.findNodeForData(follower);\r\n            if (newnode) {\r\n                myDiagram.centerRect(newnode.actualBounds);\r\n            }\r\n    \r\n            diagram.select(newnode); //需要居中\r\n            var tb = myDiagram.selection.first().findObject('TEXT');\r\n            if (tb) myDiagram.commandHandler.editTextBlock(tb);\r\n            helpers.simulateEnterWithAlt(e);\r\n        }\r\n    }\r\n\r\n    \r\n    //modify nodeDataArray\r\n    addChildNodeData(node) {\r\n        console.log(\"===================天盘\")\r\n        var isautolayout = window.localStorage.getItem('isautolayout') == null ? true : window.localStorage.getItem('isautolayout') == 'true';\r\n        // var isautoselect =  window.localStorage.getItem('isautoselect') == null?true:window.localStorage.getItem('isautoselect') == 'true';\r\n        var myDiagram = node.diagram;\r\n        var result = arguments[1] ? arguments[1] : null;\r\n        var currentType = 'tianpan';\r\n        // var nodeRoot = getRootNodeData(node.data, myDiagram.model);\r\n        // if (nodeRoot.category == \"Root\") {\r\n        //     currentType = 'dipan';\r\n        // } else {\r\n        //     currentType = 'tianpan';\r\n        // }\r\n        currentType = 'tianpan';\r\n        //myDiagram.startTransaction();\r\n        var nextkey = (myDiagram.model.nodeDataArray.length + 1).toString();\r\n        //var follower = {key: nextkey, text: nextkey};\r\n        var follower = { key: nextkey, text: lang.trans('dce') };\r\n        //if (result != null) {\r\n        myDiagram.model.makeNodeDataKeyUnique(follower);\r\n        nextkey = follower.key;\r\n        //}\r\n        //找到第一个子节点\r\n        var firstNode = myDiagram.findNodeForKey(node.data.isparent);\r\n        // node.findNodesOutOf().each(function(n) {\r\n        //     if (n.data.level > node.data.level) {\r\n        //         firstNode = n;\r\n        //     }\r\n        // });\r\n\r\n        var firstLink = null;\r\n        //找到第一条子边\r\n        node.findLinksOutOf().each(function(l) {\r\n            if (l.data.level > node.data.level) {\r\n                firstLink = l;\r\n            }\r\n        });\r\n        follower.level = node.data.level + 1;\r\n        follower.parent = node.data.key;\r\n        follower.prev = undefined;\r\n\r\n        //如果已经有子节点\r\n        if (node.data.isparent && firstNode != null) {\r\n\r\n            follower.next = firstNode.data.key;\r\n            myDiagram.model.setDataProperty(firstNode.data, \"prev\", follower.key);\r\n        }\r\n\r\n        if (result != null) {\r\n            //只是用来填充的节点\r\n            follower.istemp = true;\r\n            follower.text = \"\";\r\n        }\r\n\r\n\r\n\r\n        if (node.data.level == 0) {\r\n            follower.radius = Math.max(node.data.radius * 0.75, 100);\r\n        } else {\r\n            if (node.data.radius) {\r\n                follower.radius = Math.max(node.data.radius - 5, 50);\r\n            } else {\r\n                follower.radius = Math.max(InitialFontSize - node.data.level * 10, 50);\r\n            }\r\n\r\n        }\r\n        //如果当前节点属于某个group，根节点和普通主节点通用\r\n        if (firstNode != null) {\r\n            if (node.containingGroup) {\r\n                follower.group = node.containingGroup.data.key;\r\n            }\r\n\r\n        }\r\n        //如果当前节点属于某个group，根节点和普通主节点通用\r\n        // if (firstNode == null && currentType=='tianpan') {\r\n        if (firstNode == null) {\r\n            // add a group; make it a member of the same group as the selected node\r\n            var newGroup = {\r\n                isGroup: true,\r\n                group: node.data.group,\r\n                parent: node.data.key,\r\n                fill: \"rgba(0,0,0,0)\",\r\n                stroke: \"rgba(0,0,0,0)\",\r\n                strokeWidth: 0,\r\n                level: node.data.level\r\n            };\r\n            newGroup = applyTheme2Group(newGroup, node);\r\n            // if (node.data.category == \"dipan\" || node.data.category == \"Root\") {\r\n            //     newGroup.category = \"dipan\";\r\n\r\n\r\n            // }\r\n            myDiagram.model.addNodeData(newGroup);\r\n            //修改主节点的group为新的group\r\n            myDiagram.model.setGroupKeyForNodeData(node.data, newGroup.key);\r\n            follower.group = newGroup.key;\r\n        }\r\n\r\n\r\n        follower.fill = colorMap[follower.level % 5];\r\n        follower.category = node.data.category;\r\n\r\n        follower.loc = go.Point.stringify(computeChildLoc(node));\r\n\r\n\r\n\r\n        // follower.strokeWidth = node.data.strokeWidth;\r\n        follower.strokeWidth = 2;\r\n        if (node.data.figure) {\r\n            follower.figure = node.data.figure;\r\n        }\r\n\r\n        if (node.data.picture) {\r\n            follower.picture = node.data.picture;\r\n        }\r\n\r\n\r\n        if (node.data.width) {\r\n            follower.width = node.data.width;\r\n        }\r\n        if (node.data.height) {\r\n            follower.height = node.data.height;\r\n        }\r\n\r\n        follower = applyTheme2Node(follower, node);\r\n\r\n        follower.font = node.data.font;\r\n        follower.textStroke = node.findObject(\"TEXT\").stroke;\r\n        myDiagram.model.setDataProperty(node.data, \"isparent\", nextkey);\r\n        follower.newAdd = true;\r\n        myDiagram.model.addNodeData(follower);\r\n\r\n\r\n        // add a link from the selected node to the new node\r\n        var linkToFollower = { from: node.data.key, to: follower.key };\r\n\r\n        linkToFollower.level = follower.level;\r\n        //linkToFollower.color = follower.fill;\r\n        linkToFollower.isTreeLink = true;\r\n\r\n\r\n        // linkToFollower.strokeWidth = node.data.level <= 0 ? 4 : Math.max(1, 3 - (linkToFollower.level - 1) * 0.5);\r\n        linkToFollower.strokeWidth = 2;\r\n        var intoLink = null;\r\n        intoLink = node.findLinksInto().first();\r\n        if (firstLink != null) {\r\n            linkToFollower.toArrow = firstLink.data.toArrow;\r\n            linkToFollower.strokeDashArray = firstLink.data.strokeDashArray;\r\n            linkToFollower.color = firstLink.data.color;\r\n            linkToFollower.strokeWidth = 2;\r\n            // if (node.data.level == 0) {\r\n            //     linkToFollower.strokeWidth = 4;\r\n            // } else {\r\n            //     if (node.data.level == 1) {\r\n            //         linkToFollower.strokeWidth = Math.max(1, firstLink.data.strokeWidth - 1);\r\n            //     } else {\r\n            //         linkToFollower.strokeWidth = Math.max(1, firstLink.data.strokeWidth - 0.5);\r\n            //     }\r\n            // }\r\n            //linkToFollower.strokeWidth = node.data.level <= 0 ? 4 : (node.data.level == 1?node.data.strokeWidth -1:node.data.strokeWidth-0.5)  Math.max(1, 3 - (linkToFollower.level - 1) * 0.5));\r\n        } else if (intoLink != null) {\r\n            linkToFollower.toArrow = intoLink.data.toArrow;\r\n            linkToFollower.strokeDashArray = intoLink.data.strokeDashArray;\r\n            linkToFollower.color = intoLink.data.color;\r\n            linkToFollower.strokeWidth = 2;\r\n            // if (node.data.level == 0) {\r\n            //     linkToFollower.strokeWidth = 4;\r\n            // } else {\r\n            //     if (node.data.level == 1) {\r\n            //         linkToFollower.strokeWidth = Math.max(1, intoLink.data.strokeWidth - 1);\r\n            //     } else {\r\n            //         linkToFollower.strokeWidth = Math.max(1, intoLink.data.strokeWidth - 0.5);\r\n            //     }\r\n            // }\r\n        } else {\r\n            linkToFollower = applyTheme2Link(linkToFollower, node);\r\n        }\r\n\r\n        if (node.data.category == \"dipan\" || node.data.category == 'Root') { //处理天盘\r\n            linkToFollower.category = \"dipan\";\r\n        }\r\n\r\n        myDiagram.model.addLinkData(linkToFollower);\r\n        if (firstLink != null) {\r\n            var copyLink = {};\r\n            // _.extendOwn(copyLink, firstLink.data);\r\n            // copyLink = helpers.extend(copyLink, firstLink.data);\r\n            delete firstLink.data.points\r\n            copyLink = JSON.parse(JSON.stringify(firstLink.data))\r\n            delete copyLink.__gohashid;\r\n            delete copyLink.points;\r\n            copyLink.from = follower.key;\r\n            copyLink.to = firstLink.data.to;\r\n            myDiagram.model.removeLinkData(firstLink.data);\r\n            myDiagram.model.addLinkData(copyLink);\r\n            // myDiagram.model.setFromKeyForLinkData(firstLink.data, follower.key);\r\n        }\r\n        if (currentType == 'tianpan') {\r\n            //  if (!isautolayout || !isautoselect) {\r\n            //   ControlAutoLayout(false);\r\n            //   // if(node.data.isparent && myDiagram.findNodeForKey(node.data.isparent) && node.data.group){\r\n            //   //   node = myDiagram.findNodeForKey(node.data.group)\r\n            //   // }\r\n            //   if (node && node.containingGroup) {\r\n            //     node.containingGroup.layout.isOngoing = true;\r\n            //     node.containingGroup.layout.isValidLayout = false;\r\n            //   }else{\r\n            //     node.diagram.layout.isOngoing = true;\r\n            //     node.diagram.layout.isValidLayout = false;\r\n            //   }\r\n            // }\r\n        }\r\n        //myDiagram.commitTransaction(\"new spiral\");\r\n        myDiagram.isModified = true;\r\n        return follower;\r\n    }\r\n\r\n\r\n    moveWithinNodes(direction) {\r\n        var myDiagram = this.diagram;\r\n        var node = myDiagram.selection.first();\r\n        if(!node){\r\n            return;\r\n        }\r\n        if (!node) {\r\n            myDiagram.select(myDiagram.findNodeForKey(1));\r\n            return;\r\n        }\r\n        switch (direction) {\r\n            case 'left':\r\n                if (node.data.prev) {\r\n                    var prevNode = myDiagram.findNodeForKey(node.data.prev);\r\n                    if (prevNode) {\r\n                        myDiagram.select(prevNode);\r\n                    }\r\n                }\r\n                break;\r\n            case 'up':\r\n                if (node.data.parent) {\r\n                    var prevNode = myDiagram.findNodeForKey(node.data.parent);\r\n                    if (prevNode) {\r\n                        myDiagram.select(prevNode);\r\n                    }\r\n                }\r\n                break;\r\n            case 'right':\r\n                if (node.data.next) {\r\n                    var prevNode = myDiagram.findNodeForKey(node.data.next);\r\n                    if (prevNode) {\r\n                        myDiagram.select(prevNode);\r\n                    }\r\n                }\r\n                break;\r\n            case 'down':\r\n                if (node.data.isparent) {\r\n                    var prevNode = myDiagram.findNodeForKey(node.data.isparent);\r\n                    if (prevNode) {\r\n                        myDiagram.select(prevNode);\r\n                    }\r\n                }\r\n                break;\r\n        }\r\n    }\r\n\r\n    selectText(e) {\r\n        var myDiagram = this.diagram\r\n        var node = myDiagram.selection.first();\r\n        if (!node) return;\r\n        // removeNodeRemarkTips();\r\n        var tb = myDiagram.selection.first().findObject('TEXT');\r\n        if (tb) myDiagram.commandHandler.editTextBlock(tb);\r\n        helpers.simulateEnterWithAlt(e);\r\n    }\r\n\r\n    //快捷键\r\n    dokeyDownFn (e) {\r\n        // console.log('myDiagram:', diagram);\r\n        var diagram = this.diagram\r\n        var that = this;\r\n        var myDiagram = this.diagram;\r\n        var e = myDiagram.lastInput;\r\n        var cmd = myDiagram.commandHandler;\r\n        if (e.event.altKey) {\r\n            if (e.key == \"Q\") {\r\n                autoLayoutAll();\r\n                return;\r\n            } else if (e.key == \"R\") {\r\n                centerNode();\r\n                return;\r\n            } else if (e.key == \"C\") {\r\n                centerCurrentNode();\r\n                return;\r\n            } else if (e.key == \"A\") {\r\n                zoomToFit();\r\n                return;\r\n            }\r\n        }\r\n        if (e.event.keyCode >= 65 && e.event.keyCode <= 90 && !e.event.altKey && !e.event.ctrlKey && !e.event.shiftKey) {\r\n            e.bubbles = false;\r\n            this.selectText(e, diagram);\r\n            return true;\r\n    \r\n        }\r\n        // console.log('catched in dokeydown ' + e.event.keyCode);\r\n        // console.log('catched in dokeydown ' + e.key);\r\n        if (e.event.keyCode === 13) { // could also check for e.control or e.shift\r\n            var node = myDiagram.selection.first();\r\n            if (node && node.data.parent) {\r\n                this.addFollower(e, true);\r\n            }\r\n            if (node && !node.data.parent) {\r\n                that.startNewSpiral(true);\r\n            }\r\n        } else if (e.event.keyCode === 9) { // could also check for e.control or e.shift\r\n            that.startNewSpiral(true);\r\n        } else if (e.key === \"t\") { // could also check for e.control or e.shift\r\n            if (cmd.canCollapseSubGraph()) {\r\n                cmd.collapseSubGraph();\r\n            } else if (cmd.canExpandSubGraph()) {\r\n                cmd.expandSubGraph();\r\n            }\r\n        } else if (e.key == \"Del\") {\r\n            e.diagram.commandHandler.deleteSelection();\r\n        } else if (e.event.keyCode == 113) { //F2,不知道为什么失效了，重新赋予功能\r\n            // selectText();\r\n            this.selectText(e, diagram);\r\n        } else if (e.event.keyCode == 37) { //左\r\n            this.moveWithinNodes('left', diagram);\r\n            // go.CommandHandler.prototype.doKeyDown.call(cmd);\r\n        } else if (e.event.keyCode == 38) { //上\r\n            this.moveWithinNodes('up', diagram);\r\n            // go.CommandHandler.prototype.doKeyDown.call(cmd);\r\n        } else if (e.event.keyCode == 39) { //右\r\n            this.moveWithinNodes('right', diagram);\r\n            // go.CommandHandler.prototype.doKeyDown.call(cmd);\r\n        } else if (e.event.keyCode == 40) { //下\r\n            this.moveWithinNodes('down', diagram);\r\n            // go.CommandHandler.prototype.doKeyDown.call(cmd);\r\n        } else {\r\n            // call base method with no arguments\r\n            go.CommandHandler.prototype.doKeyDown.call(cmd);\r\n        }\r\n        e.bubbles = false; //阻止事件冒泡到dom\r\n    }\r\n    \r\n    // 生成base64图片\r\n    downloadImage() {\r\n        var myDiagram = this.diagram;\r\n        var imgdata = myDiagram.makeImageData({\r\n            scale: 1.0,\r\n            background: \"#ffffff\",\r\n            type: \"image/png\",\r\n            maxSize: new go.Size(9000, 9000)\r\n        });\r\n\r\n        return imgdata;\r\n    }\r\n\r\n   \r\n    getNodeSelectionAdornmentTemplate() {\r\n        return $(go.Adornment, \"Spot\",\r\n            $(go.Panel, \"Auto\",\r\n                $(go.Shape, { figure: \"Circle\", fill: 'rgba(255,0,120,0.2)', stroke: \"#767678\", strokeWidth: 12 },\r\n                    new go.Binding(\"stroke\", \"\", function(e, obj) {\r\n                        if (e.stroke) {\r\n                            return tinycolor(e.stroke).saturate().toString()\r\n                        } else {\r\n                            return \"#767678\";\r\n                        }\r\n                    }),\r\n                    // new go.Binding(\"fill\",\"\",function(e,obj){\r\n                    //   var radBrush = $(go.Brush, \"Radial\", { 0: \"rgba(248,248,242,0)\", 1: 'RGB(255,242,0)' });\r\n                    //   return radBrush;\r\n                    // })\r\n                    // ,\r\n                    new go.Binding(\"strokeWidth\", \"\", function(e, obj) {\r\n                        if (e.strokeWidth) {\r\n                            return e.strokeWidth + 5;\r\n                        } else {\r\n                            return 6;\r\n                        }\r\n    \r\n                    }),\r\n                    new go.Binding(\"width\", \"\", function(e, obj) {\r\n                        return e.radius || 150;\r\n                    }),\r\n                    new go.Binding(\"height\", \"\", function(e, obj) {\r\n                        return e.radius || 150;\r\n                    })\r\n                ),\r\n                $(go.Placeholder) // this represents the selected Node\r\n    \r\n            ),\r\n            // the button to create a \"next\" node, at the top-right corner\r\n            $(\"Button\", {\r\n                    name: \"AddChild\",\r\n                    toolTip: $(go.Adornment, \"Auto\",\r\n                        $(go.Shape, { fill: \"#FFFFCC\" }),\r\n                        $(go.TextBlock, { textAlign: 'center', margin: new go.Margin(8, 4, 4, 4) }, // the tooltip shows the result of calling nodeInfo(data)\r\n                            new go.Binding(\"text\", \"\", function(d) {\r\n                                return \"增加子节点\";\r\n                            }))\r\n                    ),\r\n                    alignment: go.Spot.Top,\r\n                    alignmentFocus: go.Spot.Bottom,\r\n                    width: 30,\r\n                    height: 30,\r\n                    click: function (e) {\r\n                        e.diagram.__trtd.startNewSpiral()\r\n                    } // this function is defined below\r\n                },\r\n                $(go.Shape, \"PlusLine\", { stroke: '#770077', desiredSize: new go.Size(15, 15) })\r\n            ),\r\n    \r\n            $(\"Button\", {\r\n                    name: \"AddLevel\",\r\n                    toolTip: $(go.Adornment, \"Auto\",\r\n                        $(go.Shape, { fill: \"#FFFFCC\" }),\r\n                        $(go.TextBlock, { textAlign: 'center', margin: new go.Margin(8, 4, 4, 4) }, // the tooltip shows the result of calling nodeInfo(data)\r\n                            new go.Binding(\"text\", \"\", function(d) {\r\n                                return \"增加同级节点\";\r\n                            }))\r\n                    ),\r\n                    alignment: new go.Spot(1, 0.5, 15, 0),\r\n                    width: 30,\r\n                    height: 30,\r\n                    click: function (e) {\r\n                        e.diagram.__trtd.addFollower(e)\r\n                    } // this function is defined below\r\n                },\r\n                $(go.Shape, \"PlusLine\", { stroke: \"#227700\", desiredSize: new go.Size(15, 15) }),\r\n                new go.Binding(\"visible\", \"level\", function(level) {\r\n                    return level != 0; // hidden this button if current node is root node\r\n    \r\n                })\r\n            ),\r\n            // $(go.Panel, \"Auto\", {        // 放大镜\r\n            //         name: \"ButtonIcon1\",\r\n            //         alignment: new go.Spot(0, 1, 5, -5),\r\n            //         //alignment: go.Spot.BottomLeft,\r\n            //         //alignmentFocus: go.Spot.BottomLeft,\r\n            //         width: 60,\r\n            //         height: 60,\r\n            //         isActionable: true,\r\n            //         click: expandCollapse // this function is defined below\r\n            //     },\r\n    \r\n            //     $(go.Shape, \"Circle\", {\r\n            //         fill: \"rgba(1,1,1,0)\",\r\n            //         strokeWidth: 0,\r\n            //         stroke: \"green\",\r\n            //         width: 50,\r\n            //         height: 50\r\n            //     }),\r\n            //     $(go.Shape, {\r\n            //             '_para1': true,\r\n            //             name: \"ButtonIcon\",\r\n            //             fill: \"red\",\r\n            //             strokeWidth: 2,\r\n            //             stroke: \"#767678\",\r\n            //             geometryString: icons[\"zoomout\"], // default value for isTreeExpanded is true\r\n            //             desiredSize: new go.Size(30, 30)\r\n            //         },\r\n            //         new go.Binding(\"geometryString\", \"\", function(d, button) {\r\n            //             // console.log('dddddd:', d);\r\n            //             // console.log('button:', button);\r\n            //             // var myDiagram = d.diagram;\r\n            //             // var node = myDiagram.selection.first();\r\n            //             // if (node[\"_controlExpand\"]) {\r\n            //             //     return icons[\"zoomout\"];\r\n            //             // } else {\r\n            //             //     return icons[\"zoomin\"];\r\n            //             // }\r\n            //             return icons[\"zoomin\"];\r\n            //         })\r\n            //     )\r\n            // )\r\n        );\r\n    } // end Adornment\r\n\r\n    // 给子节点添加序号\r\n    orderChildNode(obj) {\r\n        var myDiagram = this.diagram;\r\n        var arr = [];\r\n        var node = myDiagram.selection.first();\r\n        console.log(\"node\", node);\r\n        if (node) {\r\n            myDiagram.startTransaction();\r\n            console.log(\"node.data\", node.data);\r\n            if (node.data.isparent) {\r\n                var first = myDiagram.model.findNodeDataForKey(node.data.isparent);\r\n                arr.push(first);\r\n                pushChildKeyToArr(first, arr, this);\r\n\r\n                var re = /^(\\d+\\、+)|(\\d+\\.+)/g;\r\n                for (var i = 0; i < arr.length; i++) {\r\n                    if (re.test(arr[i].text)) {\r\n                        myDiagram.model.setDataProperty(arr[i], \"text\", (arr[i].text).replace(re, (i + 1) + \".\"));\r\n                    } else {\r\n                        if(arr[i].text == ''){\r\n                            myDiagram.model.setDataProperty(arr[i], \"text\", (i + 1));                                \r\n                        }else{\r\n                            myDiagram.model.setDataProperty(arr[i], \"text\", (i + 1) + \".\" + arr[i].text);\r\n                        }\r\n                    }\r\n                }\r\n            } else {\r\n                console.log(\"无子节点！\");\r\n            }\r\n            myDiagram.commitTransaction();\r\n        };\r\n    }\r\n\r\n    clearOrderChildNode(obj) {\r\n        var myDiagram = this.diagram;\r\n        var arr = [];\r\n        var node = myDiagram.selection.first();\r\n        console.log(\"node\", node);\r\n        if (node) {\r\n            myDiagram.startTransaction();\r\n            console.log(\"node.data\", node.data);\r\n            if (node.data.isparent) {\r\n                var first = myDiagram.model.findNodeDataForKey(node.data.isparent);\r\n                arr.push(first);\r\n                pushChildKeyToArr(first, arr, this);\r\n\r\n                var re = /^(\\d+\\、+)|(\\d+\\.+)/g;\r\n                for (var i = 0; i < arr.length; i++) {\r\n                    if (re.test(arr[i].text)) {\r\n                        myDiagram.model.setDataProperty(arr[i], \"text\", (arr[i].text).replace(re, \"\"));\r\n                    }\r\n                }\r\n            } else {\r\n                console.log(\"无子节点！\");\r\n            }\r\n            myDiagram.commitTransaction();\r\n        };\r\n    }\r\n}\r\n\r\n//临时扇区转换为正式扇区\r\nfunction changeTemp2normal(myDiagram) {\r\n\r\n    var node = myDiagram.selection.first();\r\n    if (node.data.istemp) {\r\n        myDiagram.model.startTransaction();\r\n        var tmpNode = myDiagram.findNodeForKey(node.data.parent);\r\n        myDiagram.model.setDataProperty(node.data, \"istemp\", undefined);\r\n        var lastNode = null; //记录这一级扇区\r\n        while (tmpNode) {\r\n            if (tmpNode.data.istemp) {\r\n                myDiagram.model.setDataProperty(tmpNode.data, \"istemp\", undefined);\r\n                myDiagram.model.setDataProperty(tmpNode.data, \"text\", \"双击编辑内容\");\r\n                lastNode = tmpNode;\r\n            } else {\r\n                if (lastNode) {\r\n                    myDiagram.model.setDataProperty(tmpNode.data, \"isparent\", lastNode.data.key);\r\n                }\r\n                break;\r\n            }\r\n            tmpNode = myDiagram.findNodeForKey(tmpNode.data.parent);\r\n        }\r\n        myDiagram.model.commitTransaction();\r\n        myDiagram.isModified = true;\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\nfunction applyTheme2Node(follower,node) {\r\n\r\n    node.diagram.model.setDataProperty(follower, 'strokeWidth', node.diagram.__trtd.tdCurrentTheme.borderWidth);\r\n    node.diagram.model.setDataProperty(follower, 'stroke', node.diagram.__trtd.tdCurrentTheme.borderColor);\r\n    if (node.diagram.__trtd.tdCurrentTheme.colorRange == null) {\r\n        node.diagram.model.setDataProperty(follower, 'fill', randomColor({ luminosity: 'light', count: 1 })[0]);\r\n    } else if (node.diagram.__trtd.tdCurrentTheme.colorRange instanceof Array) {\r\n        var tmpColor = \"white\";\r\n        if (follower.level >= node.diagram.__trtd.tdCurrentTheme.colorRange.length) {\r\n            tmpColor = node.diagram.__trtd.tdCurrentTheme.colorRange[follower.level % node.diagram.__trtd.tdCurrentTheme.colorRange.length];\r\n        } else {\r\n            tmpColor = node.diagram.__trtd.tdCurrentTheme.colorRange[follower.level];\r\n        }\r\n        node.diagram.model.setDataProperty(follower, 'fill', tmpColor);\r\n    } else if (node.diagram.__trtd.tdCurrentTheme.colorRange == \"random\") {\r\n        //层级颜色一样的随机色\r\n        if (follower.prev) {\r\n            var preNode = node.diagram.findNodeForKey(follower.prev);\r\n            if (preNode) {\r\n                node.diagram.model.setDataProperty(follower, 'fill', preNode.data.fill);\r\n            } else {\r\n                node.diagram.model.setDataProperty(follower, 'fill', randomColor({ luminosity: 'light', count: 1 })[0]);\r\n            }\r\n\r\n        } else {\r\n            node.diagram.model.setDataProperty(follower, 'fill', randomColor({ luminosity: 'light', count: 1 })[0]);\r\n        }\r\n    } else {\r\n        if (node.diagram.__trtd.tdCurrentTheme.colorRange == \"white\") {\r\n            node.diagram.model.setDataProperty(follower, 'fill', \"white\");\r\n        } else {\r\n            node.diagram.model.setDataProperty(follower, 'fill', \"rgba(0,0,0,0)\");\r\n        }\r\n\r\n    }\r\n    return follower;\r\n}\r\n\r\n//生成地盘的figure形状\r\nfunction makeAnnularWedge(data, layerThickness) {\r\n    var sweep = data.sweep ? data.sweep : 360;\r\n    var layerThickness = data.layerThickness || 100;\r\n    var radius = data.dradius ? data.dradius : 100;\r\n    var p = new go.Point(radius + layerThickness, 0).rotate(-sweep / 2);\r\n    var q = new go.Point(radius, 0).rotate(sweep / 2);\r\n    var geo = new go.Geometry()\r\n        .add(new go.PathFigure(p.x, p.y)\r\n            .add(new go.PathSegment(go.PathSegment.Arc, -sweep / 2, sweep, 0, 0, radius + layerThickness, radius + layerThickness))\r\n            .add(new go.PathSegment(go.PathSegment.Line, q.x, q.y))\r\n            .add(new go.PathSegment(go.PathSegment.Arc, sweep / 2, -sweep, 0, 0, radius, radius).close()));\r\n    geo.normalize();\r\n    return geo;\r\n}\r\n\r\nfunction getRootNodeData(model,nodeData,level) {\r\n    var parent, root = nodeData;\r\n    if (!level) {\r\n        level = 0;\r\n    }\r\n    while (root.parent) {\r\n        if (root.level == level) {\r\n            break;\r\n        }\r\n        parent = model.findNodeDataForKey(root.parent);\r\n        if (parent) {\r\n            root = parent;\r\n        }\r\n    }\r\n    return root;\r\n}\r\n\r\n\r\nfunction getNodeContextMenu() {\r\n   \r\n\r\n    let style = {\r\n        // width: 120,\r\n        // height: 30,\r\n        // margin: 2,\r\n        // font: \"bold 14px sans-serif\",\r\n        // margin: 3,\r\n    }\r\n\r\n    return $(go.Adornment, \"Vertical\",\r\n        $(\"ContextMenuButton\",\r\n            $(go.TextBlock, \"应用样式到所有同级节点\"), {\r\n                click: function(e, obj) {\r\n                    menus.applyStyle2Level(e, obj);\r\n                }\r\n            }),\r\n        $(\"ContextMenuButton\",\r\n            $(go.TextBlock, \"应用样式到同级节点\"), {\r\n                click: function(e, obj) {\r\n                    menus.applyStyle2CurLevel(e, obj);\r\n                }\r\n            }),\r\n        $(\"ContextMenuButton\",\r\n            $(go.TextBlock, \"应用样式到子节点\"), {\r\n                click: function(e, obj) {\r\n                    menus.applyStyle2ChiLevel(e, obj);\r\n                }\r\n            }),\r\n        $(\"ContextMenuButton\",\r\n            $(go.TextBlock, \"添加\"), {\r\n                click: function(e, obj) {\r\n                    menus.addFollower(e);\r\n                }\r\n            }),\r\n        $(\"ContextMenuButton\",\r\n            $(go.TextBlock, \"添加子节点\"), {\r\n                click: function(e) {\r\n                    menus.startNewSpiral();\r\n                }\r\n            }),\r\n        $(\"ContextMenuButton\",\r\n            $(go.TextBlock, \"定位当前节点\"), style, {\r\n                click: centerCurrentNode\r\n            }),\r\n\r\n        $(\"ContextMenuButton\",\r\n            $(go.TextBlock, \"删除\"), style, {\r\n                click: function(e, obj) {\r\n                    console.log('eeeeeeeeee:', e);\r\n                    e.diagram.commandHandler.deleteSelection();\r\n                }\r\n            }),\r\n        // $(\"ContextMenuButton\",\r\n        //     $(go.TextBlock, \"添加图片\"), style, {\r\n        //         click: function(e, obj) {\r\n        //             insertPicture();\r\n        //         }\r\n        //     }),\r\n        // $(\"ContextMenuButton\",\r\n        //     $(go.TextBlock, \"移除图片\"), style, {\r\n        //         click: function(e, obj) {\r\n        //             removeNodePicture();\r\n        //         }\r\n        //     }),\r\n        $(\"ContextMenuButton\",\r\n            $(go.TextBlock, \"清空文本\"), style, {\r\n                click: function(e, obj) {\r\n                    var myDiagram = e.diagram;\r\n                    var node = myDiagram.selection.first();\r\n                    if (node) {\r\n                        myDiagram.startTransaction();\r\n                        //node.data.text=\"\";\r\n                        myDiagram.model.setDataProperty(node.data, \"text\", \"\");\r\n                        myDiagram.commitTransaction();\r\n                    }\r\n                    //removeNodePicture();\r\n                }\r\n            }),\r\n        $(\"ContextMenuButton\",\r\n            $(go.TextBlock, \"删除 DEL\"), style, {\r\n                click: function(e, obj) {\r\n                    var myDiagram = e.diagram;\r\n                    var node = myDiagram.selection.first();\r\n                    if (node) {\r\n                        yunpan.yunpandel(e)\r\n                    }\r\n                    //removeNodePicture();\r\n                }\r\n            }),\r\n        $(\"ContextMenuButton\",\r\n            $(go.TextBlock, \"增加 CTRL+X/Y\"), style, {\r\n                click: function(e, obj) {\r\n                    var myDiagram = e.diagram;\r\n                    var node = myDiagram.selection.first();\r\n                    if (node) {\r\n                        if(node.data.loc.split(\" \")[1] === \"0\"&&node.data.category!==\"x\"){\r\n                            yunpan.addy(e)\r\n                        }else if(node.data.loc.split(\" \")[0] === \"0\"&&node.data.category!==\"y\"){\r\n                            yunpan.addx(e)\r\n                        }; \r\n                    }\r\n                    //removeNodePicture();\r\n                }\r\n            }),\r\n        $(\"ContextMenuButton\",\r\n            $(go.TextBlock, \"删除 DEL\"), style, {\r\n                click: function(e, obj) {\r\n                    var myDiagram = e.diagram;\r\n                    var node = myDiagram.selection.first();\r\n                    if (node) {\r\n                        yunpan.yunpandel(e)\r\n                    }\r\n                    //removeNodePicture();\r\n                }\r\n            }),\r\n        $(\"ContextMenuButton\",\r\n            $(go.TextBlock, \"增加同级节点\"), style, {\r\n                click: function(e, obj) {\r\n                    var myDiagram = e.diagram;\r\n                    var node = myDiagram.selection.first();\r\n                    if(myDiagram.selection.first().data.istemp){\r\n                        return\r\n                    }\r\n                    dipan.addFollowerGround(e);\r\n                }\r\n            }),\r\n        $(\"ContextMenuButton\",\r\n            $(go.TextBlock, \"增加子节点\"), style, {\r\n                click: function(e, obj) {\r\n                    var myDiagram = e.diagram;\r\n                    var node = myDiagram.selection.first();\r\n                    if(node.data.parent){\r\n                        var parentNode = node.diagram.findNodeForKey(node.data.parent);\r\n                        if(parentNode.data.istemp){\r\n                            return\r\n                        }\r\n                    }\r\n                    dipan.addNewCircle(e);\r\n                }\r\n            }),\r\n        $(\"ContextMenuButton\",\r\n            $(go.TextBlock, \"删除\"), style, {\r\n                click: function(e, obj) {\r\n                    var myDiagram = e.diagram;\r\n                    var node = myDiagram.selection.first();\r\n                    if(node.data.parent){\r\n                        var parentNode = node.diagram.findNodeForKey(node.data.parent);\r\n                        if(parentNode.data.istemp){\r\n                            return\r\n                        }\r\n                    }\r\n                    dipan.addNewCircle(e);\r\n                }\r\n            }),\r\n            $(\"ContextMenuButton\",\r\n            $(go.TextBlock, \"复制副本\"), style, {\r\n                click: function(e, obj) {\r\n                    var myDiagram = e.diagram;\r\n                    var node = myDiagram.selection.first();\r\n                    if(myDiagram.selection.first().data.istemp){\r\n                        return\r\n                    }\r\n                    dipan.addFollowerGround(e);\r\n                }\r\n            }),\r\n        $(\"ContextMenuButton\",\r\n            $(go.TextBlock, \"权限设置\"), style, {\r\n                click: function(e, obj) {\r\n                    var myDiagram = e.diagram;\r\n                    var node = myDiagram.selection.first();\r\n                    if(node.data.parent){\r\n                        var parentNode = node.diagram.findNodeForKey(node.data.parent);\r\n                        if(parentNode.data.istemp){\r\n                            return\r\n                        }\r\n                    }\r\n                    dipan.addNewCircle(e);\r\n                }\r\n            }),\r\n        $(\"ContextMenuButton\",\r\n            $(go.TextBlock, \"删除\"), style, {\r\n                click: function(e, obj) {\r\n                    var myDiagram = e.diagram;\r\n                    var node = myDiagram.selection.first();\r\n                    if(node.data.parent){\r\n                        var parentNode = node.diagram.findNodeForKey(node.data.parent);\r\n                        if(parentNode.data.istemp){\r\n                            return\r\n                        }\r\n                    }\r\n                    dipan.addNewCircle(e);\r\n                }\r\n            })\r\n\r\n    );\r\n}\r\n\r\n\r\n// function cxcommand (obj, val) {\r\n//     var diagram = obj.diagram;\r\n//     var myDiagram = obj.diagram;\r\n//     if (!(diagram.currentTool instanceof go.ContextMenuTool)) return;\r\n//     switch (val) {\r\n//         // case \"Paste\": diagram.commandHandler.pasteSelection(diagram.lastInput.documentPoint); break;\r\n//         case \"addChildNodeMenu\":\r\n//         diagram.__trtd.startNewSpiral();\r\n//             break;\r\n//         case \"addLevelNodeMenu\":\r\n//         diagram.__trtd.addFollower(obj);\r\n//             break;\r\n//         case \"deleteNodeMenu\":\r\n//             myDiagram.toolManager.textEditingTool.doCancel();\r\n//             myDiagram.commandHandler.deleteSelection();\r\n//             break;\r\n//         case \"addNodePictureMenu\":\r\n//             // jQuery(\"#insertimage\").modal('show');\r\n//             // document.getElementById('insertimage').modal('show');\r\n//             break; //特殊处理\r\n//         case \"removeNodePictureMenu\":\r\n//             removeNodePicture(obj);\r\n//             break;\r\n//         case \"clearNodeTextMenu\":\r\n//             var node = myDiagram.selection.first();\r\n//             if (node) {\r\n//                 myDiagram.startTransaction();\r\n//                 myDiagram.model.setDataProperty(node.data, \"text\", \"\");\r\n//                 myDiagram.commitTransaction();\r\n//             };\r\n//             break;\r\n//         case \"locateRootNodeMenu\":\r\n//             centerNode(obj);\r\n//             break;\r\n//         case \"showAllNodesMenu\":\r\n//             zoomToFit(obj);\r\n//             break;\r\n//         case \"removeOutCycleMenu\":\r\n//             removeOutCycle(obj);\r\n//             break;\r\n//         case \"centerPictureMenu\":\r\n//             centerPicture(obj);\r\n//             break;\r\n//         case \"equalWidthHeightPictureMenu\":\r\n//             equalWidthHeightPicture(obj);\r\n//             break;\r\n//         case \"bringToTopMenu\":\r\n//             bringToLayer(\"Foreground\", obj);\r\n//             break;\r\n//         case \"bringToBackgroundMenu\":\r\n//             bringToLayer(\"Background\", obj);\r\n//             break;\r\n//         case \"bringUpMenu\":\r\n//             bringToLayer(null, obj);\r\n//             break;\r\n//         case \"layoutGroupMenu\":\r\n//             autoLayoutAll(true, obj);\r\n//             break;\r\n\r\n//         case \"insertTextMenu\":\r\n//             insertTextNode(obj);\r\n//             break;\r\n//         case \"duplicateNode\":\r\n//             duplicateNode(obj);\r\n//             break; // 复制节点\r\n//         case \"insertTianpanMenu\":\r\n//             myDiagram.toolManager.clickCreatingTool.insertPart(myDiagram.lastInput.documentPoint);\r\n//             break;\r\n//         //固定节点\r\n//         case \"fixPictureMenu\":   \r\n//         case \"activePictureMenu\":\r\n//             var node = myDiagram.findPartAt(myDiagram.lastInput.documentPoint, false);\r\n//             // var node = myDiagram.selection.first();\r\n//             myDiagram.startTransaction();\r\n//             myDiagram.model.setDataProperty(node.data, \"selectable\", node.data.selectable != undefined ? (!node.data.selectable) : false);\r\n//             myDiagram.commitTransaction();\r\n//             break;\r\n//         case \"orderChildNode\":\r\n//             obj.diagram.__trtd.orderChildNode(obj);\r\n//             break;\r\n//         case \"clearOrderChildNode\":\r\n//             obj.diagram.__trtd.clearOrderChildNode(obj);\r\n//             break;\r\n//         case \"delYunpanAxis\":\r\n//             yunpan.yunpandel(obj);\r\n//             break;\r\n//         case \"addYunpanAxis\":\r\n//             var node = myDiagram.selection.first();\r\n//             if(node.data.loc.split(\" \")[1] === \"0\"&&node.data.category!==\"x\"){\r\n//                 yunpan.addy(obj)\r\n//             }else if(node.data.loc.split(\" \")[0] === \"0\"&&node.data.category!==\"y\"){\r\n//                 yunpan.addx(obj)\r\n//             }; \r\n//             break;\r\n//         case \"addLevelDipanNode\":\r\n//             if(myDiagram.selection.first().data.istemp){\r\n//                 return\r\n//             }\r\n//             obj.addFollowerGround();\r\n//             break;\r\n//         case \"addChildDipanNode\":\r\n//             var node = myDiagram.selection.first();\r\n//                 if(node.data.parent){\r\n//                     var parentNode = node.diagram.findNodeForKey(node.data.parent);\r\n//                     if(parentNode.data.istemp){\r\n//                         return\r\n//                     }\r\n//                 }\r\n//             obj.addNewCircle(obj);\r\n//             break;\r\n//         case \"deleteDipanNode\":\r\n//         // myDiagram.commandHandler.deleteSelection();\r\n//         obj.deleteSelection();\r\n//         break;\r\n//     }\r\n//     diagram.currentTool.stopTool();\r\n// }\r\n\r\n\r\n\r\n\r\n\r\n   /***\r\n     * 判断Node descendant是否是node的后代，如果是返回true, 否则返回false\r\n     * @param descendent go.Node type\r\n     * @param node go.Node Type\r\n     */\r\n    function isDescendant(descendant, node) {\r\n        var diagram = node.diagram,\r\n            cur = descendant;\r\n        //此处若出现bug，请告知，谢谢\r\n        while (cur.data.parent && cur.data.parent != node.data.key) {\r\n            cur = diagram.findNodeForKey(cur.data.parent);\r\n        }\r\n\r\n        return (cur.data.parent != null);\r\n    }\r\n\r\n    /***\r\n     * disconnect node (including his descendants) from diagram\r\n     * @param node go.Node type\r\n     */\r\n    function disconnectFromTreeStructure(node) {\r\n        if (node.data.parent == null) {\r\n            //if it's root node\r\n            return;\r\n        }\r\n        var diagram = node.diagram,\r\n            model = node.diagram.model;\r\n        if (node.data.prev) {\r\n            //it's not the first child of it's parent\r\n            var preNode = diagram.findNodeForKey(node.data.prev);\r\n            if (node.data.next) {\r\n                var nextNode = diagram.findNodeForKey(node.data.next);\r\n                model.setDataProperty(preNode.data, \"next\", nextNode.data.key);\r\n                model.setDataProperty(nextNode.data, \"prev\", preNode.data.key);\r\n                var link = preNode.findLinksTo(node).first();\r\n                model.setToKeyForLinkData(link.data, nextNode.data.key);\r\n\r\n                var link = node.findLinksTo(nextNode).first();\r\n                model.removeLinkData(link.data);\r\n            } else {\r\n                model.setDataProperty(preNode.data, \"next\", null);\r\n                var link = preNode.findLinksTo(node).first();\r\n                model.removeLinkData(link.data);\r\n            }\r\n\r\n        } else {\r\n            //it's the first child of it's parent\r\n            var parNode = diagram.findNodeForKey(node.data.parent);\r\n            if (node.data.next) {\r\n                var nextNode = diagram.findNodeForKey(node.data.next);\r\n                model.setDataProperty(parNode.data, \"isparent\", nextNode.data.key);\r\n                model.setDataProperty(nextNode.data, \"prev\", null);\r\n\r\n                var link = parNode.findLinksTo(node).first();\r\n                model.setToKeyForLinkData(link.data, nextNode.data.key);\r\n\r\n                link = node.findLinksTo(nextNode).first();\r\n                model.removeLinkData(link.data);\r\n            } else {\r\n                if (!parNode) {\r\n                    return;\r\n                }\r\n                model.setDataProperty(parNode.data, \"isparent\", null);\r\n                var link = parNode.findLinksTo(node).first();\r\n                if (link) {\r\n                    model.removeLinkData(link.data);\r\n                }\r\n\r\n\r\n                //remove group if parent node have children\r\n                var parGroup = parNode.containingGroup;\r\n                if (parGroup) {\r\n                    model.setDataProperty(parNode.data, 'group', parGroup.data.group);\r\n                    model.removeNodeData(parGroup.data);\r\n                }\r\n\r\n            }\r\n\r\n        }\r\n        model.setDataProperty(node.data, 'parent', null);\r\n        model.setDataProperty(node.data, 'prev', null);\r\n        model.setDataProperty(node.data, 'next', null);\r\n    } //end removing from original tree structure\r\n\r\n    function applyTheme2Link(linkToFollower, node) {\r\n        var myDiagram = node.diagram;\r\n        var tdCurrentTheme = myDiagram.__trtd.tdCurrentTheme\r\n        if (tdCurrentTheme.linkColor != null) {\r\n            // linkToFollower.color = tdCurrentTheme.linkColor;\r\n            myDiagram.model.setDataProperty(linkToFollower, 'color', tdCurrentTheme.linkColor);\r\n        }\r\n    \r\n        return linkToFollower;\r\n    }\r\n    \r\n    /***\r\n     * add group for node\r\n     * @param node go.Node\r\n     * @param parentGroupKey\r\n     */\r\n    function addGroupForNode(node, parentGroupKey) {\r\n        if (node.data.group != null || node.data.isparent == null) {\r\n            return;\r\n        }\r\n        var child = diagram.findNodeForKey(node.data.isparent);\r\n        if (!child) {\r\n            return;\r\n        }\r\n        var diagram = node.diagram;\r\n        var model = diagram.model;\r\n\r\n        var group = { isGroup: true, parent: node.data.key, key: \"g_\" + node.data.key, group: parentGroupKey, level: node.data.level };\r\n        model.addNodeData(group);\r\n        model.setDataProperty(node.data, \"group\", group.key);\r\n\r\n        // set group for his child.\r\n\r\n        var childGroup = child.containingGroup;\r\n        if (childGroup) {\r\n            model.setDataProperty(childGroup.data, \"group\", group.key);\r\n        } else {\r\n            model.setDataProperty(child.data, \"group\", group.key);\r\n        }\r\n        while (child.data.next) {\r\n            child = diagram.findNodeForKey(child.data.next);\r\n            childGroup = child.containingGroup;\r\n            if (childGroup) {\r\n                model.setDataProperty(childGroup.data, \"group\", group.key);\r\n            } else {\r\n                model.setDataProperty(child.data, \"group\", group.key);\r\n            }\r\n        }\r\n    }    \r\n\r\n    function ControlAutoLayout(e, flag) {\r\n        var myDiagram = e.diagram;\r\n        var diagram = e.diagram;\r\n        var node = diagram.selection.first();\r\n        if (node) {\r\n            var root = getRootNodeData( diagram.model, node.data, 0);\r\n            diagram.startTransaction(\"ControlAutoLayout\");\r\n            helpers.tdTravelTdpData(root, diagram.model, [], function(d) {\r\n\r\n                if (diagram.findNodeForKey(d.key).containingGroup && diagram.findNodeForKey(d.key).containingGroup.layout) {\r\n                    diagram.findNodeForKey(d.key).containingGroup.layout.isInitial = flag;\r\n                    diagram.findNodeForKey(d.key).containingGroup.layout.isOngoing = flag;\r\n                }\r\n            })\r\n            if (root.group && diagram.findNodeForKey(root.group)) {\r\n                diagram.findNodeForKey(root.group).layout.isInitial = flag;\r\n                diagram.findNodeForKey(root.group).layout.isOngoing = flag;\r\n            } else {\r\n                diagram.layout.isInitial = flag;\r\n                diagram.layout.isOngoing = flag;\r\n            }\r\n        } else {\r\n            diagram.nodes.each(function(node) {\r\n                if (diagram.findNodeForKey(node.data.key).layout) {\r\n                    diagram.findNodeForKey(node.data.key).layout.isInitial = flag;\r\n                    diagram.findNodeForKey(node.data.key).layout.isOngoing = flag;\r\n                }\r\n            });\r\n            diagram.layout.isInitial = flag;\r\n            diagram.layout.isOngoing = flag;\r\n        }\r\n        diagram.commitTransaction(\"ControlAutoLayout\");\r\n    }    \r\n\r\n//设置局部布局\r\nfunction autoLayoutPart(node) {\r\n    if (!node) return;\r\n    var group = node.containingGroup;\r\n    if (group) {\r\n        group.layout.isInitial = true;\r\n        group.layout.isOngoing = true;\r\n    }\r\n}\r\n\r\nfunction applyTheme2Group(group, node) {\r\n    var tdCurrentTheme = node.diagram.__trtd.tdCurrentTheme\r\n    if (tdCurrentTheme.groupStrokeWidth) {\r\n        node.diagram.model.setDataProperty(group, 'strokeWidth', tdCurrentTheme.groupStrokeWidth);\r\n        // group.strokeWidth = tdCurrentTheme.groupStrokeWidth;\r\n    }\r\n    if (tdCurrentTheme.groupStroke) {\r\n        group.stroke = tdCurrentTheme.groupStroke;\r\n        node.diagram.model.setDataProperty(group, 'stroke', tdCurrentTheme.groupStroke);\r\n    }\r\n    if (tdCurrentTheme.groupColor) {\r\n        group.fill = tdCurrentTheme.groupColor;\r\n        node.diagram.model.setDataProperty(group, 'fill', tdCurrentTheme.groupColor);\r\n    }\r\n    return group;\r\n}\r\n\r\nfunction computeChildLoc(root) {\r\n    if (root.data.isparent) {\r\n        var rootLoc = root.location.copy();\r\n        var rootPoint = new go.Point(0, 0);\r\n        var firstChild = root.diagram.findNodeForKey(root.data.isparent);\r\n        var firstLoc = firstChild.location.copy();\r\n        var relativeFirstLoc = new go.Point(firstLoc.x - rootLoc.x, firstLoc.y - rootLoc.y);\r\n\r\n        var relativeMidLoc = relativeFirstLoc.copy().rotate(-90);\r\n        var midLoc = new go.Point(relativeMidLoc.x + rootLoc.x, relativeMidLoc.y + rootLoc.y);\r\n        return midLoc;\r\n    }\r\n    var rootLoc = root.location.copy();\r\n    var offset = computeOffset(root.actualBounds.width + 100, 225);\r\n    rootLoc.offset(offset[0], offset[1]);\r\n\r\n    return rootLoc;\r\n}\r\n\r\nfunction computeNextLoc(node, root) {\r\n    /* 计算根据中心节点顺时针旋转一定角度得到的下一个节点位置 */\r\n    var rootLoc = root.location.copy();\r\n    var curLoc = node.location.copy();\r\n    var relativeLoc = new go.Point(curLoc.x - rootLoc.x, curLoc.y - rootLoc.y);\r\n    var rootPoint = new go.Point(0, 0);\r\n    var depth = 20;\r\n\r\n    if (node.data.next) { // 如果存在下一个节点，则新节点位于当前节点和下一个节点之间，稍微偏差一点\r\n        var nextNode = node.diagram.findNodeForKey(node.data.next);\r\n        var nextLoc = nextNode.location.copy();\r\n        var relativeNextLoc = new go.Point(nextLoc.x - rootLoc.x, nextLoc.y - rootLoc.y);\r\n\r\n        var relativeMidLoc = new go.Point((relativeLoc.x + relativeNextLoc.x) / 2, (relativeLoc.y + relativeNextLoc.y) / 2);\r\n        var angle = rootPoint.directionPoint(relativeMidLoc) - rootPoint.directionPoint(relativeLoc);\r\n        relativeMidLoc = relativeLoc.rotate(angle);\r\n        var offset = computeOffset(depth, rootPoint.directionPoint(relativeMidLoc));\r\n        relativeMidLoc.offset(offset[0], offset[1]);\r\n        var midLoc = new go.Point(relativeMidLoc.x + rootLoc.x, relativeMidLoc.y + rootLoc.y);\r\n        return midLoc;\r\n    }\r\n\r\n    //角度由前一个节点和当前节点一致\r\n    if (node.data.prev && node.diagram.findNodeForKey(node.data.prev)) {\r\n        var prevLoc = node.diagram.findNodeForKey(node.data.prev).location.copy();\r\n        var relativeLocPrev = new go.Point(prevLoc.x - rootLoc.x, prevLoc.y - rootLoc.y);\r\n        var angle = rootPoint.directionPoint(relativeLoc) - rootPoint.directionPoint(relativeLocPrev);\r\n        console.log('angle:' + angle);\r\n        if (angle > 45) {\r\n            angle = 45;\r\n        }\r\n    } else {\r\n        var angle = 60;\r\n    }\r\n    var lastLoc = relativeLoc.rotate(angle);\r\n    var offset = computeOffset(depth, rootPoint.directionPoint(lastLoc));\r\n    lastLoc.offset(offset[0], offset[1]);\r\n    lastLoc = new go.Point(lastLoc.x + rootLoc.x, lastLoc.y + rootLoc.y);\r\n    return lastLoc;\r\n}\r\n\r\nfunction computeOffset(newR, newStartAngle) {\r\n    //console.log(\"newStartAngle:\"+newStartAngle);\r\n    var ctl2, dy, dx; //需要调整\r\n    if (newStartAngle >= 0 && newStartAngle <= 90) {\r\n        dy = newR * Math.sin(newStartAngle * Math.PI / 180);\r\n        dx = newR * Math.cos(newStartAngle * Math.PI / 180);\r\n        return [dx, dy];\r\n    } else if (newStartAngle > 90 && newStartAngle <= 180) {\r\n        dy = newR * Math.sin((180 - newStartAngle) * Math.PI / 180);\r\n        dx = newR * Math.cos((180 - newStartAngle) * Math.PI / 180);\r\n        return [-dx, dy];\r\n    } else if (newStartAngle > 180 && newStartAngle <= 270) {\r\n        dy = newR * Math.sin((newStartAngle - 180) * Math.PI / 180);\r\n        dx = newR * Math.cos((newStartAngle - 180) * Math.PI / 180);\r\n        return [-dx, -dy];\r\n    } else if (newStartAngle > 270 && newStartAngle <= 360) {\r\n        dy = newR * Math.sin((360 - newStartAngle) * Math.PI / 180);\r\n        dx = newR * Math.cos((360 - newStartAngle) * Math.PI / 180);\r\n        return [dx, -dy];\r\n    }\r\n}\r\n\r\nfunction pushChildKeyToArr(data, arr, node) {\r\n    var myDiagram = node.diagram;\r\n    if (data.next) {\r\n        var obj = myDiagram.model.findNodeDataForKey(data.next);\r\n        arr.push(obj);\r\n        return pushChildKeyToArr(obj, arr, node);\r\n    } else {\r\n        return arr;\r\n    }\r\n}\r\n\r\n\r\nTrtd.go = go;\r\n\r\n// if (typeof window !== 'undefined') {\r\n// \tif(window.Trtd){\r\n//         window.Trtd.dipan = Trtd;\r\n//     } else{\r\n//         window.Trtd = {\r\n//             dipan: Trtd\r\n//         }\r\n//     }\r\n// }\r\n\r\nmodule.exports = Trtd;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/diagram/tianpan.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"http://static.365trtd.com/hardcore/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 13);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 292dfdb8913581862bc6","'use strict';\n\n// var helpers = require('./helpers.core');\n// import buckets from '../assets/buckets.min'\n/**\n * @namespace Chart.helpers.canvas\n */\nvar exports = module.exports = {\n\n\tcheckPhone(){\n\t\t\tif(!navigator) return true;\n\t\t\tif ((navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i))) {\n\t\t\t\t/*window.location.href=\"你的手机版地址\";*/\n\t\t\t\treturn true\n\t\t\t}\n\t\t\telse {\n\t\t\t\t/*window.location.href=\"你的电脑版地址\";    */\n\t\t\t\treturn false\n\t\t\t}\n\t},\n\n\tguid() {\n\t\tfunction S4() {\n\t\t\treturn (((1+Math.random())*0x10000)|0).toString(16).substring(1);\n\t\t}\n\t\treturn (S4()+S4()+\"-\"+S4()+\"-\"+S4()+\"-\"+S4()+\"-\"+S4()+S4()+S4());\n\t},\n\n\tgetElementByAttr(document, tag,attr,value)\n\t{\n\t\tvar aElements=document.getElementsByTagName(tag);\n\t\tvar aEle=[];\n\t\tfor(var i=0;i<aElements.length;i++)\n\t\t{\n\t\t\tif(aElements[i].getAttribute(attr)==value)\n\t\t\t\taEle.push( aElements[i] );\n\t\t}\n\t\treturn aEle;\n\t},\n\t// extend: function(target) {\n\t// \tvar setFn = function(value, key) {\n\t// \t\ttarget[key] = value;\n\t// \t};\n\t// \tfor (var i = 1, ilen = arguments.length; i < ilen; ++i) {\n\t// \t\thelpers.each(arguments[i], setFn);\n\t// \t}\n\t// \treturn target;\n\t// },\n\n\t/**\n\t * Clears the entire canvas associated to the given `chart`.\n\t * @param {Chart} chart - The chart for which to clear the canvas.\n\t */\n\tclear: function(chart) {\n\t\tchart.ctx.clearRect(0, 0, chart.width, chart.height);\n\t},\n\tnodeInfo: function(d) {  // Tooltip info for a node data object\n\t\tvar str = \"Node \" + d.key + \": \" + d.text + \"\\n\";\n\t\tif (d.group)\n\t\t  str += \"member of \" + d.group;\n\t\telse\n\t\t  str += \"top-level node\";\n\t\treturn str;\n\t},\n\tlinkInfo: function(d) {  // Tooltip info for a link data object\n\t\treturn \"Link:\\nfrom \" + d.from + \" to \" + d.to;\n\t},\n\tgroupInfo: function(adornment) {  // takes the tooltip or context menu, not a group node data object\n\t\tvar g = adornment.adornedPart;  // get the Group that the tooltip adorns\n\t\tvar mems = g.memberParts.count;\n\t\tvar links = 0;\n\t\tg.memberParts.each(function(part) {\n\t\t\tif (part instanceof go.Link) links++;\n\t\t});\n\t\treturn \"Group \" + g.data.key + \": \" + g.data.text + \"\\n\" + mems + \" members including \" + links + \" links\";\n\t},\n\tqueue: function(){\n\t\tthis.data = [];\n\t\tthis.enqueue = function(record) {\n\t\t\tthis.data.unshift(record);\n\t\t  }\n\t\tthis.dequeue = function() {\n\t\t\tthis.data.pop();\n\t\t}\n\t},\n\t// buckets: buckets,\n\t\t//遍历天地盘做指定操作,colletor=[] 广度优先\n\t\ttdTravelTdpDataWidth: function(nodeData, model, collector, callback) {\n\t\t\t\n\t\t\tvar queue = new exports.queue(); //队列数据结构，辅助用\n\t\t\tconsole.log(\"queue:\",queue)\n\t\t\tqueue.enqueue(nodeData);\n\n\t\t\tvar dealingNode = null;\n\t\t\twhile (!queue.isEmpty()) {\n\t\t\t\tdealingNode = queue.dequeue();\n\t\t\t\tcollector.push(callback(dealingNode));\n\t\t\t\t//1 处理同级节点\n\t\t\t\tif (dealingNode.isparent) {\n\t\t\t\t\tvar childNodeData = model.findNodeDataForKey(dealingNode.isparent);\n\t\t\t\t\tif (childNodeData) {\n\t\t\t\t\t\tqueue.enqueue(childNodeData);\n\t\t\t\t\t\twhile (childNodeData.next && childNodeData.next != childNodeData.key) { //加入所有子节点\n\t\t\t\t\t\t\tchildNodeData = model.findNodeDataForKey(childNodeData.next);\n\t\t\t\t\t\t\tif (childNodeData) {\n\t\t\t\t\t\t\t\tqueue.enqueue(childNodeData);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t}\n\t\t},\n\n\t\t//遍历天地盘做指定操作,colletor=[]  深度优先\n\t\ttdTravelTdpData: function(nodeData, model, collector, callback) {\n\t\t\tif (nodeData) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\t\tcollector.push(callback(nodeData));\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\tconsole.log(e);\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t} else {\n\t\t\t\t\treturn;\n\t\t\t}\n\t\t\t//1 先处理子节点\n\t\t\tif (nodeData.isparent) {\n\t\t\t\t\tvar childNodeData = model.findNodeDataForKey(nodeData.isparent);\n\t\t\t\t\texports.tdTravelTdpData(childNodeData, model, collector, callback);\n\t\t\t}\n\t\t\t//2 再处理兄弟节点\n\t\t\tif (nodeData.next && nodeData.next != nodeData.key) { //处理异常情况\n\t\t\t\t\tvar nextNodeData = model.findNodeDataForKey(nodeData.next);\n\t\t\t\t\texports.tdTravelTdpData(nextNodeData, model, collector, callback);\n\t\t\t}\n\t\t},\n\t\tdeleteOldData(time){\n\t\t\tvar  temp, diff;\n\t\t\tfor(var item in window.localStorage) {\n\t\t\t\tif(window.localStorage.hasOwnProperty(item)) {\n\t\t\t\t\t// size += window.localStorage.getItem(item).length;\n\t\t\t\t\tif(item.startsWith(\"TDCurrent\")){\n\t\t\t\t\t\ttry{\n\t\t\t\t\t\t\ttemp = JSON.parse(window.localStorage.getItem(item))\n\t\t\t\t\t\t\tdiff =  new Date().getTime() - temp.modelData.updatedAt;\n\t\t\t\t\t\t\tif(diff/1000 > 86400*time){\n\t\t\t\t\t\t\t\tconsole.log(\"delete old data:\"+item)\n\t\t\t\t\t\t\t\twindow.localStorage.removeItem(item)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}catch(e){\n\t\t\t\t\t\t\tconsole.error(e)\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tsaveModelToLocalStorage(tpid, model){\n\t\t\tconsole.log(\"存储model到localStorage，只保留最近三天的\")\n\t\t\tmodel.modelData.updatedAt = new Date().getTime()\n\t\t\tif(!window.localStorage) {\n\t\t\t\tconsole.error('浏览器不支持localStorage');\n\t\t\t\treturn;\n\t\t\t}\t\t\n\t\t\t// 只保留最近一周内的盘\n\t\t\texports.deleteOldData(3)\n\t\t\ttry{\n\t\t\t\twindow.localStorage.setItem(\"TDCurrent\" + tpid, model.toJson());\n\t\t\t}catch(e){\n\t\t\t\texports.deleteOldData(1)\n\t\t\t\t// window.localStorage.clear()\n\t\t\t}\n\t\t},\n\n\t\t// 检查gojs model数据关系是否正确\n\t\tcheckModel: function(model){\n\t\t\tvar nodeDataArray = model.nodeDataArray\n\t\t\tvar root = model.findNodeDataForKey(1)\n\t\t\tvar collectior = []\n\t\t\tfunction checkDataExists(key){\n\t\t\t\tvar data = model.findNodeDataForKey(key)\n\t\t\t\tif(data){\n\t\t\t\t\treturn \"exist\"\n\t\t\t\t}else{\n\t\t\t\t\treturn \"not exist\"\n\t\t\t\t}\n\t\t\t}\n\t\t\texports.tdTravelTdpData(root, model, collectior, function(data){\n\t\t\t\t\n\t\t\t\tvar msg = `check key:${data.key},level:${data.level},parent:${data.parent},`+\n\t\t\t\t`isparent:${data.isparent},prev:${data.prev},next:${data.next}`\n\t\t\t\tif(data.next && checkDataExists(data.next) == \"not exist\"){\n\t\t\t\t\tconsole.error(`data ${data.key} next指向的节点不存在, data: ${msg}`)\n\t\t\t\t}\n\t\t\t\tif(data.isparent && checkDataExists(data.isparent) == \"not exist\"){\n\t\t\t\t\tconsole.error(`data ${data.key} isparent指向的节点不存在, data: ${msg}`)\n\t\t\t\t}\n\t\t\t\tif(data.parent && checkDataExists(data.parent) == \"not exist\"){\n\t\t\t\t\tconsole.error(`data ${data.key} parent指向的节点不存在, data: ${msg}`)\n\t\t\t\t}\n\t\t\t\tif(data.prev && checkDataExists(data.prev) == \"not exist\"){\n\t\t\t\t\tconsole.error(`data ${data.key} prev指向的节点不存在, data: ${msg}`)\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\t// 数值转换\n\t\ttdTransToNum(from, defaultVal) {\n\t\t\tif(arguments.length <= 1){\n\t\t\t\tdefaultVal = 0\n\t\t\t}\n\t\t\tvar result = defaultVal;\n\t\t\ttry {\n\t\t\t\tresult = parseFloat(from);\n\t\t\t\treturn result;\n\t\t\t} catch (e) {\n\t\t\t\treturn result;\n\t\t\t}\n\t\t\t},\t\n\t\tsimulateEnterWithAlt(e) { //模拟alt+Enter键盘,将gojs内置文本编辑窗口中的Alt+Enter 转换为\\n\n\t\t\tvar myDiagram = e.diagram;\n\t\t\tif (myDiagram.currentTool.currentTextEditor) {\n\t\t\t\t// jQuery(myDiagram.currentTool.currentTextEditor).unbind(\"keypress\", myDiagram.currentTool.currentTextEditor);\n\t\t\t\t// jQuery(myDiagram.currentTool.currentTextEditor).keypress(textEditorHandler);\n\t\t\t\tmyDiagram.currentTool.currentTextEditor.mainElement.onkeypress = null;\n\t\t\t\tmyDiagram.currentTool.currentTextEditor.mainElement.onkeypress = textEditorHandler;\n\t\t\t\tvar val = myDiagram.currentTool.currentTextEditor.mainElement.value\n\t\t\t\t// 只在手机端定位到结尾\n\t\t\t\tif(module.exports.checkPhone()){\n\t\t\t\t\tmyDiagram.currentTool.currentTextEditor.mainElement.selectionStart = val.length; \n\t\t\t\t\tmyDiagram.currentTool.currentTextEditor.mainElement.selectionEnd = val.length; \n\t\t\t\t}\n\t\t\t\tfunction textEditorHandler(e) {\n\t\t\t\t\tvar evt = e;\n\t\t\t\t\tconsole.log('textblock catched the key:' + evt);\n\t\t\t\t\tif (evt.which) {\n\t\t\t\t\t\tif (evt.keyCode == 13 && evt.altKey || evt.keyCode == 10 && evt.ctrlKey || evt.keyCode == 13 && evt.shiftKey || evt.keyCode == 10 && evt.shiftKey) {\n\t\t\t\t\t\t\tvar start = this.selectionStart,\n\t\t\t\t\t\t\t\tend = this.selectionEnd,\n\t\t\t\t\t\t\t\tval = this.value;\n\t\t\t\t\t\t\tthis.value = val.slice(0, start) + \"\\n\" + val.slice(end);\n\t\t\t\t\n\t\t\t\t\t\t\t// Move the caret\n\t\t\t\t\t\t\tthis.selectionStart = this.selectionEnd = start + 1;\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\n\t\t\t\t\tif (evt.keyCode == 13 && !evt.altKey) {\n\t\t\t\t\n\t\t\t\t\t\tif (myDiagram.currentTool.isActive) {\n\t\t\t\t\t\t\tmyDiagram.currentTool.acceptText(go.TextEditingTool.LostFocus);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn false; //阻止默认行为\n\t\t\t\t\t}\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t/***\n * travel nodes, group and links\n * @param rootnode go.Node\n * @param callback function(part){}\n */\ntravelParts(rootNode, callback) {\n    var diagram = rootNode.diagram;\n    callback(rootNode);\n    var group = rootNode.containingGroup;\n    if (group && group.data.parent == rootNode.data.key) {\n        callback(group);\n    }\n    var stack = [rootNode];\n    var node, link, child, nextChild;\n    while (stack.length > 0) {\n        node = stack.pop();\n        if (node.data.isparent) {\n            child = diagram.findNodeForKey(node.data.isparent);\n            link = node.findLinksTo(child).first();\n            callback(link);\n            callback(child);\n            group = child.containingGroup;\n            if (group && group.data.parent == child.data.key) {\n                callback(group);\n            }\n            stack.push(child);\n            while (child.data.next) {\n                nextChild = diagram.findNodeForKey(child.data.next);\n                link = child.findLinksTo(nextChild).first();\n                callback(link);\n                callback(nextChild);\n                group = nextChild.containingGroup;\n                if (group && group.data.parent == nextChild.data.key) {\n                    callback(group);\n                }\n                stack.push(nextChild);\n                child = nextChild;\n            }\n        }\n    }\n}\n\n\t\t\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/helpers/helpers.gojs.js","var $ = go.GraphObject.make;\r\ngo.GraphObject.defineBuilder('CircleButton', function (args) {\r\n    // default colors for 'Button' shape\r\n    var buttonFillNormal = '#F5F5F5';\r\n    var buttonStrokeNormal = '#BDBDBD';\r\n    var buttonFillOver = '#E0E0E0';\r\n    var buttonStrokeOver = '#9E9E9E';\r\n    var buttonFillPressed = '#BDBDBD'; // set to null for no button pressed effects\r\n    var buttonStrokePressed = '#9E9E9E';\r\n    var buttonFillDisabled = '#E5E5E5';\r\n  \r\n    // padding inside the ButtonBorder to match sizing from previous versions\r\n    var paddingHorizontal = 2.76142374915397;\r\n    var paddingVertical = 2.761423749153969;\r\n  \r\n    var button = /** @type {Panel} */ (\r\n      go.GraphObject.make(go.Panel, 'Auto',\r\n        {\r\n          isActionable: true,  // needed so that the ActionTool intercepts mouse events\r\n          enabledChanged: function (btn, enabled) {\r\n            var shape = btn.findObject('ButtonBorder');\r\n            if (shape !== null) {\r\n              shape.fill = enabled ? btn['_buttonFillNormal'] : btn['_buttonFillDisabled'];\r\n            }\r\n          },\r\n          cursor: 'pointer',\r\n          // save these values for the mouseEnter and mouseLeave event handlers\r\n          '_buttonFillNormal': buttonFillNormal,\r\n          '_buttonStrokeNormal': buttonStrokeNormal,\r\n          '_buttonFillOver': buttonFillOver,\r\n          '_buttonStrokeOver': buttonStrokeOver,\r\n          '_buttonFillPressed': buttonFillPressed,\r\n          '_buttonStrokePressed': buttonStrokePressed,\r\n          '_buttonFillDisabled': buttonFillDisabled\r\n        },\r\n        go.GraphObject.make(go.Shape,  // the border\r\n          {\r\n            name: 'ButtonBorder',\r\n            figure: 'Circle',\r\n            spot1: new go.Spot(0, 0, paddingHorizontal, paddingVertical),\r\n            spot2: new go.Spot(1, 1, -paddingHorizontal, -paddingVertical),\r\n            parameter1: 2,\r\n            parameter2: 2,\r\n            fill: buttonFillNormal,\r\n            stroke: buttonStrokeNormal\r\n          }\r\n        )\r\n      )\r\n    );\r\n  \r\n    // There's no GraphObject inside the button shape -- it must be added as part of the button definition.\r\n    // This way the object could be a TextBlock or a Shape or a Picture or arbitrarily complex Panel.\r\n  \r\n    // mouse-over behavior\r\n    button.mouseEnter = function (e, btn, prev) {\r\n      if (!btn.isEnabledObject()) return;\r\n      var shape = btn.findObject('ButtonBorder');  // the border Shape\r\n      if (shape instanceof go.Shape) {\r\n        var brush = btn['_buttonFillOver'];\r\n        btn['_buttonFillNormal'] = shape.fill;\r\n        shape.fill = brush;\r\n        brush = btn['_buttonStrokeOver'];\r\n        btn['_buttonStrokeNormal'] = shape.stroke;\r\n        shape.stroke = brush;\r\n      }\r\n    };\r\n  \r\n    button.mouseLeave = function (e, btn, prev) {\r\n      if (!btn.isEnabledObject()) return;\r\n      var shape = btn.findObject('ButtonBorder');  // the border Shape\r\n      if (shape instanceof go.Shape) {\r\n        shape.fill = btn['_buttonFillNormal'];\r\n        shape.stroke = btn['_buttonStrokeNormal'];\r\n      }\r\n    };\r\n  \r\n    // mousedown/mouseup behavior\r\n    button.actionDown = function (e, btn) {\r\n      if (!btn.isEnabledObject()) return;\r\n      if (btn['_buttonFillPressed'] === null) return;\r\n      if (e.button !== 0) return;\r\n      var shape = btn.findObject('ButtonBorder');  // the border Shape\r\n      if (shape instanceof go.Shape) {\r\n        var diagram = e.diagram;\r\n        var oldskip = diagram.skipsUndoManager;\r\n        diagram.skipsUndoManager = true;\r\n        var brush = btn['_buttonFillPressed'];\r\n        btn['_buttonFillOver'] = shape.fill;\r\n        shape.fill = brush;\r\n        brush = btn['_buttonStrokePressed'];\r\n        btn['_buttonStrokeOver'] = shape.stroke;\r\n        shape.stroke = brush;\r\n        diagram.skipsUndoManager = oldskip;\r\n      }\r\n    };\r\n  \r\n    button.actionUp = function (e, btn) {\r\n      if (!btn.isEnabledObject()) return;\r\n      if (btn['_buttonFillPressed'] === null) return;\r\n      if (e.button !== 0) return;\r\n      var shape = btn.findObject('ButtonBorder');  // the border Shape\r\n      if (shape instanceof go.Shape) {\r\n        var diagram = e.diagram;\r\n        var oldskip = diagram.skipsUndoManager;\r\n        diagram.skipsUndoManager = true;\r\n        if (overButton(e, btn)) {\r\n          shape.fill = btn['_buttonFillOver'];\r\n          shape.stroke = btn['_buttonStrokeOver'];\r\n        } else {\r\n          shape.fill = btn['_buttonFillNormal'];\r\n          shape.stroke = btn['_buttonStrokeNormal'];\r\n        }\r\n        diagram.skipsUndoManager = oldskip;\r\n      }\r\n    };\r\n  \r\n    button.actionCancel = function (e, btn) {\r\n      if (!btn.isEnabledObject()) return;\r\n      if (btn['_buttonFillPressed'] === null) return;\r\n      var shape = btn.findObject('ButtonBorder');  // the border Shape\r\n      if (shape instanceof go.Shape) {\r\n        var diagram = e.diagram;\r\n        var oldskip = diagram.skipsUndoManager;\r\n        diagram.skipsUndoManager = true;\r\n        if (overButton(e, btn)) {\r\n          shape.fill = btn['_buttonFillOver'];\r\n          shape.stroke = btn['_buttonStrokeOver'];\r\n        } else {\r\n          shape.fill = btn['_buttonFillNormal'];\r\n          shape.stroke = btn['_buttonStrokeNormal'];\r\n        }\r\n        diagram.skipsUndoManager = oldskip;\r\n      }\r\n    };\r\n  \r\n    button.actionMove = function (e, btn) {\r\n      if (!btn.isEnabledObject()) return;\r\n      if (btn['_buttonFillPressed'] === null) return;\r\n      var diagram = e.diagram;\r\n      if (diagram.firstInput.button !== 0) return;\r\n      diagram.currentTool.standardMouseOver();\r\n      if (overButton(e, btn)) {\r\n        var shape = btn.findObject('ButtonBorder');\r\n        if (shape instanceof go.Shape) {\r\n          var oldskip = diagram.skipsUndoManager;\r\n          diagram.skipsUndoManager = true;\r\n          let brush = btn['_buttonFillPressed'];\r\n          if (shape.fill !== brush) shape.fill = brush;\r\n          brush = btn['_buttonStrokePressed'];\r\n          if (shape.stroke !== brush) shape.stroke = brush;\r\n          diagram.skipsUndoManager = oldskip;\r\n        }\r\n      }\r\n    };\r\n  \r\n    function overButton(e, btn) {\r\n      var over = e.diagram.findObjectAt(\r\n        e.documentPoint,\r\n        function (x) {\r\n          while (x.panel !== null) {\r\n            if (x.isActionable) return x;\r\n            x = x.panel;\r\n          }\r\n          return x;\r\n        },\r\n        function (x) { return x === btn; }\r\n      );\r\n      return over !== null;\r\n    }\r\n  \r\n    return button;\r\n  });\r\n  \r\nclass NodeBase {\r\n    constructor(options){\r\n        var that = this\r\n        this.diagram = options.diagram\r\n        this.nodeProperties = this.getNodeProperties()\r\n        this.binding = this.getBinding()\r\n        // this.nodeTemplate = this.getNodeTemplate()\r\n    }\r\n\r\n    getNodeProperties(){\r\n        var that = this\r\n        var diagram = this.diagram\r\n        var properties = {\r\n            // type: go.Panel.Auto,\r\n            // \"_controlExpand\": true,\r\n            // layerName: \"default\",\r\n            // locationSpot: go.Spot.Center,\r\n            // resizeCellSize: new go.Size(10, 10),\r\n            // // locationObjectName: \"SHAPE\",\r\n            // resizable: true,\r\n            // // resizeObjectName: \"SHAPE\", // user can resize the Shape\r\n            // rotatable: false,\r\n            // location: new go.Point(0, 0),\r\n            // click: that.click,\r\n            // //rotateObjectName: \"SHAPE\",  // rotate the Shape without rotating the label\r\n            // doubleClick: that.doubleClick,\r\n            // toMaxLinks: 1,\r\n            // layoutConditions: go.Part.LayoutStandard,\r\n            // //layoutConditions:~go.Part.LayoutAdded,\r\n            // // fromLinkable: true, toLinkable: true,\r\n            // alignment: go.Spot.Center,\r\n            // alignmentFocus: go.Spot.Center,\r\n            // resizeAdornmentTemplate: diagram.__trtd.nodeResizeAdornmentTemplate(),\r\n            // // contextMenu: $(go.Adornment),\r\n            // contextMenu: diagram.__trtd.getNodeContextMenu(),\r\n            // selectionAdornmentTemplate: diagram.__trtd.getNodeSelectionAdornmentTemplate(),\r\n            // mouseOver: that.mouseOver,\r\n            // mouseLeave: that.mouseLeave,\r\n            // mouseDragEnter: that.mouseDragEnter,\r\n            // mouseDragLeave: that.mouseDragLeave,\r\n            // mouseDrop: that.mouseDrop\r\n        }\r\n        return properties\r\n    }\r\n\r\n    getNodeSelectionAdornmentTemplate(){\r\n      return  $(go.Adornment, \"Auto\",\r\n          $(go.Shape, \"Rectangle\",\r\n          // { fill: null, stroke: \"#9aa8b6\", strokeWidth: 1 }),\r\n          { fill: null, stroke: \"dodgerblue\", strokeWidth: 3 }),\r\n          $(go.Placeholder)\r\n        )  // end Adornment\r\n    }\r\n\r\n    getBinding(){\r\n        return [\r\n            new go.Binding(\"location\", \"loc\", go.Point.parse).makeTwoWay(go.Point.stringify),\r\n            new go.Binding(\"movable\", \"movable\").makeTwoWay(),\r\n            new go.Binding(\"isShadowed\", \"isShadowed\").makeTwoWay(),\r\n            new go.Binding(\"selectable\", \"selectable\").makeTwoWay(),\r\n            new go.Binding(\"angle\", \"angle\").makeTwoWay(),\r\n            new go.Binding(\"copyable\", \"copyable\").makeTwoWay(),\r\n        ]\r\n    }\r\n    getTextBuild(){\r\n        return $(go.TextBlock, {\r\n                name: \"TEXT\",\r\n                alignment: new go.Spot(0.5, 0.4),\r\n                font: \"bold 18px 幼圆\",\r\n                editable: true,\r\n                // flip:go.GraphObject.FlipHorizontal,\r\n                //margin: 3, editable: true,\r\n                stroke: \"black\",\r\n                isMultiline: true,\r\n                overflow: go.TextBlock.OverflowClip,\r\n                wrap: go.TextBlock.WrapDesiredSize,\r\n                textAlign: \"center\",\r\n                spacingAbove: 4,\r\n                spacingBelow: 4,\r\n                portId: \"TEXT\",\r\n                stretch: go.GraphObject.Uniform\r\n            },\r\n            new go.Binding(\"textAlign\", \"textAlign\", function(v) {\r\n                return ['start', 'center', 'end'].indexOf(v)>-1 ? v : \"center\";\r\n            }).makeTwoWay(),\r\n            new go.Binding(\"spacingAbove\", \"spacingline\", function(v) {\r\n                return helpers.tdTransToNum(v, 4);\r\n            }).makeTwoWay(),\r\n            new go.Binding(\"spacingBelow\", \"spacingline\", function(v) {\r\n                return helpers.tdTransToNum(v, 4);\r\n            }).makeTwoWay(),\r\n            new go.Binding(\"width\", \"width\", function(v) {\r\n                return v-30;\r\n            }).ofObject(\"main\"),\r\n            // new go.Binding(\"height\", \"height\", function (v) {\r\n            //   return v;\r\n            // }).ofObject(\"SHAPE\"),\r\n            new go.Binding(\"text\", \"text\").makeTwoWay(),\r\n            new go.Binding(\"stroke\", \"textStroke\").makeTwoWay(),\r\n            new go.Binding(\"font\", \"font\").makeTwoWay()\r\n        )\r\n      }\r\n      \r\n    getNodeTemplate(){\r\n        console.log(\"NodeBase.getNodeTemplate\")\r\n        var that = this;\r\n        return $(go.Node, \r\n            that.nodeProperties,\r\n            that.binding\r\n        );\r\n    }\r\n\r\n    click(e, node){\r\n        // console.log(node.data)\r\n        if(node.diagram.__trtd.nodeClickListener){\r\n            node.diagram.__trtd.nodeClickListener(node)\r\n        }\r\n    }\r\n\r\n    doubleClick(e, node){\r\n        e.diagram.__trtd.selectText(e, node)\r\n    }\r\n\r\n    mouseOver(e, node) {\r\n        // if(node.data.hyperlink){\r\n        //   var textObj = node.findObject('TEXT');\r\n        //   textObj.isUnderline = true;\r\n        // }\r\n\r\n        e.diagram.__trtd.showNodeRemarkTips(e, node);\r\n\r\n    }\r\n\r\n    mouseLeave(e, node) {\r\n        // if(node.data.hyperlink) {\r\n        //   var textObj = node.findObject('TEXT');\r\n        //   textObj.isUnderline = false;\r\n        // }\r\n        e.diagram.__trtd.removeNodeRemarkTips();\r\n    }\r\n    mouseDragEnter(e, obj) {\r\n        var node = obj.part;\r\n        var selnode = e.diagram.selection.first();\r\n        if (!(selnode instanceof go.Node) || selnode.category == \"3\" || selnode.category == \"text\" || selnode.key == 1) {\r\n            return;\r\n        }\r\n        //var sat = node.selectionAdornmentTemplate;\r\n        //var adorn = sat.copy();\r\n        //adorn.adornedObject = node;\r\n        //node.addAdornment(\"dragEnter\", adorn);\r\n\r\n        //if (!mayWorkFor(selnode, node)) return;\r\n        var shape = node.findObject(\"SHAPE\");\r\n        if (shape) {\r\n            shape._prevFill = shape.fill; // remember the original brush\r\n            shape.fill = \"darkred\";\r\n        }\r\n\r\n    }\r\n    mouseDragLeave(e, obj) {\r\n        var node = obj.part;\r\n        var shape = node.findObject(\"SHAPE\");\r\n        if (shape && shape._prevFill) {\r\n            shape.fill = shape._prevFill; // restore the original brush\r\n        }\r\n        //node.removeAdornment(\"dragEnter\");\r\n    }\r\n    mouseDrop(e, obj) {\r\n        var node = obj.part;\r\n        var selnode = e.diagram.selection.first();\r\n        if (!(selnode instanceof go.Node) || selnode.data.category == \"3\" || selnode.data.category == \"text\" || selnode.data.key == 1) {\r\n            return;\r\n        }\r\n\r\n        if (node.data.isparent) {\r\n            var child = e.diagram.findNodeForKey(node.data.isparent);\r\n            while (child.data.next) {\r\n                child = e.diagram.findNodeForKey(child.data.next);\r\n            }\r\n            if (child.data.key == selnode.data.key) {\r\n                //最后一个子节点拖放到父节点上时，不做任何操作\r\n                return;\r\n            }\r\n            e.diagram.__trtd.setNodeAsSibling(selnode, child);\r\n        } else {\r\n            e.diagram.__trtd.setNodeAsChildren(selnode, node);\r\n        }\r\n    }\r\n}\r\n\r\nmodule.exports = NodeBase\n\n\n// WEBPACK FOOTER //\n// ./src/nodeTemplate/base.js","var $ = go.GraphObject.make;\r\n\r\nmodule.exports = // 返回图片天盘的独立节点模板\r\nfunction createPictureSingleNodeTemplate (diagram) {\r\n    // var $ = go.GraphObject.make;\r\n    var properties = {\r\n        figure: \"Circle\",\r\n        fill: \"white\",\r\n        strokeWidth: 1,\r\n        stroke: \"#767678\",\r\n        fontSize: 15,\r\n        font: \"sans-serif\"\r\n    };\r\n    return $(go.Node, \"Auto\", {\r\n        name: \"NODE\",\r\n        \"_controlExpand\": true,\r\n        layerName: \"Background\",\r\n        // layerName: \"Foreground\",\r\n        zOrder: 20,\r\n        locationSpot: go.Spot.Center,\r\n        resizeCellSize: new go.Size(10, 10),\r\n        locationObjectName: \"SHAPE\",\r\n        resizable: true,\r\n        resizeObjectName: \"SHAPE\", // user can resize the Shape\r\n        rotatable: true,\r\n        rotateObjectName: \"SHAPE\", // rotate the Shape without rotating the label\r\n        doubleClick: function (e, node) {\r\n            // interactions.selectText(e, node)\r\n            console.log(node.data)\r\n            if(node.diagram.__trtd.nodeDoubleClickListener){\r\n                node.diagram.__trtd.nodeDoubleClickListener(node)\r\n            }\r\n            \r\n        },\r\n        click: function(e, node) {\r\n            console.log(node.data)\r\n            if(node.diagram.__trtd.nodeClickListener){\r\n                node.diagram.__trtd.nodeClickListener(node)\r\n            }\r\n            // showNodeToolBar(e,node);\r\n        },\r\n        selectable: true,\r\n        movable: true,\r\n        angle: 0,\r\n        //toMaxLinks: 1,\r\n        layoutConditions: go.Part.LayoutStandard,\r\n        //layoutConditions:~go.Part.LayoutAdded,\r\n        // fromLinkable: true, toLinkable: true,\r\n        alignment: go.Spot.Center,\r\n        alignmentFocus: go.Spot.Center,\r\n        resizeAdornmentTemplate: diagram.__trtd.nodeResizeAdornmentTemplate(),\r\n        //rotateAdornmentTemplate: nodeRotateAdornmentTemplate,\r\n        contextMenu: diagram.__trtd.nodeContextMenu,\r\n        selectionAdornmentTemplate: function() {\r\n            var $ = go.GraphObject.make;\r\n            return $(go.Adornment, \"Spot\",\r\n                $(go.Panel, \"Auto\",\r\n                    $(go.Shape, { fill: null, stroke: \"blue\", strokeWidth: 1 }),\r\n                    $(go.Placeholder) // this represents the selected Node\r\n\r\n                ),\r\n                //$(\"TreeExpanderButton\",\r\n                $(go.Panel, \"Vertical\", {\r\n                        name: \"ButtonIcon1\",\r\n                        alignment: new go.Spot(0, 1, -20, 20),\r\n                        alignmentFocus: go.Spot.Center,\r\n                        width: 60,\r\n                        height: 60,\r\n                        isActionable: true,\r\n                        // click: interactions.expandCollapse // this function is defined below\r\n                    },\r\n\r\n                    $(go.Shape, \"Circle\", {\r\n                        fill: \"rgba(1,1,1,0)\",\r\n                        strokeWidth: 0,\r\n                        stroke: \"green\",\r\n                        width: 50,\r\n                        height: 50\r\n                    })\r\n\r\n                )\r\n            ); // end Adornment\r\n        }(),\r\n        contextMenu: function() {\r\n            var $ = go.GraphObject.make;\r\n            return $(go.Adornment, \"Vertical\",\r\n                $(\"ContextMenuButton\",\r\n                    $(go.TextBlock, \"删除\"), {\r\n                        click: function(e, obj) {\r\n                            e.diagram.commandHandler.deleteSelection();\r\n                        }\r\n                    }),\r\n                $(\"ContextMenuButton\",\r\n                    $(go.TextBlock, \"居中\"), {\r\n                        click: function(e, obj) {\r\n                            centerPicture();\r\n                        }\r\n                    }),\r\n                $(\"ContextMenuButton\",\r\n                    $(go.TextBlock, \"等宽高\"), {\r\n                        click: function(e, obj) {\r\n                            equalWidthHeightPicture();\r\n                        }\r\n                    }),\r\n                $(\"ContextMenuButton\",\r\n                    $(go.TextBlock, \"原始比例\", { stroke: \"gray\" }), {\r\n                        click: function(e, obj) {\r\n                            //equalWidthHeightPicture();\r\n                        }\r\n                    }),\r\n                $(\"ContextMenuButton\",\r\n                    $(go.TextBlock, \"至于顶层\"), {\r\n                        click: function(e, obj) {\r\n                            //bringToBackground();\r\n                            bringToLayer(\"Foreground\");\r\n                        }\r\n                    }),\r\n                $(\"ContextMenuButton\",\r\n                    $(go.TextBlock, \"至于底层\"), {\r\n                        click: function(e, obj) {\r\n                            bringToLayer(\"Background\");\r\n                        }\r\n                    }),\r\n                $(\"ContextMenuButton\",\r\n                    $(go.TextBlock, \"上移一层\"), {\r\n                        click: function(e, obj) {\r\n                            bringToLayer(null);\r\n                        }\r\n                    }),\r\n                $(\"ContextMenuButton\",\r\n                    $(go.TextBlock, \"固定\",\r\n                        new go.Binding(\"text\", \"\", function(d, obj) {\r\n                            var node = obj.part;\r\n                            return node.data.selectable != undefined ? (node.data.selectable ? \"固定\" : \"取消固定\") : \"固定\";\r\n                        })\r\n                    ), {\r\n                        name: \"fixnode\",\r\n                        click: function(e, obj) {\r\n                            var diagram = obj.diagram;\r\n                            var node = obj.part;\r\n                            diagram.startTransaction();\r\n                            //node.setProperties({\"movable\":node.data.movable?(!node.data.movable):true});\r\n                            diagram.model.setDataProperty(node.data, \"selectable\", node.data.selectable != undefined ? (!node.data.selectable) : false);\r\n                            diagram.commitTransaction();\r\n                        }\r\n                    }\r\n                )\r\n            );\r\n        }()},\r\n        new go.Binding(\"location\", \"loc\", go.Point.parse).makeTwoWay(go.Point.stringify),\r\n        new go.Binding(\"isShadowed\", \"isShadowed\").makeTwoWay(),\r\n        new go.Binding(\"selectable\", \"selectable\").makeTwoWay(),\r\n        new go.Binding(\"movable\", \"movable\").makeTwoWay(),\r\n        new go.Binding(\"layerName\", \"layerName\", function(v, d) {\r\n            return v ? v : \"\";\r\n        }).makeTwoWay(function(v) {\r\n            return v;\r\n        }),\r\n        $(go.TextBlock, // the text label\r\n            new go.Binding(\"text\", \"text\")),\r\n        $(go.Picture, // the icon showing the logo\r\n            // You should set the desiredSize (or width and height)\r\n            // whenever you know what size the Picture should be.\r\n            { name: \"SHAPE\" }, {\r\n                successFunction: function(pict, evt) {\r\n                    if ((!pict.width || !pict.height) && (!pict.part.data.width || !pict.part.data.height)) {\r\n                        pict.width = pict.element.width;\r\n                        pict.height = pict.element.height;\r\n                    }\r\n                }\r\n            }, {\r\n                sourceCrossOrigin: function(pict) {\r\n                    return \"\";\r\n                }\r\n            },\r\n            new go.Binding(\"source\", \"picture\", function(v){\r\n                    \r\n                return v+\"?\"+Date.now()\r\n\r\n            }).makeTwoWay(function(v){\r\n                if(v){\r\n                    v = v.replace(/\\?.*$/g,\"\")\r\n                    return v\r\n                }else{\r\n                    return \"\"\r\n                }\r\n            }),\r\n            new go.Binding(\"width\", \"width\", function(v, d) {\r\n                return v;\r\n            }).makeTwoWay(function(v) {\r\n                return v;\r\n            }),\r\n            new go.Binding(\"height\", \"height\", function(v, d) {\r\n                return v;\r\n            }).makeTwoWay(function(v) {\r\n                return v;\r\n            }),\r\n            new go.Binding(\"angle\", \"pictureangle\").makeTwoWay(),\r\n            new go.Binding(\"opacity\", \"opacity\", function(v, d) {\r\n                return v ? parseFloat(v) : 1;\r\n            }).makeTwoWay(function(v) {\r\n                return v;\r\n            })\r\n        )\r\n    );\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/nodeTemplate/createPictureSingleNodeTemplate.js","var $ = go.GraphObject.make;\r\n\r\nmodule.exports = function createTextNodeTemplate (diagram) {\r\n    var properties = {\r\n        figure: \"Rectangle\",\r\n        fill: \"rgba(0,0,0,0)\",\r\n        strokeWidth: 1,\r\n        stroke: \"rgba(0,0,0,0)\",\r\n        fontSize: 15,\r\n        font: \"sans-serif\"\r\n    };\r\n    return $(go.Node, \"Spot\", {\r\n            \"_controlExpand\": true,\r\n            layerName: \"Foreground\",\r\n            movable: true,\r\n            locationSpot: go.Spot.Center,\r\n            resizeCellSize: new go.Size(10, 10),\r\n            locationObjectName: \"SHAPE\",\r\n            resizable: true,\r\n            resizeObjectName: \"SHAPE\", // user can resize the Shape\r\n            rotatable: true,\r\n            location: new go.Point(0, 0),\r\n            //rotateObjectName: \"SHAPE\",  // rotate the Shape without rotating the label\r\n            // doubleClick: selectText,\r\n            toMaxLinks: 1,\r\n            layoutConditions: go.Part.LayoutStandard,\r\n            //layoutConditions:~go.Part.LayoutAdded,\r\n            // fromLinkable: true, toLinkable: true,\r\n            alignment: go.Spot.Center,\r\n            alignmentFocus: go.Spot.Center,\r\n            contextMenu: diagram.__trtd.getNodeContextMenu(),\r\n            doubleClick: function (e, node){\r\n                e.diagram.__trtd.selectText(e, node)\r\n            }\r\n\r\n            // selectionAdornmentTemplate: nodeSelectionAdornmentTemplate,\r\n        },\r\n        new go.Binding(\"locationSpot\", \"locationSpot\", function(v){\r\n            console.log(\"locationSpot1\")\r\n            return go.Spot.parse(v)\r\n        }).makeTwoWay(function(v){\r\n            console.log(\"locationSpot2\")\r\n            return go.Spot.stringify(v)\r\n        }),\r\n        new go.Binding(\"deletable\", \"deletable\").makeTwoWay(),\r\n        new go.Binding(\"movable\", \"movable\").makeTwoWay(),\r\n        new go.Binding(\"location\", \"loc\", go.Point.parse).makeTwoWay(go.Point.stringify),\r\n        new go.Binding(\"isShadowed\", \"isShadowed\").makeTwoWay(),\r\n        new go.Binding(\"angle\", \"angle\").makeTwoWay(),\r\n        new go.Binding(\"selectable\", \"selectable\").makeTwoWay(),\r\n        new go.Binding(\"layerName\", \"layerName\", function(v, d) {\r\n            return v ? v : \"\";\r\n        }).makeTwoWay(function(v) {\r\n            return v;\r\n        }),\r\n        $(go.Shape, {\r\n                strokeDashArray: null,\r\n                // strokeDashOffset:10,\r\n                name: \"SHAPE\",\r\n                figure: \"Rectangle\",\r\n                fill: \"rgba(0,0,0,0)\",\r\n                fromLinkable: true,\r\n                toLinkable: true,\r\n                cursor: \"pointer\",\r\n                minSize: new go.Size(50, 50),\r\n                strokeWidth: 2,\r\n                stroke: \"rgba(0,0,0,0)\",\r\n                portId: \"\",\r\n                width:150\r\n            },\r\n            new go.Binding(\"strokeDashArray\", \"strokeDashArray\", function(v) {\r\n                return [v.split()[0], v.split()[1]];\r\n            }).makeTwoWay(function(v) {\r\n                return v[0] + \" \" + v[1];\r\n            }), //保留，设置边线样式\r\n            new go.Binding(\"fill\", \"fill\", function(v, obj) {\r\n                return v instanceof go.Brush ? v.color : v;\r\n            }).makeTwoWay(),\r\n            // new go.Binding(\"fill\", \"isSelected\", function(s, obj) { return s ? \"red\" : obj.part.data.color; }).ofObject()),\r\n            new go.Binding(\"width\", \"width\", function(v) {\r\n                //alert(v);\r\n                return v;\r\n            }).makeTwoWay(function(v) {\r\n                return v;\r\n            }),\r\n            new go.Binding(\"height\", \"height\", function(v) {\r\n                //alert(v);\r\n                return v;\r\n            }).makeTwoWay(function(v) {\r\n                return v;\r\n            }),\r\n            new go.Binding(\"stroke\", \"stroke\", function(v) {\r\n                return v instanceof go.Brush ? v.stroke : v;\r\n            }).makeTwoWay(),\r\n            new go.Binding(\"strokeWidth\", \"strokeWidth\", function(d) {\r\n                return d;\r\n            }).makeTwoWay(function(d) {\r\n                return d;\r\n            }),\r\n            new go.Binding(\"figure\", \"figure\").makeTwoWay(), {\r\n                figure: properties.figure,\r\n                fill: properties.fill,\r\n                strokeWidth: properties.strokeWidth,\r\n                stroke: properties.stroke\r\n            }\r\n        ),\r\n        $(go.Shape, {\r\n                name: \"SHAPE_Back\",\r\n                figure: \"Rectangle\",\r\n                fill: \"rgba(0,0,0,0)\",\r\n                // fromLinkable: true,\r\n                // toLinkable: true,\r\n                strokeWidth: 0\r\n            },\r\n            new go.Binding(\"width\", \"width\", function(v) {\r\n                return v;\r\n            }).ofObject(\"SHAPE\"),\r\n            new go.Binding(\"height\", \"height\", function(v) {\r\n                return v;\r\n            }).ofObject(\"SHAPE\")\r\n        ),\r\n        $(go.TextBlock, {\r\n                name: \"TEXT\",\r\n                alignment: new go.Spot(0.5, 0.5),\r\n                font: \"bold \" + diagram.__trtd.InitialFontSize + \"px 幼圆\",\r\n                editable: true,\r\n                //margin: 3, editable: true,\r\n                stroke: \"black\",\r\n                isMultiline: true,\r\n                overflow: go.TextBlock.OverflowClip,\r\n                wrap: go.TextBlock.WrapDesiredSize,\r\n                textAlign: \"center\",\r\n                // verticalAlignment: go.Spot.Bottom,\r\n                spacingAbove: 4,\r\n                spacingBelow: 4,\r\n                portId: \"TEXT\",\r\n                stretch: go.GraphObject.Fill\r\n            },\r\n            new go.Binding(\"textAlign\", \"textAlign\", function(v) {\r\n                return _.contains(['start', 'center', 'end'], v) ? v : \"center\";\r\n            }).makeTwoWay(),\r\n            new go.Binding(\"spacingAbove\", \"spacingline\", function(v) {\r\n                return helpers.tdTransToNum(v, 4);\r\n            }).makeTwoWay(),\r\n            new go.Binding(\"spacingBelow\", \"spacingline\", function(v) {\r\n                return helpers.tdTransToNum(v, 4);\r\n            }).makeTwoWay(),\r\n            new go.Binding(\"width\", \"width\", function(v) {\r\n                return v;\r\n            }).ofObject(\"SHAPE\"),\r\n            // new go.Binding(\"height\", \"height\", function (v) {\r\n            //   return v;\r\n            // }).ofObject(\"SHAPE\"),\r\n            new go.Binding(\"text\", \"text\").makeTwoWay(),\r\n            new go.Binding(\"stroke\", \"textStroke\").makeTwoWay(),\r\n            new go.Binding(\"font\", \"font\").makeTwoWay()\r\n        )\r\n    );\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/nodeTemplate/createTextNodeTemplate.js","// 返回图片天盘节点模板\r\nvar $ = go.GraphObject.make;\r\n\r\nmodule.exports = function createPictureNodeTemplate (diagram) {\r\n    // var $ = go.GraphObject.make;\r\n\r\n    return $(go.Node, \"Auto\", {\r\n            \"_controlExpand\": true,\r\n            layerName: \"default\",\r\n            locationSpot: go.Spot.Center,\r\n            resizeCellSize: new go.Size(10, 10),\r\n            locationObjectName: \"SHAPE\",\r\n            resizable: true,\r\n            resizeObjectName: \"SHAPE\", // user can resize the Shape\r\n            rotatable: false,\r\n            //rotateObjectName: \"SHAPE\",  // rotate the Shape without rotating the label\r\n            doubleClick: function (e, node) {\r\n                interactions.selectText(e, node)\r\n            },\r\n            //toMaxLinks: 1,\r\n            layoutConditions: go.Part.LayoutStandard,\r\n            //layoutConditions:~go.Part.LayoutAdded,    \r\n            // fromLinkable: true, toLinkable: true,\r\n            alignment: go.Spot.Center,\r\n            alignmentFocus: go.Spot.Center,\r\n            resizeAdornmentTemplate: diagram.__trtd.nodeResizeAdornmentTemplate(),\r\n\r\n            contextMenu: diagram.__trtd.getNodeContextMenu(),\r\n            selectionAdornmentTemplate: diagram.__trtd.getNodeSelectionAdornmentTemplate()\r\n        //layoutConditions: go.Part.LayoutStandard & ~go.Part.LayoutNodeSized & ~go.Part.LayoutAdded\r\n        },\r\n        new go.Binding(\"location\", \"loc\", go.Point.parse).makeTwoWay(go.Point.stringify),\r\n        new go.Binding(\"isShadowed\", \"isShadowed\").makeTwoWay(),\r\n        $(go.Panel, \"Spot\",\r\n            $(go.Picture, // the icon showing the logo\r\n                // You should set the desiredSize (or width and height)\r\n                // whenever you know what size the Picture should be.\r\n                { name: \"SHAPE\" }, {\r\n                    sourceCrossOrigin: function(pict) {\r\n                        return \"Anonymous\";\r\n                    }\r\n                },\r\n                new go.Binding(\"source\", \"picture\", function(v){\r\n                    \r\n                    return v+\"?\"+Date.now()\r\n\r\n                }).makeTwoWay(function(v){\r\n                    if(v){\r\n                        v = v.replace(/\\?.*$/g,\"\")\r\n                        return v\r\n                    }else{\r\n                        return \"\"\r\n                    }\r\n                }),\r\n                new go.Binding(\"width\", \"width\", function(v, d) {\r\n                    return v;\r\n                }).makeTwoWay(function(v) {\r\n                    return v;\r\n                }),\r\n                new go.Binding(\"height\", \"height\", function(v, d) {\r\n                    return v;\r\n                }).makeTwoWay(function(v) {\r\n                    return v;\r\n                })\r\n            ),\r\n            $(go.TextBlock, {\r\n                    name: \"TEXT\",\r\n                    alignment: new go.Spot(0.5, 0.5),\r\n                    font: \"bold \" + diagram.__trtd.InitialFontSize + \"px 幼圆\",\r\n                    //margin: 3, editable: true,\r\n                    stroke: \"black\",\r\n                    isMultiline: true,\r\n                    overflow: go.TextBlock.OverflowClip,\r\n                    wrap: go.TextBlock.WrapDesiredSize,\r\n                    textAlign: \"center\",\r\n                    spacingAbove: 4,\r\n                    spacingBelow: 4,\r\n                    portId: \"TEXT\",\r\n                    stretch: go.GraphObject.Fill\r\n                        //,width:100\r\n                },\r\n                new go.Binding(\"textAlign\", \"textAlign\", function(v) {\r\n                    return _.contains(['start', 'center', 'end'], v) ? v : \"center\";\r\n                }).makeTwoWay(),\r\n                new go.Binding(\"spacingAbove\", \"spacingline\", function(v) {\r\n                    return tdTransToNum(v, 4);\r\n                }).makeTwoWay(),\r\n                new go.Binding(\"spacingBelow\", \"spacingline\", function(v) {\r\n                    return tdTransToNum(v, 4);\r\n                }).makeTwoWay(),\r\n                //new go.Binding(\"width\",\"width\",function(v){return v/2 * Math.sqrt(2)+7;}).ofObject(\"SHAPE\"),\r\n                new go.Binding(\"maxSize\", \"width\", function(v) {\r\n                    var va = v / 2 * Math.sqrt(2);\r\n                    return new go.Size(va, va);\r\n                }).ofObject(\"SHAPE\"),\r\n                // new go.Binding(\"height\",\"width\",function(v){return v/2 * Math.sqrt(2);;}).ofObject(\"SHAPE\"),\r\n                new go.Binding(\"text\", \"text\").makeTwoWay(),\r\n                new go.Binding(\"stroke\", \"textStroke\").makeTwoWay(),\r\n                new go.Binding(\"font\", \"font\").makeTwoWay()\r\n            )\r\n        ), {\r\n            toolTip: $(go.Adornment, \"Auto\",\r\n                $(go.Shape, { fill: \"#FFFFCC\" }),\r\n                $(go.TextBlock, { margin: 4 }, // the tooltip shows the result of calling nodeInfo(data)\r\n                    new go.Binding(\"text\", \"\", function(d) {\r\n                        return d.text;\r\n                    })\r\n                )\r\n            )\r\n        }\r\n    );\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/nodeTemplate/createPictureNodeTemplate.js","var $ = go.GraphObject.make\r\nvar svg = require('../datas/svg.template');\r\n\r\n// 返回svg节点\r\nmodule.exports = function createNodeSvgTemplate (diagram) {\r\n    var properties = {\r\n        figure: \"Circle\",\r\n        fill: \"white\",\r\n        strokeWidth: 2,\r\n        stroke: \"black\",\r\n        fontSize: 15,\r\n        font: \"sans-serif\"\r\n    };\r\n    return $(go.Node, \"Spot\",{\r\n                name: \"NODE\",\r\n                \"_controlExpand\": true,\r\n                layerName: \"Background\",\r\n                locationSpot: go.Spot.Center,\r\n                resizeCellSize: new go.Size(10, 10),\r\n                locationObjectName: \"BACKGROUND\",\r\n                resizable: true,\r\n                resizeObjectName: \"BACKGROUND\", // user can resize the Shape\r\n                rotatable: true,\r\n                rotateObjectName: \"BACKGROUND\", // rotate the Shape without rotating the label\r\n                click: function(e, node){\r\n                    // console.log(node.data);\r\n                },\r\n                doubleClick: function (e, node) {\r\n                    doubleClickCreateNodeType(e);\r\n                },\r\n                selectable: true,\r\n                selectionObjectName:\"BACKGROUND\",\r\n                movable: true,\r\n                angle: 0,\r\n                //toMaxLinks: 1,\r\n                layoutConditions: go.Part.LayoutStandard,\r\n                //layoutConditions:~go.Part.LayoutAdded,\r\n                // fromLinkable: true, toLinkable: true,\r\n                alignment: go.Spot.Center,\r\n                alignmentFocus: go.Spot.Center,\r\n                resizeAdornmentTemplate: diagram.__trtd.nodeResizeAdornmentTemplate(),\r\n                // rotateAdornmentTemplate: nodeRotateAdornmentTemplate,\r\n                contextMenu: diagram.__trtd.getNodeContextMenu(),\r\n                // contextMenu: $(go.Adornment),\r\n            },\r\n            new go.Binding(\"location\", \"loc\", go.Point.parse).makeTwoWay(go.Point.stringify),\r\n            new go.Binding(\"isShadowed\", \"isShadowed\").makeTwoWay(),\r\n            new go.Binding(\"selectable\", \"selectable\").makeTwoWay(),\r\n            new go.Binding(\"movable\", \"movable\").makeTwoWay(),\r\n            new go.Binding(\"deletable\", \"deletable\").makeTwoWay(),\r\n            $(go.Shape, {\r\n                name: \"SHAPE\",\r\n                geometryString: svg.threeWheel,\r\n                fill: \"black\",\r\n                strokeWidth: 5, \r\n                stroke: \"black\",\r\n                minSize: new go.Size(50, 50),\r\n                },\r\n                new go.Binding(\"fill\", \"fill\").makeTwoWay(function(v){\r\n                    return v;\r\n                }),\r\n                new go.Binding(\"stroke\", \"stroke\").makeTwoWay(function(v){\r\n                    return v;\r\n                }),\r\n                new go.Binding(\"strokeWidth\", \"strokeWidth\").makeTwoWay(function(v){\r\n                    return v;\r\n                }),\r\n                new go.Binding(\"desiredSize\", \"desiredSize\", function(v) {\r\n                    // var va = (v / 2) * Math.sqrt(2);\r\n                    // console.log(\"desiredSize\",v)\r\n                    return v\r\n                }).ofObject(\"BACKGROUND\"),\r\n                new go.Binding(\"angle\", \"angle\", function(v) {\r\n                    // var va = (v / 2) * Math.sqrt(2);\r\n                    // console.log(\"desiredSize\",v)\r\n                    return v\r\n                }).ofObject(\"BACKGROUND\"),\r\n                new go.Binding(\"geometryString\", \"geometryValue\", function(v) {\r\n                    return svg[v];\r\n                }),\r\n            ),\r\n            $(go.Shape, \"Rectangle\",{\r\n                name: 'BACKGROUND',\r\n                fill: \"rgba(1,1,1,0)\",\r\n                // width: 450,\r\n                // height: 450,\r\n                stroke: \"rgba(1,1,1,0)\",\r\n                // minSize: new go.Size(50, 50),\r\n                },\r\n                new go.Binding(\"desiredSize\", \"desiredSize\", function(v, d) {\r\n                    // console.log(\"vd m\", v, d )\r\n                    if(!v) return d.part.findObject(\"SHAPE\").measuredBounds.size;\r\n                    return go.Size.parse(v)\r\n                }).makeTwoWay(function(v) {\r\n                    return go.Size.stringify(v)\r\n                }),\r\n                new go.Binding(\"angle\", \"angle\").makeTwoWay(function(v){\r\n                    return v;\r\n                }),\r\n                // new go.Binding(\"desiredSize\", \"height\", function(v) {\r\n                //     var radius = parseInt(v ? v : 100);\r\n                //     var size = new go.Size(radius, radius);\r\n                //     return size;\r\n                // }).makeTwoWay(function(v) {\r\n                //     return v.height;\r\n                // }),\r\n                // background: \"#555\",\r\n                // stroke: \"red\"}\r\n            ),\r\n    );\r\n}\r\n\r\nfunction doubleClickCreateNodeType(e){\r\n    // console.log('eeeeeeeeeeeeeee:', e);\r\n    var myDiagram = e.diagram;\r\n    myDiagram.startTransaction();\r\n    var text = { text: \"双击编辑文本\", category: 'text' };\r\n    text.loc = go.Point.stringify(myDiagram.lastInput.documentPoint);\r\n    myDiagram.model.addNodeData(text);\r\n    myDiagram.commitTransaction()\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/nodeTemplate/createNodeSvgTemplate.js","var $ = go.GraphObject.make;\r\n\r\nmodule.exports = // 返回天盘模板\r\nfunction createNodeTemplate (diagram) {\r\n    var properties = {\r\n        figure: \"Circle\",\r\n        fill: \"white\",\r\n        strokeWidth: 2,\r\n        stroke: \"black\",\r\n        fontSize: 15,\r\n        font: \"sans-serif\"\r\n    };\r\n\r\n    return $(go.Node, \"Spot\", {\r\n        \"_controlExpand\": true,\r\n        layerName: \"default\",\r\n        locationSpot: go.Spot.Center,\r\n        resizeCellSize: new go.Size(10, 10),\r\n        locationObjectName: \"SHAPE\",\r\n        resizable: true,\r\n        resizeObjectName: \"SHAPE\", // user can resize the Shape\r\n        rotatable: false,\r\n        location: new go.Point(0, 0),\r\n        click: function(e, node) {\r\n            console.log(node.data)\r\n            if(node.diagram.__trtd.nodeClickListener){\r\n                node.diagram.__trtd.nodeClickListener(node)\r\n            }\r\n            // showNodeToolBar(e,node);\r\n        },\r\n        //rotateObjectName: \"SHAPE\",  // rotate the Shape without rotating the label\r\n        doubleClick: function (e, node){\r\n            e.diagram.__trtd.selectText(e, node)\r\n        },\r\n        toMaxLinks: 1,\r\n        layoutConditions: go.Part.LayoutStandard,\r\n        //layoutConditions:~go.Part.LayoutAdded,\r\n        // fromLinkable: true, toLinkable: true,\r\n        alignment: go.Spot.Center,\r\n        alignmentFocus: go.Spot.Center,\r\n        resizeAdornmentTemplate: diagram.__trtd.nodeResizeAdornmentTemplate(),\r\n        // contextMenu: $(go.Adornment),\r\n        contextMenu: diagram.__trtd.getNodeContextMenu(),\r\n        selectionAdornmentTemplate: diagram.__trtd.getNodeSelectionAdornmentTemplate(),\r\n        mouseOver: function(e, node) {\r\n            // if(node.data.hyperlink){\r\n            //   var textObj = node.findObject('TEXT');\r\n            //   textObj.isUnderline = true;\r\n            // }\r\n\r\n            diagram.__trtd.showNodeRemarkTips(e, node);\r\n        },\r\n        mouseLeave: function(e, node) {\r\n            // if(node.data.hyperlink) {\r\n            //   var textObj = node.findObject('TEXT');\r\n            //   textObj.isUnderline = false;\r\n            // }\r\n            diagram.__trtd.removeNodeRemarkTips();\r\n        },\r\n        mouseDragEnter: function(e, obj) {\r\n            var node = obj.part;\r\n            var selnode = e.diagram.selection.first();\r\n            if (!(selnode instanceof go.Node) || selnode.category == \"3\" || selnode.category == \"text\" || selnode.key == 1) {\r\n                return;\r\n            }\r\n            //var sat = node.selectionAdornmentTemplate;\r\n            //var adorn = sat.copy();\r\n            //adorn.adornedObject = node;\r\n            //node.addAdornment(\"dragEnter\", adorn);\r\n\r\n            //if (!mayWorkFor(selnode, node)) return;\r\n            var shape = node.findObject(\"SHAPE\");\r\n            if (shape) {\r\n                shape._prevFill = shape.fill; // remember the original brush\r\n                shape.fill = \"darkred\";\r\n            }\r\n\r\n        },\r\n        mouseDragLeave: function(e, obj) {\r\n            var node = obj.part;\r\n            var shape = node.findObject(\"SHAPE\");\r\n            if (shape && shape._prevFill) {\r\n                shape.fill = shape._prevFill; // restore the original brush\r\n            }\r\n            //node.removeAdornment(\"dragEnter\");\r\n        },\r\n        mouseDrop: function(e, obj) {\r\n            var node = obj.part;\r\n            var selnode = e.diagram.selection.first();\r\n            if (!(selnode instanceof go.Node) || selnode.data.category == \"3\" || selnode.data.category == \"text\" || selnode.data.key == 1) {\r\n                return;\r\n            }\r\n\r\n            if (node.data.isparent) {\r\n                var child = e.diagram.findNodeForKey(node.data.isparent);\r\n                while (child.data.next) {\r\n                    child = e.diagram.findNodeForKey(child.data.next);\r\n                }\r\n                if (child.data.key == selnode.data.key) {\r\n                    //最后一个子节点拖放到父节点上时，不做任何操作\r\n                    return;\r\n                }\r\n                e.diagram.__trtd.setNodeAsSibling(selnode, child);\r\n            } else {\r\n                e.diagram.__trtd.setNodeAsChildren(selnode, node);\r\n            }\r\n        }},\r\n        new go.Binding(\"location\", \"loc\", go.Point.parse).makeTwoWay(go.Point.stringify),\r\n        new go.Binding(\"isShadowed\", \"isShadowed\").makeTwoWay(),\r\n        new go.Binding(\"selectable\", \"selectable\").makeTwoWay(),\r\n        new go.Binding(\"movable\", \"movable\").makeTwoWay(),\r\n        new go.Binding(\"deletable\", \"deletable\").makeTwoWay(),\r\n        $(go.Shape, {\r\n                strokeDashArray: null,\r\n                // strokeDashOffset:10,\r\n                name: \"SHAPE\",\r\n                figure: \"Circle\",\r\n                fill: \"rgba(0,0,0,0)\",\r\n                fromLinkable: true,\r\n                toLinkable: true,\r\n                cursor: \"pointer\",\r\n                minSize: new go.Size(50, 50),\r\n                strokeWidth: 2,\r\n                stroke: \"black\",\r\n                portId: \"\"\r\n\r\n            },\r\n            new go.Binding(\"strokeDashArray\", \"strokeDashArray\", function(v) {\r\n                try {\r\n                    var val = [parseInt(v.split(\" \")[0]), parseInt(v.split(\" \")[1])];\r\n                } catch (e) {\r\n                    var val = null;\r\n                }\r\n                return val;\r\n            }).makeTwoWay(function(v) {\r\n                return v[0] + \" \" + v[1];\r\n            }), //保留，设置边线样式\r\n            new go.Binding(\"fill\", \"fill\", function(v, obj) {\r\n                return v instanceof go.Brush ? v.color : v;\r\n            }).makeTwoWay(),\r\n            // new go.Binding(\"fill\", \"isSelected\", function(s, obj) { return s ? \"red\" : obj.part.data.color; }).ofObject()),\r\n            new go.Binding(\"desiredSize\", \"radius\", function(v) {\r\n                //alert(v);\r\n                var radius = parseInt(v ? v : 100);\r\n                var size = new go.Size(radius, radius);\r\n                return size;\r\n            }).makeTwoWay(function(v) {\r\n                return v.width;\r\n            }),\r\n            new go.Binding(\"stroke\", \"stroke\", function(v) {\r\n                return v instanceof go.Brush ? v.stroke : v;\r\n            }).makeTwoWay(),\r\n\r\n            new go.Binding(\"strokeWidth\", \"strokeWidth\", function(d) {\r\n                return d;\r\n            }).makeTwoWay(function(d) {\r\n                return d;\r\n            }),\r\n            new go.Binding(\"figure\", \"figure\").makeTwoWay(), {\r\n                figure: properties.figure,\r\n                fill: properties.fill,\r\n                strokeWidth: properties.strokeWidth,\r\n                stroke: properties.stroke\r\n            }\r\n        ),\r\n        $(go.Shape, {\r\n                name: \"SHAPE_Back\",\r\n                figure: \"Rectangle\",\r\n                fill: \"rgba(128,128,128,0)\",\r\n                fromLinkable: true,\r\n                toLinkable: true,\r\n                strokeWidth: 0\r\n            },\r\n            new go.Binding(\"desiredSize\", \"width\", function(v) {\r\n                var va = (v / 2) * Math.sqrt(2);\r\n                return new go.Size(va - 3, va - 3);\r\n            }).ofObject(\"SHAPE\")\r\n        ),\r\n    \r\n        $(go.Panel, \"Table\",\r\n            $(go.RowColumnDefinition, { column: 0, width: 0 }\r\n                // new go.Binding('width','hyperlink',function(v){\r\n                //   return v?10:0;\r\n                // })\r\n            ),\r\n            $(go.Shape, 'Rectangle', {\r\n                row: 0,\r\n                column: 0,\r\n                // width:10,\r\n                fill: 'rgba(0,255,0,0)',\r\n                strokeWidth: 0\r\n            }),\r\n            $(go.Panel, \"Auto\", { row: 1, column: 0 },\r\n                $(go.Shape, \"RoundedRectangle\", { fill: \"rgba(0,0,0,0)\", strokeWidth: 0 }),\r\n                $(go.Picture, {\r\n                        alignment: go.Spot.Left,\r\n                        click: function(e) {\r\n                            alert('picture clicked');\r\n                        },\r\n                        name: 'Picture',\r\n                        // source: 'media/images/Katong/little-boy-black.png',\r\n                        desiredSize: new go.Size(10, 10)\r\n                    }\r\n\r\n                    // new go.Binding(\"source\", \"key\", findHeadShot)\r\n                )\r\n            ),\r\n            $(go.Shape, 'Rectangle', {\r\n                row: 2,\r\n                column: 0,\r\n                // width:10,\r\n                fill: 'rgba(0,0,0,0)',\r\n                strokeWidth: 0\r\n            }),\r\n            $(go.Panel, \"Auto\", { row: 0, column: 1, rowSpan: 3 },\r\n                $(go.TextBlock, {\r\n                        // stretch: go.GraphObject.Vertical,\r\n                        name: \"TEXT\",\r\n                        alignment: new go.Spot(0.5, 0.5),\r\n                        font: \"bold \" + diagram.__trtd.InitialFontSize + \"px 幼圆\",\r\n                        // editable: true,\r\n                        //margin: 3, editable: true,\r\n                        stroke: \"black\",\r\n                        isMultiline: true,\r\n                        overflow: go.TextBlock.OverflowClip,\r\n                        wrap: go.TextBlock.WrapDesiredSize,\r\n                        textAlign: \"center\",\r\n                        spacingAbove: 4,\r\n                        spacingBelow: 4,\r\n                        portId: \"TEXT\",\r\n                        stretch: go.GraphObject.Fill,\r\n                        click: function(e, node) {\r\n\r\n                        }\r\n                    },\r\n                    new go.Binding(\"textAlign\", \"textAlign\", function(v) {\r\n                        return _.contains(['start', 'center', 'end'], v) ? v : \"center\";\r\n                    }).makeTwoWay(),\r\n                    new go.Binding(\"spacingAbove\", \"spacingline\", function(v) {\r\n                        return tdTransToNum(v, 4);\r\n                    }).makeTwoWay(),\r\n                    new go.Binding(\"spacingBelow\", \"spacingline\", function(v) {\r\n                        return tdTransToNum(v, 4);\r\n                    }).makeTwoWay(),\r\n                    new go.Binding(\"width\", \"width\", function(v) {\r\n                        var va = v / 2 * Math.sqrt(2);\r\n                        return va;\r\n                    }).ofObject(\"SHAPE\"),\r\n                    new go.Binding(\"text\", \"text\").makeTwoWay(),\r\n                    new go.Binding(\"stroke\", \"textStroke\").makeTwoWay(),\r\n                    new go.Binding(\"font\", \"font\").makeTwoWay()\r\n                )\r\n            )\r\n        )\r\n    );\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/nodeTemplate/createNodeTemplate.js","var svg = {\n    'threeWheel': 'M 225 0 C 100.736 0 0 100.735 0 225 s 100.736 225 225 225 c 124.265 0 225.001 -100.734 225.001 -225 C 450.002 100.735 349.265 0 225 0 Z M 225 1.515 c 62.006 0 118.106 25.257 158.591 66.037 c -38.634 133.172 -160.888 157.047 -160.888 157.047 l 0.047 0.083 h -0.051 C 123.453 130.609 19.61 161.966 9.597 165.291 C 35.716 70.857 122.255 1.515 225 1.515 Z M 1.517 225 c 0 -20.075 2.663 -39.524 7.627 -58.035 c 6.686 -2.295 111.992 -36.362 212.807 58.54 c -3.347 10.815 -36.032 125.634 54.089 217.118 c -16.395 3.83 -33.479 5.859 -51.04 5.859 C 101.575 448.482 1.517 348.428 1.517 225 Z M 277.292 442.318 c -89.298 -94.891 -57.746 -204.506 -53.915 -216.53 l 0.076 0.135 c 0 0 126.301 -26.492 161.022 -157.465 c 39.584 40.319 64.008 95.575 64.008 156.542 C 448.483 330.418 375.489 418.773 277.292 442.318 Z',\n    'fireWheel': 'M225.000,450.000 C100.736,450.000 -0.000,349.264 -0.000,225.000 C-0.000,100.736 100.736,-0.000 225.000,-0.000 C349.264,-0.000 450.000,100.736 450.000,225.000 C450.000,349.264 349.264,450.000 225.000,450.000 ZM225.000,448.000 C338.085,448.000 431.498,363.821 446.026,254.709 C432.978,302.699 389.123,338.000 337.000,338.000 C274.592,338.000 224.000,287.408 224.000,225.000 C224.000,163.696 174.304,114.000 113.000,114.000 C51.696,114.000 2.000,163.696 2.000,225.000 C2.000,348.159 101.841,448.000 225.000,448.000 ZM225.000,2.000 C111.915,2.000 18.502,86.179 3.974,195.291 C17.022,147.301 60.877,112.000 113.000,112.000 C175.408,112.000 226.000,162.592 226.000,225.000 C226.000,286.304 275.696,336.000 337.000,336.000 C398.304,336.000 448.000,286.304 448.000,225.000 C448.000,225.000 448.000,225.000 448.000,225.000 C448.000,101.841 348.159,2.000 225.000,2.000 Z',\n    'goldWheel': 'M449.993,0.008 L225.395,287.495 L355.004,449.995 L94.004,449.995 L224.597,287.502 L-0.008,0.008 L449.993,0.008 Z',\n    'waterWheel': 'M268.000,443.000 C299.658,443.000 328.270,429.976 348.785,409.000 L351.564,409.000 C330.601,431.167 300.917,445.000 268.000,445.000 C204.487,445.000 153.000,393.513 153.000,330.000 C153.000,282.847 181.389,242.341 222.000,224.593 L222.000,224.508 C263.076,207.589 292.000,167.180 292.000,120.000 C292.000,57.592 241.408,7.000 179.000,7.000 C148.889,7.000 121.551,18.800 101.296,38.000 L98.382,38.000 C119.136,17.594 147.595,5.000 179.000,5.000 C242.513,5.000 294.000,56.487 294.000,120.000 C294.000,167.153 265.611,207.659 225.000,225.407 L225.000,225.478 C183.921,242.396 155.000,282.817 155.000,330.000 C155.000,392.408 205.592,443.000 268.000,443.000 Z'\n}\n\nmodule.exports = svg;\n\n\n// WEBPACK FOOTER //\n// ./src/datas/svg.template.js","    var helpers = require('../helpers/helpers.gojs')\r\n\r\n    \r\n    function adustOliveText(d){\r\n            setTimeout(function(){\r\n              try{\r\n                console.log(\"check overflow\")\r\n                if(!d.text) return;\r\n                if(d.text && d.text.trim() == \"\") return;\r\n                if(d.lineCount %2 != 0){\r\n                  if(d.text[d.text.length-1] == \"\\n\"){\r\n                    d.text = d.text.substring(0, d.text.length-1)\r\n                    return;\r\n                  }\r\n                  d.text = d.text+\"\\n\"\r\n                }\r\n                // if(d && d.lineCount!=null && d.lineCount%2 != 0){\r\n                //   if(d.text && d.text[d.text.length-1] != \"\\n\"){\r\n                //     d.text+=\"\\n\"\r\n                //   }\r\n                // }\r\n              }catch(e){\r\n                console.error(e)\r\n              }\r\n            },100)\r\n    }\r\n\r\n\r\n    function adjustTextAngle(obj, shi, xu, group){\r\n        var groupTextAngle = group.data.textAngle|| \"vertical\" // \"vertical\"\r\n        var textAngle;\r\n        if(obj.data.order%2==0){ // 偶数\r\n            // 偶数实线在上\r\n            if(shi){\r\n\r\n                if(!shi.data.nangle){\r\n                    textAngle = groupTextAngle\r\n                }else{\r\n                    textAngle = shi.data.textAngle || groupTextAngle\r\n                }\r\n                // if(!shi.data.nloc){\r\n                //     shi.location = obj.location.copy().offset(obj.naturalBounds.width/2, -obj.naturalBounds.height/2)\r\n                // }\r\n                if(textAngle == \"horizontal\"){\r\n                    // if(!shi.data.nloc){\r\n                        shi.locationSpot = new go.Spot(1, 1, 0, 0)\r\n                    // }\r\n                    shi.angle = 0\r\n                    // \r\n                    // if(shi.data.textAlign == null){\r\n                        // shi.findObject(\"TEXT\").textAlign = \"center\";\r\n                        // }\r\n                    }\r\n                    shi.__location = obj.location.copy().offset(obj.naturalBounds.width/2, 0)\r\n                    shi.__location = computeNewRotateLoc(group.location, shi.__location, obj.angle)\r\n                    if(!shi.data.nloc){\r\n                        shi.location = obj.location.copy().offset(obj.naturalBounds.width/2, -obj.naturalBounds.height/2)\r\n                        shi.location = computeNewRotateLoc(group.location, shi.location, obj.angle)\r\n                        // shi.location = shi.__location.copy()\r\n                        // delete shi.__offset\r\n                        delete shi.__switchOrder\r\n                    }else{\r\n                        \r\n                        if(!shi.__offset){\r\n                            shi.__offset = shi.__location.copy().subtract(shi.location)\r\n                        }else{\r\n                            shi.location = shi.__location.copy().subtract(shi.__offset)\r\n                            // if(shi.__switchOrder){\r\n                            //     shi.__offset.x = -shi.__offset.x\r\n                            //     shi.__offset.y = -shi.__offset.y\r\n                            //     shi.location = shi.__location.copy().subtract(shi.__offset)\r\n                            //     delete shi.__switchOrder\r\n                            //     shi.__offset = shi.__location.copy().subtract(shi.location)\r\n                            // }else{\r\n                            //     shi.location = shi.__location.copy().subtract(shi.__offset)\r\n                            // }\r\n                            // xu.location = xu.__location.copy().offset(-Math.abs(xu.__offset.x), -Math.abs(xu.__offset.y))\r\n                            // xu.location = xu.__location.copy().subtract(xu.__offset)\r\n                        }\r\n                    }\r\n                if(textAngle == \"vertical\"){\r\n                    // if(!shi.data.nloc){\r\n                        shi.locationSpot = new go.Spot(0.5, 1, 0, 0)\r\n                    // }\r\n                    shi.angle = obj.angle\r\n                    // if(shi.data.textAlign == null){\r\n                        // obj.diagram.model.setDataProperty(shi.data,\"textAlign\", \"left\")\r\n                        // shi.findObject(\"TEXT\").textAlign = \"center\";\r\n                    // }\r\n                        \r\n                }\r\n            }\r\n            if(xu){\r\n                if(!xu.data.nangle){\r\n                    textAngle = groupTextAngle\r\n                }else{\r\n                    textAngle = xu.data.textAngle || groupTextAngle\r\n                }\r\n\r\n                if(textAngle == \"horizontal\"){\r\n                    // if(!xu.data.nloc){\r\n                        xu.locationSpot = new go.Spot(0, 0, 0, 0)\r\n                    // }\r\n                    xu.angle = 0\r\n                    // obj.diagram.model.setDataProperty(xu.data,\"textAlign\", \"left\")\r\n                    // if(xu.data.textAlign == null){\r\n                        // xu.findObject(\"TEXT\").textAlign = \"center\"\r\n                    // }\r\n                }\r\n                console.log(\"xuxuxuxuxxuxu\", xu.data.order)\r\n                xu.__location = obj.location.copy().offset(obj.naturalBounds.width/2, 0)\r\n                xu.__location = computeNewRotateLoc(group.location, xu.__location, obj.angle)\r\n                if(!xu.data.nloc){\r\n                    xu.location = obj.location.copy().offset(obj.naturalBounds.width/2, obj.naturalBounds.height/2)\r\n                    xu.location = computeNewRotateLoc(group.location, xu.location, obj.angle)\r\n                    // xu.location = xu.__location.copy()\r\n                    // delete xu.__offset\r\n                    delete xu.__switchOrder\r\n                }else{\r\n                    \r\n                    if(!xu.__offset){\r\n                        xu.__offset = xu.__location.copy().subtract(xu.location)\r\n                    }else{\r\n                        xu.location = xu.__location.copy().subtract(xu.__offset)\r\n                        // if(xu.__switchOrder){\r\n                        //     xu.__offset.x = -xu.__offset.x\r\n                        //     xu.__offset.y = -xu.__offset.y\r\n                        //     xu.location = xu.__location.copy().subtract(xu.__offset)\r\n                        //     delete xu.__switchOrder\r\n                        //     xu.__offset = xu.__location.copy().subtract(xu.location)\r\n                        // }else{\r\n                        //     xu.location = xu.__location.copy().subtract(xu.__offset)\r\n                        // }\r\n                        // xu.location = xu.__location.copy().offset(-Math.abs(xu.__offset.x), -Math.abs(xu.__offset.y))\r\n                        // xu.location = xu.__location.copy().subtract(xu.__offset)\r\n                    }\r\n                }\r\n                // if(xu.data.key == \"9fe41098-8d5a-e18f-b79a-b4693eacd39d\"){\r\n                //     console.log(`location: ${go.Point.stringify(xu.location)}\r\n                //     __location: ${go.Point.stringify(xu.__location)}\r\n                //     __offset: ${go.Point.stringify(xu.__offset)}\r\n                //     `)\r\n                // }\r\n                if(textAngle == \"vertical\"){\r\n                    // if(!xu.data.nloc){\r\n                        xu.locationSpot = new go.Spot(0.5, 0, 0, 0)\r\n                    // }\r\n                    xu.angle = obj.angle\r\n                    // obj.diagram.model.setDataProperty(xu.data,\"textAlign\", \"left\")\r\n                    // if(xu.data.textAlign == null){\r\n                        // xu.findObject(\"TEXT\").textAlign = \"center\"\r\n                    // }\r\n                }\r\n\r\n            }\r\n        }else{ // 奇数\r\n            // 奇数实线在下\r\n            if(shi){\r\n                if(!shi.data.nangle){\r\n                    textAngle = groupTextAngle\r\n                }else{\r\n                    textAngle = shi.data.textAngle || groupTextAngle\r\n                }\r\n                shi.__location = obj.location.copy().offset(obj.naturalBounds.width/2, 0)\r\n                shi.__location = computeNewRotateLoc(group.location, shi.__location, obj.angle)\r\n                if(!shi.data.nloc){\r\n                    shi.location = obj.location.copy().offset(obj.naturalBounds.width/2, obj.naturalBounds.height/2)\r\n                    shi.location = computeNewRotateLoc(group.location, shi.location, obj.angle)\r\n                    // shi.location = shi.__location.copy()\r\n                    // delete shi.__offset\r\n                    delete shi.__switchOrder\r\n                }else{\r\n                   \r\n                    if(!shi.__offset){\r\n                        shi.__offset = shi.__location.copy().subtract(shi.location)\r\n                    }\r\n                    else{\r\n                        shi.location = shi.__location.copy().subtract(shi.__offset)\r\n                        // if(shi.__switchOrder){\r\n                        //     shi.__offset.x = -shi.__offset.x\r\n                        //     shi.__offset.y = -shi.__offset.y\r\n                        //     shi.location = shi.__location.copy().subtract(shi.__offset)\r\n                        //     delete shi.__switchOrder\r\n                        //     shi.__offset = shi.__location.copy().subtract(shi.location)\r\n                        // }else{\r\n                        //     shi.location = shi.__location.copy().subtract(shi.__offset)\r\n                        // }\r\n                        // xu.location = xu.__location.copy().offset(-Math.abs(xu.__offset.x), -Math.abs(xu.__offset.y))\r\n                        // xu.location = xu.__location.copy().subtract(xu.__offset)\r\n                    }\r\n                }\r\n                if(textAngle == \"horizontal\"){\r\n                    // if(!shi.data.nloc){\r\n                        shi.locationSpot = new go.Spot(0, 0, 0, 0)\r\n                    // }\r\n                    shi.angle = 0\r\n                    // obj.diagram.model.setDataProperty(shi.data,\"textAlign\", \"left\")\r\n                    // if(shi.data.textAlign == null){\r\n                        // shi.findObject(\"TEXT\").textAlign = \"center\";\r\n                    // }\r\n                }\r\n                if(textAngle == \"vertical\"){\r\n                    // if(!shi.data.nloc){\r\n                    shi.locationSpot = new go.Spot(0.5, 0, 0, 0)\r\n                    // }\r\n                    shi.angle = obj.angle\r\n                    // if(shiTextColl[index].data.textAlign == null){\r\n                        // obj.diagram.model.setDataProperty(shiTextColl[index].data,\"textAlign\", \"left\")\r\n                        // shiTextColl[index].findObject(\"TEXT\").textAlign = \"center\";\r\n                    // }   \r\n                }\r\n            }\r\n            if(xu){\r\n                if(!xu.data.nangle){\r\n                    textAngle = groupTextAngle\r\n                }else{\r\n                    textAngle = xu.data.textAngle || groupTextAngle\r\n                }\r\n                xu.__location = obj.location.copy().offset(obj.naturalBounds.width/2, 0)\r\n                xu.__location = computeNewRotateLoc(group.location, xu.__location, obj.angle)\r\n                if(!xu.data.nloc){\r\n                    xu.location = obj.location.copy().offset(obj.naturalBounds.width/2, -obj.naturalBounds.height/2)\r\n                    xu.location = computeNewRotateLoc(group.location, xu.location, obj.angle)\r\n                    // xu.location = xu.__location.copy()\r\n                    // delete xu.__offset\r\n                    delete xu.__switchOrder\r\n                }else{\r\n                    \r\n                    if(!xu.__offset){\r\n                        xu.__offset = xu.__location.copy().subtract(xu.location)\r\n                    }else{\r\n                        xu.location = xu.__location.copy().subtract(xu.__offset)\r\n                        // if(xu.__switchOrder){\r\n                        //     xu.__offset.x = -xu.__offset.x\r\n                        //     xu.__offset.y = -xu.__offset.y\r\n                        //     xu.location = xu.__location.copy().subtract(xu.__offset)\r\n                        //     delete xu.__switchOrder\r\n                        //     xu.__offset = xu.__location.copy().subtract(xu.location)\r\n                        // }else{\r\n                        //     xu.location = xu.__location.copy().subtract(xu.__offset)\r\n                        // }\r\n                        // xu.location = xu.__location.copy().offset(-Math.abs(xu.__offset.x), -Math.abs(xu.__offset.y))\r\n                        // xu.location = xu.__location.copy().subtract(xu.__offset)\r\n                    }\r\n                }\r\n                // if(xu.data.key == \"9fe41098-8d5a-e18f-b79a-b4693eacd39d\"){\r\n                //     console.log(`location: ${go.Point.stringify(xu.location)}\r\n                //     __location: ${go.Point.stringify(xu.__location)}\r\n                //     __offset: ${go.Point.stringify(xu.__offset)}\r\n                //     `)\r\n                // }\r\n                if(textAngle == \"horizontal\"){\r\n                    // obj.diagram.model.setDataProperty(xu.data,\"textAlign\", \"right\")\r\n                    // if(xu.data.textAlign == null){\r\n                        // xu.findObject(\"TEXT\").textAlign = \"center\";\r\n                    // }\r\n                    // if(!xu.data.nloc){\r\n                        xu.locationSpot = new go.Spot(1, 1, 0, 0)\r\n                    // }\r\n                    xu.angle = 0\r\n                }\r\n\r\n                if(textAngle == \"vertical\"){\r\n                    // if(!xu.data.nloc){\r\n                        xu.locationSpot = new go.Spot(0.5, 1, 0, 0)\r\n                    // }\r\n                    xu.angle = obj.angle\r\n                    // obj.diagram.model.setDataProperty(xuTextColl[index].data,\"textAlign\", \"left\")\r\n                    // if(xuTextColl[index].data.textAlign == null){\r\n                        // xuTextColl[index].findObject(\"TEXT\").textAlign = \"center\"\r\n                    // }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    function layoutWaveGroup(it,diagram,group){\r\n\r\n        var collection = []\r\n        // var group = this.group\r\n        var oliveWidth = group.data.oliveWidth\r\n        var oliveHeight = group.data.oliveHeight\r\n        var shiStroke = group.data.shiStroke\r\n        var xuStroke = group.data.xuStroke\r\n        var centerStroke = group.data.centerStroke || \"#3f5369\"\r\n        var oliveType = group.data.oliveType||\"Ellipse\"\r\n        var haveTail = group.data.haveTail||false\r\n        var textAngle = group.data.textAngle|| \"vertical\" // \"vertical\"\r\n        // group.location = new go.Point(0,0)\r\n        var maxWidth = 0;\r\n        var maxHeight = 0;\r\n        var line;\r\n        var waveTotalSize = oliveWidth*2/3\r\n        var shiTextColl = []\r\n        var xuTextColl = []\r\n        var centerTextColl = []\r\n        var shiStrokeWidth, xuStrokeWidth,shiStrokeDashArray,xuStrokeDashArray\r\n        var autogroupConfig; // 自动布局配置\r\n        // 增加波形双螺旋的开放尾部\r\n        // var tailOlive = {\"category\":\"waveTail\", \r\n        //     \"text\":\"       \", \r\n        //     \"level\":0, \"key\": helpers.guid(), \r\n        //     \"group\":node.data.group, \r\n        //     \"loc\":node.data.loc,\r\n        //     \"desiredSize\":node.data.desiredSize, \r\n        //     \"order\": 2000,\r\n        // }\r\n\r\n        // if(oliveType == \"Wave\" && haveTail){\r\n        //     // 查找是否包含尾部\r\n        //     while(it.next()){\r\n        //         var node = it.value;\r\n        //         if(node.data.role == \"waveTail\"){\r\n\r\n        //         }\r\n        //     }\r\n        //     it.reset(); // 重置索引\r\n        // }\r\n\r\n        while (it.next()) {\r\n            var node = it.value;\r\n                // var item = git.value;\r\n            //   console.log(\"item:\",item)\r\n         \r\n            //   console.log(node.data)\r\n              if(node.data.role == \"shiText\"){\r\n                shiTextColl.push(node)\r\n              }\r\n              if(node.data.role == \"xuText\"){\r\n                xuTextColl.push(node)\r\n              }\r\n              if(node.data.role == \"centerText\"){\r\n                centerTextColl.push(node)\r\n              }\r\n            if (node instanceof go.Node) {\r\n            // position the node . . .\r\n                if(node.data.category == \"line\"){\r\n                    line = node;\r\n                    node.location = group.location.copy().offset(0,0)\r\n                    node.angle = group.angle\r\n                }\r\n                if(node.data.category == \"wave\"){\r\n                    // node.width = oliveWidth\r\n                    // node.desiredSize = new go.Size(200,100)\r\n\r\n                    if(oliveType == \"Ellipse\"){\r\n                        node.diagram.model.setDataProperty(node.data, \"oliveType\",\"Ellipse\")\r\n                        node.diagram.model.setDataProperty(node.data, \"desiredSize\",`${oliveWidth} ${oliveHeight}`)\r\n                    }else{\r\n                        // 设置橄榄类型为波形\r\n                        node.diagram.model.setDataProperty(node.data, \"oliveType\",\"Wave\")\r\n                        // 设置波形的尾部开放\r\n                        if(node.data.role == \"waveTail\"){\r\n                            node.diagram.model.setDataProperty(node.data, \"desiredSize\",`${oliveWidth/2} ${oliveHeight}`)\r\n                            node.diagram.model.setDataProperty(node.data, \"selectable\",false)\r\n                        }else{\r\n                            node.diagram.model.setDataProperty(node.data, \"desiredSize\",`${oliveWidth} ${oliveHeight}`)\r\n                        }\r\n                    }\r\n                    \r\n                    // if(node.findObject(\"TEXT\").lineCount %2 != 0){\r\n                    //     if(node.data.text && node.data.text[node.data.text.length-1] != \"\\n\"){\r\n                    //         node.data.text+=\"\\n\"\r\n                    //       }\r\n                    //     node.diagram.model.setDataProperty(node.data, \"text\",node.data.text)\r\n                    // }\r\n                    // if(node.data.role == \"waveTail\"){\r\n                    //     node.diagram.model.setDataProperty(node.data, \"desiredSize\",`${oliveWidth/2} ${oliveHeight}`)\r\n                    //     node.diagram.model.setDataProperty(node.data, \"selectable\",false)\r\n                    // }else{\r\n                    //     node.diagram.model.setDataProperty(node.data, \"desiredSize\",`${oliveWidth} ${oliveHeight}`)\r\n                    // }\r\n\r\n                    // if(node.naturalBounds.width > maxWidth){\r\n                    //     maxWidth = node.naturalBounds.width;\r\n                    //   }\r\n                    // if(node.naturalBounds.height > maxHeight){\r\n                    // maxHeight = node.naturalBounds.height;\r\n                    // }\r\n                    // if(node.measuredBounds.height > maxHeight){\r\n                    // maxHeight = node.measuredBounds.height;\r\n                    // }\r\n                    // if(node.findObject(\"main\").height > maxHeight){\r\n                    // maxHeight = node.findObject(\"main\").height;\r\n                    // }\r\n                    node.angle = group.angle\r\n                    waveTotalSize+=node.naturalBounds.width\r\n                    collection.push(node)\r\n                }\r\n            }\r\n        }\r\n\r\n\r\n        waveTotalSize = collection.length*oliveWidth + oliveWidth*2/3\r\n        if(haveTail){\r\n            waveTotalSize = collection.length*oliveWidth \r\n        }\r\n        console.log(`maxHeight:${maxHeight},maxWidth:${maxWidth}`)\r\n        line.findObject(\"SHAPE\").width = waveTotalSize\r\n        line.diagram.model.setDataProperty(line.data,\"stroke\", centerStroke)\r\n        // line.centerStroke\r\n        // line.height = 4\r\n        // if(group.resizeObject.width != waveTotalSize){\r\n            group.containingGroup.layout.isOngoing = true;\r\n            group.containingGroup.layout.isValidLayout = false;\r\n        // }\r\n        \r\n        // autogroupConfig = group.group.nonauto||\"\";\r\n        // var autogroupConfigObj = {}\r\n        // autogroupConfig = autogroupConfig.split(\",\")\r\n        // for(var i=0;i<autogroupConfig.length;i++){\r\n        //     autogroupConfigObj[autogroupConfig[i]] = true;\r\n        // }\r\n        group.resizeObject.width = waveTotalSize\r\n        group.resizeObject.height = oliveHeight\r\n        group.waveCount = collection.length;\r\n        xuStrokeWidth = group.data.xuStrokeWidth\r\n        shiStrokeWidth = group.data.shiStrokeWidth\r\n        shiStrokeDashArray = group.data.shiStrokeDashArray\r\n        xuStrokeDashArray = group.data.xuStrokeDashArray\r\n        collection = collection.sort(function(a,b){\r\n            // console.log(`Number(a.data.order)${Number(a.data.order)} > Number(b.data.order) ${Number(b.data.order)}`,Number(a.data.order) > Number(b.data.order))\r\n            return Number(a.data.order) - Number(b.data.order)\r\n        })\r\n        // shiTextColl.sort(function(a,b){\r\n        //     return a.data.order - b.data.order\r\n        // })\r\n        // xuTextColl.sort(function(a,b){\r\n        //     return a.data.order - b.data.order\r\n        // })\r\n        // centerTextColl.sort(function(a,b){\r\n        //     return a.data.order - b.data.order\r\n        // })\r\n        var lastOlive = null;// 记录最后一个橄榄的位置，用于增加开放尾部\r\n        var oldOrder = null;\r\n        collection.forEach(function(obj,index){\r\n            // obj.data.order = index + 1;\r\n            var newOrder = index +1 \r\n            // console.log(\"orderorderorderorderorderorderorderorderorderorder\",newOrder,obj.data.order)\r\n            // var oldOrder = obj.__oldOrder\r\n            if(!obj.__oldOrder){\r\n                oldOrder = obj.data.order\r\n            }else{\r\n                oldOrder = obj.__oldOrder\r\n            }\r\n            delete obj.__oldOrder\r\n            shiTextColl[index] = obj.diagram.findNodeForKey(obj.data.shiText)\r\n            xuTextColl[index] = obj.diagram.findNodeForKey(obj.data.xuText)\r\n            if(!obj.data.isNew && obj.data.role != \"waveTail\"){\r\n                if(oldOrder%2 != newOrder%2){\r\n                    if(shiTextColl[index].data.nloc){\r\n                        obj.diagram.model.setDataProperty(shiTextColl[index].data,\"nloc\", null)\r\n                        shiTextColl[index].__oldLocation = shiTextColl[index].location\r\n                    }\r\n                    else{\r\n                        // 之前是自动布局，如果有记录相对位置，则恢复\r\n                        if(shiTextColl[index].__offset){\r\n                            obj.diagram.model.setDataProperty(shiTextColl[index].data,\"nloc\", true)\r\n                            // xu.__offset = xu.__location.copy().subtract(xu.location)\r\n                            // shiTextColl[index].location = shiTextColl[index].__location.copy().subtract(shiTextColl[index].__offset)\r\n                            // delete shiTextColl[index].__oldLocation\r\n                        }\r\n                    }\r\n\r\n                    if(xuTextColl[index].data.nloc){\r\n                        obj.diagram.model.setDataProperty(xuTextColl[index].data,\"nloc\", null)\r\n                        xuTextColl[index].__oldLocation = xuTextColl[index].location\r\n                    }else{\r\n                        if(xuTextColl[index].__offset){\r\n                            obj.diagram.model.setDataProperty(xuTextColl[index].data,\"nloc\", true)\r\n                            // xu.__offset = xu.__location.copy().subtract(xu.location)\r\n                            // xuTextColl[index].location = xuTextColl[index].__location.copy().subtract(xuTextColl[index].__offset)\r\n                            // delete shiTextColl[index].__oldLocation\r\n                        }\r\n                    }\r\n                    // shiTextColl[index].__switchOrder = true;\r\n                    // xuTextColl[index].__switchOrder = true;\r\n                    // obj.diagram.model.setDataProperty(xuTextColl[index].data,\"nloc\", null)\r\n                    // shiTextColl[index].__offset.x = -shiTextColl[index].__offset.x\r\n                    // shiTextColl[index].__offset.y = -shiTextColl[index].__offset.y\r\n                }\r\n            }\r\n\r\n            obj.diagram.model.setDataProperty(obj.data,\"order\", newOrder)\r\n            if(!obj.data.nalign){\r\n                obj.diagram.model.setDataProperty(obj.data,\"textAlign\", \"center\")\r\n            }\r\n            if(shiStroke){\r\n                obj.diagram.model.setDataProperty(obj.data,\"shiStroke\", shiStroke)\r\n            }\r\n            if(xuStroke){\r\n                obj.diagram.model.setDataProperty(obj.data,\"xuStroke\", xuStroke)\r\n            }\r\n            if(xuStrokeWidth){\r\n                obj.diagram.model.setDataProperty(obj.data,\"xuStrokeWidth\", xuStrokeWidth)\r\n            }\r\n            if(shiStrokeWidth){\r\n                obj.diagram.model.setDataProperty(obj.data,\"shiStrokeWidth\", shiStrokeWidth)\r\n            }\r\n            if(shiStrokeDashArray){\r\n                obj.diagram.model.setDataProperty(obj.data,\"shiStrokeDashArray\", shiStrokeDashArray)\r\n            }\r\n            if(xuStrokeDashArray){\r\n                obj.diagram.model.setDataProperty(obj.data,\"xuStrokeDashArray\", xuStrokeDashArray)\r\n            }\r\n            \r\n            // obj.diagram.model.setDataProperty(obj.data,\"text\", obj.data.text+\" \"+newOrder)\r\n            obj.location = group.location.copy().offset(oliveWidth*(newOrder-1),0)\r\n            // obj.location = new go.Point(300*(obj.data.order-1),0)\r\n            // obj.\r\n            // var group = a.findNodeDataForKey(m.group)\r\n            var initCenterText = false\r\n            if(group.data.centerTextAngle == \"independent\"){\r\n                if(!obj.data.centerText){\r\n                    var loc = obj.location.copy().offset(obj.naturalBounds.width/2, 0)\r\n                    loc = computeNewRotateLoc(group.location, loc, obj.angle)\r\n                    var centerText = {\r\n                        \"text\":obj.data.text,\r\n                        \"minSize\":`${oliveWidth-30} 30`,\r\n                        \"deletable\":false,\r\n                        textAlign: obj.data.textAlign,\r\n                        \"font\":obj.data.font || \"18px 'Microsoft YaHei'\", \r\n                        textStroke:obj.data.textStroke,\r\n                        \"category\":\"autoText\", \r\n                        \"key\": helpers.guid(), \"width\": oliveWidth-30, \r\n                        \"role\":\"centerText\", \"level\":0, \"group\": obj.data.group, \r\n                        \"order\": newOrder,\r\n                        \"visible\": false,\r\n                        \"layerName\":\"Foreground\",\r\n                        locationSpot: go.Spot.stringify(new go.Spot(0.5, 0.5, 0, 0)),\r\n                        \"selectable\": false,\r\n                        \"olive\": obj.data.key,\r\n                        \"loc\": go.Point.stringify(loc),\r\n                        angle: 0\r\n                        }\r\n                    obj.diagram.model.addNodeData(centerText)\r\n                    // var objCenterText = obj.diagram.model.findNodeDataForKey(centerText.key)\r\n                    obj.diagram.model.setDataProperty(obj.data,\"centerText\", centerText.key)\r\n                    initCenterText = true;\r\n                }\r\n                var objCenterText = obj.diagram.findNodeForKey(obj.data.centerText)\r\n                if(objCenterText){\r\n                    if(!objCenterText.data.nalign){\r\n                        obj.diagram.model.setDataProperty(objCenterText.data,\"textAlign\", \"center\")\r\n                    }\r\n                    if(!obj.data.nangle){\r\n                        if(textAngle == \"vertical\"){\r\n                            obj.diagram.model.setDataProperty(objCenterText.data,\"visible\", false)\r\n                            obj.diagram.model.setDataProperty(obj.data,\"textVisible\", true)\r\n                        }\r\n                        if(textAngle == \"horizontal\"){\r\n                            obj.diagram.model.setDataProperty(objCenterText.data,\"visible\", true)\r\n                            obj.diagram.model.setDataProperty(obj.data,\"textVisible\", false)\r\n                            obj.diagram.model.setDataProperty(objCenterText.data,\"angle\", 0)\r\n                        }\r\n\r\n                    }\r\n                    if(!initCenterText){\r\n                        var loc = obj.location.copy().offset(obj.naturalBounds.width/2, 0)\r\n                        loc = computeNewRotateLoc(group.location, loc, obj.angle)\r\n                        obj.diagram.model.setDataProperty(objCenterText.data,\"loc\", go.Point.stringify(loc))\r\n                    }\r\n                    obj.diagram.model.setDataProperty(objCenterText.data,\"order\", newOrder)\r\n                    if(!objCenterText.data.nwidth){\r\n                        obj.diagram.model.setDataProperty(objCenterText.data,\"width\", oliveWidth-30)\r\n                    }\r\n                    obj.diagram.model.setDataProperty(objCenterText.data,\"minSize\", `${oliveWidth-30} 30`)\r\n                    // obj.diagram.model.setDataProperty(objCenterText,\"selectable\", true)\r\n                    // if(group.data.centerTextMode == \"followLine\"){\r\n                    //     obj.diagram.model.setDataProperty(objCenterText.data,\"textStroke\", centerStroke)\r\n                    // }else{\r\n                    //     // obj.diagram.model.setDataProperty(objCenterText.data,\"textStroke\", \"black\")\r\n                    // }\r\n                    if(helpers.checkPhone()){\r\n                        objCenterText.layerName = \"Background\"\r\n                    }\r\n                }\r\n            }\r\n            // if(group.data.centerTextMode == \"followLine\"){\r\n            //     obj.diagram.model.setDataProperty(obj.data,\"textStroke\", centerStroke)\r\n            // }else{\r\n            //     obj.diagram.model.setDataProperty(obj.data,\"textStroke\", \"black\")\r\n            // }\r\n            // if(textAngle == \"vertical\"){\r\n                if(obj.text && obj.text.trim() != \"\"){\r\n                    adustOliveText(obj.findObject(\"TEXT\"))\r\n                }\r\n            // }\r\n            if(shiTextColl[index]){\r\n\r\n                if(!shiTextColl[index].desiredSize.width){\r\n                    shiTextColl[index].updateTargetBindings()\r\n                }\r\n\r\n                obj.diagram.model.setDataProperty(shiTextColl[index].data,\"showBorder\", true)\r\n                if(!shiTextColl[index].data.nwidth){\r\n                    obj.diagram.model.setDataProperty(shiTextColl[index].data,\"width\", oliveWidth)\r\n                }\r\n                obj.diagram.model.setDataProperty(shiTextColl[index].data,\"minSize\", `${oliveWidth-30} 30`)\r\n                // obj.diagram.model.setDataProperty(shiTextColl[index].data,\"textAlign\", null)\r\n                // delete shiTextColl[index].data.textAlign\r\n                // 判断是否自动对齐\r\n                // if(!shiTextColl[index].data.nalign){\r\n                //     obj.diagram.model.setDataProperty(shiTextColl[index].data,\"textAlign\", \"center\")\r\n                // }\r\n                // // obj.diagram.model.setDataProperty(shiTextColl[index].data,\"showBorder\", true)\r\n                // if(!shiTextColl[index].__oldOrder){\r\n                //     shiTextColl[index].__oldOrder = shiTextColl[index].data.order\r\n                // }\r\n                // if(shiTextColl[index].__oldOrder ){\r\n                //     // order变化前后奇偶不同\r\n                //     if(oldOrder%2 != newOrder%2){\r\n                //         // shiTextColl[index].__switchOrder = true;\r\n                //         // shiTextColl[index].__offset.x = -shiTextColl[index].__offset.x\r\n                //         // shiTextColl[index].__offset.y = -shiTextColl[index].__offset.y\r\n                //     }\r\n                // }\r\n                // delete shiTextColl[index].__oldOrder\r\n                obj.diagram.model.setDataProperty(shiTextColl[index].data,\"order\", newOrder)\r\n                if(!shiTextColl[index].data.ncolor){\r\n                    obj.diagram.model.setDataProperty(shiTextColl[index].data,\"textStroke\", shiStroke)\r\n                }\r\n                // obj.diagram.model.setDataProperty(shiTextColl[index].data,\"order\", newOrder)\r\n                // if(!shiTextColl[index].data.ncolor){\r\n                //     obj.diagram.model.setDataProperty(shiTextColl[index].data,\"textStroke\", shiStroke)\r\n                // }\r\n            }\r\n            if(xuTextColl[index]) {\r\n                if(!xuTextColl[index].desiredSize.width){\r\n                    xuTextColl[index].updateTargetBindings()\r\n                }\r\n\r\n                obj.diagram.model.setDataProperty(xuTextColl[index].data,\"minSize\", `${oliveWidth-30} 30`)\r\n                obj.diagram.model.setDataProperty(xuTextColl[index].data,\"showBorder\", true)\r\n                if(!xuTextColl[index].data.nwidth){\r\n                    obj.diagram.model.setDataProperty(xuTextColl[index].data,\"width\", oliveWidth)\r\n                }\r\n                if(!xuTextColl[index].data.nalign){\r\n                    obj.diagram.model.setDataProperty(xuTextColl[index].data,\"textAlign\", \"center\")\r\n                }\r\n                // obj.diagram.model.setDataProperty(xuTextColl[index].data,\"textAlign\", null)\r\n                // delete xuTextColl[index].data.textAlign\r\n                // if(!xuTextColl[index].__oldOrder){\r\n                //     xuTextColl[index].__oldOrder = xuTextColl[index].data.order\r\n                // }\r\n                // if(xuTextColl[index].__oldOrder){\r\n                //     // order变化前后奇偶不同\r\n                //     if(xuTextColl[index].__oldOrder%2 != newOrder%2){\r\n                //         // xuTextColl[index].__switchOrder = true;\r\n                //         // xuTextColl[index].__offset.x = -xuTextColl[index].__offset.x\r\n                //         // xuTextColl[index].__offset.y = -xuTextColl[index].__offset.y\r\n                //     }\r\n                // }\r\n                // delete xuTextColl[index].__oldOrder\r\n                obj.diagram.model.setDataProperty(xuTextColl[index].data,\"order\", newOrder)\r\n                if(!xuTextColl[index].data.ncolor){\r\n                    obj.diagram.model.setDataProperty(xuTextColl[index].data,\"textStroke\", xuStroke)\r\n                }\r\n                // obj.diagram.model.setDataProperty(xuTextColl[index].data,\"order\", newOrder)\r\n                // if(!xuTextColl[index].data.ncolor){\r\n                //     obj.diagram.model.setDataProperty(xuTextColl[index].data,\"textStroke\", xuStroke)\r\n                // }\r\n            }\r\n            obj.__location = computeNewRotateLoc(group.location, obj.location.copy(), obj.angle)\r\n            adjustTextAngle(obj, shiTextColl[index],xuTextColl[index],group)\r\n            \r\n            obj.location = obj.__location\r\n            lastOlive = obj;\r\n            obj.diagram.model.setDataProperty(obj.data,\"isNew\", null)\r\n        })\r\n        \r\n    }\r\n\r\n    // define a custom grid layout that makes sure the length of each lane is the same\r\n    // and that each lane is broad enough to hold its subgraph\r\n    function WaveGroupLayout() {\r\n        go.Layout.call(this);\r\n        // go.GridLayout.call(this);\r\n        // this.cellSize = new go.Size(1, 1);\r\n        // this.wrappingColumn = Infinity;\r\n        // this.wrappingWidth = Infinity;\r\n        // this.spacing = new go.Size(0, 0);\r\n        // this.alignment = go.GridLayout.Position;\r\n      }\r\n      go.Diagram.inherit(WaveGroupLayout, go.Layout);\r\n  \r\n      function computeNewRotateLoc(rotateCenter,currentLoc, angle){\r\n          if(rotateCenter.equals(currentLoc)) return currentLoc\r\n        // 计算选择中心点到（0,0）点的偏移\r\n        var offset = new go.Point(0,0).subtract(rotateCenter.copy())\r\n        // 将原来的点偏移到相对0,0点的位置\r\n        var nodeOrigin = currentLoc.copy().offset(offset.x, offset.y)\r\n        var newNodeOrigin = nodeOrigin.rotate(angle)\r\n        var newNodeLoc = newNodeOrigin.copy().offset(-offset.x, -offset.y)\r\n        return newNodeLoc\r\n        // console.log(\"newNodeLoc\", newNodeLoc)\r\n      }\r\n      \r\n      WaveGroupLayout.prototype.doLayout = function(coll) {\r\n          console.log(\"WaveGroupLayout.doLayout\")\r\n        var diagram = this.diagram;\r\n        diagram.model.startTransaction(\"WaveGroupLayout\")\r\n        \r\n          // COLL might be a Diagram or a Group or some Iterable<Part>\r\n        var it = this.collectParts(coll).iterator;\r\n        var group = this.group\r\n        layoutWaveGroup(it, diagram, group)\r\n\r\n        go.Layout.prototype.doLayout.call(this, coll);\r\n        // diagram.model.addNodeData(tailOlive)\r\n        \r\n        diagram.model.commitTransaction(\"WaveGroupLayout\");\r\n        // setTimeout(()=>{\r\n        //     diagram.updateAllTargetBindings()\r\n        // })\r\n        return;\r\n        // return;\r\n        // var diagram = this.diagram;\r\n        if (diagram === null) return;\r\n        diagram.startTransaction(\"PoolLayout\");\r\n        // make sure all of the Group Shapes are big enough\r\n        // var minsize = computeMinPoolSize();\r\n        // diagram.findTopLevelGroups().each(function(lane) {\r\n        //   if (!(lane instanceof go.Group)) return;\r\n        //   var shape = lane.selectionObject;\r\n        //   if (shape !== null) {  // change the desiredSize to be big enough in both directions\r\n        //     var sz = computeLaneSize(lane);\r\n        //     shape.width = (!isNaN(shape.width)) ? Math.max(shape.width, sz.width) : sz.width;\r\n        //     shape.height = (isNaN(shape.height) ? minsize.height : Math.max(shape.height, minsize.height));\r\n        //     var cell = lane.resizeCellSize;\r\n        //     if (!isNaN(shape.width) && !isNaN(cell.width) && cell.width > 0) shape.width = Math.ceil(shape.width / cell.width) * cell.width;\r\n        //     if (!isNaN(shape.height) && !isNaN(cell.height) && cell.height > 0) shape.height = Math.ceil(shape.height / cell.height) * cell.height;\r\n        //   }\r\n        // });\r\n        // now do all of the usual stuff, according to whatever properties have been set on this GridLayout\r\n        go.GridLayout.prototype.doLayout.call(this, coll);\r\n        diagram.commitTransaction(\"PoolLayout\");\r\n      };\r\n      // end PoolLayout class\r\n\r\n      module.exports = WaveGroupLayout\r\n      module.exports.layoutWaveGroup = layoutWaveGroup\r\n      module.exports.adjustTextAngle = adjustTextAngle\n\n\n// WEBPACK FOOTER //\n// ./src/layout/waveGroupLayout.js","var $ = go.GraphObject.make;\r\nvar helpers = require('../helpers/helpers.gojs')\r\nvar createTextNodeTemplate = require('../nodeTemplate/createTextNodeTemplate')\r\nvar createPictureSingleNodeTemplate = require('../nodeTemplate/createPictureSingleNodeTemplate')\r\nvar nodeTemplateFactory = require('../nodeTemplate/factory')\r\nclass Trtd {\r\n    constructor(div, config){\r\n        console.log('trtd base')\r\n\t\tthis.config = config;\r\n\t\tthis.modelChangedListener = config.modelChangedListener;\r\n\t\tthis.showContextMenuListener = config.showContextMenuListener;\r\n\t\tthis.hideContextMenuListener = config.hideContextMenuListener;\r\n\t\tthis.ViewportBoundsChangedListener = config.ViewportBoundsChangedListener;\r\n        this.cxElement = config.cxElement; // 外部传入的菜单dom元素\r\n        this.deleteCallback = config.deleteCallback; // 删除回调\r\n\r\n        this.useDefaultContext = config.useDefaultContext == null?true:config.useDefaultContext;\r\n        // if()\r\n        this.defaultCxElement = null; // 默认菜单dom元素\r\n        this.type = config.type;\r\n\r\n        this.div = div;\r\n        this.containerDivId = config.containerDivId||\"mainbox\"; // diagram的div父级div的id，菜单会建在这下面\r\n\t\tthis.diagram = {};\r\n        if(config.model != null && typeof(config.model) == \"object\" ){\r\n            console.log(\"dsfdf\")\r\n            config.model = JSON.stringify(config.model)\r\n        }\r\n        this.model = config.model;\r\n        this.tpid = config.tpid||Date.now();\r\n        this.InitialFontSize = 18\r\n        this.tdCurrentTheme = {\r\n            id: 6,\r\n            borderWidth: 2,\r\n            borderColor: \"black\",\r\n            groupColor: \"rgba(0,0,0,0)\",\r\n            groupStroke: \"rgba(0,0,0,0)\",\r\n            groupStrokeWidth: 0,\r\n            themeName: \"黑白\",\r\n            linkColor: \"black\",\r\n            colorRange: \"white\"\r\n        }\r\n        this.nodeClickListener = config.nodeClickListener;\r\n        this.nodeDoubleClickListener = config.nodeDoubleClickListener;\r\n        this.isModified = false; // 是否保存\r\n        this.lastModified = 0; // 保存的序号，每一次modified事件加1，不再变化时执行真实保存，用于提高性能\r\n        this.modifiedIndex = 0; // 保存的序号，每一次modified事件加1，不再变化时执行真实保存，用于提高性能\r\n\t\t// // 初始化diagram\r\n\t\t// this.initDiagram(div, config);\r\n\t\t// this.initListener();\r\n\t\t// // Then you will need to construct a Model (usually a GraphLinksModel) for the Diagram, initialize its data by setting its Model.nodeDataArray and other properties, and then set the diagram's model.\r\n        // if(this.model){\r\n        //     this.initModel();\r\n        // }\r\n    }\r\n    initDiagram(){\r\n        console.log(\"基类方法，子类需要实现，用来初始化画布\")\r\n    }\r\n    addNodeTemplate(){\r\n        console.log(\"基类方法，子类需要实现，用来初始化节点模板\")\r\n    }\r\n\r\n\r\n    /**\r\n     *  设置缩放比例\r\n     * @param value\r\n     */\r\n    resetZoom(value) {\r\n        // console.log(value)\r\n        this.diagram.commandHandler.resetZoom(value);\r\n    }\r\n    getDefaultCustomMenuDivStr(){\r\n        console.log(\"基类方法，子类需要实现，设置默认自定义菜单\")\r\n        return `\r\n        <ul>\r\n            <li trtd_action=\"addLevelNodeMenu\"><a class=\"i18n\" data-lang=\"insertsl\">插入同级节点</a></li>\r\n            <li trtd_action=\"addChildNodeMenu\"><a class=\"i18n\" data-lang=\"icn\">插入子节点</a></li>\r\n            <li trtd_action=\"duplicateNode\"><a class=\"i18n\" data-lang=\"duplicateNode\">复制节点</a></li>\r\n            <li trtd_action=\"deleteNodeMenu\"><a class=\"i18n\" data-lang=\"remove\">删除</a></li>\r\n            <li trtd_action=\"orderChildNode\"><a class=\"i18n\" data-lang=\"ordernode\">子节点编号</a></li>\r\n            <li trtd_action=\"clearOrderChildNode\"><a class=\"i18n\" data-lang=\"clearordernode\">取消子节点编号</a></li>\r\n            <li trtd_action=\"clearNodeTextMenu\"><a class=\"i18n\" data-lang=\"emptynodetext\">清空节点文本</a></li>\r\n            <li trtd_action=\"insertTianpanMenu\"><a class=\"i18n\" data-lang=\"insertnodetianpan\">插入天盘节点</a></li>\r\n            <li trtd_action=\"insertTextMenu\"><a class=\"i18n\" data-lang=\"inserttext\">插入文本</a></li>\r\n            <li trtd_action=\"locateRootNodeMenu\"><a class=\"i18n\" data-lang=\"locaterootnode\">定位根节点</a></li>\r\n            <li trtd_action=\"showAllNodesMenu\"><a class=\"i18n\" data-lang=\"displayallnodes\">显示所有节点</a></li>\r\n            <li trtd_action=\"fixPictureMenu\"><a class=\"i18n\" data-lang=\"fixnode\">固定节点</a></li>\r\n            <li trtd_action=\"activePictureMenu\"><a class=\"i18n\" data-lang=\"cancelfix\">取消固定</a></li>\r\n        \r\n            <li trtd_action=\"delYunpanAxis\"><a class=\"i18n\" data-lang=\"cancelfix\">删除 CTRL+DEL</a></li>\r\n            <li trtd_action=\"addYunpanAxis\"><a class=\"i18n\" data-lang=\"cancelfix\">增加 CTRL+X/Y</a></li>\r\n            <li trtd_action=\"addFollowerGround\"><a class=\"i18n\" data-lang=\"insertsl\">增加同级节点</a></li>\r\n            <li trtd_action=\"addNewCircle\"><a class=\"i18n\" data-lang=\"icn\">增加子节点</a></li>\r\n            <li trtd_action=\"apiDeleteSelection\"><a class=\"i18n\" data-lang=\"remove\">删除</a></li>\r\n        </ul>\r\n        `\r\n    }\r\n\r\n    getShowContextMenus(node){\r\n        console.log(\"基类方法，子类需要实现，显示默认自定义带单时控制哪些菜单需要显示\")\r\n\r\n        var showIds = '';\r\n\r\n        if (!node || node.data.isGroup) {\r\n            // myDiagram.clearSelection();\r\n            showIds = \"locateRootNodeMenu,showAllNodesMenu,insertTextMenu,insertTianpanMenu\";\r\n            // if(myDiagram.model.modelData.currentType == \"dipan\"){\r\n            //     cxElement.getElementsByClassName('removeOutCycleMenu')[0].style.display = 'block';\r\n            // }\r\n        } else {\r\n                if (!(node instanceof go.Group) && (!node.data.category || node.data.category == \"\" || node.data.category == \"0\" || node.data.category == \"1\" || node.data.category == \"4\")) { //天盘节点,非group\r\n                    showIds = \"addLevelNodeMenu,addChildNodeMenu,deleteNodeMenu,orderChildNode,clearOrderChildNode,\" + \"clearNodeTextMenu,duplicateNode\";\r\n                    console.log(\"2111\")\r\n                    if(node.selectable){\r\n                        showIds += \"fixPictureMenu\"\r\n                    }else{\r\n                        showIds += \"activePictureMenu\"\r\n                    }\r\n                }\r\n\r\n\r\n                if( node.data.category == \"8\" ||  node.data.category == \"text\"||  node.data.category == \"addtextTemplate\"){\r\n                    showIds = \"deleteNodeMenu,\" + \"duplicateNode\";\r\n                }\r\n\r\n                if( node.data.category === \"yunpanx\"||node.data.category === \"yunpany\"){\r\n                    console.log(\"222222222222\")\r\n                    showIds = \"delYunpanAxis,\" + \"addYunpanAxis\";\r\n                }\r\n\r\n                if( node.data.category === \"dipan\"){\r\n                    showIds = \"addFollowerGround,\" + \"addChildDipanNode,\"+\"deleteDipanNode\";\r\n                }\r\n                \r\n\r\n\r\n                // for (var _i2 = 0; _i2 < showIds.split(',').length; _i2++) {\r\n                //     if (showIds.split(',')[_i2]&&showIds.split(',')[_i2]!==\"fixPictureMenu\"&&showIds.split(',')[_i2]!==\"activePictureMenu\") {\r\n                //         helpers.getElementByAttr(cxElement,\"li\",\"trtd_action\",showIds.split(',')[_i2])[0].style.display = 'block'\r\n                //         // cxElement.getElementsByClassName(showIds.split(',')[_i2])[0].style.display = 'block';\r\n                //     }else if(showIds.split(',')[_i2]!==\"fixPictureMenu\"||showIds.split(',')[_i2]!==\"activePictureMenu\"){\r\n                //         if (node.selectable) {\r\n                //             cxElement.getElementsByClassName('fixPictureMenu')[0].style.display = 'block';\r\n                //             cxElement.getElementsByClassName('activePictureMenu')[0].style.display = 'none';\r\n                //         } else {\r\n                //             cxElement.getElementsByClassName('fixPictureMenu')[0].style.display = 'none';\r\n                //             cxElement.getElementsByClassName('activePictureMenu')[0].style.display = 'block';\r\n                //         }\r\n                //     }\r\n                // }\r\n            }\r\n\r\n        return showIds\r\n    }\r\n    insertPicture(source){\r\n        this.apiInsertPicture(source)\r\n    }\r\n    apiInsertPicture(source){\r\n        console.log(\"基类方法，子类需要实现，对外接口，插入图片\")\r\n        // console.log(source)\r\n        var myDiagram = this.diagram\r\n        var currentType = this.diagram.model.modelData.currentType;\r\n        // var globalProperties = tdGetModelData(null, myDiagram.model);\r\n        //var layerThickness = parseInt(globalProperties['layerThickness']); //默认值100\r\n        // 获取扇形半径\r\n       \r\n        // var layerThickness = myDiagram.model.modelData.layerThickness;\r\n        //获取中心圆半径\r\n        // var rootNodeRadius = parseInt(myDiagram.model.findNodeDataForKey(1).layerThickness);\r\n        // var tdDipanTextAngle = globalProperties['tdDipanTextAngle'];\r\n        var node = myDiagram.selection.first();\r\n        if (node && node.data.category == 'dipan' && !rootKey) return; //地盘节点不允许插入将诶点\r\n        // if(node) return; // 暂时关闭节点插入图片功能\r\n        myDiagram.model.startTransaction('setSourceOfPicture');\r\n        try{\r\n            var documentPoint = JSON.parse(localStorage.getItem(\"TRTD_documentPoint\"))\r\n            if(!documentPoint) documentPoint = myDiagram.lastInput.documentPoint\r\n        }catch(err){\r\n            var documentPoint = myDiagram.lastInput.documentPoint\r\n        }\r\n        if (node) {\r\n            // myDiagram.model.setDataProperty(node.data,'lastCategory', node.data.category);  //保存添加图片前的类别，以便移除图片时恢复\r\n            // if (node.data.category != \"3\" && node.data.category != 'text') {\r\n            //     myDiagram.model.setCategoryForNodeData(node.data, \"4\");\r\n            // }\r\n            if (node.data.category == '3') { //文字节点暂时不能添加图片\r\n                myDiagram.model.setDataProperty(node.data, \"picture\", source);\r\n            }\r\n        } else {\r\n            // var e = myDiagram.lastInput;\r\n            var nextkey = (myDiagram.model.nodeDataArray.length + 1).toString();\r\n            var follower = { key: nextkey, text: \"\", category: \"3\" };\r\n            myDiagram.model.makeNodeDataKeyUnique(follower);\r\n            follower.loc = go.Point.stringify(documentPoint);\r\n\r\n            //follower.picture = obj.children[0].src;\r\n            follower.picture = source;\r\n            myDiagram.model.addNodeData(follower);\r\n        }\r\n\r\n        myDiagram.model.commitTransaction('setSourceOfPicture');\r\n    }\r\n    apiGetTheme(){\r\n        var model = this.diagram.model;\r\n        var themeText = \"\"\r\n        for(var i=0;i<model.nodeDataArray.length;i++){\r\n            if(model.nodeDataArray[i].role == \"theme\" || model.nodeDataArray[i].role == \"themeText\"|| model.nodeDataArray[i].subRole == \"themeText\"){\r\n                themeText = model.nodeDataArray[i].text\r\n                break;\r\n            }\r\n        }\r\n        if(!themeText){\r\n            var root = model.findNodeDataForKey(1)\r\n            if(root){\r\n                themeText = root.text\r\n            }\r\n        }\r\n        return themeText\r\n    }\r\n\r\n    insertFigure(source, figureId) { //rootKey表示属于某个地盘节点的背景\r\n        // console.log(source)\r\n        var myDiagram = this.diagram\r\n        var currentType = this.diagram.model.modelData.currentType;\r\n        // var globalProperties = tdGetModelData(null, myDiagram.model);\r\n        //var layerThickness = parseInt(globalProperties['layerThickness']); //默认值100\r\n        // 获取扇形半径\r\n       \r\n        // var layerThickness = myDiagram.model.modelData.layerThickness;\r\n        //获取中心圆半径\r\n        // var rootNodeRadius = parseInt(myDiagram.model.findNodeDataForKey(1).layerThickness);\r\n        // var tdDipanTextAngle = globalProperties['tdDipanTextAngle'];\r\n        var node = myDiagram.selection.first();\r\n        // if (node && node.data.category == 'dipan' && !rootKey) return; //地盘节点不允许插入将诶点\r\n        if(node) return; // 暂时关闭节点插入图片功能\r\n        myDiagram.model.startTransaction('setSourceOfPicture');\r\n        try{\r\n            var documentPoint = JSON.parse(localStorage.getItem(\"TRTD_documentPoint\"))\r\n        }catch(err){\r\n            var documentPoint = myDiagram.lastInput.documentPoint\r\n        }\r\n        if (node) {\r\n            // myDiagram.model.setDataProperty(node.data,'lastCategory', node.data.category);  //保存添加图片前的类别，以便移除图片时恢复\r\n            if (node.data.category != \"3\" && node.data.category != 'text') {\r\n                myDiagram.model.setCategoryForNodeData(node.data, \"4\");\r\n            }\r\n            if (node.data.category != 'text') { //文字节点暂时不能添加图片\r\n                myDiagram.model.setDataProperty(node.data, \"picture\", source);\r\n            }\r\n        } else {\r\n            // var e = myDiagram.lastInput;\r\n            var nextkey = (myDiagram.model.nodeDataArray.length + 1).toString();\r\n            var follower = { key: nextkey, text: \"\", category: \"3\" };\r\n            myDiagram.model.makeNodeDataKeyUnique(follower);\r\n            follower.loc = go.Point.stringify(documentPoint);\r\n            follower.figureId = figureId;\r\n\r\n            //follower.picture = obj.children[0].src;\r\n            follower.picture = source;\r\n            myDiagram.model.addNodeData(follower);\r\n        }\r\n\r\n        myDiagram.model.commitTransaction('setSourceOfPicture');\r\n\r\n    }\r\n\r\n\r\n\r\n// 复制单个节点\r\napiDuplicateNode() {\r\n    var myDiagram = this.diagram;\r\n    var node = myDiagram.selection.first();\r\n    if (!node) return;\r\n    myDiagram.startTransaction();\r\n    var newData = myDiagram.model.copyNodeData(node.data);\r\n    var location = node.location.copy();\r\n    location.offset(50, -50);\r\n    newData.loc = go.Point.stringify(location);\r\n    newData.level = 0;\r\n    newData = clearRelProperty(newData);\r\n    myDiagram.model.addNodeData(newData);\r\n    myDiagram.commitTransaction();\r\n    // 清除节点的关系属性，比如父节点索引，子节点索引等\r\n    function clearRelProperty(data) {\r\n        data.level = 0;\r\n        delete data.prev;\r\n        delete data.isparent;\r\n        delete data.next;\r\n        delete data.group;\r\n        delete data.parent;\r\n        return data;\r\n    }\r\n}\r\n\r\n    apiPreviewImage(background=\"white\", scale=1){\r\n        console.log(\"基类方法，子类需要实现，对外接口，预览图片，生成base64\")\r\n        var myDiagram = this.diagram;\r\n        var imageParas = {\r\n            scale: scale,\r\n            // background: \"rgba(0,0,0,0)\",\r\n            background: background,\r\n            type: \"image/png\",\r\n            maxSize: new go.Size(9000, 9000)\r\n        }\r\n        var list = new go.List(go.GraphObject);\r\n        myDiagram.nodes.each(function(p) {\r\n            if (!(p instanceof go.Group)) {\r\n                list.add(p);\r\n                if( p instanceof go.Node){\r\n                    if(p.data.role == \"centerText\"){\r\n                        p.layerName = \"Foreground\"\r\n                    }\r\n                }\r\n            }\r\n        })\r\n        myDiagram.links.each(function(p) {\r\n            list.add(p);\r\n        })\r\n        imageParas.parts = list.iterator;\r\n\r\n        var imgdata = myDiagram.makeImageData(imageParas);\r\n        return imgdata;\r\n    }\r\n    apiDeleteSelection(){\r\n        console.log(\"基类方法，子类需要实现，对外接口，删除选中的节点\")\r\n        this.diagram.toolManager.textEditingTool.doCancel();\r\n        this.diagram.commandHandler.deleteSelection();\r\n    }\r\n    apiUndo () {\r\n        this.diagram.commandHandler.undo();\r\n    }\r\n    apiRedo () {\r\n        this.diagram.commandHandler.redo();\r\n    }\r\n    saveModel(e){\r\n        // if (e.isTransactionFinished) {\r\n            // console.log('model changed and has been saved to localstorage');\r\n            helpers.saveModelToLocalStorage(this.tpid, this.diagram.model)\r\n            // helpers.checkModel(e.model)\r\n        // }\r\n    }\r\n\r\n    addNodeTemplateBase(){\r\n        var myDiagram = this.diagram\r\n        this.diagram.nodeTemplateMap.add(\"text\", createTextNodeTemplate(this.diagram));\r\n        this.diagram.nodeTemplateMap.add(\"3\", createPictureSingleNodeTemplate(this.diagram));\r\n\r\n        // myDiagram.nodeTemplateMap.add(\"cbian\",  nodeTemplateFactory(\"cbian\",{diagram:this.diagram}).getNodeTemplate())\r\n        myDiagram.nodeTemplateMap.add(\"pic\",  nodeTemplateFactory(\"pic\",{diagram:this.diagram}).getNodeTemplate())\r\n        myDiagram.nodeTemplateMap.add(\"autoText\", nodeTemplateFactory(\"autoText\",{diagram:myDiagram}).getNodeTemplate());\r\n        myDiagram.groupTemplateMap.add(\"picGroup\", nodeTemplateFactory(\"picGroup\",{diagram:myDiagram}).getNodeTemplate());\r\n    }\r\n    // 添加水罗盘，三门系统\r\n    addWater(){\r\n        console.log(\"addWater\")\r\n        var diagram = this.diagram\r\n        var node = diagram.selection.first();\r\n        var group = null\r\n        if(node && node.data.category == \"axisGroup\"){\r\n            group=node.data.key;\r\n        }\r\n        var e = diagram.lastInput\r\n        diagram.startTransaction(\"addCbian\")\r\n        var groupKey = helpers.guid()\r\n        \r\n        var basePoint = e.documentPoint\r\n        var groupData = {\"category\":\"picGroup\", \r\n         \"role\":\"cbian\", \"isGroup\":true, \"level\":0, \r\n        \"key\":groupKey, \"loc\":go.Point.stringify(basePoint), \"deletable\":true}\r\n        if(group){\r\n            groupData.group = group\r\n        }\r\n        \r\n        var picData = { \"group\":groupKey, \"text\":\"\", \r\n        \"resizable\":false, \"category\":\"pic\", \r\n        \"loc\":go.Point.stringify(basePoint),\r\n        \"picture\":\"https://static.365trtd.com/system/water/water.png\", \"width\":150, \"height\":150}\r\n        // \"picture\":\"https://static.365trtd.com/system/cbian/cbian.png\", \"width\":150, \"height\":150}\r\n        \r\n        var themeData = {\"text\":\"总结\", \"deletable\":true,  \"fill\":\"black\", \"iconVisible\":false, \r\n        \"locationSpot\":\"1 0 0 0\", \"textAlign\":\"center\", \"category\":\"autoText\", \r\n        \"loc\":go.Point.stringify(basePoint.copy().offset(3,-3)), \r\n        \"movable\":true, \"group\":groupKey}\r\n        var timeData = {\"text\":\"时间\", \"deletable\":true,  \"fill\":\"black\", \"iconVisible\":false, \r\n        \"locationSpot\":\"1 0 0 0\", \"textAlign\":\"center\", \"category\":\"autoText\", \r\n        \"loc\":go.Point.stringify(basePoint.copy().offset(150, 0)), \r\n        \"movable\":true, \"group\":groupKey}\r\n        var energeData = {\"text\":\"能量\", \"deletable\":true, \"fill\":\"black\", \"iconVisible\":false, \r\n        \"locationSpot\":\"1 0 0 0\", \"textAlign\":\"center\", \"category\":\"autoText\", \r\n        \"loc\":go.Point.stringify(basePoint.copy().offset(0, -150)), \r\n        \"movable\":true, \"group\":groupKey}\r\n        var text1Data = {\"text\":\"总结1\", \"deletable\":true,  \"textStroke\":\"#0e399d\", \"iconVisible\":false, \r\n        \"locationSpot\":\"0 0 0 0\", \"textAlign\":\"left\", \"category\":\"autoText\", \r\n        \"loc\":go.Point.stringify(basePoint.copy().offset(155*Math.cos(30*Math.PI/180), -150*Math.sin(30*Math.PI/180))), \r\n        \"movable\":true, \"group\":groupKey}\r\n        var text2Data = {\"text\":\"总结2\", \"deletable\":true, \"textStroke\":\"#FFC000\", \"iconVisible\":false, \r\n        \"locationSpot\":\"0 0.5 0 0\", \"textAlign\":\"left\", \"category\":\"autoText\", \r\n        \"loc\":go.Point.stringify(basePoint.copy().offset(145*Math.cos(45*Math.PI/180), -150*Math.sin(45*Math.PI/180))), \r\n        \"movable\":true, \"group\":groupKey}\r\n        var text3Data = {\"text\":\"总结3\", \"deletable\":true, \"textStroke\":\"#cb1c27\", \"iconVisible\":false, \r\n        \"locationSpot\":\"0 1 0 0\", \"textAlign\":\"left\", \"category\":\"autoText\", \r\n        \"loc\":go.Point.stringify(basePoint.copy().offset(145*Math.cos(70*Math.PI/180), -140*Math.sin(70*Math.PI/180))), \r\n        \"movable\":true, \"group\":groupKey}\r\n\r\n        diagram.model.addNodeData(text1Data)\r\n        diagram.model.addNodeData(text2Data)\r\n        diagram.model.addNodeData(text3Data)\r\n        diagram.model.addNodeData(themeData)\r\n        diagram.model.addNodeData(timeData)\r\n        diagram.model.addNodeData(energeData)\r\n        diagram.model.addNodeData(picData)\r\n        diagram.model.addNodeData(groupData)\r\n        \r\n    //     {\"text\":\"自由文本\",\r\n    //     \"deletable\":true, \r\n    //     \"role\":\"freeText\",\r\n    //     \"fill\":\"black\", \r\n    //     \"iconVisible\":false, \r\n    //     \"locationSpot\":\"0.5 0.5 0 0\", \r\n    //     \"textAlign\":\"center\", \r\n    //     \"category\":\"autoText\", \r\n    //     \"loc\": go.Point.stringify(e.documentPoint), \r\n    //     \"movable\":true, \"group\":node.data.key\r\n    //    }\r\n\r\n        diagram.commitTransaction(\"addWater\")\r\n    \r\n    }\r\n\r\n    initDiagramBase(div, config){\r\n        console.log(\"基类初始化画布，子类修改diagram\")\r\n        var myDiagram = this.diagram;\r\n        var that = this;\r\n        \r\n    // function onTextChanged(){}\r\n        // function saveModel() {}\r\n        var myDiagram = this.diagram;\r\n\r\n        function onTextChanged(e) {\r\n            e.diagram.isModified = true;\r\n            console.log(\"onTextChanged\")\r\n        }\r\n        \r\n        // //var $ = go.GraphObject.make; \r\n        // function saveModel(e) {\r\n        //     // console.log(e)\r\n        //     if (e.isTransactionFinished) {\r\n        //         console.log('model changed and has been saved to localstorage');\r\n        //         helpers.saveModelToLocalStorage(that.tpid, that.diagram.model)\r\n        //         helpers.checkModel(e.model)\r\n        //     }\r\n        // }\r\n        var defaultConfig = {\r\n            initialContentAlignment: go.Spot.Center,\r\n            initialAutoScale: go.Diagram.Uniform,\r\n            initialDocumentSpot: go.Spot.Center,\r\n            initialViewportSpot: go.Spot.Center,\r\n            \"toolManager.hoverDelay\": 100,\r\n            padding: -20,\r\n            click: function(e) {\r\n                // closeToolbarWindow();\r\n                // removeNodeToolBar();\r\n                console.log(\"eeee:\",e)\r\n                localStorage.setItem(\"TRTD_documentPoint\",go.Point.stringify(e.documentPoint))\r\n            },\r\n            \"draggingTool.isCopyEnabled\": false,\r\n            // \"rotatingTool.snapAngleEpsilon\": 10,\r\n            \"commandHandler.archetypeGroupData\": { text: \"Group\", isGroup: true, color: \"blue\" },\r\n        \r\n            // enable undo & redo\r\n            allowDrop: true,\r\n            \"undoManager.isEnabled\": true,\r\n            \"toolManager.mouseWheelBehavior\": go.ToolManager.WheelZoom,\r\n            maxScale: 5.0,\r\n            minScale: 0.05,\r\n            hasVerticalScrollbar: false,\r\n            hasHorizontalScrollbar: false,\r\n            scrollMode: go.Diagram.InfiniteScroll,\r\n            scrollMargin: 50,\r\n            \"animationManager.isEnabled\": true,\r\n        \r\n            //rotatingTool: go.GraphObject.make(TopRotatingTool),  // defined below\r\n            \r\n            maxSelectionCount: 1,\r\n        \r\n            // make sure users can only create trees\r\n\r\n            validCycle: go.Diagram.CycleDestinationTree,\r\n        \r\n            \"ModelChanged\": function(e){\r\n                if (!e.isTransactionFinished) {\r\n                    return;\r\n                }\r\n                // return;\r\n                that.isModified = true;\r\n                that.lastModified = Date.now();\r\n                that.modifiedIndex += 1;\r\n                setTimeout(()=>{\r\n                    // 如果已经保存则不处理\r\n                    if(!that.isModified) {\r\n                        console.log(\"已经保存，跳过\",diff,\",\",that.modifiedIndex)\r\n                        return;\r\n                    };\r\n                    // var now = Date.now()\r\n                    var diff = Date.now() - that.lastModified\r\n                    if(diff >=1000){\r\n                        console.log(\"大于1000毫秒需要保存\",diff,\",\",that.modifiedIndex)\r\n                        that.modifiedIndex = 0\r\n                        that.isModified = false\r\n                        that.saveModel(e)\r\n                        if(that.modelChangedListener){\r\n                            that.modelChangedListener(e.model)\r\n                        }\r\n                    }\r\n                },1100)\r\n\r\n            },\r\n        \r\n            \"TextEdited\": onTextChanged, //在下面定义\r\n            contextMenu: $(go.Adornment),\r\n            ViewportBoundsChanged:(e)=>{\r\n                // console.log(\"ViewportBoundsChangedListener\", e)\r\n                if(that.ViewportBoundsChangedListener){\r\n                    that.ViewportBoundsChangedListener(e)\r\n                }\r\n            }\r\n        }\r\n        \r\n        var diagramConfig = Object.assign(defaultConfig, config.diagramConfig);\r\n        delete diagramConfig.type;\r\n        delete diagramConfig.tpid;\r\n        delete diagramConfig.model;\r\n        delete diagramConfig.modelChangedListener; // 这里需要优化，传入的参数不一定能够在diagram里配置\r\n        delete diagramConfig.mouseOverListener;\r\n\t\tdelete diagramConfig.clickListener;\r\n        this.diagram = $(go.Diagram, div, diagramConfig);\r\n        this.diagram.__trtd = this;\r\n        var myDiagram = this.diagram;\r\n\r\n        var forelayer = myDiagram.findLayer(\"Foreground\");\r\n        myDiagram.addLayerBefore(go.GraphObject.make(go.Layer, { name: \"default\" }), forelayer);\r\n        myDiagram.addLayerBefore(go.GraphObject.make(go.Layer, { name: \"overflow\" }), forelayer);\r\n        for (var i = 10; i >= 0; i--) {\r\n            myDiagram.addLayerBefore(go.GraphObject.make(go.Layer, { name: i.toString() }), forelayer);\r\n        }\r\n        //myDiagram.toolManager.draggingTool.computeEffectiveCollection = computeEffectiveCollection;\r\n        myDiagram.toolManager.draggingTool.computeEffectiveCollection = computeEffectiveCollection;\r\n        myDiagram.toolManager.dragSelectingTool.isPartialInclusion = true;\r\n        \r\n        myDiagram.toolManager.rotatingTool.handleArchetype =\r\n                $(go.Panel, \"Auto\",\r\n                    $(go.Shape, \"BpmnActivityLoop\", { width: 30, height: 30, stroke: \"green\", fill: \"transparent\" }),\r\n                    $(go.Shape, \"Rectangle\", {\r\n                        width: 30,\r\n                        height: 30,\r\n                        stroke: \"green\",\r\n                        fill: \"transparent\",\r\n                        strokeWidth: 0\r\n                    })\r\n                );\r\n\r\n        myDiagram.toolManager.linkReshapingTool.handleArchetype =\r\n            $(go.Shape, \"Circle\", {\r\n                width: 30,\r\n                height: 30,\r\n                fill: \"lightblue\",\r\n                stroke: \"dodgerblue\"\r\n            });        \r\n\r\n        // only allow new links between ports of the same group\r\n        myDiagram.toolManager.linkingTool.linkValidation = sameGroup;\r\n        // only allow reconnecting an existing link to a port of the same color\r\n        myDiagram.toolManager.relinkingTool.linkValidation = sameGroup;\r\n        myDiagram.commandHandler.doKeyDown = (e)=>{\r\n            this.dokeyDownFn(e)\r\n        }\r\n        myDiagram.commandHandler.deleteSelection = function(){\r\n            console.log(\"deleteSelectiondeleteSelection\")\r\n            var node = that.diagram.selection.first();\r\n            if (!node) {\r\n                return;\r\n            }\r\n            // 不允许删除主题\r\n            if(node.data.role == \"theme\" || node.data.role == \"themeText\"|| node.data.subRole == \"themeText\"){\r\n                return;\r\n            }\r\n            var nodeCopy = JSON.parse(JSON.stringify(node.data))\r\n            that.deleteSelection();\r\n            if(that.deleteCallback){\r\n                that.deleteCallback(nodeCopy)\r\n            }\r\n        }\r\n        myDiagram.commandHandler.redo = function() {\r\n            var cmd = myDiagram.commandHandler;\r\n            //myDiagram.currentTool.doCancel();\r\n            //go.CommandHandler.prototype.redo.call(cmd);\r\n            myDiagram.clearSelection();\r\n            go.CommandHandler.prototype.redo.call(cmd);\r\n        };\r\n        myDiagram.commandHandler.undo = function() {\r\n            var cmd = myDiagram.commandHandler;\r\n\r\n            myDiagram.clearSelection();\r\n            if (myDiagram.toolManager) {\r\n                myDiagram.toolManager.textEditingTool.doCancel();\r\n            }\r\n            go.CommandHandler.prototype.undo.call(cmd);\r\n        };\r\n\r\n        myDiagram.toolManager.clickCreatingTool.archetypeNodeData = {\r\n            category: \"autoText\",\r\n            text: \"双击编辑文本\",\r\n            level: 0,\r\n            radius: 120,\r\n        };\r\n\r\n        this.addNodeTemplateBase()\r\n        this.addDiagramContextMenu();\r\n        // if(this.model){\r\n        //     this.initModel();\r\n        // }\r\n    }\r\n    removeNodeRemarkTips() {\r\n        var doms = document.getElementById('tooltip');\r\n        if (doms) {\r\n            doms.parentNode.removeChild(doms);\r\n        }\r\n    }\r\n\r\n    showNodeRemarkTips(e, node) {\r\n        var info = document.getElementById('tooltip');\r\n        if (!info || info.length == 0) {\r\n            let str = document.createElement('div');\r\n            str.setAttribute('id', 'tooltip');\r\n            str.setAttribute('style', 'word-wrap: break-word;word-break: break-all');\r\n            document.body.appendChild(str);\r\n            info = document.getElementById('tooltip');\r\n        }\r\n        var box = document.getElementById(\"tooltip\");\r\n    \r\n        if (!node.data.istemp && (node.data.text && node.data.text.trim() == \"\") && (node.data.remark && node.data.remark.trim() == \"\" || typeof(node.data.remark) == 'undefined')) return;\r\n    \r\n        if (node.data.istemp) {\r\n            var toolTipText = lang.trans('tempnodetips');\r\n        } else if(node.category === \"y\"||(node.category === \"LogicXor\"&&node.data.loc.split(' ')[1] === \"5\")){\r\n            var toolTipText =\"最右新增\";\r\n        }else if(node.category === \"x\"||(node.category === \"LogicXor\"&&node.data.loc.split(' ')[0] === \"-20\")){\r\n            var toolTipText =\"最上新增\";\r\n        }else {\r\n            var toolTipText = node.data.text + \"<br><hr>\";\r\n            toolTipText += node.data.remark ? node.data.remark : \"\";\r\n        }\r\n    \r\n        box.innerHTML = toolTipText;\r\n        // box.style.left = e.viewPoint.x + \"px\";\r\n        // box.style.top = e.viewPoint.y + \"px\";\r\n        if(node.category === \"y\"||node.category === \"x\"||node.category === \"LogicXor\"){\r\n            box.style.left = (e.event.clientX + 10) + \"px\";\r\n            box.style.top = (e.event.clientY - 10) + \"px\";\r\n        }else{\r\n            box.style.left = (e.event.clientX + 50) + \"px\";\r\n            box.style.top = (e.event.clientY - 50) + \"px\";\r\n        }\r\n        box.style.position = \"fixed\";\r\n        box.style.zIndex = 5555;\r\n        box.style.backgroundColor = \"#FFFFE1\";\r\n        // $(\"#tooltip\")[0].innerHtml = \"<p>aaaaaaaaa<br>bbbbbbbbbbbbb</p>\";\r\n    }\r\n\r\n    nodeResizeAdornmentTemplate () {\r\n        return $(go.Adornment, \"Spot\",\r\n            $(go.Placeholder), // takes size and position of adorned object\r\n            $(go.Shape, \"Circle\", // left resize handle\r\n                {\r\n                    alignment: go.Spot.TopLeft,\r\n                    alignmentFocus: go.Spot.BottomRight,\r\n                    cursor: \"col-resize\",\r\n                    desiredSize: new go.Size(30, 30),\r\n                    fill: \"lightblue\",\r\n                    stroke: \"dodgerblue\"\r\n                }),\r\n            $(go.Shape, \"Circle\", // right resize handle\r\n                {\r\n                    alignment: go.Spot.BottomRight,\r\n                    alignmentFocus: go.Spot.TopLeft,\r\n                    cursor: \"col-resize\",\r\n                    desiredSize: new go.Size(30, 30),\r\n                    fill: \"lightblue\",\r\n                    stroke: \"dodgerblue\"\r\n                })\r\n        )\r\n    }\r\n    // 创建默认菜单 this.defaultCxElement\r\n    customMenu () {\r\n        console.log(\"第一步创建默认的自定义菜单\")\r\n        if(this.defaultCxElement){\r\n            console.log(\"使用默认菜单，已经存在\")\r\n            return this.defaultCxElement;\r\n        }\r\n        console.log(this.useDefaultContext)\r\n        // 不使用默认菜单\r\n        if(!this.useDefaultContext){\r\n            \r\n            return null;\r\n        }\r\n        // 添加菜单选项\r\n        var str = this.getDefaultCustomMenuDivStr()\r\n        \r\n        let div = document.createElement('div');\r\n        // div.setAttribute('id', 'contextMenu');\r\n        div.setAttribute('class', 'context-menu');\r\n        div.innerHTML = str;\r\n        // document.getElementsByClassName('mainbox')[0].appendChild(div);\r\n        var mainbox = document.getElementById(this.containerDivId)\r\n        mainbox.appendChild(div);\r\n        let contextMeluDom = mainbox.getElementsByClassName('context-menu')[0]\r\n        this.defaultCxElement = contextMeluDom\r\n        this.bindMenuEventListener(contextMeluDom)\r\n        return contextMeluDom\r\n    }\r\n\r\n    bindMenuEventListener(cxElement){\r\n        let menuList = cxElement.getElementsByTagName('li');\r\n        console.log(\"创建的自定义菜单需要绑定一些事件\")\r\n        for(let i = 0; i < menuList.length; i++){\r\n            menuList[i].addEventListener('click', () => {\r\n                let val = menuList[i].getAttribute('trtd_action');\r\n                // cxcommand(this, val);\r\n                console.log(\"menuList[i].addEventListener('click'\")\r\n                this.diagram.__trtd[val]();\r\n                this.diagram.currentTool.stopTool();\r\n                return false\r\n                // setTimeout(()=>{\r\n                //     this.diagram.toolManager.contextMenuTool.hideContextMenu()\r\n                // },100)\r\n            })\r\n        }\r\n    }\r\n\r\n    addDiagramContextMenu(){\r\n      \r\n        // console.log(\"基类 addDiagramContextMenu\")\r\n        console.log(\"第二步 将自定义菜单与diagram绑定\")\r\n        // console.log(objNode)\r\n       \r\n\r\n        var that = this;\r\n        var myDiagram = this.diagram;\r\n        var cxTool = myDiagram.toolManager.contextMenuTool;\r\n        // This is the actual HTML context menu:\r\n\r\n        // var mainbox = document.getElementById('mainbox')\r\n        // mainbox.appendChild(div);\r\n        \r\n        // let menuList = mainbox.getElementsByClassName('context-menu')[0].getElementsByTagName('li');\r\n        // var cxElement = mainbox.getElementsByClassName('context-menu')[0]\r\n        console.log(this.cxElement)\r\n        \r\n        if(!this.cxElement){ // 外部没有传入菜单元素，则使用默认的菜单\r\n            if(!this.defaultCxElement){\r\n                this.defaultCxElement = this.customMenu()\r\n            }\r\n            var cxElement = this.defaultCxElement\r\n        }else{\r\n            var cxElement = this.cxElement\r\n        }\r\n        if(!cxElement){\r\n            return;\r\n        }\r\n        // We don't want the div acting as a context menu to have a (browser) context menu!\r\n        cxElement.addEventListener(\"contextmenu\", function(e) {\r\n            // this.onfocus();\r\n            e.preventDefault();\r\n            return false;\r\n        }, false);\r\n        // cxElement.addEventListener(\"blur\", function(e) {\r\n        //     cxTool.stopTool();\r\n        //     // maybe start another context menu\r\n        //     if (cxTool.canStart()) {\r\n        //         myDiagram.currentTool = cxTool;\r\n        //         cxTool.doMouseUp();\r\n        //     }\r\n        // }, false);\r\n        cxElement.tabIndex = \"1\";\r\n        // This is the override of ContextMenuTool.showContextMenu:\r\n        // This does not not need to call the base method.\r\n        cxTool.showContextMenu = function(contextmenu, obj) {\r\n            console.log('thisthisthis:', this.diagram);\r\n            console.log('thisthisthis:', this.diagram.model);\r\n    \r\n            console.log('this:', this.diagram.selection);\r\n            var diagram = this.diagram;\r\n            // console.log('diagram:', diagram);\r\n            if (diagram === null) return;\r\n            // Hide any other existing context menu\r\n            if (contextmenu !== this.currentContextMenu) {\r\n                this.hideContextMenu();\r\n            }\r\n\r\n            var node = myDiagram.findPartAt(myDiagram.lastInput.documentPoint, false);\r\n            this.currentContextMenu = contextmenu;\r\n            var mousePt = diagram.lastInput.viewPoint;\r\n            console.log(diagram.lastInput)\r\n            cxElement.style.left = mousePt.x + \"px\";\r\n            cxElement.style.top = mousePt.y + \"px\";\r\n            // console.log(diagram.lastInput.Dr.clientX)\r\n            // console.log(mousePt.x)\r\n            \r\n            // cxElement.style.left = diagram.lastInput.Dr.clientX + \"px\";\r\n            // cxElement.style.top = diagram.lastInput.Dr.clientY + \"px\";\r\n\r\n            if(that.showContextMenuListener){\r\n                return that.showContextMenuListener(this.diagram, node)\r\n            }\r\n\r\n            // ===========================================================\r\n            // Show only the relevant buttons given the current state.\r\n            var showMenus = that.getShowContextMenus(node)\r\n            let liL = cxElement.getElementsByTagName('li')\r\n            if(showMenus){\r\n                console.log(showMenus.split(',').length)\r\n                for(let i = 0; i < liL.length; i++){\r\n                    liL[i].style.display = 'none';\r\n                }\r\n                for(let i = 0; i < showMenus.split(',').length; i++){\r\n                    try{\r\n                        if(helpers.getElementByAttr(cxElement,\"li\",\"trtd_action\",showMenus.split(',')[i])[0]){\r\n                            helpers.getElementByAttr(cxElement,\"li\",\"trtd_action\",showMenus.split(',')[i])[0].style.display = 'block'\r\n                        }\r\n                        \r\n                    }catch(e){\r\n                        console.error(e)\r\n                        continue\r\n                    }\r\n                    // cxElement.getElementsByClassName(showIds.split(',')[i])[0].style.display = 'block';\r\n                }\r\n            }else{\r\n                if(showMenus == \"\"){\r\n                    for(let i = 0; i < liL.length; i++){\r\n                        liL[i].style.display = 'block';\r\n                    }\r\n                }else{\r\n                    for(let i = 0; i < liL.length; i++){\r\n                        liL[i].style.display = 'none';\r\n                    }\r\n                }\r\n            }\r\n\r\n            // Now show the whole context menu element\r\n            cxElement.style.display = \"block\";\r\n            // we don't bother overriding positionContextMenu, we just do it here:\r\n\r\n            // cxElement.style.left = x+10 + \"px\";\r\n            // cxElement.style.top = y-40 + \"px\";\r\n            // Remember that there is now a context menu showing\r\n            \r\n        }\r\n            // This is the corresponding override of ContextMenuTool.hideContextMenu:\r\n            // This does not not need to call the base method.\r\n        cxTool.hideContextMenu = function() {\r\n            if (this.currentContextMenu === null) return;\r\n            this.currentContextMenu = null;\r\n            cxElement.style.display = \"none\";\r\n            if(that.hideContextMenuListener){\r\n                return that.hideContextMenuListener(myDiagram)\r\n            }\r\n        }\r\n    }\r\n\r\n    getNodeContextMenu() {\r\n        return $(go.Adornment)\r\n\r\n        let style = {\r\n            // width: 120,\r\n            // height: 30,\r\n            // margin: 2,\r\n            // font: \"bold 14px sans-serif\",\r\n            // margin: 3,\r\n        }\r\n    \r\n        return $(go.Adornment, \"Vertical\",\r\n            $(\"ContextMenuButton\",\r\n                $(go.TextBlock, \"应用样式到所有同级节点\"), {\r\n                    click: function(e, obj) {\r\n                        menus.applyStyle2Level(e, obj);\r\n                    }\r\n                }),\r\n            $(\"ContextMenuButton\",\r\n                $(go.TextBlock, \"应用样式到同级节点\"), {\r\n                    click: function(e, obj) {\r\n                        menus.applyStyle2CurLevel(e, obj);\r\n                    }\r\n                }),\r\n            $(\"ContextMenuButton\",\r\n                $(go.TextBlock, \"应用样式到子节点\"), {\r\n                    click: function(e, obj) {\r\n                        menus.applyStyle2ChiLevel(e, obj);\r\n                    }\r\n                }),\r\n            $(\"ContextMenuButton\",\r\n                $(go.TextBlock, \"添加\"), {\r\n                    click: function(e, obj) {\r\n                        menus.addFollower(e);\r\n                    }\r\n                }),\r\n            $(\"ContextMenuButton\",\r\n                $(go.TextBlock, \"添加子节点\"), {\r\n                    click: function(e) {\r\n                        menus.startNewSpiral(e);\r\n                    }\r\n                }),\r\n            $(\"ContextMenuButton\",\r\n                $(go.TextBlock, \"定位当前节点\"), style, {\r\n                    click: function(e){\r\n\r\n                    }\r\n                }),\r\n    \r\n            $(\"ContextMenuButton\",\r\n                $(go.TextBlock, \"删除\"), style, {\r\n                    click: function(e, obj) {\r\n                        console.log('eeeeeeeeee:', e);\r\n                        e.diagram.commandHandler.deleteSelection();\r\n                    }\r\n                }),\r\n            // $(\"ContextMenuButton\",\r\n            //     $(go.TextBlock, \"添加图片\"), style, {\r\n            //         click: function(e, obj) {\r\n            //             insertPicture();\r\n            //         }\r\n            //     }),\r\n            // $(\"ContextMenuButton\",\r\n            //     $(go.TextBlock, \"移除图片\"), style, {\r\n            //         click: function(e, obj) {\r\n            //             removeNodePicture();\r\n            //         }\r\n            //     }),\r\n            $(\"ContextMenuButton\",\r\n                $(go.TextBlock, \"清空文本\"), style, {\r\n                    click: function(e, obj) {\r\n                        var myDiagram = e.diagram;\r\n                        var node = myDiagram.selection.first();\r\n                        if (node) {\r\n                            myDiagram.startTransaction();\r\n                            //node.data.text=\"\";\r\n                            myDiagram.model.setDataProperty(node.data, \"text\", \"\");\r\n                            myDiagram.commitTransaction();\r\n                        }\r\n                        //removeNodePicture();\r\n                    }\r\n                }),\r\n            $(\"ContextMenuButton\",\r\n                $(go.TextBlock, \"删除 DEL\"), style, {\r\n                    click: function(e, obj) {\r\n                        var myDiagram = e.diagram;\r\n                        var node = myDiagram.selection.first();\r\n                        if (node) {\r\n                            yunpan.yunpandel(e)\r\n                        }\r\n                        //removeNodePicture();\r\n                    }\r\n                }),\r\n            $(\"ContextMenuButton\",\r\n                $(go.TextBlock, \"增加 CTRL+X/Y\"), style, {\r\n                    click: function(e, obj) {\r\n                        var myDiagram = e.diagram;\r\n                        var node = myDiagram.selection.first();\r\n                        if (node) {\r\n                            if(node.data.loc.split(\" \")[1] === \"0\"&&node.data.category!==\"x\"){\r\n                                yunpan.addy(e)\r\n                            }else if(node.data.loc.split(\" \")[0] === \"0\"&&node.data.category!==\"y\"){\r\n                                yunpan.addx(e)\r\n                            }; \r\n                        }\r\n                        //removeNodePicture();\r\n                    }\r\n                }),\r\n            $(\"ContextMenuButton\",\r\n                $(go.TextBlock, \"删除 DEL\"), style, {\r\n                    click: function(e, obj) {\r\n                        var myDiagram = e.diagram;\r\n                        var node = myDiagram.selection.first();\r\n                        if (node) {\r\n                            yunpan.yunpandel(e)\r\n                        }\r\n                        //removeNodePicture();\r\n                    }\r\n                }),\r\n            $(\"ContextMenuButton\",\r\n                $(go.TextBlock, \"增加同级节点\"), style, {\r\n                    click: function(e, obj) {\r\n                        var myDiagram = e.diagram;\r\n                        var node = myDiagram.selection.first();\r\n                        if(myDiagram.selection.first().data.istemp){\r\n                            return\r\n                        }\r\n                        dipan.addFollowerGround(e);\r\n                    }\r\n                }),\r\n            $(\"ContextMenuButton\",\r\n                $(go.TextBlock, \"增加子节点\"), style, {\r\n                    click: function(e, obj) {\r\n                        var myDiagram = e.diagram;\r\n                        var node = myDiagram.selection.first();\r\n                        if(node.data.parent){\r\n                            var parentNode = node.diagram.findNodeForKey(node.data.parent);\r\n                            if(parentNode.data.istemp){\r\n                                return\r\n                            }\r\n                        }\r\n                        dipan.addNewCircle(e);\r\n                    }\r\n                }),\r\n            $(\"ContextMenuButton\",\r\n                $(go.TextBlock, \"删除\"), style, {\r\n                    click: function(e, obj) {\r\n                        var myDiagram = e.diagram;\r\n                        var node = myDiagram.selection.first();\r\n                        if(node.data.parent){\r\n                            var parentNode = node.diagram.findNodeForKey(node.data.parent);\r\n                            if(parentNode.data.istemp){\r\n                                return\r\n                            }\r\n                        }\r\n                        dipan.addNewCircle(e);\r\n                    }\r\n                }),\r\n                $(\"ContextMenuButton\",\r\n                $(go.TextBlock, \"复制副本\"), style, {\r\n                    click: function(e, obj) {\r\n                        var myDiagram = e.diagram;\r\n                        var node = myDiagram.selection.first();\r\n                        if(myDiagram.selection.first().data.istemp){\r\n                            return\r\n                        }\r\n                        dipan.addFollowerGround(e);\r\n                    }\r\n                }),\r\n            $(\"ContextMenuButton\",\r\n                $(go.TextBlock, \"权限设置\"), style, {\r\n                    click: function(e, obj) {\r\n                        var myDiagram = e.diagram;\r\n                        var node = myDiagram.selection.first();\r\n                        if(node.data.parent){\r\n                            var parentNode = node.diagram.findNodeForKey(node.data.parent);\r\n                            if(parentNode.data.istemp){\r\n                                return\r\n                            }\r\n                        }\r\n                        dipan.addNewCircle(e);\r\n                    }\r\n                }),\r\n            $(\"ContextMenuButton\",\r\n                $(go.TextBlock, \"删除\"), style, {\r\n                    click: function(e, obj) {\r\n                        var myDiagram = e.diagram;\r\n                        var node = myDiagram.selection.first();\r\n                        if(node.data.parent){\r\n                            var parentNode = node.diagram.findNodeForKey(node.data.parent);\r\n                            if(parentNode.data.istemp){\r\n                                return\r\n                            }\r\n                        }\r\n                        dipan.addNewCircle(e);\r\n                    }\r\n                })\r\n    \r\n        );\r\n    }\r\n\r\n    dokeyDownFn() {   \r\n            //快捷键\r\n            // function dokeyDownFn (myDiagram) {\r\n            var myDiagram = this.diagram;\r\n            var diagram = this.diagram;\r\n            var e = this.diagram.lastInput;\r\n            var cmd = myDiagram.commandHandler;\r\n            var node = myDiagram.selection.first();\r\n\r\n            if (e.event.altKey) {\r\n                if (e.key == \"Q\") {\r\n                    autoLayoutAll();\r\n                    return;\r\n                } else if (e.key == \"R\") {\r\n                    centerNode();\r\n                    return;\r\n                } else if (e.key == \"C\") {\r\n                    centerCurrentNode();\r\n                    return;\r\n                } else if (e.key == \"A\") {\r\n                    zoomToFit();\r\n                    return;\r\n                }\r\n            }\r\n            if (e.event.keyCode >= 65 && e.event.keyCode <= 90 && !e.event.altKey && !e.event.ctrlKey && !e.event.shiftKey) {\r\n                // e.bubbles = true;\r\n                e.bubbles = false;\r\n                diagram.__trtd.selectText(e);\r\n                return true;\r\n            }\r\n\r\n            if (e.event.keyCode === 13) { // could also check for e.control or e.shift\r\n                if (node && node.data.category == 'Root' ) {\r\n                    diagram.__trtd.addFollowerGround();\r\n                } else if(node && node.data.category == 'dipan'){\r\n                    diagram.__trtd.addFollowerGround();\r\n                }\r\n\r\n            } else if (e.event.keyCode === 9) { // could also check for e.control or e.shift\r\n                if (node && node.data.category == 'Root') {\r\n\r\n                    diagram.__trtd.addNewCircle();\r\n                } else if(node && node.data.category == 'dipan'){\r\n                    diagram.__trtd.addNewCircle();\r\n                }\r\n            } else if (e.key === \"t\") { // could also check for e.control or e.shift\r\n                if (cmd.canCollapseSubGraph()) {\r\n                    cmd.collapseSubGraph();\r\n                } else if (cmd.canExpandSubGraph()) {\r\n                    cmd.expandSubGraph();\r\n                }\r\n            } else if (e.key == \"Del\") {\r\n                if (myDiagram.selection.count == 0) {\r\n                    return;\r\n                }\r\n                diagram.__trtd.deleteSelection();\r\n            } else if (e.event.keyCode == 113) { //F2,覆盖地盘默认行为\r\n                diagram.__trtd.selectText();\r\n            } else if (e.event.keyCode == 37) { //左\r\n                diagram.__trtd.moveWithinNodes('left');\r\n            } else if (e.event.keyCode == 38) { //上\r\n                diagram.__trtd.moveWithinNodes('up');\r\n            } else if (e.event.keyCode == 39) { //右\r\n                diagram.__trtd.moveWithinNodes('right');\r\n            } else if (e.event.keyCode == 40) { //下\r\n                diagram.__trtd.moveWithinNodes('down');\r\n            } else {\r\n                // call base method with no arguments\r\n                go.CommandHandler.prototype.doKeyDown.call(cmd);\r\n            }\r\n            e.bubbles = false; //阻止事件冒泡到dom\r\n        // };\r\n\r\n        // return this.dokeyDownFn(this);\r\n    }\r\n}\r\n\r\nfunction computeEffectiveCollection(parts) {\r\n    var coll = new go.Set(go.Part);\r\n    var node = parts.first();\r\n    if (node) {\r\n        if(node.containingGroup && node.containingGroup.data.category == \"labelGroup\"){\r\n            var it = node.containingGroup.findSubGraphParts().iterator;\r\n            coll.add(node.containingGroup)\r\n            while(it.next()){\r\n                var n = it.value;\r\n                coll.add(n)\r\n            }\r\n        }else{\r\n            helpers.travelParts(node, function(p) {\r\n                coll.add(p);\r\n            })\r\n        }\r\n    } else {\r\n        coll.addAll(parts);\r\n    }\r\n    var tool = this;\r\n\r\n    return go.DraggingTool.prototype.computeEffectiveCollection.call(this, coll);\r\n};\r\n\r\nfunction sameGroup(fromnode, fromport, tonode, toport) {\r\n    //a node has 2 outer links at most\r\n    if (fromnode.findLinksOutOf().count >= 2) return;\r\n    //root node has 1 outer links at most\r\n    if (fromnode.findLinksOutOf().count >= 1 && fromnode.data.key == 1) return;\r\n    return fromnode.data.group === tonode.data.group;\r\n    // this could look at the fromport.fill and toport.fill instead,\r\n    // assuming that the ports are Shapes, which they are because portID was set on them,\r\n    // and that there is a data Binding on the Shape.fill\r\n}\r\n\r\nfunction cxcommand (obj, val) {\r\n    var diagram = obj.diagram;\r\n    var myDiagram = obj.diagram;\r\n    if (!(diagram.currentTool instanceof go.ContextMenuTool)) return;\r\n    switch (val) {\r\n        // case \"Paste\": diagram.commandHandler.pasteSelection(diagram.lastInput.documentPoint); break;\r\n        case \"addChildNodeMenu\":\r\n            tdAddChildNode(obj);\r\n            break;\r\n        case \"addLevelNodeMenu\":\r\n            tdAddLevelNode(obj);\r\n            break;\r\n        case \"changeDipanBgMenu\":\r\n            changeDipanBackgroundImg();\r\n            break;\r\n        case \"removeDipanBgMenu\":\r\n            removeDipanBackgroundImg(obj);\r\n            break;\r\n        case \"deleteNodeMenu\":\r\n            myDiagram.toolManager.textEditingTool.doCancel();\r\n            myDiagram.commandHandler.deleteSelection();\r\n            break;\r\n        case \"addNodePictureMenu\":\r\n            // jQuery(\"#insertimage\").modal('show');\r\n            // document.getElementById('insertimage').modal('show');\r\n            break; //特殊处理\r\n        case \"removeNodePictureMenu\":\r\n            removeNodePicture(obj);\r\n            break;\r\n        case \"clearNodeTextMenu\":\r\n            var node = myDiagram.selection.first();\r\n            if (node) {\r\n                myDiagram.startTransaction();\r\n                myDiagram.model.setDataProperty(node.data, \"text\", \"\");\r\n                myDiagram.commitTransaction();\r\n            };\r\n            break;\r\n        case \"locateRootNodeMenu\":\r\n            centerNode(obj);\r\n            break;\r\n        case \"showAllNodesMenu\":\r\n            zoomToFit(obj);\r\n            break;\r\n        case \"removeOutCycleMenu\":\r\n            removeOutCycle(obj);\r\n            break;\r\n        case \"centerPictureMenu\":\r\n            centerPicture(obj);\r\n            break;\r\n        case \"equalWidthHeightPictureMenu\":\r\n            equalWidthHeightPicture(obj);\r\n            break;\r\n        case \"bringToTopMenu\":\r\n            bringToLayer(\"Foreground\", obj);\r\n            break;\r\n        case \"bringToBackgroundMenu\":\r\n            bringToLayer(\"Background\", obj);\r\n            break;\r\n        case \"bringUpMenu\":\r\n            bringToLayer(null, obj);\r\n            break;\r\n        case \"layoutGroupMenu\":\r\n            autoLayoutAll(true, obj);\r\n            break;\r\n\r\n        case \"insertTextMenu\":\r\n            insertTextNode(obj);\r\n            break;\r\n        case \"duplicateNode\":\r\n            duplicateNode(obj);\r\n            break; // 复制节点\r\n        case \"insertTianpanMenu\":\r\n            myDiagram.toolManager.clickCreatingTool.insertPart(myDiagram.lastInput.documentPoint);\r\n            break;\r\n        //固定节点\r\n        case \"fixPictureMenu\":   \r\n        case \"activePictureMenu\":\r\n            //var node = myDiagram.findPartAt(myDiagram.lastInput.documentPoint, false);\r\n            var node = myDiagram.selection.first();\r\n            myDiagram.startTransaction();\r\n            myDiagram.model.setDataProperty(node.data, \"selectable\", node.data.selectable != undefined ? (!node.data.selectable) : false);\r\n            myDiagram.commitTransaction();\r\n            break;\r\n        case \"orderChildNode\":\r\n            orderChildNode(obj);\r\n            break;\r\n        case \"clearOrderChildNode\":\r\n            clearOrderChildNode(obj);\r\n            break;\r\n        case \"delYunpanAxis\":\r\n            // yunpan.yunpandel(obj);\r\n            break;\r\n        case \"addYunpanAxis\":\r\n            // var node = myDiagram.selection.first();\r\n            // if(node.data.loc.split(\" \")[1] === \"0\"&&node.data.category!==\"x\"){\r\n            //     yunpan.addy(obj)\r\n            // }else if(node.data.loc.split(\" \")[0] === \"0\"&&node.data.category!==\"y\"){\r\n            //     yunpan.addx(obj)\r\n            // }; \r\n            break;\r\n        case \"addLevelDipanNode\":\r\n            if(myDiagram.selection.first().data.istemp){\r\n                return\r\n            }\r\n            obj.addFollowerGround();\r\n            break;\r\n        case \"addChildDipanNode\":\r\n            var node = myDiagram.selection.first();\r\n                if(node.data.parent){\r\n                    var parentNode = node.diagram.findNodeForKey(node.data.parent);\r\n                    if(parentNode.data.istemp){\r\n                        return\r\n                    }\r\n                }\r\n            obj.addNewCircle(obj);\r\n            break;\r\n        case \"deleteDipanNode\":\r\n        // myDiagram.commandHandler.deleteSelection();\r\n        obj.deleteSelection();\r\n        break;\r\n    }\r\n    diagram.currentTool.stopTool();\r\n}\r\n\r\n\r\n\r\n\r\n// module.exports.Trtd = Trtd;\r\nmodule.exports.Trtd = Trtd;\n\n\n// WEBPACK FOOTER //\n// ./src/diagram/trtd.js","\r\n// var sampleNodeTemplate = require('./sampleNodeTemplate')\r\nvar waveNodeTemplate = require('./waveNodeTemplate')\r\nvar waveTailNodeTemplate = require('./waveTailNodeTemplate')\r\nvar waveGroupNodeTemplate = require('./waveGroupNodeTemplate')\r\nvar axisGroupNodeTemplate = require('./axisGroupNodeTemplate')\r\nvar iconTextNodeTemplate = require('./iconTextNodeTemplate')\r\nvar autoTextNodeTemplate = require('./autoTextNodeTemplate')\r\nvar labelGroupNodeTemplate = require('./labelGroupNodeTemplate')\r\n// var cbianNodeTemplate = require('./cbianNodeTemplate')\r\nvar picNodeTemplate = require('./picNodeTemplate')\r\nvar picGroupNodeTemplate = require('./picGroupNodeTemplate')\r\nvar yunGroupNodeTemplate = require('./yunGroupNodeTemplate')\r\nvar yunpanGroupNodeTemplate = require('./yunpanGroupNodeTemplate')\r\nvar shapeNodeTemplate = require('./shapeNodeTemplate')\r\nvar shapeTextNodeTemplate = require('./shapeTextNodeTemplate')\r\n\r\nmodule.exports =  function(nodeType, options){\r\n    var temp = `${nodeType}NodeTemplate`\r\n    console.log(\"factory:\",temp)\r\n    var nodeTemplateClass = eval(temp)\r\n    return new nodeTemplateClass(options)\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/nodeTemplate/factory.js","\n\tvar localization = {\n\t\t\"trtd\":{\n\t\t\t// \"en\":\"Spherical Revolving World\",\n\t\t\t\"en\":\"Turn Round TD\",\n\t\t\t\"chn\":\"圆转天地\"\n\t\t},\n\t\t\"save\":{\n\t\t\t\"en\":\"Save\",\n\t\t\t\"chn\":\"保存\"\n\t\t},\n\t\t\"preview\":{\n\t\t\t\"en\":\"Preview\",\n\t\t\t\"chn\":\"预览\"\n\t\t},\n\t\t\"logout\":{\n\t\t\t\"en\":\"Log out\",\n\t\t\t\"chn\":\"退出\"\n\t\t},\n\t\t\"menu\":{\n\t\t\t\"en\":\"Menu\",\n\t\t\t\"chn\":\"菜单\"\n\t\t},\n\t\t\"usual\":{\n\t\t\t\"en\":\"Common\",\n\t\t\t\"chn\":\"常用\"\n\t\t},\n\t\t\"thinking\":{\n\t\t\t\"en\":\"Train of Thought\",\n\t\t\t\"chn\":\"思路\"\n\t\t},\n\t\t\"appearance\":{\n\t\t\t\"en\":\"Appearance\",\n\t\t\t\"chn\":\"外观\"\n\t\t},\n\t\t\"view\":{\n\t\t\t\"en\":\"View\",\n\t\t\t\"chn\":\"视图\"\n\t\t},\n\t\t\"insertll\":{\n\t\t\t\"en\":\"Insert the Lower Leve\",\n\t\t\t\"chn\":\"插入下级\"\n\t\t},\n\t\t\"insertsl\":{\n\t\t\t\"en\":\"Insert Sibling Level\",\n\t\t\t\"chn\":\"插入同级\"\n\t\t},\n\t\t\"undo\":{\n\t\t\t\"en\":\"Undo\",\n\t\t\t\"chn\":\"撤销\"\n\t\t},\n\t\t\"redo\":{\n\t\t\t\"en\":\"Redo\",\n\t\t\t\"chn\":\"重做\"\n\t\t},\n\t\t\"cte\":{\n\t\t\t\"en\":\"Click to edit\",\n\t\t\t\"chn\":\"单击编辑\"\n\t\t},\n\t\t\"dce\":{\n\t\t\t\"en\":\"Double Click to Edit\",\n\t\t\t\"chn\":\"双击编辑内容\"\n\t\t},\n\t\t\"centertheme\":{\n\t\t\t\"en\":\"Central Theme\",\n\t\t\t\"chn\":\"中心主题\"\n\t\t},\n\t\t\"edit\":{\n\t\t\t\"en\":\"Edit\",\n\t\t\t\"chn\":\"编辑\"\n\t\t},\n\t\t\"remove\":{\n\t\t\t\"en\":\"Delete\",\n\t\t\t\"chn\":\"删除\"\n\t\t},\n\t\t\"radius\":{\n\t\t\t\"en\":\"Size\",\n\t\t\t\"chn\":\"大小\"\n\t\t},\n\t\t\"shape\":{\n\t\t\t\"en\":\"Shape\",\n\t\t\t\"chn\":\"形状\"\n\t\t},\n\t\t\"borderwidth\":{\n\t\t\t\"en\":\"Border Width\",\n\t\t\t\"chn\":\"边框宽度\"\n\t\t},\n\t\t\"noborder\":{\n\t\t\t\"en\":\"No Border\",\n\t\t\t\"chn\":\"无边框\"\n\t\t},\n\t\t\"borderstyle\":{\n\t\t\t\"en\":\"Border Style\",\n\t\t\t\"chn\":\"边框样式\"\n\t\t},\n\t\t\"fillcolor\":{\n\t\t\t\"en\":\"Fill Color\",\n\t\t\t\"chn\":\"填充色\"\n\t\t},\n\t\t\"bordercolor\":{\n\t\t\t\"en\":\"Border Color\",\n\t\t\t\"chn\":\"边框颜色\"\n\t\t},\n\t\t\"image\":{\n\t\t\t\"en\":\"Pictures\",\n\t\t\t\"chn\":\"图片\"\n\t\t},\n\t\t\"insert\":{\n\t\t\t\"en\":\"Insert\",\n\t\t\t\"chn\":\"插入\"\n\t\t},\n\t\t\"delete\":{\n\t\t\t\"en\":\"Remove\",\n\t\t\t\"chn\":\"移除\"\n\t\t},\n\t\t\"remark\":{\n\t\t\t\"en\":\"Comment\",\n\t\t\t\"chn\":\"备注\"\n\t\t},\n\t\t\"removeallnode\":{\n\t\t\t\"en\":\"Empty Nodes\",\n\t\t\t\"chn\":\"清空节点\"\n\t\t},\n\t\t\"removeallline\":{\n\t\t\t\"en\":\"Delete Lines\",\n\t\t\t\"chn\":\"清空连线\"\n\t\t},\n\t\t\"arrangelayout\":{\n\t\t\t\"en\":\"Arrange layout\",\n\t\t\t\"chn\":\"整理布局\"\n\t\t},\n\t\t\"previewSubPan\":{\n\t\t\t\"en\":\"Preview SubPan\",\n\t\t\t\"chn\":\"预览子盘\"\n\t\t},\n        \"arrowstyle\":{\n            \"en\":\"Arrow Style\",\n            \"chn\":\"箭头样式\"\n        },\n        \"linkstyle\":{\n            \"en\":\"Link Style\",\n            \"chn\":\"弧样式\"\n        },\n\t\t\"clearText\":{\n\t\t\t\"en\":\"Clear Text\",\n\t\t\t\"chn\":\"清空文本\"\n\t\t},\n\t\t\"tdautolayout\":{\n\t\t\t// \"en\":\"Auto-placement of the TianPan\",\n\t\t\t\"en\":\"Auto layout\",\n\t\t\t\"chn\":\"天盘自动布局\"\n\t\t},\n\t\t\"jumptonewnode\":{\n\t\t\t// \"en\":\"Automatically Redirect to the New Nodes\",\n\t\t\t\"en\":\"Auto locate\",\n\t\t\t\"chn\":\"自动跳转到新的节点\"\n\t\t},\n\t\t\"theme\":{\n\t\t\t\"en\":\"Subject\",\n\t\t\t\"chn\":\"主题\"\n\t\t},\n\t\t\"backcolor\":{\n\t\t\t\"en\":\"Background Color\",\n\t\t\t\"chn\":\"背景颜色\"\n\t\t},\n\t\t\"objofaction\":{\n\t\t\t\"en\":\"Object\",\n\t\t\t\"chn\":\"作用对象\"\n\t\t},\n\t\t\"oneobj\":{\n\t\t\t\"en\":\"Single Node\",\n\t\t\t\"chn\":\"单个节点\"\n\t\t},\n\t\t\"sibobj\":{\n\t\t\t\"en\":\"Sibling Nodes\",\n\t\t\t\"chn\":\"同级节点\"\n\t\t},\n\t\t\"allsibobj\":{\n\t\t\t\"en\":\"All Sibling Nodes\",\n\t\t\t\"chn\":\"所有同级节点\"\n\t\t},\n\t\t\"allnodes\":{\n\t\t\t\"en\":\"All Nodes\",\n\t\t\t\"chn\":\"所有节点\"\n\t\t},\n\t\t\"shade\":{\n\t\t\t\"en\":\"Shade\",\n\t\t\t\"chn\":\"阴影\"\n\t\t},\n\t\t\"font\":{\n\t\t\t\"en\":\"Font\",\n\t\t\t\"chn\":\"字体\"\n\t\t},\n\t\t\"fontsize\":{\n\t\t\t\"en\":\"Font Size\",\n\t\t\t\"chn\":\"字号\"\n\t\t},\n\t\t\"compactdegree\":{\n\t\t\t\"en\":\"Compact Level\",\n\t\t\t\"chn\":\"紧凑程度\"\n\t\t},\n\t\t\"compact\":{\n\t\t\t\"en\":\"Compact\",\n\t\t\t\"chn\":\"紧凑\"\n\t\t},\n\t\t\"sparse\":{\n\t\t\t\"en\":\"Sparse\",\n\t\t\t\"chn\":\"稀疏\"\n\t\t},\n\t\t\"eq\":{\n\t\t\t\"en\":\"Equal Interval\",\n\t\t\t\"chn\":\"等间距\"\n\t\t},\n\t\t\"spread\":{\n\t\t\t\"en\":\"Spread\",\n\t\t\t\"chn\":\"展开\"\n\t\t},\n\t\t\"firstl\":{\n\t\t\t\"en\":\"First Layer\",\n\t\t\t\"chn\":\"第一层\"\n\t\t},\n\t\t\"secondl\":{\n\t\t\t\"en\":\"Second Layer\",\n\t\t\t\"chn\":\"第二层\"\n\t\t},\n\t\t\"threel\":{\n\t\t\t\"en\":\"Third Layer\",\n\t\t\t\"chn\":\"第三层\"\n\t\t},\n\t\t\"fourl\":{\n\t\t\t\"en\":\"Fourth Layer\",\n\t\t\t\"chn\":\"第四层\"\n\t\t},\n\t\t\"fifthl\":{\n\t\t\t\"en\":\"Fifth Layer\",\n\t\t\t\"chn\":\"第五层\"\n\t\t},\n\t\t\"localnodes\":{\n\t\t\t\"en\":\"Location Nodes\",\n\t\t\t\"chn\":\"定位节点\"\n\t\t},\n\t\t\"rootnode\":{\n\t\t\t\"en\":\"Root Node\",\n\t\t\t\"chn\":\"根节点\"\n\t\t},\n\t\t\"currentnode\":{\n\t\t\t\"en\":\"Current Nodes\",\n\t\t\t\"chn\":\"当前节点\"\n\t\t},\n\t\t\"displayallnodes\":{\n\t\t\t\"en\":\"Display All Nodes\",\n\t\t\t\"chn\":\"显示所有节点\"\n\t\t},\n\t\t\"return\":{\n\t\t\t\"en\":\"Back\",\n\t\t\t\"chn\":\"返回\"\n\t\t},\n\t\t\"tianpan\":{\n\t\t\t\"en\":\"TianPan\",\n\t\t\t\"chn\":\"天盘\"\n\t\t},\n\t\t\"dipan\":{\n\t\t\t\"en\":\"DiPan\",\n\t\t\t\"chn\":\"地盘\"\n\t\t},\n\t\t\"open\":{\n\t\t\t\"en\":\"Open\",\n\t\t\t\"chn\":\"打开\"\n\t\t},\n\t\t\"saveas\":{\n\t\t\t\"en\":\"Save As\",\n\t\t\t\"chn\":\"另存为\"\n\t\t},\n\t\t\"help\":{\n\t\t\t\"en\":\"Help\",\n\t\t\t\"chn\":\"帮助\"\n\t\t},\n\t\t\"new\":{\n\t\t\t\"en\":\"New\",\n\t\t\t\"chn\":\"新建\"\n\t\t},\n\t\t\"commontemplate\":{\n\t\t\t\"en\":\"Common template\",\n\t\t\t\"chn\":\"常用模板\"\n\t\t},\n\t\t\"openlocalfile\":{\n\t\t\t\"en\":\"Open local file\",\n\t\t\t\"chn\":\"打开本地文件\"\n\t\t},\n\t\t\"importtext\":{\n\t\t\t\"en\":\"Import outline text\",\n\t\t\t\"chn\":\"导入大纲文本\"\n\t\t},\n\t\t\"recentlyfile\":{\n\t\t\t\"en\":\"Recently used files\",\n\t\t\t\"chn\":\"最近使用的文件\"\n\t\t},\n\t\t\"exportdata\":{\n\t\t\t\"en\":\"Export Data\",\n\t\t\t\"chn\":\"另存为txt数据\"\n\t\t},\n\t\t\"exporttext\":{\n\t\t\t\"en\":\"Export Outline Text\",\n\t\t\t\"chn\":\"导出大纲文本\"\n\t\t},\n\t\t\"exportimg\":{\n\t\t\t\"en\":\"Export Pictures\",\n\t\t\t\"chn\":\"导出图片\"\n\t\t},\n\t\t\"websupport\":{\n\t\t\t\"en\":\"Website Support\",\n\t\t\t\"chn\":\"网站支持\"\n\t\t},\n\t\t\"techsupport\":{\n\t\t\t\"en\":\"Technical Support\",\n\t\t\t\"chn\":\"技术支持\"\n\t\t},\n\t\t\"techsupportqq\":{\n\t\t\t\"en\":\"Technical Support to QQ Groups\",\n\t\t\t\"chn\":\"技术支持QQ群\"\n\t\t},\n\t\t\"shortcutkey\":{\n\t\t\t\"en\":\"Shortcut Key\",\n\t\t\t\"chn\":\"快捷键\"\n\t\t},\n\t\t\"addchildnode\":{\n\t\t\t\"en\":\"Add Child\",\n\t\t\t\"chn\":\"增加子节点\"\n\t\t},\n\t\t\"addsibnode\":{\n\t\t\t\"en\":\"Add Sibling\",\n\t\t\t\"chn\":\"增加同级节点\"\n\t\t},\n\t\t\"key\":{\n\t\t\t\"en\":\"Key\",\n\t\t\t\"chn\":\"键\"\n\t\t},\n\t\t\"or\":{\n\t\t\t\"en\":\"Or\",\n\t\t\t\"chn\":\"或\"\n\t\t},\n\t\t\"confirmedittext\":{\n\t\t\t\"en\":\"Confirm the completion of editing text\",\n\t\t\t\"chn\":\"编辑完文字确认\"\n\t\t},\n\t\t\"editnewline\":{\n\t\t\t\"en\":\"Edit text newline\",\n\t\t\t\"chn\":\"编辑文字换行\"\n\t\t},\n\t\t\"canceltextedit\":{\n\t\t\t\"en\":\"Cancel Text Editing\",\n\t\t\t\"chn\":\"取消编辑文字\"\n\t\t},\n\t\t\"activetextedit\":{\n\t\t\t\"en\":\"Activate Text Editing\",\n\t\t\t\"chn\":\"激活编辑文字\"\n\t\t},\n\t\t\"sanpak\":{\n\t\t\t\"en\":\"Select a node and press any key\",\n\t\t\t\"chn\":\"选中节点后按任意字母键\"\n\t\t},\n\t\t\"auxview\":{\n\t\t\t\"en\":\"Auxiliary View\",\n\t\t\t\"chn\":\"辅助查看\"\n\t\t},\n\t\t\"focusselectnode\":{\n\t\t\t\"en\":\"Focus on selected nodes\",\n\t\t\t\"chn\":\"聚焦选中节点\"\n\t\t},\n\t\t\"locateselectednode\":{\n\t\t\t\"en\":\"Locate selected nodes\",\n\t\t\t\"chn\":\"定位选中节点\"\n\t\t},\n\t\t\"locaterootnode\":{\n\t\t\t\"en\":\"Locate Root Nodes\",\n\t\t\t\"chn\":\"定位根节点\"\n\t\t},\n\t\t\"bigcanvas\":{\n\t\t\t\"en\":\"Enlarge Canvas\",\n\t\t\t\"chn\":\"放大画布\"\n\t\t},\n\t\t\"smallcanvas\":{\n\t\t\t\"en\":\"Narrow Canvas\",\n\t\t\t\"chn\":\"缩小画布\"\n\t\t},\n\t\t\"switchnode\":{\n\t\t\t\"en\":\"Switch selected nodes\",\n\t\t\t\"chn\":\"切换选择的节点\"\n\t\t},\n\t\t\"mttnsn\":{\n\t\t\t\"en\":\"Move to the next sibling node\",\n\t\t\t\"chn\":\"移动到下一个同级节点\"\n\t\t},\n\t\t\"mttlsn\":{\n\t\t\t\"en\":\"Move to the last sibling node\",\n\t\t\t\"chn\":\"移动到上一个节点\"\n\t\t},\n\t\t\"mttfsn\":{\n\t\t\t\"en\":\"Move to the first child node\",\n\t\t\t\"chn\":\"移动到第一个节点\"\n\t\t},\n\t\t\"mtfn\":{\n\t\t\t\"en\":\"Move to Father Node\",\n\t\t\t\"chn\":\"移动到父节点\"\n\t\t},\n\t\t\"direckey\":{\n\t\t\t\"en\":\"Direction Key\",\n\t\t\t\"chn\":\"方向键\"\n\t\t},\n\t\t\"servicetd\":{\n\t\t\t\"en\":\"Send Feedback\",\n\t\t\t\"chn\":\"我要给圆转天地提意见\"\n\t\t},\n\t\t\"cbottc\":{\n\t\t\t\"en\":\"Change background of the DiPan\",\n\t\t\t\"chn\":\"更换地盘背景\"\n\t\t},\n\t\t\"rbottc\":{\n\t\t\t\"en\":\"Remove background of the DiPan\",\n\t\t\t\"chn\":\"移除地盘背景\"\n\t\t},\n\t\t\"icn\":{\n\t\t\t\"en\":\"Insert child nodes\",\n\t\t\t\"chn\":\"插入子节点\"\n\t\t},\n\t\t\"addnodepic\":{\n\t\t\t\"en\":\"Add Node Pictures\",\n\t\t\t\"chn\":\"添加节点图片\"\n\t\t},\n\t\t\"removepicture\":{\n\t\t\t\"en\":\"Remove Pictures\",\n\t\t\t\"chn\":\"移除图片\"\n\t\t},\n\t\t\"emptynodetext\":{\n\t\t\t\"en\":\"Empty Node Text\",\n\t\t\t\"chn\":\"清空节点文本\"\n\t\t},\n\t\t\"insertnodetianpan\":{\n\t\t\t\"en\":\"Insert Nodes of TianPan\",\n\t\t\t\"chn\":\"插入天盘节点\"\n\t\t},\n\t\t\"inserttext\":{\n\t\t\t\"en\":\"Insert Text\",\n\t\t\t\"chn\":\"插入文本\"\n\t\t},\n\t\t\"centerpicture\":{\n\t\t\t\"en\":\"Center Pictures\",\n\t\t\t\"chn\":\"居中图片\"\n\t\t},\n\t\t\"ewah\":{\n\t\t\t\"en\":\"Equal Width and Hight\",\n\t\t\t\"chn\":\"等宽高\"\n\t\t},\n\t\t\"bringtofront\":{\n\t\t\t\"en\":\"Bring to Front\",\n\t\t\t\"chn\":\"置于顶层\"\n\t\t},\n\t\t\"bringtobottom\":{\n\t\t\t\"en\":'Bring to Bottom',\n\t\t\t\"chn\":\"置于底层\"\n\t\t},\n\t\t\"bringforward\":{\n\t\t\t\"en\":\"Bring Forward\",\n\t\t\t\"chn\":\"上移一层\"\n\t\t},\n\t\t\"fixnode\":{\n\t\t\t\"en\":\"Fixed Nodes\",\n\t\t\t\"chn\":\"固定节点\"\n\t\t},\n\t\t\"cancelfix\":{\n\t\t\t\"en\":\"Cancel Fixed\",\n\t\t\t\"chn\":\"取消固定\"\n\t\t},\n\t\t//strings:\"Theme Colors,Standard Colors,Web Colors,Theme Colors,Back to Palette,History,No history yet.\"\n\t\t\"themecolor\":{\n\t\t\t\"en\":\"Theme Colors\",\n\t\t\t\"chn\":\"主题颜色\"\n\t\t},\n\t\t\"standardcolor\":{\n\t\t\t\"en\":\"Standard Colors\",\n\t\t\t\"chn\":\"标准颜色\"\n\t\t},\n\t\t\"webcolor\":{\n\t\t\t\"en\":\"Web Colors\",\n\t\t\t\"chn\":\"更多颜色\"\n\t\t},\n\t\t\"backtop\":{\n\t\t\t\"en\":\"Back to Palette\",\n\t\t\t\"chn\":\"返回主题颜色\"\n\t\t},\n\t\t\"history\":{\n\t\t\t\"en\":\"History\",\n\t\t\t\"chn\":\"历史\"\n\t\t},\n\t\t\"nohistory\":{\n\t\t\t\"en\":\"No history yet\",\n\t\t\t\"chn\":\"暂无历史\"\n\t\t},\n\t\t\"week\":{\n\t\t\t\"en\":\"Week\",\n\t\t\t\"chn\":\"最近一周\"\n\t\t},\n\t\t\"Jan\":{\n\t\t\t\"en\":\"January\",\n\t\t\t\"chn\":\"一月\"\n\t\t},\n\t\t\"Feb\":{\n\t\t\t\"en\":\"February\",\n\t\t\t\"chn\":\"二月\"\n\t\t},\n\t\t\"Mar\":{\n\t\t\t\"en\":\"March\",\n\t\t\t\"chn\":\"三月\"\n\t\t},\n\t\t\"Apr\":{\n\t\t\t\"en\":\"April\",\n\t\t\t\"chn\":\"四月\"\n\t\t},\n\t\t\"May\":{\n\t\t\t\"en\":\"May\",\n\t\t\t\"chn\":\"五月\"\n\t\t},\n\t\t\"Jun\":{\n\t\t\t\"en\":\"June\",\n\t\t\t\"chn\":\"六月\"\n\t\t},\n\t\t\"Jul\":{\n\t\t\t\"en\":\"July\",\n\t\t\t\"chn\":\"七月\"\n\t\t},\n\t\t\"Aug\":{\n\t\t\t\"en\":\"August\",\n\t\t\t\"chn\":\"八月\"\n\t\t},\n\t\t\"Sep\":{\n\t\t\t\"en\":\"September\",\n\t\t\t\"chn\":\"九月\"\n\t\t},\n\t\t\"Oct\":{\n\t\t\t\"en\":\"October\",\n\t\t\t\"chn\":\"十月\"\n\t\t},\n\t\t\"Nov\":{\n\t\t\t\"en\":\"November\",\n\t\t\t\"chn\":\"十一月\"\n\t\t},\n\t\t\"Dec\":{\n\t\t\t\"en\":\"December\",\n\t\t\t\"chn\":\"十二月\"\n\t\t},\n\t\t\"insertimg\":{\n\t\t\t\"en\":\"Insert Pictures\",\n\t\t\t\"chn\":\"插入图片\"\n\t\t},\n\t\t\"imglist\":{\n\t\t\t\"en\":\"Pictures list\",\n\t\t\t\"chn\":\"图片列表\"\n\t\t},\n\t\t\"uploadimg\":{\n\t\t\t\"en\":\"Upload Picture\",\n\t\t\t\"chn\":\"上传图片\"\n\t\t},\n\t\t\"katong\":{\n\t\t\t\"en\":\"Cartoon Picture\",\n\t\t\t\"chn\":\"卡通图片\"\n\t\t},\n\t\t\"numbericon\":{\n\t\t\t\"en\":\"Number Icons\",\n\t\t\t\"chn\":\"数字图片\"\n\t\t},\n\t\t\"qipao\":{\n\t\t\t\"en\":\"Bubble\",\n\t\t\t\"chn\":\"气泡\"\n\t\t},\n\t\t\"custompic\":{\n\t\t\t\"en\":\"Custom Picture\",\n\t\t\t\"chn\":\"自定义图片\"\n\t\t},\n\t\t\"picture\":{\n\t\t\t\"en\":\"Picture\",\n\t\t\t\"chn\":\"图片\"\n\t\t},\n\t\t\"cancel\":{\n\t\t\t\"en\":\"Cancel\",\n\t\t\t\"chn\":\"取消\"\n\t\t},\n\t\t\"ok\":{\n\t\t\t\"en\":\"Ok\",\n\t\t\t\"chn\":\"确定\"\n\t\t},\n\t\t\"previewimg\":{\n\t\t\t\"en\":\"Preview Pictures\",\n\t\t\t\"chn\":\"预览图片\"\n\t\t},\n\t\t\"copyimg\":{\n\t\t\t\"en\":\"Copy Picture\",\n\t\t\t\"chn\":\"复制图片\"\n\t\t},\n\t\t\"copyimgsucces\":{\n\t\t\t\"en\":\"Already Copy Picture Into Clipboard\",\n\t\t\t\"chn\":\"成功复制图片到粘贴板\"\n\t\t},\n\t\t\"dragtoupload\":{\n\t\t\t\"en\":\"Drag to Upload Picture\",\n\t\t\t\"chn\":\"拖拽到此处上传\"\n\t\t},\n\t\t\"linkaddress\":{\n\t\t\t\"en\":\"Link Address\",\n\t\t\t\"chn\":\"链接地址\"\n\t\t},\n\t\t\"insertremark\":{\n\t\t\t\"en\":\"Insert Comment\",\n\t\t\t\"chn\":\"插入备注\"\n\t\t},\n\t\t\"insertlink\":{\n\t\t\t'en':\"Insert Link\",\n\t\t\t\"chn\":\"插入链接\"\n\t\t},\n\t\t\"copy\":{\n\t\t\t\"en\":\"copy\",\n\t\t\t\"chn\":\"复制\"\n\t\t},\n\t\t\"picdin\":{\n\t\t\t\"en\":\"Picture definition\",\n\t\t\t\"chn\":\"图片清晰度\"\n\t\t},\n\t\t\"hsacc\":{\n\t\t\t\"en\":\"Hierarchical Subject\",\n\t\t\t\"chn\":\"天盘层级主题\"\n\t\t},\n\t\t\"mtwtb\":{\n\t\t\t\"en\":\"Bold Border Subject\",\n\t\t\t\"chn\":\"天盘白字粗变主题\"\n\t\t},\n\t\t\"officetheme\":{\n\t\t\t\"en\":\"Office Subject\",\n\t\t\t\"chn\":\"Office主题\"\n\t\t},\n\t\t\"lctheme\":{\n\t\t\t\"en\":\"Light-coloured Subject\",\n\t\t\t\"chn\":\"浅色主题\"\n\t\t},\n\t\t\"web2theme\":{\n\t\t\t\"en\":\"web2.0 Subject\",\n\t\t\t\"chn\":\"Web2.0主题\"\n\t\t},\n\t\t\"metrotheme\":{\n\t\t\t\"en\":\"Metro Subject\",\n\t\t\t\"chn\":\"Metro主题\"\n\t\t},\n\t\t\"retrotheme\":{\n\t\t\t\"en\":\"Retro Subject\",\n\t\t\t\"chn\":\"复古主题\"\n\t\t},\n\t\t\"bustheme\":{\n\t\t\t\"en\":\"Business Subject\",\n\t\t\t\"chn\":\"商业主题\"\n\t\t},\n\t\t\"hiet1\":{\n\t\t\t\"en\":\"Hierachy Subject 1\",\n\t\t\t\"chn\":\"层次主题1\"\n\t\t},\n\t\t\"hiet2\":{\n\t\t\t\"en\":\"Hierachy Subject 2\",\n\t\t\t\"chn\":\"层次主题2\"\n\t\t},\n\t\t\"eayth\":{\n\t\t\t\"en\":\"Earlier Version Subject\",\n\t\t\t\"chn\":\"旧版主题\"\n\t\t},\n\t\t\"blankth\":{\n\t\t\t\"en\":\"Pure-black Subject\",\n\t\t\t\"chn\":\"纯黑色主题\"\n\t\t},\n\t\t\"transthe\":{\n\t\t\t\"en\":\"Transparent Subject\",\n\t\t\t\"chn\":\"透明主题\"\n\t\t},\n\t\t\"randomdipan\":{\n\t\t\t\"en\":\"Random Subject of the DiPan\",\n\t\t\t\"chn\":\"随机地盘主题\"\n\t\t},\n\t\t\"radomcolor1\":{\n\t\t\t\"en\":\"Random Colour 1\",\n\t\t\t\"chn\":\"随机色彩1\"\n\t\t},\n\t\t\"radomcolor2\":{\n\t\t\t\"en\":\"Random Colour 1\",\n\t\t\t\"chn\":\"随机色彩2\"\n\t\t},\n\t\t\"mylocalfile\":{\n\t\t\t\"en\":\"My local file\",\n\t\t\t\"chn\":\"我的本地文件\"\n\t\t},\n\t\t\"ut2c\":{\n\t\t\t\"en\":\"Up to 20 characters\",\n\t\t\t\"chn\":\"最多20个字符\"\n\t\t},\n\t\t\"success\":{\n\t\t\t\"en\":\"Success\",\n\t\t\t\"chn\":\"成功\"\n\t\t},\n\t\t\"danger\":{\n\t\t\t\"en\":\"Fail\",\n\t\t\t\"chn\":\"失败\"\n\t\t},\n\t\t\"info\":{\n\t\t\t\"en\":\"Info\",\n\t\t\t\"chn\":\"提示\"\n\t\t},\n\t\t\"strf\":{\n\t\t\t\"en\":\"Save the file in:Menu->Open->Recently used file\",\n\t\t\t\"chn\":\"文件保存在:菜单->打开->最近使用文件中\"\n\t\t},\n\t\t\"netonffline\":{\n\t\t\t\"en\":\"Network is not connected, commonly used template download failed\",\n\t\t\t\"chn\":\"网络未连接，常用模板下载失败\"\n\t\t},\n\t\t\"cantcheckver\":{\n\t\t\t\"en\":\"The network is not connected, the version of the test failed\",\n\t\t\t\"chn\":\"网络未连接，版本检测失败\"\n\t\t},\n\t\t\"spacebar\":{\n\t\t\t\"en\":\"Space bar\",\n\t\t\t\"chn\":\"空格键\"\n\t\t},\n\t\t\"supportmail\":{\n\t\t\t\"en\":\"Support Mail\",\n\t\t\t\"chn\":\"技术支持邮箱\"\n\t\t},\n\t\t\"updatesuccess\":{\n\t\t\t\"en\":\"Update sucess\",\n\t\t\t\"chn\":\"更新成功\"\n\t\t},\n\t\t\"blankText\":{\n\t\t\t\"en\":\"Blank text\",\n\t\t\t\"chn\":\"空白文本\"\n\t\t},\n\n\t  /**simditor\n\t  \t*\n\t  \t**/\n\t  \t'blockquote': {\n\t  \t\t'en':'Block Quote',\n\t  \t\t'chn':'引用'\n\t  \t},\n\t    'bold': {\n\t    \t'en':'Bold',\n\t    \t'chn':'加粗文字'\n\t    },\n\t    'code': {\n\t    \t'en':'Code',\n\t    \t'chn':'插入代码'\n\t    },\n\t    'color': {\n\t    \t'en':'Text Color',\n\t    \t'chn':'文字颜色'\n\t    },\n\t    'coloredText': {\n\t    \t'en':'Colored Text',\n\t    \t'chn':'彩色文字'\n\t    },\n\t    'hr': {\n\t    \t'en':'Horizontal Line',\n\t    \t'chn':'分隔线'\n\t    },\n\t    'image': {\n\t    \t'en':'Insert Image',\n\t    \t'chn':'插入图片'\n\t    },\n\t    'externalImage': {\n\t    \t'en':'External Image',\n\t    \t'chn':'外链图片'\n\t    },\n\t    'uploadImage': {\n\t    \t'en':'Upload Image',\n\t    \t'chn':'上传图片'\n\t    },\n\t    'uploadFailed': {\n\t    \t'en':'Upload failed',\n\t    \t'chn':'上传失败了'\n\t    },\n\t    'uploadError': {\n\t    \t'en':'Error occurs during upload',\n\t    \t'chn':'上传出错了'\n\t    },\n\t    'imageUrl': {\n\t    \t'en':'Url',\n\t    \t'chn':'图片地址'\n\t    },\n\t    'imageSize': {\n\t    \t'en':'Size',\n\t    \t'chn':'图片尺寸'\n\t    },\n\t    'imageAlt': {\n\t    \t'en':'Alt',\n\t    \t'chn':'图片描述'\n\t    },\n\t    'restoreImageSize': {\n\t    \t'en':'Restore Origin Size',\n\t    \t'chn':'还原图片尺寸'\n\t    },\n\t    'uploading': {\n\t    \t'en':'Uploading',\n\t    \t'chn':'正在上传'\n\t    },\n\t    'indent': {\n\t    \t'en':'Indent',\n\t    \t'chn':'向右缩进'\n\t    },\n\t    'outdent': {\n\t    \t'en':'Outdent',\n\t    \t'chn':'向左缩进'\n\t    },\n\t    'italic': {\n\t    \t'en':'Italic',\n\t    \t'chn':'斜体文字'\n\t    },\n\t    'link': {\n\t    \t'en':'Insert Link',\n\t    \t'chn':'插入链接'\n\t    },\n\t    'linkText': {\n\t    \t'en':'Text',\n\t    \t'chn':'链接文字'\n\t    },\n\t    'linkUrl': {\n\t    \t'en':'Url',\n\t    \t'chn':'链接地址'\n\t    },\n\t    'linkTarget': {\n\t    \t'en':'Target',\n\t    \t'chn':'打开方式'\n\t    },\n\t    'openLinkInCurrentWindow': {\n\t    \t'en':'Open link in current window',\n\t    \t'chn':'在新窗口中打开'\n\t    },\n\t    'openLinkInNewWindow': {\n\t    \t'en':'Open link in new window',\n\t    \t'chn':'在当前窗口中打开'\n\t    },\n\t    'removeLink': {\n\t    \t'en':'Remove Link',\n\t    \t'chn':'移除链接'\n\t    },\n\t    'ol': {\n\t    \t'en':'Ordered List',\n\t    \t'chn':'有序列表'\n\t    },\n\t    'ul': {\n\t    \t'en':'Unordered List',\n\t    \t'chn':'无序列表'\n\t    },\n\t    'strikethrough': {\n\t    \t'en':'Strikethrough',\n\t    \t'chn':'删除线文字'\n\t    },\n\t    'table': {\n\t    \t'en':'Table',\n\t    \t'chn':'表格'\n\t    },\n\t    'deleteRow': {\n\t    \t'en':'Delete Row',\n\t    \t'chn':'删除行'\n\t    },\n\t    'insertRowAbove': {\n\t    \t'en':'Insert Row Above',\n\t    \t'chn':'在上面插入行'\n\t    },\n\t    'insertRowBelow': {\n\t    \t'en':'Insert Row Below',\n\t    \t'chn':'在下面插入行'\n\t    },\n\t    'deleteColumn': {\n\t    \t'en':'Delete Column',\n\t    \t'chn':'删除列'\n\t    },\n\t    'insertColumnLeft': {\n\t    \t'en':'Insert Column Left',\n\t    \t'chn':'在左边插入列'\n\t    },\n\t    'insertColumnRight': {\n\t    \t'en':'Insert Column Right',\n\t    \t'chn':'在右边插入列'\n\t    },\n\t    'deleteTable': {\n\t    \t'en':'Delete Table',\n\t    \t'chn':'删除表格'\n\t    },\n\t    'title': {\n\t    \t'en':'Title',\n\t    \t'chn':'标题'\n\t    },\n\t    'normalText': {\n\t    \t'en':'Text',\n\t    \t'chn':'普通文本'\n\t    },\n\t    'underline': {\n\t    \t'en':'Underline',\n\t    \t'chn':'下划线文字'\n\t    },\n\t    'alignment': {\n\t    \t'en':'Alignment',\n\t    \t'chn':'水平对齐'\n\t    },\n\t    'alignCenter': {\n\t    \t'en':'Align Center',\n\t    \t'chn':'居中'\n\t    },\n\t    'alignLeft': {\n\t    \t'en':'Align Left',\n\t    \t'chn':'居左'\n\t    },\n\t    'alignRight': {\n\t    \t'en':'Align Right',\n\t    \t'chn':'居右'\n\t    },\n\t    'selectLanguage': {\n\t    \t'en':'Select Language',\n\t    \t'chn':'选择程序语言'\n\t    },\n\t    'fontScale': {\n\t    \t'en':'Font Size',\n\t    \t'chn':'字体大小'\n\t    },\n\t    'fontScaleXLarge': {\n\t    \t'en':'X Large Size',\n\t    \t'chn':'超大字体'\n\t    },\n\t    'fontScaleLarge': {\n\t    \t'en':'Large Size',\n\t    \t'chn':'大号字体'\n\t    },\n\t    'fontScaleNormal': {\n\t    \t'en':'Normal Size',\n\t    \t'chn':'正常大小'\n\t    },\n\t    'fontScaleSmall': {\n\t    \t'en':'Small Size',\n\t    \t'chn':'小号字体'\n\t    },\n\t    'fontScaleXSmall': {\n\t    \t'en':'X Small Size',\n\t    \t'chn':'超小字体'\n\t    },\n\t    'savesuccess':{\n\t    \t'en':'Save successful',\n\t    \t'chn':'保存成功'\n\t    },\n\t    'failsuccess':{\n\t    \t'en':'Save failed',\n\t    \t'chn':'保存失败'\n\t    },\n\t\t'layoutmode':{\n\t    \t'en':'Layout Mode',\n\t    \t'chn':'布局方式'\n\t\t},\n\t\t'outequaldivid':{\n\t\t\t'en':'Divided by the last layer',\n\t\t\t'chn':'外圈均分'\n\t\t},\n\t\t'innerequaldivid':{\n\t\t\t'en':'Divided by the first layer',\n\t\t\t'chn':'内圈均分'\n\t\t},\n\t\t'givenlayer':{\n\t\t\t'en':'Designate',\n\t\t\t'chn':'指定层均分'\n\t\t},\n\t\t'textdirection':{\n\t\t\t'en':'Text Direction',\n\t\t\t'chn':'文字方向'\n\t\t},\n\t\t'textrotate':{\n\t\t\t'en':'Rotate',\n\t\t\t'chn':'旋转'\n\t\t},\n\t\t'textoutside':{\n\t\t\t'en':'Toward the outside',\n\t\t\t'chn':'放射'\n\t\t},\n\t\t'upwards':{\n\t\t\t'en':'Upwards',\n\t\t\t'chn':'正向'\n\t\t},\n\t\t'sectorthickness':{\n\t\t\t'en':'Sector thickness',\n\t\t\t'chn':'扇区宽度'\n\t\t},\n\t\t'thicknessrange':{\n\t\t\t'en':'Range 100~300',\n\t\t\t'chn':'范围 100~300'\n\t\t},\n\t\t'currentfile':{\n\t\t\t'en':\"Current File\",\n\t\t\t'chn':'编辑中'\n\t\t},\n\t\t'uploadsuccess':{\n\t\t\t'en':'Upload successful',\n\t\t\t'chn':'上传成功'\n\t\t},\n\t\t'deletenodeinfo':{\n\t\t\t'en':'Are you sure to delete the node and its child nodes?',\n\t\t\t'chn':'删除节点会删除它的所有子节点，确实要删除吗？'\n\t\t},\n\t\t'exporttdp':{\n\t\t\t'en':'Save as .tdp shared file',\n\t\t\t'chn':'另存为.tdp共享文件'\n\t\t},\n\t\t\"hypertype\":{\n\t\t\t\"en\":\"Type\",\n\t\t\t\"chn\":\"链接类型\"\n\t\t},\n\t\t\"url\":{\n\t\t\t\"en\":\"URL\",\n\t\t\t\"chn\":\"网址\"\n\t\t},\n\t\t\"localfile\":{\n\t\t\t\"en\":\"Local file\",\n\t\t\t\"chn\":\"本地文件\"\n\t\t},\n\t\t\"tiandipan\":{\n\t\t\t\"en\":\"Tianpan or Dipan\",\n\t\t\t\"chn\":\"天地盘\"\n\t\t},\n\t\t\"link\":{\n\t\t\t\"en\":\"Hyperlink\",\n\t\t\t\"chn\":\"链接\"\n\t\t},\n\t\toutlineeditor:{\n\t\t\ten: \"Outline Editor\",\n\t\t\tchn: \"大纲编辑\"\n\t\t},\n\t\tmodificationbuttons: {\n\t\t\ten: \"Modification Buttons\",\n\t\t\tchn: \"修改按钮\"\n\t\t},\n\t\tbrowsingbuttons: {\n\t\t\ten: \"Browsing Buttons\",\n\t\t\tchn: \"浏览按钮\"\n\t\t},\n\t\tshow: {\n\t\t\ten: \"Show\",\n\t\t\tchn: \"显示\"\n\t\t},\n\t\thide: {\n\t\t\ten: \"Hide\",\n\t\t\tchn:\"隐藏\"\n\t\t},\n\t\tnewnode: {\n\t\t\ten: \"New Node\",\n\t\t\tchn: \"新节点\"\n\t\t},\n\t\tmoveupnode: {\n\t\t\ten: \"Move up\",\n\t\t\tchn: \"上移节点\"\n\t\t},\n\t\tmovedownnode: {\n\t\t\ten: \"Move down\",\n\t\t\tchn: \"下移节点\"\n\t\t},\n\t\tremovenode: {\n\t\t\ten: \"Remove\",\n\t\t\tchn: \"删除节点\"\n\t\t},\n\t\teditnode: {\n\t\t\ten: \"Edit Node\",\n\t\t\tchn: \"编辑节点\"\n\t\t},\n\t\tprevnode: {\n\t\t\ten: \"Select Previous\",\n\t\t\tchn: \"上一个节点\"\n\t\t},\n\t\tnextnode: {\n\t\t\ten: \"Select Next\",\n\t\t\tchn: \"下一个节点\"\n\t\t},\n\t\texpandnode: {\n\t\t\ten: \"Expand\",\n\t\t\tchn: \"展开节点\"\n\t\t},\n\t\tcollapsenode: {\n\t\t\ten: \"Collapse\",\n\t\t\tchn: \"折叠节点\"\n\t\t},\n\t\texpandall: {\n\t\t\ten: \"Expand All\",\n\t\t\tchn: \"全部展开\"\n\t\t},\n\t\tcollapseall: {\n\t\t\ten: \"Collapse All\",\n\t\t\tchn: \"全部折叠\"\n\t\t},\n\t\tpreview: {\n\t\t\ten: \"Preview\",\n\t\t\tchn: \"预览\"\n\t\t},\n\t\tcancel: {\n\t\t\ten: \"Cancel\",\n\t\t\tchn: \"取消\"\n\t\t},\n\t\tapply: {\n\t\t\ten: \"Apply\",\n\t\t\tchn: \"应用\"\n\t\t},\n\t\t'openpreviewimg':{\n\t\t\t'en':'Preview image is loading',\n\t\t\t'chn':'正在打开预览图片'\n\t\t},\n\t\t'tempnodetips':{\n\t\t\t'en':'This is a temp node',\n\t\t\t'chn':'这是临时节点'\n\t\t},\n\t\tbuildtdp:{\n\t\t\ten:'Build .tdp shared file',\n\t\t\tchn:'生成.tdp文件下载'\n        },\n\t\t'deleteconfirm':{\n\t\t\ten:'Are you sure to clear all the nodes?',\n\t\t\tchn:'确定要清空节点？'\n\t\t},\n\t\t\"selecttargertnode\": {\n\t\t\ten: \"Select Target Node\",\n\t\t\tcn: \"请选择目标节点\"\n\t\t},\n\t\t\"link2web\": {\n\t\t\ten: \"Link to Webpage\",\n\t\t\tcn: \"链接网页\"\n\t\t},\n\t\t\"link2node\": {\n\t\t\ten: \"Link to Node\",\n\t\t\tcn: \"链接节点\"\n\t\t},\n\t\t\"removelink\": {\n\t\t\ten: \"Remove Link\",\n\t\t\tcn: \"移除节点\"\n\t\t},\n\t\t\"addtemp\": {\n\t\t\ten: \"Add Template\",\n\t\t\tcn: \"添加模板\"\n\t\t},\n\t\tbuildtdp:{\n\t\t\ten:'Build .tdp shared file',\n\t\t\tchn:'生成.tdp文件下载'\n        },\n\t\t'deleteconfirm':{\n\t\t\ten:'Are you sure to clear all the nodes?',\n\t\t\tchn:'确定要清空节点？'\n        },\n\t\tsuccess:{\n        \ten:'Success',\n        \tchn:\"成功\"\n        },\n\t\twarning:{\n        \ten:'Warning',\n        \tchn:'警告'\n        },\n\t\terror:{\n        \ten:'Failed',\n        \tchn:'失败'\n\t\t},\n\t\t\t\t\"unsupportfile\": {\n\t\t\ten: \"Unsupported File!\",\n\t\t\tcn: \"不支持该导入文件\"\n\t\t}\n\t}\n\tvar trans = function(key){\n\t\treturn localization[key] ? (localization[key][localStorage.getItem(\"language\")] ? localization[key][localStorage.getItem(\"language\")] :localization[key]['chn']) : key;\n\t};\n\nmodule.exports = {trans:trans};\n\n\n// WEBPACK FOOTER //\n// ./src/assets/localization.js","'use strict';\n\nlet typeModules = {};\n\ntypeModules['tianpan'] = require(`./diagram/tianpan`)\ntypeModules['dipan'] = require(`./diagram/dipan`)\ntypeModules['jin'] = require(`./diagram/jin`)\ntypeModules['huo'] = require(`./diagram/huo`)\ntypeModules['shui'] = require(`./diagram/shui`)\ntypeModules['yunpan'] = require(`./diagram/yunpan`)\ntypeModules['wheel'] = require(`./diagram/wheel`)\ntypeModules['dspiral'] = require(`./diagram/dspiral`)\n// typeModules['yunpanhome'] = require(`./diagram/yunpanhome`)\n\n\nif(IS_PROD){\n    console.log(\"生产环境屏蔽调试日志\")\n    console.log   = function(){\n        \n    }\n}\n// console.error   = function(...messages){\n//     logger.error(`${JSON.stringify(messages)}`)\n// }\n\nclass Trtd {\n\tconstructor(div, config){\n\n\t\ttry{\n            if(config.model){\n                var tmpModel = go.Model.fromJson(config.model);\n                if(tmpModel && tmpModel.modelData && tmpModel.modelData.type){\n                    config.type = tmpModel.modelData.type\n                }\n            }\n        }catch(e){\n            console.error(e)\n        }\n\t\tconsole.log(\"type:\",config.type)\n\t\tvar trtdClass = typeModules[config.type]\n\t\treturn new trtdClass(div, config);\n\t}\n}\n\nTrtd.go = go;\n/*eslint-disable no-undef */\nTrtd.version = TRTD_VERSION\n/*eslint-enable no-undef */\nconsole.info(`Trtd version:${Trtd.version}`)\nif (typeof window !== 'undefined') {\n\twindow.Trtd = Trtd;\n}\n\n// export default Trtd;\nmodule.exports = Trtd\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","// \n\nvar $ = go.GraphObject.make;\nvar Base = require('./base')\nvar helpers = require('../helpers/helpers.gojs')\n\n\n// this is a Part.dragComputation function for limiting where a Node may be dragged\nfunction stayInGroup(part, pt, gridpt) {\n    // don't constrain top-level nodes\n    var grp = part.containingGroup;\n    if (grp === null) return pt;\n    // try to stay within the background Shape of the Group\n    var back = grp.resizeObject;\n    if (back === null) return pt;\n    // allow dragging a Node out of a Group if the Shift key is down\n    if (part.diagram.lastInput.shift) return pt;\n    var p1 = back.getDocumentPoint(go.Spot.TopLeft);\n    var p2 = back.getDocumentPoint(go.Spot.BottomRight);\n    var b = part.actualBounds;\n    var loc = part.location;\n    // find the padding inside the group's placeholder that is around the member parts\n    // var m = grp.placeholder.padding;\n    // now limit the location appropriately\n    var x = Math.max(p1.x, Math.min(pt.x, p2.x - b.width - 1)) + (loc.x - b.x);\n    var y = Math.max(p1.y, Math.min(pt.y, p2.y - b.height - 1)) + (loc.y - b.y);\n    return new go.Point(x, y);\n}\n\n\nclass WaveNodeTemplate extends Base {\n    constructor(options) {\n        super(options)\n        // this.nodeProperties = {}\n\n    }\n\n    makeGeo(data, shape, options) {\n        // this is much more efficient than calling go.GraphObject.make:\n        var {radiusX = 150, radiusY = 100} = data\n        radiusX = shape.part.findObject(\"main\").width / 2\n        radiusY = shape.part.findObject(\"main\").height / 2\n        // console.log(\"makeGeo999999999999999999999999999\",radiusX,radiusY)\n        var geo = new go.Geometry()\n            .add(new go.PathFigure(0, 0)  // start point\n                .add(new go.PathSegment(go.PathSegment.SvgArc,\n                    radiusX * 2, 0, radiusX, radiusY, 0, 1, options.clockwiseFlag ? 1 : 0\n                    )\n                )\n            )\n        geo.defaultStretch = go.GraphObject.Fill;\n        return geo;\n    }\n\n    makeGeoWave(data, shape, options) {\n        // this is much more efficient than calling go.GraphObject.make:\n        var {radiusX = 150, radiusY = 100} = data\n        radiusX = shape.part.findObject(\"main\").width / 2\n        radiusY = shape.part.findObject(\"main\").height / 2\n        // console.log(\"makeGeo999999999999999999999999999\",radiusX,radiusY)\n        var seg = new go.PathSegment(go.PathSegment.QuadraticBezier,\n            radiusX * 2, 0, //describe the end point\n            radiusX, radiusY * (options.clockwiseFlag ? -1 : 1), // describe the only control point\n            // radiusX*2,0,radiusX, radiusY,0,1,options.clockwiseFlag?1:0\n        )\n\n        if (data.role == \"waveTail\") {\n\n\n            seg = new go.PathSegment(go.PathSegment.QuadraticBezier,\n                radiusX, radiusY * (options.clockwiseFlag ? -1 : 1), //describe the end point\n                radiusX / 2, radiusY * (options.clockwiseFlag ? -1 : 1), // describe the only control point\n                // radiusX*2,0,radiusX, radiusY,0,1,options.clockwiseFlag?1:0\n            )\n\n            // seg = new go.PathSegment(go.PathSegment.Bezier,\n            //   radiusX, radiusY*(options.clockwiseFlag?-1:1), //describe the end point\n            //   x1, y1 ,//describe the first control point\n            //   x2, y2, // describe the second control point\n            //   radiusX, radiusY*(options.clockwiseFlag?-1:1), // describe the only control point\n            // // radiusX*2,0,radiusX, radiusY,0,1,options.clockwiseFlag?1:0\n            //     )\n        }\n\n        // seg.endX = radiusX\n        // seg.endY = 0\n        var geo = new go.Geometry()\n            .add(new go.PathFigure(0, 0)  // start point\n                .add(seg)\n            )\n        geo.defaultStretch = go.GraphObject.None;\n        return geo;\n    }\n\n    getShiHalfEllipseShape() {\n        return $(go.Shape, {\n                name: \"XU\",\n                strokeWidth: 2,\n                stroke: \"#cb1c27\", fill: \"rgba(0,66,0,0)\",\n                // background: \"yellow\",\n                stretch: go.GraphObject.Uniform,\n                alignment: go.Spot.Bottom,\n                alignmentFocus: go.Spot.Bottom,\n                // row:1, column:0,margin:0\n\n            },\n            // new go.Binding(\"alignment\",\"\",function(data, shape){\n            //   if(data.flip){\n            //     return go.Spot.Top\n            //   }\n            //   return go.Spot.Bottom\n            // }),\n            // new go.Binding(\"alignmentFocus\",\"\",function(data, shape){\n            //   if(data.flip){\n            //     return go.Spot.Top\n            //   }\n            //   return go.Spot.Bottom\n            // }),\n            new go.Binding(\"geometry\", \"\", (data, shape) => {\n                var clockwiseFlag = 0;\n                if (data.order % 2 == 0) {\n                    clockwiseFlag = 1;\n                }\n                if (data.flip) {\n                    // clockwiseFlag = 1;\n                }\n                // console.log(`data.oliveType: ${data.oliveType}`)\n                if (data.oliveType == \"Ellipse\") {\n                    // console.log(``)\n                    return this.makeGeo(data, shape, {clockwiseFlag: clockwiseFlag})\n                }\n                return this.makeGeoWave(data, shape, {clockwiseFlag: clockwiseFlag})\n            }),\n            new go.Binding(\"stroke\", \"shiStroke\").makeTwoWay(),\n            new go.Binding(\"strokeWidth\", \"shiStrokeWidth\").makeTwoWay(),\n            // new go.Binding(\"strokeDashArray\", \"shiStrokeDashArray\").makeTwoWay(),\n            new go.Binding(\"strokeDashArray\", \"shiStrokeDashArray\", function (v) {\n                return JSON.parse(v)\n            }).makeTwoWay(function (v) {\n                return JSON.stringify(v)\n            }),\n            new go.Binding(\"desiredSize\", \"desiredSize\", function (v) {\n                var size = new go.Size(v.width, v.height / 2)\n                // console.log(\"v:\",v)\n                return size\n            }).ofObject(\"main\")\n        )\n    }\n\n    getXuHalfEllipseShape() {\n        return $(go.Shape, {\n                name: \"SHI\",\n                strokeWidth: 2,\n                stroke: \"#0e399d\", fill: \"rgba(0,66,0,0)\",\n                // background: \"gray\",\n                stretch: go.GraphObject.Uniform,\n                alignment: go.Spot.Bottom,\n                strokeDashArray: [10, 5],\n                alignmentFocus: go.Spot.Bottom,\n                // row:1, column:0,margin:0\n            },\n            // new go.Binding(\"alignment\",\"\",function(data, shape){\n            //   if(data.flip){\n            //     return go.Spot.Top\n            //   }\n            //   return go.Spot.Bottom\n            // }),\n            // new go.Binding(\"alignmentFocus\",\"\",function(data, shape){\n            //   if(data.flip){\n            //     return go.Spot.Top\n            //   }\n            //   return go.Spot.Bottom\n            // }),\n            new go.Binding(\"geometry\", \"\", (data, shape) => {\n                var clockwiseFlag = 1;\n                if (data.order % 2 == 0) {\n                    clockwiseFlag = 0;\n                }\n                // if(data.flip){\n                //   clockwiseFlag = 0;\n                // }\n                // console.log(`data.oliveType1: ${data.oliveType}`)\n                if (data.oliveType == \"Ellipse\") {\n                    // console.log(`data.oliveType2: ${data.oliveType}`)\n                    return this.makeGeo(data, shape, {clockwiseFlag: clockwiseFlag})\n                }\n                // console.log(`data.oliveType3: ${data.oliveType}`)\n                return this.makeGeoWave(data, shape, {clockwiseFlag: clockwiseFlag})\n            }),\n            new go.Binding(\"stroke\", \"xuStroke\").makeTwoWay(),\n            new go.Binding(\"strokeWidth\", \"xuStrokeWidth\").makeTwoWay(),\n            // new go.Binding(\"strokeDashArray\", \"xuStrokeDashArray\").makeTwoWay(),\n            new go.Binding(\"strokeDashArray\", \"xuStrokeDashArray\", function (v) {\n                return JSON.parse(v)\n            }).makeTwoWay(function (v) {\n                return JSON.stringify(v)\n            }),\n            new go.Binding(\"desiredSize\", \"desiredSize\", function (v) {\n                var size = new go.Size(v.width, v.height / 2)\n                // console.log(\"v:\",v)\n                return size\n            }).ofObject(\"main\")\n        )\n    }\n\n    getTailShiShape() {\n        return $(go.Shape, {\n                name: \"XU\",\n                strokeWidth: 2,\n                stroke: \"#cb1c27\", fill: \"rgba(0,66,0,0)\",\n                // background: \"yellow\",\n                stretch: go.GraphObject.None,\n                alignment: go.Spot.Bottom,\n                alignmentFocus: go.Spot.Bottom,\n                // row:1, column:0,margin:0\n            },\n            // new go.Binding(\"alignment\",\"\",function(data, shape){\n            //   if(data.flip){\n            //     return go.Spot.Top\n            //   }\n            //   return go.Spot.Bottom\n            // }),\n            // new go.Binding(\"alignmentFocus\",\"\",function(data, shape){\n            //   if(data.flip){\n            //     return go.Spot.Top\n            //   }\n            //   return go.Spot.Bottom\n            // }),\n            new go.Binding(\"geometry\", \"\", (data, shape) => {\n                var clockwiseFlag = 0;\n                if (data.order % 2 == 0) {\n                    clockwiseFlag = 1;\n                }\n                if (data.flip) {\n                    // clockwiseFlag = 1;\n                }\n\n                return this.makeGeoWave(data, shape, {clockwiseFlag: !clockwiseFlag})\n            }),\n            new go.Binding(\"stroke\", \"shiStroke\").makeTwoWay(),\n\n            new go.Binding(\"desiredSize\", \"desiredSize\", function (v) {\n                var size = new go.Size(v.width, v.height / 2)\n                // console.log(\"v:\",v)\n                return size\n            }).ofObject(\"main\")\n        )\n    }\n\n    getTailXuShape() {\n        return $(go.Shape, {\n                name: \"TailXu\",\n                strokeWidth: 2,\n                stroke: \"#0e399d\", fill: \"rgba(0,66,0,0)\",\n                // background: \"gray\",\n                stretch: go.GraphObject.None,\n                alignment: go.Spot.Bottom,\n                strokeDashArray: [10, 5],\n                alignmentFocus: go.Spot.Bottom,\n                // row:1, column:0,margin:0\n            },\n            // new go.Binding(\"alignment\",\"\",function(data, shape){\n            //   if(data.flip){\n            //     return go.Spot.Top\n            //   }\n            //   return go.Spot.Bottom\n            // }),\n            // new go.Binding(\"alignmentFocus\",\"\",function(data, shape){\n            //   if(data.flip){\n            //     return go.Spot.Top\n            //   }\n            //   return go.Spot.Bottom\n            // }),\n            new go.Binding(\"geometry\", \"\", (data, shape) => {\n                var clockwiseFlag = 1;\n                if (data.order % 2 == 0) {\n                    clockwiseFlag = 0;\n                }\n                // if(data.flip){\n                //   clockwiseFlag = 0;\n                // }\n                return this.makeGeoWave(data, shape, {clockwiseFlag: !clockwiseFlag})\n            }),\n            new go.Binding(\"desiredSize\", \"desiredSize\", function (v) {\n                var size = new go.Size(v.width, v.height / 2)\n                // console.log(\"v:\",v)\n                return size\n            }).ofObject(\"main\")\n        )\n    }\n\n    getTextBuild() {\n        return $(go.TextBlock, {\n                name: \"TEXT\",\n                alignment: new go.Spot(0.5, 0.4),\n                font: \"18px 'Microsoft YaHei'\",\n                editable: false,\n                // flip:go.GraphObject.FlipHorizontal,\n                //margin: 3, editable: true,\n                // background: \"gray\",\n                angle: 0,\n                stroke: \"black\",\n                isMultiline: true,\n                textEdited: function (textBlock, oldv, newv) {\n\n                    // if(textBlock.part.containingGroup.data.textAngle == \"horizontal\"){\n                    var centerText = textBlock.part.diagram.model.findNodeDataForKey(textBlock.part.data.centerText)\n                    if (centerText) {\n                        console.log(\"centerTextcenterTextcenterTextcenterText\")\n                        textBlock.part.diagram.model.startTransaction(\"text\")\n                        textBlock.part.diagram.model.setDataProperty(centerText, \"text\", newv)\n                        textBlock.part.diagram.model.commitTransaction(\"text\")\n                    }\n                    //   return;\n                    // }\n                    setTimeout(function () {\n                        console.log(\"textEditedtextEditedtextEdited\", textBlock.lineCount)\n                        if (!textBlock.text) return;\n                        if (textBlock.text && textBlock.text.trim() == \"\") return;\n                        if (textBlock.lineCount % 2 != 0) {\n                            if (newv[newv.length - 1] == \"\\n\") {\n                                textBlock.text = newv.substring(0, newv.length - 1)\n                                return;\n                            }\n                            textBlock.text = newv + \"\\n\"\n                        }\n                    }, 100)\n\n                    var enterCount = 0;\n                    textBlock.part.containingGroup.layout.isValidLayout = false\n                    // for(var i=0;i<newv.length;i++){\n\n                    // }\n                    // textBlock.part.updateTargetBindings()\n\n                    // if(textBlock.lineCount %2 != 0){\n                    //   if(newv[newv.length-1] == \"\\n\"){\n                    //     textBlock.text = newv.substring(0, newv.length-1)\n                    //     return;\n                    //   }\n                    //   textBlock.text = newv+\"\\n\"\n                    // }\n                },\n                overflow: go.TextBlock.OverflowClip,\n                wrap: go.TextBlock.WrapDesiredSize,\n                textAlign: \"center\",\n                spacingAbove: 4,\n                spacingBelow: 4,\n                portId: \"TEXT\",\n                stretch: go.GraphObject.Uniform\n            },\n            new go.Binding(\"visible\", \"textVisible\").makeTwoWay(),\n            new go.Binding(\"alignment\", \"\", function (v, textBlock) {\n                // console.log('textBlock', textBlock.lineCount)\n                // if(textBlock.lineCount%2 == 0){\n                //   return new go.Spot(0.5,0.5)\n                // }\n                return new go.Spot(0.5, 0.5)\n            }),\n            new go.Binding(\"textAlign\", \"textAlign\", function (v) {\n                // return ['start', 'center', 'end'].indexOf(v)>-1 ? v : \"center\";\n                return v;\n            }).makeTwoWay(),\n            new go.Binding(\"spacingAbove\", \"spacingline\", function (v) {\n                return helpers.tdTransToNum(v, 4);\n            }).makeTwoWay(),\n            new go.Binding(\"spacingBelow\", \"spacingline\", function (v) {\n                return helpers.tdTransToNum(v, 4);\n            }).makeTwoWay(),\n            new go.Binding(\"width\", \"width\", function (v) {\n                return v - 30;\n            }).ofObject(\"main\"),\n            // new go.Binding(\"height\", \"height\", function (v) {\n            //   return v;\n            // }).ofObject(\"SHAPE\"),\n            new go.Binding(\"text\", \"text\", function (text, d) {\n                // console.log(\"d.lineCount,d.lineCountd.lineCount\",text,d.lineCount)\n                // setTimeout(function(){\n                //   if(d && d.lineCount!=null && d.lineCount%2 != 0){\n                //     if(text && text[text.length-1] != \"\\n\"){\n                //       d.text+=\"\\n\"\n                //     }\n                //   }\n                // },100)\n                // setTimeout(function(){\n                //   try{\n                //     console.log(\"check overflow\")\n                //     if(!d.text) return;\n                //     if(d.text && d.text.trim() == \"\") return;\n                //     if(d.lineCount %2 != 0){\n                //       if(d.text[d.text.length-1] == \"\\n\"){\n                //         d.text = d.text.substring(0, d.text.length-1)\n                //         return;\n                //       }\n                //       d.text = d.text+\"\\n\"\n                //     }\n                //     // if(d && d.lineCount!=null && d.lineCount%2 != 0){\n                //     //   if(d.text && d.text[d.text.length-1] != \"\\n\"){\n                //     //     d.text+=\"\\n\"\n                //     //   }\n                //     // }\n                //   }catch(e){\n                //     console.error(e)\n                //   }\n                // },100)\n                return text\n                // console.log(\"sdfsdfsdfsdfsdfdsfdsfsd\")\n                console.log(text, \":\", d.lineCount)\n                if (d.lineCount % 2 != 0) {\n                    return text + \"\\n\"\n                } else {\n                    return text\n                }\n            }).makeTwoWay(function (text, d) {\n                console.log(\"text write write\", d.lineCount)\n                return text\n                if (d.lineCount % 2 != 0) {\n                    return text + \"\\n\"\n                } else {\n                    return text\n                }\n            }),\n            new go.Binding(\"stroke\", \"textStroke\").makeTwoWay(),\n            new go.Binding(\"font\", \"font\").makeTwoWay()\n        )\n    }\n\n    getNodeSelectionAdornmentTemplate() {\n        return $(go.Adornment, \"Spot\",\n            {\n                // isShadowed: true,\n            },\n            $(go.Panel, \"Auto\",\n                $(go.Shape, {\n                        isPanelMain: true,\n                        fill: null,\n                        stroke: \"dodgerblue\", strokeWidth: 3\n                    },\n                    // new go.Binding(\"fill\",\"\",function(e,obj){\n                    //   var radBrush = $(go.Brush, \"Radial\", { 0: \"rgba(248,248,242,0)\", 1: 'RGB(255,242,0)' });\n                    //   return radBrush;\n                    // })\n                    //\n                ),\n                $(go.Placeholder) // this represents the selected Node\n\n            ),\n\n\n            // ),\n            // the button to create a \"next\" node, at the top-right corner\n            $(\"CircleButton\", {\n                    name: \"AddChild\",\n                    toolTip: $(go.Adornment, \"Auto\",\n                        $(go.Shape, {fill: \"#FFFFCC\"}),\n                        $(go.TextBlock, {textAlign: 'center', margin: new go.Margin(8, 4, 4, 4)}, // the tooltip shows the result of calling nodeInfo(data)\n                            new go.Binding(\"text\", \"\", function (d) {\n                                return \"增加橄榄\";\n                            }))\n                    ),\n                    alignment: go.Spot.Right,\n                    alignmentFocus: go.Spot.Left,\n                    width: 50,\n                    height: 50,\n                    click: function (e) {\n                        e.diagram.__trtd.addOlive()\n                    } // this function is defined below\n                },\n                $(go.Shape, \"PlusLine\", {stroke: '#770077', desiredSize: new go.Size(25, 25)})\n            ),\n            $(\"CircleButton\", {\n                    name: \"RemoveChild\",\n                    toolTip: $(go.Adornment, \"Auto\",\n                        $(go.Shape, {fill: \"#FFFFCC\"}),\n                        $(go.TextBlock, {textAlign: 'center', margin: new go.Margin(8, 4, 4, 4)}, // the tooltip shows the result of calling nodeInfo(data)\n                            new go.Binding(\"text\", \"\", function (d) {\n                                return \"删除橄榄\";\n                            }))\n                    ),\n                    alignment: go.Spot.Left,\n                    alignmentFocus: go.Spot.Right,\n                    width: 50,\n                    height: 50,\n                    click: function (e) {\n                        e.diagram.__trtd.deleteSelection()\n                    } // this function is defined below\n                },\n                $(go.Shape, \"MinusLine\", {stroke: '#770077', desiredSize: new go.Size(25, 25)})\n            ),\n            $(\"Button\", {\n                    name: \"AddLevel\",\n                    toolTip: $(go.Adornment, \"Auto\",\n                        $(go.Shape, {fill: \"#FFFFCC\"}),\n                        $(go.TextBlock, {textAlign: 'center', margin: new go.Margin(8, 4, 4, 4)}, // the tooltip shows the result of calling nodeInfo(data)\n                            new go.Binding(\"text\", \"\", function (d) {\n                                return \"增加同级节点\";\n                            }))\n                    ),\n                    alignment: new go.Spot(1, 0.5, 15, 0),\n                    width: 30,\n                    height: 30,\n                    click: function (e) {\n                        e.diagram.__trtd.addOlive()\n                    } // this function is defined below\n                },\n                $(go.Shape, \"PlusLine\", {stroke: \"#227700\", desiredSize: new go.Size(15, 15)}),\n                new go.Binding(\"visible\", \"level\", function (level) {\n                    return level != 0; // hidden this button if current node is root node\n\n                })\n            ),\n            // $(go.Panel, \"Auto\", {        // 放大镜\n            //         name: \"ButtonIcon1\",\n            //         alignment: new go.Spot(0, 1, 5, -5),\n            //         //alignment: go.Spot.BottomLeft,\n            //         //alignmentFocus: go.Spot.BottomLeft,\n            //         width: 60,\n            //         height: 60,\n            //         isActionable: true,\n            //         click: expandCollapse // this function is defined below\n            //     },\n\n            //     $(go.Shape, \"Circle\", {\n            //         fill: \"rgba(1,1,1,0)\",\n            //         strokeWidth: 0,\n            //         stroke: \"green\",\n            //         width: 50,\n            //         height: 50\n            //     }),\n            //     $(go.Shape, {\n            //             '_para1': true,\n            //             name: \"ButtonIcon\",\n            //             fill: \"red\",\n            //             strokeWidth: 2,\n            //             stroke: \"#767678\",\n            //             geometryString: icons[\"zoomout\"], // default value for isTreeExpanded is true\n            //             desiredSize: new go.Size(30, 30)\n            //         },\n            //         new go.Binding(\"geometryString\", \"\", function(d, button) {\n            //             // console.log('dddddd:', d);\n            //             // console.log('button:', button);\n            //             // var myDiagram = d.diagram;\n            //             // var node = myDiagram.selection.first();\n            //             // if (node[\"_controlExpand\"]) {\n            //             //     return icons[\"zoomout\"];\n            //             // } else {\n            //             //     return icons[\"zoomin\"];\n            //             // }\n            //             return icons[\"zoomin\"];\n            //         })\n            //     )\n            // )\n        );\n    }\n\n    nodeResizeAdornmentTemplate() {\n        return $(go.Adornment, \"Spot\",\n            $(go.Placeholder), // takes size and position of adorned object\n            // $(go.Shape, \"Circle\", // left resize handle\n            //     {\n            //         alignment: go.Spot.TopLeft,\n            //         alignmentFocus: go.Spot.BottomRight,\n            //         cursor: \"col-resize\",\n            //         desiredSize: new go.Size(30, 30),\n            //         fill: \"lightblue\",\n            //         stroke: \"dodgerblue\"\n            //     }),\n            $(go.Shape, \"Circle\", // right resize handle\n                {\n                    alignment: go.Spot.BottomRight,\n                    alignmentFocus: go.Spot.TopLeft,\n                    cursor: \"col-resize\",\n                    desiredSize: new go.Size(30, 30),\n                    fill: \"lightblue\",\n                    stroke: \"dodgerblue\"\n                })\n        )\n    }\n\n\n    getNodeTemplate() {\n        var diagram = this.diagram\n        var that = this;\n        return $(go.Node, \"Spot\", {\n                // isClipping: true,\n                __trtdNode: that,\n                layerName: \"overflow\",\n                zOrder: 5,\n                // copyable: false,\n                // dragComputation: stayInGroup,\n                movable: true,\n                resizable: false,\n                // locationObjectName: \"main\",\n                resizeObjectName: \"main\",\n                selectionObjectName: \"main\",\n                rotatable: false,\n                resizeAdornmentTemplate: that.nodeResizeAdornmentTemplate(),\n                layoutConditions: ~go.Part.LayoutStandard & go.Part.LayoutRemoved & go.Part.LayoutAdded & go.Part.LayoutNodeSized,\n                locationSpot: go.Spot.LeftCenter,\n                // toolTip:  // define a tooltip for each node that displays the color as text\n                // $(go.Adornment, \"Spot\",\n                //   $(go.TextBlock, { margin: 4 },\n                //     new go.Binding(\"text\", \"\", function(data,p){\n                //       // console.log(\"tooltip:\",p,data)\n                //       var tips = [\"双击编辑文字\",\"尝试按方向键快捷移动到下一个对象\",\"按回车键增加橄榄\"]\n                //       var isPhone = helpers.checkPhone()\n                //       if(isPhone){\n                //         return \"\"\n                //       }\n                //       var elt = Math.floor(tips.length * Math.random())\n                //       return tips[elt]\n                //     })\n                //   )\n                // ),  // end of Adornment\n                click: (e, node) => {\n                    console.log(node.data)\n                    if (!node.containingGroup) return;\n                    var it = node.containingGroup.findSubGraphParts().iterator;\n                    while (it.next()) {\n                        var n = it.value;\n                        if (n.data.category == \"autoText\" && (n.data.role == \"xuText\" || n.data.role == \"shiText\")) {\n                            if (n.data.order == node.data.order) {\n                                // locateNode = n;\n                                if (n.data.text == \"\" || n.data.text.trim() == \"\") {\n                                    n.findObject(\"textBorder\").visible = true;\n                                }\n                                //   n.areaBackground = \"mediumslateblue\"\n                            } else {\n                                n.findObject(\"textBorder\").visible = false;\n                            }\n                        }\n                    }\n                },\n                mouseOver: function (e, node) {\n                    // if(node.data.hyperlink){\n                    //   var textObj = node.findObject('TEXT');\n                    //   textObj.isUnderline = true;\n                    // }\n                    if (!node.containingGroup) return;\n                    // var it = node.containingGroup.findSubGraphParts().iterator;\n                    // while (it.next()) {\n                    //     var n = it.value;\n                    //     if(n.data.category == \"autoText\"){\n                    //         if(n.data.order == node.data.order){\n                    //             // locateNode = n;\n                    //             if(n.data.text == \"\" || n.data.text.trim() == \"\"){\n                    //               n.findObject(\"textBorder\").visible = true;\n                    //             }\n                    //           //   n.areaBackground = \"mediumslateblue\"\n                    //         }\n                    //     }\n                    // }\n\n                    var shiText = node.diagram.findNodeForKey(node.data.shiText)\n                    if (shiText) {\n                        shiText.findObject(\"textBorder\").visible = true;\n                    }\n                    var xuText = node.diagram.findNodeForKey(node.data.xuText)\n                    if (xuText) {\n                        xuText.findObject(\"textBorder\").visible = true;\n                    }\n                    var centerText = node.diagram.findNodeForKey(node.data.centerText)\n                    if (centerText) {\n                        centerText.layerName = \"Background\"\n                    }\n\n                    // diagram.__trtd.showNodeRemarkTips(e, node);\n                },\n                contextMenu: $(go.Adornment),\n\n                mouseDragEnter: function (e, obj) {\n                    var node = obj.part;\n                    var selnode = e.diagram.selection.first();\n\n                    // 常变\n                    if (selnode.data.category != \"wave\" && !(selnode.data.category == \"picGroup\" && selnode.data.role == \"cbian\")) {\n                        return;\n                    }\n                    var centerText = node.diagram.findNodeForKey(node.data.centerText)\n                    if (centerText) {\n                        centerText.layerName = \"Background\"\n                    }\n                    //var sat = node.selectionAdornmentTemplate;\n                    //var adorn = sat.copy();\n                    //adorn.adornedObject = node;\n                    //node.addAdornment(\"dragEnter\", adorn);\n\n                    //if (!mayWorkFor(selnode, node)) return;\n                    var shape = node.findObject(\"main\");\n                    if (shape) {\n                        shape._prevFill = shape.fill; // remember the original brush\n                        shape.fill = \"RGBA(146,208,80,0.5)\";\n                    }\n                },\n                mouseDragLeave: function (e, obj) {\n                    var node = obj.part;\n                    var shape = node.findObject(\"main\");\n                    if (shape && shape._prevFill) {\n                        shape.fill = shape._prevFill; // restore the original brush\n                    }\n                    var centerText = node.diagram.findNodeForKey(node.data.centerText)\n                    if (centerText) {\n                        if (!helpers.checkPhone()) {\n                            centerText.layerName = \"Foreground\"\n                        }\n                    }\n                    //node.removeAdornment(\"dragEnter\");\n                },\n                mouseDrop: function (e, obj) {\n                    var node = obj.part;\n                    console.log(\"mouseDropmouseDropmouseDropmouseDrop\")\n                    var selnode = e.diagram.selection.first();\n                    if (!selnode) return;\n                    // 常变\n                    if (selnode.data.category == \"picGroup\" && selnode.data.role == \"cbian\") {\n                        var it = selnode.findSubGraphParts().iterator;\n                        var deleteObjs = []\n                        var cbian = {}\n                        while (it.next()) {\n                            var n = it.value;\n                            if (n.data.category == \"autoText\") {\n                                if (n.data.locationSpot == \"0 0 0 0\") {\n                                    cbian.shiText = n.data.text;\n                                }\n                                if (n.data.locationSpot == \"0 0.5 0 0\") {\n                                    cbian.centerText = n.data.text;\n                                }\n                                if (n.data.locationSpot == \"0 1 0 0\") {\n                                    cbian.xuText = n.data.text;\n                                }\n                            }\n                            deleteObjs.push(n.data)\n                        }\n                        e.diagram.startTransaction(\"mouseDrop\")\n                        // 删除总结图\n                        e.diagram.model.removeNodeDataCollection(deleteObjs)\n                        var backupSelnode = JSON.parse(JSON.stringify(selnode.data))\n                        e.diagram.model.removeNodeData(selnode.data)\n\n                        // 添加新橄榄\n                        e.diagram.__trtd.addOlive(node, cbian)\n                        e.diagram.commitTransaction(\"mouseDrop\")\n                        return;\n                    }\n\n                    if (selnode.data.category != \"wave\") {\n                        return;\n                    }\n                    if (!node) {\n                        // node.containingGroup.layout.isValidLayout = false\n                        return;\n                    }\n                    if (selnode.data.group != obj.data.group) {\n                        return;\n                    }\n                    e.diagram.startTransaction(\"mouseDrop\")\n                    selnode.__oldOrder = selnode.data.order\n                    e.diagram.model.setDataProperty(selnode.data, \"order\", node.data.order + 0.5)\n                    var xuText = e.diagram.findNodeForKey(selnode.data.xuText)\n                    var shiText = e.diagram.findNodeForKey(selnode.data.shiText)\n                    // shiText.__oldOrder = shiText.data.order\n                    // xuText.__oldOrder = xuText.data.order\n                    e.diagram.model.setDataProperty(shiText, \"order\", node.data.order + 0.5)\n                    e.diagram.model.setDataProperty(xuText, \"order\", node.data.order + 0.5)\n                    // node.containingGroup.layout.isValidLayout = false\n                    e.diagram.commitTransaction(\"mouseDrop\")\n                    return;\n                    if (node.data.isparent) {\n                        var child = e.diagram.findNodeForKey(node.data.isparent);\n                        while (child.data.next) {\n                            child = e.diagram.findNodeForKey(child.data.next);\n                        }\n                        if (child.data.key == selnode.data.key) {\n                            //最后一个子节点拖放到父节点上时，不做任何操作\n                            return;\n                        }\n                        e.diagram.__trtd.setNodeAsSibling(selnode, child);\n                    } else {\n                        e.diagram.__trtd.setNodeAsChildren(selnode, node);\n                    }\n                },\n                mouseLeave: function (e, node) {\n                    if (!node.containingGroup) return;\n                    var it = node.containingGroup.findSubGraphParts().iterator;\n                    while (it.next()) {\n                        var n = it.value;\n                        if (n.data.category == \"autoText\") {\n                            // if(n.data.order == node.data.order+1){\n                            //     locateNode = n;\n                            // }\n                            n.findObject(\"textBorder\").visible = false;\n                            // n.areaBackground = null\n                        }\n                    }\n                    try {\n                        var centerText = e.diagram.findNodeForKey(node.data.centerText)\n                        if (centerText) {\n                            centerText.layerName = \"Foreground\"\n                        }\n                    } catch (e) {\n                        console.error(\"wave node template error:\", e)\n                    }\n                },\n                selectionAdornmentTemplate: this.getNodeSelectionAdornmentTemplate(),\n                doubleClick: function (e, node) {\n                    if (!node) return;\n                    if (!node.containingGroup) return;\n                    if (node.containingGroup.data.textAngle == \"horizontal\" && node.containingGroup.data.centerTextAngle == \"independent\") {\n                        // 如果文字方向为正向，且中线文字为正向\n                        node.findObject(\"TEXT\").visible = true;\n                        var centerText = node.diagram.findNodeForKey(node.data.centerText)\n                        if (centerText) {\n                            centerText.visible = false;\n                        }\n                    }\n                    setTimeout(() => {\n                        e.diagram.__trtd.selectText(e, node)\n                    }, 100)\n                },\n            },\n            this.binding,\n            $(go.Shape, \"Rectangle\",\n                {\n                    name: \"main\",\n                    // layerName: \"overflow\",\n                    fill: \"rgba(0,0,0,0)\", stroke: null, width: 300, height: 150\n                },\n                new go.Binding(\"fill\", \"fill\").makeTwoWay(),\n                // new go.Binding(\"fill\", \"fill\").makeTwoWay(),\n                new go.Binding(\"desiredSize\", \"desiredSize\", function (v, d) {\n                    // console.log(\"vd m\", v, d )\n                    // if(!v) return d.part.findObject(\"SHAPE\").measuredBounds.size;\n                    return go.Size.parse(v)\n                }).makeTwoWay(function (v) {\n                    return go.Size.stringify(v)\n                }),\n            ),\n            // $(go.Panel, \"Spot\",{\n            //   // isClipping: true,\n            //   background: \"green\",\n            //   position: new go.Point(0,0),\n            //   alignment: go.Spot.Center,\n            //   alignmentFocus: go.Spot.Center,\n            // },\n            // $(go.Shape, \"Rectangle\",{\n            //   alignment: go.Spot.Center,\n            //   alignmentFocus: go.Spot.Center,\n            // },\n            // new go.Binding(\"desiredSize\", \"desiredSize\", function(v) {\n            //     var size = new go.Size(v.width, v.height)\n            //     // console.log(\"v:\",v)\n            //     return size\n            //     }).ofObject(\"main\"),\n            // ),\n            this.getShiHalfEllipseShape(),\n            this.getXuHalfEllipseShape(),\n            // $(go.Adornment,\n            // { locationSpot: go.Spot.Top },\n            // $(go.Shape, \"BpmnActivityLoop\",\n            //   { width: 12, height: 12, cursor: \"pointer\",\n            //     background: \"transparent\", stroke: \"dodgerblue\", strokeWidth: 2 })\n            // ),\n            // ),\n\n            // $(go.Panel,\"Spot\",{\n            //   stretch: go.GraphObject.Uniform,\n            //   background:\"gray\",\n            //   // locationSpot: go.Spot.LeftCenter,\n            //   alignment: go.Spot.Right,\n            //   // strokeDashArray: [10, 5],\n            //   alignmentFocus: go.Spot.Left,\n            // },\n            //   this.getTailXuShape(),\n            //   this.getTailShiShape(),\n            // ),\n\n            // this.getUpHalfEllipseShape(),\n            this.getTextBuild()\n        )\n    }\n}\n\nmodule.exports = WaveNodeTemplate\n// export default WaveNodeTemplate\n\n\n\n// WEBPACK FOOTER //\n// ./src/nodeTemplate/waveNodeTemplate.js","var $ = go.GraphObject.make;\r\nvar Base = require('./base')\r\nvar helpers = require('../helpers/helpers.gojs')\r\n  \r\n\r\n  \r\n\r\nclass WaveNodeTemplate extends Base {\r\n    constructor(options){\r\n        super(options)\r\n        // this.nodeProperties = {}\r\n        \r\n    }\r\n\r\n    makeGeo(data, shape, options) {\r\n      // this is much more efficient than calling go.GraphObject.make:\r\n      var {radiusX=150,radiusY=100} = data\r\n      radiusX = shape.part.findObject(\"main\").width/2\r\n      radiusY = shape.part.findObject(\"main\").height/2\r\n      // console.log(\"makeGeo999999999999999999999999999\",radiusX,radiusY)\r\n      var geo =  new go.Geometry()\r\n        .add(new go.PathFigure(0, 0)  // start point\r\n          .add(new go.PathSegment(go.PathSegment.SvgArc,\r\n          radiusX*2,0,radiusX, radiusY,0,1,options.clockwiseFlag?1:0\r\n              )\r\n            )\r\n          )\r\n          geo.defaultStretch = go.GraphObject.Fill;\r\n          return geo;\r\n    }\r\n\r\n    makeGeoWave(data, shape, options) {\r\n      // this is much more efficient than calling go.GraphObject.make:\r\n      var {radiusX=150,radiusY=100} = data\r\n      radiusX = shape.part.findObject(\"main\").width/2\r\n      radiusY = shape.part.findObject(\"main\").height/2\r\n      // console.log(\"makeGeo999999999999999999999999999\",radiusX,radiusY)\r\n      var geo =  new go.Geometry()\r\n        .add(new go.PathFigure(0, 0)  // start point\r\n          .add(new go.PathSegment(go.PathSegment.QuadraticBezier,\r\n            radiusX*2, 0, //describe the end point\r\n            radiusX, radiusY*(options.clockwiseFlag?-1:1), // describe the only control point\r\n          // radiusX*2,0,radiusX, radiusY,0,1,options.clockwiseFlag?1:0\r\n              )\r\n            )\r\n          )\r\n          geo.defaultStretch = go.GraphObject.Fill;\r\n          return geo;\r\n    }\r\n\r\n    getShiHalfEllipseShape(){\r\n      return $(go.Shape, {name:\"XU\", \r\n      strokeWidth:2,\r\n      stroke: \"#cb1c27\", fill:\"rgba(0,66,0,0)\",\r\n        // background: \"yellow\",\r\n        stretch: go.GraphObject.Uniform,\r\n        alignment: go.Spot.Bottom,\r\n        alignmentFocus: go.Spot.Bottom,\r\n        // row:1, column:0,margin:0\r\n        \r\n      },\r\n        // new go.Binding(\"alignment\",\"\",function(data, shape){\r\n        //   if(data.flip){\r\n        //     return go.Spot.Top\r\n        //   }\r\n        //   return go.Spot.Bottom\r\n        // }),\r\n        // new go.Binding(\"alignmentFocus\",\"\",function(data, shape){\r\n        //   if(data.flip){\r\n        //     return go.Spot.Top\r\n        //   }\r\n        //   return go.Spot.Bottom\r\n        // }),\r\n          new go.Binding(\"geometry\", \"\", (data, shape)=>{\r\n            var clockwiseFlag = 0;\r\n            if(data.order%2 == 0){\r\n              clockwiseFlag = 1;\r\n            }\r\n            if(data.flip){\r\n              // clockwiseFlag = 1;\r\n            }\r\n            \r\n            return this.makeGeoWave(data, shape, {clockwiseFlag:clockwiseFlag})\r\n          }),\r\n          new go.Binding(\"stroke\", \"shiStroke\").makeTwoWay(),\r\n          \r\n          new go.Binding(\"desiredSize\", \"desiredSize\", function(v) {\r\n                var size = new go.Size(v.width, v.height/2)\r\n                // console.log(\"v:\",v)\r\n                return size\r\n            }).ofObject(\"main\")\r\n        )\r\n    }\r\n    getXuHalfEllipseShape(){\r\n      return $(go.Shape, {name:\"SHI\", \r\n      strokeWidth:2,\r\n      stroke: \"#0e399d\", fill:\"rgba(0,66,0,0)\",\r\n        // background: \"gray\",\r\n        stretch: go.GraphObject.Uniform,\r\n        alignment: go.Spot.Bottom,\r\n        strokeDashArray: [10, 5],\r\n        alignmentFocus: go.Spot.Bottom,\r\n        // row:1, column:0,margin:0\r\n      },\r\n          // new go.Binding(\"alignment\",\"\",function(data, shape){\r\n          //   if(data.flip){\r\n          //     return go.Spot.Top\r\n          //   }\r\n          //   return go.Spot.Bottom\r\n          // }),\r\n          // new go.Binding(\"alignmentFocus\",\"\",function(data, shape){\r\n          //   if(data.flip){\r\n          //     return go.Spot.Top\r\n          //   }\r\n          //   return go.Spot.Bottom\r\n          // }),\r\n          new go.Binding(\"geometry\", \"\", (data, shape)=>{\r\n            var clockwiseFlag = 1;\r\n            if(data.order%2 == 0){\r\n              clockwiseFlag = 0;\r\n            }\r\n            // if(data.flip){\r\n            //   clockwiseFlag = 0;\r\n            // }\r\n            return this.makeGeoWave(data, shape, {clockwiseFlag:clockwiseFlag})\r\n          }),\r\n          new go.Binding(\"desiredSize\", \"desiredSize\", function(v) {\r\n                var size = new go.Size(v.width, v.height/2)\r\n                // console.log(\"v:\",v)\r\n                return size\r\n            }).ofObject(\"main\")\r\n        )\r\n    }\r\n    getTailShiShape(){\r\n      return $(go.Shape, {name:\"XU\", \r\n      strokeWidth:2,\r\n      stroke: \"#cb1c27\", fill:\"rgba(0,66,0,0)\",\r\n        // background: \"yellow\",\r\n        stretch: go.GraphObject.None,\r\n        alignment:  go.Spot.Bottom,\r\n        alignmentFocus: go.Spot.Bottom,\r\n        // row:1, column:0,margin:0\r\n      },\r\n        // new go.Binding(\"alignment\",\"\",function(data, shape){\r\n        //   if(data.flip){\r\n        //     return go.Spot.Top\r\n        //   }\r\n        //   return go.Spot.Bottom\r\n        // }),\r\n        // new go.Binding(\"alignmentFocus\",\"\",function(data, shape){\r\n        //   if(data.flip){\r\n        //     return go.Spot.Top\r\n        //   }\r\n        //   return go.Spot.Bottom\r\n        // }),\r\n          new go.Binding(\"geometry\", \"\", (data, shape)=>{\r\n            var clockwiseFlag = 0;\r\n            if(data.order%2 == 0){\r\n              clockwiseFlag = 1;\r\n            }\r\n            if(data.flip){\r\n              // clockwiseFlag = 1;\r\n            }\r\n            \r\n            return this.makeGeoWave(data, shape, {clockwiseFlag:!clockwiseFlag})\r\n          }),\r\n          new go.Binding(\"stroke\", \"shiStroke\").makeTwoWay(),\r\n          \r\n          new go.Binding(\"desiredSize\", \"desiredSize\", function(v) {\r\n                var size = new go.Size(v.width, v.height/2)\r\n                // console.log(\"v:\",v)\r\n                return size\r\n            }).ofObject(\"main\")\r\n        )\r\n    }\r\n    getTailXuShape(){\r\n      return $(go.Shape, {name:\"TailXu\", \r\n      strokeWidth:2,\r\n      stroke: \"#0e399d\", fill:\"rgba(0,66,0,0)\",\r\n        // background: \"gray\",\r\n        stretch: go.GraphObject.None,\r\n        alignment:  go.Spot.Bottom,\r\n        strokeDashArray: [10, 5],\r\n        alignmentFocus: go.Spot.Bottom,\r\n        // row:1, column:0,margin:0\r\n      },\r\n          // new go.Binding(\"alignment\",\"\",function(data, shape){\r\n          //   if(data.flip){\r\n          //     return go.Spot.Top\r\n          //   }\r\n          //   return go.Spot.Bottom\r\n          // }),\r\n          // new go.Binding(\"alignmentFocus\",\"\",function(data, shape){\r\n          //   if(data.flip){\r\n          //     return go.Spot.Top\r\n          //   }\r\n          //   return go.Spot.Bottom\r\n          // }),\r\n          new go.Binding(\"geometry\", \"\", (data, shape)=>{\r\n            var clockwiseFlag = 1;\r\n            if(data.order%2 == 0){\r\n              clockwiseFlag = 0;\r\n            }\r\n            // if(data.flip){\r\n            //   clockwiseFlag = 0;\r\n            // }\r\n            return this.makeGeoWave(data, shape, {clockwiseFlag:!clockwiseFlag})\r\n          }),\r\n          new go.Binding(\"desiredSize\", \"desiredSize\", function(v) {\r\n                var size = new go.Size(v.width, v.height/2)\r\n                // console.log(\"v:\",v)\r\n                return size\r\n            }).ofObject(\"main\")\r\n        )\r\n    }\r\n    getTextBuild(){\r\n      return $(go.TextBlock, {\r\n              name: \"TEXT\",\r\n              alignment: new go.Spot(0.5, 0.4),\r\n              font: \"18px 'Microsoft YaHei'\",\r\n              editable: false,\r\n              // flip:go.GraphObject.FlipHorizontal,\r\n              //margin: 3, editable: true,\r\n              \r\n              stroke: \"black\",\r\n              isMultiline: true,\r\n              overflow: go.TextBlock.OverflowClip,\r\n              wrap: go.TextBlock.WrapDesiredSize,\r\n              textAlign: \"center\",\r\n              spacingAbove: 4,\r\n              spacingBelow: 4,\r\n              portId: \"TEXT\",\r\n              stretch: go.GraphObject.Uniform\r\n          },\r\n          new go.Binding(\"textAlign\", \"textAlign\", function(v) {\r\n              return ['start', 'center', 'end'].indexOf(v)>-1 ? v : \"center\";\r\n          }).makeTwoWay(),\r\n          new go.Binding(\"spacingAbove\", \"spacingline\", function(v) {\r\n              return helpers.tdTransToNum(v, 4);\r\n          }).makeTwoWay(),\r\n          new go.Binding(\"spacingBelow\", \"spacingline\", function(v) {\r\n              return helpers.tdTransToNum(v, 4);\r\n          }).makeTwoWay(),\r\n          new go.Binding(\"width\", \"width\", function(v) {\r\n              return v-30;\r\n          }).ofObject(\"main\"),\r\n          // new go.Binding(\"height\", \"height\", function (v) {\r\n          //   return v;\r\n          // }).ofObject(\"SHAPE\"),\r\n          new go.Binding(\"text\", \"text\").makeTwoWay(),\r\n          new go.Binding(\"stroke\", \"textStroke\").makeTwoWay(),\r\n          new go.Binding(\"font\", \"font\").makeTwoWay()\r\n      )\r\n    }\r\n\r\n    getNodeSelectionAdornmentTemplate(){\r\n      return $(go.Adornment, \"Spot\",\r\n      {\r\n        // isShadowed: true,\r\n      },\r\n          $(go.Panel, \"Auto\",\r\n              $(go.Shape, { \r\n                isPanelMain: true,\r\n                 fill: null, \r\n                 stroke: \"dodgerblue\", strokeWidth: 3 },\r\n                  // new go.Binding(\"fill\",\"\",function(e,obj){\r\n                  //   var radBrush = $(go.Brush, \"Radial\", { 0: \"rgba(248,248,242,0)\", 1: 'RGB(255,242,0)' });\r\n                  //   return radBrush;\r\n                  // })\r\n                  // \r\n              ),\r\n              $(go.Placeholder) // this represents the selected Node\r\n\r\n          ),\r\n          \r\n\r\n\r\n        // ),\r\n          // the button to create a \"next\" node, at the top-right corner\r\n          $(\"CircleButton\", {\r\n                  name: \"AddChild\",\r\n                  toolTip: $(go.Adornment, \"Auto\",\r\n                      $(go.Shape, { fill: \"#FFFFCC\" }),\r\n                      $(go.TextBlock, { textAlign: 'center', margin: new go.Margin(8, 4, 4, 4) }, // the tooltip shows the result of calling nodeInfo(data)\r\n                          new go.Binding(\"text\", \"\", function(d) {\r\n                              return \"增加橄榄\";\r\n                          }))\r\n                  ),\r\n                  alignment: go.Spot.Right,\r\n                  alignmentFocus: go.Spot.Left,\r\n                  width: 50,\r\n                  height: 50,\r\n                  click: function (e) {\r\n                      e.diagram.__trtd.addOlive()\r\n                  } // this function is defined below\r\n              },\r\n              $(go.Shape, \"PlusLine\", { stroke: '#770077', desiredSize: new go.Size(25, 25) })\r\n          ),\r\n\r\n          $(\"Button\", {\r\n                  name: \"AddLevel\",\r\n                  toolTip: $(go.Adornment, \"Auto\",\r\n                      $(go.Shape, { fill: \"#FFFFCC\" }),\r\n                      $(go.TextBlock, { textAlign: 'center', margin: new go.Margin(8, 4, 4, 4) }, // the tooltip shows the result of calling nodeInfo(data)\r\n                          new go.Binding(\"text\", \"\", function(d) {\r\n                              return \"增加同级节点\";\r\n                          }))\r\n                  ),\r\n                  alignment: new go.Spot(1, 0.5, 15, 0),\r\n                  width: 30,\r\n                  height: 30,\r\n                  click: function (e) {\r\n                      e.diagram.__trtd.addOlive()\r\n                  } // this function is defined below\r\n              },\r\n              $(go.Shape, \"PlusLine\", { stroke: \"#227700\", desiredSize: new go.Size(15, 15) }),\r\n              new go.Binding(\"visible\", \"level\", function(level) {\r\n                  return level != 0; // hidden this button if current node is root node\r\n\r\n              })\r\n          ),\r\n          // $(go.Panel, \"Auto\", {        // 放大镜\r\n          //         name: \"ButtonIcon1\",\r\n          //         alignment: new go.Spot(0, 1, 5, -5),\r\n          //         //alignment: go.Spot.BottomLeft,\r\n          //         //alignmentFocus: go.Spot.BottomLeft,\r\n          //         width: 60,\r\n          //         height: 60,\r\n          //         isActionable: true,\r\n          //         click: expandCollapse // this function is defined below\r\n          //     },\r\n\r\n          //     $(go.Shape, \"Circle\", {\r\n          //         fill: \"rgba(1,1,1,0)\",\r\n          //         strokeWidth: 0,\r\n          //         stroke: \"green\",\r\n          //         width: 50,\r\n          //         height: 50\r\n          //     }),\r\n          //     $(go.Shape, {\r\n          //             '_para1': true,\r\n          //             name: \"ButtonIcon\",\r\n          //             fill: \"red\",\r\n          //             strokeWidth: 2,\r\n          //             stroke: \"#767678\",\r\n          //             geometryString: icons[\"zoomout\"], // default value for isTreeExpanded is true\r\n          //             desiredSize: new go.Size(30, 30)\r\n          //         },\r\n          //         new go.Binding(\"geometryString\", \"\", function(d, button) {\r\n          //             // console.log('dddddd:', d);\r\n          //             // console.log('button:', button);\r\n          //             // var myDiagram = d.diagram;\r\n          //             // var node = myDiagram.selection.first();\r\n          //             // if (node[\"_controlExpand\"]) {\r\n          //             //     return icons[\"zoomout\"];\r\n          //             // } else {\r\n          //             //     return icons[\"zoomin\"];\r\n          //             // }\r\n          //             return icons[\"zoomin\"];\r\n          //         })\r\n          //     )\r\n          // )\r\n      );\r\n    }\r\n\r\n    getNodeTemplate(){\r\n      var diagram = this.diagram\r\n      return $(go.Node,\"Spot\",{\r\n        // isClipping: true,\r\n        layerName: \"default\",\r\n        zOrder:5,\r\n        movable: false,\r\n        resizable: false,\r\n        resizeObjectName: \"main\",\r\n        selectionObjectName: \"main\",\r\n        rotatable: false,\r\n        layoutConditions: go.Part.LayoutStandard & go.Part.LayoutRemoved & go.Part.LayoutAdded & go.Part.LayoutNodeSized,\r\n        locationSpot: go.Spot.LeftCenter,\r\n        toolTip:  // define a tooltip for each node that displays the color as text\r\n        $(\"ToolTip\",\r\n          $(go.TextBlock, { margin: 4 },\r\n            new go.Binding(\"text\", \"\", function(data,p){\r\n              // console.log(\"tooltip:\",p,data)\r\n              var tips = [\"双击编辑文字\",\"尝试按方向键快捷移动到下一个对象\"]\r\n              var elt = Math.floor(tips.length * Math.random())\r\n              return tips[elt]\r\n            })\r\n          )\r\n        ),  // end of Adornment\r\n        click: (e, node)=>{\r\n          console.log(node.data)\r\n        },\r\n        mouseOver: function(e, node) {\r\n          // if(node.data.hyperlink){\r\n          //   var textObj = node.findObject('TEXT');\r\n          //   textObj.isUnderline = true;\r\n          // }\r\n          if(!node.containingGroup) return;\r\n          var it = node.containingGroup.findSubGraphParts().iterator;\r\n          while (it.next()) {\r\n              var n = it.value;\r\n              if(n.data.category == \"autoText\"){\r\n                  if(n.data.order == node.data.order){\r\n                      // locateNode = n;\r\n                      n.findObject(\"textBorder\").visible = true;\r\n                    //   n.areaBackground = \"mediumslateblue\"\r\n                  }\r\n              }\r\n          }\r\n          // diagram.__trtd.showNodeRemarkTips(e, node);\r\n      },\r\n      contextMenu: $(go.Adornment),\r\n      mouseLeave: function(e, node) {\r\n        if(!node.containingGroup) return;\r\n        var it = node.containingGroup.findSubGraphParts().iterator;\r\n        while (it.next()) {\r\n            var n = it.value;\r\n            if(n.data.category == \"autoText\"){\r\n                // if(n.data.order == node.data.order+1){\r\n                //     locateNode = n;\r\n                // }\r\n                n.findObject(\"textBorder\").visible = false;\r\n                // n.areaBackground = null\r\n            }\r\n        }\r\n      },\r\n        selectionAdornmentTemplate: this.getNodeSelectionAdornmentTemplate(),\r\n        doubleClick: function (e, node){\r\n          e.diagram.__trtd.selectText(e, node)\r\n        },\r\n      },\r\n      this.binding,\r\n      $(go.Shape, \"Ellipse\",\r\n      { name:\"main\",fill: \"rgba(0,0,0,0)\", stroke: null, width: 300, height: 150 },\r\n        new go.Binding(\"fill\", \"fill\").makeTwoWay(),\r\n        // new go.Binding(\"fill\", \"fill\").makeTwoWay(),\r\n        new go.Binding(\"desiredSize\", \"desiredSize\", function(v, d) {\r\n            // console.log(\"vd m\", v, d )\r\n            // if(!v) return d.part.findObject(\"SHAPE\").measuredBounds.size;\r\n            return go.Size.parse(v)\r\n        }).makeTwoWay(function(v) {\r\n            return go.Size.stringify(v)\r\n        }),\r\n      ),\r\n      // $(go.Panel, \"Spot\",{\r\n      //   // isClipping: true,\r\n      //   background: \"green\",\r\n      //   position: new go.Point(0,0),\r\n      //   alignment: go.Spot.Center,\r\n      //   alignmentFocus: go.Spot.Center,\r\n      // },\r\n      // $(go.Shape, \"Rectangle\",{\r\n      //   alignment: go.Spot.Center,\r\n      //   alignmentFocus: go.Spot.Center,\r\n      // },\r\n      // new go.Binding(\"desiredSize\", \"desiredSize\", function(v) {\r\n      //     var size = new go.Size(v.width, v.height)\r\n      //     // console.log(\"v:\",v)\r\n      //     return size\r\n      //     }).ofObject(\"main\"),\r\n      // ),\r\n      this.getShiHalfEllipseShape(),\r\n      this.getXuHalfEllipseShape(),\r\n      // $(go.Adornment,\r\n      // { locationSpot: go.Spot.Top },\r\n      // $(go.Shape, \"BpmnActivityLoop\",\r\n      //   { width: 12, height: 12, cursor: \"pointer\",\r\n      //     background: \"transparent\", stroke: \"dodgerblue\", strokeWidth: 2 })\r\n      // ),\r\n      // ),\r\n\r\n      // $(go.Panel,\"Spot\",{\r\n      //   stretch: go.GraphObject.Uniform,\r\n      //   background:\"gray\",\r\n      //   // locationSpot: go.Spot.LeftCenter,\r\n      //   alignment: go.Spot.Right,\r\n      //   // strokeDashArray: [10, 5],\r\n      //   alignmentFocus: go.Spot.Left,\r\n      // },\r\n      //   this.getTailXuShape(),\r\n      //   this.getTailShiShape(),\r\n      // ),\r\n\r\n      // this.getUpHalfEllipseShape(),\r\n      this.getTextBuild()\r\n      )\r\n    }\r\n}\r\n\r\nmodule.exports = WaveNodeTemplate\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/nodeTemplate/waveTailNodeTemplate.js","var $ = go.GraphObject.make;\r\nvar Base = require('./base')\r\nvar helpers = require('../helpers/helpers.gojs')\r\nvar waveGroupLayout = require(\"../layout/waveGroupLayout\")\r\n\r\nclass WaveNodeTemplate extends Base {\r\n    constructor(options){\r\n        super(options)\r\n        // this.nodeProperties = {}\r\n        \r\n    }\r\n    \r\n    nodeResizeAdornmentTemplate () {\r\n        return $(go.Adornment, \"Spot\",\r\n            $(go.Placeholder), // takes size and position of adorned object\r\n            // $(go.Shape, \"Circle\", // left resize handle\r\n            //     {\r\n            //         alignment: go.Spot.TopLeft,\r\n            //         alignmentFocus: go.Spot.BottomRight,\r\n            //         cursor: \"col-resize\",\r\n            //         desiredSize: new go.Size(30, 30),\r\n            //         fill: \"lightblue\",\r\n            //         stroke: \"dodgerblue\"\r\n            //     }),\r\n            $(go.Shape, \"Circle\", // right resize handle\r\n                {\r\n                    alignment: go.Spot.BottomRight,\r\n                    alignmentFocus: go.Spot.TopLeft,\r\n                    cursor: \"col-resize\",\r\n                    desiredSize: new go.Size(30, 30),\r\n                    fill: \"lightblue\",\r\n                    stroke: \"dodgerblue\"\r\n                })\r\n        )\r\n    }\r\n\r\n    getNodeTemplate(){\r\n      var that = this\r\n      return $(go.Group, \"Spot\",\r\n      { selectionObjectName: \"PH\",\r\n        layerName: \"default\",\r\n        locationObjectName: \"PH\",\r\n        resizeObjectName:\"PH\",\r\n        // rotatable: false\r\n        resizable: true,\r\n        locationSpot: go.Spot.LeftCenter,\r\n        \r\n        // rotationSpot: go.Spot.LeftCenter,\r\n        alignment: go.Spot.Left,\r\n        alignmentFocus: go.Spot.Left,\r\n        // rotateObject:\"PH\",\r\n        click: (e, node)=>{\r\n          console.log(node.data)\r\n          var it = node.findSubGraphParts().iterator;\r\n          while (it.next()) {\r\n              var n = it.value;\r\n              if(n.data.category == \"autoText\"){\r\n                  n.findObject(\"textBorder\").visible = false;\r\n              }\r\n          }\r\n        },\r\n        selectionAdornmentTemplate: this.getNodeSelectionAdornmentTemplate(),\r\n        resizeAdornmentTemplate: that.nodeResizeAdornmentTemplate(),\r\n        mouseOver: function(e, node) {\r\n            console.log(\"group.......................\")\r\n            // if(node.data.hyperlink){\r\n            //   var textObj = node.findObject('TEXT');\r\n            //   textObj.isUnderline = true;\r\n            // }\r\n            // if(!node) return;\r\n            var it = node.findSubGraphParts().iterator;\r\n            while (it.next()) {\r\n                var n = it.value;\r\n                if(n.data.category == \"autoText\"&& (node.data.role == \"xuText\" || node.data.role == \"shiText\" )){\r\n                    // if(n.data.order == node.data.order){\r\n                        // locateNode = n;\r\n                        if(n.data.text == \"\"|| n.data.text.trim() == \"\"){\r\n                          n.findObject(\"textBorder\").visible = true;\r\n                        }\r\n                      //   n.areaBackground = \"mediumslateblue\"\r\n                    // }\r\n                }\r\n            }\r\n            // diagram.__trtd.showNodeRemarkTips(e, node);\r\n        },\r\n        mouseLeave: function(e, node) {\r\n          // if(!node) return;\r\n          var it = node.findSubGraphParts().iterator;\r\n          while (it.next()) {\r\n              var n = it.value;\r\n              if(n.data.category == \"autoText\"){\r\n                  // if(n.data.order == node.data.order+1){\r\n                  //     locateNode = n;\r\n                  // }\r\n                  n.findObject(\"textBorder\").visible = false;\r\n                  // n.areaBackground = null\r\n              }\r\n          }\r\n        },\r\n        rotatable: true,\r\n        contextMenu: $(go.Adornment),\r\n        // resizable: true,\r\n        // layoutConditions: go.Part.LayoutStandard,\r\n        layoutConditions: go.Part.LayoutStandard & go.Part.LayoutRemoved & go.Part.LayoutAdded & go.Part.LayoutNodeSized,\r\n        layout: new waveGroupLayout()\r\n        // layout: $(go.GridLayout,{\r\n        //   spacing: new go.Size(0,0),\r\n        //   cellSize: go.Size.parse(300,150),\r\n        //   arrangement:go.GridLayout.LeftToRight,\r\n        //   alignment: go.GridLayout.Location,\r\n        //   comparer:function(pa, pb) {\r\n        //     var da = pa.data;\r\n        //     var db = pb.data;\r\n        //     if (da.order < db.order) return -1;\r\n        //     if (da.order > db.order) return 1;\r\n        //     return 0;\r\n        //   }\r\n        // }) \r\n      },\r\n      new go.Binding(\"angle\", \"angle\").makeTwoWay(function(v,data){\r\n\r\n        return v;\r\n      }),\r\n      // new go.Binding(\"copyable\", \"copyable\").makeTwoWay(),\r\n      new go.Binding(\"isShadowed\", \"isShadowed\").makeTwoWay(),\r\n      new go.Binding(\"selectable\", \"selectable\").makeTwoWay(),\r\n      new go.Binding(\"movable\", \"movable\").makeTwoWay(),\r\n      new go.Binding(\"deletable\", \"deletable\").makeTwoWay(),\r\n        $(go.Shape,  // using a Shape instead of a Placeholder\r\n          { name: \"PH\",\r\n          figure:\"Rectangle\",\r\n          // rotationSpot: go.Spot.LeftCenter,\r\n          // spot1: new go.Spot(0.01, 0.01),\r\n          // spot2: new go.Spot(0.99, 0.99),\r\n            // width: 600,\r\n            // height:300,\r\n            alignment: new go.Spot(0,0.5),\r\n            // locationSpot: go.Spot.LeftCenter,\r\n            stroke:\"#9aa8b6\" ,\r\n            strokeWidth: 0,\r\n            minSize: new go.Size(300,70),\r\n            maxSize: new go.Size(NaN,400),\r\n            fill: \"rgba(88,0,0,0)\" },\r\n          new go.Binding(\"desiredSize\", \"desiredSize\", function(v,data){\r\n            return go.Size.parse(v)\r\n          }).makeTwoWay(go.Size.stringify)\r\n        ),\r\n        new go.Binding(\"location\", \"loc\", go.Point.parse).makeTwoWay(go.Point.stringify),\r\n        // $(go.Placeholder,    // represents the area of all member parts,\r\n        //   { padding: 0}\r\n        // ),  // with some extra padding around them\r\n\r\n        // $(go.TextBlock,  // group title\r\n        //   { font: \"Bold 12pt Sans-Serif\" },\r\n        //   new go.Binding(\"text\", \"key\")\r\n        // )\r\n      )\r\n    }\r\n}\r\n\r\nmodule.exports = WaveNodeTemplate\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/nodeTemplate/waveGroupNodeTemplate.js","var $ = go.GraphObject.make;\r\nvar Base = require('./base')\r\nvar helpers = require('../helpers/helpers.gojs')\r\nvar axisGroupLayout = require(\"../layout/axisGroupLayout\")\r\n\r\nclass AxisNodeTemplate extends Base {\r\n    constructor(options){\r\n        super(options)\r\n        // this.nodeProperties = {}\r\n        \r\n    }\r\n    \r\n    addFreeText(e, node){\r\n      console.log(\"eeeeeeeeeee\",e)\r\n      var data = {\"text\":\"自由文本\",\r\n      \"deletable\":true, \r\n      \"role\":\"freeText\",\r\n      \"fill\":\"black\", \r\n      \"iconVisible\":false, \r\n      \"locationSpot\":\"0.5 0.5 0 0\", \r\n      \"textAlign\":\"center\", \r\n      \"category\":\"autoText\", \r\n      \"loc\": go.Point.stringify(e.documentPoint), \r\n      \"movable\":true, \"group\":node.data.key\r\n     }\r\n     this.diagram.startTransaction(\"addFreeText\")\r\n     this.diagram.model.addNodeData(data);\r\n     this.diagram.commitTransaction(\"addFreeText\")\r\n    }\r\n\r\n    getNodeTemplate(){\r\n      var that = this\r\n      return $(go.Group, \"Auto\",\r\n      { selectionObjectName: \"PH\",\r\n      layerName: \"Background\",\r\n        locationObjectName: \"PH\",\r\n        locationSpot: go.Spot.BottomLeft ,\r\n        // rotationSpot: go.Spot.LeftCenter,\r\n        rotatable: false,\r\n        alignment: go.Spot.Left,\r\n        alignmentFocus: go.Spot.Left,\r\n        // rotateObject:\"PH\",\r\n        click: (e, node)=>{\r\n          console.log(node.data)\r\n          var it = node.findSubGraphParts().iterator;\r\n          while (it.next()) {\r\n              var n = it.value;\r\n              if(n.data.category == \"autoText\"){\r\n                  n.findObject(\"textBorder\").visible = false;\r\n              }\r\n          }\r\n          return;\r\n          if(node.isSelected) return;\r\n          var it = node.findSubGraphParts().iterator;\r\n          var n;\r\n          while (it.next()) {\r\n              n = it.value;\r\n              if(n.data.role == \"labelGroup\"){\r\n                  n.__trtdNode.switchBorder(n, true)\r\n                  break;\r\n              }\r\n          }\r\n          if(n){\r\n            setTimeout(function(){\r\n              n.__trtdNode.switchBorder(n, false)\r\n            },3000)\r\n          }\r\n        },\r\n        doubleClick: function (e, node){\r\n          that.addFreeText(e, node)\r\n        },\r\n        mouseOver: function(e, node) {\r\n          // if(node.data.hyperlink){\r\n          //   var textObj = node.findObject('TEXT');\r\n          //   textObj.isUnderline = true;\r\n          // }\r\n          // if(!node.containingGroup) return;\r\n          return;\r\n          if(that.diagram.selection.count >0) return;\r\n\r\n          var it = node.findSubGraphParts().iterator;\r\n          var n;\r\n          while (it.next()) {\r\n              n = it.value;\r\n              if(n.data.role == \"labelGroup\"){\r\n                  // n.__trtdNode.switchBorder(n, true)\r\n                  break;\r\n              }\r\n          }\r\n          // 给显示隐藏一个缓冲，以显得不那么突兀\r\n          if(n){\r\n            setTimeout(function(){\r\n              if(that.diagram.selection.count >0) return;\r\n              n.__trtdNode.switchBorder(n, true)\r\n              if(that.diagram.selection.count <=0) return;\r\n              setTimeout(function(){\r\n                n.__trtdNode.switchBorder(n, false)\r\n              },3000)\r\n            },100)\r\n          }\r\n          // diagram.__trtd.showNodeRemarkTips(e, node);\r\n      },\r\n      contextMenu: $(go.Adornment),\r\n      mouseLeave: function(e, node) {\r\n        // if(!node.containingGroup) return;\r\n        var it = node.findSubGraphParts().iterator;\r\n        while (it.next()) {\r\n            var n = it.value;\r\n            if(n.data.role == \"labelGroup\"){\r\n                // n.__trtdNode.switchBorder(n, false)\r\n                break;\r\n            }\r\n        }\r\n        if(n){\r\n          setTimeout(function(){\r\n            n.__trtdNode.switchBorder(n, false)\r\n          },3000)\r\n        }\r\n      },\r\n        // rotatable: true,\r\n        // resizable: true,\r\n        // layoutConditions: go.Part.LayoutStandard,\r\n        layoutConditions: go.Part.LayoutStandard & go.Part.LayoutRemoved & go.Part.LayoutAdded & go.Part.LayoutNodeSized,\r\n        layout: new axisGroupLayout()\r\n        // layout: $(go.GridLayout,{\r\n        //   spacing: new go.Size(0,0),\r\n        //   cellSize: go.Size.parse(300,150),\r\n        //   arrangement:go.GridLayout.LeftToRight,\r\n        //   alignment: go.GridLayout.Location,\r\n        //   comparer:function(pa, pb) {\r\n        //     var da = pa.data;\r\n        //     var db = pb.data;\r\n        //     if (da.order < db.order) return -1;\r\n        //     if (da.order > db.order) return 1;\r\n        //     return 0;\r\n        //   }\r\n        // }) \r\n      },\r\n      new go.Binding(\"angle\", \"angle\").makeTwoWay(function(v,data){\r\n\r\n        return v;\r\n      }),\r\n      new go.Binding(\"copyable\", \"copyable\").makeTwoWay(),\r\n        $(go.Shape,  // using a Shape instead of a Placeholder\r\n          { name: \"PH\",\r\n          figure:\"Rectangle\",\r\n          // rotationSpot: go.Spot.LeftCenter,\r\n          // spot1: new go.Spot(0.01, 0.01),\r\n          // spot2: new go.Spot(0.99, 0.99),\r\n            // width: 600,\r\n            // height:300,\r\n            stroke:\"yellow\" ,\r\n            strokeWidth:0,\r\n            fill: \"rgba(0,0,0,0)\" },\r\n          // new go.Binding(\"desiredSize\", \"desiredSize\", function(v,data){\r\n          //   return go.Size.parse(v)\r\n          //   console.log('1111111111111111111111')\r\n          //   // for(var i=0;i<)\r\n          //   var model = data.part.diagram.model;\r\n          //   var group = data.part.data;\r\n          //   var maxWidth = 0;\r\n          //   var maxHeight = 0;\r\n          //   for(var i = 0;i<model.nodeDataArray.length;i++){\r\n          //     if(group.key != model.nodeDataArray[i].group){\r\n          //       continue;\r\n          //     }\r\n          //     if(model.nodeDataArray[i].desiredSize){\r\n          //       console.log(model.nodeDataArray[i].desiredSize)\r\n          //       var size = go.Size.parse(model.nodeDataArray[i].desiredSize)\r\n          //       if(size.width > maxWidth){\r\n          //         maxWidth = size.width;\r\n          //       }\r\n          //       if(size.height > maxHeight){\r\n          //         maxHeight = size.height;\r\n          //       }\r\n          //     }\r\n          //   }\r\n          //   // var group = that.diagram.findNodeForKey(data.part.data.key)\r\n          //   // var git = group.memberParts;\r\n          //   // var maxWidth = 0;\r\n          //   // var maxHeight = 0;\r\n          //   // while (git.next()) {\r\n          //   //   var item = git.value;\r\n          //   //   console.log(\"item:\",item)\r\n          //   //   if(item.naturalBounds.width > maxWidth){\r\n          //   //     maxWidth = item.naturalBounds.width;\r\n          //   //   }\r\n          //   //   if(item.naturalBounds.height > maxHeight){\r\n          //   //     maxHeight = item.naturalBounds.height;\r\n          //   //   }\r\n          //   //   console.log(`maxHeight:${maxHeight},maxWidth:${maxWidth}`)\r\n      \r\n          //   // }           \r\n          //   return go.Size.parse(`${maxWidth+100} ${maxHeight}`)         \r\n          //   // group.diagram.model.setDataProperty(group.data, \"desiredSize\", `${maxWidth+100} ${maxHeight}`) \r\n          // }).makeTwoWay(go.Size.stringify)\r\n        ),\r\n        new go.Binding(\"location\", \"loc\", go.Point.parse).makeTwoWay(go.Point.stringify),\r\n        // $(go.Placeholder,    // represents the area of all member parts,\r\n        //   { padding: 0}\r\n        // ),  // with some extra padding around them\r\n\r\n        // $(go.TextBlock,  // group title\r\n        //   { font: \"Bold 12pt Sans-Serif\" },\r\n        //   new go.Binding(\"text\", \"key\")\r\n        // )\r\n      )\r\n    }\r\n}\r\n\r\nmodule.exports = AxisNodeTemplate\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/nodeTemplate/axisGroupNodeTemplate.js","    // define a custom grid layout that makes sure the length of each lane is the same\r\n    // and that each lane is broad enough to hold its subgraph\r\n    function AxisGroupLayout() {\r\n        go.Layout.call(this);\r\n        // go.GridLayout.call(this);\r\n        // this.cellSize = new go.Size(1, 1);\r\n        // this.wrappingColumn = Infinity;\r\n        // this.wrappingWidth = Infinity;\r\n        // this.spacing = new go.Size(0, 0);\r\n        // this.alignment = go.GridLayout.Position;\r\n      }\r\n      go.Diagram.inherit(AxisGroupLayout, go.Layout);\r\n  \r\n      function computeNewRotateLoc(rotateCenter,currentLoc, angle){\r\n          if(rotateCenter.equals(currentLoc)) return currentLoc\r\n        // 计算选择中心点到（0,0）点的偏移\r\n        var offset = new go.Point(0,0).subtract(rotateCenter.copy())\r\n        // 将原来的点偏移到相对0,0点的位置\r\n        var nodeOrigin = currentLoc.copy().offset(offset.x, offset.y)\r\n        var newNodeOrigin = nodeOrigin.rotate(angle)\r\n        var newNodeLoc = newNodeOrigin.copy().offset(-offset.x, -offset.y)\r\n        return newNodeLoc\r\n        // console.log(\"newNodeLoc\", newNodeLoc)\r\n      }\r\n      AxisGroupLayout.prototype.doLayout = function(coll) {\r\n          console.log(\"AxisGroupLayout.doLayout\")\r\n        var diagram = this.diagram;\r\n        diagram.startTransaction(\"AxisGroupLayout\")\r\n          // COLL might be a Diagram or a Group or some Iterable<Part>\r\n         \r\n        var it = this.collectParts(coll).iterator;\r\n        var collection = []\r\n        var dataCollection =[]\r\n        var group = this.group\r\n        // group.location = new go.Point(0,0)\r\n        var maxWidth = 0;\r\n        var maxHeight = 0;\r\n        var centerLine, axisX, axisY,axisXText, axisYText, themeText, labelText1,labelText2,labelText3,labelGroup,waveGroup\r\n        var shiTextColl = []\r\n        var xuTextColl = []\r\n        var oliveWidth\r\n        var oliveHeight\r\n        while (it.next()) {\r\n            var node = it.value;\r\n                // var item = git.value;\r\n            //   console.log(\"item:\",item)\r\n\r\n            dataCollection.push(node.data)\r\n            if(node.data.category == \"wave\"){\r\n                collection.push(node)\r\n            }\r\n            if(!(node instanceof go.Node)){\r\n              continue;\r\n            }\r\n            // 处理文本节点的位置和定位位置\r\n            // if(node.data.category == \"text\"){\r\n              if(node.data.role == \"axisYText\"){\r\n                axisYText = node;\r\n              }\r\n              if(node.data.role == \"axisXText\"){\r\n                axisXText = node;\r\n              }\r\n              if(node.data.role == \"themeText\"){\r\n                themeText = node;\r\n              }\r\n              if(node.data.role == \"shiText\"){\r\n                shiTextColl.push(node)\r\n              }\r\n              if(node.data.role == \"xuText\"){\r\n                xuTextColl.push(node)\r\n              }\r\n            // }\r\n            // 处理label文本节点的位置和定位位置\r\n            // if(node.data.category == \"iconText\"){\r\n              if(node.data.role == \"labelText1\"){\r\n                labelText1 = node;\r\n              }\r\n              if(node.data.role == \"labelText2\"){\r\n                labelText2 = node;\r\n              }\r\n              if(node.data.role == \"labelText3\"){\r\n                labelText3 = node;\r\n              }\r\n              if(node.data.role == \"labelGroup\"){\r\n                labelGroup = node;\r\n              }\r\n            // }\r\n\r\n              if(node.naturalBounds.width > maxWidth){\r\n                maxWidth = node.naturalBounds.width;\r\n              }\r\n              if(node.naturalBounds.height > maxHeight){\r\n                maxHeight = node.naturalBounds.height;\r\n              }\r\n            \r\n            \r\n            if (node.data.category == \"line\") {\r\n                if(node.data.role == \"centerLine\"){\r\n                  centerLine = node;\r\n                }\r\n            }\r\n            if (node.data.group == group.key) {\r\n            // position the node . . .\r\n                if(node.data.category == \"line\"){\r\n                    if(node.data.role == \"axisX\") {\r\n                      node.angle = 0;\r\n                      axisX = node\r\n                    };\r\n                    if(node.data.role == \"axisY\") {\r\n                      axisY = node\r\n                      node.angle = 270;\r\n                    }\r\n                    node.location = group.location.copy().offset(0,0)\r\n                    // node.angle = 270\r\n                }\r\n                if(node.data.category == \"waveGroup\"){\r\n                    waveGroup = node;\r\n                    // node.angle = group.angle\r\n                    oliveWidth = node.data.oliveWidth\r\n                    oliveHeight = node.data.oliveHeight\r\n                    node.location = group.location.copy().offset(0,0)\r\n                    // node.layout.isOngoing = true;\r\n                    // node.layout.isValidLayout = false;\r\n                    // collection.push(node)\r\n                }\r\n\r\n            }\r\n        }\r\n        console.log(`maxHeight:${maxHeight},maxWidth:${maxWidth}`)\r\n        // line.width = 2000\r\n        // line.height = 4\r\n        if(axisY) {\r\n          axisY.angle = 270;\r\n        }\r\n        if(axisX) {\r\n          axisX.angle = 0\r\n        }\r\n        if(waveGroup){\r\n          // var x1 = centerLine.width * Math.cos(Math.abs(360-centerLine.angle%360) / 180 * Math.PI)\r\n          console.log(`waveGroup.width:${waveGroup.width}`)\r\n          var x1 = waveGroup.resizeObject.width * Math.cos(Math.abs(360-waveGroup.angle%360) / 180 * Math.PI)\r\n          var y1 = 10\r\n          var x2 = waveGroup.resizeObject.width * Math.sin(Math.abs(360-waveGroup.angle%360)/ 180 * Math.PI)\r\n          var y2 = 10\r\n          // axisX.desiredSize = new go.Size(x1, y1)\r\n          // axisY.desiredSize = new go.Size(x2, y2)\r\n          this.diagram.model.setDataProperty(axisX.data, \"desiredSize\",`${x1} ${y1}`)\r\n          this.diagram.model.setDataProperty(axisY.data, \"desiredSize\",`${x2} ${y2}`)\r\n          group.width = x1\r\n          group.height = x2\r\n          var shiStroke = waveGroup.data.shiStroke\r\n          var xuStroke = waveGroup.data.xuStroke\r\n          var centerStroke = waveGroup.data.centerStroke || \"#3f5369\"\r\n\r\n          // this.diagram.model.setDataProperty(axisY.data, \"desiredSize\",axisY.width)\r\n        }\r\n\r\n        if(axisXText){\r\n          axisXText.location = group.location.copy().offset(x1, 0)\r\n          axisXText.locationSpot = go.Spot.Top\r\n        }\r\n        if(axisYText){\r\n          axisYText.location = group.location.copy().offset(-10, -x2)\r\n          axisYText.locationSpot = go.Spot.Right\r\n        }\r\n        if(themeText){\r\n          // themeText.location = group.location.copy().offset(0, 0)\r\n          // themeText.locationSpot = new go.Spot(0.7,0,0,0)\r\n        }\r\n        // if(labelText1){\r\n        //   labelText1.location = group.location.copy().offset(0, -x2).offset(40,10)\r\n        // }\r\n        // if(labelText2){\r\n        //   labelText2.location = group.location.copy().offset(0, -x2).offset(40,80)\r\n        // }\r\n        // if(labelText3){\r\n        //   labelText3.location = group.location.copy().offset(0, -x2).offset(40,150)\r\n        // }\r\n        if(labelGroup){\r\n          var itl = labelGroup.findSubGraphParts().iterator;\r\n          while (itl.next()) {\r\n            var n = itl.value;\r\n            if(n.data.role == \"labelText1\"){\r\n              labelText1 = n\r\n            }\r\n            if(n.data.role == \"labelText2\"){\r\n              labelText2 = n\r\n            }\r\n            if(n.data.role == \"labelText3\"){\r\n              labelText3 = n\r\n            }\r\n          }\r\n          if(waveGroup){\r\n            waveGroup.labelText1 = labelText1\r\n            waveGroup.labelText2 = labelText2\r\n            waveGroup.labelText3 = labelText3\r\n          }\r\n          // var tmp1 = group.location.copy().offset(0, -x2).offset(30,0)\r\n          // labelGroup.location = tmp1\r\n          // labelGroup.diagram.model.setDataProperty(labelGroup.data,\"loc\",go.Point.stringify(tmp1))\r\n          // setTimeout(()=>{\r\n          //   diagram.startTransaction(\"labelGroup\");\r\n          //   labelGroup.layout.isOngoing = true;\r\n          //   labelGroup.layout.isValidLayout = false;\r\n          //   diagram.commitTransaction(\"labelGroup\");\r\n          // },350)\r\n          // labelGroup.location = group.location.copy().offset(0, -x2).offset(40,10)\r\n        }\r\n        if(shiStroke && labelText1){\r\n          this.diagram.model.setDataProperty(labelText1.data, \"fill\",shiStroke)\r\n        }\r\n        if(xuStroke && labelText2){\r\n          this.diagram.model.setDataProperty(labelText2.data, \"fill\",xuStroke)\r\n        }\r\n        if(centerStroke && labelText3){\r\n          this.diagram.model.setDataProperty(labelText3.data, \"fill\",centerStroke)\r\n        }\r\n        // collection.sort(function(a,b){\r\n        //     return a.data.order > b.data.order\r\n        // })\r\n        // shiTextColl.sort(function(a,b){\r\n        //     return a.data.order > b.data.order\r\n        // })\r\n        // xuTextColl.sort(function(a,b){\r\n        //     return a.data.order > b.data.order\r\n        // })\r\n        // for(var i=0;i<xuTextColl.length;i++){\r\n        //   xuTextColl[i].location = computeNewRotateLoc(collection[i].location, collection[i].location.copy().offset(collection[i].width/2,collection[i].height/2),collection[i].angle)\r\n        // }\r\n        // collection.forEach(function(obj){\r\n        //     obj.location = group.location.copy().offset(300*(obj.data.order-1),0)\r\n        //     // obj.location = new go.Point(300*(obj.data.order-1),0)\r\n        //     // obj.\r\n        //     // var group = a.findNodeDataForKey(m.group)\r\n        //     obj.location = computeNewRotateLoc(group.location, obj.location, obj.angle)\r\n        // })\r\n        go.Layout.prototype.doLayout.call(this, coll);\r\n        diagram.commitTransaction(\"AxisGroupLayout\");\r\n        // diagram.updateAllTargetBindings()\r\n        return;\r\n        // return;\r\n        // var diagram = this.diagram;\r\n        if (diagram === null) return;\r\n        diagram.startTransaction(\"PoolLayout\");\r\n        // make sure all of the Group Shapes are big enough\r\n        // var minsize = computeMinPoolSize();\r\n        // diagram.findTopLevelGroups().each(function(lane) {\r\n        //   if (!(lane instanceof go.Group)) return;\r\n        //   var shape = lane.selectionObject;\r\n        //   if (shape !== null) {  // change the desiredSize to be big enough in both directions\r\n        //     var sz = computeLaneSize(lane);\r\n        //     shape.width = (!isNaN(shape.width)) ? Math.max(shape.width, sz.width) : sz.width;\r\n        //     shape.height = (isNaN(shape.height) ? minsize.height : Math.max(shape.height, minsize.height));\r\n        //     var cell = lane.resizeCellSize;\r\n        //     if (!isNaN(shape.width) && !isNaN(cell.width) && cell.width > 0) shape.width = Math.ceil(shape.width / cell.width) * cell.width;\r\n        //     if (!isNaN(shape.height) && !isNaN(cell.height) && cell.height > 0) shape.height = Math.ceil(shape.height / cell.height) * cell.height;\r\n        //   }\r\n        // });\r\n        // now do all of the usual stuff, according to whatever properties have been set on this GridLayout\r\n        go.GridLayout.prototype.doLayout.call(this, coll);\r\n        diagram.commitTransaction(\"PoolLayout\");\r\n      };\r\n      // end PoolLayout class\r\n\r\n      module.exports = AxisGroupLayout\n\n\n// WEBPACK FOOTER //\n// ./src/layout/axisGroupLayout.js","var $ = go.GraphObject.make;\r\nvar Base = require('./base')\r\nvar helpers = require('../helpers/helpers.gojs')\r\n  \r\nclass IconTextTemplate extends Base {\r\n    constructor(options){\r\n        super(options)\r\n        // this.nodeProperties = {}\r\n        \r\n    }\r\n\r\n    makeGeo(data, shape, options) {\r\n      // this is much more efficient than calling go.GraphObject.make:\r\n      var {radiusX=150,radiusY=100} = data\r\n      var geo =  new go.Geometry()\r\n        .add(new go.PathFigure(0, 0)  // start point\r\n          .add(new go.PathSegment(go.PathSegment.SvgArc,\r\n          radiusX*2,0,radiusX, radiusY,0,1,options.clockwiseFlag?1:0\r\n              )\r\n            )\r\n          )\r\n          geo.defaultStretch = go.GraphObject.Fill;\r\n          return geo;\r\n    }\r\n\r\n    getShiHalfEllipseShape(){\r\n      return $(go.Shape, {name:\"XU\", stroke: \"red\", fill:\"rgba(0,66,0,0)\",\r\n        // background: \"yellow\",\r\n        stretch: go.GraphObject.Uniform,\r\n        alignment: go.Spot.Bottom,\r\n        alignmentFocus: go.Spot.Bottom,\r\n        // row:1, column:0,margin:0\r\n      },\r\n        // new go.Binding(\"alignment\",\"\",function(data, shape){\r\n        //   if(data.flip){\r\n        //     return go.Spot.Top\r\n        //   }\r\n        //   return go.Spot.Bottom\r\n        // }),\r\n        // new go.Binding(\"alignmentFocus\",\"\",function(data, shape){\r\n        //   if(data.flip){\r\n        //     return go.Spot.Top\r\n        //   }\r\n        //   return go.Spot.Bottom\r\n        // }),\r\n          new go.Binding(\"geometry\", \"\", (data, shape)=>{\r\n            var clockwiseFlag = 0;\r\n            if(data.order%2 == 0){\r\n              data.flip = true;\r\n            }\r\n            if(data.flip){\r\n              clockwiseFlag = 1;\r\n            }\r\n            return this.makeGeo(data, shape, {clockwiseFlag:clockwiseFlag})\r\n          }),\r\n          new go.Binding(\"desiredSize\", \"desiredSize\", function(v) {\r\n                var size = new go.Size(v.width, v.height/2)\r\n                // console.log(\"v:\",v)\r\n                return size\r\n            }).ofObject(\"main\")\r\n        )\r\n    }\r\n    getXuHalfEllipseShape(){\r\n      return $(go.Shape, {name:\"SHI\", stroke: \"blue\", fill:\"rgba(0,66,0,0)\",\r\n        // background: \"gray\",\r\n        stretch: go.GraphObject.Uniform,\r\n        alignment: go.Spot.Bottom,\r\n        strokeDashArray: [5, 5],\r\n        alignmentFocus: go.Spot.Bottom,\r\n        // row:1, column:0,margin:0\r\n      },\r\n          // new go.Binding(\"alignment\",\"\",function(data, shape){\r\n          //   if(data.flip){\r\n          //     return go.Spot.Top\r\n          //   }\r\n          //   return go.Spot.Bottom\r\n          // }),\r\n          // new go.Binding(\"alignmentFocus\",\"\",function(data, shape){\r\n          //   if(data.flip){\r\n          //     return go.Spot.Top\r\n          //   }\r\n          //   return go.Spot.Bottom\r\n          // }),\r\n          new go.Binding(\"geometry\", \"\", (data, shape)=>{\r\n            var clockwiseFlag = 1;\r\n            if(data.order%2 == 0){\r\n              data.flip = true;\r\n            }\r\n            if(data.flip){\r\n              clockwiseFlag = 0;\r\n            }\r\n            return this.makeGeo(data, shape, {clockwiseFlag:clockwiseFlag})\r\n          }),\r\n          new go.Binding(\"desiredSize\", \"desiredSize\", function(v) {\r\n                var size = new go.Size(v.width, v.height/2)\r\n                // console.log(\"v:\",v)\r\n                return size\r\n            }).ofObject(\"main\")\r\n        )\r\n    }\r\n    getTextBuild(){\r\n      return $(go.TextBlock, {\r\n              name: \"TEXT\",\r\n              alignment: new go.Spot(0.5, 0.4),\r\n              font: \"bold 18px 幼圆\",\r\n              editable: true,\r\n              // flip:go.GraphObject.FlipHorizontal,\r\n              //margin: 3, editable: true,\r\n              \r\n              stroke: \"black\",\r\n              isMultiline: true,\r\n              overflow: go.TextBlock.OverflowClip,\r\n              wrap: go.TextBlock.WrapDesiredSize,\r\n              textAlign: \"center\",\r\n              spacingAbove: 4,\r\n              spacingBelow: 4,\r\n              portId: \"TEXT\",\r\n              stretch: go.GraphObject.Uniform\r\n          },\r\n          new go.Binding(\"textAlign\", \"textAlign\", function(v) {\r\n              return ['start', 'center', 'end'].indexOf(v)>-1 ? v : \"center\";\r\n          }).makeTwoWay(),\r\n          new go.Binding(\"spacingAbove\", \"spacingline\", function(v) {\r\n              return helpers.tdTransToNum(v, 4);\r\n          }).makeTwoWay(),\r\n          new go.Binding(\"spacingBelow\", \"spacingline\", function(v) {\r\n              return helpers.tdTransToNum(v, 4);\r\n          }).makeTwoWay(),\r\n          new go.Binding(\"width\", \"width\", function(v) {\r\n              return v-30;\r\n          }).ofObject(\"main\"),\r\n          // new go.Binding(\"height\", \"height\", function (v) {\r\n          //   return v;\r\n          // }).ofObject(\"SHAPE\"),\r\n          new go.Binding(\"text\", \"text\").makeTwoWay(),\r\n          new go.Binding(\"stroke\", \"textStroke\").makeTwoWay(),\r\n          new go.Binding(\"font\", \"font\").makeTwoWay()\r\n      )\r\n    }\r\n    getNodeTemplate(){\r\n      return $(go.Node,\"Spot\",{\r\n        locationObjectName: \"TEXT\",\r\n        movable: true,\r\n        resizable: true,\r\n        resizeObjectName: \"TEXT\",\r\n        selectionObjectName:\"TEXT\",\r\n        // rotatable: false,\r\n        layoutConditions: go.Part.LayoutStandard & go.Part.LayoutRemoved & go.Part.LayoutAdded & go.Part.LayoutNodeSized,\r\n        locationSpot: go.Spot.LeftCenter,\r\n        click: (e, node)=>{\r\n          console.log(node.data)\r\n        },\r\n        doubleClick: function (e, node){\r\n          e.diagram.__trtd.selectText(e, node)\r\n        },\r\n        resizeAdornmentTemplate:  // specify what resize handles there are and how they look\r\n        $(go.Adornment, \"Spot\",\r\n          $(go.Placeholder),  // takes size and position of adorned object\r\n          // $(go.Shape, \"Circle\",  // left resize handle\r\n          //   { alignment: go.Spot.Left, cursor: \"col-resize\",\r\n          //     desiredSize: new go.Size(9, 9), fill: \"lightblue\", stroke: \"dodgerblue\" }),\r\n          $(go.Shape, \"Circle\",  // right resize handle\r\n            { alignment: go.Spot.Right, cursor: \"col-resize\",\r\n              desiredSize: new go.Size(9, 9), fill: \"lightblue\", stroke: \"dodgerblue\" }),\r\n          // $(go.TextBlock, // show the width as text\r\n          //   { alignment: go.Spot.Top, alignmentFocus: new go.Spot(0.5, 1, 0, -2),\r\n          //     stroke: \"dodgerblue\" },\r\n          //   new go.Binding(\"text\", \"adornedObject\",\r\n          //                  function(shp) { return shp.naturalBounds.width.toFixed(0); })\r\n          //       .ofObject())\r\n        ),\r\n      },\r\n      new go.Binding(\"movable\", \"movable\").makeTwoWay(),\r\n      new go.Binding(\"deletable\", \"deletable\").makeTwoWay(),\r\n      // $(go.TextBlock,{\r\n      //   name:\"label\",\r\n      //   // height:30,\r\n        \r\n      //   alignment: go.Spot.Center,\r\n      //   verticalAlignment: go.Spot.Center,\r\n      //   // isMultiline: false,\r\n      //   overflow: go.TextBlock.OverflowEllipsis,\r\n      //   // overflow: go.TextBlock.OverflowClip,\r\n      //   // wrap: go.TextBlock.WrapDesiredSize,\r\n      //   wrap: go.TextBlock.wrap,\r\n      //   stretch: go.GraphObject.Fill,\r\n      //   maxLines: 1,\r\n      //   stroke: \"black\",\r\n      //   editable: true,\r\n      //   textAlign: \"start\",\r\n      //   font: \"18px 'Microsoft YaHei'\"\r\n      // },\r\n      // new go.Binding(\"text\", \"label\").makeTwoWay(),\r\n      // ),\r\n      $(go.TextBlock,{\r\n        name:\"TEXT\",\r\n        width:200, height:30,\r\n        maxSize: new go.Size(NaN, 70),\r\n        minSize: new go.Size(NaN, 70),\r\n        alignment: go.Spot.Center,\r\n        verticalAlignment: go.Spot.Center,\r\n        isMultiline: false,\r\n        overflow: go.TextBlock.OverflowEllipsis,\r\n        // overflow: go.TextBlock.OverflowClip,\r\n        // wrap: go.TextBlock.WrapDesiredSize,\r\n        // wrap: go.TextBlock.wrap,\r\n        stretch: go.GraphObject.Fill,\r\n        maxLines: 5,\r\n        stroke: \"black\",\r\n        editable: true,\r\n        textAlign: \"start\",\r\n        font: \"18px 'Microsoft YaHei'\"\r\n      },\r\n      new go.Binding(\"text\", \"text\").makeTwoWay(),\r\n      new go.Binding(\"width\", \"width\", function(v) {\r\n          //alert(v);\r\n          return v;\r\n      }).makeTwoWay(function(v) {\r\n          return v;\r\n      }),\r\n      new go.Binding(\"height\", \"height\", function(v) {\r\n          //alert(v);\r\n          return v;\r\n      }).makeTwoWay(function(v) {\r\n          return v;\r\n      }),\r\n      ),\r\n      $(go.Panel,\"Vertical\",\r\n        {alignment: go.Spot.Left,\r\n        alignmentFocus: go.Spot.Right,\r\n        },\r\n        $(go.Shape,{\r\n          name:\"ICON\",\r\n          width:16,\r\n          height:16,\r\n          click: function(e){\r\n            console.log(\"icon click\")\r\n          },\r\n          figure:\"Diamond\",\r\n          fill:\"red\",\r\n          strokeWidth:0,\r\n          margin: 3\r\n        },\r\n\r\n        new go.Binding(\"location\", \"loc\", go.Point.parse).makeTwoWay(go.Point.stringify),\r\n        new go.Binding(\"figure\", \"figure\").makeTwoWay(),\r\n        new go.Binding(\"fill\", \"fill\", function(v, obj) {\r\n          return v\r\n      }).makeTwoWay(),\r\n        new go.Binding(\"height\", \"height\", function(v) {\r\n            if(!v) v=30\r\n            return v*2/3;\r\n        }).ofObject(\"label\"),\r\n        new go.Binding(\"width\", \"height\", function(v) {\r\n          if(!v) v=30\r\n            return v*2/3;\r\n        }).ofObject(\"label\"),\r\n        ),\r\n      )\r\n      \r\n      // this.binding,\r\n      // $(go.Shape, \"Ellipse\",\r\n      // { name:\"main\",fill: \"lightgreen\", stroke: null, width: 300, height: 150 },\r\n      //   new go.Binding(\"desiredSize\", \"desiredSize\", function(v, d) {\r\n      //       // console.log(\"vd m\", v, d )\r\n      //       // if(!v) return d.part.findObject(\"SHAPE\").measuredBounds.size;\r\n      //       return go.Size.parse(v)\r\n      //   }).makeTwoWay(function(v) {\r\n      //       return go.Size.stringify(v)\r\n      //   }),\r\n      // ),\r\n      // this.getShiHalfEllipseShape(),\r\n      // this.getXuHalfEllipseShape(),\r\n\r\n      // // this.getUpHalfEllipseShape(),\r\n      // this.getTextBuild()\r\n      )\r\n    }\r\n}\r\n\r\nmodule.exports = IconTextTemplate\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/nodeTemplate/iconTextNodeTemplate.js","var $ = go.GraphObject.make;\r\nvar Base = require('./base')\r\nvar helpers = require('../helpers/helpers.gojs')\r\n  \r\nclass AutoTextTemplate extends Base {\r\n    constructor(options){\r\n        super(options)\r\n        // this.nodeProperties = {}\r\n        \r\n    }\r\n\r\n    clearBorder(node){\r\n        if(node.data.showBorder){\r\n            // if(node.data.text == \"\"){\r\n                node.findObject(\"textBorder\").visible = false;\r\n            // }\r\n        }\r\n    }\r\n\r\n    \r\n    makeGeo(data, shape, options) {\r\n      // this is much more efficient than calling go.GraphObject.make:\r\n      var {radiusX=150,radiusY=100} = data\r\n      var geo =  new go.Geometry()\r\n        .add(new go.PathFigure(0, 0)  // start point\r\n          .add(new go.PathSegment(go.PathSegment.SvgArc,\r\n          radiusX*2,0,radiusX, radiusY,0,1,options.clockwiseFlag?1:0\r\n              )\r\n            )\r\n          )\r\n          geo.defaultStretch = go.GraphObject.Fill;\r\n          return geo;\r\n    }\r\n    getNodeTemplate(){\r\n       var properties = {\r\n          figure: \"Rectangle\",\r\n          fill: \"rgba(0,0,0,0)\",\r\n          strokeWidth: 1,\r\n          stroke: \"rgba(0,0,0,0)\",\r\n          fontSize: 15,\r\n          font: \"sans-serif\"\r\n      };\r\n      var that = this\r\n      var diagram = this.diagram\r\n      return $(go.Node, \"Spot\", {\r\n              \"_controlExpand\": true,\r\n              __trtdNode: that,\r\n              layerName: \"Foreground\",\r\n              zOrder: 10,\r\n              movable: true,\r\n            //   copyable: false,\r\n              visible: true,\r\n              locationSpot: go.Spot.Center,\r\n              resizeCellSize: new go.Size(10, 10),\r\n            //   locationObjectName: \"textBorder\",\r\n            //   selectionObjectName: \"textBorder\",\r\n              resizable: false,\r\n            //   selectable: false,\r\n            //   clickable: false,\r\n              // resizeObjectName: \"SHAPE\", // user can resize the Shape\r\n              rotatable: false,\r\n              location: new go.Point(0, 0),\r\n              //rotateObjectName: \"SHAPE\",  // rotate the Shape without rotating the label\r\n              // doubleClick: selectText,\r\n              toMaxLinks: 1,\r\n              mouseDrop: function(e, obj) {\r\n                var node = obj.part;\r\n                var selnode = e.diagram.selection.first();\r\n\r\n                   // 常变\r\n                   if(selnode.data.category == \"picGroup\" && selnode.data.role == \"cbian\" && node.data.role == \"centerText\"){\r\n                       var oliveNode = e.diagram.findNodeForKey(node.data.olive)\r\n                       if(!oliveNode) return;\r\n                    var it = selnode.findSubGraphParts().iterator;\r\n                    var deleteObjs = []\r\n                    var cbian = {}\r\n                    while (it.next()) {\r\n                        var n = it.value;\r\n                        if(n.data.category == \"autoText\"){\r\n                        if(n.data.locationSpot == \"0 0 0 0\"){\r\n                            cbian.shiText = n.data.text;\r\n                        }\r\n                        if(n.data.locationSpot == \"0 0.5 0 0\"){\r\n                            cbian.centerText = n.data.text;\r\n                        }\r\n                        if(n.data.locationSpot == \"0 1 0 0\"){\r\n                            cbian.xuText = n.data.text;\r\n                        }\r\n                        }\r\n                        deleteObjs.push(n.data)\r\n                    }\r\n                    e.diagram.startTransaction(\"mouseDrop\")\r\n                    // 删除总结图\r\n                    e.diagram.model.removeNodeDataCollection(deleteObjs)\r\n                    var backupSelnode = JSON.parse(JSON.stringify(selnode.data))\r\n                    e.diagram.model.removeNodeData(selnode.data)\r\n        \r\n                    // 添加新橄榄\r\n                    e.diagram.__trtd.addOlive(oliveNode, cbian)\r\n                    e.diagram.commitTransaction(\"mouseDrop\")\r\n                    return;\r\n                }\r\n\r\n            \r\n\r\n                // 互换要点文字,只有云盘里的文字可以互换\r\n                if(selnode.data.subRole == \"coreText\" && node.data.subRole == \"coreText\" || \r\n                    selnode.data.subRole == \"yunpanText\" && node.data.subRole == \"yunpanText\"){\r\n                    e.diagram.model.startTransaction(\"coreTextExchange\")\r\n                    var selOrderX = selnode.data.orderX\r\n                    var selOrderY = selnode.data.orderY\r\n                    var selDimKey = selnode.data.dimKey\r\n                    e.diagram.model.setDataProperty(selnode.data, \"orderX\", node.data.orderX)\r\n                    e.diagram.model.setDataProperty(selnode.data, \"orderY\", node.data.orderY)\r\n                    e.diagram.model.setDataProperty(selnode.data, \"dimKey\", node.data.dimKey)\r\n                    e.diagram.model.setDataProperty(node.data, \"orderX\", selOrderX)\r\n                    e.diagram.model.setDataProperty(node.data, \"orderY\", selOrderY)\r\n                    e.diagram.model.setDataProperty(node.data, \"dimKey\", selDimKey)\r\n                    e.diagram.model.commitTransaction(\"coreTextExchange\")\r\n                }\r\n\r\n                // 云盘互换维度\r\n                if(selnode.data.subRole == \"dimText\" && node.data.subRole == \"dimText\" && \r\n                    selnode.data.category == node.data.category){\r\n                        if(selnode.data.group!= node.data.group) return;\r\n                        if(!selnode.containingGroup) return;\r\n                        if(selnode.containingGroup.data.category != \"yunpanGroup\") return;\r\n                        if(!(selnode.data.dimX == node.data.dimX  || selnode.data.dimY == node.data.dimY )){\r\n                            return;\r\n                        }\r\n\r\n                        e.diagram.model.startTransaction(\"dimTextExchange\")\r\n                        var selOrderX = selnode.data.dimX\r\n                        var selOrderY = selnode.data.dimY\r\n                        var it = node.containingGroup.findSubGraphParts().iterator;\r\n                        var nodeCoreTexts = []\r\n                        var selnodeCoreTexts = []\r\n                        var yunnodeCoreTexts = []\r\n                        var yunselnodeCoreTexts = []\r\n                        var normDim = \"X\"\r\n                        if(selnode.data.dimX == 0){\r\n                            normDim  = \"Y\"\r\n                        }\r\n                        var selOrder = selnode.data[\"dim\"+normDim]\r\n                        var nodeOrder = node.data[\"dim\"+normDim]\r\n                        while (it.next()) {\r\n                            var n = it.value;\r\n                            if(n.data.subRole == \"yunpanText\"){\r\n                                if(n.data[\"order\"+normDim] == nodeOrder){\r\n                                    yunnodeCoreTexts.push(n)\r\n                                }\r\n                                if(n.data[\"order\"+normDim] == selOrder){\r\n                                    yunselnodeCoreTexts.push(n)\r\n                                }\r\n                            }\r\n                        }\r\n                        var tmpX,tmpY;\r\n                        for(var i=0;i<yunnodeCoreTexts.length;i++){\r\n                            e.diagram.model.setDataProperty(yunnodeCoreTexts[i].data, \"order\"+normDim, selOrder)\r\n                        }\r\n                        for(var i=0;i<yunselnodeCoreTexts.length;i++){\r\n                            e.diagram.model.setDataProperty(yunselnodeCoreTexts[i].data, \"order\"+normDim, nodeOrder)\r\n                        }\r\n                        e.diagram.model.setDataProperty(selnode.data, \"dim\"+normDim, nodeOrder)\r\n                        e.diagram.model.setDataProperty(node.data, \"dim\"+normDim, selOrder)\r\n                        e.diagram.model.commitTransaction(\"dimTextExchange\")\r\n                    return;\r\n                    }\r\n\r\n                // 互换维度\r\n                if(selnode.data.subRole == \"dimText\" && node.data.subRole == \"dimText\"){\r\n                    e.diagram.model.startTransaction(\"dimTextExchange\")\r\n                    var selOrderX = selnode.data.dimX\r\n                    var selOrderY = selnode.data.dimY\r\n                    var it = node.containingGroup.findSubGraphParts().iterator;\r\n                    var nodeCoreTexts = []\r\n                    var selnodeCoreTexts = []\r\n                    var yunnodeCoreTexts = []\r\n                    var yunselnodeCoreTexts = []\r\n                    var normDim = \"X\"\r\n                    if(selnode.data.dimX == 0){\r\n                        normDim  = \"Y\"\r\n                    }\r\n                    while (it.next()) {\r\n                        var n = it.value;\r\n                        if(n.data.dimKey == node.data.key){\r\n                            nodeCoreTexts.push(n)\r\n                        }\r\n                        if(n.data.dimKey == selnode.data.key){\r\n                            selnodeCoreTexts.push(n)\r\n                        }\r\n                        if(n.data.subRole == \"yunpanText\"){\r\n                            if(n.data[\"order\"+normDim] == node.data[\"order\"+normDim]){\r\n                                yunnodeCoreTexts.push(n)\r\n                            }\r\n                            if(n.data[\"order\"+normDim] == selnode.data[\"order\"+normDim]){\r\n                                yunselnodeCoreTexts.push(n)\r\n                            }\r\n                        }\r\n                    }\r\n                    console.log(\"selnodeCoreTextsselnodeCoreTextsselnodeCoreTexts\",selnodeCoreTexts.length)\r\n                    var centerOrderX = (node.containingGroup.__yunPointsX.length+1)/2\r\n                    var centerOrderY = (node.containingGroup.__yunPointsY.length+1)/2\r\n\r\n                    if(selnode.data.dimX > centerOrderX){\r\n                        selnodeCoreTexts.sort(function(a,b){\r\n                            return a.data.orderX - b.data.orderX\r\n                        })\r\n                    }\r\n                    if(selnode.data.dimX == centerOrderX){\r\n                        if(selnode.data.dimY > centerOrderY){\r\n                            selnodeCoreTexts.sort(function(a,b){\r\n                                return a.data.orderY - b.data.orderY\r\n                            })\r\n                        }else{\r\n                            selnodeCoreTexts.sort(function(a,b){\r\n                                return b.data.orderY -a.data.orderY\r\n                            })\r\n                        }\r\n                    }\r\n                    if(selnode.data.dimX < centerOrderX){\r\n                        selnodeCoreTexts.sort(function(a,b){\r\n                            return  b.data.orderX - a.data.orderX\r\n                        })\r\n                    }\r\n\r\n                    if(node.data.dimX > centerOrderX){\r\n                        nodeCoreTexts.sort(function(a,b){\r\n                            return a.data.orderX - b.data.orderX\r\n                        })\r\n                    }\r\n                    if(node.data.dimX == centerOrderX){\r\n                        if(node.data.dimY > centerOrderY){\r\n                            nodeCoreTexts.sort(function(a,b){\r\n                                return a.data.orderY - b.data.orderY\r\n                            })\r\n                        }else{\r\n                            nodeCoreTexts.sort(function(a,b){\r\n                                return b.data.orderY -a.data.orderY\r\n                            })\r\n                        }\r\n                    }\r\n                    if(node.data.dimX < centerOrderX){\r\n                        nodeCoreTexts.sort(function(a,b){\r\n                            return  b.data.orderX - a.data.orderX\r\n                        })\r\n                    }\r\n\r\n                    var tmpX,tmpY;\r\n                    for(var i=0;i<selnodeCoreTexts.length;i++){\r\n                        tmpX = selnodeCoreTexts[i].data.orderX;\r\n                        tmpY = selnodeCoreTexts[i].data.orderY;\r\n                        e.diagram.model.setDataProperty(selnodeCoreTexts[i].data, \"orderX\", nodeCoreTexts[i].data.orderX)\r\n                        e.diagram.model.setDataProperty(selnodeCoreTexts[i].data, \"orderY\", nodeCoreTexts[i].data.orderY)\r\n                        e.diagram.model.setDataProperty(nodeCoreTexts[i].data, \"orderX\", tmpX)\r\n                        e.diagram.model.setDataProperty(nodeCoreTexts[i].data, \"orderY\", tmpY)\r\n                    }\r\n                    e.diagram.model.setDataProperty(selnode.data, \"dimX\", node.data.dimX)\r\n                    e.diagram.model.setDataProperty(selnode.data, \"dimY\", node.data.dimY)\r\n                    e.diagram.model.setDataProperty(node.data, \"dimX\", selOrderX)\r\n                    e.diagram.model.setDataProperty(node.data, \"dimY\", selOrderY)\r\n                    e.diagram.model.commitTransaction(\"dimTextExchange\")\r\n                }\r\n\r\n\r\n                \r\n\r\n                if (selnode.data.category != \"wave\") {\r\n                    return;\r\n                }\r\n                if(node.data.role != \"centerText\"){\r\n                    return;\r\n                }\r\n                if(!node){\r\n                  // node.containingGroup.layout.isValidLayout = false\r\n                  return;\r\n                }\r\n                if(selnode.data.group != obj.data.group){\r\n                  return;\r\n                }\r\n                e.diagram.startTransaction(\"mouseDrop\")\r\n                selnode.__oldOrder = selnode.data.order\r\n                e.diagram.model.setDataProperty(selnode.data, \"order\",node.data.order+0.5)\r\n                var xuText = e.diagram.model.findNodeDataForKey(selnode.data.xuText)\r\n                var shiText = e.diagram.model.findNodeDataForKey(selnode.data.shiText)\r\n                e.diagram.model.setDataProperty(shiText, \"order\",node.data.order+0.5)\r\n                e.diagram.model.setDataProperty(xuText, \"order\",node.data.order+0.5)\r\n                // node.containingGroup.layout.isValidLayout = false\r\n                e.diagram.commitTransaction(\"mouseDrop\")\r\n              },\r\n              mouseDragEnter: function(e, obj) {\r\n                var node = obj.part;\r\n                var selnode = e.diagram.selection.first();\r\n                if(!selnode) return;\r\n                if(selnode.data.subRole == \"coreText\" && node.data.subRole == \"coreText\" || \r\n                selnode.data.subRole == \"yunpanText\" && node.data.subRole == \"yunpanText\"){\r\n                    selnode.areaBackground = null\r\n                    node.areaBackground = \"RGB(107,208,137)\"\r\n                }\r\n                if(selnode.data.subRole == \"dimText\" && node.data.subRole == \"dimText\"){\r\n                    selnode.areaBackground = null\r\n                    node.areaBackground = \"RGB(107,208,137)\"\r\n                }\r\n\r\n                if(node.data.role == \"centerText\"){\r\n                    node.layerName = \"Background\"\r\n                }\r\n                // if (!(selnode instanceof go.Node)  || selnode.data.role != \"freeText\"  || selnode.category != \"autoText\" ||selnode.data.subRole != \"coreText\") {\r\n                //     return;\r\n                // }\r\n\r\n\r\n\r\n                // //var sat = node.selectionAdornmentTemplate;\r\n                // //var adorn = sat.copy();\r\n                // //adorn.adornedObject = node;\r\n                // //node.addAdornment(\"dragEnter\", adorn);\r\n    \r\n                // //if (!mayWorkFor(selnode, node)) return;\r\n                // var shape = node.findObject(\"SHAPE\");\r\n                // if (shape) {\r\n                //     shape._prevFill = shape.fill; // remember the original brush\r\n                //     shape.fill = \"darkred\";\r\n                // }\r\n    \r\n            },\r\n            mouseDragLeave: function(e, obj) {\r\n                var node = obj.part;\r\n                var selnode = e.diagram.selection.first();\r\n                // var shape = node.findObject(\"SHAPE\");\r\n                if(selnode.data.subRole == \"coreText\" && node.data.subRole == \"coreText\"|| \r\n                selnode.data.subRole == \"yunpanText\" && node.data.subRole == \"yunpanText\"){\r\n                    node.areaBackground = null\r\n                }\r\n                if(selnode.data.subRole == \"dimText\" && node.data.subRole == \"dimText\"){\r\n                    node.areaBackground = null\r\n                }\r\n                if(node.data.role == \"centerText\"){\r\n                    node.layerName = \"Foreground\"\r\n                }\r\n                //node.removeAdornment(\"dragEnter\");\r\n            },\r\n              selectionChanged: (node)=>{\r\n                console.log(\"selectionChanged\",node)\r\n\r\n                if(node.data.category != \"autoText\" || node.data.orderX ==null \r\n                || node.data.orderY ==null || node.data.role != \"freeText\" || node.data.subRole !=\"coreText\"|| node.data.subRole !=\"yunpanText\"){\r\n                    return;\r\n                }\r\n\r\n                if( !node.containingGroup || node.containingGroup.data.category != \"yunGroup\" || node.containingGroup.data.category != \"yunpanGroup\"){\r\n                    return;\r\n                }\r\n\r\n                if(node.containingGroup.data.beginSpark != \"line\"){\r\n                    return;\r\n                }\r\n                if(node.containingGroup.__yunPointsX && node.containingGroup.__yunPointsY){\r\n                    var centerOrderX = (node.containingGroup.__yunPointsX.length+1)/2\r\n                    var centerOrderY = (node.containingGroup.__yunPointsY.length+1)/2\r\n                    if(node.data.orderX == centerOrderX && node.data.orderY == centerOrderY){\r\n                        // 中心文字不参与变色\r\n                        return;\r\n                    }\r\n                    var orderX = node.data.orderX, orderY=node.data.orderY\r\n                    if(orderX == centerOrderX){\r\n                        orderX = orderY\r\n                    }\r\n                    if(orderY == centerOrderY){\r\n                        orderY = orderX\r\n                    }\r\n                    var shapeStrokes = node.containingGroup.data.shapeStrokes\r\n                    var showShape = node.containingGroup.data.showShape; // 是否显示矩形\r\n                    if(node.isSelected){\r\n                        if(node.containingGroup.data.snapType == \"between\"){\r\n                            var diff = Math.max(Math.abs(node.data.orderX - centerOrderX), Math.abs(node.data.orderY - centerOrderY))+1\r\n                        }else{\r\n                            var diff = Math.max(Math.abs(node.data.orderX - centerOrderX), Math.abs(node.data.orderY - centerOrderY))\r\n                        }\r\n                        console.log(\"diff:\",diff,node.data.orderX,node.data.orderY)\r\n                        var it = node.containingGroup.findSubGraphParts().iterator;\r\n\r\n                        console.log(\"showShape\",showShape)\r\n                        // var beginSpark = node.containingGroup.data.beginSpark; // 是否显示矩形\r\n                        var shape = null;\r\n                        while (it.next()) {\r\n                            var n = it.value;\r\n                            if(n.data.category == \"autoText\" && n.data.orderX !=null \r\n                            && n.data.orderY !=null && n.data.role == \"freeText\" ){\r\n                                n.findObject(\"textBorder\").visible = false;\r\n                                // if((Math.abs(n.data.orderX-centerOrderX) == Math.abs(orderX-centerOrderX) \r\n                                //     || Math.abs(n.data.orderX-centerOrderY) == Math.abs(orderY-centerOrderY)) \r\n                                // && !(Math.abs(n.data.orderX-centerOrderY) < Math.abs(orderY-centerOrderY) \r\n                                //     && Math.abs(n.data.orderX-centerOrderX) < Math.abs(orderX-centerOrderX))){\r\n                                //     n.areaBackground = \"red\"\r\n                                // }\r\n\r\n                                if(Math.abs(n.data.orderX-centerOrderX) == Math.abs(orderX-centerOrderX)\r\n                                && Math.abs(n.data.orderY-centerOrderY) <= Math.abs(orderY-centerOrderY)\r\n                                ||Math.abs(n.data.orderX-centerOrderX) <= Math.abs(orderX-centerOrderX)\r\n                                && Math.abs(n.data.orderY-centerOrderY) == Math.abs(orderY-centerOrderY)){\r\n                                    // n.findObject(\"place\").visible = true;\r\n                                    n.areaBackground = \"white\"\r\n                                    n.zOrder = 999\r\n                                }\r\n\r\n                            }\r\n                            if(n.data.category == \"shape\" && n.data.role == \"background\"){\r\n                                var obj = n.findObject(\"SHAPE\")\r\n                                // console.log(\"dfsdfsdfsdf\", obj)\r\n                                if(n.data.gridWidth == diff*2){\r\n                                    shape = obj;\r\n                                    // if(showShape){\r\n                                        // n.visible = true\r\n                                    // }\r\n                                    if(!obj.__prestroke){\r\n                                        obj.__prestroke = obj.stroke\r\n                                        obj.stroke = \"rgba(255,0,0,0.5)\"\r\n                                    }\r\n                                }else{\r\n                                    if(obj.__prestroke){\r\n                                        obj.stroke = obj.__prestroke\r\n                                        delete obj.__prestroke\r\n                                    }\r\n                                }\r\n                            }\r\n\r\n                        }\r\n                        if(!shape){\r\n                            if(node.containingGroup.data.snapType == \"between\"){\r\n                                var gridWidth = diff*2;\r\n                            }else{\r\n                                var gridWidth = diff*2\r\n                            }\r\n                            console.log(\"addShape\")\r\n                            node.diagram.model.startTransaction(\"addShape\");\r\n                            var shapeData = {\"deletable\":true, \r\n                            \"role\":\"background\", \r\n                            \"category\":\"shape\", \r\n                            // \"loc\":\"-1532.0268216255727 9.121091688849674\", \r\n                            \"loc\":go.Point.stringify(new go.Point(node.containingGroup.__yunPointsX[centerOrderX-1],node.containingGroup.__yunPointsY[centerOrderY-1])), \r\n                            \"movable\":true, \r\n                            \"group\":-19, \r\n                            \"key\": helpers.guid(), \r\n                            \"orderX\":10, \r\n                            \"orderY\":10, \r\n                            \"gridWidth\":gridWidth, \r\n                            \"stroke\":shapeStrokes[diff-1],\r\n                             \"visible\":true, \"strokeDashArray\":\"[0,0]\", \"strokeWidth\":3,\r\n                            //   \"desiredSize\":\"1263 1263\"\r\n                            };\r\n                             node.diagram.model.addNodeData(shapeData)\r\n                            node.diagram.model.commitTransaction(\"addShape\");\r\n                            setTimeout(()=>{\r\n                                var nod = node.diagram.findNodeForKey(shapeData.key)\r\n                                console.log(\"add shape add shape\")\r\n                                if(nod){\r\n                                    // nod.visible = true\r\n                                    var obj = nod.findObject(\"SHAPE\")\r\n                                    if(!obj.__prestroke){\r\n                                        obj.__prestroke = obj.stroke\r\n                                        obj.stroke = \"rgba(255,0,0,0.5)\"\r\n                                    }\r\n                                }\r\n                            },100)\r\n                        }\r\n                    }else{\r\n                        var it = node.containingGroup.findSubGraphParts().iterator;\r\n                        while (it.next()) {\r\n                            var n = it.value;\r\n                            if(n.data.category == \"autoText\" && n.data.orderX !=null \r\n                            && n.data.orderY !=null && n.data.role == \"freeText\" ){\r\n                                // n.findObject(\"textBorder\").visible = false;\r\n                                // if((n.data.orderX == orderX || n.data.orderY == orderY) \r\n                                // && !(n.data.orderX < orderX && n.data.orderY <orderY )){\r\n                                //     n.areaBackground = \"red\"\r\n                                // }\r\n\r\n                                if(Math.abs(n.data.orderX-centerOrderX) == Math.abs(orderX-centerOrderX)\r\n                                && Math.abs(n.data.orderY-centerOrderY) <= Math.abs(orderY-centerOrderY)\r\n                                ||Math.abs(n.data.orderX-centerOrderX) <= Math.abs(orderX-centerOrderX)\r\n                                && Math.abs(n.data.orderY-centerOrderY) == Math.abs(orderY-centerOrderY)){\r\n                                    // n.findObject(\"textBorder\").visible = true;\r\n                                    // n.findObject(\"place\").visible = false;\r\n                                    n.areaBackground = null\r\n                                    n.zOrder = NaN\r\n                                }\r\n\r\n                            }\r\n                            if(n.data.category == \"shape\" && n.data.role == \"background\"){\r\n                                var obj = n.findObject(\"SHAPE\")\r\n                                // console.log(\"dfsdfsdfsdf\", obj)\r\n                                if(!showShape){\r\n                                    // n.visible = false\r\n                                    obj.stroke = \"rgba(255,0,0,0)\"\r\n                                }\r\n                                if(n.data.gridWidth == diff*2){\r\n                                    if(!obj.__prestroke){\r\n                                        obj.__prestroke = obj.stroke\r\n                                        obj.stroke = \"rgba(255,0,0,0.7)\"\r\n\r\n                                    }\r\n                                }else{\r\n                                    \r\n                                    if(obj.__prestroke){\r\n                                        obj.stroke = obj.__prestroke\r\n                                        delete obj.__prestroke\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                }\r\n\r\n              },\r\n              click: (e, node)=>{\r\n                console.log(node.data)\r\n\r\n                // if(node.data.role == \"centerText\"){\r\n                //     var waveNode = node.diagram.findNodeForKey(node.data.olive)\r\n                //     node.layerName = \"Background\"\r\n                //     if(waveNode){\r\n                //         node.diagram.select(waveNode)\r\n                //     }\r\n                // }\r\n                // e.diagram.model.startTransaction(\"click\")\r\n                // e.diagram.model.setDataProperty(node.data, \"dimKey\", -124)\r\n                // e.diagram.model.setDataProperty(node.data,\"dimKey\", -73)\r\n                // e.diagram.model.setDataProperty(node.data,\"dimKey\", -141)\r\n                // e.diagram.model.setDataProperty(node.data,\"dimKey\", -74)\r\n\r\n\r\n\r\n\r\n                // e.diagram.model.setDataProperty(node.data, \"dimKey\", -124)\r\n                // e.diagram.model.setDataProperty(node.data,\"dimKey\", -141)\r\n                // e.diagram.model.setDataProperty(node.data,\"dimKey\", -158)\r\n                // e.diagram.model.setDataProperty(node.data,\"dimKey\", -176)\r\n                // e.diagram.model.setDataProperty(node.data,\"dimKey\", -73)\r\n                // e.diagram.model.setDataProperty(node.data,\"dimKey\", -74)\r\n                // e.diagram.model.setDataProperty(node.data,\"dimKey\", -175)\r\n                // e.diagram.model.setDataProperty(node.data,\"dimKey\", -177)\r\n                // node.data.dimKey = -124\r\n                // node.data.dimKey = -141\r\n                // node.data.dimKey = -158\r\n                // node.data.dimKey = -176\r\n                // node.data.dimKey = -73\r\n                // node.data.dimKey = -74\r\n                // node.data.dimKey = -175\r\n                // node.data.dimKey = -177\r\n                \r\n                // e.diagram.model.commitTransaction(\"click\")\r\n\r\n              },\r\n            //   rotateAdornmentTemplate:  // specify appearance of rotation handle\r\n            //   $(go.Adornment,\r\n            //     { locationSpot: go.Spot.Center },\r\n            //     $(go.Shape, \"BpmnActivityLoop\",\r\n            //       { width: 12, height: 12, cursor: \"pointer\",\r\n            //         background: \"transparent\", stroke: \"dodgerblue\", strokeWidth: 2 })\r\n            //     ),\r\n              mouseOver: function(e, node) {\r\n                // if(node.data.hyperlink){\r\n                //   var textObj = node.findObject('TEXT');\r\n                //   textObj.isUnderline = true;\r\n                // }\r\n                console.log(\"mouseOvermouseOvermouseOver\")\r\n                if(node.data.showBorder){\r\n                    if(node.data.text == \"\" && (node.data.role == \"xuText\" || node.data.role == \"shiText\" )){\r\n                        node.findObject(\"textBorder\").visible = true;\r\n                    }\r\n                }\r\n                if(node.data.role == \"centerText\"){\r\n                    node.layerName = \"Background\"\r\n                    // node.diagram.model.startTransaction(\"centerText\")\r\n                    // node.diagram.model.setDataProperty(node.data,\"layerName\", \"Background\")\r\n                    // node.diagram.model.commitTransaction(\"centerText\")\r\n                }\r\n                //   node.areaBackground = \"mediumslateblue\"\r\n                // }\r\n\r\n                // if(!node.containingGroup) return;\r\n                // var it = node.containingGroup.findSubGraphParts().iterator;\r\n                // while (it.next()) {\r\n                //     var n = it.value;\r\n                //     if(n.data.category == \"autoText\"){\r\n                //         if(n.data.order == node.data.order){\r\n                //             // locateNode = n;\r\n                //             n.areaBackground = \"mediumslateblue\"\r\n                //         }\r\n                //     }\r\n                // }\r\n                // diagram.__trtd.showNodeRemarkTips(e, node);\r\n                },\r\n            mouseLeave: function(e, node) {\r\n            //   if(node.data.text == \"\"){\r\n                if(node.data.showBorder){\r\n                    // if(node.data.text == \"\"){\r\n                        node.findObject(\"textBorder\").visible = false;\r\n                    // }\r\n                }\r\n                if(node.data.role == \"centerText\"){\r\n                    node.layerName = \"Foreground\"\r\n                    // node.diagram.model.startTransaction(\"centerText\")\r\n                    // node.diagram.model.setDataProperty(node.data,\"layerName\", \"Foreground\")\r\n                    // node.diagram.model.commitTransaction(\"centerText\")\r\n                }\r\n                // node.areaBackground = null\r\n            //   }\r\n            },\r\n            //   layoutConditions: go.Part.LayoutStandard,\r\n              layoutConditions: go.Part.LayoutStandard & go.Part.LayoutRemoved & go.Part.LayoutAdded & ~go.Part.LayoutNodeSized,\r\n              //layoutConditions:~go.Part.LayoutAdded,\r\n              // fromLinkable: true, toLinkable: true,\r\n              alignment: go.Spot.Center,\r\n              alignmentFocus: go.Spot.Center,\r\n              contextMenu: diagram.__trtd.getNodeContextMenu(),\r\n              // resizeAdornmentTemplate:  // specify what resize handles there are and how they look\r\n              // $(go.Adornment, \"Spot\",\r\n              //   $(go.Placeholder),  // takes size and position of adorned object\r\n              //   $(go.Shape, \"Circle\",  // left resize handle\r\n              //     { alignment: go.Spot.Left, cursor: \"col-resize\",\r\n              //       desiredSize: new go.Size(9, 9), fill: \"lightblue\", stroke: \"dodgerblue\" }),\r\n              //   $(go.Shape, \"Circle\",  // right resize handle\r\n              //     { alignment: go.Spot.Right, cursor: \"col-resize\",\r\n              //       desiredSize: new go.Size(9, 9), fill: \"lightblue\", stroke: \"dodgerblue\" }),\r\n              // $(go.Shape, \"Circle\",  // right resize handle\r\n              // { alignment: go.Spot.Top, cursor: \"col-resize\",\r\n              // desiredSize: new go.Size(9, 9), fill: \"lightblue\", stroke: \"dodgerblue\" }),\r\n              // $(go.Shape, \"Circle\",  // right resize handle\r\n              // { alignment: go.Spot.Bottom, cursor: \"col-resize\",\r\n              // desiredSize: new go.Size(9, 9), fill: \"lightblue\", stroke: \"dodgerblue\" }),\r\n              //   // $(go.TextBlock, // show the width as text\r\n              //   //   { alignment: go.Spot.Top, alignmentFocus: new go.Spot(0.5, 1, 0, -2),\r\n              //   //     stroke: \"dodgerblue\" },\r\n              //   //   new go.Binding(\"text\", \"adornedObject\",\r\n              //   //                  function(shp) { return shp.naturalBounds.width.toFixed(0); })\r\n              //   //       .ofObject())\r\n              // ),\r\n              doubleClick: function (e, node){\r\n                  e.diagram.__trtd.selectText(e, node)\r\n              }\r\n\r\n              // selectionAdornmentTemplate: nodeSelectionAdornmentTemplate,\r\n          },\r\n          new go.Binding(\"locationSpot\", \"locationSpot\", function(v){\r\n              return go.Spot.parse(v)\r\n          }).makeTwoWay(function(v){\r\n              return go.Spot.stringify(v)\r\n          }),\r\n          new go.Binding(\"visible\", \"visible\").makeTwoWay(),\r\n          new go.Binding(\"deletable\", \"deletable\").makeTwoWay(),\r\n          new go.Binding(\"movable\", \"movable\").makeTwoWay(),\r\n          new go.Binding(\"rotatable\", \"rotatable\").makeTwoWay(),\r\n          new go.Binding(\"location\", \"loc\", go.Point.parse).makeTwoWay(go.Point.stringify),\r\n          new go.Binding(\"isShadowed\", \"isShadowed\").makeTwoWay(),\r\n          new go.Binding(\"angle\", \"angle\").makeTwoWay(),\r\n          new go.Binding(\"selectable\", \"selectable\").makeTwoWay(),\r\n          new go.Binding(\"copyable\", \"copyable\").makeTwoWay(),\r\n          new go.Binding(\"layerName\", \"layerName\", function(v, d) {\r\n              return v ? v : \"\";\r\n          }),\r\n          $(go.TextBlock, {\r\n                  name: \"TEXT\",\r\n                  alignment: new go.Spot(0, 0),\r\n                  font: \"18px 'Microsoft YaHei'\",\r\n                  editable: false,\r\n                //   areaBackground:\"gray\",\r\n                  //margin: 3, editable: true,\r\n                //   background:\"yellow\",\r\n                  stroke: \"black\",\r\n                  isMultiline: true,\r\n                  overflow: go.TextBlock.OverflowClip,\r\n                  wrap: go.TextBlock.WrapDesiredSize,\r\n                  textAlign: \"center\",\r\n                  verticalAlignment: go.Spot.Center,\r\n                  spacingAbove: 4,\r\n                  spacingBelow: 4,\r\n                  portId: \"TEXT\",\r\n                  margin:5,\r\n                  maxSize:new go.Size(600,NaN),\r\n                  minSize: new go.Size(10,10),\r\n                  stretch: go.GraphObject.UniformToFill,\r\n                  textEdited: function(textBlock,oldv,newv){\r\n\r\n                    // // if(textBlock.part.containingGroup.data.textAngle == \"horizontal\"){\r\n                    //   var centerText = textBlock.part.diagram.model.findNodeDataForKey(textBlock.part.data.centerText)\r\n                    //   if(centerText){\r\n                    //     console.log(\"centerTextcenterTextcenterTextcenterText\")\r\n                    var part = textBlock.part\r\n                    if(newv.trim() == \"\" &&(part.data.role == \"shiText\" || part.data.role == \"xuText\")){\r\n                        textBlock.part.diagram.model.startTransaction(\"text\")\r\n                        textBlock.part.diagram.model.setDataProperty(textBlock.part.data,\"nloc\", null)\r\n                        textBlock.part.diagram.model.commitTransaction(\"text\")\r\n                    }\r\n                    //   }\r\n                    // //   return;\r\n                    // // }\r\n                    // setTimeout(function(){\r\n                    //   console.log(\"textEditedtextEditedtextEdited\",textBlock.lineCount)\r\n                    //   if(!textBlock.text) return;\r\n                    //   if(textBlock.text && textBlock.text.trim() == \"\") return;\r\n                    //   if(textBlock.lineCount %2 != 0){\r\n                    //     if(newv[newv.length-1] == \"\\n\"){\r\n                    //       textBlock.text = newv.substring(0, newv.length-1)\r\n                    //       return;\r\n                    //     }\r\n                    //     textBlock.text = newv+\"\\n\"\r\n                    //   }\r\n                    // },100)\r\n                    \r\n                    // var enterCount = 0;\r\n                    if(textBlock.part.data.role && textBlock.part.data.role.indexOf(\"labelText\") > -1 ){\r\n                        textBlock.part.containingGroup.layout.isValidLayout = false\r\n                    }\r\n                    // for(var i=0;i<newv.length;i++){\r\n                      \r\n                    // }\r\n                    // textBlock.part.updateTargetBindings()\r\n    \r\n                    // if(textBlock.lineCount %2 != 0){\r\n                    //   if(newv[newv.length-1] == \"\\n\"){\r\n                    //     textBlock.text = newv.substring(0, newv.length-1)\r\n                    //     return;\r\n                    //   }\r\n                    //   textBlock.text = newv+\"\\n\"\r\n                    // }\r\n                  },\r\n              },\r\n              new go.Binding(\"background\", \"background\", function(v) {\r\n                  return v;\r\n              }).makeTwoWay(),\r\n              new go.Binding(\"areaBackground\", \"areaBackground\", function(v) {\r\n                  return v;\r\n              }).makeTwoWay(),\r\n              new go.Binding(\"textAlign\", \"textAlign\", function(v) {\r\n                  return v;\r\n              }).makeTwoWay(),\r\n              new go.Binding(\"spacingAbove\", \"spacingline\", function(v) {\r\n                  return helpers.tdTransToNum(v, 4);\r\n              }).makeTwoWay(),\r\n              new go.Binding(\"spacingBelow\", \"spacingline\", function(v) {\r\n                  return helpers.tdTransToNum(v, 4);\r\n              }).makeTwoWay(),\r\n              new go.Binding(\"maxSize\",\"\",function(data,d,m){\r\n                  // console.log(\"maxSize\",v,m,d)\r\n                  var width = NaN\r\n                  var height = NaN\r\n                  if(data.width){\r\n                      width = data.width\r\n                  }\r\n                  if(data.height){\r\n                      height = data.height\r\n                  }\r\n\r\n                  return new go.Size(width,height)\r\n              }),\r\n              new go.Binding(\"minSize\",\"minSize\",function(v){\r\n                  // console.log(\"maxSize\",v,m,d)\r\n\r\n                  return go.Size.parse(v)\r\n              }),\r\n              // new go.Binding(\"width\", \"width\", function(v) {\r\n              //     return v;\r\n              // }).makeTwoWay(),\r\n              // new go.Binding(\"height\", \"height\", function(v) {\r\n              //     return v;\r\n              // }).makeTwoWay(),\r\n              // new go.Binding(\"height\", \"height\", function (v) {\r\n              //   return v;\r\n              // }).ofObject(\"SHAPE\"),\r\n              new go.Binding(\"text\", \"text\").makeTwoWay(),\r\n              new go.Binding(\"stroke\", \"textStroke\").makeTwoWay(),\r\n              new go.Binding(\"font\", \"font\").makeTwoWay()\r\n          ),\r\n          $(go.Panel,\"Vertical\",\r\n            {alignment: go.Spot.Left,\r\n            alignmentFocus: go.Spot.Right,\r\n            },\r\n            $(go.Shape,{\r\n                name:\"ICON\",\r\n                width:16,\r\n                height:16,\r\n                visible: false,\r\n                click: function(e){\r\n                    console.log(\"icon click\")\r\n                },\r\n                figure:\"Circle\",\r\n                fill:\"red\",\r\n                strokeWidth:0,\r\n                margin: 3\r\n            },\r\n    \r\n            // new go.Binding(\"location\", \"loc\", go.Point.parse).makeTwoWay(go.Point.stringify),\r\n            new go.Binding(\"figure\", \"figure\").makeTwoWay(),\r\n            new go.Binding(\"visible\", \"iconVisible\").makeTwoWay(),\r\n            new go.Binding(\"fill\", \"fill\", function(v, obj) {\r\n                return v\r\n            }).makeTwoWay()\r\n            )\r\n        ),\r\n        $(go.Shape,\"Rectangle\",{\r\n            name: \"textBorder\",\r\n            stroke: \"green\",\r\n            strokeWidth: 3,\r\n            strokeDashArray: [10, 5],\r\n            visible:false,\r\n            fill:\"transparent\",\r\n            alignment: go.Spot.Center,\r\n            // alignmentFocus: go.Spot.Right,\r\n            width:100,\r\n            height:270, \r\n        },\r\n        new go.Binding(\"stroke\",\"textStroke\"),\r\n        new go.Binding(\"desiredSize\",\"\", function(v,d){\r\n            // console.log(\"vvvvvvvvvvvvv,\",v,d)\r\n            if(!helpers.checkPhone()){\r\n                // return new go.Size(Math.max(d.part.naturalBounds.width,100)-3, Math.max(d.part.naturalBounds.height,100)-3);\r\n                return new go.Size(d.part.naturalBounds.width-3, d.part.naturalBounds.height-3);\r\n            }\r\n            var olive = d.part.diagram.findNodeForKey(d.part.data.olive)\r\n            return new go.Size(olive.naturalBounds.width-3, olive.naturalBounds.height);\r\n            // return new go.Size(d.part.actualBounds.width-3, d.part.actualBounds.height-3);\r\n        })\r\n    ),\r\n        $(go.Shape,\"Circle\",{\r\n            name: \"place\",\r\n            stroke: \"red\",\r\n            strokeWidth: 1,\r\n            strokeDashArray: null,\r\n            visible:false,\r\n            fill:\"transparent\",\r\n            alignment: go.Spot.Center,\r\n            // alignmentFocus: go.Spot.Right,\r\n            width:50,\r\n            height:50, \r\n        },\r\n        new go.Binding(\"stroke\",\"placeStroke\"),\r\n        )\r\n      )\r\n    }\r\n}\r\n\r\nmodule.exports = AutoTextTemplate\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/nodeTemplate/autoTextNodeTemplate.js","var $ = go.GraphObject.make;\r\nvar Base = require('./base')\r\nvar helpers = require('../helpers/helpers.gojs')\r\n// var labelGroupLayout = require(\"../layout/labelGroupLayout\")\r\n\r\nclass LabelGroupNodeTemplate extends Base {\r\n    constructor(options){\r\n        super(options)\r\n        // this.nodeProperties = {}\r\n        \r\n    }\r\n    \r\n    switchBorder(group,flag){\r\n      // group.diagram.startTransaction()\r\n      // group.findObject(\"groupBorder\").opacity = flag?1:0;\r\n      group.findObject(\"groupBorder\").opacity = flag?1:0;\r\n      // group.diagram.commitTransaction()\r\n    }\r\n\r\n    hiddenAllText(group){\r\n      console.log(\"hiddenAllTexthiddenAllTexthiddenAllText\")\r\n      group.diagram.startTransaction()\r\n      var it = group.findSubGraphParts().iterator;\r\n      var oldStatus = null;\r\n      while (it.next()) {\r\n          var n = it.value;\r\n          if(oldStatus==null){\r\n            oldStatus = n.visible;\r\n          }\r\n          if(n.data.category == \"autoText\"){\r\n             group.diagram.model.setDataProperty(n.data,\"visible\", !oldStatus)\r\n          }\r\n      }\r\n      group.diagram.commitTransaction()\r\n    }\r\n\r\n    addLabelText(e, node){\r\n      \r\n      var data = {\"text\":\"说明：内容\",\r\n       \"deletable\":true, \r\n       \"fill\":\"black\", \r\n       \"iconVisible\":true, \r\n       \"locationSpot\":\"0 0 0 0\", \r\n       \"textAlign\":\"start\", \r\n       \"category\":\"autoText\", \r\n       \"loc\": `${node.location.x+30} ${node.location.y}`, \r\n       \"movable\":false, \"group\":node.data.key\r\n      }\r\n      this.diagram.startTransaction(\"addLabelText\")\r\n      this.diagram.model.addNodeData(data);\r\n      this.diagram.commitTransaction(\"addLabelText\")\r\n    }\r\n\r\n    getNodeTemplate(){\r\n      var that = this\r\n      return $(go.Group, \"Spot\",\r\n      { \r\n        __trtdNode: that,\r\n        // copyable: false,\r\n        // selectionObjectName: \"groupBorder\",\r\n        layerName: \"default\",\r\n        locationObjectName: \"groupBorder\",\r\n        zOrder: 5,\r\n        // margin:30,\r\n        // padding:30,\r\n        background:\"rgba(0,0,0,0)\",\r\n        rotatable: false,\r\n        minSize: new go.Size(200,100),\r\n        locationSpot: go.Spot.Center,\r\n        toolTip:  // define a tooltip for each node that displays the color as text\r\n        $(\"ToolTip\",\r\n          $(go.TextBlock, { margin: 4 },\r\n            new go.Binding(\"text\", \"\", function(data,p){\r\n              // console.log(\"tooltip:\",p,data)\r\n              return \"双击显示/隐藏\"\r\n            })\r\n          )\r\n        ),  // end of Adornment\r\n        // rotationSpot: go.Spot.LeftCenter,\r\n        // alignment: go.Spot.Left,\r\n        // alignmentFocus: go.Spot.Left,\r\n        // rotateObject:\"PH\",\r\n        click: (e, node)=>{\r\n          console.log(node.data)\r\n        },\r\n        selectable: true,\r\n        // selectionAdornmentTemplate: this.getNodeSelectionAdornmentTemplate(),\r\n        doubleClick: function (e, node){\r\n            // that.addLabelText(e, node)\r\n            that.hiddenAllText(node)\r\n            that.switchBorder(node, false)\r\n            // that.diagram.clearSelection();\r\n        },\r\n        // rotatable: true,\r\n        mouseOver: function(e, node) {\r\n          // console.log(\"211111\")\r\n          // if(node.data.hyperlink){\r\n          //   var textObj = node.findObject('TEXT');\r\n          //   textObj.isUnderline = true;\r\n          // }\r\n          // if(node.data.text == \"\"){\r\n            // if(group.findObject(\"groupBorder\").visible){\r\n              that.switchBorder(node, true)\r\n            // }\r\n            // node.background = \"rgba(125,125,125,0.01)\"\r\n          // }\r\n\r\n          if(!node.containingGroup) return;\r\n          var it = node.containingGroup.findSubGraphParts().iterator;\r\n          node.diagram.startTransaction()\r\n          while (it.next()) {\r\n              var n = it.value;\r\n              if(n.data.category == \"autoText\"){\r\n                  if(n.data.role && n.data.role.indexOf(\"labelText\")>-1){\r\n                      // locateNode = n;\r\n                      n.diagram.model.setDataProperty(n.data, \"minSize\", \"120 30\")\r\n                      // n.areaBackground = \"mediumslateblue\"\r\n                  }\r\n              }\r\n          }\r\n          node.diagram.commitTransaction()\r\n          // diagram.__trtd.showNodeRemarkTips(e, node);\r\n          },\r\n      mouseLeave: function(e, node) {\r\n        // if(node.data.text == \"\"){\r\n          // node.background = \"rgba(0,0,0,0)\"\r\n          that.switchBorder(node, false)\r\n        // }\r\n      },\r\n        // resizable: true,\r\n        // layoutConditions: go.Part.LayoutStandard,\r\n        layoutConditions: go.Part.LayoutStandard & go.Part.LayoutRemoved & go.Part.LayoutAdded & go.Part.LayoutNodeSized,\r\n        // layout: new waveGroupLayout()\r\n        layout: $(go.GridLayout,{\r\n          isInitial: false,\r\n          isOngoing: false,\r\n          spacing: new go.Size(0,0),\r\n          cellSize: go.Size.parse(300,150),\r\n          arrangement:go.GridLayout.LeftToRight,\r\n          wrappingColumn:1,\r\n          isRealtime: false,\r\n          alignment: go.GridLayout.Location,\r\n          // comparer:function(pa, pb) {\r\n          //   var da = pa.data;\r\n          //   var db = pb.data;\r\n          //   if (da.order < db.order) return -1;\r\n          //   if (da.order > db.order) return 1;\r\n          //   return 0;\r\n          // }\r\n        }) \r\n      },\r\n      new go.Binding(\"location\", \"loc\", function(v){\r\n        // console.log(\"go.Point.parsego.Point.parsego.Point.parse\")\r\n        return go.Point.parse(v)\r\n      }).makeTwoWay(go.Point.stringify),\r\n      new go.Binding(\"angle\", \"angle\").makeTwoWay(function(v,data){\r\n\r\n        return v;\r\n      }),\r\n      new go.Binding(\"isShadowed\", \"isShadowed\").makeTwoWay(),\r\n      new go.Binding(\"copyable\", \"copyable\").makeTwoWay(),\r\n      new go.Binding(\"movable\", \"movable\").makeTwoWay(),\r\n      new go.Binding(\"deletable\", \"deletable\").makeTwoWay(),\r\n\r\n      $(go.Placeholder,    // represents the area of all member parts,\r\n        { padding: 30,\r\n          alignment: go.Spot.Center,\r\n          // stroke: \"blue\",\r\n          // strokeWidth: 2,\r\n          name:\"placeholder\",\r\n        }\r\n      ),  // with some extra padding around them\r\n        // $(go.Shape,  // using a Shape instead of a Placeholder\r\n        //   { name: \"PH\",\r\n        //   figure:\"Rectangle\",\r\n        //   // rotationSpot: go.Spot.LeftCenter,\r\n        //   // spot1: new go.Spot(0.01, 0.01),\r\n        //   // spot2: new go.Spot(0.99, 0.99),\r\n        //   // areaBackground: \"red\",\r\n        //     // width: 600,\r\n        //     // height:300,\r\n        //     stroke:\"blue\" ,\r\n        //     strokeWidth: 2,\r\n        //     fill: \"rgba(0,0,0,0)\" \r\n        //   },\r\n        // ),\r\n\r\n        // new go.Binding(\"width\", \"width\").ofObject(\"\")\r\n        $(go.Shape,\"Rectangle\",{\r\n          name: \"groupBorder\",\r\n          stroke: \"green\",\r\n          strokeWidth: 3,\r\n          strokeDashArray: [10, 5],\r\n          visible:true,\r\n          opacity: 0,\r\n          // margin:30,\r\n          fill:null,\r\n          alignment: go.Spot.Center,\r\n          alignmentFocus: go.Spot.Center,\r\n          // width:200,\r\n          // height:150, \r\n      },\r\n      // new go.Binding(\"width\",\"width\").ofObject(\"placeholder\"),\r\n      // new go.Binding(\"height\",\"height\").ofObject(\"placeholder\"),\r\n      new go.Binding(\"desiredSize\",\"\", function(v,d){\r\n          console.log(\"vvvvvvvvvvvvv,\",v,d)\r\n          // if(d.part.placeholder.measuredBounds.width < 200){\r\n          //   return new go.Size(200,200)\r\n          // }\r\n          // var width = Math.max(d.part.placeholder.measuredBounds.width, 200)\r\n          // var height = Math.max(d.part.placeholder.measuredBounds.height, 200)\r\n          return new go.Size(d.part.measuredBounds.width-3, d.part.measuredBounds.height-3);\r\n          // return d.part.placeholder.actualBounds;\r\n      }).ofObject(\"\")\r\n    )\r\n\r\n        // $(go.TextBlock,  // group title\r\n        //   { font: \"Bold 12pt Sans-Serif\" },\r\n        //   new go.Binding(\"text\", \"key\")\r\n        // )\r\n      )\r\n    }\r\n}\r\n\r\nmodule.exports = LabelGroupNodeTemplate\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/nodeTemplate/labelGroupNodeTemplate.js","\r\n\r\nvar $ = go.GraphObject.make;\r\nvar Base = require('./base')\r\nvar helpers = require('../helpers/helpers.gojs')\r\n  \r\n\r\nclass PicNodeTemplate extends Base {\r\n    constructor(options){\r\n        super(options)\r\n        // this.nodeProperties = {}\r\n        \r\n    }\r\n\r\n  \r\n\r\n    getNodeSelectionAdornmentTemplate(){\r\n      return  $(go.Adornment, \"Spot\",\r\n                $(go.Panel, \"Auto\",\r\n                    $(go.Shape, { fill: null, stroke: \"dodgerblue\", strokeWidth: 1 }),\r\n                    $(go.Placeholder) // this represents the selected Node\r\n\r\n                ),\r\n                //$(\"TreeExpanderButton\",\r\n                $(go.Panel, \"Vertical\", {\r\n                        name: \"ButtonIcon1\",\r\n                        alignment: new go.Spot(0, 1, -20, 20),\r\n                        alignmentFocus: go.Spot.Center,\r\n                        width: 60,\r\n                        height: 60,\r\n                        isActionable: true,\r\n                        // click: interactions.expandCollapse // this function is defined below\r\n                    },\r\n\r\n                    $(go.Shape, \"Circle\", {\r\n                        fill: \"rgba(1,1,1,0)\",\r\n                        strokeWidth: 0,\r\n                        stroke: \"green\",\r\n                        width: 50,\r\n                        height: 50\r\n                    })\r\n\r\n                )\r\n            ); // end Adornment;\r\n    }\r\n\r\n    nodeResizeAdornmentTemplate () {\r\n      return $(go.Adornment, \"Spot\",\r\n          $(go.Placeholder), // takes size and position of adorned object\r\n          $(go.Shape, \"Circle\", // left resize handle\r\n              {\r\n                  alignment: go.Spot.TopLeft,\r\n                  alignmentFocus: go.Spot.BottomRight,\r\n                  cursor: \"col-resize\",\r\n                  desiredSize: new go.Size(30, 30),\r\n                  fill: \"lightblue\",\r\n                  stroke: \"dodgerblue\"\r\n              }),\r\n          $(go.Shape, \"Circle\", // right resize handle\r\n              {\r\n                  alignment: go.Spot.BottomRight,\r\n                  alignmentFocus: go.Spot.TopLeft,\r\n                  cursor: \"col-resize\",\r\n                  desiredSize: new go.Size(30, 30),\r\n                  fill: \"lightblue\",\r\n                  stroke: \"dodgerblue\"\r\n              })\r\n      )\r\n  }\r\n\r\n    getNodeTemplate(){\r\n      var diagram = this.diagram\r\n      var that = this;\r\n      return $(go.Node, \"Spot\", {\r\n        name: \"NODE\",\r\n        \"_controlExpand\": true,\r\n        layerName: \"Background\",\r\n        locationSpot: go.Spot.BottomLeft,\r\n        resizeCellSize: new go.Size(10, 10),\r\n        locationObjectName: \"SHAPE\",\r\n        resizable: true,\r\n        resizeObjectName: \"SHAPE\", // user can resize the Shape\r\n        rotatable: true,\r\n        rotateObjectName: \"SHAPE\", // rotate the Shape without rotating the label\r\n        doubleClick: function (e, node) {\r\n            // interactions.selectText(e, node)\r\n            console.log(node.data)\r\n            if(node.diagram.__trtd.nodeDoubleClickListener){\r\n                node.diagram.__trtd.nodeDoubleClickListener(node)\r\n            }\r\n            \r\n        },\r\n        click: function(e, node) {\r\n            console.log(node.data)\r\n            if(node.diagram.__trtd.nodeClickListener){\r\n                node.diagram.__trtd.nodeClickListener(node)\r\n            }\r\n            // showNodeToolBar(e,node);\r\n        },\r\n        selectable: true,\r\n        movable: true,\r\n        angle: 0,\r\n        //toMaxLinks: 1,\r\n        layoutConditions: go.Part.LayoutStandard,\r\n        //layoutConditions:~go.Part.LayoutAdded,\r\n        // fromLinkable: true, toLinkable: true,\r\n        alignment: go.Spot.Center,\r\n        alignmentFocus: go.Spot.Center,\r\n        resizeAdornmentTemplate: that.nodeResizeAdornmentTemplate(),\r\n        //rotateAdornmentTemplate: nodeRotateAdornmentTemplate,\r\n        contextMenu: diagram.__trtd.nodeContextMenu,\r\n        selectionAdornmentTemplate: that.getNodeSelectionAdornmentTemplate(),\r\n        contextMenu: $(go.Adornment),\r\n      },\r\n        new go.Binding(\"location\", \"loc\", go.Point.parse).makeTwoWay(go.Point.stringify),\r\n        new go.Binding(\"isShadowed\", \"isShadowed\").makeTwoWay(),\r\n        new go.Binding(\"selectable\", \"selectable\").makeTwoWay(),\r\n        new go.Binding(\"movable\", \"movable\").makeTwoWay(),\r\n        new go.Binding(\"resizable\", \"resizable\").makeTwoWay(),\r\n        new go.Binding(\"deletable\", \"deletable\").makeTwoWay(),\r\n        new go.Binding(\"layerName\", \"layerName\", function(v, d) {\r\n            return v ? v : \"\";\r\n        }).makeTwoWay(function(v) {\r\n            return v;\r\n        }),\r\n        // $(go.TextBlock, // the text label\r\n        //     new go.Binding(\"text\", \"text\")),\r\n        $(go.Picture, // the icon showing the logo\r\n            // You should set the desiredSize (or width and height)\r\n            // whenever you know what size the Picture should be.\r\n   \r\n            { name: \"SHAPE\" ,\r\n            width: 400,\r\n            height:400,\r\n        }, {\r\n                successFunction: function(pict, evt) {\r\n                    if ((!pict.width || !pict.height) && (!pict.part.data.width || !pict.part.data.height)) {\r\n                        pict.width = pict.element.width;\r\n                        pict.height = pict.element.height;\r\n                    }\r\n                }\r\n            }, {\r\n                sourceCrossOrigin: function(pict) {\r\n                    return \"\";\r\n                }\r\n            },\r\n            new go.Binding(\"source\", \"picture\", function(v){\r\n                    \r\n                return v+\"?\"+Date.now()\r\n\r\n            }).makeTwoWay(function(v){\r\n                if(v){\r\n                    v = v.replace(/\\?.*$/g,\"\")\r\n                    return v\r\n                }else{\r\n                    return \"\"\r\n                }\r\n            }),\r\n            new go.Binding(\"width\", \"width\", function(v, d) {\r\n                return v;\r\n            }).makeTwoWay(function(v) {\r\n                return v;\r\n            }),\r\n            new go.Binding(\"height\", \"height\", function(v, d) {\r\n                return v;\r\n            }).makeTwoWay(function(v) {\r\n                return v;\r\n            }),\r\n            new go.Binding(\"angle\", \"angle\").makeTwoWay(),\r\n            new go.Binding(\"opacity\", \"opacity\", function(v, d) {\r\n                return v ? parseFloat(v) : 1;\r\n            }).makeTwoWay(function(v) {\r\n                return v;\r\n            })\r\n        )\r\n      )\r\n    }\r\n}\r\n\r\nmodule.exports = PicNodeTemplate\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/nodeTemplate/picNodeTemplate.js","\r\n\r\nvar $ = go.GraphObject.make;\r\nvar Base = require('./base')\r\nvar helpers = require('../helpers/helpers.gojs')\r\n  \r\n\r\nclass PicGroupNodeTemplate extends Base {\r\n    constructor(options){\r\n        super(options)\r\n        // this.nodeProperties = {}\r\n        \r\n    }\r\n\r\n  \r\n\r\n    getNodeSelectionAdornmentTemplate(){\r\n      return  $(go.Adornment, \"Spot\",\r\n                $(go.Panel, \"Auto\",\r\n                    $(go.Shape, { fill: null, stroke: \"dodgerblue\", strokeWidth: 1 }),\r\n                    $(go.Placeholder) // this represents the selected Node\r\n\r\n                ),\r\n                //$(\"TreeExpanderButton\",\r\n                $(go.Panel, \"Vertical\", {\r\n                        name: \"ButtonIcon1\",\r\n                        alignment: new go.Spot(0, 1, -20, 20),\r\n                        alignmentFocus: go.Spot.Center,\r\n                        width: 60,\r\n                        height: 60,\r\n                        isActionable: true,\r\n                        // click: interactions.expandCollapse // this function is defined below\r\n                    },\r\n\r\n                    $(go.Shape, \"Circle\", {\r\n                        fill: \"rgba(1,1,1,0)\",\r\n                        strokeWidth: 0,\r\n                        stroke: \"green\",\r\n                        width: 50,\r\n                        height: 50\r\n                    })\r\n                )\r\n            ); // end Adornment;\r\n    }\r\n\r\n    nodeResizeAdornmentTemplate () {\r\n      return $(go.Adornment, \"Spot\",\r\n          $(go.Placeholder), // takes size and position of adorned object\r\n          $(go.Shape, \"Circle\", // left resize handle\r\n              {\r\n                  alignment: go.Spot.TopLeft,\r\n                  alignmentFocus: go.Spot.BottomRight,\r\n                  cursor: \"col-resize\",\r\n                  desiredSize: new go.Size(30, 30),\r\n                  fill: \"lightblue\",\r\n                  stroke: \"dodgerblue\"\r\n              }),\r\n          $(go.Shape, \"Circle\", // right resize handle\r\n              {\r\n                  alignment: go.Spot.BottomRight,\r\n                  alignmentFocus: go.Spot.TopLeft,\r\n                  cursor: \"col-resize\",\r\n                  desiredSize: new go.Size(30, 30),\r\n                  fill: \"lightblue\",\r\n                  stroke: \"dodgerblue\"\r\n              })\r\n      )\r\n  }\r\n\r\n  addFreeText(e, node){\r\n    console.log(\"eeeeeeeeeee\",e)\r\n    var data = {\"text\":\"总结文本\",\r\n    \"deletable\":true, \r\n    \"fill\":\"black\", \r\n    \"iconVisible\":false, \r\n    \"locationSpot\":\"0 0.5 0 0\", \r\n    \"textAlign\":\"left\", \r\n    \"category\":\"autoText\", \r\n    \"loc\": go.Point.stringify(e.documentPoint), \r\n    \"movable\":true, \"group\":node.data.key\r\n   }\r\n   this.diagram.startTransaction(\"addFreeText\")\r\n   this.diagram.model.addNodeData(data);\r\n   this.diagram.commitTransaction(\"addFreeText\")\r\n  }\r\n\r\n    getNodeTemplate(){\r\n      var diagram = this.diagram\r\n      var that = this;\r\n      return  $(go.Group, \"Auto\",\r\n      { \r\n        __trtdNode: that,\r\n        // selectionObjectName: \"groupBorder\",\r\n        layerName: \"default\",\r\n        locationObjectName: \"placeholder\",\r\n        zOrder: 5,\r\n        // margin:30,\r\n        // padding:30,\r\n        background:\"rgba(0,0,0,0)\",\r\n        rotatable: false,\r\n        // minSize: new go.Size(200,100),\r\n        locationSpot: go.Spot.BottomLeft,\r\n        click: (e, node)=>{\r\n          console.log(node.data)\r\n        },\r\n        layout: $(go.Layout),\r\n        doubleClick: function (e, node){\r\n            // that.addLabelText(e, node)\r\n            that.addFreeText(e, node)\r\n        },\r\n        contextMenu: $(go.Adornment),\r\n        layoutConditions: go.Part.LayoutStandard & go.Part.LayoutRemoved & go.Part.LayoutAdded & go.Part.LayoutNodeSized,\r\n\r\n      },\r\n      new go.Binding(\"location\", \"loc\", function(v){\r\n        // console.log(\"go.Point.parsego.Point.parsego.Point.parse\")\r\n        return go.Point.parse(v)\r\n      }).makeTwoWay(go.Point.stringify),\r\n      new go.Binding(\"angle\", \"angle\").makeTwoWay(function(v,data){\r\n\r\n        return v;\r\n      }),\r\n      new go.Binding(\"isShadowed\", \"isShadowed\").makeTwoWay(),\r\n      new go.Binding(\"selectable\", \"selectable\").makeTwoWay(),\r\n      new go.Binding(\"movable\", \"movable\").makeTwoWay(),\r\n      new go.Binding(\"deletable\", \"deletable\").makeTwoWay(),\r\n      new go.Binding(\"layerName\", \"layerName\").makeTwoWay(),\r\n\r\n      $(go.Placeholder,    // represents the area of all member parts,\r\n        { padding: 30,\r\n          alignment: go.Spot.Center,\r\n          name:\"placeholder\",\r\n        }\r\n      ),  // with some extra padding around them\r\n      )\r\n    }\r\n}\r\n\r\nmodule.exports = PicGroupNodeTemplate\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/nodeTemplate/picGroupNodeTemplate.js","var $ = go.GraphObject.make;\r\nvar Base = require('./base')\r\nvar helpers = require('../helpers/helpers.gojs')\r\nvar yunGroupLayout = require(\"../layout/yunGroupLayout\")\r\n\r\nclass YunNodeTemplate extends Base {\r\n    constructor(options){\r\n        super(options)\r\n        // this.nodeProperties = {}\r\n        this.defaultTextFont = \"20px 'Microsoft YaHei'\"\r\n        \r\n    }\r\n    \r\n\r\n    snapToGrid(data, node){\r\n\r\n      if(data.subRole == \"coreText\" || data.subRole == \"themeText\"){\r\n        return;\r\n      }\r\n      var p = go.Point.parse(data.loc)\r\n      if(node.__yunPointsX && node.__yunPointsY ){\r\n        if(p.x >= node.__yunPointsX[0] && p.x <= node.__yunPointsX[node.__yunPointsX.length-1] \r\n          && p.y >= node.__yunPointsY[node.__yunPointsY.length-1] && p.y <= node.__yunPointsY[0] ){\r\n            // 在画布格子范围内的位置才对齐网格\r\n            var minX=20000,minY=20000,tmp,orderX,orderY;\r\n            for(var i=0;i<node.__yunPointsX.length;i++){\r\n              tmp = Math.abs(p.x - node.__yunPointsX[i])\r\n              if(tmp< minX){\r\n                minX = tmp;\r\n                orderX = i+1;\r\n              }\r\n            }\r\n            for(var i=0;i<node.__yunPointsY.length;i++){\r\n              tmp = Math.abs(p.y - node.__yunPointsY[i])\r\n              if(tmp< minY){\r\n                minY = tmp;\r\n                orderY = i+1;\r\n              }\r\n            }\r\n\r\n            if(orderX!=null && orderY!=null){\r\n              // var x = node.__yunPointsX[orderX-1]\r\n              // var y = node.__yunPointsX[orderY-1]\r\n              // x = -1300\r\n              // y = -1300\r\n              // data.loc = \"-1688.105387366997 -121.19730986224602\"\r\n              data.orderX = orderX\r\n              data.orderY = orderY\r\n            }\r\n          }else{\r\n            delete data.orderX\r\n            delete data.orderY\r\n          }\r\n     }\r\n    }\r\n\r\n    addFreeText(e, node){\r\n      console.log(\"addFreeTextaddFreeText begin\",e)\r\n      var gridWidth = node.data.gridWidth\r\n      var p = e.documentPoint\r\n      var that = this;\r\n      var data = {\"text\":\"灵感\",\r\n      \"deletable\":true, \r\n      \"role\":\"freeText\",\r\n      \"fill\":\"black\", \r\n      \"iconVisible\":false, \r\n      \"locationSpot\":\"0.5 0.5 0 0\", \r\n      \"minSize\":`30 30`,\r\n      // \"width\":`${gridWidth-10}`,\r\n      font: that.defaultTextFont,\r\n      \"textAlign\":\"center\", \r\n      \"category\":\"autoText\", \r\n      \"loc\": go.Point.stringify(p), \r\n      \"movable\":true, \"group\":node.data.key\r\n     }\r\n    //  console.log()\r\n     \r\n\r\n      this.snapToGrid(data, node)\r\n     this.diagram.startTransaction(\"addFreeText\")\r\n     this.diagram.model.addNodeData(data);\r\n     this.diagram.commitTransaction(\"addFreeText\")\r\n     node.layout.isValidLayout = false\r\n     console.log(\"addFreeTextaddFreeText end\",e)\r\n    }\r\n\r\n    getNodeTemplate(){\r\n      var that = this\r\n      return $(go.Group, \"Auto\",\r\n      { selectionObjectName: \"PH\",\r\n      __trtdNode: that,\r\n      layerName: \"default\",\r\n      padding: 0,\r\n      margin: 0,\r\n      copyable: true,\r\n      zOrder: 15,\r\n        locationObjectName: \"PH\",\r\n        locationSpot: new go.Spot(0,1,0,-0),\r\n        // rotationSpot: go.Spot.LeftCenter,\r\n        rotatable: false,\r\n        alignment: go.Spot.Left,\r\n        alignmentFocus: go.Spot.Left,\r\n        // rotateObject:\"PH\",\r\n        click: (e, node)=>{\r\n          console.log(node.data)\r\n          var it = node.findSubGraphParts().iterator;\r\n          while (it.next()) {\r\n              var n = it.value;\r\n              if(n.data.category == \"autoText\"){\r\n                  n.findObject(\"textBorder\").visible = false;\r\n              }\r\n          }\r\n          node.layout.isValidLayout = false\r\n          return;\r\n          if(node.isSelected) return;\r\n          var it = node.findSubGraphParts().iterator;\r\n          var n;\r\n          while (it.next()) {\r\n              n = it.value;\r\n              if(n.data.role == \"labelGroup\"){\r\n                  n.__trtdNode.switchBorder(n, true)\r\n                  break;\r\n              }\r\n          }\r\n          if(n){\r\n            setTimeout(function(){\r\n              n.__trtdNode.switchBorder(n, false)\r\n            },3000)\r\n          }\r\n        },\r\n        doubleClick: function (e, node){\r\n          that.addFreeText(e, node)\r\n        },\r\n        mouseOver: function(e, node) {\r\n          // if(node.data.hyperlink){\r\n          //   var textObj = node.findObject('TEXT');\r\n          //   textObj.isUnderline = true;\r\n          // }\r\n          // if(!node.containingGroup) return;\r\n          return;\r\n          // diagram.__trtd.showNodeRemarkTips(e, node);\r\n      },\r\n      contextMenu: $(go.Adornment),\r\n      mouseLeave: function(e, node) {\r\n        // if(!node.containingGroup) return;\r\n        var it = node.findSubGraphParts().iterator;\r\n        while (it.next()) {\r\n            var n = it.value;\r\n            if(n.data.role == \"labelGroup\"){\r\n                // n.__trtdNode.switchBorder(n, false)\r\n                break;\r\n            }\r\n        }\r\n        // if(n){\r\n        //   setTimeout(function(){\r\n        //     n.__trtdNode.switchBorder(n, false)\r\n        //   },3000)\r\n        // }\r\n      },\r\n        // rotatable: true,\r\n        // resizable: true,\r\n        // layoutConditions: go.Part.LayoutStandard,\r\n        layoutConditions: go.Part.LayoutStandard & go.Part.LayoutRemoved & go.Part.LayoutAdded & go.Part.LayoutNodeSized,\r\n        layout: new yunGroupLayout()\r\n        // layout: $(go.GridLayout,{\r\n        //   spacing: new go.Size(0,0),\r\n        //   cellSize: go.Size.parse(300,150),\r\n        //   arrangement:go.GridLayout.LeftToRight,\r\n        //   alignment: go.GridLayout.Location,\r\n        //   comparer:function(pa, pb) {\r\n        //     var da = pa.data;\r\n        //     var db = pb.data;\r\n        //     if (da.order < db.order) return -1;\r\n        //     if (da.order > db.order) return 1;\r\n        //     return 0;\r\n        //   }\r\n        // }) \r\n      },\r\n      new go.Binding(\"deletable\", \"deletable\").makeTwoWay(function(v,data){\r\n        return v;\r\n      }),\r\n      new go.Binding(\"copyable\", \"copyable\").makeTwoWay(),\r\n      new go.Binding(\"angle\", \"angle\").makeTwoWay(function(v,data){\r\n        return v;\r\n      }),\r\n      new go.Binding(\"zOrder\", \"zOrder\").makeTwoWay(function(v,data){\r\n        return v;\r\n      }),\r\n      new go.Binding(\"locationSpot\", \"\", function(data){\r\n        // console.log(\"data:\",data)\r\n        return new go.Spot(0,1,data.gridWidth,-data.gridHeight)\r\n      }),\r\n        \r\n        $(go.Shape,  // using a Shape instead of a Placeholder\r\n          { name: \"PH\",\r\n          figure:\"Rectangle\",\r\n          // rotationSpot: go.Spot.LeftCenter,\r\n          // spot1: new go.Spot(0.01, 0.01),\r\n          // spot2: new go.Spot(0.99, 0.99),\r\n            // width: 600,\r\n            // height:300,\r\n            stroke:\"yellow\" ,\r\n            strokeWidth:0,\r\n            fill: \"rgba(0,0,255,0.0)\" },\r\n          // new go.Binding(\"desiredSize\", \"desiredSize\", function(v,data){\r\n          //   return go.Size.parse(v)\r\n          //   console.log('1111111111111111111111')\r\n          //   // for(var i=0;i<)\r\n          //   var model = data.part.diagram.model;\r\n          //   var group = data.part.data;\r\n          //   var maxWidth = 0;\r\n          //   var maxHeight = 0;\r\n          //   for(var i = 0;i<model.nodeDataArray.length;i++){\r\n          //     if(group.key != model.nodeDataArray[i].group){\r\n          //       continue;\r\n          //     }\r\n          //     if(model.nodeDataArray[i].desiredSize){\r\n          //       console.log(model.nodeDataArray[i].desiredSize)\r\n          //       var size = go.Size.parse(model.nodeDataArray[i].desiredSize)\r\n          //       if(size.width > maxWidth){\r\n          //         maxWidth = size.width;\r\n          //       }\r\n          //       if(size.height > maxHeight){\r\n          //         maxHeight = size.height;\r\n          //       }\r\n          //     }\r\n          //   }\r\n          //   // var group = that.diagram.findNodeForKey(data.part.data.key)\r\n          //   // var git = group.memberParts;\r\n          //   // var maxWidth = 0;\r\n          //   // var maxHeight = 0;\r\n          //   // while (git.next()) {\r\n          //   //   var item = git.value;\r\n          //   //   console.log(\"item:\",item)\r\n          //   //   if(item.naturalBounds.width > maxWidth){\r\n          //   //     maxWidth = item.naturalBounds.width;\r\n          //   //   }\r\n          //   //   if(item.naturalBounds.height > maxHeight){\r\n          //   //     maxHeight = item.naturalBounds.height;\r\n          //   //   }\r\n          //   //   console.log(`maxHeight:${maxHeight},maxWidth:${maxWidth}`)\r\n      \r\n          //   // }           \r\n          //   return go.Size.parse(`${maxWidth+100} ${maxHeight}`)         \r\n          //   // group.diagram.model.setDataProperty(group.data, \"desiredSize\", `${maxWidth+100} ${maxHeight}`) \r\n          // }).makeTwoWay(go.Size.stringify)\r\n        ),\r\n        new go.Binding(\"location\", \"loc\", go.Point.parse).makeTwoWay(go.Point.stringify),\r\n        // $(go.Placeholder,    // represents the area of all member parts,\r\n        //   { padding: 0}\r\n        // ),  // with some extra padding around them\r\n\r\n        // $(go.TextBlock,  // group title\r\n        //   { font: \"Bold 12pt Sans-Serif\" },\r\n        //   new go.Binding(\"text\", \"key\")\r\n        // )\r\n      )\r\n    }\r\n}\r\n\r\nmodule.exports = YunNodeTemplate\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/nodeTemplate/yunGroupNodeTemplate.js","    // define a custom grid layout that makes sure the length of each lane is the same\r\n    // and that each lane is broad enough to hold its subgraph\r\n    function YunGroupLayout() {\r\n        go.Layout.call(this);\r\n        // go.GridLayout.call(this);\r\n        // this.cellSize = new go.Size(1, 1);\r\n        // this.wrappingColumn = Infinity;\r\n        // this.wrappingWidth = Infinity;\r\n        // this.spacing = new go.Size(0, 0);\r\n        // this.alignment = go.GridLayout.Position;\r\n      }\r\n      go.Diagram.inherit(YunGroupLayout, go.Layout);\r\n  \r\n      function computeNewRotateLoc(rotateCenter,currentLoc, angle){\r\n          if(rotateCenter.equals(currentLoc)) return currentLoc\r\n        // 计算选择中心点到（0,0）点的偏移\r\n        var offset = new go.Point(0,0).subtract(rotateCenter.copy())\r\n        // 将原来的点偏移到相对0,0点的位置\r\n        var nodeOrigin = currentLoc.copy().offset(offset.x, offset.y)\r\n        var newNodeOrigin = nodeOrigin.rotate(angle)\r\n        var newNodeLoc = newNodeOrigin.copy().offset(-offset.x, -offset.y)\r\n        return newNodeLoc\r\n        // console.log(\"newNodeLoc\", newNodeLoc)\r\n      }\r\n      YunGroupLayout.prototype.doLayout = function(coll) {\r\n          console.log(\"YunGroupLayout.doLayout\")\r\n        var diagram = this.diagram;\r\n        diagram.startTransaction(\"YunGroupLayout\")\r\n          // COLL might be a Diagram or a Group or some Iterable<Part>\r\n         \r\n        var it = this.collectParts(coll).iterator;\r\n        var collection = []\r\n        var dataCollection =[]\r\n        var group = this.group\r\n        var gridWidth = group.data.gridWidth\r\n        var gridHeight = group.data.gridHeight\r\n        // group.location = new go.Point(0,0)\r\n        var maxWidth = 0;\r\n        var maxHeight = 0;\r\n        var centerLine, axisX, axisY,axisXText, axisYText, themeText, labelText1,labelText2,labelText3,labelGroup,waveGroup\r\n        var shiTextColl = []\r\n        var xuTextColl = []\r\n        var verticalLines = []\r\n        var horizontalLines = []\r\n        var freelLines = []\r\n        var allLines = []\r\n        var freeTexts = []\r\n        var shapeNodes = []\r\n        var snapType = group.data.snapType || \"grid\"\r\n        var showShape = group.data.showShape; // 是否显示矩形\r\n        var beginSpark = group.data.beginSpark; // 是否开始火花\r\n        var shapeStrokes = group.data.shapeStrokes; // 是否开始火花\r\n        var oliveWidth\r\n        var oliveHeight\r\n        while (it.next()) {\r\n            var node = it.value;\r\n                // var item = git.value;\r\n            //   console.log(\"item:\",item)\r\n\r\n            dataCollection.push(node.data)\r\n            if(node.data.category == \"wave\"){\r\n                collection.push(node)\r\n            }\r\n            if(!(node instanceof go.Node)){\r\n              continue;\r\n            }\r\n            \r\n            if(node.data.role == \"background\"){\r\n              shapeNodes.push(node)\r\n            }\r\n            // 处理文本节点的位置和定位位置\r\n            // if(node.data.category == \"text\"){\r\n              if(node.data.role == \"axisYText\"){\r\n                axisYText = node;\r\n              }\r\n              if(node.data.role == \"axisXText\"){\r\n                axisXText = node;\r\n              }\r\n              if(node.data.role == \"themeText\"){\r\n                themeText = node;\r\n              }\r\n              if(node.data.role == \"shiText\"){\r\n                shiTextColl.push(node)\r\n              }\r\n              if(node.data.role == \"xuText\"){\r\n                xuTextColl.push(node)\r\n              }\r\n            // }\r\n            // 处理label文本节点的位置和定位位置\r\n            // if(node.data.category == \"iconText\"){\r\n              if(node.data.role == \"labelText1\"){\r\n                labelText1 = node;\r\n              }\r\n              if(node.data.role == \"labelText2\"){\r\n                labelText2 = node;\r\n              }\r\n              if(node.data.role == \"labelText3\"){\r\n                labelText3 = node;\r\n              }\r\n              if(node.data.role == \"labelGroup\"){\r\n                labelGroup = node;\r\n              }\r\n            // }\r\n\r\n              if(node.naturalBounds.width > maxWidth){\r\n                maxWidth = node.naturalBounds.width;\r\n              }\r\n              if(node.naturalBounds.height > maxHeight){\r\n                maxHeight = node.naturalBounds.height;\r\n              }\r\n            \r\n            \r\n              if(node.data.role == \"freeText\"){\r\n                freeTexts.push(node);\r\n              }\r\n            if (node.data.category == \"line\") {\r\n\r\n                allLines.push(node)\r\n                if(node.data.role == \"verticalLine\"){\r\n                  verticalLines.push(node);\r\n                }\r\n                if(node.data.role == \"horizontalLine\"){\r\n                  horizontalLines.push(node);\r\n                }\r\n                if(node.data.role == \"freelLine\"){\r\n                  freelLines.push(node);\r\n                }\r\n            }\r\n            if (node.data.group == group.key) {\r\n            // position the node . . .\r\n                if(node.data.category == \"line\"){\r\n                    if(node.data.role == \"axisX\") {\r\n                      node.angle = 0;\r\n                      axisX = node\r\n                      node.location = group.location.copy().offset(0,0)\r\n                    };\r\n                    if(node.data.role == \"axisY\") {\r\n                      axisY = node\r\n                      node.angle = 270;\r\n                      node.location = group.location.copy().offset(0,0)\r\n                    }\r\n                    // node.angle = 270\r\n                }\r\n                // if(node.data.category == \"waveGroup\"){\r\n                //     waveGroup = node;\r\n                //     // node.angle = group.angle\r\n                //     oliveWidth = node.data.oliveWidth\r\n                //     oliveHeight = node.data.oliveHeight\r\n                //     node.location = group.location.copy().offset(0,0)\r\n                //     // node.layout.isOngoing = true;\r\n                //     // node.layout.isValidLayout = false;\r\n                //     // collection.push(node)\r\n                // }\r\n\r\n            }\r\n        }\r\n        console.log(`maxHeight:${maxHeight},maxWidth:${maxWidth}`)\r\n\r\n\r\n\r\n        verticalLines.sort(function(a,b){\r\n            return a.data.order - b.data.order\r\n        })\r\n        horizontalLines.sort(function(a,b){\r\n            return a.data.order - b.data.order\r\n        })\r\n        freelLines.sort(function(a,b){\r\n            return a.data.order - b.data.order\r\n        })\r\n\r\n        if(snapType == \"between\"){\r\n          var x1 = verticalLines.length*gridWidth+gridWidth\r\n          var x2 = horizontalLines.length*gridHeight+gridHeight\r\n        }else{\r\n          var x1 = verticalLines.length*gridWidth\r\n          var x2 = horizontalLines.length*gridHeight\r\n        }\r\n\r\n        var allPointsX = [];\r\n        var allPointsY = [];\r\n        var centerOrderX = (horizontalLines.length+1)/2\r\n        var centerOrderY = (verticalLines.length+1)/2\r\n        allLines.forEach(function(obj, index){\r\n          // obj.diagram.model.setDataProperty(obj.data, \"strokeWidth\",1)\r\n          // obj.diagram.model.setDataProperty(obj.data, \"stroke\",\"rgba(0,0,0,0.3)\")\r\n          if( obj.data.role == \"axisX\" ||  obj.data.role == \"axisY\") return;\r\n          // if(obj.data.subRole == \"dim\"){\r\n          //   obj.diagram.model.setDataProperty(obj.data, \"strokeDashArray\",\"[0, 0]\")\r\n          //   obj.diagram.model.setDataProperty(obj.data, \"strokeWidth\",3)\r\n          //   obj.diagram.model.setDataProperty(obj.data, \"stroke\",\"RGBA(164, 177, 198, 1)\")\r\n          // }else{\r\n          //   obj.diagram.model.setDataProperty(obj.data, \"strokeDashArray\",\"[15, 10]\")\r\n          //   obj.diagram.model.setDataProperty(obj.data, \"strokeWidth\",1)\r\n          //   obj.diagram.model.setDataProperty(obj.data, \"stroke\",\"rgba(0,0,0,0.3)\")\r\n          // }\r\n        })\r\n\r\n        verticalLines.forEach(function(obj,index){\r\n          var newOrder = index+1;\r\n          obj.diagram.model.setDataProperty(obj.data,\"order\", newOrder)\r\n          obj.location = group.location.copy().offset(gridWidth*(newOrder),0)\r\n          obj.angle = 270;\r\n          obj.diagram.model.setDataProperty(obj.data, \"desiredSize\",`${x2+20} 10`)\r\n          // obj.diagram.model.setDataProperty(obj.data, \"showArrow\",false)\r\n          // obj.diagram.model.setDataProperty(obj.data, \"selectable\",false)\r\n          if(snapType == \"between\"){\r\n            if(newOrder < centerOrderX){\r\n              allPointsX.push(obj.location.x-gridWidth/2)\r\n            }\r\n            if(newOrder == centerOrderX){\r\n              allPointsX.push(obj.location.x)\r\n            }\r\n            if(newOrder > centerOrderX){\r\n              allPointsX.push(obj.location.x+gridWidth/2)\r\n            }\r\n          }else{\r\n            allPointsX.push(obj.location.x)\r\n          }\r\n\r\n\r\n          // obj.diagram.model.setDataProperty(obj.data, \"strokeWidth\",1)\r\n          // obj.diagram.model.setDataProperty(obj.data, \"stroke\",\"rgba(0,0,0,0.3)\")\r\n          // obj.diagram.model.setDataProperty(obj.data, \"strokeDashArray\",\"[10, 5]\")\r\n        })\r\n        horizontalLines.forEach(function(obj,index){\r\n          var newOrder = index+1;\r\n          obj.diagram.model.setDataProperty(obj.data,\"order\", newOrder)\r\n          obj.location = group.location.copy().offset(0,-gridHeight*(newOrder))\r\n          obj.angle = 0;\r\n          obj.diagram.model.setDataProperty(obj.data, \"desiredSize\",`${x1+20} 10`)\r\n          // obj.diagram.model.setDataProperty(obj.data, \"showArrow\",false)\r\n          // obj.diagram.model.setDataProperty(obj.data, \"selectable\",false)\r\n          if(snapType == \"between\"){\r\n            if(newOrder < centerOrderY){\r\n              allPointsY.push(obj.location.y+gridHeight/2)\r\n            }\r\n            if(newOrder == centerOrderY){\r\n              allPointsY.push(obj.location.y)\r\n            }\r\n            if(newOrder > centerOrderY){\r\n              allPointsY.push(obj.location.y-gridHeight/2)\r\n            }\r\n          }else{\r\n              allPointsY.push(obj.location.y)\r\n          }\r\n          // obj.diagram.model.setDataProperty(obj.data, \"strokeWidth\",1)\r\n          // obj.diagram.model.setDataProperty(obj.data, \"stroke\",\"rgba(0,0,0,0.3)\")\r\n          // obj.diagram.model.setDataProperty(obj.data, \"strokeDashArray\",\"[10, 5]\")\r\n        })\r\n        // allPointsX.unshift(allPointsX[0]-gridWidth)\r\n        // allPointsX.push(allPointsX[allPointsX.length-1]+gridWidth)\r\n        // allPointsY.unshift(allPointsY[0]-gridLength)\r\n        // allPointsY.push(allPointsY[allPointsY.length-1]+gridLength)\r\n        this.group.__yunPointsX = allPointsX\r\n        this.group.__yunPointsY = allPointsY\r\n        freelLines.forEach(function(obj,index){\r\n          // var newOrder = index+1;\r\n          // obj.diagram.model.setDataProperty(obj.data,\"order\", newOrder)\r\n          // obj.location = new go.Point(allPointsX[9], allPointsY[9])\r\n          // obj.angle = 315;\r\n          // obj.diagram.model.setDataProperty(obj.data, \"desiredSize\",`${gridWidth*20-5} 10`)\r\n          // obj.diagram.model.setDataProperty(obj.data, \"showArrow\",false)\r\n          // obj.diagram.model.setDataProperty(obj.data, \"selectable\",true)\r\n          // obj.diagram.model.setDataProperty(obj.data, \"strokeWidth\",1)\r\n          // obj.diagram.model.setDataProperty(obj.data, \"zOrder\",10)\r\n          // obj.diagram.model.setDataProperty(obj.data, \"showArrow\",true)\r\n          // obj.diagram.model.setDataProperty(obj.data, \"showBeginArrow\",true)\r\n          // obj.diagram.model.setDataProperty(obj.data, \"showEndArrow\",true)\r\n          // obj.diagram.model.setDataProperty(obj.data, \"locationSpot\",`0.5 0.5 0 0`)\r\n          // obj.diagram.model.setDataProperty(obj.data, \"stroke\",\"rgba(0,0,0,0.3)\")\r\n          // obj.diagram.model.setDataProperty(obj.data, \"strokeDashArray\",\"[5, 5]\")\r\n          // obj.diagram.model.setDataProperty(obj.data, \"selectable\",false)\r\n        })\r\n\r\n\r\n\r\n        shapeNodes.forEach(function(obj,index){\r\n          obj.diagram.model.setDataProperty(obj.data, \"visible\",true)\r\n          if(!showShape){\r\n            obj.diagram.model.setDataProperty(obj.data, \"stroke\", \"rgba(255,0,0,0)\")\r\n          }else{\r\n            try{\r\n              obj.diagram.model.setDataProperty(obj.data, \"stroke\", shapeStrokes[obj.data.gridWidth/2-1])\r\n            }catch(e){\r\n              console.log(e)\r\n            }\r\n          }\r\n            if(obj.data.desiredSize){\r\n              return;\r\n            }\r\n            obj.data.orderX = centerOrderX\r\n            obj.data.orderY = centerOrderY\r\n            obj.location = new go.Point(allPointsX[obj.data.orderX-1], allPointsY[obj.data.orderY-1])\r\n            var shapeWidth = obj.data.gridWidth||2;\r\n            if(snapType == \"between\"){\r\n              var desiredSize = new go.Size(gridWidth*(shapeWidth-1), gridHeight*(shapeWidth-1))\r\n              obj.diagram.model.setDataProperty(obj.data, \"strokeWidth\", gridWidth)\r\n            }else{\r\n              var desiredSize = new go.Size(gridWidth*shapeWidth+3, gridHeight*shapeWidth+3)\r\n              obj.diagram.model.setDataProperty(obj.data, \"strokeWidth\", 3)\r\n            }\r\n            // obj.desiredSize = desiredSize;\r\n            obj.diagram.model.setDataProperty(obj.data, \"desiredSize\",go.Size.stringify(desiredSize))\r\n            // obj.diagram.model.setDataProperty(obj.data, \"visible\",true)\r\n            obj.diagram.model.setDataProperty(obj.data, \"strokeDashArray\",\"[0,0]\")\r\n            \r\n        })\r\n\r\n        // var dist = Math.max(gridHeight,gridWidth)\r\n        freeTexts.forEach(function(obj,index){\r\n          // var newOrder = index+1;\r\n          // obj.diagram.model.setDataProperty(obj.data,\"order\", newOrder)\r\n          // obj.location = group.location.copy()\r\n          // obj.angle = 315;\r\n          // obj.diagram.model.setDataProperty(obj.data, \"desiredSize\",`${x1+20} 10`)\r\n          // obj.diagram.model.setDataProperty(obj.data, \"minSize\",`60 50`)\r\n          // obj.diagram.model.setDataProperty(obj.data, \"width\",`${gridWidth-10}`)\r\n          // obj.diagram.model.setDataProperty(obj.data, \"height\",`${gridHeight-10}`)\r\n          // obj.diagram.model.setDataProperty(obj.data, \"width\",`${gridWidth*3}`)\r\n          // delete obj.data.width\r\n          // obj.diagram.model.setDataProperty(obj.data, \"textAlign\",`center`)\r\n          // obj.diagram.model.setDataProperty(obj.data, \"locationSpot\",`0.5 0.5 0 0`)\r\n          // obj.diagram.model.setDataProperty(obj.data, \"strokeDashArray\",\"[10, 5]\")\r\n          // obj.diagram.model.setDataProperty(obj.data, \"font\", group.__trtdNode.defaultTextFont)\r\n\r\n      // if(node.__yunPointsY && node.__yunPointsX){\r\n      //       for(var i=0;i<allPointsX.length;i++){\r\n      //         if(obj)\r\n      //       }\r\n      //    }\r\n      // if(obj.data.text.indexOf(\"自由文本\") >-1){\r\n      //   console.log(\"ddd\",obj.data.text)\r\n      //   var order = obj.data.text.replace(\"自由文本\",\"\").split(\",\")\r\n      //   if(order.length == 2){\r\n      //     obj.data.orderX = order[0]\r\n      //     obj.data.orderY = order[1]\r\n      //     obj.location = new go.Point(allPointsX[obj.data.orderX-1], allPointsY[obj.data.orderY-1])\r\n      //   }\r\n      // }\r\n\r\n        // if(obj.data.text.length == 1){\r\n        //   if(obj.data.subRole == null){\r\n        //     obj.diagram.model.setDataProperty(obj.data, \"subRole\",\"coreText\")\r\n        //     obj.diagram.model.setDataProperty(obj.data, \"deletable\", false)\r\n        //   }\r\n        // }\r\n\r\n        // if(obj.data.text.indexOf(\"维度\") >-1){\r\n        //   console.log(\"ddd\",obj.data.text)\r\n        //   // var order = obj.data.text.replace(\"维度\",\"\").split(\",\")\r\n        //   obj.diagram.model.setDataProperty(obj.data, \"subRole\",\"dimText\")\r\n        //   // obj.diagram.model.setDataProperty(obj.data, \"dimKey\", null)\r\n        //   delete obj.data.dimKey\r\n        //   obj.diagram.model.setDataProperty(obj.data, \"deletable\", false)\r\n        //   // obj.diagram.model.setDataProperty(obj.data, \"width\", null)\r\n        //   // obj.diagram.model.setDataProperty(obj.data, \"height\", null)\r\n        // }\r\n          obj.areaBackground = null\r\n          obj.diagram.model.setDataProperty(obj.data, \"height\", null)\r\n          obj.diagram.model.setDataProperty(obj.data, \"width\", null)\r\n          // obj.findObject(\"place\").visible = false;\r\n          // console.log(\"verticalLines.length+1)/2verticalLines.length+1)/2\",(verticalLines.length+1)/2)\r\n          if(group.data.autoSnapText){\r\n            // 计算普通文字位置\r\n            if(obj.data.orderX && obj.data.orderY){\r\n              obj.location = new go.Point(allPointsX[obj.data.orderX-1], allPointsY[obj.data.orderY-1])\r\n              \r\n              obj.location = new go.Point(allPointsX[obj.data.orderX-1], allPointsY[obj.data.orderY-1])\r\n            }\r\n            // 计算维度文字位置\r\n            if(obj.data.subRole == \"dimText\" && obj.data.dimX!=null && obj.data.dimY!=null){\r\n              console.log(\"dimText\")\r\n              var dimXLoc, dimYLoc;\r\n              dimXLoc = allPointsX[obj.data.dimX-1]\r\n              dimYLoc = allPointsY[obj.data.dimY-1]\r\n\r\n              if(obj.data.dimX >= allPointsX.length){\r\n                dimXLoc = allPointsX[allPointsX.length-1]+gridWidth\r\n                // if(snapType != \"between\"){\r\n                //   dimXLoc += gridWidth/3\r\n                // }\r\n              }\r\n              if(obj.data.dimY >= allPointsY.length){\r\n                dimYLoc = allPointsY[allPointsY.length-1]-gridHeight\r\n                // if(snapType != \"between\"){\r\n                //   dimYLoc -= gridHeight/3\r\n                // }\r\n              }\r\n              if(obj.data.dimX <= 0){\r\n                dimXLoc = allPointsX[0]-gridWidth\r\n                if(snapType != \"between\"&& obj.data.dimY < allPointsY.length){\r\n                  dimXLoc -= gridWidth/2\r\n                }\r\n              }\r\n              if(obj.data.dimY <= 0){\r\n                dimYLoc = allPointsY[0]+gridHeight\r\n                if(snapType != \"between\" && obj.data.dimX < allPointsX.length){\r\n                  dimYLoc += gridHeight/2\r\n                }\r\n              }\r\n              obj.location = new go.Point(dimXLoc, dimYLoc)\r\n            }\r\n          }\r\n          if(obj.data.orderY == centerOrderY||obj.data.dimY == centerOrderY){\r\n            // console.log(\"Ddddddd\")\r\n            obj.diagram.model.setDataProperty(obj.data, \"width\",`${gridWidth-10}`)\r\n            // delete obj.data.height\r\n            obj.diagram.model.setDataProperty(obj.data, \"height\", null)\r\n          }\r\n          if(obj.data.orderX == centerOrderX || obj.data.dimX == centerOrderX ){\r\n            // console.log(\"Ddddddd\")\r\n            obj.diagram.model.setDataProperty(obj.data, \"height\",`${gridHeight-10}`)\r\n            obj.diagram.model.setDataProperty(obj.data, \"width\", null)\r\n            // delete obj.data.width\r\n          }\r\n\r\n          if(Math.abs(obj.data.orderX-centerOrderX) <= 1 && Math.abs(obj.data.orderY-centerOrderY) <= 1){\r\n            // 中心节点\r\n            if(snapType != \"between\"){\r\n              obj.diagram.model.setDataProperty(obj.data, \"width\",`${gridWidth-10}`)\r\n              obj.diagram.model.setDataProperty(obj.data, \"height\",`${gridHeight-10}`)\r\n            }\r\n          }\r\n\r\n          if(Math.abs(obj.data.orderX-centerOrderX) == 0 && Math.abs(obj.data.orderY-centerOrderY) == 0){\r\n            // 中心节点\r\n            // obj.diagram.model.setDataProperty(obj.data, \"textStroke\",`red`)\r\n            // obj.diagram.model.setDataProperty(obj.data, \"deletable\", false)\r\n            // obj.diagram.model.setDataProperty(obj.data, \"subRole\", \"themeText\")\r\n            // obj.diagram.model.setDataProperty(obj.data, \"height\",`${gridHeight-10}`)\r\n            if(snapType == \"between\"){\r\n              obj.diagram.model.setDataProperty(obj.data, \"width\",`${gridWidth+gridWidth-10}`)\r\n              obj.diagram.model.setDataProperty(obj.data, \"height\",`${gridHeight+gridHeight-10}`)\r\n            }else{\r\n              obj.diagram.model.setDataProperty(obj.data, \"width\",`${gridWidth-10}`)\r\n              obj.diagram.model.setDataProperty(obj.data, \"height\",`${gridHeight-10}`)\r\n            }\r\n          }\r\n          // else{\r\n          //   // var list = verticalLines[0].layer.findObjectsNear(obj.location, dist)\r\n          //   // console.log(\"list\",list)\r\n          //   var x=obj.location.x,y=obj.location.y, xi,yi;\r\n          //     for(var i=0;i<allPointsX.length;i++){\r\n          //       if(x<allPointsX[i]){\r\n          //         x = allPointsX[i]\r\n          //         xi = i\r\n          //         break;\r\n          //       }\r\n          //     }\r\n          //     for(var i=0;i<allPointsY.length;i++){\r\n          //       if(y<=allPointsY[i]){\r\n          //         y = allPointsY[i]\r\n          //         yi = i;\r\n          //         break;\r\n          //       }\r\n          //     }\r\n\r\n          //     if(x != -9000 && y != 9000){\r\n          //       obj.location = new go.Point(x, y)\r\n          //       obj.data.orderX = xi + 1;\r\n          //       obj.data.orderY = yi + 1;\r\n          //     }\r\n          //     console.log(\"sdfdsfsd\")\r\n          // }\r\n\r\n          // obj.diagram.model.setDataProperty(obj.data, \"selectable\",false)\r\n        })\r\n\r\n        if(axisXText){\r\n          // axisXText.location = group.location.copy().offset(x1+30, 0)\r\n          // axisXText.locationSpot = go.Spot.Top\r\n        }\r\n        if(axisYText){\r\n          // axisYText.location = group.location.copy().offset(-10, -(x2+30))\r\n          // axisYText.locationSpot = go.Spot.Right\r\n        }\r\n        if(axisY) {\r\n          axisY.angle = 270;\r\n          this.diagram.model.setDataProperty(axisY.data, \"desiredSize\",`${x2+30} 10`)\r\n        }\r\n        if(axisX) {\r\n          axisX.angle = 0\r\n          this.diagram.model.setDataProperty(axisX.data, \"desiredSize\",`${x1+30} 10`)\r\n        }\r\n        // line.width = 2000\r\n        // line.height = 4\r\n        group.width = x1+gridWidth*2\r\n        group.height = x2+gridHeight*2\r\n        // group.location = group.location.copy().offset(-gridWidth, gridHeight)\r\n        // this.diagram.model.setDataProperty(group.data, \"loc\",go.Point.stringify(group.location.copy().offset(-gridWidth, gridHeight)))\r\n        go.Layout.prototype.doLayout.call(this, coll);\r\n        diagram.commitTransaction(\"YunGroupLayout\");\r\n        // diagram.updateAllTargetBindings()\r\n        return;\r\n        // return;\r\n        // var diagram = this.diagram;\r\n        if (diagram === null) return;\r\n        diagram.startTransaction(\"PoolLayout\");\r\n        // make sure all of the Group Shapes are big enough\r\n        // var minsize = computeMinPoolSize();\r\n        // diagram.findTopLevelGroups().each(function(lane) {\r\n        //   if (!(lane instanceof go.Group)) return;\r\n        //   var shape = lane.selectionObject;\r\n        //   if (shape !== null) {  // change the desiredSize to be big enough in both directions\r\n        //     var sz = computeLaneSize(lane);\r\n        //     shape.width = (!isNaN(shape.width)) ? Math.max(shape.width, sz.width) : sz.width;\r\n        //     shape.height = (isNaN(shape.height) ? minsize.height : Math.max(shape.height, minsize.height));\r\n        //     var cell = lane.resizeCellSize;\r\n        //     if (!isNaN(shape.width) && !isNaN(cell.width) && cell.width > 0) shape.width = Math.ceil(shape.width / cell.width) * cell.width;\r\n        //     if (!isNaN(shape.height) && !isNaN(cell.height) && cell.height > 0) shape.height = Math.ceil(shape.height / cell.height) * cell.height;\r\n        //   }\r\n        // });\r\n        // now do all of the usual stuff, according to whatever properties have been set on this GridLayout\r\n        go.GridLayout.prototype.doLayout.call(this, coll);\r\n        diagram.commitTransaction(\"PoolLayout\");\r\n      };\r\n      // end PoolLayout class\r\n\r\n      module.exports = YunGroupLayout\n\n\n// WEBPACK FOOTER //\n// ./src/layout/yunGroupLayout.js","var $ = go.GraphObject.make;\r\nvar Base = require('./base')\r\nvar helpers = require('../helpers/helpers.gojs')\r\nvar yunGroupLayout = require(\"../layout/yunpanGroupLayout\")\r\n\r\nclass YunNodeTemplate extends Base {\r\n    constructor(options){\r\n        super(options)\r\n        // this.nodeProperties = {}\r\n        this.defaultTextFont = \"20px 'Microsoft YaHei'\"\r\n        \r\n    }\r\n    \r\n\r\n    snapToGrid(data, node){\r\n\r\n      if(data.subRole == \"coreText\" || data.subRole == \"themeText\"){\r\n        return;\r\n      }\r\n      var p = go.Point.parse(data.loc)\r\n      if(node.__yunPointsX && node.__yunPointsY ){\r\n        if(p.x >= node.__yunPointsX[0] && p.x <= node.__yunPointsX[node.__yunPointsX.length-1] \r\n          && p.y >= node.__yunPointsY[node.__yunPointsY.length-1] && p.y <= node.__yunPointsY[0] ){\r\n            // 在画布格子范围内的位置才对齐网格\r\n            var minX=20000,minY=20000,tmp,orderX,orderY;\r\n            for(var i=0;i<node.__yunPointsX.length;i++){\r\n              tmp = Math.abs(p.x - node.__yunPointsX[i])\r\n              if(tmp< minX){\r\n                minX = tmp;\r\n                orderX = i+1;\r\n              }\r\n            }\r\n            for(var i=0;i<node.__yunPointsY.length;i++){\r\n              tmp = Math.abs(p.y - node.__yunPointsY[i])\r\n              if(tmp< minY){\r\n                minY = tmp;\r\n                orderY = i+1;\r\n              }\r\n            }\r\n\r\n            if(orderX!=null && orderY!=null){\r\n              // var x = node.__yunPointsX[orderX-1]\r\n              // var y = node.__yunPointsX[orderY-1]\r\n              // x = -1300\r\n              // y = -1300\r\n              // data.loc = \"-1688.105387366997 -121.19730986224602\"\r\n              data.orderX = orderX\r\n              data.orderY = orderY\r\n            }\r\n          }else{\r\n            delete data.orderX\r\n            delete data.orderY\r\n          }\r\n     }\r\n    }\r\n\r\n    addFreeText(e, node){\r\n      console.log(\"addFreeTextaddFreeText begin\",e)\r\n      var gridWidth = node.data.gridWidth\r\n      var p = e.documentPoint\r\n      var that = this;\r\n      var data = {\"text\":\"节点\",\r\n      \"deletable\":true, \r\n      \"role\":\"freeText\",\r\n      \"fill\":\"black\", \r\n      \"iconVisible\":false, \r\n      \"locationSpot\":\"0.5 0.5 0 0\", \r\n      \"minSize\":`30 30`,\r\n      \"subRole\":\"yunpanText\",\r\n\r\n      // \"width\":`${gridWidth-10}`,\r\n      font: that.defaultTextFont,\r\n      \"textAlign\":\"center\", \r\n      \"category\":\"autoText\", \r\n      \"loc\": go.Point.stringify(p), \r\n      \"movable\":true, \"group\":node.data.key\r\n     }\r\n    //  console.log()\r\n     \r\n\r\n      this.snapToGrid(data, node)\r\n     this.diagram.startTransaction(\"addFreeText\")\r\n     this.diagram.model.addNodeData(data);\r\n     this.diagram.commitTransaction(\"addFreeText\")\r\n     node.layout.isValidLayout = false\r\n     console.log(\"addFreeTextaddFreeText end\",e)\r\n    }\r\n    addFreeShapeText(e, node){\r\n      console.log(\"addFreeTextaddFreeText begin\",e)\r\n      var gridWidth = node.data.gridWidth\r\n      var p = e.documentPoint\r\n      var that = this;\r\n      var data = {\"text\":\"节点\",\r\n      \"deletable\":true, \r\n      \"role\":\"freeText\",\r\n      \"fill\":\"#F2F2F2\", \r\n      \"iconVisible\":false, \r\n      \"locationSpot\":\"0.5 0.5 0 0\", \r\n      \"minSize\":`30 30`,\r\n      \"subRole\":\"yunpanText\",\r\n      desiredSize: go.Size.stringify(new go.Size(gridWidth-10,gridWidth-10)),\r\n      // \"width\":`${gridWidth-10}`,\r\n      font: that.defaultTextFont,\r\n      \"textAlign\":\"center\", \r\n      \"category\":\"shapeText\", \r\n      \"loc\": go.Point.stringify(p), \r\n      \"movable\":true, \"group\":node.data.key\r\n     }\r\n    //  console.log()\r\n     \r\n\r\n      this.snapToGrid(data, node)\r\n     this.diagram.startTransaction(\"addFreeText\")\r\n     this.diagram.model.addNodeData(data);\r\n     this.diagram.commitTransaction(\"addFreeText\")\r\n     node.layout.isValidLayout = false\r\n     console.log(\"addFreeTextaddFreeText end\",e)\r\n    }\r\n\r\n    getNodeTemplate(){\r\n      var that = this\r\n      return $(go.Group, \"Auto\",\r\n      { selectionObjectName: \"PH\",\r\n      __trtdNode: that,\r\n      layerName: \"default\",\r\n      padding: 0,\r\n      margin: 0,\r\n      copyable: false,\r\n      zOrder: 15,\r\n        locationObjectName: \"PH\",\r\n        locationSpot: new go.Spot(0,1,0,-0),\r\n        // rotationSpot: go.Spot.LeftCenter,\r\n        rotatable: false,\r\n        alignment: go.Spot.Left,\r\n        alignmentFocus: go.Spot.Left,\r\n        // rotateObject:\"PH\",\r\n        click: (e, node)=>{\r\n          console.log(node.data)\r\n          var it = node.findSubGraphParts().iterator;\r\n          while (it.next()) {\r\n              var n = it.value;\r\n              if(n.data.category == \"autoText\"){\r\n                  n.findObject(\"textBorder\").visible = false;\r\n              }\r\n          }\r\n          node.layout.isValidLayout = false\r\n          return;\r\n          if(node.isSelected) return;\r\n          var it = node.findSubGraphParts().iterator;\r\n          var n;\r\n          while (it.next()) {\r\n              n = it.value;\r\n              if(n.data.role == \"labelGroup\"){\r\n                  n.__trtdNode.switchBorder(n, true)\r\n                  break;\r\n              }\r\n          }\r\n          if(n){\r\n            setTimeout(function(){\r\n              n.__trtdNode.switchBorder(n, false)\r\n            },3000)\r\n          }\r\n        },\r\n        doubleClick: function (e, node){\r\n          that.addFreeShapeText(e, node)\r\n        },\r\n        mouseOver: function(e, node) {\r\n          // if(node.data.hyperlink){\r\n          //   var textObj = node.findObject('TEXT');\r\n          //   textObj.isUnderline = true;\r\n          // }\r\n          // if(!node.containingGroup) return;\r\n          return;\r\n          // diagram.__trtd.showNodeRemarkTips(e, node);\r\n      },\r\n      contextMenu: $(go.Adornment),\r\n      mouseLeave: function(e, node) {\r\n        // if(!node.containingGroup) return;\r\n        var it = node.findSubGraphParts().iterator;\r\n        while (it.next()) {\r\n            var n = it.value;\r\n            if(n.data.role == \"labelGroup\"){\r\n                // n.__trtdNode.switchBorder(n, false)\r\n                break;\r\n            }\r\n        }\r\n        // if(n){\r\n        //   setTimeout(function(){\r\n        //     n.__trtdNode.switchBorder(n, false)\r\n        //   },3000)\r\n        // }\r\n      },\r\n        // rotatable: true,\r\n        // resizable: true,\r\n        // layoutConditions: go.Part.LayoutStandard,\r\n        layoutConditions: go.Part.LayoutStandard & go.Part.LayoutRemoved & go.Part.LayoutAdded & go.Part.LayoutNodeSized,\r\n        layout: new yunGroupLayout()\r\n        // layout: $(go.GridLayout,{\r\n        //   spacing: new go.Size(0,0),\r\n        //   cellSize: go.Size.parse(300,150),\r\n        //   arrangement:go.GridLayout.LeftToRight,\r\n        //   alignment: go.GridLayout.Location,\r\n        //   comparer:function(pa, pb) {\r\n        //     var da = pa.data;\r\n        //     var db = pb.data;\r\n        //     if (da.order < db.order) return -1;\r\n        //     if (da.order > db.order) return 1;\r\n        //     return 0;\r\n        //   }\r\n        // }) \r\n      },\r\n      new go.Binding(\"deletable\", \"deletable\").makeTwoWay(function(v,data){\r\n        return v;\r\n      }),\r\n      new go.Binding(\"copyable\", \"copyable\").makeTwoWay(),\r\n      new go.Binding(\"angle\", \"angle\").makeTwoWay(function(v,data){\r\n        return v;\r\n      }),\r\n      new go.Binding(\"zOrder\", \"zOrder\").makeTwoWay(function(v,data){\r\n        return v;\r\n      }),\r\n      new go.Binding(\"locationSpot\", \"\", function(data){\r\n        // console.log(\"data:\",data)\r\n        return new go.Spot(0,1,data.gridWidth,-data.gridHeight)\r\n      }),\r\n        \r\n        $(go.Shape,  // using a Shape instead of a Placeholder\r\n          { name: \"PH\",\r\n          figure:\"Rectangle\",\r\n          // rotationSpot: go.Spot.LeftCenter,\r\n          // spot1: new go.Spot(0.01, 0.01),\r\n          // spot2: new go.Spot(0.99, 0.99),\r\n            // width: 600,\r\n            // height:300,\r\n            stroke:\"yellow\" ,\r\n            strokeWidth:0,\r\n            fill: \"rgba(0,0,255,0.0)\" },\r\n          // new go.Binding(\"desiredSize\", \"desiredSize\", function(v,data){\r\n          //   return go.Size.parse(v)\r\n          //   console.log('1111111111111111111111')\r\n          //   // for(var i=0;i<)\r\n          //   var model = data.part.diagram.model;\r\n          //   var group = data.part.data;\r\n          //   var maxWidth = 0;\r\n          //   var maxHeight = 0;\r\n          //   for(var i = 0;i<model.nodeDataArray.length;i++){\r\n          //     if(group.key != model.nodeDataArray[i].group){\r\n          //       continue;\r\n          //     }\r\n          //     if(model.nodeDataArray[i].desiredSize){\r\n          //       console.log(model.nodeDataArray[i].desiredSize)\r\n          //       var size = go.Size.parse(model.nodeDataArray[i].desiredSize)\r\n          //       if(size.width > maxWidth){\r\n          //         maxWidth = size.width;\r\n          //       }\r\n          //       if(size.height > maxHeight){\r\n          //         maxHeight = size.height;\r\n          //       }\r\n          //     }\r\n          //   }\r\n          //   // var group = that.diagram.findNodeForKey(data.part.data.key)\r\n          //   // var git = group.memberParts;\r\n          //   // var maxWidth = 0;\r\n          //   // var maxHeight = 0;\r\n          //   // while (git.next()) {\r\n          //   //   var item = git.value;\r\n          //   //   console.log(\"item:\",item)\r\n          //   //   if(item.naturalBounds.width > maxWidth){\r\n          //   //     maxWidth = item.naturalBounds.width;\r\n          //   //   }\r\n          //   //   if(item.naturalBounds.height > maxHeight){\r\n          //   //     maxHeight = item.naturalBounds.height;\r\n          //   //   }\r\n          //   //   console.log(`maxHeight:${maxHeight},maxWidth:${maxWidth}`)\r\n      \r\n          //   // }           \r\n          //   return go.Size.parse(`${maxWidth+100} ${maxHeight}`)         \r\n          //   // group.diagram.model.setDataProperty(group.data, \"desiredSize\", `${maxWidth+100} ${maxHeight}`) \r\n          // }).makeTwoWay(go.Size.stringify)\r\n        ),\r\n        new go.Binding(\"location\", \"loc\", go.Point.parse).makeTwoWay(go.Point.stringify),\r\n        // $(go.Placeholder,    // represents the area of all member parts,\r\n        //   { padding: 0}\r\n        // ),  // with some extra padding around them\r\n\r\n        // $(go.TextBlock,  // group title\r\n        //   { font: \"Bold 12pt Sans-Serif\" },\r\n        //   new go.Binding(\"text\", \"key\")\r\n        // )\r\n      )\r\n    }\r\n}\r\n\r\nmodule.exports = YunNodeTemplate\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/nodeTemplate/yunpanGroupNodeTemplate.js","    // define a custom grid layout that makes sure the length of each lane is the same\r\n    // and that each lane is broad enough to hold its subgraph\r\n    function YunGroupLayout() {\r\n        go.Layout.call(this);\r\n        // go.GridLayout.call(this);\r\n        // this.cellSize = new go.Size(1, 1);\r\n        // this.wrappingColumn = Infinity;\r\n        // this.wrappingWidth = Infinity;\r\n        // this.spacing = new go.Size(0, 0);\r\n        // this.alignment = go.GridLayout.Position;\r\n      }\r\n      go.Diagram.inherit(YunGroupLayout, go.Layout);\r\n  \r\n      function computeNewRotateLoc(rotateCenter,currentLoc, angle){\r\n          if(rotateCenter.equals(currentLoc)) return currentLoc\r\n        // 计算选择中心点到（0,0）点的偏移\r\n        var offset = new go.Point(0,0).subtract(rotateCenter.copy())\r\n        // 将原来的点偏移到相对0,0点的位置\r\n        var nodeOrigin = currentLoc.copy().offset(offset.x, offset.y)\r\n        var newNodeOrigin = nodeOrigin.rotate(angle)\r\n        var newNodeLoc = newNodeOrigin.copy().offset(-offset.x, -offset.y)\r\n        return newNodeLoc\r\n        // console.log(\"newNodeLoc\", newNodeLoc)\r\n      }\r\n      YunGroupLayout.prototype.doLayout = function(coll) {\r\n          console.log(\"YunGroupLayout.doLayout\")\r\n        var diagram = this.diagram;\r\n        diagram.startTransaction(\"YunGroupLayout\")\r\n          // COLL might be a Diagram or a Group or some Iterable<Part>\r\n         \r\n        var it = this.collectParts(coll).iterator;\r\n        var collection = []\r\n        var dataCollection =[]\r\n        var group = this.group\r\n        var gridWidth = group.data.gridWidth\r\n        var gridHeight = group.data.gridHeight\r\n        // group.location = new go.Point(0,0)\r\n        var maxWidth = 0;\r\n        var maxHeight = 0;\r\n        var centerLine, axisX, axisY,axisXText, axisYText, themeText, labelText1,labelText2,labelText3,labelGroup,waveGroup\r\n        var shiTextColl = []\r\n        var xuTextColl = []\r\n        var verticalLines = []\r\n        var horizontalLines = []\r\n        var freelLines = []\r\n        var allLines = []\r\n        var freeTexts = []\r\n        var shapeNodes = []\r\n        var horizontalDim = []\r\n        var verticalDim = []\r\n        var snapType = group.data.snapType || \"grid\"\r\n        var showShape = group.data.showShape; // 是否显示矩形\r\n        var beginSpark = group.data.beginSpark; // 是否开始火花\r\n        var shapeStrokes = group.data.shapeStrokes; // 是否开始火花\r\n        var oliveWidth\r\n        var oliveHeight\r\n        while (it.next()) {\r\n            var node = it.value;\r\n                // var item = git.value;\r\n            //   console.log(\"item:\",item)\r\n\r\n            dataCollection.push(node.data)\r\n            if(node.data.category == \"wave\"){\r\n                collection.push(node)\r\n            }\r\n            if(!(node instanceof go.Node)){\r\n              continue;\r\n            }\r\n            \r\n            if(node.data.dimX == 0 && node.data.subRole == \"dimText\"){\r\n              verticalDim.push(node)\r\n            }\r\n            if(node.data.dimY == 0 && node.data.subRole == \"dimText\"){\r\n              horizontalDim.push(node)\r\n            }\r\n            if(node.data.role == \"background\"){\r\n              shapeNodes.push(node)\r\n            }\r\n            // 处理文本节点的位置和定位位置\r\n            // if(node.data.category == \"text\"){\r\n              if(node.data.role == \"axisYText\"){\r\n                axisYText = node;\r\n              }\r\n              if(node.data.role == \"axisXText\"){\r\n                axisXText = node;\r\n              }\r\n              if(node.data.role == \"themeText\"){\r\n                themeText = node;\r\n              }\r\n              if(node.data.role == \"shiText\"){\r\n                shiTextColl.push(node)\r\n              }\r\n              if(node.data.role == \"xuText\"){\r\n                xuTextColl.push(node)\r\n              }\r\n            // }\r\n            // 处理label文本节点的位置和定位位置\r\n            // if(node.data.category == \"iconText\"){\r\n              if(node.data.role == \"labelText1\"){\r\n                labelText1 = node;\r\n              }\r\n              if(node.data.role == \"labelText2\"){\r\n                labelText2 = node;\r\n              }\r\n              if(node.data.role == \"labelText3\"){\r\n                labelText3 = node;\r\n              }\r\n              if(node.data.role == \"labelGroup\"){\r\n                labelGroup = node;\r\n              }\r\n            // }\r\n\r\n              if(node.naturalBounds.width > maxWidth){\r\n                maxWidth = node.naturalBounds.width;\r\n              }\r\n              if(node.naturalBounds.height > maxHeight){\r\n                maxHeight = node.naturalBounds.height;\r\n              }\r\n            \r\n            \r\n              if(node.data.role == \"freeText\"){\r\n                freeTexts.push(node);\r\n              }\r\n            if (node.data.category == \"line\") {\r\n\r\n                allLines.push(node)\r\n                if(node.data.role == \"verticalLine\"){\r\n                  verticalLines.push(node);\r\n                }\r\n                if(node.data.role == \"horizontalLine\"){\r\n                  horizontalLines.push(node);\r\n                }\r\n                if(node.data.role == \"freelLine\"){\r\n                  freelLines.push(node);\r\n                }\r\n            }\r\n            if (node.data.group == group.key) {\r\n            // position the node . . .\r\n                if(node.data.category == \"line\"){\r\n                    if(node.data.role == \"axisX\") {\r\n                      node.angle = 0;\r\n                      axisX = node\r\n                      node.location = group.location.copy().offset(0,0)\r\n                    };\r\n                    if(node.data.role == \"axisY\") {\r\n                      axisY = node\r\n                      node.angle = 270;\r\n                      node.location = group.location.copy().offset(0,0)\r\n                    }\r\n                    // node.angle = 270\r\n                }\r\n                // if(node.data.category == \"waveGroup\"){\r\n                //     waveGroup = node;\r\n                //     // node.angle = group.angle\r\n                //     oliveWidth = node.data.oliveWidth\r\n                //     oliveHeight = node.data.oliveHeight\r\n                //     node.location = group.location.copy().offset(0,0)\r\n                //     // node.layout.isOngoing = true;\r\n                //     // node.layout.isValidLayout = false;\r\n                //     // collection.push(node)\r\n                // }\r\n\r\n            }\r\n        }\r\n        console.log(`maxHeight:${maxHeight},maxWidth:${maxWidth}`)\r\n\r\n\r\n\r\n        verticalLines.sort(function(a,b){\r\n            return a.data.order - b.data.order\r\n        })\r\n        horizontalLines.sort(function(a,b){\r\n            return a.data.order - b.data.order\r\n        })\r\n        freelLines.sort(function(a,b){\r\n          return a.data.order - b.data.order\r\n        })\r\n        // verticalDim.sort(function(a,b){\r\n        //     return a.data.dimY - b.data.dimY\r\n        // })\r\n        // horizontalDim.sort(function(a,b){\r\n        //     return a.data.dimX - b.data.dimX\r\n        // })\r\n        // horizontalLines.forEach(function(obj,index){\r\n        //   var newOrder = index+1;\r\n        //   obj.diagram.model.setDataProperty(obj.data,\"dimX\", newOrder)\r\n        // })\r\n        // verticalDim.forEach(function(obj,index){\r\n        //   var newOrder = index+1;\r\n        //   obj.diagram.model.setDataProperty(obj.data,\"dimY\", newOrder)\r\n        // })\r\n        if(snapType == \"between\"){\r\n          var x1 = verticalLines.length*gridWidth+gridWidth\r\n          var x2 = horizontalLines.length*gridHeight+gridHeight\r\n        }else{\r\n          var x1 = verticalLines.length*gridWidth\r\n          var x2 = horizontalLines.length*gridHeight\r\n        }\r\n\r\n        var allPointsX = [];\r\n        var allPointsY = [];\r\n        var centerOrderX = (horizontalLines.length+1)/2\r\n        var centerOrderY = (verticalLines.length+1)/2\r\n        allLines.forEach(function(obj, index){\r\n          // obj.diagram.model.setDataProperty(obj.data, \"strokeWidth\",1)\r\n          \r\n          // obj.diagram.model.setDataProperty(obj.data, \"stroke\",\"rgba(0,0,0,0.3)\")\r\n          if( obj.data.role == \"axisX\" ||  obj.data.role == \"axisY\") return;\r\n          // if(obj.data.subRole == \"dim\"){\r\n          //   obj.diagram.model.setDataProperty(obj.data, \"strokeDashArray\",\"[0, 0]\")\r\n          //   obj.diagram.model.setDataProperty(obj.data, \"strokeWidth\",3)\r\n          //   obj.diagram.model.setDataProperty(obj.data, \"stroke\",\"RGBA(164, 177, 198, 1)\")\r\n          // }else{\r\n          //   obj.diagram.model.setDataProperty(obj.data, \"strokeDashArray\",\"[15, 10]\")\r\n          //   obj.diagram.model.setDataProperty(obj.data, \"strokeWidth\",1)\r\n          //   obj.diagram.model.setDataProperty(obj.data, \"stroke\",\"rgba(0,0,0,0.3)\")\r\n          // }\r\n        })\r\n\r\n        verticalLines.forEach(function(obj,index){\r\n          var newOrder = index+1;\r\n          obj.diagram.model.setDataProperty(obj.data,\"order\", newOrder)\r\n          obj.location = group.location.copy().offset(gridWidth*(newOrder),0)\r\n          obj.angle = 270;\r\n          obj.diagram.model.setDataProperty(obj.data, \"deletable\", true)\r\n          obj.diagram.model.setDataProperty(obj.data, \"desiredSize\",`${x2+20} 10`)\r\n          // obj.diagram.model.setDataProperty(obj.data, \"showArrow\",false)\r\n          // obj.diagram.model.setDataProperty(obj.data, \"selectable\",false)\r\n          if(snapType == \"between\"){\r\n            if(newOrder < centerOrderX){\r\n              allPointsX.push(obj.location.x-gridWidth/2)\r\n            }\r\n            if(newOrder == centerOrderX){\r\n              allPointsX.push(obj.location.x)\r\n            }\r\n            if(newOrder > centerOrderX){\r\n              allPointsX.push(obj.location.x+gridWidth/2)\r\n            }\r\n          }else{\r\n            allPointsX.push(obj.location.x)\r\n          }\r\n\r\n\r\n          // obj.diagram.model.setDataProperty(obj.data, \"strokeWidth\",1)\r\n          // obj.diagram.model.setDataProperty(obj.data, \"stroke\",\"rgba(0,0,0,0.3)\")\r\n          // obj.diagram.model.setDataProperty(obj.data, \"strokeDashArray\",\"[10, 5]\")\r\n        })\r\n        horizontalLines.forEach(function(obj,index){\r\n          var newOrder = index+1;\r\n          obj.diagram.model.setDataProperty(obj.data,\"order\", newOrder)\r\n          obj.diagram.model.setDataProperty(obj.data, \"deletable\", true)\r\n          obj.location = group.location.copy().offset(0,-gridHeight*(newOrder))\r\n          obj.angle = 0;\r\n          obj.diagram.model.setDataProperty(obj.data, \"desiredSize\",`${x1+20} 10`)\r\n          // obj.diagram.model.setDataProperty(obj.data, \"showArrow\",false)\r\n          // obj.diagram.model.setDataProperty(obj.data, \"selectable\",false)\r\n          if(snapType == \"between\"){\r\n            if(newOrder < centerOrderY){\r\n              allPointsY.push(obj.location.y+gridHeight/2)\r\n            }\r\n            if(newOrder == centerOrderY){\r\n              allPointsY.push(obj.location.y)\r\n            }\r\n            if(newOrder > centerOrderY){\r\n              allPointsY.push(obj.location.y-gridHeight/2)\r\n            }\r\n          }else{\r\n              allPointsY.push(obj.location.y)\r\n          }\r\n          // obj.diagram.model.setDataProperty(obj.data, \"strokeWidth\",1)\r\n          // obj.diagram.model.setDataProperty(obj.data, \"stroke\",\"rgba(0,0,0,0.3)\")\r\n          // obj.diagram.model.setDataProperty(obj.data, \"strokeDashArray\",\"[10, 5]\")\r\n        })\r\n        // allPointsX.unshift(allPointsX[0]-gridWidth)\r\n        // allPointsX.push(allPointsX[allPointsX.length-1]+gridWidth)\r\n        // allPointsY.unshift(allPointsY[0]-gridLength)\r\n        // allPointsY.push(allPointsY[allPointsY.length-1]+gridLength)\r\n        this.group.__yunPointsX = allPointsX\r\n        this.group.__yunPointsY = allPointsY\r\n        freelLines.forEach(function(obj,index){\r\n          // var newOrder = index+1;\r\n          // obj.diagram.model.setDataProperty(obj.data,\"order\", newOrder)\r\n          // obj.location = new go.Point(allPointsX[9], allPointsY[9])\r\n          // obj.angle = 315;\r\n          // obj.diagram.model.setDataProperty(obj.data, \"desiredSize\",`${gridWidth*20-5} 10`)\r\n          // obj.diagram.model.setDataProperty(obj.data, \"showArrow\",false)\r\n          // obj.diagram.model.setDataProperty(obj.data, \"selectable\",true)\r\n          // obj.diagram.model.setDataProperty(obj.data, \"strokeWidth\",1)\r\n          // obj.diagram.model.setDataProperty(obj.data, \"zOrder\",10)\r\n          // obj.diagram.model.setDataProperty(obj.data, \"showArrow\",true)\r\n          // obj.diagram.model.setDataProperty(obj.data, \"showBeginArrow\",true)\r\n          // obj.diagram.model.setDataProperty(obj.data, \"showEndArrow\",true)\r\n          // obj.diagram.model.setDataProperty(obj.data, \"locationSpot\",`0.5 0.5 0 0`)\r\n          // obj.diagram.model.setDataProperty(obj.data, \"stroke\",\"rgba(0,0,0,0.3)\")\r\n          // obj.diagram.model.setDataProperty(obj.data, \"strokeDashArray\",\"[5, 5]\")\r\n          // obj.diagram.model.setDataProperty(obj.data, \"selectable\",false)\r\n        })\r\n\r\n\r\n\r\n        // shapeNodes.forEach(function(obj,index){\r\n        //   obj.diagram.model.setDataProperty(obj.data, \"visible\",true)\r\n        //   if(!showShape){\r\n        //     obj.diagram.model.setDataProperty(obj.data, \"stroke\", \"rgba(255,0,0,0)\")\r\n        //   }else{\r\n        //     try{\r\n        //       obj.diagram.model.setDataProperty(obj.data, \"stroke\", shapeStrokes[obj.data.gridWidth/2-1])\r\n        //     }catch(e){\r\n        //       console.log(e)\r\n        //     }\r\n        //   }\r\n        //     if(obj.data.desiredSize){\r\n        //       return;\r\n        //     }\r\n        //     obj.data.orderX = centerOrderX\r\n        //     obj.data.orderY = centerOrderY\r\n        //     obj.location = new go.Point(allPointsX[obj.data.orderX-1], allPointsY[obj.data.orderY-1])\r\n        //     var shapeWidth = obj.data.gridWidth||2;\r\n        //     if(snapType == \"between\"){\r\n        //       var desiredSize = new go.Size(gridWidth*(shapeWidth-1), gridHeight*(shapeWidth-1))\r\n        //       obj.diagram.model.setDataProperty(obj.data, \"strokeWidth\", gridWidth)\r\n        //     }else{\r\n        //       var desiredSize = new go.Size(gridWidth*shapeWidth+3, gridHeight*shapeWidth+3)\r\n        //       obj.diagram.model.setDataProperty(obj.data, \"strokeWidth\", 3)\r\n        //     }\r\n        //     // obj.desiredSize = desiredSize;\r\n        //     obj.diagram.model.setDataProperty(obj.data, \"desiredSize\",go.Size.stringify(desiredSize))\r\n        //     // obj.diagram.model.setDataProperty(obj.data, \"visible\",true)\r\n        //     obj.diagram.model.setDataProperty(obj.data, \"strokeDashArray\",\"[0,0]\")\r\n            \r\n        // })\r\n\r\n        // var dist = Math.max(gridHeight,gridWidth)\r\n        freeTexts.forEach(function(obj,index){\r\n          // var newOrder = index+1;\r\n          // obj.diagram.model.setDataProperty(obj.data,\"order\", newOrder)\r\n          // obj.location = group.location.copy()\r\n          // obj.angle = 315;\r\n          // obj.diagram.model.setDataProperty(obj.data, \"desiredSize\",`${x1+20} 10`)\r\n          // obj.diagram.model.setDataProperty(obj.data, \"minSize\",`60 50`)\r\n          // obj.diagram.model.setDataProperty(obj.data, \"width\",`${gridWidth-10}`)\r\n          // obj.diagram.model.setDataProperty(obj.data, \"height\",`${gridHeight-10}`)\r\n          // obj.diagram.model.setDataProperty(obj.data, \"width\",`${gridWidth*3}`)\r\n          // delete obj.data.width\r\n          // obj.diagram.model.setDataProperty(obj.data, \"textAlign\",`center`)\r\n          // obj.diagram.model.setDataProperty(obj.data, \"locationSpot\",`0.5 0.5 0 0`)\r\n          // obj.diagram.model.setDataProperty(obj.data, \"strokeDashArray\",\"[10, 5]\")\r\n          // obj.diagram.model.setDataProperty(obj.data, \"font\", group.__trtdNode.defaultTextFont)\r\n\r\n      // if(node.__yunPointsY && node.__yunPointsX){\r\n      //       for(var i=0;i<allPointsX.length;i++){\r\n      //         if(obj)\r\n      //       }\r\n      //    }\r\n      // if(obj.data.text.indexOf(\"自由文本\") >-1){\r\n      //   console.log(\"ddd\",obj.data.text)\r\n      //   var order = obj.data.text.replace(\"自由文本\",\"\").split(\",\")\r\n      //   if(order.length == 2){\r\n      //     obj.data.orderX = order[0]\r\n      //     obj.data.orderY = order[1]\r\n      //     obj.location = new go.Point(allPointsX[obj.data.orderX-1], allPointsY[obj.data.orderY-1])\r\n      //   }\r\n      // }\r\n\r\n        // if(obj.data.text.length == 1){\r\n        //   if(obj.data.subRole == null){\r\n        //     obj.diagram.model.setDataProperty(obj.data, \"subRole\",\"coreText\")\r\n        //     obj.diagram.model.setDataProperty(obj.data, \"deletable\", false)\r\n        //   }\r\n        // }\r\n\r\n        // if(obj.data.text.indexOf(\"维度\") >-1){\r\n        //   console.log(\"ddd\",obj.data.text)\r\n        //   // var order = obj.data.text.replace(\"维度\",\"\").split(\",\")\r\n        //   obj.diagram.model.setDataProperty(obj.data, \"subRole\",\"dimText\")\r\n        //   // obj.diagram.model.setDataProperty(obj.data, \"dimKey\", null)\r\n        //   delete obj.data.dimKey\r\n        //   obj.diagram.model.setDataProperty(obj.data, \"deletable\", false)\r\n        //   // obj.diagram.model.setDataProperty(obj.data, \"width\", null)\r\n        //   // obj.diagram.model.setDataProperty(obj.data, \"height\", null)\r\n        // }\r\n          obj.areaBackground = null\r\n          // obj.diagram.model.setDataProperty(obj.data, \"height\", null)\r\n          // obj.diagram.model.setDataProperty(obj.data, \"width\", null)\r\n          // obj.findObject(\"place\").visible = false;\r\n          // console.log(\"verticalLines.length+1)/2verticalLines.length+1)/2\",(verticalLines.length+1)/2)\r\n          if(group.data.autoSnapText){\r\n            // 计算普通文字位置\r\n            if(obj.data.orderX && obj.data.orderY){\r\n              obj.location = new go.Point(allPointsX[obj.data.orderX-1], allPointsY[obj.data.orderY-1])\r\n              \r\n              obj.location = new go.Point(allPointsX[obj.data.orderX-1], allPointsY[obj.data.orderY-1])\r\n            }\r\n            // 计算维度文字位置\r\n            if(obj.data.subRole == \"dimText\" && obj.data.dimX!=null && obj.data.dimY!=null){\r\n              console.log(\"dimText\")\r\n              obj.diagram.model.setDataProperty(obj.data, \"deletable\", true)\r\n              var dimXLoc, dimYLoc;\r\n              dimXLoc = allPointsX[obj.data.dimX-1]\r\n              dimYLoc = allPointsY[obj.data.dimY-1]\r\n\r\n              // if(obj.data.dimX > allPointsX.length+1){\r\n              //   dimXLoc = allPointsX[allPointsX.length-1]+gridWidth\r\n              //   // if(snapType != \"between\"){\r\n              //   //   dimXLoc += gridWidth/3\r\n              //   // }\r\n              // }\r\n              // if(obj.data.dimY > allPointsY.length+1){\r\n              //   dimYLoc = allPointsY[allPointsY.length-1]-gridHeight\r\n              //   // if(snapType != \"between\"){\r\n              //   //   dimYLoc -= gridHeight/3\r\n              //   // }\r\n              // }\r\n              if(obj.data.dimX <= 0){\r\n                dimXLoc = allPointsX[0]-gridWidth/2-10\r\n                if(snapType != \"between\"&& obj.data.dimY <= allPointsY.length){\r\n                  dimXLoc -= gridWidth/2\r\n                }\r\n              }\r\n              if(obj.data.dimY <= 0){\r\n                dimYLoc = allPointsY[0]+gridHeight/2\r\n                if(snapType != \"between\" && obj.data.dimX <= allPointsX.length){\r\n                  dimYLoc += gridHeight/2\r\n                }\r\n              }\r\n              obj.location = new go.Point(dimXLoc, dimYLoc)\r\n            }\r\n          }\r\n          // if(obj.data.orderY == centerOrderY||obj.data.dimY == centerOrderY){\r\n          //   // console.log(\"Ddddddd\")\r\n          //   obj.diagram.model.setDataProperty(obj.data, \"width\",`${gridWidth-10}`)\r\n          //   // delete obj.data.height\r\n          //   obj.diagram.model.setDataProperty(obj.data, \"height\", null)\r\n          // }\r\n          // if(obj.data.orderX == centerOrderX || obj.data.dimX == centerOrderX ){\r\n          //   // console.log(\"Ddddddd\")\r\n          //   obj.diagram.model.setDataProperty(obj.data, \"height\",`${gridHeight-10}`)\r\n          //   obj.diagram.model.setDataProperty(obj.data, \"width\", null)\r\n          //   // delete obj.data.width\r\n          // }\r\n\r\n          // if(Math.abs(obj.data.orderX-centerOrderX) <= 1 && Math.abs(obj.data.orderY-centerOrderY) <= 1){\r\n          //   // 中心节点\r\n          //   if(snapType != \"between\"){\r\n          //     obj.diagram.model.setDataProperty(obj.data, \"width\",`${gridWidth-10}`)\r\n          //     obj.diagram.model.setDataProperty(obj.data, \"height\",`${gridHeight-10}`)\r\n          //   }\r\n          // }\r\n\r\n          // if(Math.abs(obj.data.orderX-centerOrderX) == 0 && Math.abs(obj.data.orderY-centerOrderY) == 0){\r\n          //   // 中心节点\r\n          //   // obj.diagram.model.setDataProperty(obj.data, \"textStroke\",`red`)\r\n          //   // obj.diagram.model.setDataProperty(obj.data, \"deletable\", false)\r\n          //   // obj.diagram.model.setDataProperty(obj.data, \"subRole\", \"themeText\")\r\n          //   // obj.diagram.model.setDataProperty(obj.data, \"height\",`${gridHeight-10}`)\r\n          //   if(snapType == \"between\"){\r\n          //     obj.diagram.model.setDataProperty(obj.data, \"width\",`${gridWidth+gridWidth-10}`)\r\n          //     obj.diagram.model.setDataProperty(obj.data, \"height\",`${gridHeight+gridHeight-10}`)\r\n          //   }else{\r\n          //     obj.diagram.model.setDataProperty(obj.data, \"width\",`${gridWidth-10}`)\r\n          //     obj.diagram.model.setDataProperty(obj.data, \"height\",`${gridHeight-10}`)\r\n          //   }\r\n          // }\r\n          // else{\r\n          //   // var list = verticalLines[0].layer.findObjectsNear(obj.location, dist)\r\n          //   // console.log(\"list\",list)\r\n          //   var x=obj.location.x,y=obj.location.y, xi,yi;\r\n          //     for(var i=0;i<allPointsX.length;i++){\r\n          //       if(x<allPointsX[i]){\r\n          //         x = allPointsX[i]\r\n          //         xi = i\r\n          //         break;\r\n          //       }\r\n          //     }\r\n          //     for(var i=0;i<allPointsY.length;i++){\r\n          //       if(y<=allPointsY[i]){\r\n          //         y = allPointsY[i]\r\n          //         yi = i;\r\n          //         break;\r\n          //       }\r\n          //     }\r\n\r\n          //     if(x != -9000 && y != 9000){\r\n          //       obj.location = new go.Point(x, y)\r\n          //       obj.data.orderX = xi + 1;\r\n          //       obj.data.orderY = yi + 1;\r\n          //     }\r\n          //     console.log(\"sdfdsfsd\")\r\n          // }\r\n\r\n          // obj.diagram.model.setDataProperty(obj.data, \"selectable\",false)\r\n        })\r\n\r\n        if(axisXText){\r\n          axisXText.location = group.location.copy().offset(x1+50, 0)\r\n          axisXText.locationSpot = go.Spot.Left\r\n        }\r\n        if(axisYText){\r\n          axisYText.location = group.location.copy().offset(0, -(x2+50))\r\n          axisYText.locationSpot = go.Spot.Bottom\r\n        }\r\n        if(axisY) {\r\n          axisY.angle = 270;\r\n          this.diagram.model.setDataProperty(axisY.data, \"desiredSize\",`${x2+30} 10`)\r\n        }\r\n        if(axisX) {\r\n          axisX.angle = 0\r\n          this.diagram.model.setDataProperty(axisX.data, \"desiredSize\",`${x1+30} 10`)\r\n        }\r\n        // line.width = 2000\r\n        // line.height = 4\r\n        group.width = x1+gridWidth*2\r\n        group.height = x2+gridHeight*2\r\n        // group.location = group.location.copy().offset(-gridWidth, gridHeight)\r\n        // this.diagram.model.setDataProperty(group.data, \"loc\",go.Point.stringify(group.location.copy().offset(-gridWidth, gridHeight)))\r\n        go.Layout.prototype.doLayout.call(this, coll);\r\n        diagram.commitTransaction(\"YunGroupLayout\");\r\n        // diagram.updateAllTargetBindings()\r\n        return;\r\n        // return;\r\n        // var diagram = this.diagram;\r\n        if (diagram === null) return;\r\n        diagram.startTransaction(\"PoolLayout\");\r\n        // make sure all of the Group Shapes are big enough\r\n        // var minsize = computeMinPoolSize();\r\n        // diagram.findTopLevelGroups().each(function(lane) {\r\n        //   if (!(lane instanceof go.Group)) return;\r\n        //   var shape = lane.selectionObject;\r\n        //   if (shape !== null) {  // change the desiredSize to be big enough in both directions\r\n        //     var sz = computeLaneSize(lane);\r\n        //     shape.width = (!isNaN(shape.width)) ? Math.max(shape.width, sz.width) : sz.width;\r\n        //     shape.height = (isNaN(shape.height) ? minsize.height : Math.max(shape.height, minsize.height));\r\n        //     var cell = lane.resizeCellSize;\r\n        //     if (!isNaN(shape.width) && !isNaN(cell.width) && cell.width > 0) shape.width = Math.ceil(shape.width / cell.width) * cell.width;\r\n        //     if (!isNaN(shape.height) && !isNaN(cell.height) && cell.height > 0) shape.height = Math.ceil(shape.height / cell.height) * cell.height;\r\n        //   }\r\n        // });\r\n        // now do all of the usual stuff, according to whatever properties have been set on this GridLayout\r\n        go.GridLayout.prototype.doLayout.call(this, coll);\r\n        diagram.commitTransaction(\"PoolLayout\");\r\n      };\r\n      // end PoolLayout class\r\n\r\n      module.exports = YunGroupLayout\n\n\n// WEBPACK FOOTER //\n// ./src/layout/yunpanGroupLayout.js","\r\n\r\nvar $ = go.GraphObject.make;\r\nvar Base = require('./base')\r\nvar helpers = require('../helpers/helpers.gojs')\r\n  \r\n\r\nclass shapeNodeTemplate extends Base {\r\n    constructor(options){\r\n        super(options)\r\n        // this.nodeProperties = {}\r\n        \r\n    }\r\n\r\n  \r\n\r\n    getNodeSelectionAdornmentTemplate(){\r\n      return  $(go.Adornment, \"Spot\",\r\n                $(go.Panel, \"Auto\",\r\n                    $(go.Shape, { fill: null, stroke: \"dodgerblue\", strokeWidth: 1 }),\r\n                    $(go.Placeholder) // this represents the selected Node\r\n\r\n                ),\r\n                //$(\"TreeExpanderButton\",\r\n                $(go.Panel, \"Vertical\", {\r\n                        name: \"ButtonIcon1\",\r\n                        alignment: new go.Spot(0, 1, -20, 20),\r\n                        alignmentFocus: go.Spot.Center,\r\n                        width: 60,\r\n                        height: 60,\r\n                        isActionable: true,\r\n                        // click: interactions.expandCollapse // this function is defined below\r\n                    },\r\n\r\n                    $(go.Shape, \"Circle\", {\r\n                        fill: \"rgba(1,1,1,0)\",\r\n                        strokeWidth: 0,\r\n                        stroke: \"green\",\r\n                        width: 50,\r\n                        height: 50\r\n                    })\r\n\r\n                )\r\n            ); // end Adornment;\r\n    }\r\n\r\n    nodeResizeAdornmentTemplate () {\r\n      return $(go.Adornment, \"Spot\",\r\n          $(go.Placeholder), // takes size and position of adorned object\r\n          $(go.Shape, \"Circle\", // left resize handle\r\n              {\r\n                  alignment: go.Spot.TopLeft,\r\n                  alignmentFocus: go.Spot.BottomRight,\r\n                  cursor: \"col-resize\",\r\n                  desiredSize: new go.Size(30, 30),\r\n                  fill: \"lightblue\",\r\n                  stroke: \"dodgerblue\"\r\n              }),\r\n          $(go.Shape, \"Circle\", // right resize handle\r\n              {\r\n                  alignment: go.Spot.BottomRight,\r\n                  alignmentFocus: go.Spot.TopLeft,\r\n                  cursor: \"col-resize\",\r\n                  desiredSize: new go.Size(30, 30),\r\n                  fill: \"lightblue\",\r\n                  stroke: \"dodgerblue\"\r\n              })\r\n      )\r\n  }\r\n\r\n    getNodeTemplate(){\r\n      var diagram = this.diagram\r\n      var that = this;\r\n      return $(go.Node, \"Spot\", {\r\n        name: \"NODE\",\r\n        \"_controlExpand\": true,\r\n        layerName: \"default\",\r\n        zOrder: 13,\r\n        locationSpot: go.Spot.Center,\r\n        resizeCellSize: new go.Size(10, 10),\r\n        locationObjectName: \"SHAPE\",\r\n        resizable: true,\r\n        resizeObjectName: \"SHAPE\", // user can resize the Shape\r\n        rotatable: true,\r\n        rotateObjectName: \"SHAPE\", // rotate the Shape without rotating the label\r\n        doubleClick: function (e, node) {\r\n            // interactions.selectText(e, node)\r\n            console.log(node.data)\r\n            if(node.diagram.__trtd.nodeDoubleClickListener){\r\n                node.diagram.__trtd.nodeDoubleClickListener(node)\r\n            }\r\n            \r\n        },\r\n        click: function(e, node) {\r\n            console.log(node.data)\r\n            if(node.diagram.__trtd.nodeClickListener){\r\n                node.diagram.__trtd.nodeClickListener(node)\r\n            }\r\n            // showNodeToolBar(e,node);\r\n        },\r\n        selectable: true,\r\n        movable: true,\r\n        angle: 0,\r\n        //toMaxLinks: 1,\r\n        layoutConditions: go.Part.LayoutStandard,\r\n        //layoutConditions:~go.Part.LayoutAdded,\r\n        // fromLinkable: true, toLinkable: true,\r\n        alignment: go.Spot.Center,\r\n        alignmentFocus: go.Spot.Center,\r\n        resizeAdornmentTemplate: that.nodeResizeAdornmentTemplate(),\r\n        //rotateAdornmentTemplate: nodeRotateAdornmentTemplate,\r\n        contextMenu: diagram.__trtd.nodeContextMenu,\r\n        selectionAdornmentTemplate: that.getNodeSelectionAdornmentTemplate(),\r\n        contextMenu: $(go.Adornment),\r\n      },\r\n        new go.Binding(\"location\", \"loc\", go.Point.parse).makeTwoWay(go.Point.stringify),\r\n        new go.Binding(\"isShadowed\", \"isShadowed\").makeTwoWay(),\r\n        new go.Binding(\"selectable\", \"selectable\").makeTwoWay(),\r\n        new go.Binding(\"movable\", \"movable\").makeTwoWay(),\r\n        new go.Binding(\"resizable\", \"resizable\").makeTwoWay(),\r\n        new go.Binding(\"deletable\", \"deletable\").makeTwoWay(),\r\n        new go.Binding(\"visible\", \"visible\"),\r\n        new go.Binding(\"zOrder\", \"zOrder\"),\r\n        new go.Binding(\"layerName\", \"layerName\", function(v, d) {\r\n            return v ? v : \"\";\r\n        }).makeTwoWay(function(v) {\r\n            return v;\r\n        }),\r\n        $(go.Shape, {\r\n            strokeDashArray: null,\r\n            // strokeDashOffset:10,\r\n            // padding: -1,\r\n            margin: 0,\r\n            name: \"SHAPE\",\r\n            figure: \"Rectangle\",\r\n            fill: \"rgba(0,0,0,0)\",\r\n            // fromLinkable: true,\r\n            // toLinkable: true,\r\n            // cursor: \"pointer\",\r\n            minSize: new go.Size(50, 50),\r\n            strokeWidth: 3,\r\n            stroke: \"RGBA(255,0,0,0.2)\",\r\n            portId: \"\"\r\n\r\n        },\r\n        new go.Binding(\"fill\", \"fill\").makeTwoWay(),\r\n        new go.Binding(\"strokeWidth\", \"strokeWidth\").makeTwoWay(),\r\n        new go.Binding(\"figure\", \"figure\").makeTwoWay(),\r\n        new go.Binding(\"stroke\", \"stroke\").makeTwoWay(),\r\n        new go.Binding(\"desiredSize\", \"desiredSize\", function(v) {\r\n            var size = new go.Size.parse(v)\r\n            return size;\r\n        }).makeTwoWay(function(v) {\r\n            return go.Size.stringify(v)\r\n        }),\r\n        new go.Binding(\"strokeDashArray\", \"strokeDashArray\", function(v) {\r\n            return JSON.parse(v)\r\n        }).makeTwoWay(function(v) {\r\n            return JSON.stringify(v)\r\n        }),\r\n        ),\r\n      )\r\n    }\r\n}\r\n\r\nmodule.exports = shapeNodeTemplate\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/nodeTemplate/shapeNodeTemplate.js","var $ = go.GraphObject.make;\r\nvar Base = require('./base')\r\nvar helpers = require('../helpers/helpers.gojs')\r\n  \r\nclass AutoTextTemplate extends Base {\r\n    constructor(options){\r\n        super(options)\r\n        // this.nodeProperties = {}\r\n        \r\n    }\r\n\r\n    clearBorder(node){\r\n        if(node.data.showBorder){\r\n            // if(node.data.text == \"\"){\r\n                node.findObject(\"textBorder\").visible = false;\r\n            // }\r\n        }\r\n    }\r\n\r\n    makeGeo(data, shape, options) {\r\n      // this is much more efficient than calling go.GraphObject.make:\r\n      var {radiusX=150,radiusY=100} = data\r\n      var geo =  new go.Geometry()\r\n        .add(new go.PathFigure(0, 0)  // start point\r\n          .add(new go.PathSegment(go.PathSegment.SvgArc,\r\n          radiusX*2,0,radiusX, radiusY,0,1,options.clockwiseFlag?1:0\r\n              )\r\n            )\r\n          )\r\n          geo.defaultStretch = go.GraphObject.Fill;\r\n          return geo;\r\n    }\r\n    getNodeTemplate(){\r\n       var properties = {\r\n          figure: \"Rectangle\",\r\n          fill: \"rgba(0,0,0,0)\",\r\n          strokeWidth: 1,\r\n          stroke: \"rgba(0,0,0,0)\",\r\n          fontSize: 15,\r\n          font: \"sans-serif\"\r\n      };\r\n      var that = this\r\n      var diagram = this.diagram\r\n      return $(go.Node, \"Spot\", {\r\n              \"_controlExpand\": true,\r\n              __trtdNode: that,\r\n              layerName: \"Foreground\",\r\n              zOrder: 15,\r\n              movable: true,\r\n              isShadowed :true,\r\n     \r\n            //   shadowBlur : null,\r\n              shadowColor :\"#57617a\",\r\n              shadowOffset:new go.Point(0,0),\r\n            //   copyable: false,\r\n              visible: true,\r\n              locationSpot: go.Spot.Center,\r\n              resizeCellSize: new go.Size(10, 10),\r\n            //   locationObjectName: \"textBorder\",\r\n              selectionObjectName: \"SHAPE\",\r\n              resizable: true,\r\n            //   selectable: false,\r\n            //   clickable: false,\r\n              resizeObjectName: \"SHAPE\", // user can resize the Shape\r\n              rotatable: false,\r\n              location: new go.Point(0, 0),\r\n              //rotateObjectName: \"SHAPE\",  // rotate the Shape without rotating the label\r\n              // doubleClick: selectText,\r\n              toMaxLinks: 1,\r\n              mouseDrop: function(e, obj) {\r\n                var node = obj.part;\r\n                var selnode = e.diagram.selection.first();\r\n\r\n                   // 常变\r\n                   if(selnode.data.category == \"picGroup\" && selnode.data.role == \"cbian\" && node.data.role == \"centerText\"){\r\n                       var oliveNode = e.diagram.findNodeForKey(node.data.olive)\r\n                       if(!oliveNode) return;\r\n                    var it = selnode.findSubGraphParts().iterator;\r\n                    var deleteObjs = []\r\n                    var cbian = {}\r\n                    while (it.next()) {\r\n                        var n = it.value;\r\n                        if(n.data.category == \"autoText\"){\r\n                        if(n.data.locationSpot == \"0 0 0 0\"){\r\n                            cbian.shiText = n.data.text;\r\n                        }\r\n                        if(n.data.locationSpot == \"0 0.5 0 0\"){\r\n                            cbian.centerText = n.data.text;\r\n                        }\r\n                        if(n.data.locationSpot == \"0 1 0 0\"){\r\n                            cbian.xuText = n.data.text;\r\n                        }\r\n                        }\r\n                        deleteObjs.push(n.data)\r\n                    }\r\n                    e.diagram.startTransaction(\"mouseDrop\")\r\n                    // 删除总结图\r\n                    e.diagram.model.removeNodeDataCollection(deleteObjs)\r\n                    var backupSelnode = JSON.parse(JSON.stringify(selnode.data))\r\n                    e.diagram.model.removeNodeData(selnode.data)\r\n        \r\n                    // 添加新橄榄\r\n                    e.diagram.__trtd.addOlive(oliveNode, cbian)\r\n                    e.diagram.commitTransaction(\"mouseDrop\")\r\n                    return;\r\n                }\r\n\r\n            \r\n\r\n                // 互换要点文字,只有云盘里的文字可以互换\r\n                if(selnode.data.subRole == \"coreText\" && node.data.subRole == \"coreText\" || \r\n                    selnode.data.subRole == \"yunpanText\" && node.data.subRole == \"yunpanText\"){\r\n                    e.diagram.model.startTransaction(\"coreTextExchange\")\r\n                    var selOrderX = selnode.data.orderX\r\n                    var selOrderY = selnode.data.orderY\r\n                    var selDimKey = selnode.data.dimKey\r\n                    e.diagram.model.setDataProperty(selnode.data, \"orderX\", node.data.orderX)\r\n                    e.diagram.model.setDataProperty(selnode.data, \"orderY\", node.data.orderY)\r\n                    e.diagram.model.setDataProperty(selnode.data, \"dimKey\", node.data.dimKey)\r\n                    e.diagram.model.setDataProperty(node.data, \"orderX\", selOrderX)\r\n                    e.diagram.model.setDataProperty(node.data, \"orderY\", selOrderY)\r\n                    e.diagram.model.setDataProperty(node.data, \"dimKey\", selDimKey)\r\n                    e.diagram.model.commitTransaction(\"coreTextExchange\")\r\n                }\r\n\r\n                // 云盘互换维度\r\n                if(selnode.data.subRole == \"dimText\" && node.data.subRole == \"dimText\" && \r\n                    selnode.data.category == node.data.category){\r\n                        if(selnode.data.group!= node.data.group) return;\r\n                        if(!selnode.containingGroup) return;\r\n                        if(selnode.containingGroup.data.category != \"yunpanGroup\") return;\r\n                        if(!(selnode.data.dimX == node.data.dimX  || selnode.data.dimY == node.data.dimY )){\r\n                            return;\r\n                        }\r\n\r\n                        e.diagram.model.startTransaction(\"dimTextExchange\")\r\n                        var selOrderX = selnode.data.dimX\r\n                        var selOrderY = selnode.data.dimY\r\n                        var it = node.containingGroup.findSubGraphParts().iterator;\r\n                        var nodeCoreTexts = []\r\n                        var selnodeCoreTexts = []\r\n                        var yunnodeCoreTexts = []\r\n                        var yunselnodeCoreTexts = []\r\n                        var normDim = \"X\"\r\n                        if(selnode.data.dimX == 0){\r\n                            normDim  = \"Y\"\r\n                        }\r\n                        var selOrder = selnode.data[\"dim\"+normDim]\r\n                        var nodeOrder = node.data[\"dim\"+normDim]\r\n                        while (it.next()) {\r\n                            var n = it.value;\r\n                            if(n.data.subRole == \"yunpanText\"){\r\n                                if(n.data[\"order\"+normDim] == nodeOrder){\r\n                                    yunnodeCoreTexts.push(n)\r\n                                }\r\n                                if(n.data[\"order\"+normDim] == selOrder){\r\n                                    yunselnodeCoreTexts.push(n)\r\n                                }\r\n                            }\r\n                        }\r\n                        var tmpX,tmpY;\r\n                        for(var i=0;i<yunnodeCoreTexts.length;i++){\r\n                            e.diagram.model.setDataProperty(yunnodeCoreTexts[i].data, \"order\"+normDim, selOrder)\r\n                        }\r\n                        for(var i=0;i<yunselnodeCoreTexts.length;i++){\r\n                            e.diagram.model.setDataProperty(yunselnodeCoreTexts[i].data, \"order\"+normDim, nodeOrder)\r\n                        }\r\n                        e.diagram.model.setDataProperty(selnode.data, \"dim\"+normDim, nodeOrder)\r\n                        e.diagram.model.setDataProperty(node.data, \"dim\"+normDim, selOrder)\r\n                        e.diagram.model.commitTransaction(\"dimTextExchange\")\r\n                    return;\r\n                    }\r\n\r\n                // 互换维度\r\n                if(selnode.data.subRole == \"dimText\" && node.data.subRole == \"dimText\"){\r\n                    e.diagram.model.startTransaction(\"dimTextExchange\")\r\n                    var selOrderX = selnode.data.dimX\r\n                    var selOrderY = selnode.data.dimY\r\n                    var it = node.containingGroup.findSubGraphParts().iterator;\r\n                    var nodeCoreTexts = []\r\n                    var selnodeCoreTexts = []\r\n                    var yunnodeCoreTexts = []\r\n                    var yunselnodeCoreTexts = []\r\n                    var normDim = \"X\"\r\n                    if(selnode.data.dimX == 0){\r\n                        normDim  = \"Y\"\r\n                    }\r\n                    while (it.next()) {\r\n                        var n = it.value;\r\n                        if(n.data.dimKey == node.data.key){\r\n                            nodeCoreTexts.push(n)\r\n                        }\r\n                        if(n.data.dimKey == selnode.data.key){\r\n                            selnodeCoreTexts.push(n)\r\n                        }\r\n                        if(n.data.subRole == \"yunpanText\"){\r\n                            if(n.data[\"order\"+normDim] == node.data[\"order\"+normDim]){\r\n                                yunnodeCoreTexts.push(n)\r\n                            }\r\n                            if(n.data[\"order\"+normDim] == selnode.data[\"order\"+normDim]){\r\n                                yunselnodeCoreTexts.push(n)\r\n                            }\r\n                        }\r\n                    }\r\n                    console.log(\"selnodeCoreTextsselnodeCoreTextsselnodeCoreTexts\",selnodeCoreTexts.length)\r\n                    var centerOrderX = (node.containingGroup.__yunPointsX.length+1)/2\r\n                    var centerOrderY = (node.containingGroup.__yunPointsY.length+1)/2\r\n\r\n                    if(selnode.data.dimX > centerOrderX){\r\n                        selnodeCoreTexts.sort(function(a,b){\r\n                            return a.data.orderX - b.data.orderX\r\n                        })\r\n                    }\r\n                    if(selnode.data.dimX == centerOrderX){\r\n                        if(selnode.data.dimY > centerOrderY){\r\n                            selnodeCoreTexts.sort(function(a,b){\r\n                                return a.data.orderY - b.data.orderY\r\n                            })\r\n                        }else{\r\n                            selnodeCoreTexts.sort(function(a,b){\r\n                                return b.data.orderY -a.data.orderY\r\n                            })\r\n                        }\r\n                    }\r\n                    if(selnode.data.dimX < centerOrderX){\r\n                        selnodeCoreTexts.sort(function(a,b){\r\n                            return  b.data.orderX - a.data.orderX\r\n                        })\r\n                    }\r\n\r\n                    if(node.data.dimX > centerOrderX){\r\n                        nodeCoreTexts.sort(function(a,b){\r\n                            return a.data.orderX - b.data.orderX\r\n                        })\r\n                    }\r\n                    if(node.data.dimX == centerOrderX){\r\n                        if(node.data.dimY > centerOrderY){\r\n                            nodeCoreTexts.sort(function(a,b){\r\n                                return a.data.orderY - b.data.orderY\r\n                            })\r\n                        }else{\r\n                            nodeCoreTexts.sort(function(a,b){\r\n                                return b.data.orderY -a.data.orderY\r\n                            })\r\n                        }\r\n                    }\r\n                    if(node.data.dimX < centerOrderX){\r\n                        nodeCoreTexts.sort(function(a,b){\r\n                            return  b.data.orderX - a.data.orderX\r\n                        })\r\n                    }\r\n\r\n                    var tmpX,tmpY;\r\n                    for(var i=0;i<selnodeCoreTexts.length;i++){\r\n                        tmpX = selnodeCoreTexts[i].data.orderX;\r\n                        tmpY = selnodeCoreTexts[i].data.orderY;\r\n                        e.diagram.model.setDataProperty(selnodeCoreTexts[i].data, \"orderX\", nodeCoreTexts[i].data.orderX)\r\n                        e.diagram.model.setDataProperty(selnodeCoreTexts[i].data, \"orderY\", nodeCoreTexts[i].data.orderY)\r\n                        e.diagram.model.setDataProperty(nodeCoreTexts[i].data, \"orderX\", tmpX)\r\n                        e.diagram.model.setDataProperty(nodeCoreTexts[i].data, \"orderY\", tmpY)\r\n                    }\r\n                    e.diagram.model.setDataProperty(selnode.data, \"dimX\", node.data.dimX)\r\n                    e.diagram.model.setDataProperty(selnode.data, \"dimY\", node.data.dimY)\r\n                    e.diagram.model.setDataProperty(node.data, \"dimX\", selOrderX)\r\n                    e.diagram.model.setDataProperty(node.data, \"dimY\", selOrderY)\r\n                    e.diagram.model.commitTransaction(\"dimTextExchange\")\r\n                }\r\n\r\n\r\n                \r\n\r\n                if (selnode.data.category != \"wave\") {\r\n                    return;\r\n                }\r\n                if(node.data.role != \"centerText\"){\r\n                    return;\r\n                }\r\n                if(!node){\r\n                  // node.containingGroup.layout.isValidLayout = false\r\n                  return;\r\n                }\r\n                if(selnode.data.group != obj.data.group){\r\n                  return;\r\n                }\r\n                e.diagram.startTransaction(\"mouseDrop\")\r\n                selnode.__oldOrder = selnode.data.order\r\n                e.diagram.model.setDataProperty(selnode.data, \"order\",node.data.order+0.5)\r\n                var xuText = e.diagram.model.findNodeDataForKey(selnode.data.xuText)\r\n                var shiText = e.diagram.model.findNodeDataForKey(selnode.data.shiText)\r\n                e.diagram.model.setDataProperty(shiText, \"order\",node.data.order+0.5)\r\n                e.diagram.model.setDataProperty(xuText, \"order\",node.data.order+0.5)\r\n                // node.containingGroup.layout.isValidLayout = false\r\n                e.diagram.commitTransaction(\"mouseDrop\")\r\n              },\r\n              mouseDragEnter: function(e, obj) {\r\n                var node = obj.part;\r\n                var selnode = e.diagram.selection.first();\r\n                if(!selnode) return;\r\n                if(selnode.data.subRole == \"coreText\" && node.data.subRole == \"coreText\" || \r\n                selnode.data.subRole == \"yunpanText\" && node.data.subRole == \"yunpanText\"){\r\n                    selnode.areaBackground = null\r\n                    node.areaBackground = \"RGB(107,208,137)\"\r\n                }\r\n                if(selnode.data.subRole == \"dimText\" && node.data.subRole == \"dimText\"){\r\n                    selnode.areaBackground = null\r\n                    node.areaBackground = \"RGB(107,208,137)\"\r\n                }\r\n\r\n                if(node.data.role == \"centerText\"){\r\n                    node.layerName = \"Background\"\r\n                }\r\n                // if (!(selnode instanceof go.Node)  || selnode.data.role != \"freeText\"  || selnode.category != \"autoText\" ||selnode.data.subRole != \"coreText\") {\r\n                //     return;\r\n                // }\r\n\r\n\r\n\r\n                // //var sat = node.selectionAdornmentTemplate;\r\n                // //var adorn = sat.copy();\r\n                // //adorn.adornedObject = node;\r\n                // //node.addAdornment(\"dragEnter\", adorn);\r\n    \r\n                // //if (!mayWorkFor(selnode, node)) return;\r\n                // var shape = node.findObject(\"SHAPE\");\r\n                // if (shape) {\r\n                //     shape._prevFill = shape.fill; // remember the original brush\r\n                //     shape.fill = \"darkred\";\r\n                // }\r\n    \r\n            },\r\n            mouseDragLeave: function(e, obj) {\r\n                var node = obj.part;\r\n                var selnode = e.diagram.selection.first();\r\n                // var shape = node.findObject(\"SHAPE\");\r\n                if(selnode.data.subRole == \"coreText\" && node.data.subRole == \"coreText\"|| \r\n                selnode.data.subRole == \"yunpanText\" && node.data.subRole == \"yunpanText\"){\r\n                    node.areaBackground = null\r\n                }\r\n                if(selnode.data.subRole == \"dimText\" && node.data.subRole == \"dimText\"){\r\n                    node.areaBackground = null\r\n                }\r\n                if(node.data.role == \"centerText\"){\r\n                    node.layerName = \"Foreground\"\r\n                }\r\n                //node.removeAdornment(\"dragEnter\");\r\n            },\r\n              selectionChanged: (node)=>{\r\n                console.log(\"selectionChanged\",node)\r\n\r\n                if(node.data.category != \"autoText\" || node.data.orderX ==null \r\n                || node.data.orderY ==null || node.data.role != \"freeText\" || node.data.subRole !=\"coreText\"|| node.data.subRole !=\"yunpanText\"){\r\n                    return;\r\n                }\r\n\r\n                if( !node.containingGroup || node.containingGroup.data.category != \"yunGroup\" || node.containingGroup.data.category != \"yunpanGroup\"){\r\n                    return;\r\n                }\r\n\r\n                if(node.containingGroup.data.beginSpark != \"line\"){\r\n                    return;\r\n                }\r\n                if(node.containingGroup.__yunPointsX && node.containingGroup.__yunPointsY){\r\n                    var centerOrderX = (node.containingGroup.__yunPointsX.length+1)/2\r\n                    var centerOrderY = (node.containingGroup.__yunPointsY.length+1)/2\r\n                    if(node.data.orderX == centerOrderX && node.data.orderY == centerOrderY){\r\n                        // 中心文字不参与变色\r\n                        return;\r\n                    }\r\n                    var orderX = node.data.orderX, orderY=node.data.orderY\r\n                    if(orderX == centerOrderX){\r\n                        orderX = orderY\r\n                    }\r\n                    if(orderY == centerOrderY){\r\n                        orderY = orderX\r\n                    }\r\n                    var shapeStrokes = node.containingGroup.data.shapeStrokes\r\n                    var showShape = node.containingGroup.data.showShape; // 是否显示矩形\r\n                    if(node.isSelected){\r\n                        if(node.containingGroup.data.snapType == \"between\"){\r\n                            var diff = Math.max(Math.abs(node.data.orderX - centerOrderX), Math.abs(node.data.orderY - centerOrderY))+1\r\n                        }else{\r\n                            var diff = Math.max(Math.abs(node.data.orderX - centerOrderX), Math.abs(node.data.orderY - centerOrderY))\r\n                        }\r\n                        console.log(\"diff:\",diff,node.data.orderX,node.data.orderY)\r\n                        var it = node.containingGroup.findSubGraphParts().iterator;\r\n\r\n                        console.log(\"showShape\",showShape)\r\n                        // var beginSpark = node.containingGroup.data.beginSpark; // 是否显示矩形\r\n                        var shape = null;\r\n                        while (it.next()) {\r\n                            var n = it.value;\r\n                            if(n.data.category == \"autoText\" && n.data.orderX !=null \r\n                            && n.data.orderY !=null && n.data.role == \"freeText\" ){\r\n                                n.findObject(\"textBorder\").visible = false;\r\n                                // if((Math.abs(n.data.orderX-centerOrderX) == Math.abs(orderX-centerOrderX) \r\n                                //     || Math.abs(n.data.orderX-centerOrderY) == Math.abs(orderY-centerOrderY)) \r\n                                // && !(Math.abs(n.data.orderX-centerOrderY) < Math.abs(orderY-centerOrderY) \r\n                                //     && Math.abs(n.data.orderX-centerOrderX) < Math.abs(orderX-centerOrderX))){\r\n                                //     n.areaBackground = \"red\"\r\n                                // }\r\n\r\n                                if(Math.abs(n.data.orderX-centerOrderX) == Math.abs(orderX-centerOrderX)\r\n                                && Math.abs(n.data.orderY-centerOrderY) <= Math.abs(orderY-centerOrderY)\r\n                                ||Math.abs(n.data.orderX-centerOrderX) <= Math.abs(orderX-centerOrderX)\r\n                                && Math.abs(n.data.orderY-centerOrderY) == Math.abs(orderY-centerOrderY)){\r\n                                    // n.findObject(\"place\").visible = true;\r\n                                    n.areaBackground = \"white\"\r\n                                    n.zOrder = 999\r\n                                }\r\n\r\n                            }\r\n                            if(n.data.category == \"shape\" && n.data.role == \"background\"){\r\n                                var obj = n.findObject(\"SHAPE\")\r\n                                // console.log(\"dfsdfsdfsdf\", obj)\r\n                                if(n.data.gridWidth == diff*2){\r\n                                    shape = obj;\r\n                                    // if(showShape){\r\n                                        // n.visible = true\r\n                                    // }\r\n                                    if(!obj.__prestroke){\r\n                                        obj.__prestroke = obj.stroke\r\n                                        obj.stroke = \"rgba(255,0,0,0.5)\"\r\n                                    }\r\n                                }else{\r\n                                    if(obj.__prestroke){\r\n                                        obj.stroke = obj.__prestroke\r\n                                        delete obj.__prestroke\r\n                                    }\r\n                                }\r\n                            }\r\n\r\n                        }\r\n                        if(!shape){\r\n                            if(node.containingGroup.data.snapType == \"between\"){\r\n                                var gridWidth = diff*2;\r\n                            }else{\r\n                                var gridWidth = diff*2\r\n                            }\r\n                            console.log(\"addShape\")\r\n                            node.diagram.model.startTransaction(\"addShape\");\r\n                            var shapeData = {\"deletable\":true, \r\n                            \"role\":\"background\", \r\n                            \"category\":\"shape\", \r\n                            // \"loc\":\"-1532.0268216255727 9.121091688849674\", \r\n                            \"loc\":go.Point.stringify(new go.Point(node.containingGroup.__yunPointsX[centerOrderX-1],node.containingGroup.__yunPointsY[centerOrderY-1])), \r\n                            \"movable\":true, \r\n                            \"group\":-19, \r\n                            \"key\": helpers.guid(), \r\n                            \"orderX\":10, \r\n                            \"orderY\":10, \r\n                            \"gridWidth\":gridWidth, \r\n                            \"stroke\":shapeStrokes[diff-1],\r\n                             \"visible\":true, \"strokeDashArray\":\"[0,0]\", \"strokeWidth\":3,\r\n                            //   \"desiredSize\":\"1263 1263\"\r\n                            };\r\n                             node.diagram.model.addNodeData(shapeData)\r\n                            node.diagram.model.commitTransaction(\"addShape\");\r\n                            setTimeout(()=>{\r\n                                var nod = node.diagram.findNodeForKey(shapeData.key)\r\n                                console.log(\"add shape add shape\")\r\n                                if(nod){\r\n                                    // nod.visible = true\r\n                                    var obj = nod.findObject(\"SHAPE\")\r\n                                    if(!obj.__prestroke){\r\n                                        obj.__prestroke = obj.stroke\r\n                                        obj.stroke = \"rgba(255,0,0,0.5)\"\r\n                                    }\r\n                                }\r\n                            },100)\r\n                        }\r\n                    }else{\r\n                        var it = node.containingGroup.findSubGraphParts().iterator;\r\n                        while (it.next()) {\r\n                            var n = it.value;\r\n                            if(n.data.category == \"autoText\" && n.data.orderX !=null \r\n                            && n.data.orderY !=null && n.data.role == \"freeText\" ){\r\n                                // n.findObject(\"textBorder\").visible = false;\r\n                                // if((n.data.orderX == orderX || n.data.orderY == orderY) \r\n                                // && !(n.data.orderX < orderX && n.data.orderY <orderY )){\r\n                                //     n.areaBackground = \"red\"\r\n                                // }\r\n\r\n                                if(Math.abs(n.data.orderX-centerOrderX) == Math.abs(orderX-centerOrderX)\r\n                                && Math.abs(n.data.orderY-centerOrderY) <= Math.abs(orderY-centerOrderY)\r\n                                ||Math.abs(n.data.orderX-centerOrderX) <= Math.abs(orderX-centerOrderX)\r\n                                && Math.abs(n.data.orderY-centerOrderY) == Math.abs(orderY-centerOrderY)){\r\n                                    // n.findObject(\"textBorder\").visible = true;\r\n                                    // n.findObject(\"place\").visible = false;\r\n                                    n.areaBackground = null\r\n                                    n.zOrder = NaN\r\n                                }\r\n\r\n                            }\r\n                            if(n.data.category == \"shape\" && n.data.role == \"background\"){\r\n                                var obj = n.findObject(\"SHAPE\")\r\n                                // console.log(\"dfsdfsdfsdf\", obj)\r\n                                if(!showShape){\r\n                                    // n.visible = false\r\n                                    obj.stroke = \"rgba(255,0,0,0)\"\r\n                                }\r\n                                if(n.data.gridWidth == diff*2){\r\n                                    if(!obj.__prestroke){\r\n                                        obj.__prestroke = obj.stroke\r\n                                        obj.stroke = \"rgba(255,0,0,0.7)\"\r\n\r\n                                    }\r\n                                }else{\r\n                                    \r\n                                    if(obj.__prestroke){\r\n                                        obj.stroke = obj.__prestroke\r\n                                        delete obj.__prestroke\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                }\r\n\r\n              },\r\n              click: (e, node)=>{\r\n                console.log(node.data)\r\n\r\n                // if(node.data.role == \"centerText\"){\r\n                //     var waveNode = node.diagram.findNodeForKey(node.data.olive)\r\n                //     node.layerName = \"Background\"\r\n                //     if(waveNode){\r\n                //         node.diagram.select(waveNode)\r\n                //     }\r\n                // }\r\n                // e.diagram.model.startTransaction(\"click\")\r\n                // e.diagram.model.setDataProperty(node.data, \"dimKey\", -124)\r\n                // e.diagram.model.setDataProperty(node.data,\"dimKey\", -73)\r\n                // e.diagram.model.setDataProperty(node.data,\"dimKey\", -141)\r\n                // e.diagram.model.setDataProperty(node.data,\"dimKey\", -74)\r\n\r\n\r\n\r\n\r\n                // e.diagram.model.setDataProperty(node.data, \"dimKey\", -124)\r\n                // e.diagram.model.setDataProperty(node.data,\"dimKey\", -141)\r\n                // e.diagram.model.setDataProperty(node.data,\"dimKey\", -158)\r\n                // e.diagram.model.setDataProperty(node.data,\"dimKey\", -176)\r\n                // e.diagram.model.setDataProperty(node.data,\"dimKey\", -73)\r\n                // e.diagram.model.setDataProperty(node.data,\"dimKey\", -74)\r\n                // e.diagram.model.setDataProperty(node.data,\"dimKey\", -175)\r\n                // e.diagram.model.setDataProperty(node.data,\"dimKey\", -177)\r\n                // node.data.dimKey = -124\r\n                // node.data.dimKey = -141\r\n                // node.data.dimKey = -158\r\n                // node.data.dimKey = -176\r\n                // node.data.dimKey = -73\r\n                // node.data.dimKey = -74\r\n                // node.data.dimKey = -175\r\n                // node.data.dimKey = -177\r\n                \r\n                // e.diagram.model.commitTransaction(\"click\")\r\n\r\n              },\r\n            //   rotateAdornmentTemplate:  // specify appearance of rotation handle\r\n            //   $(go.Adornment,\r\n            //     { locationSpot: go.Spot.Center },\r\n            //     $(go.Shape, \"BpmnActivityLoop\",\r\n            //       { width: 12, height: 12, cursor: \"pointer\",\r\n            //         background: \"transparent\", stroke: \"dodgerblue\", strokeWidth: 2 })\r\n            //     ),\r\n              mouseOver: function(e, node) {\r\n                // if(node.data.hyperlink){\r\n                //   var textObj = node.findObject('TEXT');\r\n                //   textObj.isUnderline = true;\r\n                // }\r\n                console.log(\"mouseOvermouseOvermouseOver\")\r\n                if(node.data.showBorder){\r\n                    if(node.data.text == \"\" && (node.data.role == \"xuText\" || node.data.role == \"shiText\" )){\r\n                        node.findObject(\"textBorder\").visible = true;\r\n                    }\r\n                }\r\n                if(node.data.role == \"centerText\"){\r\n                    node.layerName = \"Background\"\r\n                    // node.diagram.model.startTransaction(\"centerText\")\r\n                    // node.diagram.model.setDataProperty(node.data,\"layerName\", \"Background\")\r\n                    // node.diagram.model.commitTransaction(\"centerText\")\r\n                }\r\n                //   node.areaBackground = \"mediumslateblue\"\r\n                // }\r\n\r\n                // if(!node.containingGroup) return;\r\n                // var it = node.containingGroup.findSubGraphParts().iterator;\r\n                // while (it.next()) {\r\n                //     var n = it.value;\r\n                //     if(n.data.category == \"autoText\"){\r\n                //         if(n.data.order == node.data.order){\r\n                //             // locateNode = n;\r\n                //             n.areaBackground = \"mediumslateblue\"\r\n                //         }\r\n                //     }\r\n                // }\r\n                // diagram.__trtd.showNodeRemarkTips(e, node);\r\n                },\r\n            mouseLeave: function(e, node) {\r\n            //   if(node.data.text == \"\"){\r\n                if(node.data.showBorder){\r\n                    // if(node.data.text == \"\"){\r\n                        node.findObject(\"textBorder\").visible = false;\r\n                    // }\r\n                }\r\n                if(node.data.role == \"centerText\"){\r\n                    node.layerName = \"Foreground\"\r\n                    // node.diagram.model.startTransaction(\"centerText\")\r\n                    // node.diagram.model.setDataProperty(node.data,\"layerName\", \"Foreground\")\r\n                    // node.diagram.model.commitTransaction(\"centerText\")\r\n                }\r\n                // node.areaBackground = null\r\n            //   }\r\n            },\r\n            //   layoutConditions: go.Part.LayoutStandard,\r\n              layoutConditions: go.Part.LayoutStandard & go.Part.LayoutRemoved & go.Part.LayoutAdded & ~go.Part.LayoutNodeSized,\r\n              //layoutConditions:~go.Part.LayoutAdded,\r\n              // fromLinkable: true, toLinkable: true,\r\n              alignment: go.Spot.Center,\r\n              alignmentFocus: go.Spot.Center,\r\n              contextMenu: diagram.__trtd.getNodeContextMenu(),\r\n              resizeAdornmentTemplate:  // specify what resize handles there are and how they look\r\n              $(go.Adornment, \"Spot\",\r\n                $(go.Placeholder),  // takes size and position of adorned object\r\n            //     $(go.Shape, \"Circle\",  // left resize handle\r\n            //       { alignment: go.Spot.Left, cursor: \"col-resize\",\r\n            //         desiredSize: new go.Size(9, 9), fill: \"lightblue\", stroke: \"dodgerblue\" }),\r\n            //     $(go.Shape, \"Circle\",  // right resize handle\r\n            //       { alignment: go.Spot.Right, cursor: \"col-resize\",\r\n            //         desiredSize: new go.Size(9, 9), fill: \"lightblue\", stroke: \"dodgerblue\" }),\r\n            //   $(go.Shape, \"Circle\",  // right resize handle\r\n            //   { alignment: go.Spot.Top, cursor: \"col-resize\",\r\n            //   desiredSize: new go.Size(9, 9), fill: \"lightblue\", stroke: \"dodgerblue\" }),\r\n              $(go.Shape, \"Circle\",  // right resize handle\r\n              { alignment: go.Spot.BottomRight, cursor: \"col-resize\",\r\n              desiredSize: new go.Size(15, 15), fill: \"lightblue\", stroke: \"dodgerblue\" }),\r\n                // $(go.TextBlock, // show the width as text\r\n                //   { alignment: go.Spot.Top, alignmentFocus: new go.Spot(0.5, 1, 0, -2),\r\n                //     stroke: \"dodgerblue\" },\r\n                //   new go.Binding(\"text\", \"adornedObject\",\r\n                //                  function(shp) { return shp.naturalBounds.width.toFixed(0); })\r\n                //       .ofObject())\r\n              ),\r\n              doubleClick: function (e, node){\r\n                  e.diagram.__trtd.selectText(e, node)\r\n              }\r\n\r\n              // selectionAdornmentTemplate: nodeSelectionAdornmentTemplate,\r\n          },\r\n          new go.Binding(\"locationSpot\", \"locationSpot\", function(v){\r\n              return go.Spot.parse(v)\r\n          }).makeTwoWay(function(v){\r\n              return go.Spot.stringify(v)\r\n          }),\r\n          new go.Binding(\"type\", \"type\", function(v){\r\n              return go.Panel[v]\r\n          }),\r\n          new go.Binding(\"visible\", \"visible\").makeTwoWay(),\r\n          new go.Binding(\"deletable\", \"deletable\").makeTwoWay(),\r\n          new go.Binding(\"movable\", \"movable\").makeTwoWay(),\r\n          new go.Binding(\"rotatable\", \"rotatable\").makeTwoWay(),\r\n          new go.Binding(\"location\", \"loc\", go.Point.parse).makeTwoWay(go.Point.stringify),\r\n          new go.Binding(\"isShadowed\", \"isShadowed\").makeTwoWay(),\r\n          new go.Binding(\"angle\", \"angle\").makeTwoWay(),\r\n          new go.Binding(\"selectable\", \"selectable\").makeTwoWay(),\r\n          new go.Binding(\"copyable\", \"copyable\").makeTwoWay(),\r\n          new go.Binding(\"layerName\", \"layerName\", function(v, d) {\r\n              return v ? v : \"\";\r\n          }),\r\n          $(go.Shape, {\r\n            strokeDashArray: null,\r\n            opacity:0.7,\r\n            stretch: go.GraphObject.UniformToFill,\r\n            // locationSpot: go.Spot.Center,  // the location is the center of the Shape\r\n            // strokeDashOffset:10,\r\n            name: \"SHAPE\",\r\n            figure: \"Circle\",\r\n            fill: \"rgba(0,255,0,1)\",\r\n            fromLinkable: false,\r\n            toLinkable: false,\r\n            width:100,\r\n            height:100,\r\n            cursor: \"pointer\",\r\n            minSize: new go.Size(50, 50),\r\n            // maxSize: new go.Size(100, 100),\r\n            strokeWidth: 1,\r\n            stroke: \"black\",\r\n            portId: \"\"\r\n\r\n        },\r\n        new go.Binding(\"strokeDashArray\", \"shiStrokeDashArray\", function(v) {\r\n            return JSON.parse(v)\r\n        }).makeTwoWay(function(v) {\r\n            return JSON.stringify(v)\r\n        }),\r\n        new go.Binding(\"fill\", \"fill\", function(v, obj) {\r\n            return v instanceof go.Brush ? v.color : v;\r\n        }).makeTwoWay(),\r\n        // new go.Binding(\"fill\", \"isSelected\", function(s, obj) { return s ? \"red\" : obj.part.data.color; }).ofObject()),\r\n        new go.Binding(\"desiredSize\", \"desiredSize\", function(v, d) {\r\n            // console.log(\"vd m\", v, d )\r\n            // if(!v) return d.part.findObject(\"SHAPE\").measuredBounds.size;\r\n            return go.Size.parse(v)\r\n        }).makeTwoWay(function(v) {\r\n            console.log(\"sizesizesizesize\")\r\n            // var size = new go.Size(v.width, v.height)\r\n            return go.Size.stringify(v)\r\n        }),\r\n        new go.Binding(\"stroke\", \"stroke\", function(v) {\r\n            return v instanceof go.Brush ? v.stroke : v;\r\n        }).makeTwoWay(),\r\n\r\n        new go.Binding(\"strokeWidth\", \"strokeWidth\", function(d) {\r\n            return d;\r\n        }).makeTwoWay(function(d) {\r\n            return d;\r\n        }),\r\n        new go.Binding(\"figure\", \"figure\").makeTwoWay(), \r\n        new go.Binding(\"opacity\", \"opacity\").makeTwoWay(), \r\n        // {\r\n        //     figure: properties.figure,\r\n        //     fill: properties.fill,\r\n        //     strokeWidth: properties.strokeWidth,\r\n        //     stroke: properties.stroke\r\n        // }\r\n    ),\r\n    // $(go.Shape, {\r\n    //         name: \"SHAPE_Back\",\r\n    //         figure: \"Rectangle\",\r\n    //         fill: \"rgba(128,128,128,0)\",\r\n    //         fromLinkable: true,\r\n    //         toLinkable: true,\r\n    //         strokeWidth: 0\r\n    //     },\r\n    //     new go.Binding(\"desiredSize\", \"width\", function(v) {\r\n    //         var va = (v / 2) * Math.sqrt(2);\r\n    //         return new go.Size(va - 3, va - 3);\r\n    //     }).ofObject(\"SHAPE\")\r\n    // ),\r\n          $(go.TextBlock, {\r\n                  name: \"TEXT\",\r\n                  alignment: new go.Spot(0.5, 0.5),\r\n                  font: \"18px 'Microsoft YaHei'\",\r\n                  editable: false,\r\n                //   areaBackground:\"gray\",\r\n                  //margin: 3, editable: true,\r\n                //   background:\"yellow\",\r\n                  stroke: \"black\",\r\n                  isMultiline: true,\r\n                  overflow: go.TextBlock.OverflowClip,\r\n                  wrap: go.TextBlock.WrapDesiredSize,\r\n                  textAlign: \"center\",\r\n                  verticalAlignment: go.Spot.Center,\r\n                  spacingAbove: 4,\r\n                  spacingBelow: 4,\r\n                  portId: \"TEXT\",\r\n                  margin:0,\r\n                  maxSize:new go.Size(600,NaN),\r\n                  minSize: new go.Size(10,10),\r\n                  stretch: go.GraphObject.UniformToFill,\r\n                  textEdited: function(textBlock,oldv,newv){\r\n\r\n                    // // if(textBlock.part.containingGroup.data.textAngle == \"horizontal\"){\r\n                    //   var centerText = textBlock.part.diagram.model.findNodeDataForKey(textBlock.part.data.centerText)\r\n                    //   if(centerText){\r\n                    //     console.log(\"centerTextcenterTextcenterTextcenterText\")\r\n                    var part = textBlock.part\r\n                    if(newv.trim() == \"\" &&(part.data.role == \"shiText\" || part.data.role == \"xuText\")){\r\n                        textBlock.part.diagram.model.startTransaction(\"text\")\r\n                        textBlock.part.diagram.model.setDataProperty(textBlock.part.data,\"nloc\", null)\r\n                        textBlock.part.diagram.model.commitTransaction(\"text\")\r\n                    }\r\n                    //   }\r\n                    // //   return;\r\n                    // // }\r\n                    // setTimeout(function(){\r\n                    //   console.log(\"textEditedtextEditedtextEdited\",textBlock.lineCount)\r\n                    //   if(!textBlock.text) return;\r\n                    //   if(textBlock.text && textBlock.text.trim() == \"\") return;\r\n                    //   if(textBlock.lineCount %2 != 0){\r\n                    //     if(newv[newv.length-1] == \"\\n\"){\r\n                    //       textBlock.text = newv.substring(0, newv.length-1)\r\n                    //       return;\r\n                    //     }\r\n                    //     textBlock.text = newv+\"\\n\"\r\n                    //   }\r\n                    // },100)\r\n                    \r\n                    // var enterCount = 0;\r\n                    if(textBlock.part.data.role && textBlock.part.data.role.indexOf(\"labelText\") > -1 ){\r\n                        textBlock.part.containingGroup.layout.isValidLayout = false\r\n                    }\r\n                    // for(var i=0;i<newv.length;i++){\r\n                      \r\n                    // }\r\n                    // textBlock.part.updateTargetBindings()\r\n    \r\n                    // if(textBlock.lineCount %2 != 0){\r\n                    //   if(newv[newv.length-1] == \"\\n\"){\r\n                    //     textBlock.text = newv.substring(0, newv.length-1)\r\n                    //     return;\r\n                    //   }\r\n                    //   textBlock.text = newv+\"\\n\"\r\n                    // }\r\n                  },\r\n              },\r\n              new go.Binding(\"background\", \"background\", function(v) {\r\n                  return v;\r\n              }).makeTwoWay(),\r\n              new go.Binding(\"areaBackground\", \"areaBackground\", function(v) {\r\n                  return v;\r\n              }).makeTwoWay(),\r\n              new go.Binding(\"textAlign\", \"textAlign\", function(v) {\r\n                  return v;\r\n              }).makeTwoWay(),\r\n              new go.Binding(\"spacingAbove\", \"spacingline\", function(v) {\r\n                  return helpers.tdTransToNum(v, 4);\r\n              }).makeTwoWay(),\r\n              new go.Binding(\"spacingBelow\", \"spacingline\", function(v) {\r\n                  return helpers.tdTransToNum(v, 4);\r\n              }).makeTwoWay(),\r\n              new go.Binding(\"maxSize\",\"\",function(data,d,m){\r\n                  // console.log(\"maxSize\",v,m,d)\r\n                  var width = NaN\r\n                  var height = NaN\r\n                  if(data.width){\r\n                      width = data.width\r\n                  }\r\n                  if(data.height){\r\n                      height = data.height\r\n                  }\r\n\r\n                  return new go.Size(width,height)\r\n              }),\r\n              new go.Binding(\"minSize\",\"minSize\",function(v){\r\n                  // console.log(\"maxSize\",v,m,d)\r\n\r\n                  return go.Size.parse(v)\r\n              }),\r\n              // new go.Binding(\"width\", \"width\", function(v) {\r\n              //     return v;\r\n              // }).makeTwoWay(),\r\n              // new go.Binding(\"height\", \"height\", function(v) {\r\n              //     return v;\r\n              // }).makeTwoWay(),\r\n              // new go.Binding(\"height\", \"height\", function (v) {\r\n              //   return v;\r\n              // }).ofObject(\"SHAPE\"),\r\n              new go.Binding(\"text\", \"text\").makeTwoWay(),\r\n              new go.Binding(\"stroke\", \"textStroke\").makeTwoWay(),\r\n              new go.Binding(\"font\", \"font\").makeTwoWay()\r\n          ),\r\n        //   $(go.Panel,\"Vertical\",\r\n        //     {alignment: go.Spot.Left,\r\n        //     alignmentFocus: go.Spot.Right,\r\n        //     },\r\n        //     $(go.Shape,{\r\n        //         name:\"ICON\",\r\n        //         width:16,\r\n        //         height:16,\r\n        //         visible: false,\r\n        //         click: function(e){\r\n        //             console.log(\"icon click\")\r\n        //         },\r\n        //         figure:\"Circle\",\r\n        //         fill:\"red\",\r\n        //         strokeWidth:0,\r\n        //         margin: 3\r\n        //     },\r\n    \r\n        //     // new go.Binding(\"location\", \"loc\", go.Point.parse).makeTwoWay(go.Point.stringify),\r\n        //     new go.Binding(\"figure\", \"figure\").makeTwoWay(),\r\n        //     new go.Binding(\"visible\", \"iconVisible\").makeTwoWay(),\r\n        //     new go.Binding(\"fill\", \"fill\", function(v, obj) {\r\n        //         return v\r\n        //     }).makeTwoWay()\r\n        //     )\r\n        // ),\r\n    //     $(go.Shape,\"Rectangle\",{\r\n    //         name: \"textBorder\",\r\n    //         stroke: \"green\",\r\n    //         strokeWidth: 3,\r\n    //         strokeDashArray: [10, 5],\r\n    //         visible:false,\r\n    //         fill:\"transparent\",\r\n    //         alignment: go.Spot.Center,\r\n    //         // alignmentFocus: go.Spot.Right,\r\n    //         width:100,\r\n    //         height:270, \r\n    //     },\r\n    //     new go.Binding(\"stroke\",\"textStroke\"),\r\n    //     new go.Binding(\"desiredSize\",\"\", function(v,d){\r\n    //         // console.log(\"vvvvvvvvvvvvv,\",v,d)\r\n    //         if(!helpers.checkPhone()){\r\n    //             // return new go.Size(Math.max(d.part.naturalBounds.width,100)-3, Math.max(d.part.naturalBounds.height,100)-3);\r\n    //             return new go.Size(d.part.naturalBounds.width-3, d.part.naturalBounds.height-3);\r\n    //         }\r\n    //         var olive = d.part.diagram.findNodeForKey(d.part.data.olive)\r\n    //         return new go.Size(olive.naturalBounds.width-3, olive.naturalBounds.height);\r\n    //         // return new go.Size(d.part.actualBounds.width-3, d.part.actualBounds.height-3);\r\n    //     })\r\n    // ),\r\n        // $(go.Shape,\"Circle\",{\r\n        //     name: \"place\",\r\n        //     stroke: \"red\",\r\n        //     strokeWidth: 1,\r\n        //     strokeDashArray: null,\r\n        //     visible:false,\r\n        //     fill:\"transparent\",\r\n        //     alignment: go.Spot.Center,\r\n        //     // alignmentFocus: go.Spot.Right,\r\n        //     width:50,\r\n        //     height:50, \r\n        // },\r\n        // new go.Binding(\"stroke\",\"placeStroke\"),\r\n        // )\r\n      )\r\n    }\r\n}\r\n\r\nmodule.exports = AutoTextTemplate\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/nodeTemplate/shapeTextNodeTemplate.js","/**\r\n * 天盘连接线的布局\r\n */\r\n'use strict';\r\n\r\n// import * as go from 'gojs';\r\n\r\n// let menus = require('../templates/menu');\r\nvar $ = go.GraphObject.make;\r\n\r\nfunction SmoothLink() {\r\n    go.Link.call(this);\r\n}\r\n\r\nfunction computeOffset(newR, newStartAngle) {\r\n    //console.log(\"newStartAngle:\"+newStartAngle);\r\n    var ctl2, dy, dx; //需要调整\r\n    if (newStartAngle >= 0 && newStartAngle <= 90) {\r\n        dy = newR * Math.sin(newStartAngle * Math.PI / 180);\r\n        dx = newR * Math.cos(newStartAngle * Math.PI / 180);\r\n        return [dx, dy];\r\n    } else if (newStartAngle > 90 && newStartAngle <= 180) {\r\n        dy = newR * Math.sin((180 - newStartAngle) * Math.PI / 180);\r\n        dx = newR * Math.cos((180 - newStartAngle) * Math.PI / 180);\r\n        return [-dx, dy];\r\n    } else if (newStartAngle > 180 && newStartAngle <= 270) {\r\n        dy = newR * Math.sin((newStartAngle - 180) * Math.PI / 180);\r\n        dx = newR * Math.cos((newStartAngle - 180) * Math.PI / 180);\r\n        return [-dx, -dy];\r\n    } else if (newStartAngle > 270 && newStartAngle <= 360) {\r\n        dy = newR * Math.sin((360 - newStartAngle) * Math.PI / 180);\r\n        dx = newR * Math.cos((360 - newStartAngle) * Math.PI / 180);\r\n        return [dx, -dy];\r\n    }\r\n}\r\n\r\n// var tdCurrentTheme = menus.tdCurrentTheme;\r\n// 根据根节点与两个节点的位置计算出圆心在AB中垂线与 过根节点且平行于AB的射线的交点 D\r\nfunction computeNewCenter(O, A, B) {\r\n    var C = new go.Point((A.x + B.x) / 2, (A.y + B.y) / 2); //AB的中点\r\n    if (O.equals(A)) {\r\n        var locD = C.copy();\r\n        var r = Math.sqrt(C.distanceSquaredPoint(A));\r\n        var direction = (A.directionPoint(B) + 90) % 360;\r\n        var distance = r * 0.15;\r\n        var offset = computeOffset(distance, direction);\r\n        locD.offset(offset[0], offset[1]); //圆心坐标\r\n        r = Math.sqrt(locD.distanceSquaredPoint(A));\r\n        return [r, locD.x, locD.y];\r\n    }\r\n    var OC = Math.sqrt(O.distanceSquaredPoint(C));\r\n    var directionOC = O.directionPoint(C);\r\n    var directionFlagOD = O.distanceSquaredPoint(B) < O.distanceSquaredPoint(A);\r\n    if (directionFlagOD) {\r\n        var directionOD = B.directionPoint(A); //OD平行于AB\r\n    } else {\r\n        var directionOD = A.directionPoint(B); //OD平行于AB\r\n    }\r\n\r\n    var angleDOC = Math.abs(directionOC - directionOD);\r\n    if (angleDOC > 90 && angleDOC < 180) {\r\n        angleDOC = 180 - angleDOC;\r\n    } else if (angleDOC >= 180) {\r\n        angleDOC = 360 - angleDOC; //角doc是润角\r\n    }\r\n    // if(O.distanceSquaredPoint(B) > O.distanceSquaredPoint(A)){\r\n    //   directionOD = B.directionPoint(A);\r\n    // }\r\n    var OD = OC * Math.cos(angleDOC * Math.PI / 180);\r\n    var offset = computeOffset(OD, directionOD);\r\n    var locD = O.copy();\r\n    locD.offset(offset[0], offset[1]); //圆心坐标\r\n    var r = Math.sqrt(locD.distanceSquaredPoint(A));\r\n    return [r, locD.x, locD.y];\r\n    // return locD;\r\n}\r\n\r\ngo.Diagram.inherit(SmoothLink, go.Link);\r\n\r\nSmoothLink.prototype.makeGeometry = function() {\r\n    // get the Geometry created by the standard behavior\r\n    var geo = go.Link.prototype.makeGeometry.call(this);\r\n    if (geo.type !== go.Geometry.Path || geo.figures.length === 0) return geo;\r\n    return geo;\r\n};\r\n\r\n/** @override */\r\nSmoothLink.prototype.computePoints = function() {\r\n\r\n    var myDiagram = this.diagram;\r\n\r\n    var nodes = [];\r\n    if (this.fromNode == null || this.toNode == null) return true;\r\n    if (this.fromNode.location.equals(this.toNode.location)) {\r\n        return false;\r\n    }\r\n    var start = this.fromNode.location.copy();\r\n    var end = this.toNode.location.copy();\r\n\r\n    if (!start.isReal() || !end.isReal()) {\r\n        return true;\r\n    }\r\n    var A = start;\r\n    var B = end;\r\n    var O = myDiagram.findNodeForKey(this.toNode.data.parent);\r\n    if (!O) return true;\r\n    O = O.location;\r\n    var cent = computeNewCenter(O, A, B);\r\n\r\n\r\n\r\n    var centInfo = cent;\r\n    var centorPoint = new go.Point(centInfo[1], centInfo[2]);\r\n\r\n    this.micenter = centorPoint;\r\n    var rcenter = centInfo[0];\r\n    var rstart = this.fromNode.actualBounds.width / 2;\r\n    var rend = this.toNode.actualBounds.width / 2;\r\n    var center2mid = (2 * rcenter * rcenter - rstart * rstart) / (2 * rcenter); //大圆到大圆与开始节点交点中点的距离，然后求出夹角\r\n    var af = Math.acos(center2mid / rcenter) * 180 / Math.PI;\r\n\r\n    var geo = new go.Geometry(go.Geometry.Line);\r\n    geo.startX = centorPoint.x;\r\n    geo.startY = centorPoint.y;\r\n    geo.endX = this.fromNode.location.x;\r\n    geo.endY = this.fromNode.location.y;\r\n    if(!af){\r\n        af = 0;\r\n    }\r\n    geo.rotate(af, centorPoint.x, centorPoint.y); //相对圆心旋转，顺时针\r\n    var start2 = new go.Point(geo.endX, geo.endY);\r\n    // var start2 = new go.Point(this.fromNode.location.x, this.fromNode.location.y);\r\n\r\n    center2mid = (2 * rcenter * rcenter - rend * rend) / (2 * rcenter); //大圆到大圆与开始节点交点中点的距离，然后求出夹角\r\n    af = Math.acos(center2mid / rcenter) * 180 / Math.PI;\r\n    geo.endX = this.toNode.location.x;\r\n    geo.endY = this.toNode.location.y;\r\n    if(!af){\r\n        af = 0;\r\n    }\r\n    geo.rotate(-af, centorPoint.x, centorPoint.y); //相对圆心旋转,逆时针\r\n    var end2 = new go.Point(geo.endX, geo.endY);\r\n\r\n    //console.log(Math.abs(centorPoint.directionPoint(start2) - centorPoint.directionPoint(end2)));\r\n    //var result = computeControlPoint(start,midPoint,end,centInfo);\r\n    var result = computeControlPoint(start2, null, end2, centInfo);\r\n\r\n    var ctl1 = result[0];\r\n    var ctl2 = result[1];\r\n\r\n    this.clearPoints();\r\n    if (isNaN(start2.x) || isNaN(start2.y)) {\r\n        start2 = this.fromNode.location.copy();\r\n    }\r\n    if (isNaN(end2.x) || isNaN(end2.y)) {\r\n        end2 = this.toNode.location.copy();\r\n    }\r\n    //start1.rotate();\r\n    this.points.add(start2);\r\n    this.points.add(result[0]);\r\n    this.points.add(result[1]);\r\n    this.points.add(end2);\r\n\r\n    var oust = \"\";\r\n    return true;\r\n};\r\n\r\n\r\nfunction computeControlPoint(p1, p2, p3) {\r\n\r\n    var result;\r\n    result = arguments[3] ? arguments[3] : triangleCircle(p1, p2, p3);\r\n    var radius = result[0];\r\n    var cent = new go.Point(result[1], result[2]);\r\n\r\n    //起始节点的弧度\r\n    var sweep = Math.abs(cent.directionPoint(p1) - cent.directionPoint(p3));\r\n    sweep = sweep > 180 ? 360 - sweep : sweep;\r\n    //console.log(\"sweep:\"+sweep);\r\n    var newR = radius / Math.cos(sweep / 3 * Math.PI / 180);\r\n    var geo = new go.Geometry(go.Geometry.Line);\r\n    geo.startX = cent.x;\r\n    geo.startY = cent.y;\r\n    geo.endX = p1.x;\r\n    geo.endY = p1.y;\r\n    geo.rotate(sweep / 3, cent.x, cent.y); //相对圆心旋转3分之1弧度\r\n    var newStartAngle = cent.direction(geo.endX, geo.endY);\r\n    var ctl1;\r\n    result = computeOffset(newR, newStartAngle);\r\n    ctl1 = cent.copy().offset(result[0], result[1]);\r\n\r\n    geo.rotate(sweep / 3, cent.x, cent.y); //相对圆心旋转3分之1弧度\r\n    newStartAngle = cent.direction(geo.endX, geo.endY);\r\n\r\n    var ctl2; //需要调整\r\n    result = computeOffset(newR, newStartAngle);\r\n    ctl2 = cent.copy().offset(result[0], result[1]);\r\n\r\n    return [ctl1, ctl2];\r\n}\r\n\r\n\r\nfunction createTianpanLink(diagram) {\r\n    return $(SmoothLink, {\r\n            curve: go.Link.Bezier,\r\n            layerName: \"\",\r\n            isTreeLink: true,\r\n            //curve: go.Link.Bezier,\r\n            curviness: 30,\r\n            //smoothness:1,\r\n            adjusting: go.Link.Stretch,\r\n            relinkableFrom: true,\r\n            relinkableTo: true,\r\n            reshapable: true,\r\n            layoutConditions: go.Part.LayoutStandard & ~go.Part.LayoutNodeSized,\r\n            mouseDragEnter: function(e, obj) {\r\n                var link = obj.part;\r\n                var shape = link.findObject(\"SHAPE\");\r\n                shape._preStoke = shape.stroke;\r\n                shape.stroke = \"darkred\";\r\n                shape._preStrokeWidth = shape.strokeWidth;\r\n                shape.strokeWidth = 5;\r\n            },\r\n            mouseDragLeave: function(e, obj) {\r\n                var link = obj.part;\r\n                var shape = link.findObject(\"SHAPE\");\r\n                shape.stroke = shape._preStoke;\r\n                shape.strokeWidth = shape._preStrokeWidth;\r\n            },\r\n            mouseDrop: function(e, obj) {\r\n                var link = obj.part;\r\n                var draggedNode = e.diagram.selection.first();\r\n                if (!draggedNode instanceof go.Node) {\r\n                    return;\r\n                }\r\n                if (!draggedNode instanceof go.Group) {\r\n                    return;\r\n                }\r\n                if (draggedNode.data.key == 1) {\r\n                    return;\r\n                }\r\n                var fromNode = link.fromNode,\r\n                    toNode = link.toNode;\r\n                //disconnectFromTreeStructure(draggedNode);\r\n                if (toNode.data.parent == fromNode.data.key) {\r\n                    e.diagram.__trtd.setNodeAsChildren(draggedNode, fromNode);\r\n                } else {\r\n                    e.diagram.__trtd.setNodeAsSibling(draggedNode, fromNode);\r\n                }\r\n            }\r\n        }, // negate curviness if not clockwise\r\n        $(go.Shape, {\r\n                name: \"SHAPE\",\r\n                stroke: \"#767678\",\r\n                strokeWidth: 3\r\n            },\r\n            new go.Binding(\"strokeWidth\", \"strokeWidth\").makeTwoWay(),\r\n            new go.Binding(\"stroke\", \"color\").makeTwoWay(),\r\n            new go.Binding(\"strokeDashArray\", \"strokeDashArray\", function(v) {\r\n                try {\r\n                    var val = [parseInt(v.split(\" \")[0]), parseInt(v.split(\" \")[1])];\r\n                } catch (e) {\r\n                    var val = null;\r\n                }\r\n                return val;\r\n            }).makeTwoWay(function(v) {\r\n                return v[0] + \" \" + v[1];\r\n            }) //保留，设置边线样式\r\n\r\n        ),\r\n        $(go.Shape, {\r\n                name: \"Arrow\",\r\n                toArrow: \"Triangle\",\r\n                stroke: \"#767678\",\r\n                strokeWidth: 3\r\n            },\r\n            new go.Binding(\"strokeWidth\", \"strokeWidth\"),\r\n            new go.Binding(\"fill\", \"color\"),\r\n            new go.Binding(\"stroke\", \"color\"),\r\n            new go.Binding(\"toArrow\", \"toArrow\")\r\n        ),\r\n        new go.Binding(\"curviness\", \"curviness\").makeTwoWay(),\r\n        new go.Binding(\"points\").makeTwoWay()\r\n\r\n    );\r\n}\r\n\r\n\r\nmodule.exports = createTianpanLink\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/linkTemplate/createTianpanLink.js","// require('./core/core.controller')(Trtd);\r\n// import * as go from 'gojs';\r\nvar helpers = require('../helpers/helpers.gojs')\r\nlet lang = require('../assets/localization');\r\nvar createPictureSingleNodeTemplate = require('../nodeTemplate/createPictureSingleNodeTemplate')\r\n// var createPictureNodeTemplate = require('../nodeTemplate/createPictureNodeTemplate')\r\nvar TRTD_BASE = require('./trtd').Trtd\r\n\r\nvar $ = go.GraphObject.make;\r\n\r\nclass Trtd extends TRTD_BASE {\r\n\tconstructor(div, config){\r\n       \r\n        super(div, config)\r\n\t\tthis.config = config;\r\n\t\tthis.modelChangedListener = config.modelChangedListener;\r\n\t\tthis.type = config.type;\r\n\t\tthis.diagram = {};\r\n        this.model = config.model;\r\n        // this.tpid = config.tpid;\r\n        this.readOnly = false;// 控制是否只读\r\n        if(config.readOnly != null){\r\n            this.readOnly = config.readOnly\r\n        }\r\n        this.initDiagramBase(div, config); // 基类初始化diagram\r\n\t\t// 初始化diagram\r\n        this.diagram = this.initDiagram(div, config);\r\n        // this.diagram.__trtd = this;\r\n\t\tthis.initListener();\r\n\t\t// Then you will need to construct a Model (usually a GraphLinksModel) for the Diagram, initialize its data by setting its Model.nodeDataArray and other properties, and then set the diagram's model.\r\n        if(this.model){\r\n            this.initModel();\r\n        }\r\n\t}\r\n/**\r\n * method 初始化diagram\r\n * @param {*} div \r\n * @param {*} config \r\n */\r\n\tinitDiagram(div, config){\r\n        var myDiagram = this.diagram;\r\n        \r\n        var defaultConfig = {\r\n            // initialAutoScale: go.Diagram.Uniform,\r\n            // initialContentAlignment: go.Spot.Center,\r\n            // initialDocumentSpot: go.Spot.Center,\r\n            // initialViewportSpot: go.Spot.Center,\r\n            \"undoManager.isEnabled\": true,\r\n            // \"toolManager.hoverDelay\": 100,\r\n            // \"toolManager.mouseWheelBehavior\": go.ToolManager.WheelZoom,\r\n            // maxScale: 5.0,\r\n            // minScale: 0.05,\r\n            allowMove: true,\r\n            // allowDrop: true,\r\n            // hasVerticalScrollbar: false,\r\n            // hasHorizontalScrollbar: false,\r\n            // \"draggingTool.isCopyEnabled\": false,\r\n            // BackgroundSingleClicked: function(e) {\r\n            // \tcloseToolbarWindow();\r\n            // },\r\n            \"animationManager.isEnabled\": false,\r\n            // scrollMode: go.Diagram.InfiniteScroll,\r\n            // validCycle: go.Diagram.CycleDestinationTree,\r\n            // scrollMargin: 50,\r\n            // \"ModelChanged\": function(e){\r\n            //     that.saveModel(e)\r\n            // },\r\n            // \"TextEdited\": onTextChanged,\r\n        };\r\n        var diagramConfig = Object.assign(defaultConfig, config.diagramConfig);\r\n        this.diagram.setProperties(diagramConfig);\r\n       \r\n        \r\n        this.addNodeTemplate();\r\n        // this.customMenu();\r\n        // this.addDiagramContextMenu();\r\n        // this.addLinkTemplate();\r\n        // this.addGroupTemplate();\r\n        return myDiagram\r\n    }\r\n    getTdData(){\r\n        return this.diagram.model.toJson()\r\n    }\r\n    // 以下两个方法控制菜单显示\r\n    getDefaultCustomMenuDivStr(){\r\n        return `\r\n        <ul>\r\n            <li trtd_action=\"addFollowerGround\"><a class=\"i18n\" data-lang=\"insertsl\">增加同级节点</a></li>\r\n            <li trtd_action=\"addNewCircle\"><a class=\"i18n\" data-lang=\"icn\">增加子节点</a></li>\r\n            <li trtd_action=\"apiDeleteSelection\"><a class=\"i18n\" data-lang=\"remove\">删除</a></li>\r\n        </ul>\r\n        `\r\n    }\r\n    getShowContextMenus(node){\r\n        if(node){\r\n            return \"addFollowerGround,\" + \"addNewCircle,\"+\"apiDeleteSelection\";\r\n        }else{\r\n            return \"none\"\r\n        }\r\n    }\r\n\r\n    addTextNode(message){\r\n        console.log('eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee:');\r\n        var myDiagram = this.diagram;\r\n        myDiagram.startTransaction();\r\n        var text = { text: message||lang.trans('blankText'), category: 'text' };\r\n        text.loc = go.Point.stringify(myDiagram.lastInput.documentPoint);\r\n        myDiagram.model.addNodeData(text);\r\n        myDiagram.commitTransaction()\r\n    }\r\n\r\n\r\n    /**\r\n     * method 初始化model\r\n     */\r\n\tinitModel(model){\r\n        if(model){\r\n            this.model = model;\r\n        }\r\n        console.log('initModel')\r\n        var tmpModel = go.Model.fromJson(this.model);\r\n        if(tmpModel.modelData.currentType == 'dipan'){\r\n            tmpModel.nodeDataArray = tmpModel.nodeDataArray.filter((d)=>{\r\n                if(!d.isGroup){\r\n                    delete d.group\r\n                    return true;\r\n                }\r\n            })\r\n            // tmpModel.nodeDataArray = \r\n            tmpModel.linkDataArray=[]\r\n        }\r\n\r\n        this.diagram.layout.isInitial = false;\r\n        //randomUrl(tmpModel);\r\n        tmpModel.modelData.type = this.type\r\n        // tmpModel.modelData.version = Trtd.version\r\n        this.diagram.model = tmpModel;\r\n        // configModel(myDiagram.model);\r\n        this.groundLayout(this.diagram);\r\n        this.diagram.updateAllTargetBindings();\r\n    }\r\n    loadModel(model){\r\n       \r\n        this.initModel(model)\r\n    }\r\n    /**\r\n     * method: 初始化监听方法\r\n     */\r\n\tinitListener(){\r\n\t\tconsole.log('initListener')\r\n    }\r\n    /**\r\n     * 添加节点模板\r\n     */\r\n\r\n   \r\n    addNodeTemplate(){\r\n\r\n        var that = this;\r\n        var myDiagram = this.diagram\r\n      \r\n        var globalProperties = this.tdGetModelData(null, myDiagram.model,myDiagram); //获取所有全局属性到一个对象中,从localstorage中\r\n        //var layerThickness = myDiagram.model.modelData.layerThickness;\r\n        var layerThickness = parseInt(globalProperties['layerThickness']);\r\n        console.log(layerThickness)\r\n        \r\n        var tdDipanTextAngle = globalProperties['tdDipanTextAngle'];\r\n        console.log(tdDipanTextAngle)\r\n        myDiagram.nodeTemplateMap.add(\"dipan\", this.createDipanTemplate(layerThickness,tdDipanTextAngle));\r\n        myDiagram.nodeTemplateMap.add(\"Root\", this.getDipanRootTemplate(layerThickness));\r\n        myDiagram.nodeTemplateMap.add(\"3\", createPictureSingleNodeTemplate(this.diagram));\r\n        // myDiagram.nodeTemplateMap.add(\"4\", createPictureNodeTemplate(this.diagram));\r\n        // myDiagram.nodeTemplateMap.add(\"text\", this.createTextNodeTemplate());\r\n        \r\n    }\r\n\r\n    \r\n    createTextNodeTemplate () {\r\n    var properties = {\r\n        figure: \"Rectangle\",\r\n        fill: \"rgba(0,0,0,0)\",\r\n        strokeWidth: 1,\r\n        stroke: \"rgba(0,0,0,0)\",\r\n        fontSize: 15,\r\n        font: \"sans-serif\"\r\n    };\r\n    return $(go.Node, \"Spot\", {\r\n            \"_controlExpand\": true,\r\n            layerName: \"Foreground\",\r\n            locationSpot: go.Spot.Center,\r\n            resizeCellSize: new go.Size(10, 10),\r\n            locationObjectName: \"SHAPE\",\r\n            resizable: true,\r\n            resizeObjectName: \"SHAPE\", // user can resize the Shape\r\n            rotatable: true,\r\n            location: new go.Point(0, 0),\r\n            //rotateObjectName: \"SHAPE\",  // rotate the Shape without rotating the label\r\n            // doubleClick: selectText,\r\n            toMaxLinks: 1,\r\n            layoutConditions: go.Part.LayoutStandard,\r\n            //layoutConditions:~go.Part.LayoutAdded,\r\n            // fromLinkable: true, toLinkable: true,\r\n            alignment: go.Spot.Center,\r\n            alignmentFocus: go.Spot.Center,\r\n            contextMenu: this.getNodeContextMenu\r\n            // selectionAdornmentTemplate: nodeSelectionAdornmentTemplate,\r\n        },\r\n        new go.Binding(\"location\", \"loc\", go.Point.parse).makeTwoWay(go.Point.stringify),\r\n        new go.Binding(\"isShadowed\", \"isShadowed\").makeTwoWay(),\r\n        new go.Binding(\"angle\", \"angle\").makeTwoWay(),\r\n        new go.Binding(\"selectable\", \"selectable\").makeTwoWay(),\r\n        new go.Binding(\"layerName\", \"layerName\", function(v, d) {\r\n            return v ? v : \"\";\r\n        }).makeTwoWay(function(v) {\r\n            return v;\r\n        }),\r\n        $(go.Shape, {\r\n                strokeDashArray: null,\r\n                // strokeDashOffset:10,\r\n                name: \"SHAPE\",\r\n                figure: \"Rectangle\",\r\n                fill: \"rgba(0,0,0,0)\",\r\n                fromLinkable: true,\r\n                toLinkable: true,\r\n                cursor: \"pointer\",\r\n                minSize: new go.Size(50, 50),\r\n                strokeWidth: 2,\r\n                stroke: \"rgba(0,0,0,0)\",\r\n                portId: \"\",\r\n                width:150\r\n            },\r\n            new go.Binding(\"strokeDashArray\", \"strokeDashArray\", function(v) {\r\n                return [v.split()[0], v.split()[1]];\r\n            }).makeTwoWay(function(v) {\r\n                return v[0] + \" \" + v[1];\r\n            }), //保留，设置边线样式\r\n            new go.Binding(\"fill\", \"fill\", function(v, obj) {\r\n                return v instanceof go.Brush ? v.color : v;\r\n            }).makeTwoWay(),\r\n            // new go.Binding(\"fill\", \"isSelected\", function(s, obj) { return s ? \"red\" : obj.part.data.color; }).ofObject()),\r\n            new go.Binding(\"width\", \"width\", function(v) {\r\n                //alert(v);\r\n                return v;\r\n            }).makeTwoWay(function(v) {\r\n                return v;\r\n            }),\r\n            new go.Binding(\"height\", \"height\", function(v) {\r\n                //alert(v);\r\n                return v;\r\n            }).makeTwoWay(function(v) {\r\n                return v;\r\n            }),\r\n            new go.Binding(\"stroke\", \"stroke\", function(v) {\r\n                return v instanceof go.Brush ? v.stroke : v;\r\n            }).makeTwoWay(),\r\n            new go.Binding(\"strokeWidth\", \"strokeWidth\", function(d) {\r\n                return d;\r\n            }).makeTwoWay(function(d) {\r\n                return d;\r\n            }),\r\n            new go.Binding(\"figure\", \"figure\").makeTwoWay(), {\r\n                figure: properties.figure,\r\n                fill: properties.fill,\r\n                strokeWidth: properties.strokeWidth,\r\n                stroke: properties.stroke\r\n            }\r\n        ),\r\n        $(go.Shape, {\r\n                name: \"SHAPE_Back\",\r\n                figure: \"Rectangle\",\r\n                fill: \"rgba(0,0,0,0)\",\r\n                // fromLinkable: true,\r\n                // toLinkable: true,\r\n                strokeWidth: 0\r\n            },\r\n            new go.Binding(\"width\", \"width\", function(v) {\r\n                return v;\r\n            }).ofObject(\"SHAPE\"),\r\n            new go.Binding(\"height\", \"height\", function(v) {\r\n                return v;\r\n            }).ofObject(\"SHAPE\")\r\n        ),\r\n        $(go.TextBlock, {\r\n                name: \"TEXT\",\r\n                alignment: new go.Spot(0.5, 0.5),\r\n                font: \"bold \" + 22 + \"px 幼圆\",\r\n                editable: true,\r\n                //margin: 3, editable: true,\r\n                stroke: \"black\",\r\n                isMultiline: true,\r\n                overflow: go.TextBlock.OverflowClip,\r\n                wrap: go.TextBlock.WrapDesiredSize,\r\n                textAlign: \"center\",\r\n                spacingAbove: 4,\r\n                spacingBelow: 4,\r\n                portId: \"TEXT\",\r\n                stretch: go.GraphObject.Fill\r\n            },\r\n            new go.Binding(\"textAlign\", \"textAlign\", function(v) {\r\n                return _.contains(['start', 'center', 'end'], v) ? v : \"center\";\r\n            }).makeTwoWay(),\r\n            new go.Binding(\"spacingAbove\", \"spacingline\", function(v) {\r\n                return helpers.tdTransToNum(v, 4);\r\n            }).makeTwoWay(),\r\n            new go.Binding(\"spacingBelow\", \"spacingline\", function(v) {\r\n                return helpers.tdTransToNum(v, 4);\r\n            }).makeTwoWay(),\r\n            new go.Binding(\"width\", \"width\", function(v) {\r\n                return v;\r\n            }).ofObject(\"SHAPE\"),\r\n            // new go.Binding(\"height\", \"height\", function (v) {\r\n            //   return v;\r\n            // }).ofObject(\"SHAPE\"),\r\n            new go.Binding(\"text\", \"text\").makeTwoWay(),\r\n            new go.Binding(\"stroke\", \"textStroke\").makeTwoWay(),\r\n            new go.Binding(\"font\", \"font\").makeTwoWay()\r\n        )\r\n    );\r\n}\r\n\r\n    /**\r\n     * method 地盘模板\r\n     * @param {*} layerThickness \r\n     * @param {*} tdDipanTextAngle \r\n     */\r\n    createDipanTemplate (layerThickness, tdDipanTextAngle) {\r\n        console.log(layerThickness)\r\n        if (layerThickness == null) {\r\n            var layerThickness = 100;\r\n        }\r\n\r\n        if (tdDipanTextAngle == null) {\r\n            var tdDipanTextAngle = \"zhengli\";\r\n        }\r\n        var that = this;\r\n        var $ = go.GraphObject.make;\r\n        return $(go.Node, \"Spot\", {\r\n                locationSpot: go.Spot.Center, // Node.location is the center of the TextBlock\r\n                locationObjectName: \"MAIN\",\r\n                selectionObjectName: \"SHAPE\",\r\n                click: function(e, node) {\r\n                    console.log(node.data)\r\n                    if(that.readOnly){\r\n                        if(node.diagram.__trtd.nodeClickListener){\r\n                            node.diagram.__trtd.nodeClickListener(node);\r\n                        }\r\n                    }\r\n                \r\n                },\r\n                contextMenu: this.getNodeContextMenu,\r\n                movable: false,\r\n                doubleClick: function(e){\r\n                    console.log(\"that.readOnlythat.readOnly\",that.readOnly)\r\n                    if(that.readOnly){\r\n                        return;\r\n                    }\r\n\r\n                    var myDiagram = e.diagram;\r\n                    var node = myDiagram.selection.first();\r\n                    // if(node.data.istemp) return;\r\n                    if (!node) return;\r\n                    // removeNodeRemarkTips();\r\n                    var tb = myDiagram.selection.first().findObject('TEXT');\r\n                    if (tb) myDiagram.commandHandler.editTextBlock(tb);\r\n                    helpers.simulateEnterWithAlt(e);\r\n                    changeTemp2normal(myDiagram)\r\n                },\r\n                selectionAdorned:!that.readOnly,\r\n                selectionAdornmentTemplate: \r\n                     $(go.Adornment, \"Spot\",\r\n                        $(go.Panel, \"Auto\",\r\n                            $(go.Shape, { fill: 'rgba(255,232,211,0.1)', stroke: \"blue\", strokeWidth: 2 }),\r\n                            $(go.Placeholder) // this represents the selected Node\r\n                        ),\r\n                        // the button to create a \"next\" node, at the top-right corner\r\n                        $(\"Button\", {\r\n                                alignment: go.Spot.RightCenter,\r\n                                alignmentFocus: go.Spot.Bottom,\r\n                                width: 30,\r\n                                height: 30,\r\n                \r\n                                click: (e) => {\r\n                                    console.log(e.diagram.selection.first().data)\r\n                                    console.log(e.diagram.selection.first().data.parent)\r\n                                    var node = e.diagram.selection.first();\r\n                                    if(node.data.parent){\r\n                                        var parentNode = node.diagram.findNodeForKey(node.data.parent);\r\n                                        if(parentNode.data.istemp){\r\n                                            return\r\n                                        }\r\n                                    }\r\n                                    that.addNewCircle(e) // this function is defined below\r\n                                } \r\n                                \r\n                            },\r\n                            $(go.Shape, \"PlusLine\", { desiredSize: new go.Size(15, 15) })\r\n                        ),\r\n                        // end button\r\n                        $(\"Button\", {\r\n                                alignment: go.Spot.BottomCenter,\r\n                                width: 30,\r\n                                height: 30,\r\n                                //visible:function(d){\r\n                                //    return !isUndefined(d.istemp)&&d.istemp?false:true;\r\n                                //},\r\n                                click: function(e) {\r\n                                    console.log(e)\r\n                                    console.log(e.diagram.selection.first().data)\r\n                                    //判断临时节点\r\n                                    if(e.diagram.selection.first().data.istemp){\r\n                                        return\r\n                                    }\r\n                                    \r\n                                    that.addFollowerGround(e);\r\n                                    } // this function is defined below\r\n                                    \r\n                            },\r\n                            $(go.Shape, \"PlusLine\", { desiredSize: new go.Size(15, 15) })\r\n                        ) \r\n                        //备注\r\n                    ),\r\n                mouseOver: function(e, node) {\r\n                },\r\n                mouseLeave: function(e, node) {\r\n                    //removeNodeRemarkTips();\r\n                },\r\n                mouseDragEnter: function(e, node, prev) {\r\n                    return;\r\n                },\r\n                mouseDragLeave: function(e, node, next) {\r\n                    return;\r\n                },\r\n                mouseDrop: function(e, node) {\r\n                    return;\r\n                }\r\n            },\r\n            new go.Binding(\"angle\", \"dangle\"),\r\n            new go.Binding(\"location\", \"loc\", go.Point.parse).makeTwoWay(go.Point.stringify),\r\n            new go.Binding(\"selectionAdorned\", \"selectionAdorned\", function(v, d) {\r\n                console.log(v)\r\n                return v ? v : \"\";\r\n            }).makeTwoWay(function(v) {\r\n                return v;\r\n            }),\r\n            $(go.Shape, {\r\n                    figure: \"Rectangle\",\r\n                    name: \"MAIN\",\r\n                    fill: \"rgba(255,255,0,0)\", // default value, but also data-bound\r\n                    strokeWidth: 0,\r\n                    stroke: \"red\",\r\n                    height: 1\r\n                },\r\n                new go.Binding('width', 'layerThickness', function(data) {\r\n                    return parseInt(data || 100);\r\n                })\r\n            ),\r\n            $(go.Shape, {\r\n                    name: \"SHAPE\",\r\n                    fill: \"lightgray\", // default value, but also data-bound\r\n                    strokeWidth: 2,\r\n                    margin: 5,\r\n                    stroke: \"green\",\r\n                    alignment: go.Spot.Right,\r\n                    alignmentFocus: go.Spot.Right,\r\n                    portId: \"\" // so links will go to the shape, not the whole node\r\n                },\r\n                new go.Binding(\"geometry\", \"\", function(data) {\r\n                return makeAnnularWedge(data);\r\n                }),\r\n                new go.Binding(\"fill\", \"fill\", function(v) {\r\n                    return v instanceof go.Brush ? v.color : v;\r\n                }).makeTwoWay(),\r\n                new go.Binding(\"stroke\", \"stroke\", function(v) {\r\n                    return v instanceof go.Brush ? v.stroke : v;\r\n                }).makeTwoWay(),\r\n                new go.Binding(\"strokeWidth\", \"strokeWidth\", function(d) {\r\n                    return d;\r\n                }).makeTwoWay(function(d) {\r\n                    return d;\r\n                })\r\n            ),\r\n            $(go.Shape, {\r\n                    figure: \"Rectangle\",\r\n                    name: \"LOCATE\",\r\n                    fill: \"rgba(0,255,0,0)\", // default value, but also data-bound\r\n                    strokeWidth: 0,\r\n                    stroke: \"green\",\r\n                    height: 20,\r\n                    alignment: go.Spot.Right,\r\n                    alignmentFocus: go.Spot.Right\r\n                },\r\n                new go.Binding('width', 'layerThickness', function(data) {\r\n                    return parseInt(data || 100);\r\n                })\r\n            ),\r\n            $(go.TextBlock, {\r\n                    name: \"TEXT\",\r\n                    isMultiline: true,\r\n                    click: function(e, node) {\r\n                \r\n                    },\r\n                    textAlign: \"center\",\r\n                    editable: false,\r\n                    wrap: go.TextBlock.WrapDesiredSize,\r\n                    overflow: go.TextBlock.OverflowClip,\r\n                    spacingAbove: 4,\r\n                    spacingBelow: 4,\r\n                    font: \"bold 15px 幼圆\"\r\n                },\r\n                new go.Binding(\"text\").makeTwoWay(),\r\n                new go.Binding(\"textAlign\", \"textAlign\", function(v) {\r\n                    return _.contains(['start', 'center', 'end'], v) ? v : \"center\";\r\n                }).makeTwoWay(),\r\n                new go.Binding(\"spacingAbove\", \"spacingline\", function(v) {\r\n                    return helpers.tdTransToNum(v, 4);\r\n                }).makeTwoWay(),\r\n                new go.Binding(\"spacingBelow\", \"spacingline\", function(v) {\r\n                    return helpers.tdTransToNum(v, 4);\r\n                }).makeTwoWay(),\r\n                new go.Binding(\"stroke\", \"textStroke\").makeTwoWay(),\r\n                new go.Binding(\"font\", \"font\").makeTwoWay(),\r\n                new go.Binding(\"width\", \"\", function(data, obj) {\r\n                    var tdDipanTextAngle = data.tdDipanTextAngle || 'xuanzhuan';\r\n                    var layerThickness = parseInt(data.layerThickness || 100);\r\n                    var maxWidth = data.sweep / 180 * data.dradius * Math.PI * 0.7;\r\n                    if (tdDipanTextAngle == 'fangshe') {\r\n                        return maxWidth;\r\n                    }\r\n                    if (tdDipanTextAngle == 'zhengli') {\r\n                        return layerThickness * 0.7;\r\n                    }\r\n                    if (tdDipanTextAngle == 'xuanzhuan') {\r\n                        return layerThickness * 0.7;\r\n                    }\r\n                }),\r\n\r\n                new go.Binding(\"angle\", \"textAngle\").makeTwoWay(),\r\n                new go.Binding('alignment', 'tdDipanTextAngle', function(data) {\r\n                    var tdDipanTextAngle = data || 'xuanzhuan';\r\n                    var alignment = go.Spot.Center;\r\n                    switch (tdDipanTextAngle) {\r\n                        case 'xuanzhuan':\r\n                            alignment = go.Spot.Center;\r\n                            break;\r\n                        case 'fangshe':\r\n                            alignment = go.Spot.Left;\r\n                            break;\r\n                        case 'zhengli':\r\n                            alignment = go.Spot.Center;\r\n                            break;\r\n                    }\r\n                    return alignment;\r\n                }),\r\n                new go.Binding('alignmentFocus', 'tdDipanTextAngle', function(data) {\r\n                    var tdDipanTextAngle = data || 'xuanzhuan';\r\n                    var alignmentFocus = go.Spot.Center;\r\n                    switch (tdDipanTextAngle) {\r\n                        case 'xuanzhuan':\r\n                            alignmentFocus = go.Spot.Center;\r\n                            break;\r\n                        case 'fangshe':\r\n                            alignmentFocus = go.Spot.Left;\r\n                            break;\r\n                        case 'zhengli':\r\n                            alignmentFocus = go.Spot.Center;\r\n                            break;\r\n                    }\r\n                    return alignmentFocus;\r\n                })\r\n            \r\n            )\r\n        );\r\n\r\n\r\n \r\n    }\r\n\r\n    getDipanRootTemplate(layerThickness){\r\n        var that = this;\r\n        return $(go.Node, \"Auto\", {\r\n            locationSpot: go.Spot.Center,\r\n            selectionAdorned: true,\r\n            movable: false,\r\n            \r\n            click: function(e, node) {\r\n                //showNodeToolBar(e, node);\r\n                //showTempToolBar(e, node);\r\n                console.log(node.data)\r\n                if(that.readOnly){\r\n                    if(node.diagram.__trtd.nodeClickListener){\r\n                        node.diagram.__trtd.nodeClickListener(node);\r\n                    }\r\n                }\r\n                \r\n            },\r\n            doubleClick: function(e){\r\n                if(that.readOnly){\r\n                    return;\r\n                }\r\n                var myDiagram = e.diagram;\r\n                var node = myDiagram.selection.first();\r\n                if (!node) return;\r\n                // removeNodeRemarkTips();\r\n                var tb = myDiagram.selection.first().findObject('TEXT');\r\n                if (tb) myDiagram.commandHandler.editTextBlock(tb);\r\n                helpers.simulateEnterWithAlt(e);\r\n            },\r\n         \r\n            mouseOver: function(e, node) {\r\n                //showNodeRemarkTips(e, node);\r\n             \r\n            },\r\n            mouseLeave: function(e, node) {\r\n                //removeNodeRemarkTips();\r\n                //removeNodeToolBar();\r\n            },\r\n            selectionAdorned:!that.readOnly,\r\n            selectionAdornmentTemplate: $(go.Adornment, \"Spot\",\r\n                        $(go.Panel, \"Auto\",\r\n                            $(go.Shape, { fill: 'rgba(255,232,211,0.1)', stroke: \"blue\", strokeWidth: 2 }),\r\n                            $(go.Placeholder) // this represents the selected Node\r\n                        ),\r\n                        // the button to create a \"next\" node, at the top-right corner\r\n                        $(\"Button\", {\r\n                                alignment: go.Spot.RightCenter,\r\n                                alignmentFocus: go.Spot.Bottom,\r\n                                width: 30,\r\n                                height: 30,\r\n                \r\n                                click: (e) => {\r\n                                    console.log(e.diagram.selection.first().data)\r\n                                    console.log(e.diagram.selection.first().data.parent)\r\n                                    var node = e.diagram.selection.first();\r\n                                    if(node.data.parent){\r\n                                        var parentNode = node.diagram.findNodeForKey(node.data.parent);\r\n                                        if(parentNode.data.istemp){\r\n                                            return\r\n                                        }\r\n                                    }\r\n                                    this.addNewCircle(e) // this function is defined below\r\n                                } \r\n                                \r\n                            },\r\n                            $(go.Shape, \"PlusLine\", { desiredSize: new go.Size(15, 15) })\r\n                        ),\r\n                        //备注\r\n                \r\n                    ),\r\n            // contextMenu: $(go.Adornment, \"Vertical\",\r\n            //     $(\"ContextMenuButton\",\r\n            //         $(go.TextBlock, \"更换地盘背景\"), {\r\n            //             click: function(e, obj) {\r\n            //                 var backImage = tdDipanBackgroundImages[Math.floor(Math.random() * tdDipanBackgroundImages.length)];\r\n            //                 setSourceOfPicture(backImage, 1); //更换主题时，如果是保留颜色，则刷新背景图片\r\n            //             }\r\n            //         }),\r\n            //     $(\"ContextMenuButton\",\r\n            //         $(go.TextBlock, \"移除地盘背景\"), {\r\n            //             click: function(e, obj) {\r\n            //                 var backnodeData = null;\r\n            //                 var rootKey = obj.part.data.key;\r\n            //                 myDiagram.model.nodeDataArray.forEach(function(d) {\r\n            //                     if (d.rootKey == rootKey && d.category == '3') {\r\n            //                         backnodeData = d;\r\n            //                         return;\r\n            //                     }\r\n            //                 })\r\n            //                 if (backnodeData) {\r\n            //                     myDiagram.model.startTransaction();\r\n            //                     myDiagram.model.removeNodeData(backnodeData);\r\n            //                     myDiagram.model.commitTransaction();\r\n            //                 }\r\n            //             }\r\n            //         })\r\n            // ),\r\n            \r\n        \r\n            location: new go.Point(0, 0)\r\n        },\r\n        new go.Binding(\"width\", \"layerThickness\", function(v) {\r\n            return v ? v * 2 : 100 * 2;\r\n        }),\r\n        new go.Binding(\"height\", \"layerThickness\", function(v) {\r\n            return v ? v * 2 : 100 * 2;\r\n        }),\r\n        $(go.Shape, \"Circle\", {\r\n                name: \"SHAPE\",\r\n                fill: \"#FFBFBF\",\r\n                strokeWidth: 0,\r\n                // width: 100,\r\n                // height: 100,\r\n                spot1: go.Spot.TopLeft,\r\n                spot2: go.Spot.BottomRight\r\n            },\r\n            new go.Binding(\"fill\", \"fill\", function(v) {\r\n                return v instanceof go.Brush ? v.color : v;\r\n            }).makeTwoWay(),\r\n            new go.Binding(\"stroke\", \"stroke\", function(v) {\r\n                return v instanceof go.Brush ? v.stroke : v;\r\n            }).makeTwoWay(),\r\n        \r\n            new go.Binding(\"strokeWidth\", \"strokeWidth\", function(d) {\r\n                return d;\r\n            }).makeTwoWay(function(d) {\r\n                return d;\r\n            })\r\n        ),\r\n        $(go.TextBlock, {\r\n                name: \"TEXT\",\r\n                font: \"bold 23px 幼圆\",\r\n                textAlign: \"center\",\r\n                editable: false,\r\n                spacingAbove: 4,\r\n                isMultiline: true,\r\n                \r\n                spacingBelow: 4\r\n            },\r\n            new go.Binding(\"textAlign\", \"textAlign\", function(v) {\r\n                return _.contains(['start', 'center', 'end'], v) ? v : \"center\";\r\n            }).makeTwoWay(),\r\n            new go.Binding(\"spacingAbove\", \"spacingline\", function(v) {\r\n                return helpers.tdTransToNum(v, 4);\r\n            }).makeTwoWay(),\r\n            new go.Binding(\"spacingBelow\", \"spacingline\", function(v) {\r\n                return helpers.tdTransToNum(v, 4);\r\n            }).makeTwoWay(),\r\n            new go.Binding(\"text\").makeTwoWay(),\r\n            new go.Binding(\"stroke\", \"textStroke\").makeTwoWay(),\r\n            new go.Binding(\"width\", \"width\").makeTwoWay(),\r\n            new go.Binding(\"font\", \"font\").makeTwoWay(),\r\n            new go.Binding(\"angle\", \"textAngle\").makeTwoWay()\r\n        )\r\n        );\r\n        }\r\n\r\n    tdGetModelData1(name,model,myDiagram1) { //获取盘的model.modelData中的全局属性 \r\n        var defaultVal = {\r\n            currentType: 'dipan',\r\n            currentThemeID: 0,\r\n            layerThickness: 100,\r\n            splitLayer: 1,\r\n            layout: 'inner',\r\n            tdDipanTextAngle: 'xuanzhuan'\r\n        };\r\n        return Object.assign(defaultVal,model.modelData)\r\n    }\r\n    tdGetModelData(name,model) { //获取盘的model.modelData中的全局属性 \r\n        // if(myDiagram1){\r\n        //     myDiagram = myDiagram1\r\n        // }\r\n        var myDiagram = this.diagram\r\n        var  model = myDiagram.model\r\n        var defaultVal = {\r\n            currentType: 'tianpan',\r\n            currentThemeID: 0,\r\n            layerThickness: 100,\r\n            splitLayer: 1,\r\n            layout: 'inner',\r\n            tdDipanTextAngle: 'xuanzhuan'\r\n        };\r\n        console.log(\"getRootNodeData1111111111111111111111\")\r\n        var root = getRootNodeData(model);\r\n        if (typeof(name) != 'undefined' && name != null) { //返回指定的属性值\r\n            if (root) {\r\n                return root[name] || model.modelData[name] || defaultVal[name]\r\n            } else {\r\n                return model.modelData[name] || defaultVal[name];\r\n            }\r\n        }\r\n        //返回所有属性值\r\n        if (root) {\r\n            for (var key in defaultVal) {\r\n                if (root[key]) {\r\n                    defaultVal[key] = root[key];\r\n                } else {\r\n                    if (model.modelData && model.modelData[key]) {\r\n                        defaultVal[key] = model.modelData[key];\r\n                    }\r\n                }\r\n            }\r\n        } else {\r\n            for (var key in defaultVal) {\r\n                if (model.modelData && model.modelData[key]) {\r\n                    defaultVal[key] = model.modelData[key];\r\n                }\r\n            }\r\n        }\r\n        return defaultVal;\r\n    }\r\n    deleteSelection () {\r\n        // console.log(\"====================deleteSelection 优化\")\r\n        var myDiagram = this.diagram;\r\n        var node = myDiagram.selection.first();\r\n        console.log(`删除节点 ${JSON.stringify(node.data)}`)\r\n        console.log(node.data)\r\n        var cmd = myDiagram.commandHandler;\r\n        // if (node instanceof go.Group) {\r\n        //     return;\r\n        // }\r\n        var locateNode = null;\r\n    \r\n        if (!node || node.data.istemp) {\r\n            return;\r\n        }\r\n        if (node.data.key == 1 || node.data.key == 'g_1' || node.data.key == 'Root') {\r\n            //删除根节点触发清空节点\r\n            //clearAllNodesGround();\r\n             \r\n            return;\r\n        }\r\n    \r\n        myDiagram.model.startTransaction('all');\r\n        myDiagram.model.startTransaction('level1');\r\n    \r\n        // myDiagram.model.startTransaction(\"sub\");\r\n        myDiagram.model.setDataProperty(node.data, \"istemp\", true); //防止节点呗删除访问属性失败\r\n        // console.log(myDiagram.model.nodeDataArray)\r\n        this.deleteNode(node,myDiagram);\r\n        //removeOneNode(node); //zyy\r\n        \r\n        // console.log(myDiagram.model.nodeDataArray)\r\n        // myDiagram.model.commitTransaction(\"sub\");\r\n    \r\n        //统一删除节点\r\n        var maxCircle = this.getMaxCircle(myDiagram);\r\n        //找到所有要删除的节点\r\n        var nodes = [];\r\n        myDiagram.model.nodeDataArray.forEach(function(n) {\r\n            if (n.level > maxCircle) {//zyy 增加n.group!==\"g_1\"\r\n                nodes.push(n);\r\n            }\r\n        });\r\n        // myDiagram.model.startTransaction(\"deleteTempNode\");\r\n        //删除所有只有临时节点的层级\r\n        myDiagram.model.removeNodeDataCollection(nodes);\r\n        //删除最外圈节点的isparent属性\r\n        myDiagram.model.nodeDataArray.forEach(function(n) {\r\n            if (n.level == maxCircle && n.isparent != null) {\r\n                // delete n.isparent;\r\n                myDiagram.model.setDataProperty(n, 'isparent', null);\r\n            }\r\n        });\r\n        myDiagram.model.removeNodeData(node.data);\r\n        // go.CommandHandler.prototype.deleteSelection.call(cmd);\r\n        myDiagram.model.commitTransaction('level1');\r\n        this.groundLayout(myDiagram);\r\n        //changeTheme(myDiagram.model.modelData.currentThemeID, true);zyy\r\n      \r\n        myDiagram.model.commitTransaction('all');\r\n        var locateNode = null;\r\n        var tempArray = [\"next\",\"prev\",\"parent\"]\r\n        for(var i=0;i<tempArray.length;i++){\r\n            if(node.data[tempArray[i]]){\r\n                locateNode = myDiagram.findNodeForKey(node.data[tempArray[i]])\r\n                break;\r\n            }\r\n        }\r\n        // if(node.data.category === 'dipan'){\r\n            if (locateNode) {\r\n                // console.log('5612 locateNode................' +  locateNode)\r\n                // console.dir(locateNode)\r\n                //选中单个节点 bug问题：外圈都是临时节点的时候，无法选中 \r\n                myDiagram.select(locateNode);\r\n            } \r\n            \r\n        // }\r\n    }\r\n\r\n    deleteNode(node) {\r\n        console.log('删除节点 deleteNode')\r\n        console.log(node.data.key)\r\n        console.log(node.data)\r\n        var myDiagram  = this.diagram\r\n        var mainNode = null;\r\n            var preNode = node.data.prev ? myDiagram.findNodeForKey(node.data.prev) : null;\r\n            var nextNode = node.data.next ? myDiagram.findNodeForKey(node.data.next) : null;\r\n            var parentNode = node.data.parent ? myDiagram.findNodeForKey(node.data.parent) : null;\r\n    \r\n            // try {\r\n                // 如果有子节点，则删除所有子节点\r\n                if (node.data.isparent) {\r\n                    var firstNode = myDiagram.findNodeForKey(node.data.isparent)\r\n                    var nodes = []\r\n                    helpers.tdTravelTdpData(firstNode.data, myDiagram.model, nodes, function(data){\r\n                        return data\r\n                    })\r\n                    myDiagram.model.removeNodeDataCollection(nodes);\r\n    \r\n                    var maxCircles = this.getMaxCircle(myDiagram)\r\n                }\r\n                // 父节点存在的情况下\r\n                if (parentNode != null) {\r\n                    //当前节点为第一个子节点\r\n                    if (parentNode.data.isparent == node.data.key) {\r\n                        //如果当前节点是最后一个子节点\r\n                        if (nextNode == null) {\r\n                            myDiagram.model.setDataProperty(parentNode.data, \"isparent\", undefined);\r\n                        } else {\r\n                            myDiagram.model.setDataProperty(parentNode.data, \"isparent\", nextNode.data.key);\r\n                            myDiagram.model.setDataProperty(nextNode.data, \"prev\", undefined);\r\n                        }\r\n                    } else {\r\n                        myDiagram.model.setDataProperty(preNode.data, \"next\", nextNode == null ? null : nextNode.data.key);\r\n                        if (nextNode != null) {\r\n                            myDiagram.model.setDataProperty(nextNode.data, \"prev\", preNode.data.key);\r\n                        }\r\n                    }\r\n                }\r\n    \r\n                if(myDiagram.model.modelData.currentType == 'dipan'){\r\n                    // 删除的只剩下root节点时对root节点做处理\r\n                    var totalCount = 0;\r\n                    for(var i=0;i<myDiagram.model.nodeDataArray.length;i++){\r\n                        if(!myDiagram.model.nodeDataArray[i].istemp && !myDiagram.model.nodeDataArray[i].isGroup){\r\n                            totalCount++;\r\n                        }\r\n                        if(totalCount>1) break;\r\n                    }\r\n                    if(totalCount <= 1){  \r\n                        console.log(\"删除的只剩下root节点时对root节点做处理\")\r\n                        var dipanRoot = myDiagram.model.findNodeDataForKey(1);\r\n                        delete dipanRoot.group\r\n                    }\r\n                }\r\n            // } catch (ex) {\r\n            //     console.log(ex.message);\r\n            // }\r\n    \r\n        // }\r\n        myDiagram.isModified = true;\r\n    \r\n    \r\n    }\r\n\r\n    getMaxCircle() {\r\n        var myDiagram = this.diagram\r\n        var maxCircle = 0;\r\n        let nodeArr = [];\r\n        let nodeLevelArr = [];\r\n        let maxNodeArr = [];\r\n        let arr = [];\r\n        myDiagram.model.nodeDataArray.forEach(function(d) {\r\n            if(!d.istemp&&!d.isGroup){\r\n                nodeArr.push(d)\r\n                if(d.level){\r\n                    nodeLevelArr.push(d.level)\r\n                }\r\n            }else{\r\n                arr.push(d)\r\n            }\r\n        });\r\n        let max = Math.max.apply(null, nodeLevelArr);\r\n        // console.log(max)\r\n        nodeArr.forEach(function(node){\r\n            if(node.level === max){\r\n                maxNodeArr.push(node)\r\n            }\r\n        })\r\n        if(max ===-Infinity&&maxNodeArr.length === 0){\r\n            console.log(\"11111111111111\")\r\n            maxCircle = 0\r\n        }else if(max !== -Infinity&&maxNodeArr.length === 0){\r\n           maxCircle = max -1;\r\n        }else if(maxNodeArr.length > 0){\r\n           maxCircle = max;\r\n        }\r\n        // console.log(\"maxCircle\")\r\n        // console.log(maxCircle)\r\n        return maxCircle\r\n    }\r\n\r\n    addNewCircle(e) {\r\n        let myDiagram = this.diagram\r\n        var maxCircles = this.getMaxCircle()\r\n        var node = myDiagram.selection.first();\r\n        console.log(node.data)\r\n        if (!node) return;\r\n        if (node.data.isparent && myDiagram.findNodeForKey(node.data.isparent) && !myDiagram.findNodeForKey(node.data.isparent).visible) {\r\n            return;\r\n        }\r\n        myDiagram.model.startTransaction(\"addNewCircle\");\r\n        if (\"istemp\" in node.data && node.data.istemp) {\r\n            changeTemp2normal(myDiagram);\r\n            if (node.data.text == \"\") {\r\n               myDiagram.model.setDataProperty(node.data, \"text\", lang.trans('dce'));\r\n               //myDiagram.model.setDataProperty(node.data, \"text\", node.data.key)\r\n            }\r\n        }\r\n    \r\n        var firstnodeData = null;\r\n        if (node.data.isparent) {\r\n            firstnodeData = myDiagram.model.findNodeDataForKey(node.data.isparent);\r\n        }\r\n        if (firstnodeData != null && firstnodeData.istemp) {\r\n            myDiagram.model.setDataProperty(firstnodeData, \"istemp\", false);\r\n            myDiagram.model.setDataProperty(firstnodeData, \"text\", lang.trans('dce'));\r\n            //myDiagram.model.setDataProperty(node.data, \"text\", node.data.key)\r\n        } else {\r\n            var follower = this.addChildNodeData(node);\r\n            if (follower.level > maxCircles) {\r\n                maxCircles = follower.level;\r\n            }\r\n    \r\n            this.groundLayout(myDiagram);\r\n        }\r\n        myDiagram.model.commitTransaction(\"addNewCircle\");\r\n    }\r\n    \r\n     //modify nodeDataArray\r\n     addChildNodeData(node) {\r\n        // 去掉连线和group\r\n        console.log(\"===================================addChildNodeData:去掉连线和group、主题\")\r\n        var isautolayout = window.localStorage.getItem('isautolayout') == null ? true : window.localStorage.getItem('isautolayout') == 'true';\r\n        // var isautoselect =  window.localStorage.getItem('isautoselect') == null?true:window.localStorage.getItem('isautoselect') == 'true';\r\n        var myDiagram = node.diagram;\r\n        var result = arguments[1] ? arguments[1] : null;\r\n        var currentType = 'dipan'\r\n        //myDiagram.startTransaction();\r\n        var nextkey = (myDiagram.model.nodeDataArray.length + 1).toString();\r\n        //var follower = {key: nextkey, text: nextkey};\r\n        var follower = { key: nextkey, text: lang.trans('dce') };\r\n        //if (result != null) {\r\n        myDiagram.model.makeNodeDataKeyUnique(follower);\r\n        nextkey = follower.key;\r\n        var firstNode = null;\r\n        follower.level = node.data.level + 1;\r\n        follower.parent = node.data.key;\r\n        follower.prev = undefined;\r\n    \r\n        //如果已经有子节点\r\n        if (node.data.isparent) {\r\n            firstNode = myDiagram.model.findNodeDataForKey(node.data.isparent)\r\n            if(firstNode){\r\n                follower.next = firstNode.key;\r\n                myDiagram.model.setDataProperty(firstNode, \"prev\", follower.key);\r\n            }\r\n        }\r\n    \r\n        if (result != null) {\r\n            //只是用来填充的节点\r\n            follower.istemp = true;\r\n            follower.text = \"\";\r\n        }\r\n    \r\n        var sectotLayerThickNess  = myDiagram.model.modelData.layerThickness\r\n        console.log(\" myDiagram.model\", myDiagram.model);\r\n        // follower.fill = colorMap[follower.level % 5];\r\n        follower.dangle = node.data.dangle;\r\n        follower.dradius = node.data.dradius;\r\n        follower.sweep = node.data.sweep;\r\n        // zyy follower.loc = node.data.loc;\r\n        follower.layerThickness = sectotLayerThickNess || 100;\r\n        follower.tdDipanTextAngle = node.data.tdDipanTextAngle || 'xuanzhuan';\r\n        if (node.data.level != 0) {\r\n            follower.category = node.data.category;\r\n        }\r\n        if (node.data.category == \"Root\") {\r\n            follower.category = \"dipan\";\r\n        }\r\n    \r\n    \r\n        follower.strokeWidth = node.data.strokeWidth;\r\n        if (node.data.figure) {\r\n            follower.figure = node.data.figure;\r\n        }\r\n    \r\n        if (node.data.picture) {\r\n            follower.picture = node.data.picture;\r\n        }\r\n    \r\n        if (node.data.width) {\r\n            follower.width = node.data.width;\r\n        }\r\n        if (node.data.height) {\r\n            follower.height = node.data.height;\r\n        }\r\n        follower = applyTheme2Node(follower,myDiagram);\r\n        follower.font = node.data.font;\r\n        follower.textStroke = node.findObject(\"TEXT\").stroke;\r\n        myDiagram.model.setDataProperty(node.data, \"isparent\", nextkey);\r\n        follower.newAdd = true;\r\n        myDiagram.model.addNodeData(follower,myDiagram);\r\n        myDiagram.isModified = true;\r\n        return follower;\r\n    }\r\n    \r\n    addFollowerGround(e) {\r\n        let myDiagram = this.diagram;\r\n        if (myDiagram.selection.count == 0) return;\r\n        var node = myDiagram.selection.first();\r\n        if (node.data.key == 1) {\r\n            return;\r\n        }\r\n        if (!node) return;\r\n        var diagram = node.diagram;\r\n        // var isautolayout = window.localStorage.getItem('isautolayout') == null?true:window.localStorage.getItem('isautolayout') == 'true';\r\n        // var isautoselect =  window.localStorage.getItem('isautoselect') == null?true:window.localStorage.getItem('isautoselect') == 'true';\r\n        if (node === null || !(node instanceof go.Node) || node instanceof go.Group) return;\r\n        // root node is not allowed to add follower\r\n        // if (node.findLinksInto().count == 0) return;\r\n        myDiagram.model.startTransaction('all');\r\n        if (\"istemp\" in node.data && node.data.istemp) {\r\n            changeTemp2normal(myDiagram);\r\n            if (node.data.text == \"\") {\r\n                myDiagram.model.setDataProperty(node.data, \"text\", \"\");\r\n            }\r\n        }\r\n        // if(!isautolayout){\r\n        //   ControlAutoLayout(false);\r\n        // }else{\r\n        //   ControlAutoLayout(true);\r\n        // }\r\n        //myDiagram.model.startTransaction('addnode');\r\n        myDiagram.startTransaction('sub1');\r\n        var follower = this.addLevelNodeData(node);\r\n        myDiagram.commitTransaction('sub1');\r\n        this.groundLayout(myDiagram);\r\n        //changeTheme(myDiagram.model.modelData.currentThemeID, true);zyy颜色\r\n        myDiagram.model.commitTransaction('all');\r\n        var newnode = diagram.findNodeForData(follower);\r\n        if (newnode) {\r\n            // myDiagram.centerRect(newnode.actualBounds);\r\n            diagram.select(newnode);\r\n        }\r\n    \r\n    \r\n    }\r\n    \r\n    addLevelNodeData(node) {\r\n        console.log(\"======================去掉天盘\")\r\n        var isautolayout = window.localStorage.getItem('isautolayout') == null ? true : window.localStorage.getItem('isautolayout') == 'true';\r\n        // var isautoselect =  window.localStorage.getItem('isautoselect') == null?true:window.localStorage.getItem('isautoselect') == 'true';\r\n        var myDiagram = this.diagram;\r\n        var currentType = 'dipan';\r\n        var toKey = node.data.next;\r\n        //delete the next link\r\n    \r\n        var nextkey = (myDiagram.model.nodeDataArray.length + 1).toString();\r\n        //var follower = {key: nextkey, text: nextkey, color: \"yellow\"};\r\n    \r\n        var follower = { key: nextkey, text: lang.trans(\"dce\"), color: \"yellow\" };\r\n        myDiagram.model.makeNodeDataKeyUnique(follower);\r\n        nextkey = follower.key;\r\n        var nextnode = null;\r\n        if(toKey){\r\n            var nextnode = myDiagram.model.findNodeDataForKey(toKey);\r\n        }\r\n        myDiagram.model.startTransaction();\r\n    \r\n        follower = applyTheme2Node(follower, myDiagram);\r\n        //delete the next link\r\n        var deleteLink = null;\r\n    \r\n        //if has next node\r\n        if (nextnode != null) {\r\n            follower.next = nextnode.key;\r\n            myDiagram.model.setDataProperty(nextnode, \"prev\", follower.key);\r\n        }\r\n        follower.level = node.data.level;\r\n        follower.radius = node.data.radius;\r\n        follower.fill = node.data.fill;\r\n        //follower.fill =go.Brush.randomColor(128, 240);\r\n        follower.dangle = node.data.dangle;\r\n        follower.dradius = node.data.dradius;\r\n        // zyy follower.loc = node.data.loc;\r\n        follower.sweep = node.data.sweep;\r\n        follower.layerThickness = node.data.layerThickness || 100;\r\n        follower.tdDipanTextAngle = node.data.tdDipanTextAngle || 'xuanzhuan';\r\n    \r\n        follower.parent = node.data.parent;\r\n        follower.prev = node.data.key;\r\n        follower.strokeWidth = node.data.strokeWidth;\r\n        follower.stroke = node.data.stroke;\r\n        follower.font = node.data.font;\r\n        //follower.font = node.data.font;\r\n        follower.textStroke = node.findObject(\"TEXT\").stroke;\r\n        if (node.data.figure) {\r\n            follower.figure = node.data.figure;\r\n        }\r\n        follower.loc = node.data.loc;\r\n        if (node.data.width) {\r\n            follower.width = node.data.width;\r\n        }\r\n        if (node.data.height) {\r\n            follower.height = node.data.height;\r\n        }\r\n        follower.category = node.data.category;\r\n        follower.newAdd = true;\r\n        // add a new node\r\n        myDiagram.model.addNodeData(follower);\r\n        myDiagram.model.setDataProperty(node.data, \"next\", nextkey);\r\n    \r\n        myDiagram.model.commitTransaction();\r\n        myDiagram.isModified = true;\r\n        return follower;\r\n    }\r\n\r\n    moveWithinNodes(direction) {\r\n        var myDiagram = this.diagram;\r\n        var node = myDiagram.selection.first();\r\n        if(!node){\r\n            return;\r\n        }\r\n        if (!node) {\r\n            myDiagram.select(myDiagram.findNodeForKey(1));\r\n            return;\r\n        }\r\n        switch (direction) {\r\n            case 'left':\r\n                if (node.data.prev) {\r\n                    var prevNode = myDiagram.findNodeForKey(node.data.prev);\r\n                    if (prevNode) {\r\n                        myDiagram.select(prevNode);\r\n                    }\r\n                }\r\n                break;\r\n            case 'up':\r\n                if (node.data.parent) {\r\n                    var prevNode = myDiagram.findNodeForKey(node.data.parent);\r\n                    if (prevNode) {\r\n                        myDiagram.select(prevNode);\r\n                    }\r\n                }\r\n                break;\r\n            case 'right':\r\n                if (node.data.next) {\r\n                    var prevNode = myDiagram.findNodeForKey(node.data.next);\r\n                    if (prevNode) {\r\n                        myDiagram.select(prevNode);\r\n                    }\r\n                }\r\n                break;\r\n            case 'down':\r\n                if (node.data.isparent) {\r\n                    var prevNode = myDiagram.findNodeForKey(node.data.isparent);\r\n                    if (prevNode) {\r\n                        myDiagram.select(prevNode);\r\n                    }\r\n                }\r\n                break;\r\n        }\r\n    }\r\n\r\n    selectText(e) {\r\n        var myDiagram = this.diagram\r\n        var node = myDiagram.selection.first();\r\n        if (!node) return;\r\n        // removeNodeRemarkTips();\r\n        var tb = myDiagram.selection.first().findObject('TEXT');\r\n        if (tb) myDiagram.commandHandler.editTextBlock(tb);\r\n        helpers.simulateEnterWithAlt(e);\r\n    }\r\n\r\n    // 地盘布局\r\n    groundLayout(myDiagram) {\r\n        // var dipaninteractions = require('./dipan');\r\n        // var addChildNodeData = this.addChildNodeData\r\n        var myDiagram = this.diagram\r\n        var root = myDiagram.findNodeForKey(1);\r\n        var that = this;\r\n        if (!root) {\r\n            return;\r\n        }\r\n        root.location = new go.Point(0, 0);\r\n        var diagram = root.diagram;\r\n        if (diagram === null) return;\r\n        // make this Node the root\r\n        root.data.category = \"Root\";\r\n        // determine new distances from this new root node\r\n        //    var results = findDistances(somenode);\r\n        //    radialLayout(root);\r\n        var layout = getTdLayout(myDiagram);\r\n        if (layout == 'out') {\r\n            var maxCircles = this.getMaxCircle(myDiagram);\r\n    \r\n            var model = myDiagram.model;\r\n            helpers.tdTravelTdpData(root.data, model, [], function(d) {\r\n                if (d.level < maxCircles && typeof(d.isparent) == 'undefined') {\r\n                    var followerNode = myDiagram.findNodeForKey(d.key);\r\n                    that.addChildNodeData(followerNode, \"temp\");\r\n                }\r\n            });\r\n            changeLayout();\r\n        } else if (layout == 'inner') {\r\n            radialLayout(root,myDiagram);\r\n            // myDiagram.model.modelData.splitLayer = 1\r\n            // splitLayer = 1\r\n            // splitRadlayout(null, myDiagram.model, splitLayer);\r\n        } else {\r\n            splitLayer = myDiagram.model.modelData.splitLayer ? myDiagram.model.modelData.splitLayer : splitLayer;\r\n            splitRadlayout(null, myDiagram.model, splitLayer);\r\n        }\r\n        // setSourceOfPicture(null, 1); //重新计算背景图片宽高\r\n\r\n        function radialLayout(root,myDiagram) {\r\n            root.diagram.startTransaction(\"radial layout\");\r\n            // sort all results into Arrays of Nodes with the same distance\r\n            var nodes = {};\r\n            var maxlayer = 0;\r\n            // var globalProperties = tdGetModelData(null, myDiagram.model); //获取所有全局属性到一个对象中\r\n            // var layerThickness = parseInt(root.data.layerThickness || 100);\r\n            var layerThickness = myDiagram.model.modelData.layerThickness || 100;\r\n            var tdDipanTextAngle = root.data.tdDipanTextAngle || \"xuanzhuan\";\r\n        \r\n            root.diagram.model.setDataProperty(root.data, \"dangle\", 0);\r\n            root.diagram.model.setDataProperty(root.data, \"sweep\", 360);\r\n            root.diagram.model.setDataProperty(root.data, \"dradius\", 0);\r\n        \r\n        \r\n            myDiagram.nodes.each(function(n) {\r\n                n.data._laid = false;\r\n            });\r\n        \r\n            // now recursively position nodes, starting with the root\r\n            root.location = new go.Point(0, 0);\r\n            maxCircles = that.getMaxCircle(myDiagram);\r\n            radlay1(root, 1, 90, 360, layerThickness, tdDipanTextAngle,myDiagram);\r\n            root.diagram.commitTransaction(\"radial layout\");\r\n        }\r\n\r\n        function radlay1(node, layer, angle, sweep, layerThickness, tdDipanTextAngle,myDiagram) {\r\n            // var dipaninteractions = require('./dipan');\r\n            var addChildNodeData = that.addChildNodeData\r\n            try {\r\n                var nodes = getAllChilds(node);\r\n            } catch (e) {\r\n                console.error(e);\r\n            }\r\n            var parentKey = node.data.key;\r\n        \r\n            if (node.data.category >= 3) {\r\n                return;\r\n            }\r\n            // var globalProperties = tdGetModelData(null, myDiagram.model);   //获取所有全局属性到一个对象中\r\n            // var layerThickness = parseInt(globalProperties['layerThickness']);\r\n            // var tdDipanTextAngle = globalProperties['tdDipanTextAngle'];\r\n        \r\n            var found = nodes.length;\r\n            //if (found === 0) return;\r\n            if (found === 0 && node.data.level >= maxCircles) return;\r\n            if (found === 0) {\r\n                var newdata = that.addChildNodeData(node, \"temp\");\r\n        \r\n                var newnode = myDiagram.findNodeForData(newdata);\r\n                nodes.push(newnode);\r\n                //node.diagram.model.setDataProperty(newdata, \"istemp\", true);\r\n                found++;\r\n            }\r\n            var rootNode = myDiagram.model.findNodeDataForKey(1);\r\n            var rootRadius = parseInt(rootNode.layerThickness);\r\n            var radius = rootRadius + (layer - 1) * layerThickness;\r\n            var separator = sweep / found;\r\n            var start = angle - sweep / 2 + separator / 2;\r\n            for (var i = 0; i < found; i++) {\r\n                var n = nodes[i];\r\n                var a = start + i * separator;\r\n                var p = new go.Point(radius + layerThickness / 2, 0);\r\n                if (n.data._laid) {\r\n                    radlay1(n, layer + 1, n.data.dangle, n.data.sweep, layerThickness, tdDipanTextAngle,myDiagram);\r\n                    continue;\r\n                }\r\n                p.rotate(a);\r\n                // n.location = p;\r\n                n.diagram.model.setDataProperty(n.data, \"loc\", go.Point.stringify(p));\r\n                n.data._laid = true;\r\n                n.diagram.model.setDataProperty(n.data, \"dangle\", a);\r\n                n.diagram.model.setDataProperty(n.data, \"sweep\", separator);\r\n                n.diagram.model.setDataProperty(n.data, \"dradius\", radius);\r\n                n.diagram.model.setDataProperty(n.data, \"layerThickness\", layerThickness);\r\n                \r\n                // make sure text is never upside down\r\n                var label = n.findObject(\"TEXT\");\r\n                if (label !== null) {\r\n                    label.angle = ((a > 90 && a < 270 || a < -90) ? 180 : 0);\r\n                    //n.diagram.model.setDataProperty(n.data, \"textAngle\", label.angle);\r\n                    if (tdDipanTextAngle == 'xuanzhuan') { //文字方向旋转\r\n                        n.diagram.model.setDataProperty(n.data, \"textAngle\", label.angle);\r\n                    }\r\n                    if (tdDipanTextAngle == 'fangshe') { //文字方向旋转\r\n                        n.diagram.model.setDataProperty(n.data, \"textAngle\", 90);\r\n                    }\r\n                    if (tdDipanTextAngle == 'zhengli') { //文字方向正向\r\n                        n.diagram.model.setDataProperty(n.data, \"textAngle\", -a);\r\n                    }\r\n                    // console.log(\"text:\"+n.data.text+\",textangle:\"+n.data.textAngle+\";nodeAngle=\"+a  );\r\n                }\r\n                if (n.data.key == \"1\") {\r\n                    n.diagram.model.setDataProperty(n.data, \"textAngle\", 0);\r\n                }\r\n                radlay1(n, layer + 1, a, sweep / found, layerThickness, tdDipanTextAngle,myDiagram);\r\n            }\r\n        }\r\n\r\n        function getTdLayout(myDiagram) {\r\n            return myDiagram.model.modelData.layout ? myDiagram.model.modelData.layout : 'inner';\r\n        }\r\n\r\n        function getAllChilds(parentNode) {\r\n            try {\r\n                if (!parentNode.data.isparent) {\r\n                    return [];\r\n                }\r\n                var nodes = [],\r\n                    tmpDataObj;\r\n                if (!parentNode.data.isparent) return [];\r\n                var firstNode = parentNode.diagram.findNodeForKey(parentNode.data.isparent);\r\n                tmpDataObj = firstNode;\r\n                if (tmpDataObj) {\r\n                    nodes.push(firstNode);\r\n                    while (tmpDataObj.data.next) {\r\n                        tmpDataObj = parentNode.diagram.findNodeForKey(tmpDataObj.data.next);\r\n                        if (!tmpDataObj) break;\r\n                        nodes.push(tmpDataObj);\r\n                    }\r\n                }\r\n                return nodes;\r\n            } catch (e) {\r\n                console.error(e);\r\n            }\r\n        }\r\n        \r\n       // 外圈均分布局\r\n        function splitRadlayout(nodeData, model) {\r\n            if (nodeData == null) {\r\n                nodeData = model.findNodeDataForKey(1);\r\n            }\r\n            var rootNode = model.findNodeDataForKey(1);\r\n            var rootRadius = parseInt(rootNode.layerThickness);\r\n            console.log(\"rootRadius\", rootRadius);\r\n            model.nodeDataArray.forEach(function(d) {\r\n                d._laid = false;\r\n            });\r\n            // var globalProperties = tdGetModelData(null, myDiagram.model); //获取所有全局属性到一个对象中\r\n            // var root = getSubGraphRoot(nodeData, myDiagram);\r\n            // var layerThickness = parseInt(nodeData.layerThickness || 100);\r\n            var layerThickness = myDiagram.model.modelData.layerThickness;\r\n\r\n            var tdDipanTextAngle = nodeData.tdDipanTextAngle || \"xuanzhuan\";\r\n            var maxCircle = arguments[2] ? arguments[2] : getMaxCircle(myDiagram);\r\n            var result = getNumOfLevelChild(nodeData, model, maxCircle);\r\n            var childNum = result.count;\r\n            if (childNum <= 0) return;\r\n            var sweepUnit = 360.0 / childNum;\r\n            //setLevelSectionIndex(nodeData, model);\r\n\r\n            var length = model.nodeDataArray.length;\r\n\r\n            var collector = [];\r\n            if (nodeData.isparent) {\r\n                var firstChild = model.findNodeDataForKey(nodeData.isparent);\r\n            } else {\r\n                return;\r\n            }\r\n\r\n            helpers.tdTravelTdpData(firstChild, model, collector, function(d) {\r\n                return d;\r\n            });\r\n            var tmpArray;\r\n\r\n            for (var level = 1; level <= maxCircle; level++) {\r\n                tmpArray = _.filter(collector, function(item) {\r\n                    return (!item.isGroup && item.level == level);\r\n                });\r\n                var angle = 0;\r\n                var start = 0;\r\n                var radius = rootRadius + (level - 1) * layerThickness;\r\n                for (var index = 0; index < tmpArray.length; index++) {\r\n                    var data = tmpArray[index];\r\n                    data._laid = true;\r\n                    if (data.key == \"1\") {\r\n                        model.setDataProperty(n.data, \"textAngle\", 0);\r\n                        continue;\r\n                    }\r\n                    result = getNumOfLevelChild(data, model, maxCircle);\r\n                    childNum = result.count;\r\n                    if (childNum < 0) {\r\n                        continue;\r\n                    }\r\n                    if (childNum == 0) {\r\n                        var separator = sweepUnit;\r\n                    } else {\r\n                        var separator = childNum * sweepUnit;\r\n                    }\r\n                    if (index == 0) {\r\n                        start = -90;\r\n                    }\r\n\r\n                    angle = start + separator / 2;\r\n                    start += separator;\r\n                    var a = angle;\r\n                    var p = new go.Point(radius + layerThickness / 2, 0);\r\n                    // console.log('layerThickness', layerThickness, 'radius:', radius)\r\n                    p.rotate(a);\r\n                    // n.location = p;\r\n                    model.setDataProperty(data, \"loc\", go.Point.stringify(p));\r\n                    model.setDataProperty(data, \"dangle\", a);\r\n                    model.setDataProperty(data, \"sweep\", separator);\r\n                    model.setDataProperty(data, \"dradius\", radius);\r\n                    model.setDataProperty(data, \"layerThickness\", layerThickness);\r\n                    \r\n                    // make sure text is never upside down\r\n                    // var label = myDiagram.findNodeForKey(nodeData.key).findObject(\"TEXT\");\r\n                    //if (label !== null) {\r\n                    //label.angle = ((a > 90 && a < 270 || a < -90) ? 180 : 0);\r\n                    var tmpAngle = ((a > 90 && a < 270 || a < -90) ? 180 : 0);\r\n                    //if(a>80 && a < 100){\r\n                    //    label.angle = -a;\r\n                    //}\r\n                    if (tdDipanTextAngle == 'xuanzhuan') { //文字方向旋转\r\n                        model.setDataProperty(data, \"textAngle\", tmpAngle);\r\n                    }\r\n                    if (tdDipanTextAngle == 'fangshe') { //文字方向旋转\r\n                        var tmpAngle = (a > 0 && a < 180 || a < -180) ? 180 : 0;\r\n                        model.setDataProperty(data, \"textAngle\", 90);\r\n\r\n                        // label.width = 100;\r\n                    }\r\n                    //}\r\n                    if (tdDipanTextAngle == 'zhengli') { //文字方向正向\r\n                        model.setDataProperty(data, \"textAngle\", -a);\r\n                    }\r\n\r\n                }\r\n\r\n            }\r\n\r\n            // 指定层均分会调用内圈均分的函数\r\n            console.log()\r\n            if (maxCircle < this.getMaxCircle(myDiagram)) {\r\n                radlay1(myDiagram.findNodeForKey(1), 1, 90, 360, layerThickness, tdDipanTextAngle);\r\n            }\r\n        }\r\n \r\n        //获取node指定层子节点的个数,isAll是否是所有子孙\r\n        function getNumOfLevelChild(nodeData, model, level, isAll) {\r\n            var result = { count: 0, list: [] },\r\n                flag = false;\r\n            try {\r\n                if (nodeData.key == 1) {\r\n                    model.nodeDataArray.forEach(function(d) {\r\n                        if (isAll) {\r\n                            flag = d.level >= level\r\n                        } else {\r\n                            flag = d.level == level\r\n                        }\r\n                        if (!_.has(d, 'isGroup') && flag) {\r\n                            result.count += 1;\r\n                            result.list.push(d);\r\n                        }\r\n                    })\r\n                } else {\r\n                    //var result = 0;\r\n                    if (nodeData.isparent) {\r\n                        var firstChild = model.findNodeDataForKey(nodeData.isparent);\r\n                    } else {\r\n                        return result;\r\n                    }\r\n                    helpers.tdTravelTdpData(firstChild, model, [], function(d) {\r\n                        if (isAll) {\r\n                            flag = d.level >= level\r\n                        } else {\r\n                            flag = d.level == level\r\n                        }\r\n                        if (!_.has(d, 'isGroup') && flag) {\r\n                            result.count += 1;\r\n                            result.list.push(d);\r\n                        }\r\n                    });\r\n                }\r\n            } catch (e) {\r\n\r\n\r\n                console.log(e);\r\n                return { count: 0, list: [] };\r\n            }\r\n\r\n            return result;\r\n        }\r\n\r\n    }\r\n\r\n    //快捷键\r\n    dokeyDownFnq (diagram) {\r\n        var myDiagram = this.diagram;\r\n        var e = myDiagram.lastInput;\r\n        var cmd = myDiagram.commandHandler;\r\n        var node = myDiagram.selection.first();\r\n\r\n        // if (e.event.altKey) {\r\n        //     if (e.key == \"Q\") {\r\n        //         autoLayoutAll();\r\n        //         return;\r\n        //     } else if (e.key == \"R\") {\r\n        //         centerNode();\r\n        //         return;\r\n        //     } else if (e.key == \"C\") {\r\n        //         centerCurrentNode();\r\n        //         return;\r\n        //     } else if (e.key == \"A\") {\r\n        //         zoomToFit();\r\n        //         return;\r\n        //     }\r\n        // }\r\n        if (e.event.keyCode >= 65 && e.event.keyCode <= 90 && !e.event.altKey && !e.event.ctrlKey && !e.event.shiftKey) {\r\n            // e.bubbles = true;\r\n            e.bubbles = false;\r\n            this.selectText(e, diagram);\r\n            return true;\r\n        }\r\n\r\n        if (e.event.keyCode === 13) { // could also check for e.control or e.shift\r\n            if (node && node.data.category == 'Root' ) {\r\n                this.addFollowerGround();\r\n            } else if(node && node.data.category == 'dipan'){\r\n                this.addFollowerGround();\r\n            }\r\n\r\n        } else if (e.event.keyCode === 9) { // could also check for e.control or e.shift\r\n            if (node && node.data.category == 'Root') {\r\n\r\n                this.addNewCircle();\r\n            } else if(node && node.data.category == 'dipan'){\r\n                this.addNewCircle();\r\n            }\r\n        } else if (e.key === \"t\") { // could also check for e.control or e.shift\r\n            if (cmd.canCollapseSubGraph()) {\r\n                cmd.collapseSubGraph();\r\n            } else if (cmd.canExpandSubGraph()) {\r\n                cmd.expandSubGraph();\r\n            }\r\n        } else if (e.key == \"Del\") {\r\n            if (myDiagram.selection.count == 0) {\r\n                return;\r\n            }\r\n            e.diagram.commandHandler.deleteSelection();\r\n        } else if (e.event.keyCode == 113) { //F2,覆盖地盘默认行为\r\n            this.selectText();\r\n        } else if (e.event.keyCode == 37) { //左\r\n            this.moveWithinNodes('left');\r\n        } else if (e.event.keyCode == 38) { //上\r\n            this.moveWithinNodes('up');\r\n        } else if (e.event.keyCode == 39) { //右\r\n            this.moveWithinNodes('right');\r\n        } else if (e.event.keyCode == 40) { //下\r\n            this.moveWithinNodes('down');\r\n        } else {\r\n            // call base method with no arguments\r\n            go.CommandHandler.prototype.doKeyDown.call(cmd);\r\n        }\r\n        e.bubbles = false; //阻止事件冒泡到dom\r\n    }\r\n    \r\n    // 生成base64图片\r\n    downloadImage() {\r\n        var myDiagram = this.diagram;\r\n        var imgdata = myDiagram.makeImageData({\r\n            scale: 1.0,\r\n            background: \"#ffffff\",\r\n            type: \"image/png\",\r\n            maxSize: new go.Size(9000, 9000)\r\n        });\r\n\r\n        return imgdata;\r\n    }\r\n}\r\n\r\n//临时扇区转换为正式扇区\r\nfunction changeTemp2normal(myDiagram) {\r\n\r\n    var node = myDiagram.selection.first();\r\n    if (node.data.istemp) {\r\n        myDiagram.model.startTransaction();\r\n        var tmpNode = myDiagram.findNodeForKey(node.data.parent);\r\n        myDiagram.model.setDataProperty(node.data, \"istemp\", undefined);\r\n        var lastNode = null; //记录这一级扇区\r\n        while (tmpNode) {\r\n            if (tmpNode.data.istemp) {\r\n                myDiagram.model.setDataProperty(tmpNode.data, \"istemp\", undefined);\r\n                myDiagram.model.setDataProperty(tmpNode.data, \"text\", \"双击编辑内容\");\r\n                lastNode = tmpNode;\r\n            } else {\r\n                if (lastNode) {\r\n                    myDiagram.model.setDataProperty(tmpNode.data, \"isparent\", lastNode.data.key);\r\n                }\r\n                break;\r\n            }\r\n            tmpNode = myDiagram.findNodeForKey(tmpNode.data.parent);\r\n        }\r\n        myDiagram.model.commitTransaction();\r\n        myDiagram.isModified = true;\r\n    }\r\n}\r\n\r\n\r\nfunction computeEffectiveCollection(parts) {\r\n    var coll = new go.Set(go.Part);\r\n    var node = parts.first();\r\n    if (node) {\r\n        helpers.travelParts(node, function(p) {\r\n            coll.add(p);\r\n        })\r\n    } else {\r\n        coll.addAll(parts);\r\n    }\r\n    var tool = this;\r\n\r\n    return go.DraggingTool.prototype.computeEffectiveCollection.call(this, coll);\r\n};\r\n\r\nfunction applyTheme2Node(follower, myDiagram) {\r\n    var tdCurrentTheme = myDiagram.__trtd.tdCurrentTheme\r\n    // follower.strokeWidth = tdCurrentTheme.borderWidth;\r\n    // follower.stroke = tdCurrentTheme.borderColor;\r\n    myDiagram.model.setDataProperty(follower, 'strokeWidth', tdCurrentTheme.borderWidth);\r\n    myDiagram.model.setDataProperty(follower, 'stroke', tdCurrentTheme.borderColor);\r\n    if (tdCurrentTheme.colorRange == null) {\r\n        // follower.fill = randomColor({luminosity: 'light', count: 1})[0];\r\n        myDiagram.model.setDataProperty(follower, 'fill', randomColor({ luminosity: 'light', count: 1 })[0]);\r\n    } else if (tdCurrentTheme.colorRange instanceof Array) {\r\n        var tmpColor = \"white\";\r\n        if (follower.level >= tdCurrentTheme.colorRange.length) {\r\n            tmpColor = tdCurrentTheme.colorRange[follower.level % tdCurrentTheme.colorRange.length];\r\n        } else {\r\n            tmpColor = tdCurrentTheme.colorRange[follower.level];\r\n        }\r\n        // follower.fill = tmpColor;\r\n        myDiagram.model.setDataProperty(follower, 'fill', tmpColor);\r\n    } else if (tdCurrentTheme.colorRange == \"random\") {\r\n        //层级颜色一样的随机色\r\n        if (follower.prev) {\r\n            var preNode = myDiagram.findNodeForKey(follower.prev);\r\n            if (preNode) {\r\n                // follower.fill = preNode.data.fill;\r\n                myDiagram.model.setDataProperty(follower, 'fill', preNode.data.fill);\r\n            } else {\r\n                // follower.fill = randomColor({luminosity: 'light', count: 1})[0];\r\n                myDiagram.model.setDataProperty(follower, 'fill', randomColor({ luminosity: 'light', count: 1 })[0]);\r\n            }\r\n\r\n        } else {\r\n            // follower.fill = randomColor({luminosity: 'light', count: 1})[0];\r\n            myDiagram.model.setDataProperty(follower, 'fill', randomColor({ luminosity: 'light', count: 1 })[0]);\r\n        }\r\n    } else {\r\n        // follower.fill = \"rgba(0,0,0,0)\";\r\n        if (tdCurrentTheme.colorRange == \"white\") {\r\n            myDiagram.model.setDataProperty(follower, 'fill', \"white\");\r\n        } else {\r\n            myDiagram.model.setDataProperty(follower, 'fill', \"rgba(0,0,0,0)\");\r\n        }\r\n\r\n    }\r\n    return follower;\r\n}\r\n\r\n//生成地盘的figure形状\r\nfunction makeAnnularWedge(data, layerThickness) {\r\n    var sweep = data.sweep ? data.sweep : 360;\r\n    var layerThickness = data.layerThickness || 100;\r\n    var radius = data.dradius ? data.dradius : 100;\r\n    var p = new go.Point(radius + layerThickness, 0).rotate(-sweep / 2);\r\n    var q = new go.Point(radius, 0).rotate(sweep / 2);\r\n    var geo = new go.Geometry()\r\n        .add(new go.PathFigure(p.x, p.y)\r\n            .add(new go.PathSegment(go.PathSegment.Arc, -sweep / 2, sweep, 0, 0, radius + layerThickness, radius + layerThickness))\r\n            .add(new go.PathSegment(go.PathSegment.Line, q.x, q.y))\r\n            .add(new go.PathSegment(go.PathSegment.Arc, sweep / 2, -sweep, 0, 0, radius, radius).close()));\r\n    geo.normalize();\r\n    return geo;\r\n}\r\n\r\nfunction getRootNodeData(model) {\r\n    var root = null;\r\n    root = model.nodeDataArray.find((o)=>{\r\n        if(!o.isGroup && o.category == \"Root\" && o.level == 0){\r\n            return true;\r\n        }\r\n    })\r\n\r\n    return root;\r\n}\r\n\r\n\r\n\r\n\r\n\r\n// function cxcommand (obj, val) {\r\n//     var diagram = obj.diagram;\r\n//     var myDiagram = obj.diagram;\r\n//     if (!(diagram.currentTool instanceof go.ContextMenuTool)) return;\r\n//     switch (val) {\r\n//         // case \"Paste\": diagram.commandHandler.pasteSelection(diagram.lastInput.documentPoint); break;\r\n//         case \"addChildNodeMenu\":\r\n//             tdAddChildNode(obj);\r\n//             break;\r\n//         case \"addLevelNodeMenu\":\r\n//             tdAddLevelNode(obj);\r\n//             break;\r\n//         case \"changeDipanBgMenu\":\r\n//             changeDipanBackgroundImg();\r\n//             break;\r\n//         case \"removeDipanBgMenu\":\r\n//             removeDipanBackgroundImg(obj);\r\n//             break;\r\n//         case \"deleteNodeMenu\":\r\n//             myDiagram.toolManager.textEditingTool.doCancel();\r\n//             myDiagram.commandHandler.deleteSelection();\r\n//             break;\r\n//         case \"addNodePictureMenu\":\r\n//             // jQuery(\"#insertimage\").modal('show');\r\n//             // document.getElementById('insertimage').modal('show');\r\n//             break; //特殊处理\r\n//         case \"removeNodePictureMenu\":\r\n//             removeNodePicture(obj);\r\n//             break;\r\n//         case \"clearNodeTextMenu\":\r\n//             var node = myDiagram.selection.first();\r\n//             if (node) {\r\n//                 myDiagram.startTransaction();\r\n//                 myDiagram.model.setDataProperty(node.data, \"text\", \"\");\r\n//                 myDiagram.commitTransaction();\r\n//             };\r\n//             break;\r\n//         case \"locateRootNodeMenu\":\r\n//             centerNode(obj);\r\n//             break;\r\n//         case \"showAllNodesMenu\":\r\n//             zoomToFit(obj);\r\n//             break;\r\n//         case \"removeOutCycleMenu\":\r\n//             removeOutCycle(obj);\r\n//             break;\r\n//         case \"centerPictureMenu\":\r\n//             centerPicture(obj);\r\n//             break;\r\n//         case \"equalWidthHeightPictureMenu\":\r\n//             equalWidthHeightPicture(obj);\r\n//             break;\r\n//         case \"bringToTopMenu\":\r\n//             bringToLayer(\"Foreground\", obj);\r\n//             break;\r\n//         case \"bringToBackgroundMenu\":\r\n//             bringToLayer(\"Background\", obj);\r\n//             break;\r\n//         case \"bringUpMenu\":\r\n//             bringToLayer(null, obj);\r\n//             break;\r\n//         case \"layoutGroupMenu\":\r\n//             autoLayoutAll(true, obj);\r\n//             break;\r\n\r\n//         case \"insertTextMenu\":\r\n//             insertTextNode(obj);\r\n//             break;\r\n//         case \"duplicateNode\":\r\n//             duplicateNode(obj);\r\n//             break; // 复制节点\r\n//         case \"insertTianpanMenu\":\r\n//             myDiagram.toolManager.clickCreatingTool.insertPart(myDiagram.lastInput.documentPoint);\r\n//             break;\r\n//         //固定节点\r\n//         case \"fixPictureMenu\":   \r\n//         case \"activePictureMenu\":\r\n//             //var node = myDiagram.findPartAt(myDiagram.lastInput.documentPoint, false);\r\n//             var node = myDiagram.selection.first();\r\n//             myDiagram.startTransaction();\r\n//             myDiagram.model.setDataProperty(node.data, \"selectable\", node.data.selectable != undefined ? (!node.data.selectable) : false);\r\n//             myDiagram.commitTransaction();\r\n//             break;\r\n//         case \"orderChildNode\":\r\n//             orderChildNode(obj);\r\n//             break;\r\n//         case \"clearOrderChildNode\":\r\n//             clearOrderChildNode(obj);\r\n//             break;\r\n//         case \"delYunpanAxis\":\r\n//             yunpan.yunpandel(obj);\r\n//             break;\r\n//         case \"addYunpanAxis\":\r\n//             var node = myDiagram.selection.first();\r\n//             if(node.data.loc.split(\" \")[1] === \"0\"&&node.data.category!==\"x\"){\r\n//                 yunpan.addy(obj)\r\n//             }else if(node.data.loc.split(\" \")[0] === \"0\"&&node.data.category!==\"y\"){\r\n//                 yunpan.addx(obj)\r\n//             }; \r\n//             break;\r\n//         case \"addLevelDipanNode\":\r\n//             if(myDiagram.selection.first().data.istemp){\r\n//                 return\r\n//             }\r\n//             obj.addFollowerGround();\r\n//             break;\r\n//         case \"addChildDipanNode\":\r\n//             var node = myDiagram.selection.first();\r\n//                 if(node.data.parent){\r\n//                     var parentNode = node.diagram.findNodeForKey(node.data.parent);\r\n//                     if(parentNode.data.istemp){\r\n//                         return\r\n//                     }\r\n//                 }\r\n//             obj.addNewCircle(obj);\r\n//             break;\r\n//         case \"deleteDipanNode\":\r\n//         // myDiagram.commandHandler.deleteSelection();\r\n//         obj.deleteSelection();\r\n//         break;\r\n//     }\r\n//     diagram.currentTool.stopTool();\r\n// }\r\n\r\n\r\n// 清除节点的关系属性，比如父节点索引，子节点索引等\r\nfunction clearRelProperty(data) {\r\n    data.level = 0;\r\n    delete data.prev;\r\n    delete data.isparent;\r\n    delete data.next;\r\n    delete data.group;\r\n    delete data.parent;\r\n    return data;\r\n}\r\n\r\n// 复制单个节点\r\nfunction duplicateNode(obj) {\r\n    var myDiagram = obj.diagram;\r\n    var node = myDiagram.selection.first();\r\n    if (!node) return;\r\n    myDiagram.startTransaction();\r\n    var newData = myDiagram.model.copyNodeData(node.data);\r\n    var location = node.location.copy();\r\n    location.offset(50, -50);\r\n    newData.loc = go.Point.stringify(location);\r\n    newData.level = 0;\r\n    newData = clearRelProperty(newData);\r\n    myDiagram.model.addNodeData(newData);\r\n    myDiagram.commitTransaction();\r\n}\r\n\r\nTrtd.go = go;\r\n\r\n// if (typeof window !== 'undefined') {\r\n// \tif(window.Trtd){\r\n//         window.Trtd.dipan = Trtd;\r\n//     } else{\r\n//         window.Trtd = {\r\n//             dipan: Trtd\r\n//         }\r\n//     }\r\n// }\r\n\r\n// export default Trtd;\r\nmodule.exports = Trtd;\n\n\n// WEBPACK FOOTER //\n// ./src/diagram/dipan.js","\r\nvar Trtd_tianpan = require('./tianpan')\r\nvar createNodeTemplate = require('../nodeTemplate/createNodeTemplate')\r\nvar createPictureSingleNodeTemplate = require('../nodeTemplate/createPictureSingleNodeTemplate')\r\nvar createPictureNodeTemplate = require('../nodeTemplate/createPictureNodeTemplate')\r\nvar createTextNodeTemplate = require('../nodeTemplate/createTextNodeTemplate')\r\nvar createNodeSvgTemplate = require('../nodeTemplate/createNodeSvgTemplate')\r\n\r\n\r\nclass Trtd extends Trtd_tianpan {\r\n    constructor(div, config){\r\n        super(div, config)\r\n\t\t// this.config = config;\r\n\t\t// this.modelChangedListener = config.modelChangedListener;\r\n\t\t// this.type = config.type;\r\n\t\t// this.diagram = {};\r\n        // this.model = config.model;\r\n        // this.tpid = config.tpid||Date.now();\r\n        // this.InitialFontSize = 18\r\n        // this.tdCurrentTheme = {\r\n        //     id: 6,\r\n        //     borderWidth: 2,\r\n        //     borderColor: \"black\",\r\n        //     groupColor: \"rgba(0,0,0,0)\",\r\n        //     groupStroke: \"rgba(0,0,0,0)\",\r\n        //     groupStrokeWidth: 0,\r\n        //     themeName: \"黑白\",\r\n        //     linkColor: \"black\",\r\n        //     colorRange: \"white\"\r\n        // }\r\n\t\t// // 初始化diagram\r\n\t\t// this.initDiagram(div, config);\r\n\t\t// this.initListener();\r\n\t\t// // Then you will need to construct a Model (usually a GraphLinksModel) for the Diagram, initialize its data by setting its Model.nodeDataArray and other properties, and then set the diagram's model.\r\n        // if(this.model){\r\n        //     this.initModel();\r\n        // }\r\n    }\r\n\r\n     /**\r\n     * 添加节点模板\r\n     */\r\n    addNodeTemplate(){\r\n\r\n\r\n        // myDiagram.nodeTemplateMap.add(\"dipan\", this.createDipanTemplate(layerThickness,tdDipanTextAngle));\r\n        // myDiagram.nodeTemplateMap.add(\"Root\", this.getDipanRootTemplate(layerThickness));\r\n        // myDiagram.nodeTemplateMap.add(\"text\", );\r\n        var myDiagram = this.diagram\r\n        myDiagram.nodeTemplateMap.add(\"0\", createNodeTemplate(this.diagram));\r\n        myDiagram.nodeTemplateMap.add(\"1\", createNodeTemplate(this.diagram));\r\n        myDiagram.nodeTemplateMap.add(\"2\", createNodeTemplate(this.diagram));\r\n        myDiagram.nodeTemplateMap.add(\"3\", createPictureSingleNodeTemplate(this.diagram));\r\n        myDiagram.nodeTemplateMap.add(\"4\", createPictureNodeTemplate(this.diagram));\r\n        myDiagram.nodeTemplateMap.add(\"text\", createTextNodeTemplate(this.diagram));\r\n        myDiagram.nodeTemplateMap.add(\"\", createNodeTemplate(this.diagram));\r\n\r\n        myDiagram.nodeTemplateMap.add(\"8\",createNodeSvgTemplate(this.diagram));\r\n\r\n        \r\n    }\r\n}\r\n\r\n// export default Trtd;\r\nmodule.exports = Trtd;\n\n\n// WEBPACK FOOTER //\n// ./src/diagram/jin.js","\r\nvar Trtd_tianpan = require('./tianpan')\r\nvar createNodeTemplate = require('../nodeTemplate/createNodeTemplate')\r\nvar createPictureSingleNodeTemplate = require('../nodeTemplate/createPictureSingleNodeTemplate')\r\nvar createPictureNodeTemplate = require('../nodeTemplate/createPictureNodeTemplate')\r\nvar createTextNodeTemplate = require('../nodeTemplate/createTextNodeTemplate')\r\nvar createNodeSvgTemplate = require('../nodeTemplate/createNodeSvgTemplate')\r\n\r\n\r\nclass Trtd extends Trtd_tianpan {\r\n    constructor(div, config){\r\n        super(div, config)\r\n\t\t// this.config = config;\r\n\t\t// this.modelChangedListener = config.modelChangedListener;\r\n\t\t// this.type = config.type;\r\n\t\t// this.diagram = {};\r\n        // this.model = config.model;\r\n        // this.tpid = config.tpid||Date.now();\r\n        // this.InitialFontSize = 18\r\n        // this.tdCurrentTheme = {\r\n        //     id: 6,\r\n        //     borderWidth: 2,\r\n        //     borderColor: \"black\",\r\n        //     groupColor: \"rgba(0,0,0,0)\",\r\n        //     groupStroke: \"rgba(0,0,0,0)\",\r\n        //     groupStrokeWidth: 0,\r\n        //     themeName: \"黑白\",\r\n        //     linkColor: \"black\",\r\n        //     colorRange: \"white\"\r\n        // }\r\n\t\t// // 初始化diagram\r\n\t\t// this.initDiagram(div, config);\r\n\t\t// this.initListener();\r\n\t\t// // Then you will need to construct a Model (usually a GraphLinksModel) for the Diagram, initialize its data by setting its Model.nodeDataArray and other properties, and then set the diagram's model.\r\n        // if(this.model){\r\n        //     this.initModel();\r\n        // }\r\n    }\r\n\r\n     /**\r\n     * 添加节点模板\r\n     */\r\n    addNodeTemplate(){\r\n\r\n        // myDiagram.nodeTemplateMap.add(\"dipan\", this.createDipanTemplate(layerThickness,tdDipanTextAngle));\r\n        // myDiagram.nodeTemplateMap.add(\"Root\", this.getDipanRootTemplate(layerThickness));\r\n        // myDiagram.nodeTemplateMap.add(\"text\", );\r\n        var myDiagram = this.diagram\r\n        myDiagram.nodeTemplateMap.add(\"0\", createNodeTemplate(this.diagram));\r\n        myDiagram.nodeTemplateMap.add(\"1\", createNodeTemplate(this.diagram));\r\n        myDiagram.nodeTemplateMap.add(\"2\", createNodeTemplate(this.diagram));\r\n        myDiagram.nodeTemplateMap.add(\"3\", createPictureSingleNodeTemplate(this.diagram));\r\n        myDiagram.nodeTemplateMap.add(\"4\", createPictureNodeTemplate(this.diagram));\r\n        myDiagram.nodeTemplateMap.add(\"text\", createTextNodeTemplate(this.diagram));\r\n        myDiagram.nodeTemplateMap.add(\"\", createNodeTemplate(this.diagram));\r\n\r\n        myDiagram.nodeTemplateMap.add(\"8\",createNodeSvgTemplate(this.diagram));\r\n\r\n        \r\n    }\r\n}\r\n\r\n// export default Trtd;\r\nmodule.exports = Trtd;\n\n\n// WEBPACK FOOTER //\n// ./src/diagram/huo.js","\r\nvar Trtd_tianpan = require('./tianpan')\r\nvar createNodeTemplate = require('../nodeTemplate/createNodeTemplate')\r\nvar createPictureSingleNodeTemplate = require('../nodeTemplate/createPictureSingleNodeTemplate')\r\nvar createPictureNodeTemplate = require('../nodeTemplate/createPictureNodeTemplate')\r\nvar createTextNodeTemplate = require('../nodeTemplate/createTextNodeTemplate')\r\nvar createNodeSvgTemplate = require('../nodeTemplate/createNodeSvgTemplate')\r\n\r\n\r\nclass Trtd extends Trtd_tianpan {\r\n    constructor(div, config){\r\n        super(div, config)\r\n\t\t// this.config = config;\r\n\t\t// this.modelChangedListener = config.modelChangedListener;\r\n\t\t// this.type = config.type;\r\n\t\t// this.diagram = {};\r\n        // this.model = config.model;\r\n        // this.tpid = config.tpid||Date.now();\r\n        // this.InitialFontSize = 18\r\n        // this.tdCurrentTheme = {\r\n        //     id: 6,\r\n        //     borderWidth: 2,\r\n        //     borderColor: \"black\",\r\n        //     groupColor: \"rgba(0,0,0,0)\",\r\n        //     groupStroke: \"rgba(0,0,0,0)\",\r\n        //     groupStrokeWidth: 0,\r\n        //     themeName: \"黑白\",\r\n        //     linkColor: \"black\",\r\n        //     colorRange: \"white\"\r\n        // }\r\n\t\t// // 初始化diagram\r\n\t\t// this.initDiagram(div, config);\r\n\t\t// this.initListener();\r\n\t\t// // Then you will need to construct a Model (usually a GraphLinksModel) for the Diagram, initialize its data by setting its Model.nodeDataArray and other properties, and then set the diagram's model.\r\n        // if(this.model){\r\n        //     this.initModel();\r\n        // }\r\n    }\r\n\r\n     /**\r\n     * 添加节点模板\r\n     */\r\n    addNodeTemplate(){\r\n        var myDiagram = this.diagram\r\n\r\n        myDiagram.nodeTemplateMap.add(\"0\", createNodeTemplate(this.diagram));\r\n        myDiagram.nodeTemplateMap.add(\"1\", createNodeTemplate(this.diagram));\r\n        myDiagram.nodeTemplateMap.add(\"2\", createNodeTemplate(this.diagram));\r\n        myDiagram.nodeTemplateMap.add(\"3\", createPictureSingleNodeTemplate(this.diagram));\r\n        myDiagram.nodeTemplateMap.add(\"4\", createPictureNodeTemplate(this.diagram));\r\n        myDiagram.nodeTemplateMap.add(\"text\", createTextNodeTemplate(this.diagram));\r\n        myDiagram.nodeTemplateMap.add(\"\", createNodeTemplate(this.diagram));\r\n\r\n        myDiagram.nodeTemplateMap.add(\"8\",createNodeSvgTemplate(this.diagram));\r\n\r\n        \r\n    }\r\n}\r\n\r\n\r\n// export default Trtd;\r\nmodule.exports = Trtd;\n\n\n// WEBPACK FOOTER //\n// ./src/diagram/shui.js","\r\nvar Trtd_tianpan = require('./tianpan')\r\nvar $ = go.GraphObject.make;\r\n\r\n// var createNodeTemplate = require('../nodeTemplate/createNodeTemplate')\r\nvar createPictureSingleNodeTemplate = require('../nodeTemplate/createPictureSingleNodeTemplate')\r\nvar createPictureNodeTemplate = require('../nodeTemplate/createPictureNodeTemplate')\r\nvar createTextNodeTemplate = require('../nodeTemplate/createTextNodeTemplate')\r\nvar createNodeSvgTemplate = require('../nodeTemplate/createNodeSvgTemplate')\r\n\r\n\r\nclass Trtd extends Trtd_tianpan {\r\n    constructor(div, config){\r\n        super(div, config)\r\n        this.initDiagramYun(div, config)\r\n\t\t// this.config = config;\r\n\t\t// this.modelChangedListener = config.modelChangedListener;\r\n\t\t// this.type = config.type;\r\n\t\t// this.diagram = {};\r\n        // this.model = config.model;\r\n        // this.tpid = config.tpid||Date.now();\r\n        // this.InitialFontSize = 18\r\n        // this.tdCurrentTheme = {\r\n        //     id: 6,\r\n        //     borderWidth: 2,\r\n        //     borderColor: \"black\",\r\n        //     groupColor: \"rgba(0,0,0,0)\",\r\n        //     groupStroke: \"rgba(0,0,0,0)\",\r\n        //     groupStrokeWidth: 0,\r\n        //     themeName: \"黑白\",\r\n        //     linkColor: \"black\",\r\n        //     colorRange: \"white\"\r\n        // }\r\n\t\t// // 初始化diagram\r\n\t\t// this.initDiagram(div, config);\r\n\t\t// this.initListener();\r\n\t\t// // Then you will need to construct a Model (usually a GraphLinksModel) for the Diagram, initialize its data by setting its Model.nodeDataArray and other properties, and then set the diagram's model.\r\n        // if(this.model){\r\n        //     this.initModel();\r\n        // }\r\n    }\r\n\r\n    initDiagramYun(div, config){\r\n        // this.diagram.contextMenu = ()=>{\r\n        //     var that = this\r\n        //     return getYunpanNodeContextMenu;\r\n        // },\r\n        var myDiagram = this.diagram;\r\n        var defaultConfig = {\r\n            contextMenu:this.getYunpanNodeContextMenu,\r\n            \"animationManager.isEnabled\": false,\r\n        }\r\n        this.diagram.commandHandler.doKeyDown = ()=>{\r\n            var that = this\r\n            return yunpanDokeyDownFn(that);\r\n        }\r\n        var diagramConfig = Object.assign(defaultConfig, config.diagramConfig);\r\n        this.diagram.setProperties(diagramConfig);\r\n        this.addNodeTemplate();\r\n        return myDiagram\r\n    }\r\n     /**\r\n     * 添加节点模板\r\n     */\r\n    addNodeTemplate(){\r\n\r\n        var that = this;\r\n        var myDiagram = this.diagram\r\n        myDiagram.nodeTemplateMap.add(\"yunpanx\",createNodeTemplatex(that));\r\n        myDiagram.nodeTemplateMap.add(\"yunpany\",createNodeTemplatey(that));\r\n        myDiagram.nodeTemplateMap.add(\"y\",yTemplate(that));\r\n        myDiagram.nodeTemplateMap.add(\"x\",yTemplate(that));\r\n        myDiagram.nodeTemplateMap.add(\"ytext\",tTemplate());\r\n        myDiagram.nodeTemplateMap.add(\"xtext\",tTemplate());\r\n        myDiagram.nodeTemplateMap.add(\"LogicXor\",LogicXor(that));\r\n        myDiagram.nodeTemplateMap.add(\"addtextTemplate\",addtextTemplate());\r\n\r\n        \r\n    }\r\n}\r\n\r\n// 返回云盘(轴)\r\nfunction createNodeTemplatex (that) {\r\n    return $(go.Node, \"Vertical\",\r\n        {\r\n            movable:false,\r\n            //allowMove:false,\r\n            //selectable:false,\r\n            locationSpot: go.Spot.Bottom,\r\n            location: new go.Point(0,0),\r\n            //locationObjectName: \"LINE\",\r\n            angle: 90,\r\n            click: function(e, node) {\r\n                console.log(node.data)\r\n            \r\n                //  yunpanmune(e, node)\r\n                \r\n            },\r\n            //selectionAdorned:false,//取消选择的默认边框\r\n            selectionAdornmentTemplate: function() {\r\n                var $ = go.GraphObject.make;\r\n              \r\n                    return $(go.Adornment, \"Spot\",\r\n                        $(go.Panel, \"Auto\",\r\n                            \r\n                            $(go.Shape, {\r\n                                figure: \"Linev\", \r\n                                // fill: 'rgba(255,0,120,0.2)', \r\n                                fill:\"blue\",\r\n                                stroke: \"blue\", \r\n                                strokeWidth: 2,\r\n                                \r\n                            },\r\n                            ),\r\n                            $(go.Shape,\r\n                            { \r\n                                // geometry: go.Geometry.parse(\"m 8,0 l -8,4 8,4 0,-1 -6,-3 6,-3 0,-1 z\", false).rotate(90),\r\n                                geometry: go.Geometry.parse(\"M584.641736 896S299.62889 148.827862 0-128c0 0 413.707108 34.128461 584.641736 212.37111 0 0 163.261205-185.842992 584.641735-212.37111 0 0-486.056523 686.369398-584.641735 1024z\", true).rotate(180).scale(0.0117,0.0117),\r\n                                fill: \"blue\",\r\n                                stroke: \"blue\",\r\n                                strokeWidth: 0,\r\n                                alignment: new go.Spot(0.5, 0, 0, 0)\r\n                            }\r\n                            ),\r\n                            \r\n                            $(go.Placeholder) // this represents the selected Node\r\n\r\n                        ),\r\n\r\n                    );\r\n              \r\n                \r\n        \r\n            }(),\r\n        \r\n            //  contextMenu: function(e,node){\r\n            //     var diagram = node.diagram;\r\n            //     console.log(\"node.data\",node)\r\n            //     console.log(\"node.datanode.datanode.datanode.data\")\r\n            //     interactions.nodeContextMenu\r\n            //     //diagram.model.setDataProperty(node.data, \"stroke\",\"blue\");  \r\n            // },\r\n            contextMenu:getYunpanNodeContextMenu,\r\n\r\n            \r\n            mouseEnter:function(e,node){\r\n                var diagram = node.diagram\r\n                //diagram.model.setDataProperty(node.data, \"stroke\",\"blue\");  \r\n            },\r\n            mouseLeave:function(e,node){\r\n                //console.log(node.data)\r\n                var diagram = e.diagram\r\n                //diagram.model.setDataProperty(node.data, \"stroke\",\"#8799c4\");\r\n            },\r\n        },\r\n        new go.Binding(\"angle\", \"angle\").makeTwoWay(),\r\n        new go.Binding(\"location\", \"loc\",go.Point.parse).makeTwoWay(go.Point.stringify),\r\n        new go.Binding(\"selectable\", \"selectable\").makeTwoWay(),\r\n        // 箭头  \r\n        $(go.Shape, \r\n        { \r\n            // shape: \"BackwardV\",\r\n            // \"m 8,0 l -8,4 8,4 0,-1 -6,-3 6,-3 0,-1 z\"\r\n            // figure: \"Backward\",\r\n            geometry: go.Geometry.parse(\"M584.641736 896S299.62889 148.827862 0-128c0 0 413.707108 34.128461 584.641736 212.37111 0 0 163.261205-185.842992 584.641735-212.37111 0 0-486.056523 686.369398-584.641735 1024z\", true).rotate(180).scale(0.0117,0.0117),\r\n            fill: \"rgb(135,153,196)\",\r\n            stroke: \"#8799c4\",\r\n            strokeWidth: 0,\r\n            strokeDashArray: [0, 0],\r\n        },\r\n        new go.Binding(\"stroke\", \"stroke\").makeTwoWay(),\r\n        new go.Binding(\"fill\", \"stroke\").makeTwoWay(),\r\n        ),\r\n        // 坐标 \r\n        $(go.Shape,{ \r\n            name: 'LINE',\r\n            figure: \"Linev\",\r\n            //geometryString:geometryString,\r\n            //geometry: Y_geometry,\r\n            //fill: \"#8799c4\",\r\n            stroke: \"#8799c4\",\r\n            strokeWidth:2,\r\n        \r\n            strokeDashArray: [4, 2],\r\n            // position: new go.Point(0, 0)\r\n            // desiredSize: new go.Size(10, 100)\r\n        },\r\n        //new go.Binding(\"fill\", \"fill\").makeTwoWay(),\r\n        new go.Binding(\"stroke\", \"stroke\").makeTwoWay(),\r\n        new go.Binding(\"strokeDashArray\", \"strokeDashArray\").makeTwoWay(),\r\n        new go.Binding(\"geometryString\", \"geometryString\").makeTwoWay(),\r\n        new go.Binding(\"strokeWidth\", \"strokeWidth\").makeTwoWay(),\r\n        // new go.Binding(\"stroke\", \"isSelected\", function(sel,node) {\r\n        //     console.log(\"2333\")\r\n        //     if (sel) return \"red\"; else return \"stroke\";\r\n            \r\n        // }).ofObject(\"\")\r\n        new go.Binding(\"stroke\", \"stroke\", function(v) {\r\n                return v instanceof go.Brush ? v.stroke : v;\r\n            }).makeTwoWay()\r\n        ),\r\n        \r\n    )\r\n\r\n    \r\n}\r\nfunction createNodeTemplatey (that) {\r\n    return $(go.Node, \"Vertical\",\r\n        {\r\n            movable:false,\r\n            //allowMove:false,\r\n            //selectable:false,\r\n            locationSpot: go.Spot.Bottom,\r\n            location: new go.Point(0,0),\r\n            //locationObjectName: \"LINE\",\r\n            // angle: 0,\r\n            click: function(e, node) {\r\n                console.log(node.data)\r\n            \r\n                //  yunpanmune(e, node)\r\n                \r\n            },\r\n            //selectionAdorned:false,//取消选择的默认边框\r\n            selectionAdornmentTemplate: function() {\r\n                var $ = go.GraphObject.make;\r\n              \r\n                    return $(go.Adornment, \"Spot\",\r\n                        $(go.Panel, \"Auto\",\r\n                            \r\n                            $(go.Shape, {\r\n                                figure: \"Linev\", \r\n                                fill: 'rgba(255,0,120,0.2)', \r\n                                stroke: \"blue\", \r\n                                strokeWidth: 2, \r\n                            },\r\n                            ),\r\n                            $(go.Shape,\r\n                            { \r\n                                // geometry: go.Geometry.parse(\"m 8,0 l -8,4 8,4 0,-1 -6,-3 6,-3 0,-1 z\", false).rotate(90),\r\n                                geometry: go.Geometry.parse(\"M584.641736 896S299.62889 148.827862 0-128c0 0 413.707108 34.128461 584.641736 212.37111 0 0 163.261205-185.842992 584.641735-212.37111 0 0-486.056523 686.369398-584.641735 1024z\", true).rotate(180).scale(0.0117,0.0117),\r\n                                fill: \"blue\",\r\n                                stroke: \"blue\",\r\n                                strokeWidth: 0,\r\n                                alignment: new go.Spot(0.5, 0, 0, 0)\r\n                            }\r\n                            ),\r\n                            $(go.Placeholder) // this represents the selected Node\r\n                        ),\r\n                    );\r\n            }(),\r\n        \r\n            //  contextMenu: function(e,node){\r\n            //     var diagram = node.diagram;\r\n            //     console.log(\"node.data\",node)\r\n            //     console.log(\"node.datanode.datanode.datanode.data\")\r\n            //     interactions.nodeContextMenu\r\n            //     //diagram.model.setDataProperty(node.data, \"stroke\",\"blue\");  \r\n            // },\r\n            contextMenu:getYunpanNodeContextMenu,\r\n            mouseEnter:function(e,node){\r\n                var diagram = node.diagram\r\n                //diagram.model.setDataProperty(node.data, \"stroke\",\"blue\");  \r\n            },\r\n            mouseLeave:function(e,node){\r\n                //console.log(node.data)\r\n                var diagram = e.diagram\r\n                //diagram.model.setDataProperty(node.data, \"stroke\",\"#8799c4\");\r\n            },\r\n        },\r\n        new go.Binding(\"location\", \"loc\",go.Point.parse).makeTwoWay(go.Point.stringify),\r\n        new go.Binding(\"selectable\", \"selectable\").makeTwoWay(),\r\n        // 箭头  \r\n        $(go.Shape, \r\n        {\r\n            geometry: go.Geometry.parse(\"M584.641736 896S299.62889 148.827862 0-128c0 0 413.707108 34.128461 584.641736 212.37111 0 0 163.261205-185.842992 584.641735-212.37111 0 0-486.056523 686.369398-584.641735 1024z\", true).rotate(180).scale(0.0117,0.0117),\r\n            fill: \"rgb(135,153,196)\",\r\n            stroke: \"#8799c4\",\r\n            strokeWidth: 0,\r\n            strokeDashArray: [0, 0],\r\n        },\r\n        new go.Binding(\"stroke\", \"stroke\").makeTwoWay(),\r\n        new go.Binding(\"fill\", \"stroke\").makeTwoWay(),\r\n        ),\r\n        // 坐标 \r\n        $(go.Shape,{ \r\n            name: 'LINE',\r\n            figure: \"Linev\",\r\n            stroke: \"#8799c4\",\r\n            strokeWidth:2,\r\n            strokeDashArray: [4, 2],\r\n        },\r\n        new go.Binding(\"stroke\", \"stroke\").makeTwoWay(),\r\n        new go.Binding(\"strokeDashArray\", \"strokeDashArray\").makeTwoWay(),\r\n        new go.Binding(\"geometryString\", \"geometryString\").makeTwoWay(),\r\n        new go.Binding(\"strokeWidth\", \"strokeWidth\").makeTwoWay(),\r\n        new go.Binding(\"stroke\", \"stroke\", function(v) {\r\n                return v instanceof go.Brush ? v.stroke : v;\r\n            }).makeTwoWay()\r\n        ),\r\n        \r\n    )\r\n\r\n    \r\n}\r\n\r\n\r\n\r\n\r\n// 返回云盘(xy坐标轴)\r\nfunction yTemplate(that){\r\n    var $ = go.GraphObject.make;\r\n    return $(go.Node, \"Vertical\",\r\n    {\r\n        movable:false,\r\n        locationSpot: go.Spot.Bottom,\r\n        location: new go.Point(0,0),\r\n        //locationObjectName: \"LINE\",\r\n        angle: 0,\r\n        //selectionAdorned:false,//取消选择的默认边框\r\n        //desiredSize: new go.Size(400, 800),\r\n        click: function(e, node) {\r\n            console.log(node.data) \r\n        },\r\n        //点击\r\n        selectionAdornmentTemplate: function() {\r\n            var $ = go.GraphObject.make;\r\n                return $(go.Adornment, \"Spot\",\r\n                    $(go.Panel, \"Auto\",\r\n                        $(go.Shape, {\r\n                            figure: \"Linev\", \r\n                            // fill: 'rgba(255,0,120,0.2)', \r\n                            fill: \"blue\",\r\n                            stroke: \"blue\", \r\n                            strokeWidth: 2,\r\n                        },\r\n                        ),\r\n                        $(go.Shape,\r\n                        { \r\n                            geometry: go.Geometry.parse(\"M584.641736 896S299.62889 148.827862 0-128c0 0 413.707108 34.128461 584.641736 212.37111 0 0 163.261205-185.842992 584.641735-212.37111 0 0-486.056523 686.369398-584.641735 1024z\", true).rotate(180).scale(0.0117,0.0117),\r\n                            // fill: 'rgba(255,0,120,0.2)', \r\n                            fill: \"blue\",\r\n                            stroke: \"blue\",\r\n                            strokeWidth: 2,\r\n                            alignment: new go.Spot(0.5, 0, 0, 0)\r\n                        }\r\n                        ),\r\n                        \r\n                        $(go.Placeholder) // this represents the selected Node\r\n\r\n                    ),\r\n\r\n                );\r\n        }(),\r\n        // contextClick:function(e, node) {\r\n        //     addaxis(e, node)\r\n        // },\r\n        mouseHover:function(e,node){   \r\n            // that.showNodeRemarkTips(e, node);\r\n        },\r\n        mouseEnter:function(e,node){\r\n            var diagram = node.diagram\r\n            diagram.model.setDataProperty(node.data, \"stroke\",\"blue\");\r\n            diagram.model.setDataProperty(node.data, \"fill\",\"blue\")   \r\n  \r\n        },\r\n        mouseLeave:function(e,node){\r\n            //console.log(node.data)\r\n            var diagram = node.diagram\r\n         \r\n                that.removeNodeRemarkTips(); \r\n            \r\n                diagram.model.setDataProperty(node.data, \"stroke\",\"#8799c4\");\r\n                diagram.model.setDataProperty(node.data, \"fill\",\"#8799c4\");\r\n            //removeNodeRemarkTips()   \r\n        }, \r\n    },\r\n    new go.Binding(\"angle\", \"angle\").makeTwoWay(),\r\n    new go.Binding(\"location\", \"loc\",go.Point.parse).makeTwoWay(go.Point.stringify),\r\n    // 箭头  \r\n    $(go.Shape, \r\n    { \r\n        // shape: \"BackwardV\",\r\n        // \"m 8,0 l -8,4 8,4 0,-1 -6,-3 6,-3 0,-1 z\"\r\n        //figure: \"BackwardV\",\r\n        geometry: go.Geometry.parse(\"M584.641736 896S299.62889 148.827862 0-128c0 0 413.707108 34.128461 584.641736 212.37111 0 0 163.261205-185.842992 584.641735-212.37111 0 0-486.056523 686.369398-584.641735 1024z\", true).rotate(180).scale(0.0117,0.0117),\r\n        fill: \"#8799c4\",\r\n        stroke: \"#8799c4\",\r\n        // strokeWidth: 0,\r\n        // strokeDashArray: [0, 0],\r\n        // position: new go.Point(-6, -1)\r\n    },\r\n    new go.Binding(\"fill\", \"fill\").makeTwoWay(),\r\n    new go.Binding(\"stroke\", \"stroke\").makeTwoWay(),\r\n    new go.Binding(\"strokeWidth\", \"strokeWidth\").makeTwoWay(),\r\n    ),\r\n    // 坐标 \r\n    $(go.Shape,{ \r\n        name: 'LINE',\r\n        //geometry: Y_geometry,\r\n        width:0,\r\n        height:1000,\r\n        fill: \"#8799c4\",\r\n        stroke: \"#8799c4\",\r\n        strokeWidth: 2,\r\n       \r\n        //strokeDashArray: [4, 2],\r\n        // position: new go.Point(0, 0)\r\n        // desiredSize: new go.Size(10, 100)\r\n    },\r\n    new go.Binding(\"height\", \"height\").makeTwoWay(),\r\n    new go.Binding(\"fill\", \"fill\").makeTwoWay(),\r\n    new go.Binding(\"stroke\", \"stroke\").makeTwoWay(),\r\n    new go.Binding(\"strokeDashArray\", \"strokeDashArray\").makeTwoWay(),\r\n    new go.Binding(\"strokeWidth\", \"strokeWidth\").makeTwoWay(),\r\n    ),\r\n    \r\n   \r\n    )\r\n}\r\n\r\n\r\n//返回云盘文本\r\nfunction tTemplate(){\r\n    var $ = go.GraphObject.make;\r\n    return $(go.Node, \"Vertical\",\r\n    {\r\n        movable:false,\r\n        //locationSpot:locationSpot,\r\n        //locationSpot: go.Spot.Right,\r\n        selectionAdorned:false,//取消选择的默认边框\r\n        click: function(e, node) {\r\n            // showNodeToolBar(e,node);\r\n            console.log(node.data)\r\n        },\r\n       \r\n    },\r\n    //(\"locationSpot\", \"locationSpot\",node.data.group > 0 ? \"go.Spot.Right\":\"go.Spot.Top\").makeTwoWay(),\r\n    //new go.Binding(\"locationSpot\", \"locationSpot\",function(v,node)),\r\n    new go.Binding(\"location\", \"loc\",go.Point.parse).makeTwoWay(go.Point.stringify),\r\n    new go.Binding(\"locationSpot\", \"dir\", function(d) { return spotConverter(d, false); }),\r\n    $(go.Panel, \"Vertical\",\r\n    //{ width: 100, defaultStretch: go.GraphObject.None },\r\n    $(go.TextBlock, {\r\n            name: \"TEXT\",\r\n            alignment: new go.Spot(0, 1),\r\n            // font: \"bold 14px arial,\",\r\n            font: \"14px 微软雅黑\",\r\n            width:70,\r\n            // height:40,\r\n            //maxLines:7,\r\n            // spacingAbove: 4,\r\n            // spacingBelow: 4,\r\n            // editable :false,//禁止编辑\r\n            wrap: go.TextBlock.WrapDesiredSize,\r\n            // margin:5,\r\n            textAlign: \"center\",\r\n            // verticalAlignment :\"left\",\r\n            editable: true,\r\n            isMultiline: false,//单行\r\n            // margin: 10, \r\n            margin: 0, \r\n            stroke: \"black\",\r\n            isMultiline: true,\r\n            //overflow: go.TextBlock.OverflowClip,\r\n            //wrap: go.TextBlock.WrapDesiredSize,\r\n            alignment: go.Spot.Right,\r\n            portId: \"TEXT\",\r\n            stretch: go.GraphObject.Fill,\r\n            //background:\"green\"\r\n            // DoubleClick : false\r\n            \r\n        },\r\n        new go.Binding(\"text\", \"text\").makeTwoWay(),\r\n        new go.Binding(\"stroke\", \"textStroke\").makeTwoWay(),\r\n        new go.Binding(\"font\", \"font\").makeTwoWay(),\r\n        new go.Binding(\"margin\", \"margin\").makeTwoWay()\r\n        )\r\n    )\r\n    )}\r\n \r\n\r\nfunction spotConverter(dir, from) {\r\n    if (dir === \"right\") {\r\n    return  go.Spot.Right;\r\n    } else if(dir === \"top\") {\r\n    return (go.Spot.Top);\r\n    }\r\n}\r\n\r\n//返回云盘增加文本\r\nfunction addtextTemplate() {\r\n    var $ = go.GraphObject.make;\r\n    var properties = {\r\n        figure: \"Rectangle\",\r\n        fill: \"rgba(0,0,0,0)\",\r\n        strokeWidth: 1,\r\n        stroke: \"rgba(0,0,0,0)\",\r\n        fontSize: 15,\r\n        font: \"sans-serif\"\r\n    };\r\n\r\n    return $(go.Node, \"Spot\", {\r\n            \"_controlExpand\": true,\r\n            layerName: \"Foreground\",\r\n            locationSpot: go.Spot.Center,\r\n            resizeCellSize: new go.Size(10, 10),\r\n            locationObjectName: \"SHAPE\",\r\n            resizable: true,\r\n            resizeObjectName: \"SHAPE\", // user can resize the Shape\r\n            rotatable: true,\r\n            location: new go.Point(0, 0),\r\n            toMaxLinks: 1,\r\n            click: function(e, node) {\r\n                console.log(node.data)\r\n                // showNodeToolBar(e,node);\r\n            },\r\n            layoutConditions: go.Part.LayoutStandard,\r\n            alignment: go.Spot.Center,\r\n            alignmentFocus: go.Spot.Center\r\n        },\r\n        new go.Binding(\"location\", \"loc\", go.Point.parse).makeTwoWay(go.Point.stringify),\r\n        new go.Binding(\"isShadowed\", \"isShadowed\").makeTwoWay(),\r\n        new go.Binding(\"angle\", \"angle\").makeTwoWay(),\r\n        new go.Binding(\"selectable\", \"selectable\").makeTwoWay(),\r\n        new go.Binding(\"layerName\", \"layerName\", function(v, d) {\r\n            return v ? v : \"\";\r\n        }).makeTwoWay(function(v) {\r\n            return v;\r\n        }),\r\n        $(go.Shape, {\r\n                strokeDashArray: null,\r\n                // strokeDashOffset:10,\r\n                name: \"SHAPE\",\r\n                figure: \"Rectangle\",\r\n                fill: \"rgba(0,0,0,0)\",\r\n                fromLinkable: true,\r\n                toLinkable: true,\r\n                cursor: \"pointer\",\r\n                minSize: new go.Size(50, 50),\r\n                strokeWidth: 2,\r\n                stroke: \"rgba(0,0,0,0)\",\r\n                portId: \"\"\r\n            },\r\n            new go.Binding(\"strokeDashArray\", \"strokeDashArray\", function(v) {\r\n                return [v.split()[0], v.split()[1]];\r\n            }).makeTwoWay(function(v) {\r\n                return v[0] + \" \" + v[1];\r\n            }), //保留，设置边线样式\r\n            new go.Binding(\"fill\", \"fill\", function(v, obj) {\r\n                return v instanceof go.Brush ? v.color : v;\r\n            }).makeTwoWay(),\r\n            // new go.Binding(\"fill\", \"isSelected\", function(s, obj) { return s ? \"red\" : obj.part.data.color; }).ofObject()),\r\n            new go.Binding(\"width\", \"width\", function(v) {\r\n                //alert(v);\r\n                return v;\r\n            }).makeTwoWay(function(v) {\r\n                return v;\r\n            }),\r\n            new go.Binding(\"height\", \"height\", function(v) {\r\n                //alert(v);\r\n                return v;\r\n            }).makeTwoWay(function(v) {\r\n                return v;\r\n            }),\r\n            new go.Binding(\"stroke\", \"stroke\", function(v) {\r\n                return v instanceof go.Brush ? v.stroke : v;\r\n            }).makeTwoWay(),\r\n            new go.Binding(\"strokeWidth\", \"strokeWidth\", function(d) {\r\n                return d;\r\n            }).makeTwoWay(function(d) {\r\n                return d;\r\n            }),\r\n            new go.Binding(\"figure\", \"figure\").makeTwoWay(), {\r\n                figure: properties.figure,\r\n                fill: properties.fill,\r\n                strokeWidth: properties.strokeWidth,\r\n                stroke: properties.stroke\r\n            }\r\n        ),\r\n        $(go.Shape, {\r\n                name: \"SHAPE_Back\",\r\n                figure: \"Rectangle\",\r\n                fill: \"rgba(0,0,0,0)\",\r\n                // fromLinkable: true,\r\n                // toLinkable: true,\r\n                strokeWidth: 0\r\n            },\r\n            new go.Binding(\"width\", \"width\", function(v) {\r\n                return v;\r\n            }).ofObject(\"SHAPE\"),\r\n            new go.Binding(\"height\", \"height\", function(v) {\r\n                return v;\r\n            }).ofObject(\"SHAPE\")\r\n        ),\r\n        $(go.TextBlock, {\r\n                name: \"TEXT\",\r\n                alignment: new go.Spot(0.5, 0.5),\r\n                font: \"bold \" + 18 + \"px 幼圆\",\r\n                editable: true,\r\n                //margin: 3, editable: true,\r\n                stroke: \"black\",\r\n                isMultiline: true,\r\n                overflow: go.TextBlock.OverflowClip,\r\n                wrap: go.TextBlock.WrapDesiredSize,\r\n                textAlign: \"center\",\r\n                spacingAbove: 4,\r\n                spacingBelow: 4,\r\n                portId: \"TEXT\",\r\n                stretch: go.GraphObject.Fill\r\n            },\r\n            new go.Binding(\"textAlign\", \"textAlign\", function(v) {\r\n                return _.contains(['start', 'center', 'end'], v) ? v : \"center\";\r\n            }).makeTwoWay(),\r\n            new go.Binding(\"spacingAbove\", \"spacingline\", function(v) {\r\n                return tdTransToNum(v, 4);\r\n            }).makeTwoWay(),\r\n            new go.Binding(\"spacingBelow\", \"spacingline\", function(v) {\r\n                return tdTransToNum(v, 4);\r\n            }).makeTwoWay(),\r\n            new go.Binding(\"width\", \"width\", function(v) {\r\n                return v;\r\n            }).ofObject(\"SHAPE\"),\r\n            // new go.Binding(\"height\", \"height\", function (v) {\r\n            //   return v;\r\n            // }).ofObject(\"SHAPE\"),\r\n            new go.Binding(\"text\", \"text\").makeTwoWay(),\r\n            new go.Binding(\"stroke\", \"textStroke\").makeTwoWay(),\r\n            new go.Binding(\"font\", \"font\").makeTwoWay()\r\n        )\r\n    );\r\n}\r\n\r\n\r\n\r\n//提示框\r\n  var shapeShowblur = null;\r\n  var circleStroke = null;\r\n\r\n  function showToolTip(obj, diagram) {\r\n    var box = document.getElementById(\"infoBoxHolder\");\r\n    var contextMenu= document.getElementsByClassName(\"context-menu\")[0];\r\n    //  console.log(contextMenu)  \r\n    \r\n    if (obj !== null) {\r\n      var node = obj.part;\r\n      var e = diagram.lastInput;\r\n      var circle = node.findObject(\"CIRCLE\");\r\n      var shape= node.findObject(\"SHAPE\"); \r\n    //   console.log(circle)\r\n    if(circle !== null) circle.stroke = \"#57617a\";\r\n    if(shape !== null)  shape.shadowBlur = 10;\r\n\r\n    if (shapeShowblur !== null && shapeShowblur !== shape) {\r\n        \r\n        shapeShowblur.shadowBlur = 0;\r\n        shapeShowblur = shape;\r\n  \r\n        if(box&&(contextMenu.style.display === \"\"||contextMenu.style.display === \"none\")){\r\n            box.style.display = \"block\";\r\n        }\r\n    } else{\r\n        \r\n        shapeShowblur = shape;\r\n    }\r\n\r\n      \r\n      \r\n      if (circleStroke !== null && circleStroke !== circle) \r\n      circleStroke.stroke = null;\r\n      circleStroke = circle;\r\n        if(box&&(contextMenu.style.display === \"\"||contextMenu.style.display === \"none\")){\r\n            box.style.display = \"block\";\r\n        }\r\n    } else {\r\n      if (circleStroke !== null) \r\n      circleStroke.stroke = null;\r\n      circleStroke = null;\r\n    //   document.getElementById(\"infoBox\").innerHTML = \"\";\r\n     \r\n      \r\n    }\r\n\r\n    \r\n  }\r\n    \r\n\r\n  \r\n\r\n\r\n\r\n\r\n\r\n// myDiagram.nodeTemplate =\r\n// $(go.Node,\r\n//   $(go.Shape, \"Circle\",\r\n//     {\r\n//       desiredSize: new go.Size(28, 28),\r\n//       fill: radBrush, strokeWidth: 0, stroke: null\r\n//     }), // no outline\r\n//   {\r\n//     locationSpot: go.Spot.Center,\r\n//     click: showArrowInfo,  // defined below\r\n//     toolTip:  // define a tooltip for each link that displays its information\r\n//         $(\"ToolTip\",\r\n//           $(go.TextBlock, { margin: 4 },\r\n//             new go.Binding(\"text\", \"\", infoString).ofObject())\r\n//         )\r\n//   }\r\n// );\r\n\r\n//返回云盘图标\r\nfunction LogicXor(that){\r\n    var $ = go.GraphObject.make;\r\n    return $(go.Node, \"Vertical\",\r\n        {\r\n            movable:false,\r\n            locationSpot: go.Spot.Top,\r\n            location: new go.Point(860,5),\r\n            mouseHover:function(e,node){\r\n                that.showNodeRemarkTips(e, node);\r\n            },\r\n            mouseLeave:function(e,node){\r\n                that.removeNodeRemarkTips();    \r\n            },\r\n            click:function(e,node){\r\n             \r\n                console.log(node.data)\r\n                console.log(Number(node.data.loc.split(' ')[1])>0)\r\n                if(Number(node.data.loc.split(' ')[1])>0){\r\n                    addy(e)\r\n                }else{\r\n                    addx(e)\r\n                }\r\n            }\r\n        },     \r\n        new go.Binding(\"location\", \"loc\",go.Point.parse).makeTwoWay(go.Point.stringify),\r\n        $(go.Shape, {\r\n            figure: \"LogicXor\", \r\n            stroke: \"#8799c4\", \r\n            width:30,\r\n            strokeWidth: 2,\r\n            \r\n        },\r\n        )\r\n\r\n    )\r\n}\r\n\r\nfunction yunpanDokeyDownFn (that) {\r\n    // console.log('myDiagram:', diagram);\r\n    // var myDiagram = diagram.diagram;\r\n    // var e = myDiagram.lastInput;\r\n    // var cmd = myDiagram.commandHandler;\r\n    // var node = myDiagram.selection.first();\r\n    var diagram = that.diagram\r\n    // var that = this;\r\n    var myDiagram = that.diagram;\r\n    var e = myDiagram.lastInput;\r\n    var node = myDiagram.selection.first();\r\n    var cmd = myDiagram.commandHandler;\r\n    if (e.key === \"Del\"|| e.event.keyCode === 8) { \r\n        // console.log(myDiagram.model.nodeDataArray)\r\n        console.log(\"0\",myDiagram.model.nodeDataArray)\r\n        del(e)    \r\n    }\r\n\r\n    if(e.event.ctrlKey){\r\n        //增加y轴\r\n        if (e.event.keyCode === 89) {\r\n            if((node&&node.data.category!== \"addtextTemplate\")||(!node)){\r\n                addy(e);\r\n            }\r\n        }\r\n        //增加x轴\r\n        if (e.event.keyCode === 88) {\r\n            \r\n            if((node&&node.data.category!== \"addtextTemplate\")||(!node)){\r\n                addx(e);\r\n            }\r\n        }\r\n        e.bubbles = false; \r\n        }\r\n\r\n    }\r\n\r\n\r\nfunction getYunpanNodeContextMenu() {\r\n\r\n    return $(go.Adornment, \"Vertical\",\r\n        $(\"ContextMenuButton\",\r\n            $(go.TextBlock, \"删除 DEl\"), {\r\n                click: function(e,node) {\r\n                    del(e);\r\n                }\r\n            }),\r\n        $(\"ContextMenuButton\",\r\n            $(go.TextBlock, \"增加 CTRL+X/Y\"), {\r\n                click: function(e, node) {\r\n                    if(node.data.loc.split(\" \")[1] === \"0\"&&node.data.category!==\"x\"){\r\n                        addy(e)\r\n                    }else if(node.data.loc.split(\" \")[0] === \"0\"&&node.data.category!==\"y\"){\r\n                        addx(e)\r\n                    }; \r\n                }\r\n            })\r\n        \r\n    );\r\n}\r\n//云盘增加y轴节点\r\nfunction addy(e){\r\n    let myDiagram = e.diagram;\r\n    let node = myDiagram.selection.first();\r\n    let nodeDataArray = myDiagram.model.nodeDataArray;\r\n    console.log(nodeDataArray)\r\n    let yl = 0;\r\n    let stroke =\"#8799c4\";\r\n    let strokeDashArray=[4, 2];\r\n    let loc = 0;\r\n    let locy = '';\r\n    let height = 260 ;\r\n    nodeDataArray.forEach(function(data){\r\n        \r\n        if(data.category === \"y\"){\r\n            yl = data.height - 10  \r\n        }\r\n        \r\n        if(data.category===\"x\"){\r\n        //console.log(data)\r\n        height = data.height +200\r\n        myDiagram.model.startTransaction(\"addheight\");\r\n        myDiagram.model.setDataProperty(data, \"height\",height);\r\n        myDiagram.model.commitTransaction(\"addheight\");\r\n        }\r\n        if(data.category === 'LogicXor'){\r\n            let locL = +data.loc.split(' ')[0]\r\n            if(locL>0){\r\n                let loclc = (locL + 200) + \" 5\" \r\n                myDiagram.model.startTransaction();\r\n                myDiagram.model.setDataProperty(data, \"loc\",loclc);\r\n                myDiagram.model.commitTransaction();\r\n            }\r\n            \r\n        }\r\n    })\r\n    nodeDataArray.forEach(function(data){\r\n        if(data.loc.split(' ')[0] === '0'&&data.category!== \"addtextTemplate\"){\r\n            let l = height - 10;\r\n            let geometryStringx = \"M 0 0 L 0 \"+ l;\r\n            myDiagram.model.startTransaction(\"changel\");\r\n            myDiagram.model.setDataProperty(data, \"geometryString\",geometryStringx);\r\n            myDiagram.model.commitTransaction(\"changel\");\r\n        }\r\n    })\r\n    let geometryString= \"M 0 0 L 0 \"+yl\r\n    \r\n    if(node && (node.data.category === 'y'||node.data.loc.split(' ')[0] !== '0')&&node.data.category !== 'x'&&node.data.category !== 'LogicXor'&&node.data.category!== \"addtextTemplate\"){\r\n        //if()\r\n        console.log(node.data)\r\n        loc = +node.data.loc.split(' ')[0] + 200;\r\n        locy = loc + \" 0\"\r\n\r\n        //移动位置\r\n        nodeDataArray.forEach(function(data){\r\n            console.log(loc)\r\n            if(data.category !== 'LogicXor'&&data.category!== \"addtextTemplate\"){\r\n                let loco = +data.loc.split(' ')[0]\r\n                if(loco >= loc){\r\n                    loco = loco+200;\r\n                    var locy = loco + \" 0\"\r\n                    myDiagram.model.startTransaction(\"changeloc\");\r\n                    myDiagram.model.setDataProperty(data, \"loc\",locy);\r\n                    myDiagram.model.commitTransaction(\"changeloc\");\r\n                }\r\n            }\r\n            \r\n    })\r\n        \r\n    }else {\r\n        let arr =[]\r\n        nodeDataArray.forEach(function(data){\r\n            if(data.loc.split(' ')[0] !== '0'&&data.category !== 'LogicXor'&&data.category!== \"addtextTemplate\"){\r\n                arr.push(+data.loc.split(' ')[0])\r\n            }\r\n        })\r\n        if(arr.length === 0){\r\n            // geometryString = \"M 0 0 L 0 200\";\r\n            locy = \"200 0\"\r\n        }else{\r\n            var max= Math.max.apply(null,arr)+200 ;\r\n            locy = max + \" 0\" \r\n        }\r\n    }\r\n    \r\n    \r\n\r\n    let newy = {key:guid(),category: \"yunpany\",stroke:stroke,geometryString:geometryString,strokeDashArray:strokeDashArray,loc: locy };\r\n    let newytext = {key:guid(),category: \"xtext\",margin:10,\"textStroke\":\"#666666\",text:\"维度\"+locy.split(' ')[0]/200,loc: locy,dir: \"top\" };\r\n    myDiagram.model.startTransaction(\"addy\");\r\n    myDiagram.model.addNodeData(newy);\r\n    myDiagram.model.addNodeData(newytext);\r\n    myDiagram.model.commitTransaction(\"addy\");\r\n\r\n        \r\n}\r\n\r\n//云盘增加x轴节点\r\nfunction addx(e){\r\n    let myDiagram = e.diagram;\r\n    let node = myDiagram.selection.first();\r\n    let nodeDataArray = myDiagram.model.nodeDataArray;\r\n    let xl = 0;\r\n    let stroke =\"#8799c4\";\r\n    let strokeDashArray=[4, 2];\r\n    let loc = 0;\r\n    let locy = '';\r\n    let height = 260 ;\r\n    nodeDataArray.forEach(function(data){\r\n        \r\n        if(data.category === \"x\"){\r\n            xl = data.height - 10  \r\n        }\r\n        if(data.category===\"y\"){\r\n        //console.log(data)\r\n        height = data.height +200\r\n        myDiagram.model.startTransaction(\"addheight\");\r\n        myDiagram.model.setDataProperty(data, \"height\",height);\r\n        myDiagram.model.commitTransaction(\"addheight\");\r\n        }\r\n        if(data.category === 'LogicXor'){\r\n            let locL = +data.loc.split(' ')[1]\r\n            if(locL < 0){\r\n                let loclc =\"-20 \"+(locL - 200)\r\n                myDiagram.model.startTransaction();\r\n                myDiagram.model.setDataProperty(data, \"loc\",loclc);\r\n                myDiagram.model.commitTransaction();\r\n            }\r\n            \r\n        }\r\n    })\r\n    nodeDataArray.forEach(function(data){\r\n        if(data.loc.split(' ')[1] === '0'&&data.category!== \"addtextTemplate\"){\r\n            let l = height - 10;\r\n            let geometryStringx = \"M 0 0 L 0 \"+ l;\r\n            myDiagram.model.startTransaction(\"changel\");\r\n            myDiagram.model.setDataProperty(data, \"geometryString\",geometryStringx);\r\n            myDiagram.model.commitTransaction(\"changel\");\r\n        }\r\n    })\r\n    let geometryString= \"M 0 0 L 0 \"+xl\r\n    \r\n    if(node && (node.data.category === 'x'||node.data.loc.split(' ')[1] !== '0')&&node.data.category !== 'y'&&node.data.category !== 'LogicXor'&&node.data.category!== \"addtextTemplate\"){\r\n        //if()\r\n        console.log(node.data)\r\n        loc = +node.data.loc.split(' ')[1] - 200;\r\n        locy = \"0 \"+loc;\r\n\r\n        //移动位置\r\n        nodeDataArray.forEach(function(data){\r\n            console.log(loc)\r\n            if(data.category !== 'LogicXor'&&data.category!== \"addtextTemplate\"){\r\n                let loco = +data.loc.split(' ')[1]\r\n                if(loco <= loc){\r\n                    loco = loco-200;\r\n                    var locy = \"0 \"+loco\r\n                    myDiagram.model.startTransaction(\"changeloc\");\r\n                    myDiagram.model.setDataProperty(data, \"loc\",locy);\r\n                    myDiagram.model.commitTransaction(\"changeloc\");\r\n                }\r\n            }else{\r\n\r\n            }\r\n            \r\n    })\r\n        \r\n    }else {\r\n        let arr =[]\r\n        nodeDataArray.forEach(function(data){\r\n            if(data.loc.split(' ')[1] !== '0'&&data.category !== 'LogicXor'&&data.category!== \"addtextTemplate\"){\r\n                arr.push(+data.loc.split(' ')[1])\r\n            }\r\n        })\r\n        if(arr.length === 0){\r\n            // geometryString = \"M 0 0 L 0 200\";\r\n            locy = \"0 -200\"\r\n        }else{\r\n            var min= Math.min.apply(null,arr)-200 ;\r\n            locy = \"0 \"+min; \r\n        }\r\n    }\r\n    \r\n\r\n    let newx = {key:guid(),category: \"yunpanx\",stroke:stroke,geometryString:geometryString,strokeDashArray:strokeDashArray,loc: locy };\r\n    let newxtext = {key:guid(),category: \"ytext\",text:\"维度\"+Math.abs(+locy.split(' ')[1]/200),\"textStroke\":\"#666666\",loc: locy,dir: \"right\" };\r\n    myDiagram.model.startTransaction(\"addx\");\r\n    myDiagram.model.addNodeData(newx);\r\n    myDiagram.model.addNodeData(newxtext);\r\n    myDiagram.model.commitTransaction(\"addx\");\r\n\r\n\r\n}\r\n\r\n\r\n//云盘删除节点\r\nfunction del(e){\r\n    let myDiagram = e.diagram;\r\n    let node = myDiagram.selection.first();\r\n    console.log(\"1\",myDiagram.model.nodeDataArray)\r\n    //text和轴\r\n    if (node) {\r\n        console.log(\"11111111111111111111111\")\r\n        //非xy的坐标轴\r\n        console.log(node.data)\r\n        //判断点击y子轴\r\n        if(node.data.category === \"yunpany\"){\r\n           \r\n            let loc = node.data.loc\r\n            let locx = +node.data.loc.split(' ')[0]\r\n            console.log(locx)\r\n            myDiagram.model.nodeDataArray.forEach(function(data){\r\n\r\n                //如果不加判断，点击轴删除，只会删除轴，不会删除坐标\r\n                // debugger\r\n                // if(data.category===\"yunpany\"&&data.loc === loc){\r\n                //     myDiagram.model.startTransaction(\"deletAxis\");\r\n                //     //删除轴\r\n                //     myDiagram.model.removeNodeData(node.data);\r\n                //     myDiagram.model.removeNodeData(data);\r\n                //     myDiagram.model.commitTransaction(\"deletAxis\");\r\n                // }else\r\n                 if(data.category===\"xtext\"&&data.loc === loc){\r\n                    console.log(\"data\",data)\r\n                    myDiagram.model.startTransaction(\"delettext\");\r\n                    //删除轴\r\n                    myDiagram.model.removeNodeData(node.data);\r\n                    //删除text\r\n                    myDiagram.model.removeNodeData(data);\r\n                    \r\n                    myDiagram.model.commitTransaction(\"delettext\");\r\n                }\r\n        \r\n            })\r\n            //改变其他轴长度及坐标\r\n            console.log(\"2\",myDiagram.model.nodeDataArray)\r\n            changelen(locx,myDiagram)\r\n            \r\n        //x\r\n        }else if(node.data.category === \"yunpanx\"){\r\n            console.log(\"x\")\r\n            let loc = node.data.loc\r\n            let locx = +node.data.loc.split(' ')[1]\r\n            myDiagram.model.nodeDataArray.forEach(function(data){\r\n                // if(data.category===\"ytext\"&&data.loc === loc){\r\n                //     myDiagram.model.startTransaction(\"delettext\");\r\n                //     myDiagram.model.removeNodeData(data);\r\n                //     myDiagram.model.removeNodeData(node.data);\r\n                //     myDiagram.model.commitTransaction(\"delettext\");\r\n                // }else \r\n                if(data.category===\"ytext\"&&data.loc === loc){\r\n                    myDiagram.model.startTransaction(\"delettext\");\r\n                    myDiagram.model.removeNodeData(data);\r\n                    myDiagram.model.removeNodeData(node.data);\r\n                    myDiagram.model.commitTransaction(\"delettext\");\r\n                }\r\n                \r\n            \r\n            })\r\n            \r\n            changelenx(locx,myDiagram)\r\n            \r\n        }else if(node.data.category!==\"ytext\"&&node.data.category!==\"xtext\"&&node.data.category!==\"LogicXor\"&&node.data.category!==\"x\"&&node.data.category!==\"y\" ){\r\n            myDiagram.model.startTransaction();\r\n            myDiagram.model.removeNodeData(node.data);\r\n            myDiagram.model.commitTransaction();\r\n        }      \r\n        \r\n    }\r\n\r\n}\r\n\r\n//改变x轴长度\r\n\r\nfunction changelen(locx,myDiagram){\r\n    console.log(\"3\",myDiagram.model.nodeDataArray)\r\n    myDiagram.model.nodeDataArray.forEach(function(data){\r\n                                \r\n        //Math.abs(key)\r\n        let datalocx = +data.loc.split(' ')[0]\r\n        console.log(data.loc)\r\n        console.log(datalocx)\r\n        //改变位置\r\n        if(datalocx > locx){\r\n            if(data.category===\"yunpany\"||data.category===\"xtext\"){\r\n                let l = datalocx-200\r\n                let loc = l+\" 0\"\r\n                console.log(loc)\r\n                myDiagram.model.startTransaction(\"changea\");\r\n                myDiagram.model.setDataProperty(data, \"loc\",loc);\r\n                myDiagram.model.commitTransaction(\"changea\");\r\n            }\r\n            \r\n        }\r\n        //改变长度\r\n     \r\n            console.log(data)\r\n            if(data.category===\"x\"){\r\n                let height = data.height -200\r\n                myDiagram.model.startTransaction(\"cheight\");\r\n                myDiagram.model.setDataProperty(data, \"height\",height);\r\n                myDiagram.model.commitTransaction(\"cheight\");\r\n            }else if(data.category===\"yunpanx\"){\r\n                let gs = NaN\r\n                let l = (data.geometryString||\"\").split(' ')\r\n                console.log(l)\r\n                if(l[5]){\r\n                    gs = +l[5] - 200;\r\n                }else{\r\n                    gs = +l[3] - 200;\r\n                }\r\n                console.log(gs)\r\n                let gs2 = gs + \"\";\r\n                let gs3 = \"M 0 0  L 0 \"+gs2;\r\n                myDiagram.model.startTransaction(\"changea\");\r\n                myDiagram.model.setDataProperty(data, \"geometryString\",gs3);\r\n                myDiagram.model.commitTransaction(\"changea\");\r\n            }\r\n        \r\n        if(data.category === 'LogicXor'){\r\n            let locL = +data.loc.split(' ')[0]\r\n            if(locL > 0){\r\n                let loclc =(locL - 200) +\" 5\"\r\n                myDiagram.model.startTransaction();\r\n                myDiagram.model.setDataProperty(data, \"loc\",loclc);\r\n                myDiagram.model.commitTransaction();\r\n            }\r\n        }\r\n    })\r\n}\r\n\r\nfunction changelenx(locx,myDiagram){\r\n    console.log(myDiagram.model.nodeDataArray)\r\n    myDiagram.model.nodeDataArray.forEach(function(data){\r\n\r\n    let datalocx = +data.loc.split(' ')[1]\r\n    // console.log(data.loc)\r\n    // console.log(datalocx)\r\n    //改变位置\r\n    if(datalocx < locx){\r\n        if(data.category===\"yunpanx\"||data.category===\"ytext\"){\r\n            let l = datalocx+200\r\n            let loc = \"0 \"+l\r\n            console.log(\"节点\",data)\r\n            console.log(\"改变位置\",loc)\r\n            myDiagram.model.startTransaction(\"changea\");\r\n            myDiagram.model.setDataProperty(data, \"loc\",loc);\r\n            myDiagram.model.commitTransaction(\"changea\");\r\n        }\r\n        \r\n        \r\n    }\r\n    //改变长度\r\n    if(data.category===\"y\"){\r\n        let height = data.height -200\r\n        console.log(\"节点\",data)\r\n        console.log(\"改变坐标轴长度没有angle\",height)\r\n        myDiagram.model.startTransaction(\"cheight\");\r\n        myDiagram.model.setDataProperty(data, \"height\",height);\r\n        myDiagram.model.commitTransaction(\"cheight\");\r\n    }else if(data.category===\"yunpany\"){\r\n        let gs = NaN\r\n        let l = (data.geometryString||\"\").split(' ')\r\n        if(l[5]){\r\n            gs = +l[5] - 200;\r\n        }else{\r\n            gs = +l[3] - 200;\r\n        }\r\n        // console.log(gs)\r\n        let gs2 = gs + \"\";\r\n        let gs3 = \"M 0 0  L 0 \"+gs2;\r\n        console.log(\"节点\",data)\r\n        console.log(\"改变y轴长度没有angle\",gs3)\r\n        myDiagram.model.startTransaction(\"changea\");\r\n        myDiagram.model.setDataProperty(data, \"geometryString\",gs3);\r\n        myDiagram.model.commitTransaction(\"changea\");\r\n    }   \r\n\r\n    if(data.category === 'LogicXor'){\r\n            let locL = +data.loc.split(' ')[1]\r\n            if(locL < 0){\r\n                let loclc =\"-20 \"+(locL + 200) \r\n                myDiagram.model.startTransaction();\r\n                myDiagram.model.setDataProperty(data, \"loc\",loclc);\r\n                myDiagram.model.commitTransaction();\r\n            }\r\n        }\r\n    })\r\n}\r\nfunction guid() {\r\n    function S4() {\r\n        return (((1+Math.random())*0x10000)|0).toString(16).substring(1);\r\n    }\r\nreturn (S4()+S4()+\"-\"+S4()+\"-\"+S4()+\"-\"+S4()+\"-\"+S4()+S4()+S4());\r\n}\r\n\r\n// export default Trtd;\r\nmodule.exports = Trtd;\n\n\n// WEBPACK FOOTER //\n// ./src/diagram/yunpan.js","\r\nvar Trtd_tianpan = require('./tianpan')\r\nvar createNodeTemplate = require('../nodeTemplate/createNodeTemplate')\r\nvar createPictureSingleNodeTemplate = require('../nodeTemplate/createPictureSingleNodeTemplate')\r\nvar createPictureNodeTemplate = require('../nodeTemplate/createPictureNodeTemplate')\r\nvar createTextNodeTemplate = require('../nodeTemplate/createTextNodeTemplate')\r\nvar createNodeSvgTemplate = require('../nodeTemplate/createNodeSvgTemplate')\r\n\r\n\r\nclass Trtd extends Trtd_tianpan {\r\n    constructor(div, config){\r\n        super(div, config)\r\n\t\t// this.config = config;\r\n\t\t// this.modelChangedListener = config.modelChangedListener;\r\n\t\t// this.type = config.type;\r\n\t\t// this.diagram = {};\r\n        // this.model = config.model;\r\n        // this.tpid = config.tpid||Date.now();\r\n        // this.InitialFontSize = 18\r\n        // this.tdCurrentTheme = {\r\n        //     id: 6,\r\n        //     borderWidth: 2,\r\n        //     borderColor: \"black\",\r\n        //     groupColor: \"rgba(0,0,0,0)\",\r\n        //     groupStroke: \"rgba(0,0,0,0)\",\r\n        //     groupStrokeWidth: 0,\r\n        //     themeName: \"黑白\",\r\n        //     linkColor: \"black\",\r\n        //     colorRange: \"white\"\r\n        // }\r\n\t\t// // 初始化diagram\r\n\t\t// this.initDiagram(div, config);\r\n\t\t// this.initListener();\r\n\t\t// // Then you will need to construct a Model (usually a GraphLinksModel) for the Diagram, initialize its data by setting its Model.nodeDataArray and other properties, and then set the diagram's model.\r\n        // if(this.model){\r\n        //     this.initModel();\r\n        // }\r\n    }\r\n\r\n     /**\r\n     * 添加节点模板\r\n     */\r\n    addNodeTemplate(){\r\n\r\n        var that = this;\r\n        var myDiagram = this.diagram\r\n\r\n        // myDiagram.nodeTemplateMap.add(\"dipan\", this.createDipanTemplate(layerThickness,tdDipanTextAngle));\r\n        // myDiagram.nodeTemplateMap.add(\"Root\", this.getDipanRootTemplate(layerThickness));\r\n        // myDiagram.nodeTemplateMap.add(\"text\", );\r\n\r\n        myDiagram.nodeTemplateMap.add(\"0\", createNodeTemplate(this.diagram));\r\n        myDiagram.nodeTemplateMap.add(\"1\", createNodeTemplate(this.diagram));\r\n        myDiagram.nodeTemplateMap.add(\"2\", createNodeTemplate(this.diagram));\r\n        myDiagram.nodeTemplateMap.add(\"3\", createPictureSingleNodeTemplate(this.diagram));\r\n        myDiagram.nodeTemplateMap.add(\"4\", createPictureNodeTemplate(this.diagram));\r\n        myDiagram.nodeTemplateMap.add(\"text\", createTextNodeTemplate(this.diagram));\r\n        myDiagram.nodeTemplateMap.add(\"\", createNodeTemplate(this.diagram));\r\n\r\n        myDiagram.nodeTemplateMap.add(\"8\",createNodeSvgTemplate(this.diagram));\r\n\r\n        \r\n    }\r\n}\r\n\r\n// export default Trtd;\r\nmodule.exports = Trtd;\n\n\n// WEBPACK FOOTER //\n// ./src/diagram/wheel.js","\r\nvar Trtd_tianpan = require('./tianpan')\r\nvar createNodeTemplate = require('../nodeTemplate/createNodeTemplate')\r\nvar createPictureSingleNodeTemplate = require('../nodeTemplate/createPictureSingleNodeTemplate')\r\nvar createPictureNodeTemplate = require('../nodeTemplate/createPictureNodeTemplate')\r\nvar createTextNodeTemplate = require('../nodeTemplate/createTextNodeTemplate')\r\nvar createNodeSvgTemplate = require('../nodeTemplate/createNodeSvgTemplate')\r\nvar createArcNodeTemplate = require('../nodeTemplate/createArcNodeTemplate')\r\nvar createLineNodeTemplate = require('../nodeTemplate/createLineNodeTemplate')\r\nvar createWaveNodeTemplate = require('../nodeTemplate/createWaveNodeTemplate')\r\nvar nodeTemplateFactory = require('../nodeTemplate/factory')\r\nvar $ = go.GraphObject.make;\r\nvar GroupRotatingTool = require('../tools/GroupRotatingTool')\r\nvar helpers = require('../helpers/helpers.gojs')\r\nvar layoutWaveGroup = require(\"../layout/waveGroupLayout\").layoutWaveGroup;\r\nvar adjustTextAngle = require(\"../layout/waveGroupLayout\").adjustTextAngle;\r\n\r\n\r\nfunction computeNewRotateLoc(rotateCenter,currentLoc, angle){\r\n    if(rotateCenter.equals(currentLoc)) return currentLoc\r\n  // 计算选择中心点到（0,0）点的偏移\r\n  var offset = new go.Point(0,0).subtract(rotateCenter.copy())\r\n  // 将原来的点偏移到相对0,0点的位置\r\n  var nodeOrigin = currentLoc.copy().offset(offset.x, offset.y)\r\n  var newNodeOrigin = nodeOrigin.rotate(angle)\r\n  var newNodeLoc = newNodeOrigin.copy().offset(-offset.x, -offset.y)\r\n  return newNodeLoc\r\n  // console.log(\"newNodeLoc\", newNodeLoc)\r\n}\r\n\r\nrequire(\"../tools/textEditor\")\r\nclass Trtd extends Trtd_tianpan {\r\n    constructor(div, config){\r\n        super(div, config)\r\n        var that = this;\r\n        var diagramConfig = {\r\n            layout: $(go.Layout),\r\n            initialContentAlignment: go.Spot.Center,\r\n            initialAutoScale: go.Diagram.Uniform,\r\n            initialDocumentSpot: go.Spot.Center,\r\n            initialViewportSpot: go.Spot.Center,\r\n            rotatingTool: new GroupRotatingTool(),\r\n            PartResized: (e) =>{\r\n                console.log(\"PartResizedPartResizedPartResizedPartResized\")\r\n                var node = e.subject.part\r\n                if(!node) return;\r\n                // return;\r\n                if(node.data.category == \"waveGroup\"){\r\n                    console.log(\"PartResizedPartResized\")\r\n                    // wave 的宽高限制\r\n                    var maxWidth = 400;\r\n                    var maxHeight = 400;\r\n                    var oliveWidth, oliveHeight;\r\n                    var it = node.findSubGraphParts().iterator;\r\n                    var waveCount = 0\r\n                    var lastWave;\r\n                    while(it.next()){\r\n                        var n = it.value;\r\n                        if(n.data.category == \"wave\"){\r\n                            waveCount+=1;\r\n                            lastWave = n;\r\n                        }\r\n                    }\r\n                    console.log(\"actualBoundsactualBoundsactualBoundsactualBounds\")\r\n                    var nodeSize = node.resizeObject.actualBounds;\r\n                    var waveSize = lastWave.resizeObject.naturalBounds\r\n                    // oliveWidth = (nodeSize.width-100)/waveCount\r\n                    oliveWidth = (nodeSize.width-0)*5/3/waveCount\r\n                    oliveWidth = (nodeSize.width-0)*3/(waveCount*3+2)\r\n                    if(oliveWidth<100){\r\n                        oliveWidth=100\r\n                    }\r\n                    // oliveWidth = waveSize.width*waveCount + waveSize.width*2/3\r\n                    // oliveWidth = waveSize.width\r\n                    if( oliveWidth > maxWidth){\r\n                        oliveWidth = maxWidth;\r\n                        // nodeSize.width = maxWidth*waveCount+100;\r\n                    }\r\n                    oliveHeight = nodeSize.height;\r\n                    if( oliveHeight > maxHeight){\r\n                        oliveHeight = maxHeight;\r\n                        // nodeSize.height  = maxWidth;\r\n                    }\r\n                    if( oliveHeight > oliveWidth){\r\n                        oliveHeight = oliveWidth;\r\n                        // nodeSize.height  = maxWidth;\r\n                    }\r\n                    node.diagram.startTransaction()\r\n                    // node.diagram.model.setDataProperty(node.data, \"desiredSize\",`${nodeSize.width} ${nodeSize.height}`)\r\n                    node.diagram.model.setDataProperty(node.data, \"oliveHeight\", oliveHeight)\r\n                    node.diagram.model.setDataProperty(node.data, \"oliveWidth\", oliveWidth)\r\n                                 //     e.subject.part.layout.isOngoing = true;\r\n                    //     e.subject.part.layout.isValidLayout = false;\r\n                    var it = e.subject.part.findSubGraphParts().iterator;\r\n                    layoutWaveGroup(it,node.diagram,e.subject.part)\r\n                    // node.diagram.updateAllTargetBindings()\r\n                    it.reset()\r\n                    while(it.next()){\r\n                        it.value.updateTargetBindings()\r\n                    }\r\n                    \r\n                    node.diagram.commitTransaction()\r\n                    setTimeout(()=>{\r\n                        e.subject.part.layout.isOngoing = true;\r\n                        e.subject.part.layout.isValidLayout = false;\r\n                    },100)\r\n                }\r\n            },\r\n            SelectionMoved: (e)=>{\r\n                // console.log(\"SelectionMovedSelectionMoved\",e.subject)\r\n                // if (!e.isTransactionFinished) {\r\n                //     return;\r\n                // }\r\n                try{\r\n                    var selnode = e.subject.first()\r\n                    if(!selnode) return;\r\n                    if(selnode.data.category == \"wave\"){\r\n                        if(selnode.containingGroup){\r\n                            selnode.containingGroup.layout.isValidLayout = false;\r\n                        }\r\n                    }\r\n                    if(selnode.data.category == \"autoText\"){\r\n                        if((selnode.data.role == \"shiText\" || selnode.data.role == \"xuText\")){\r\n                            selnode.diagram.startTransaction()\r\n                            console.log(\"SelectionMovedSelectionMovedSelectionMoved\")\r\n                            if(!selnode.__location){\r\n                                var obj = selnode.diagram.findNodeForKey(selnode.data.olive)\r\n                                var group = selnode.containingGroup\r\n                                if(obj){\r\n                                    var loc = group.location.copy().offset(group.data.oliveWidth*(obj.data.order-1),0)\r\n                                    selnode.__location = loc.copy().offset(obj.naturalBounds.width/2, 0)\r\n                                    selnode.__location = computeNewRotateLoc(group.location, selnode.__location, obj.angle)\r\n                                }\r\n                            }\r\n                            if(selnode.__location){\r\n                                console.log(\"selnode.__locationselnode.__locationselnode.__location\")\r\n                                if(selnode.data.order %2 == 0){\r\n                                    selnode.__offset = selnode.__location.copy().subtract(selnode.location)\r\n                                }else{\r\n                                    selnode.__offset = selnode.__location.copy().subtract(selnode.location)\r\n                                }\r\n                                delete selnode.__oldOrder\r\n                            }\r\n                            delete selnode.__oldLocation\r\n                            if(selnode.data.text.trim() != \"\"){\r\n                                selnode.data.nloc = true;\r\n                                selnode.diagram.model.setDataProperty(selnode.data, \"nloc\", true)\r\n                            }\r\n                            selnode.diagram.commitTransaction()\r\n                        }\r\n                        if(selnode.containingGroup && (selnode.containingGroup.data.category == \"yunGroup\"||selnode.containingGroup.data.category == \"yunpanGroup\")){\r\n                            selnode.containingGroup.__trtdNode.snapToGrid(selnode.data, selnode.containingGroup)\r\n                            // selnode.containingGroup.layout.isOngoing = true;\r\n                            selnode.containingGroup.layout.isValidLayout = false;\r\n                        }\r\n                    }\r\n                    if(selnode.data.category == \"shapeText\"){\r\n                        if(selnode.containingGroup && (selnode.containingGroup.data.category == \"yunpanGroup\")){\r\n                            selnode.containingGroup.__trtdNode.snapToGrid(selnode.data, selnode.containingGroup)\r\n                            // selnode.containingGroup.layout.isOngoing = true;\r\n                            selnode.containingGroup.layout.isValidLayout = false;\r\n                        }\r\n                    }\r\n                }catch(err){\r\n                    console.log(err)\r\n                }\r\n                // if(e.subject)\r\n            },\r\n            // \"toolManager.hoverDelay\": 600,\r\n            // \"toolManager.toolTipDuration\": 3000,\r\n            click: function(e) {\r\n                // closeToolbarWindow();\r\n                // removeNodeToolBar();\r\n                console.log(\"eeeeeeee:\",e)\r\n                that.clearAllTextBorder()\r\n                localStorage.setItem(\"TRTD_documentPoint\",go.Point.stringify(e.documentPoint))\r\n            },\r\n        }\r\n        this.diagram.setProperties(diagramConfig);\r\n        \r\n        this.diagram.commandHandler.doKeyDown = (e)=>{\r\n            this.dokeyDownFn(e)\r\n            // var cmd = this.diagram.commandHandler;\r\n            // go.CommandHandler.prototype.doKeyDown.call(cmd);\r\n        }\r\n        this.diagram.commandHandler.canCopySelection = function(){\r\n            // this.dokeyDownFn(e)\r\n            console.log(\"canCopySelectioncanCopySelection\")\r\n            var node = that.diagram.selection.first()\r\n            if(node){\r\n                if(node.data.category == \"axisGroup\" || node.data.category == \"yunGroup\"){\r\n                    return true;\r\n                }else{\r\n                    return false;\r\n                }\r\n            }\r\n            var cmd = this.diagram.commandHandler;\r\n            return go.CommandHandler.prototype.canCopySelection.call(cmd);\r\n        }\r\n        this.diagram.commandHandler.pasteFromClipboard = function(e, obj){\r\n            var coll = go.CommandHandler.prototype.pasteFromClipboard.call(this);\r\n            \r\n            // this.diagram.moveParts(coll, this._lastPasteOffset);\r\n            // this._lastPasteOffset.add(this.pasteOffset);\r\n            var it = coll.iterator;\r\n            var shiTextColl = []\r\n            var xuTextColl = []\r\n            var waveColl = []\r\n            var centerTextColl = []\r\n            var waveGroup = null\r\n            var yunGroup = null;\r\n            while(it.next()){\r\n                var n = it.value;\r\n                if(n.data.role == \"shiText\"){\r\n                    shiTextColl.push(n)\r\n                    continue;\r\n                }\r\n                if(n.data.role == \"xuText\"){\r\n                    xuTextColl.push(n)\r\n                    continue;\r\n                }\r\n                if(n.data.role == \"centerText\"){\r\n                    centerTextColl.push(n)\r\n                    continue;\r\n                }\r\n                if(n.data.category == \"wave\" && n.data.role != \"waveTail\"){\r\n                    waveColl.push(n)\r\n                    continue;\r\n                }\r\n                if(n.data.category == \"waveGroup\"){\r\n                    waveGroup = n;\r\n                }\r\n            }\r\n            if(!waveGroup){\r\n                // coll.clear()\r\n                // coll.removeAll()\r\n                coll = new go.Set(go.Part)\r\n                return coll;\r\n            }\r\n\r\n            waveColl = waveColl.sort(function(a,b){\r\n                // console.log(`Number(a.data.order)${Number(a.data.order)} > Number(b.data.order) ${Number(b.data.order)}`,Number(a.data.order) > Number(b.data.order))\r\n                return Number(a.data.order) - Number(b.data.order)\r\n            })\r\n            shiTextColl.sort(function(a,b){\r\n                return Number(a.data.order) - Number(b.data.order)\r\n            })\r\n            xuTextColl.sort(function(a,b){\r\n                return Number(a.data.order) - Number(b.data.order)\r\n            })\r\n            centerTextColl.sort(function(a,b){\r\n                return Number(a.data.order) - Number(b.data.order)\r\n            })\r\n\r\n            waveColl.forEach(function(obj,index){\r\n                obj.data.shiText = shiTextColl[index].data.key\r\n                obj.data.xuText = xuTextColl[index].data.key\r\n                obj.data.centerText = centerTextColl[index].data.key\r\n                shiTextColl[index].data.olive = obj.data.key\r\n                xuTextColl[index].data.olive = obj.data.key\r\n            })\r\n            console.log(\"pasteFromClipboardpasteFromClipboard\")\r\n            return coll;\r\n            // var cmd = this.diagram.commandHandler;\r\n            // go.CommandHandler.prototype.doKeyDown.call(cmd);\r\n        }\r\n        this.diagram.commandHandler.deleteSelection = ()=>{\r\n         \r\n            return this.deleteSelection();\r\n        }\r\n        this.diagram.toolManager.resizingTool.computeReshape = function() { \r\n            if(this.adornedObject.part.data.category == \"shapeText\"){\r\n                return false\r\n            }\r\n            go.TextEditingTool.prototype.doCancel.call(this);\r\n\r\n        }\r\n        this.diagram.toolManager.textEditingTool.doCancel = function(){\r\n            // var textEditor = this.diagram.currentTextEditor;\r\n            // console.log(\"textEditor。。。。\")\r\n            var tool = this;\r\n            try{\r\n                if(this.textBlock){\r\n                    var node = this.textBlock.part;\r\n                }\r\n            }catch(e){\r\n                console.log(e)\r\n            }\r\n            setTimeout(()=>{\r\n                try{\r\n                    if(node && node.data.category == \"wave\"){\r\n                        if(node.containingGroup && node.containingGroup.data.textAngle == \"horizontal\" && node.containingGroup.data.centerTextAngle == \"independent\"){\r\n                            // 如果文字方向为正向，且中线文字为正向\r\n                            node.findObject(\"TEXT\").visible = false;\r\n                            var centerText = node.diagram.findNodeForKey(node.data.centerText)\r\n                            if(centerText){\r\n                              centerText.visible = true;\r\n                            }\r\n                          }\r\n                    }\r\n                }catch(e){\r\n                    console.info(e)\r\n                }\r\n            },100)\r\n            // var cmd = this.diagram.commandHandler;\r\n            // this.doCancel()\r\n            // go.CommandHandler.prototype.deleteSelection.call(cmd);\r\n            go.TextEditingTool.prototype.doCancel.call(tool);\r\n        }\r\n\r\n        this.diagram.toolManager.resizingTool.computeReshape = function() { \r\n            // 保持图片宽高比\r\n            if(this.adornedObject.part.data.category == \"pic\"){\r\n                return false; \r\n            }    \r\n            return true\r\n        }\r\n\r\n        if( window.TextEditor){\r\n            console.log(\"TextEditorTextEditorTextEditorTextEditorTextEditorTextEditorTextEditorTextEditorTextEditor\")\r\n            this.diagram.toolManager.textEditingTool.defaultTextEditor = window.TextEditor;\r\n        }\r\n        this.diagram.toolManager.clickCreatingTool.archetypeNodeData = {\r\n            category: \"autoText\",\r\n            \"font\":\"18px 'Microsoft YaHei'\",\r\n            text: \"空白文本\",\r\n            level: 0\r\n        };\r\n\r\n        this.diagram.groupTemplateMap.add(\"waveGroup1\",     $(go.Group, \"Spot\",\r\n        { selectionObjectName: \"SHAPE\" },\r\n        { locationObjectName: \"SHAPE\", locationSpot: go.Spot.Center },\r\n        new go.Binding(\"location\", \"loc\", go.Point.parse).makeTwoWay(go.Point.stringify),\r\n        { rotatable: true },\r\n        new go.Binding(\"angle\",\"angle\",function(v,m,a){\r\n            console.log(\"vvvvvvvvvvvvvvvvvvv:\",v,\" m:\",m,\" a:\",a)\r\n            // m.diagram.startTransaction()\r\n            // for(var i=0;i<m.diagram.model.nodeDataArray.length-1;i++){\r\n            //     if(m.diagram.model.nodeDataArray[i].group == m.key){\r\n            //         m.diagram.model.setDataProperty(m.diagram.model.nodeDataArray[i], \"angle\", v)\r\n            //     }\r\n            // }\r\n            // // var group = a.findNodeDataForKey(m.group)\r\n            // // a.setDataProperty(group, \"angle\", v)\r\n            // m.diagram.commitTransaction()\r\n            return v;\r\n        }).makeTwoWay(function(v,m,a){\r\n            console.log(\"v:\",v,\" m:\",m,\" a:\",a)\r\n            // a.startTransaction()\r\n            // for(var i=0;i<a.nodeDataArray.length-1;i++){\r\n            //     if(a.nodeDataArray[i].group == m.key){\r\n            //         a.setDataProperty(a.nodeDataArray[i], \"angle\", v)\r\n            //     }\r\n            // }\r\n            // // var group = a.findNodeDataForKey(m.group)\r\n            // // a.setDataProperty(group, \"angle\", v)\r\n            // a.commitTransaction()\r\n            return v;\r\n        }),\r\n        { resizable: true, resizeObjectName: \"SHAPE\" },\r\n        $(go.Panel, \"Vertical\",\r\n          $(go.TextBlock, { font: \"bold 12pt sans-serif\" },\r\n            new go.Binding(\"text\", \"key\")),\r\n          $(go.Shape, { name: \"SHAPE\", fill: \"transparent\" },\r\n            new go.Binding(\"desiredSize\", \"desiredSize\", go.Size.parse).makeTwoWay(go.Size.stringify))\r\n        )\r\n      ))\r\n\t\t// this.config = config;\r\n\t\t// this.modelChangedListener = config.modelChangedListener;\r\n\t\t// this.type = config.type;\r\n\t\t// this.diagram = {};\r\n        // this.model = config.model;\r\n        // this.tpid = config.tpid||Date.now();\r\n        // this.InitialFontSize = 18\r\n        // this.tdCurrentTheme = {\r\n        //     id: 6,\r\n        //     borderWidth: 2,\r\n        //     borderColor: \"black\",\r\n        //     groupColor: \"rgba(0,0,0,0)\",\r\n        //     groupStroke: \"rgba(0,0,0,0)\",\r\n        //     groupStrokeWidth: 0,\r\n        //     themeName: \"黑白\",\r\n        //     linkColor: \"black\",\r\n        //     colorRange: \"white\"\r\n        // }\r\n\t\t// // 初始化diagram\r\n\t\t// this.initDiagram(div, config);\r\n\t\t// this.initListener();\r\n\t\t// // Then you will need to construct a Model (usually a GraphLinksModel) for the Diagram, initialize its data by setting its Model.nodeDataArray and other properties, and then set the diagram's model.\r\n        // if(this.model){\r\n        //     this.initModel();\r\n        // }\r\n    }\r\n\r\n     /**\r\n     * 添加节点模板\r\n     */\r\n    addNodeTemplate(){\r\n\r\n        // myDiagram.nodeTemplateMap.add(\"dipan\", this.createDipanTemplate(layerThickness,tdDipanTextAngle));\r\n        // myDiagram.nodeTemplateMap.add(\"Root\", this.getDipanRootTemplate(layerThickness));\r\n        // myDiagram.nodeTemplateMap.add(\"text\", );\r\n        var myDiagram = this.diagram\r\n        myDiagram.nodeTemplateMap.add(\"0\", createNodeTemplate(this.diagram));\r\n        myDiagram.nodeTemplateMap.add(\"1\", createNodeTemplate(this.diagram));\r\n        myDiagram.nodeTemplateMap.add(\"2\", createNodeTemplate(this.diagram));\r\n        myDiagram.nodeTemplateMap.add(\"3\", createPictureSingleNodeTemplate(this.diagram));\r\n        myDiagram.nodeTemplateMap.add(\"4\", createPictureNodeTemplate(this.diagram));\r\n        myDiagram.nodeTemplateMap.add(\"text\", createTextNodeTemplate(this.diagram));\r\n        myDiagram.nodeTemplateMap.add(\"\", createNodeTemplate(this.diagram));\r\n\r\n        myDiagram.nodeTemplateMap.add(\"8\",createNodeSvgTemplate(this.diagram));\r\n        myDiagram.nodeTemplateMap.add(\"9\", createArcNodeTemplate(this.diagram));\r\n        myDiagram.nodeTemplateMap.add(\"line\", createLineNodeTemplate(this.diagram));\r\n        // myDiagram.nodeTemplateMap.add(\"wave\", createWaveNodeTemplate(this.diagram));\r\n        // var sampleNode = nodeTemplateFactory(\"sample\")\r\n        myDiagram.nodeTemplateMap.add(\"wave\", nodeTemplateFactory(\"wave\",{diagram:myDiagram}).getNodeTemplate());\r\n        myDiagram.nodeTemplateMap.add(\"waveTail\", nodeTemplateFactory(\"waveTail\",{diagram:myDiagram}).getNodeTemplate());\r\n        myDiagram.nodeTemplateMap.add(\"iconText\", nodeTemplateFactory(\"iconText\",{diagram:myDiagram}).getNodeTemplate());\r\n        // myDiagram.nodeTemplateMap.add(\"cbian\",  nodeTemplateFactory(\"cbian\",{diagram:this.diagram}).getNodeTemplate())\r\n        myDiagram.nodeTemplateMap.add(\"pic\",  nodeTemplateFactory(\"pic\",{diagram:this.diagram}).getNodeTemplate())\r\n        myDiagram.nodeTemplateMap.add(\"shape\",  nodeTemplateFactory(\"shape\",{diagram:this.diagram}).getNodeTemplate())\r\n        myDiagram.nodeTemplateMap.add(\"autoText\", nodeTemplateFactory(\"autoText\",{diagram:myDiagram}).getNodeTemplate());\r\n        myDiagram.nodeTemplateMap.add(\"shapeText\", nodeTemplateFactory(\"shapeText\",{diagram:myDiagram}).getNodeTemplate());\r\n        myDiagram.groupTemplateMap.add(\"labelGroup\", nodeTemplateFactory(\"labelGroup\",{diagram:myDiagram}).getNodeTemplate());\r\n        myDiagram.groupTemplateMap.add(\"picGroup\", nodeTemplateFactory(\"picGroup\",{diagram:myDiagram}).getNodeTemplate());\r\n        myDiagram.groupTemplateMap.add(\"waveGroup\",  nodeTemplateFactory(\"waveGroup\",{diagram:this.diagram}).getNodeTemplate())\r\n        myDiagram.groupTemplateMap.add(\"axisGroup\",  nodeTemplateFactory(\"axisGroup\",{diagram:this.diagram}).getNodeTemplate())\r\n        myDiagram.groupTemplateMap.add(\"yunGroup\",  nodeTemplateFactory(\"yunGroup\",{diagram:this.diagram}).getNodeTemplate())\r\n        myDiagram.groupTemplateMap.add(\"yunpanGroup\",  nodeTemplateFactory(\"yunpanGroup\",{diagram:this.diagram}).getNodeTemplate())\r\n        \r\n    }\r\n\r\n    deleteSelection(node){\r\n        var cmd = this.diagram.commandHandler;\r\n        if(!node){\r\n            node = this.diagram.selection.first()\r\n        }\r\n        var locateNode = null;\r\n        var shiText,xuText,centerText;\r\n        if(!node) return;\r\n        if(!node.canDelete()) return;\r\n        if(node.data.category == \"yunGroup\" && !node.data.deletable){   \r\n            return\r\n        }\r\n        this.diagram.startTransaction(\"deleteSelection1\");\r\n        var count = 0;\r\n        if(node){\r\n            if(node.data.category == \"axisGroup\"){\r\n                var it = node.findSubGraphParts().iterator;\r\n                while (it.next()) {\r\n                    var n = it.value;\r\n                    this.diagram.model.removeNodeData(n.data)\r\n                }\r\n                this.diagram.model.removeNodeData(node.data)\r\n            }\r\n            if(node.data.category == \"wave\" && node.containingGroup){\r\n                var it = node.containingGroup.findSubGraphParts().iterator;\r\n                while (it.next()) {\r\n                    var n = it.value;\r\n                    if(n.data.category == \"wave\" && n.data.role != \"waveTail\"){\r\n                        if(n.data.order == node.data.order+1){\r\n                            locateNode = n;\r\n                        }\r\n                        count++;\r\n                    }\r\n                    if(n.data.role == \"shiText\" && n.data.order == node.data.order){\r\n                        shiText = n;\r\n                    }\r\n                    if(n.data.role == \"xuText\" && n.data.order == node.data.order){\r\n                        xuText = n;\r\n                    }\r\n                    if(n.data.role == \"centerText\" && n.data.order == node.data.order){\r\n                        centerText = n;\r\n                    }\r\n\r\n                }\r\n                if(count<=1){\r\n                    this.diagram.commitTransaction(\"deleteSelection1\");\r\n                    return;\r\n                }\r\n                node.containingGroup.layout.isOngoing = true;\r\n                node.containingGroup.layout.isValidLayout = false;\r\n                if(node.containingGroup.containingGroup){\r\n                    node.containingGroup.containingGroup.layout.isOngoing = true;\r\n                    node.containingGroup.containingGroup.layout.isValidLayout = false; \r\n                }\r\n            }\r\n            // 云盘 维度删除\r\n            if(node.data.category == \"autoText\" &&  node.data.subRole == \"dimText\" && node.containingGroup && node.containingGroup.data.category == \"yunpanGroup\"){\r\n                var it = node.containingGroup.findSubGraphParts().iterator;\r\n                var deleteNodes = []\r\n                var deleteLines = []\r\n                var normDim = \"X\",unnormDim = \"Y\", lineRole = \"verticalLine\"\r\n                if(node.data.dimX == 0){\r\n                    normDim = \"Y\"\r\n                    unnormDim = \"X\"\r\n                    lineRole = \"horizontalLine\"\r\n                }\r\n                while (it.next()) {\r\n                    var n = it.value;\r\n                    if(n.data.subRole == \"dimText\" && n.data[\"dim\"+unnormDim] == 0){\r\n                        // if(n.data.order == node.data.order+1){\r\n                        //     locateNode = n;\r\n                        // }\r\n                        count++;\r\n                    }\r\n                    if(n.data.subRole == \"yunpanText\" && n.data[\"order\"+normDim] == node.data[\"dim\"+normDim]){\r\n                        deleteNodes.push(n.data)\r\n                    }\r\n                    if(n.data.category == \"line\"  && n.data.role == lineRole\r\n                    && n.data[\"order\"]  == node.data[\"dim\"+normDim]\r\n                    ){\r\n                        deleteLines.push(n.data)\r\n                    }\r\n                    // if(n.data.role == \"xuText\" && n.data.order == node.data.order){\r\n                    //     xuText = n;\r\n                    // }\r\n                    // if(n.data.role == \"centerText\" && n.data.order == node.data.order){\r\n                    //     centerText = n;\r\n                    // }\r\n\r\n                }\r\n                \r\n                if(count<=1){\r\n                    this.diagram.commitTransaction(\"deleteSelection1\");\r\n                    return;\r\n                }\r\n\r\n                it.reset()\r\n                while (it.next()) {\r\n                    var n = it.value;\r\n                    if(n.data.subRole == \"dimText\" && n.data[\"dim\"+unnormDim] == 0 && n.data[\"dim\"+normDim] > node.data[\"dim\"+normDim]){\r\n                        // if(n.data.order == node.data.order+1){\r\n                        //     locateNode = n;\r\n                        // }\r\n                        n.diagram.model.setDataProperty(n.data, \"dim\"+normDim, n.data[\"dim\"+normDim] - 1)\r\n                        // count++;\r\n                    }\r\n                    if(n.data.subRole == \"yunpanText\" && n.data[\"order\"+normDim] > node.data[\"dim\"+normDim]){\r\n                        n.diagram.model.setDataProperty(n.data, \"order\"+normDim, n.data[\"order\"+normDim] - 1)\r\n                    }\r\n                    if(n.data.category == \"line\"  && n.data.role == lineRole\r\n                    && n.data[\"order\"]  > node.data[\"dim\"+normDim]\r\n                    ){\r\n                        n.diagram.model.setDataProperty(n.data, \"order\", n.data[\"order\"] - 1)\r\n                    }\r\n                    // if(n.data.role == \"xuText\" && n.data.order == node.data.order){\r\n                    //     xuText = n;\r\n                    // }\r\n                    // if(n.data.role == \"centerText\" && n.data.order == node.data.order){\r\n                    //     centerText = n;\r\n                    // }\r\n\r\n                }\r\n\r\n                node.diagram.model.removeNodeDataCollection(deleteLines)\r\n                node.diagram.model.removeNodeDataCollection(deleteNodes)\r\n                node.containingGroup.layout.isOngoing = true;\r\n                node.containingGroup.layout.isValidLayout = false;\r\n                // if(node.containingGroup.containingGroup){\r\n                //     node.containingGroup.containingGroup.layout.isOngoing = true;\r\n                //     node.containingGroup.containingGroup.layout.isValidLayout = false; \r\n                // }\r\n            }\r\n\r\n\r\n        }\r\n        //myDiagram.currentTool.doCancel();\r\n        //go.CommandHandler.prototype.redo.call(cmd);\r\n        // myDiagram.clearSelection();\r\n        if(xuText){\r\n            this.diagram.model.removeNodeData(xuText.data)\r\n        }\r\n        if(shiText){\r\n            this.diagram.model.removeNodeData(shiText.data)\r\n        }\r\n        if(centerText){\r\n            this.diagram.model.removeNodeData(centerText.data)\r\n        }\r\n        go.CommandHandler.prototype.deleteSelection.call(cmd);\r\n\r\n        \r\n\r\n        this.diagram.commitTransaction(\"deleteSelection1\");\r\n        // this.layoutAllGroup()\r\n        // setTimeout(()=>{\r\n        //     // this.diagram.updateAllTargetBindings()\r\n        //     this.diagram.layoutDiagram(true)\r\n        // },500)\r\n        if (locateNode) {\r\n            this.diagram.select(locateNode);\r\n        }\r\n    }\r\n\r\n\r\n    layoutLabelGroup(){\r\n        console.log(\"layoutLabelGroup\")\r\n        setTimeout(()=>{\r\n            var it = this.diagram.nodes.iterator;\r\n            while (it.next()) {\r\n                var n = it.value;\r\n                if(n.data.category == \"labelGroup\"){\r\n                    n.layout.isOngoing = true;\r\n                    n.layout.isValidLayout = false;\r\n                }\r\n            }\r\n        },200)\r\n    }\r\n\r\n    layoutAllGroup(){\r\n        console.log(\"layoutAllGroup\")\r\n        var it = this.diagram.nodes.iterator;\r\n        while (it.next()) {\r\n            var n = it.value;\r\n            if(n.data.isGroup == true){\r\n                n.layout.isOngoing = true;\r\n                n.layout.isValidLayout = false;\r\n            }\r\n        }\r\n    }\r\n\r\n    // 拆分橄榄\r\n    splitOlive2Half(){\r\n        var diagram = this.diagram\r\n        var node = diagram.selection.first()\r\n        if(!node) return;\r\n        if(node.data.category != \"wave\"){\r\n            return;\r\n        }\r\n        if(node.data.order ==1) return;\r\n        if(!node.containingGroup){\r\n            return;\r\n        }\r\n        this.diagram.startTransaction(\"splitOlive2Half\")\r\n        node.containingGroup.layout.isOngoing = true;\r\n        node.containingGroup.layout.isValidLayout = false;\r\n        var axisData = this.addAxisGroup({emptyAxis: true})\r\n        if(!axisData) {\r\n            this.diagram.commitTransaction(\"splitOlive2Half\")\r\n            return;\r\n        }\r\n        var waveGroup;\r\n        for(var i=0;i<axisData.length;i++){\r\n            if(axisData[i].category == \"waveGroup\"){\r\n                waveGroup = axisData[i]\r\n                break;\r\n            }\r\n        }\r\n        if(!waveGroup) {\r\n            this.diagram.commitTransaction(\"splitOlive2Half\")\r\n            return;\r\n        };\r\n        var curOrder = node.data.order\r\n        var it = node.containingGroup.findSubGraphParts().iterator;\r\n        var splitOlive = []\r\n        while (it.next()) {\r\n            var n = it.value;\r\n            if(n.data.category == \"wave\" && n.data.order >= curOrder && n.data.role != \"waveTail\"){\r\n                splitOlive.push(n)\r\n            }\r\n        }\r\n        for(var i=0;i<splitOlive.length;i++){\r\n            this.diagram.model.setDataProperty(splitOlive[i].data, \"group\", waveGroup.key)\r\n            var shiText = this.diagram.model.findNodeDataForKey(splitOlive[i].data.shiText)\r\n            var centerText = this.diagram.model.findNodeDataForKey(splitOlive[i].data.centerText)\r\n            var xuText = this.diagram.model.findNodeDataForKey(splitOlive[i].data.xuText)\r\n            if(shiText){\r\n                this.diagram.model.setDataProperty(shiText, \"group\", waveGroup.key)\r\n            }\r\n            if(centerText){\r\n                this.diagram.model.setDataProperty(centerText, \"group\", waveGroup.key)\r\n            }\r\n            if(xuText){\r\n                this.diagram.model.setDataProperty(xuText, \"group\", waveGroup.key)\r\n            }\r\n        }\r\n \r\n        this.diagram.commitTransaction(\"splitOlive2Half\")\r\n    }\r\n\r\n    // 分离常变\r\n    splitOlive2Cbian(){\r\n        var diagram = this.diagram\r\n        var node = diagram.selection.first()\r\n        if(!node) return;\r\n        if(node.data.category != \"wave\"){\r\n           return;\r\n        }\r\n\r\n        this.diagram.startTransaction(\"splitOlive2Cbian\")\r\n        // 删除橄榄\r\n        var shiText = this.diagram.model.findNodeDataForKey(node.data.shiText)\r\n        var centerText = this.diagram.model.findNodeDataForKey(node.data.centerText)\r\n        var xuText = this.diagram.model.findNodeDataForKey(node.data.xuText)\r\n        var cbian = {\r\n            shiText: shiText.text,\r\n            centerText: centerText.text,\r\n            xuText: xuText.text,\r\n            basePoint:node.location.copy().offset(0,-300),\r\n            group: node.data.group\r\n        }\r\n        this.deleteSelection(node)\r\n        // 添加常变\r\n        this.addCbian(cbian)\r\n        this.diagram.commitTransaction(\"splitOlive2Cbian\")\r\n    }\r\n\r\n    // 增加常变\r\n    addCbian(cbian){\r\n        console.log(\"addCbian\")\r\n        var diagram = this.diagram\r\n        var node = diagram.selection.first();\r\n        var group = null\r\n        if(node && node.data.category == \"axisGroup\"){\r\n            group=node.data.key;\r\n        }\r\n        var e = diagram.lastInput\r\n        diagram.startTransaction(\"addCbian\")\r\n        var groupKey = helpers.guid()\r\n        \r\n        if(cbian && cbian.basePoint){\r\n            var basePoint = cbian.basePoint\r\n        }else{\r\n            var basePoint = e.documentPoint\r\n        }\r\n        var groupData = {\"category\":\"picGroup\", \r\n         \"role\":\"cbian\", \"isGroup\":true, \"level\":0, \r\n        \"key\":groupKey, \"loc\":go.Point.stringify(basePoint), \"deletable\":true}\r\n        if(group){\r\n            groupData.group = group\r\n        }\r\n        if(cbian && cbian.group){\r\n            groupData.group = cbian.group\r\n        }\r\n        var picData = { \"group\":groupKey, \"text\":\"\", \r\n        \"resizable\":false, \"category\":\"pic\", \r\n        \"loc\":go.Point.stringify(basePoint),\r\n        \"picture\":\"https://static.365trtd.com/system/cbian/cbian.png\", \"width\":150, \"height\":150}\r\n        // \"picture\":\"https://static.365trtd.com/system/cbian/cbian.png\", \"width\":150, \"height\":150}\r\n        \r\n        var themeData = {\"text\":\"总结\", \"deletable\":true,  \"fill\":\"black\", \"iconVisible\":false, \r\n        \"locationSpot\":\"1 0 0 0\", \"textAlign\":\"center\", \"category\":\"autoText\", \r\n        \"loc\":go.Point.stringify(basePoint.copy().offset(3,-3)), \r\n        \"movable\":true, \"group\":groupKey}\r\n        var timeData = {\"text\":\"时间\", \"deletable\":true,  \"fill\":\"black\", \"iconVisible\":false, \r\n        \"locationSpot\":\"1 0 0 0\", \"textAlign\":\"center\", \"category\":\"autoText\", \r\n        \"loc\":go.Point.stringify(basePoint.copy().offset(150, 0)), \r\n        \"movable\":true, \"group\":groupKey}\r\n        var energeData = {\"text\":\"能量\", \"deletable\":true, \"fill\":\"black\", \"iconVisible\":false, \r\n        \"locationSpot\":\"1 0 0 0\", \"textAlign\":\"center\", \"category\":\"autoText\", \r\n        \"loc\":go.Point.stringify(basePoint.copy().offset(0, -150)), \r\n        \"movable\":true, \"group\":groupKey}\r\n        var text1Data = {\"text\":\"总结1\", \"deletable\":true,  \"textStroke\":\"#0e399d\", \"iconVisible\":false, \r\n        \"locationSpot\":\"0 0 0 0\", \"textAlign\":\"left\", \"category\":\"autoText\", \r\n        \"loc\":go.Point.stringify(basePoint.copy().offset(155*Math.cos(30*Math.PI/180), -150*Math.sin(30*Math.PI/180))), \r\n        \"movable\":true, \"group\":groupKey}\r\n        var text2Data = {\"text\":\"总结3\", \"deletable\":true, \"textStroke\":\"#FFC000\", \"iconVisible\":false, \r\n        \"locationSpot\":\"0 0.5 0 0\", \"textAlign\":\"left\", \"category\":\"autoText\", \r\n        \"loc\":go.Point.stringify(basePoint.copy().offset(145*Math.cos(45*Math.PI/180), -150*Math.sin(45*Math.PI/180))), \r\n        \"movable\":true, \"group\":groupKey}\r\n        var text3Data = {\"text\":\"总结2\", \"deletable\":true, \"textStroke\":\"#cb1c27\", \"iconVisible\":false, \r\n        \"locationSpot\":\"0 1 0 0\", \"textAlign\":\"left\", \"category\":\"autoText\", \r\n        \"loc\":go.Point.stringify(basePoint.copy().offset(145*Math.cos(70*Math.PI/180), -140*Math.sin(70*Math.PI/180))), \r\n        \"movable\":true, \"group\":groupKey}\r\n\r\n        if(cbian){\r\n            text1Data.text = cbian.shiText;\r\n            text2Data.text = cbian.centerText;\r\n            text3Data.text = cbian.xuText;\r\n        }\r\n        diagram.model.addNodeData(text1Data)\r\n        diagram.model.addNodeData(text2Data)\r\n        diagram.model.addNodeData(text3Data)\r\n        diagram.model.addNodeData(themeData)\r\n        diagram.model.addNodeData(timeData)\r\n        diagram.model.addNodeData(energeData)\r\n        diagram.model.addNodeData(picData)\r\n        diagram.model.addNodeData(groupData)\r\n        \r\n    //     {\"text\":\"自由文本\",\r\n    //     \"deletable\":true, \r\n    //     \"role\":\"freeText\",\r\n    //     \"fill\":\"black\", \r\n    //     \"iconVisible\":false, \r\n    //     \"locationSpot\":\"0.5 0.5 0 0\", \r\n    //     \"textAlign\":\"center\", \r\n    //     \"category\":\"autoText\", \r\n    //     \"loc\": go.Point.stringify(e.documentPoint), \r\n    //     \"movable\":true, \"group\":node.data.key\r\n    //    }\r\n\r\n        diagram.commitTransaction(\"addCbian\")\r\n    }\r\n    adjustTextAngle(...obj){\r\n        adjustTextAngle(obj)\r\n    }\r\n    // 增加橄榄\r\n    addOlive(node, cbian){\r\n        console.log(\"addOliveaddOlive\")\r\n        var diagram = this.diagram\r\n        if(!node){\r\n            node = diagram.selection.first();\r\n        }\r\n        if(!node) return;\r\n        var count = 0\r\n        var labelGroup;\r\n        var it = node.containingGroup.findSubGraphParts().iterator;\r\n        var oliveWidth = node.containingGroup.data.oliveWidth;\r\n        while (it.next()) {\r\n            var n = it.value;\r\n            if(n.data.category == \"wave\"){\r\n                count++;\r\n            }\r\n        }\r\n        var maxOlive = 50;\r\n        if(node.containingGroup.data.maxOlive != null){\r\n            maxOlive = node.containingGroup.data.maxOlive\r\n        }\r\n        if(count>maxOlive){\r\n            return;\r\n        }\r\n        var curShiText = this.diagram.findNodeForKey(node.data.shiText)\r\n        var curXuText = this.diagram.findNodeForKey(node.data.xuText)\r\n        diagram.startTransaction(\"dspiral\")\r\n        var order = 1000;\r\n        if(node.data.order != null){\r\n            order = Number(node.data.order)+0.5;\r\n        }\r\n\r\n        var data = JSON.parse(JSON.stringify(node.data))\r\n        Object.assign(data, {\r\n            \"key\": helpers.guid(), \r\n            \"order\": order,\r\n            \"text\":\"\",\r\n        })\r\n        if(cbian){\r\n            data.text = cbian.centerText\r\n        }\r\n        delete data.centerText\r\n        delete data.__gohashid\r\n        delete data.hyperlink\r\n        delete data.remark\r\n        // var data =  {\"category\":\"wave\", \r\n        //     \"text\":\"\", \r\n        //     \"level\":0, \"key\": helpers.guid(), \r\n        //     \"group\":node.data.group, \r\n        //     \"loc\":node.data.loc,\r\n        //     \"desiredSize\":node.data.desiredSize, \r\n        //     \"order\": order,\r\n        //     \"font\": node.data.font,\r\n        //     \"textStroke\": node.data.textStroke,\r\n        //     \"textAlign\": node.data.textAlign,\r\n        //     \"spacingline\": node.data.spacingline,\r\n        // }\r\n        var shiText = JSON.parse(JSON.stringify(curShiText.data))\r\n        delete shiText.__gohashid\r\n        delete shiText.textAlign\r\n        delete shiText.hyperlink\r\n        delete shiText.remark\r\n        delete shiText.nloc\r\n        Object.assign(shiText, {\r\n            \"key\": helpers.guid(), \r\n            \"order\": order,\r\n            \"olive\": data.key,\r\n            \"text\":\"\",\r\n        })\r\n        if(cbian){\r\n            shiText.text = cbian.shiText\r\n        }\r\n        // var shiText = {\r\n        // \"text\":\"\",\r\n        // \"minSize\":`${oliveWidth-30} 30`,\r\n        // \"deletable\":false,\r\n        //  \"font\":curShiText.data.font || \"18px 'Microsoft YaHei'\", \r\n        // //  \"textStroke\": curShiText.textStroke,\r\n        //  \"textAlign\": curShiText.data.textAlign,\r\n        //  \"spacingline\": curShiText.data.spacingline,\r\n        //  \"category\":\"autoText\", \r\n        //  \"key\": helpers.guid(), \"width\":300, \r\n        //  \"role\":\"shiText\", \"level\":0, \"group\": node.data.group, \r\n        //  \"order\": order,\r\n        //  \"olive\": data.key,\r\n        // }\r\n        var xuText = JSON.parse(JSON.stringify(curXuText.data))\r\n        delete xuText.__gohashid\r\n        delete xuText.textAlign\r\n        delete xuText.hyperlink\r\n        delete xuText.remark\r\n        delete xuText.nloc\r\n        Object.assign(xuText, {\r\n            \"key\": helpers.guid(), \r\n            \"order\": order,\r\n            \"olive\": data.key,\r\n            \"text\":\"\",\r\n        })\r\n        if(cbian){\r\n            xuText.text = cbian.xuText\r\n        }\r\n        // var xuText = {\r\n        // \"text\":\"\",\r\n        // \"minSize\":`${oliveWidth-30} 30`,\r\n        // \"deletable\":false,\r\n        //  \"font\": curXuText.data.font || \"18px 'Microsoft YaHei'\", \r\n        //  \"textAlign\": curXuText.data.textAlign,\r\n        //  \"spacingline\": curXuText.data.spacingline,\r\n        //  \"category\":\"autoText\", \r\n        //  \"key\": helpers.guid(), \"width\":300, \r\n        //  \"role\":\"xuText\", \"level\":0, \"group\": node.data.group, \r\n        //  \"order\": order,\r\n        //  \"olive\": data.key\r\n        // }\r\n        data.shiText = shiText.key\r\n        data.xuText = xuText.key\r\n\r\n\r\n        console.log(\"orderorderorderorder:\",order)\r\n        if(node.containingGroup){\r\n            node.containingGroup.layout.isOngoing = true;\r\n            // node.containingGroup.layout.isInit = true;\r\n            node.containingGroup.layout.isValidLayout = false;\r\n            if(node.containingGroup.containingGroup){\r\n                node.containingGroup.containingGroup.layout.isOngoing = true;\r\n                node.containingGroup.containingGroup.layout.isValidLayout = false; \r\n            }\r\n        }\r\n        data.isNew = true\r\n        diagram.model.addNodeData(data);\r\n        diagram.model.addNodeData(shiText);\r\n        diagram.model.addNodeData(xuText);\r\n        //diagram.model.setDataProperty(node.containingGroup,\"width\",300)\r\n        // diagram.model.setDataProperty(node.containingGroup,\"width\",300)\r\n        diagram.commitTransaction(\"dspiral\")\r\n        // this.diagram.updateAllTargetBindings()\r\n        // setTimeout(()=>{\r\n        //     // this.diagram.updateAllTargetBindings()\r\n        //     // this.diagram.layoutDiagram(true)\r\n        //     node.containingGroup.layout.isOngoing = true;\r\n        //     // node.containingGroup.layout.isInit = true;\r\n        //     node.containingGroup.layout.isValidLayout = false;\r\n        //     if(node.containingGroup.containingGroup){\r\n        //         node.containingGroup.containingGroup.layout.isOngoing = true;\r\n        //         node.containingGroup.containingGroup.layout.isValidLayout = false; \r\n        //     }\r\n        // },500)\r\n        // this.layoutAllGroup()\r\n    }\r\n\r\n\r\n    getAxisGroupData(options){\r\n        var e = this.diagram.lastInput\r\n        // diagram.startTransaction(\"addCbian\")\r\n        // var groupKey = helpers.guid()\r\n        \r\n        var basePoint = e.documentPoint\r\n        var baseLoc = go.Point.stringify(basePoint)\r\n  var axisGroupKey = helpers.guid()\r\n  var labelGroupKey = helpers.guid()\r\n  var waveGroupKey = helpers.guid()\r\n  var olive1Key = helpers.guid()\r\n  var olive2Key = helpers.guid()\r\n  var olive3Key = helpers.guid()\r\n  var olive4Key = helpers.guid()\r\n  var olive1ShiTextKey = helpers.guid()\r\n  var olive1XuTextKey = helpers.guid()\r\n  var olive2ShiTextKey = helpers.guid()\r\n  var olive2XuTextKey = helpers.guid()\r\n  var olive3ShiTextKey = helpers.guid()\r\n  var olive3XuTextKey = helpers.guid()\r\n  var olive4ShiTextKey = helpers.guid()\r\n  var olive4XuTextKey = helpers.guid()\r\n  var olive1CenterTextKey = helpers.guid()\r\n  var olive2CenterTextKey = helpers.guid()\r\n  var olive3CenterTextKey = helpers.guid()\r\n  var olive4CenterTextKey = helpers.guid()\r\n\r\n  var temp = [\r\n  {\"category\":\"labelGroup\", \"group\":axisGroupKey, \"role\":\"labelGroup\", \"isGroup\":true, \"level\":0, \"key\":labelGroupKey, \"loc\":go.Point.stringify(basePoint.copy().offset(30,700)), \"deletable\":false, \"selectable\":false},\r\n{\"category\":\"waveGroup\",\"maxOlive\":15, \"deletable\":false, \"haveTail\":true, \"oliveType\":\"Wave\", \"shiStroke\":\"#0e399d\", \"xuStroke\":\"#cb1c27\", \"centerStroke\":\"rgba(9, 166, 9, 1)\", \"oliveWidth\":150, \"oliveHeight\":120, \"isGroup\":true, \"level\":0, \"key\":waveGroupKey, \"loc\":baseLoc, \"angle\":330.08938180947, \"group\":axisGroupKey, \"movable\":false, \"desiredSize\":\"700 120\", \"textAngle\":\"horizontal\", \"centerTextAngle\":\"independent\", \"centerTextMode\":\"independent\"},\r\n{\"category\":\"axisGroup\", \"isGroup\":true, \"level\":0, \"key\":axisGroupKey, \"loc\":baseLoc, \"angle\":0, \"desiredSize\":\"300 150\"},\r\n{\"category\":\"line\", \"level\":0, \"key\":-11, \"loc\":baseLoc, \"desiredSize\":\"700 1\", \"width\":1400, \"height\":1, \"group\":waveGroupKey, \"angle\":330.08938180947, \"role\":\"centerLine\", \"selectable\":false, \"stroke\":\"rgba(9, 166, 9, 1)\"},\r\n{\"category\":\"line\", \"level\":0, \"key\":-8, \"loc\":\"-91.91674008334496 -140.02427812707117\", \"desiredSize\":\"606.7630471788291 10\", \"width\":1400, \"height\":1, \"angle\":0, \"group\":axisGroupKey, \"role\":\"axisX\", \"selectable\":false, \"stroke\":\"#0e399d\"},\r\n{\"category\":\"line\", \"level\":0, \"key\":-7, \"loc\":\"-91.91674008334496 -140.02427812707117\", \"desiredSize\":\"349.05387059630493 10\", \"width\":1400, \"height\":1, \"angle\":270, \"group\":axisGroupKey, \"role\":\"axisY\", \"selectable\":false, \"stroke\":\"#cb1c27\"},\r\n{\"text\":\"能量\", \"deletable\":false, \"font\":\"24px 'Microsoft YaHei'\", \"category\":\"autoText\", \"loc\":\"-101.91674008334496 -489.0781487233761\", \"key\":-12, \"role\":\"axisYText\", \"locationSpot\":\"1 0.5 0 0\", \"group\":axisGroupKey, \"movable\":true},\r\n{\"text\":\"主题\", \"role\":\"themeText\", \"deletable\":false, \"font\":\"24px 'Microsoft YaHei'\", \"category\":\"autoText\", \"loc\":go.Point.stringify(basePoint.copy().offset(-30,0)), \"key\":-13, \"level\":0, \"group\":axisGroupKey, \"locationSpot\":\"0.5 0 0 0\", \"movable\":true, \"width\":300},\r\n{\"text\":\"时间\", \"deletable\":false, \"font\":\"24px 'Microsoft YaHei'\", \"category\":\"autoText\", \"loc\":\"514.8463070954841 -140.02427812707117\", \"key\":-14, \"role\":\"axisXText\", \"group\":axisGroupKey, \"locationSpot\":\"0.5 0 0 0\"},\r\n{\"text\":\"实线：\", \"deletable\":false, \"fill\":\"#cb1c27\", \"iconVisible\":true, \"locationSpot\":\"0 0 0 0\", \"textAlign\":\"start\", \"category\":\"autoText\", \"loc\":go.Point.stringify(basePoint.copy().offset(30,-350)), \"role\":\"labelText1\", \"movable\":true, \"group\":labelGroupKey, \"visible\":true, \"minSize\":\"120 30\"},\r\n{\"text\":\"虚线：\", \"deletable\":false, \"fill\":\"#0e399d\", \"iconVisible\":true, \"locationSpot\":\"0 0 0 0\", \"textAlign\":\"start\", \"category\":\"autoText\", \"loc\":go.Point.stringify(basePoint.copy().offset(30,-310)), \"role\":\"labelText2\", \"movable\":true, \"group\":labelGroupKey, \"visible\":true, \"minSize\":\"120 30\"},\r\n{\"text\":\"中线：\", \"deletable\":false, \"fill\":\"#3f5369\", \"iconVisible\":true, \"locationSpot\":\"0 0 0 0\", \"textAlign\":\"start\", \"category\":\"autoText\", \"loc\":go.Point.stringify(basePoint.copy().offset(30,-270)), \"role\":\"labelText3\", \"movable\":true, \"group\":labelGroupKey, \"visible\":true, \"minSize\":\"120 30\"},\r\n\r\n{\"category\":\"wave\", \"text\":\"\", \"role\":\"waveTail\", \"deletable\":false, \"selectable\":false, \"level\":0, \"key\":\"2d6ff2f1-0966-36bf-4e85-f5775ca0652b\", \"group\":waveGroupKey, \"loc\":\"710.0826118675676 -829.1890319396903\", \"desiredSize\":\"75 120\", \"order\":999, \"oliveType\":\"Wave\", \"angle\":330.08938180947, \"textAlign\":\"center\", \"shiStroke\":\"#0e399d\", \"xuStroke\":\"#cb1c27\", \"centerText\":\"df53d882-fe51-d78e-d8e3-8d9681578cb8\", \"textVisible\":false, \"isNew\":null},\r\n    ]\r\n    if(!options){\r\n        temp = temp.concat([\r\n            {\"category\":\"wave\", \"text\":\"1\\n\", \"level\":0, \"key\":olive1Key, \"group\":waveGroupKey, \"desiredSize\":\"150 120\", \"order\":1, \"shiText\":olive1ShiTextKey, \"xuText\":olive1XuTextKey, \"angle\":330.08938180947, \"loc\":\"-91.91674008334496 -140.02427812707123\", \"oliveType\":\"Ellipse\", \"textAlign\":\"center\", \"shiStroke\":\"#cb1c27\", \"xuStroke\":\"#0e399d\", \"centerText\":olive1CenterTextKey, \"textVisible\":false},\r\n            {\"deletable\":false, \"text\":\"\", \"font\":\"18px 'Microsoft YaHei'\", \"category\":\"autoText\", \"key\":olive1ShiTextKey, \"width\":150, \"role\":\"shiText\", \"level\":0, \"group\":waveGroupKey, \"order\":1, \"olive\":olive1Key, \"loc\":\"4.128618140465704 -125.47989214278559\", \"locationSpot\":\"0 0 0 0\", \"textStroke\":\"#cb1c27\", \"showBorder\":true, \"angle\":0, \"minSize\":\"120 30\", \"textAlign\":\"center\"},\r\n            {\"deletable\":false, \"text\":\"\", \"font\":\"18px 'Microsoft YaHei'\", \"category\":\"autoText\", \"key\":olive1XuTextKey, \"width\":150, \"role\":\"xuText\", \"level\":0, \"group\":waveGroupKey, \"order\":1, \"olive\":olive1Key, \"loc\":\"-56.2078366340385 -230.36321886941172\", \"locationSpot\":\"1 1 0 0\", \"textStroke\":\"#0e399d\", \"showBorder\":true, \"angle\":0, \"minSize\":\"120 30\", \"textAlign\":\"center\"},\r\n            {\"category\":\"wave\", \"text\":\"3\\n\", \"level\":0, \"key\":olive2Key, \"group\":waveGroupKey, \"desiredSize\":\"150 120\", \"order\":3, \"shiText\":olive2ShiTextKey, \"xuText\":olive2XuTextKey, \"angle\":330.08938180947, \"loc\":\"168.12456585043884 -289.61879409691636\", \"oliveType\":\"Ellipse\", \"textAlign\":\"center\", \"shiStroke\":\"#cb1c27\", \"xuStroke\":\"#0e399d\", \"centerText\":olive2CenterTextKey, \"textVisible\":false},\r\n            {\"deletable\":false, \"text\":\"\", \"font\":\"18px 'Microsoft YaHei'\", \"category\":\"autoText\", \"key\":olive2ShiTextKey, \"width\":150, \"role\":\"shiText\", \"level\":0, \"group\":waveGroupKey, \"order\":3, \"olive\":olive2Key, \"loc\":\"264.16992407424954 -275.07440811263075\", \"locationSpot\":\"0 0 0 0\", \"textStroke\":\"#cb1c27\", \"showBorder\":true, \"angle\":0, \"minSize\":\"120 30\", \"textAlign\":\"center\"},\r\n            {\"deletable\":false, \"text\":\"\", \"font\":\"18px 'Microsoft YaHei'\", \"category\":\"autoText\", \"key\":olive2XuTextKey, \"width\":150, \"role\":\"xuText\", \"level\":0, \"group\":waveGroupKey, \"order\":3, \"olive\":olive2Key, \"loc\":\"203.83346929974533 -379.9577348392569\", \"locationSpot\":\"1 1 0 0\", \"textStroke\":\"#0e399d\", \"showBorder\":true, \"angle\":0, \"minSize\":\"120 30\", \"textAlign\":\"center\"},\r\n            {\"category\":\"wave\", \"text\":\"2\\n\", \"level\":0, \"key\":olive3Key, \"group\":waveGroupKey, \"desiredSize\":\"150 120\", \"order\":2, \"shiText\":olive3ShiTextKey, \"xuText\":olive3XuTextKey, \"angle\":330.08938180947, \"loc\":\"38.10391288354694 -214.8215361119938\", \"oliveType\":\"Ellipse\", \"textAlign\":\"center\", \"shiStroke\":\"#cb1c27\", \"xuStroke\":\"#0e399d\", \"centerText\":olive3CenterTextKey, \"textVisible\":false},\r\n            {\"deletable\":false, \"text\":\"\", \"font\":\"18px 'Microsoft YaHei'\", \"category\":\"autoText\", \"key\":olive3ShiTextKey, \"width\":150, \"role\":\"shiText\", \"level\":0, \"group\":waveGroupKey, \"order\":2, \"olive\":olive3Key, \"loc\":\"73.8128163328534 -305.1604768543343\", \"locationSpot\":\"1 1 0 0\", \"textStroke\":\"#cb1c27\", \"showBorder\":true, \"angle\":0, \"minSize\":\"120 30\", \"textAlign\":\"center\"},\r\n            {\"deletable\":false, \"text\":\"\", \"font\":\"18px 'Microsoft YaHei'\", \"category\":\"autoText\", \"key\":olive3XuTextKey, \"width\":150, \"role\":\"xuText\", \"level\":0, \"group\":waveGroupKey, \"order\":2, \"olive\":olive3Key, \"loc\":\"134.1492711073576 -200.27715012770815\", \"locationSpot\":\"0 0 0 0\", \"textStroke\":\"#0e399d\", \"showBorder\":true, \"angle\":0, \"minSize\":\"120 30\", \"textAlign\":\"center\"},\r\n            {\"category\":\"wave\", \"text\":\"4\\n\", \"level\":0, \"key\":olive4Key, \"group\":waveGroupKey, \"desiredSize\":\"150 120\", \"order\":4, \"shiText\":olive4ShiTextKey, \"xuText\":olive4XuTextKey, \"angle\":330.08938180947, \"loc\":\"298.1452188173308 -364.41605208183887\", \"oliveType\":\"Ellipse\", \"textAlign\":\"center\", \"shiStroke\":\"#cb1c27\", \"xuStroke\":\"#0e399d\", \"centerText\":olive4CenterTextKey, \"textVisible\":false},\r\n            {\"deletable\":false, \"text\":\"\", \"font\":\"18px 'Microsoft YaHei'\", \"category\":\"autoText\", \"key\":olive4ShiTextKey, \"width\":150, \"role\":\"shiText\", \"level\":0, \"group\":waveGroupKey, \"order\":4, \"olive\":olive4Key, \"loc\":\"333.8541222666372 -454.7549928241794\", \"locationSpot\":\"1 1 0 0\", \"textStroke\":\"#cb1c27\", \"showBorder\":true, \"angle\":0, \"minSize\":\"120 30\", \"textAlign\":\"center\"},\r\n            {\"deletable\":false, \"text\":\"\", \"font\":\"18px 'Microsoft YaHei'\", \"category\":\"autoText\", \"key\":olive4XuTextKey, \"width\":150, \"role\":\"xuText\", \"level\":0, \"group\":waveGroupKey, \"order\":4, \"olive\":olive4Key, \"loc\":\"394.1905770411414 -349.87166609755326\", \"locationSpot\":\"0 0 0 0\", \"textStroke\":\"#0e399d\", \"showBorder\":true, \"angle\":0, \"minSize\":\"120 30\", \"textAlign\":\"center\"},\r\n            {\"text\":\"1\\n\", \"minSize\":\"120 30\", \"deletable\":false, \"textAlign\":\"center\", \"font\":\"18px 'Microsoft YaHei'\", \"category\":\"autoText\", \"key\":olive1CenterTextKey, \"width\":120, \"role\":\"centerText\", \"level\":0, \"group\":waveGroupKey, \"order\":1, \"visible\":true, \"layerName\":\"Foreground\", \"locationSpot\":\"0.5 0.5 0 0\", \"selectable\":false, \"olive\":olive1Key, \"loc\":\"-26.039609246786398 -177.92155550609866\", \"angle\":0},\r\n            {\"text\":\"2\\n\", \"minSize\":\"120 30\", \"deletable\":false, \"textAlign\":\"center\", \"font\":\"18px 'Microsoft YaHei'\", \"category\":\"autoText\", \"key\":olive3CenterTextKey, \"width\":120, \"role\":\"centerText\", \"level\":0, \"group\":waveGroupKey, \"order\":2, \"visible\":true, \"layerName\":\"Foreground\", \"locationSpot\":\"0.5 0.5 0 0\", \"selectable\":false, \"olive\":olive3Key, \"loc\":\"103.9810437201055 -252.71881349102122\", \"angle\":0},\r\n            {\"text\":\"3\\n\", \"minSize\":\"120 30\", \"deletable\":false, \"textAlign\":\"center\", \"font\":\"18px 'Microsoft YaHei'\", \"category\":\"autoText\", \"key\":olive2CenterTextKey, \"width\":120, \"role\":\"centerText\", \"level\":0, \"group\":waveGroupKey, \"order\":3, \"visible\":true, \"layerName\":\"Foreground\", \"locationSpot\":\"0.5 0.5 0 0\", \"selectable\":false, \"olive\":olive2Key, \"loc\":\"234.00169668699743 -327.5160714759438\", \"angle\":0},\r\n            {\"text\":\"4\\n\", \"minSize\":\"120 30\", \"deletable\":false, \"textAlign\":\"center\", \"font\":\"18px 'Microsoft YaHei'\", \"category\":\"autoText\", \"key\":olive4CenterTextKey, \"width\":120, \"role\":\"centerText\", \"level\":0, \"group\":waveGroupKey, \"order\":4, \"visible\":true, \"layerName\":\"Foreground\", \"locationSpot\":\"0.5 0.5 0 0\", \"selectable\":false, \"olive\":olive4Key, \"loc\":\"364.0223496538893 -402.3133294608663\", \"angle\":0},\r\n        ])\r\n    }\r\n  return temp\r\n    }\r\n    \r\n\r\n    // 增加拓扑\r\n    addAxisGroup(options){\r\n        console.log(\"addOliveaddOlive\")\r\n        var diagram = this.diagram\r\n        var axisGroupCount = 0;\r\n        for(var i=0;i<diagram.model.nodeDataArray.length;i++){\r\n            if(diagram.model.nodeDataArray[i].category == \"axisGroup\"){\r\n                axisGroupCount += 1;\r\n            }\r\n        }\r\n        // 最多插入13个拓扑\r\n        if(axisGroupCount > 13){\r\n            return;\r\n        }\r\n        var axisData = this.getAxisGroupData(options)\r\n        if(!axisData) return;\r\n        diagram.startTransaction(\"dspiral\")\r\n        for(var i=0;i<axisData.length;i++){\r\n            diagram.model.addNodeData(axisData[i]);\r\n        }\r\n       \r\n        //diagram.model.setDataProperty(node.containingGroup,\"width\",300)\r\n        // diagram.model.setDataProperty(node.containingGroup,\"width\",300)\r\n        diagram.commitTransaction(\"dspiral\")\r\n        return axisData\r\n        // this.diagram.updateAllTargetBindings()\r\n        // setTimeout(()=>{\r\n        //     // this.diagram.updateAllTargetBindings()\r\n        //     this.diagram.layoutDiagram(true)\r\n        // },500)\r\n        // this.layoutAllGroup()\r\n    }\r\n    // 选择文本节点\r\n    selectText(e) {\r\n        // console.log(\"selectTextselectTextselectText\")\r\n        var myDiagram = this.diagram\r\n        var node = myDiagram.selection.first();\r\n        if (!node) return;\r\n        // removeNodeRemarkTips();\r\n        // console.log(\"selectTExt\")\r\n\r\n        var tb = myDiagram.selection.first().findObject('TEXT');\r\n        if (tb) myDiagram.commandHandler.editTextBlock(tb);\r\n        // try{\r\n        //     var tmp;\r\n        //     if(node.containingGroup && node.containingGroup.data.category == \"waveGroup\"){\r\n        //         if(node.data.role == \"shiText\"){\r\n        //             if(node.containingGroup.labelText1 && node.data.text.trim() == \"\"){\r\n        //                 // node.data.text = node.containingGroup.labelText1.data.text\r\n        //                 tmp = node.containingGroup.labelText1.data.text.replace(\"实线：\",\"\")\r\n        //                 if(tmp != \"\"){\r\n        //                     myDiagram.currentTool.currentTextEditor.mainElement.value = tmp+\"：\"\r\n        //                 }\r\n        //             }\r\n        //         }\r\n        //         if(node.data.role == \"xuText\"){\r\n        //             if(node.containingGroup.labelText2 && node.data.text.trim() == \"\"){\r\n        //                 // node.data.text = node.containingGroup.labelText1.data.text\r\n        //                 tmp = node.containingGroup.labelText2.data.text.replace(\"虚线：\",\"\")\r\n        //                 if(tmp != \"\"){\r\n        //                     myDiagram.currentTool.currentTextEditor.mainElement.value = tmp+\"：\"\r\n        //                 }\r\n        //             }\r\n        //         }\r\n        //         if(node.data.category == \"wave\" || node.data.role == \"centerText\"){\r\n        //             if(node.containingGroup.labelText3 && node.data.text.trim() == \"\"){\r\n        //                 // node.data.text = node.containingGroup.labelText1.data.text\r\n        //                 tmp = node.containingGroup.labelText3.data.text.replace(\"中线：\",\"\")\r\n        //                 if(tmp != \"\"){\r\n        //                     myDiagram.currentTool.currentTextEditor.mainElement.value = tmp+\"：\"\r\n        //                 }\r\n        //             }\r\n        //         }\r\n        //     }\r\n        // }catch(e){\r\n        //     console.log(\"selectText:error:\",e)\r\n        // }\r\n        // 手机上支持换行，电脑上需要ctl+Enter键换行\r\n        if(!helpers.checkPhone()){\r\n            helpers.simulateEnterWithAlt(e);\r\n        }else{\r\n            var val = myDiagram.currentTool.currentTextEditor.mainElement.value\r\n            myDiagram.currentTool.currentTextEditor.mainElement.selectionStart = val.length; \r\n            myDiagram.currentTool.currentTextEditor.mainElement.selectionEnd = val.length; \r\n        }\r\n    }\r\n\r\n    clearAllTextBorder(){\r\n        var it = this.diagram.nodes.iterator;\r\n        while (it.next()) {\r\n            var n = it.value;\r\n            if(n.data.category == \"autoText\"){\r\n                  n.findObject(\"textBorder\").visible = false;\r\n            }\r\n        }\r\n    }\r\n    apiSwitchWaveTail(){\r\n        console.log(\"apiSwitchWaveTailapiSwitchWaveTail\")\r\n        var node = this.diagram.selection.first()\r\n        if(!node) return\r\n        this.diagram.startTransaction()\r\n        // this.diagram.model.setDataProperty(node.data, \"oliveType\", \"Ellipse\")\r\n        // this.diagram.model.setDataProperty(node.data, \"haveTail\", false)\r\n        var it = node.findSubGraphParts().iterator;\r\n        var waveTail= null; // 查找是否存在尾巴\r\n        var lastNode = null;\r\n        var loc;\r\n        while(it.next()){\r\n            var n = it.value;\r\n            lastNode = n;\r\n            if(n.data.role == \"waveTail\"){\r\n                waveTail = n;\r\n                break;\r\n            }\r\n        }\r\n        if(lastNode){\r\n            loc = lastNode.data.loc\r\n        }else{\r\n            loc = node.data.loc\r\n        }\r\n        if(waveTail){\r\n            this.diagram.model.removeNodeData(waveTail.data);\r\n            this.diagram.model.setDataProperty(node.data, \"haveTail\", false)\r\n        }else{\r\n            this.diagram.model.setDataProperty(node.data, \"haveTail\", true)\r\n            var tailOlive = {\"category\":\"wave\", \r\n                \"text\":\"\", \r\n                \"role\":\"waveTail\",\r\n                deletable:false,\r\n                \"selectable\": false,\r\n                \"deletable\": false,\r\n                \"level\":0, \"key\": helpers.guid(), \r\n                \"group\":node.data.key, \r\n                \"loc\": loc,\r\n                \"desiredSize\": `${node.data.oliveWidth} ${node.data.oliveHeight}`, \r\n                \"order\": 2000,\r\n            }\r\n            this.diagram.model.addNodeData(tailOlive)\r\n        }\r\n        node.layout.isOngoing = true;\r\n        node.layout.isValidLayout = false;\r\n        this.diagram.commitTransaction()\r\n    }\r\n\r\n    //切换为橄榄形状\r\n    apiSwitchToEllipse(){\r\n        console.log(\"apiSwitchToEllipse\")\r\n        var node = this.diagram.selection.first()\r\n        if(!node) return\r\n        this.diagram.startTransaction()\r\n        this.diagram.model.setDataProperty(node.data, \"oliveType\", \"Ellipse\")\r\n        // this.diagram.model.setDataProperty(node.data, \"haveTail\", false)\r\n        var it = node.findSubGraphParts().iterator;\r\n        var waveTail= null; // 查找是否存在尾巴\r\n\r\n        while(it.next()){\r\n            var n = it.value;\r\n            if(n.data.role == \"waveTail\"){\r\n                waveTail = n;\r\n                break;\r\n            }\r\n        }\r\n\r\n        if(waveTail){\r\n            this.diagram.model.removeNodeData(waveTail.data);\r\n        }\r\n        node.layout.isOngoing = true;\r\n        node.layout.isValidLayout = false;\r\n        if(node.containingGroup){\r\n            node.containingGroup.layout.isOngoing = true;\r\n            node.containingGroup.layout.isValidLayout = false;\r\n        }\r\n        this.diagram.commitTransaction()\r\n    }\r\n\r\n\r\n    \r\n    // 切换为螺旋形状\r\n    apiSwitchToWave(){\r\n        var node = this.diagram.selection.first()\r\n        if(!node) return\r\n        this.diagram.startTransaction(\"apiSwitchToWave\")\r\n        this.diagram.model.setDataProperty(node.data, \"oliveType\", \"Wave\")\r\n        // this.diagram.model.setDataProperty(node.data, \"haveTail\", true)\r\n        var it = node.findSubGraphParts().iterator;\r\n        var waveTail= null; // 查找是否存在尾巴\r\n        var lastNode = null;\r\n        var haveTail = node.data.haveTail\r\n        var loc;\r\n        while(it.next()){\r\n            var n = it.value;\r\n            lastNode = n;\r\n            if(n.data.role == \"waveTail\"){\r\n                waveTail = n;\r\n                break;\r\n            }\r\n        }\r\n        if(lastNode){\r\n            loc = lastNode.data.loc\r\n        }else{\r\n            loc = node.data.loc\r\n        }\r\n        if(!waveTail && haveTail == true){\r\n            var tailOlive = {\"category\":\"wave\", \r\n                \"text\":\"\", \r\n                \"role\":\"waveTail\",\r\n                deletable:false,\r\n                \"selectable\": false,\r\n                \"deletable\": false,\r\n                \"level\":0, \"key\": helpers.guid(), \r\n                \"group\":node.data.key, \r\n                \"loc\": loc,\r\n                \"desiredSize\": `${node.data.oliveWidth} ${node.data.oliveHeight}`, \r\n                \"order\": 2000,\r\n            }\r\n            this.diagram.model.addNodeData(tailOlive)\r\n        }\r\n        node.layout.isOngoing = true;\r\n        node.layout.isValidLayout = false;\r\n        if(node.containingGroup){\r\n            node.containingGroup.layout.isOngoing = true;\r\n            node.containingGroup.layout.isValidLayout = false;\r\n        }\r\n        this.diagram.commitTransaction(\"apiSwitchToWave\")\r\n    }\r\n\r\n    // 切换文字方向\r\n    apiSwitchTextAngle(textAngle){\r\n        var node = this.diagram.selection.first()\r\n        if(!node) return\r\n        var mapObj = {\r\n            \"horizontal\":\"vertical\",\r\n            \"vertical\":\"horizontal\",\r\n        }\r\n        console.log(\"apiSwitchTextAngle\")\r\n        \r\n        node.diagram.startTransaction(\"apiSwitchTextAngle\")\r\n        if(textAngle && [\"horizontal\",\"vertical\"].indexOf(textAngle) > -1){\r\n            node.diagram.model.setDataProperty(node.data, \"textAngle\", textAngle)\r\n            node.data.textAngle = textAngle\r\n        }else{\r\n           textAngle = mapObj[node.data.textAngle] || \"horizontal\"\r\n           node.diagram.model.setDataProperty(node.data, \"textAngle\", textAngle)\r\n            node.data.textAngle = textAngle\r\n            // }\r\n        }\r\n        // var angle = node.angle\r\n        // this.diagram.model.setDataProperty(node.data, \"angle\", angle+1)\r\n        // this.diagram.model.setDataProperty(node.data, \"angle\", angle)\r\n        // node.layout.isInit = true;\r\n        // setTimeout(()=>{\r\n            node.layout.isOngoing = true;\r\n            node.layout.isValidLayout = false;\r\n        // })\r\n        node.diagram.commitTransaction(\"apiSwitchTextAngle\")\r\n        // this.diagram.startTransaction(\"layout\")\r\n        // node.layout.isOngoing = true;\r\n        // node.layout.isValidLayout = false;\r\n        // this.diagram.commitTransaction(\"layout\")\r\n        // this.diagram.updateAllTargetBindings()\r\n        // this.diagram.layoutDiagram(true)\r\n    }\r\n\r\n    // 以下两个方法控制菜单显示\r\n    getDefaultCustomMenuDivStr(){\r\n        return `\r\n        <ul>\r\n            <li trtd_action=\"addFollower\"><a class=\"i18n\" data-lang=\"insertsl\">插入同级节点</a></li>\r\n            <li trtd_action=\"startNewSpiral\"><a class=\"i18n\" data-lang=\"icn\">插入子节点</a></li>\r\n            <li trtd_action=\"apiDuplicateNode\"><a class=\"i18n\" data-lang=\"duplicateNode\">复制节点</a></li>\r\n            <li trtd_action=\"apiDeleteSelection\"><a class=\"i18n\" data-lang=\"remove\">删除</a></li>\r\n            <li trtd_action=\"splitOlive2Cbian\"><a class=\"i18n\" data-lang=\"remove\">分离</a></li>\r\n            <li trtd_action=\"splitOlive2Half\"><a class=\"i18n\" data-lang=\"remove\">拆分</a></li>\r\n            <li trtd_action=\"orderChildNode\"><a class=\"i18n\" data-lang=\"ordernode\">子节点编号</a></li>\r\n            <li trtd_action=\"clearOrderChildNode\"><a class=\"i18n\" data-lang=\"clearordernode\">取消子节点编号</a></li>\r\n            <li trtd_action=\"clearNodeTextMenu\"><a class=\"i18n\" data-lang=\"emptynodetext\">清空节点文本</a></li>\r\n            <li trtd_action=\"apiInsertTianpanNode\"><a class=\"i18n\" data-lang=\"insertnodetianpan\">插入天盘节点</a></li>\r\n            <li trtd_action=\"addTextNode\"><a class=\"i18n\" data-lang=\"inserttext\">插入文本</a></li>\r\n            <li trtd_action=\"locateRootNodeMenu\"><a class=\"i18n\" data-lang=\"locaterootnode\">定位根节点</a></li>\r\n            <li trtd_action=\"showAllNodesMenu\"><a class=\"i18n\" data-lang=\"displayallnodes\">显示所有节点</a></li>\r\n            <li trtd_action=\"fixPictureMenu\"><a class=\"i18n\" data-lang=\"fixnode\">固定节点</a></li>\r\n            <li trtd_action=\"activePictureMenu\"><a class=\"i18n\" data-lang=\"cancelfix\">取消固定</a></li>\r\n            <li trtd_action=\"apiSwitchToEllipse\"><a class=\"i18n\" data-lang=\"cancelfix\">切换为橄榄形状</a></li>\r\n            <li trtd_action=\"apiSwitchToWave\"><a class=\"i18n\" data-lang=\"cancelfix\">切换为螺旋形状</a></li>\r\n            <li trtd_action=\"apiSwitchWaveTail\"><a class=\"i18n\" data-lang=\"cancelfix\">添加/删除尾巴</a></li>\r\n            <li trtd_action=\"apiSwitchTextAngle\"><a class=\"i18n\" data-lang=\"cancelfix\">切换文字方向</a></li>\r\n            <li trtd_action=\"addCbian\"><a class=\"i18n\" data-lang=\"cancelfix\">添加总结图</a></li>\r\n            <li trtd_action=\"addAxisGroup\"><a class=\"i18n\" data-lang=\"cancelfix\">插入拓扑</a></li>\r\n            <li trtd_action=\"showRect\"><a class=\"i18n\" data-lang=\"cancelfix\">显示矩形线</a></li>\r\n            <li trtd_action=\"hideRect\"><a class=\"i18n\" data-lang=\"cancelfix\">隐藏矩形线</a></li>\r\n            <li trtd_action=\"offShowRedLine\"><a class=\"i18n\" data-lang=\"cancelfix\">关闭自动显示红线</a></li>\r\n            <li trtd_action=\"autoShowRedline\"><a class=\"i18n\" data-lang=\"cancelfix\">自动显示自旋红线</a></li>\r\n            <li trtd_action=\"bringupLayer\"><a class=\"i18n\" data-lang=\"cancelfix\">上移一层</a></li>\r\n            <li trtd_action=\"bringdownLayer\"><a class=\"i18n\" data-lang=\"cancelfix\">下移一层</a></li>\r\n            <li trtd_action=\"bringToBackground\"><a class=\"i18n\" data-lang=\"cancelfix\">置于底层</a></li>\r\n            <li trtd_action=\"bringToForeground\"><a class=\"i18n\" data-lang=\"cancelfix\">置于顶层</a></li>\r\n            <li trtd_action=\"addDimTtext\"><a class=\"i18n\" data-lang=\"cancelfix\">增加维度</a></li>\r\n        </ul>\r\n        `\r\n    }\r\n    getShowContextMenus(node){\r\n        var showIds = null\r\n        console.log(\"getShowContextMenus\")\r\n        if(node){\r\n            // 双螺旋可以添加常变\r\n            if([\"axisGroup\"].indexOf(node.data.category) > -1){\r\n                showIds = \"addCbian,apiDeleteSelection\"\r\n            }\r\n            if([\"picGroup\"].indexOf(node.data.category) > -1){\r\n                showIds = \"apiDeleteSelection\"\r\n            }\r\n\r\n            if([\"3\"].indexOf(node.data.category) > -1){\r\n                showIds = \"bringupLayer,apiDeleteSelection,bringdownLayer,bringToBackground,bringToForeground\"\r\n            }\r\n\r\n            if( [\"wave\"].indexOf(node.data.category) > -1){\r\n                if(node.data.deletable != null){\r\n                    if(node.data.deletable){\r\n                        showIds = \"apiDeleteSelection,splitOlive2Cbian,splitOlive2Half\";\r\n                    }\r\n                }else{\r\n                    if(node.deletable){\r\n                        showIds = \"apiDeleteSelection,splitOlive2Cbian,splitOlive2Half\";\r\n                    }\r\n                }\r\n            }\r\n            console.log(\"waveGroupwaveGroup\")\r\n            if( [\"waveGroup\"].indexOf(node.data.category) > -1){\r\n                showIds = \"apiSwitchTextAngle,\";\r\n                if(node.data.oliveType == \"Ellipse\"){\r\n                    showIds += \"apiSwitchToWave\"\r\n                }else{\r\n                    showIds += \"apiSwitchToEllipse,apiSwitchWaveTail\"\r\n                }\r\n                \r\n            }\r\n            if( [\"yunGroup\"].indexOf(node.data.category) > -1){\r\n                showIds = \"\";\r\n                if(node.data.showShape){\r\n                    showIds += \"hideRect\"\r\n                }else{\r\n                    showIds += \"showRect\"\r\n                }\r\n                if(node.data.beginSpark != \"line\"){\r\n                    showIds += \",autoShowRedline\"\r\n                }else{\r\n                    showIds += \",offShowRedLine\"\r\n                }\r\n            }\r\n            if( [\"autoText\"].indexOf(node.data.category) > -1 && [\"shiText\",\"xuText\"].indexOf(node.data.role) < 0){\r\n                showIds = \"apiDeleteSelection\";\r\n            }\r\n            if(node.data.subRole == \"dimText\" && node.containingGroup.data.category == \"yunpanGroup\"){\r\n                showIds = \"apiDeleteSelection,addDimTtext\"\r\n            }\r\n            if(node.data.category == \"shapeText\"&& node.containingGroup.data.category == \"yunpanGroup\"){\r\n                showIds = \"apiDeleteSelection\"\r\n            }\r\n            // return \"addFollowerGround,\" + \"addNewCircle,\"+\"apiDeleteSelection\";\r\n        }else{\r\n            // return \"addFollowerGround\"\r\n            showIds = \"addCbian,addAxisGroup\"\r\n        }\r\n        return showIds;\r\n    }\r\n    \r\n    // 云盘增加维度\r\n    addDimTtext(){\r\n        var node = this.diagram.selection.first();\r\n        var myDiagram = this.diagram;\r\n        if(!node) return;\r\n        if(node.data.subRole != \"dimText\") return;\r\n        var count = 0\r\n        var it = node.containingGroup.findSubGraphParts().iterator;\r\n        var deleteNodes = []\r\n        var deleteLines = []\r\n        var curLine = null;\r\n        var normDim = \"X\",unnormDim = \"Y\", lineRole = \"verticalLine\"\r\n        if(node.data.dimX == 0){\r\n            normDim = \"Y\"\r\n            unnormDim = \"X\"\r\n            lineRole = \"horizontalLine\"\r\n        }\r\n        while (it.next()) {\r\n            var n = it.value;\r\n            if(n.data.subRole == \"dimText\" && n.data[\"dim\"+unnormDim] == 0){\r\n                // if(n.data.order == node.data.order+1){\r\n                //     locateNode = n;\r\n                // }\r\n                count++;\r\n            }\r\n            if(n.data.subRole == \"yunpanText\" && n.data[\"order\"+normDim] == node.data[\"dim\"+normDim]){\r\n                deleteNodes.push(n.data)\r\n            }\r\n            if(n.data.category == \"line\"  && n.data.role == lineRole\r\n            && n.data[\"order\"]  == node.data[\"dim\"+normDim]\r\n            ){\r\n                curLine = n\r\n            }\r\n            // if(n.data.role == \"xuText\" && n.data.order == node.data.order){\r\n            //     xuText = n;\r\n            // }\r\n            // if(n.data.role == \"centerText\" && n.data.order == node.data.order){\r\n            //     centerText = n;\r\n            // }\r\n\r\n        }\r\n        \r\n        if(count>=30){\r\n           \r\n            return;\r\n        }\r\n        this.diagram.startTransaction(\"addDimTtext\");\r\n        it.reset()\r\n        while (it.next()) {\r\n            var n = it.value;\r\n            if(n.data.subRole == \"dimText\" && n.data[\"dim\"+unnormDim] == 0 && n.data[\"dim\"+normDim] > node.data[\"dim\"+normDim]){\r\n                // if(n.data.order == node.data.order+1){\r\n                //     locateNode = n;\r\n                // }\r\n                n.diagram.model.setDataProperty(n.data, \"dim\"+normDim, n.data[\"dim\"+normDim] + 1)\r\n                // count++;\r\n            }\r\n            if(n.data.subRole == \"yunpanText\" && n.data[\"order\"+normDim] > node.data[\"dim\"+normDim]){\r\n                n.diagram.model.setDataProperty(n.data, \"order\"+normDim, n.data[\"order\"+normDim] + 1)\r\n            }\r\n            if(n.data.category == \"line\"  && n.data.role == lineRole\r\n            && n.data[\"order\"]  > node.data[\"dim\"+normDim]\r\n            ){\r\n                n.diagram.model.setDataProperty(n.data, \"order\", n.data[\"order\"] + 1)\r\n            }\r\n            // if(n.data.role == \"xuText\" && n.data.order == node.data.order){\r\n            //     xuText = n;\r\n            // }\r\n            // if(n.data.role == \"centerText\" && n.data.order == node.data.order){\r\n            //     centerText = n;\r\n            // }\r\n\r\n        }\r\n        var dimTextData = JSON.parse(JSON.stringify(node.data))\r\n        delete dimTextData.key;\r\n        delete dimTextData.__gohashid;\r\n        if(curLine){\r\n            var lineData = JSON.parse(JSON.stringify(curLine.data))\r\n            delete lineData.key;\r\n            delete lineData.__gohashid;\r\n            lineData[\"order\"] = lineData[\"order\"]+1;\r\n            node.diagram.model.addNodeData(lineData)\r\n        }\r\n        // Object.assign(dimTextData, {\r\n\r\n        // })\r\n        dimTextData[\"dim\"+normDim] = node.data[\"dim\"+normDim]+1;\r\n        dimTextData.text = \"维度\" + dimTextData[\"dim\"+normDim]\r\n        node.diagram.model.addNodeData(dimTextData)\r\n        // node.diagram.model.removeNodeDataCollection(deleteNodes)\r\n        node.containingGroup.layout.isOngoing = true;\r\n        node.containingGroup.layout.isValidLayout = false;\r\n        this.diagram.commitTransaction(\"addDimTtext\");\r\n    }\r\n\r\n    bringToBackground(){\r\n        var node = this.diagram.selection.first();\r\n        var myDiagram = this.diagram;\r\n        myDiagram.model.startTransaction();\r\n        myDiagram.model.setDataProperty(node.data, \"layerName\", \"Background\");\r\n        myDiagram.model.setDataProperty(node.data, \"zOrder\", 1);\r\n        myDiagram.model.commitTransaction();\r\n    }\r\n    bringToForeground(){\r\n        var node = this.diagram.selection.first();\r\n        var myDiagram = this.diagram;\r\n        myDiagram.model.startTransaction();\r\n        myDiagram.model.setDataProperty(node.data, \"layerName\", \"Foreground\");\r\n        myDiagram.model.setDataProperty(node.data, \"zOrder\", 999);\r\n        myDiagram.model.commitTransaction();\r\n    }\r\n\r\n    bringdownLayer(){\r\n        var node = this.diagram.selection.first();\r\n        var myDiagram = this.diagram;\r\n        if(!node) return;\r\n        var layerName = node.layerName;\r\n        var toLayerName = layerName\r\n        var zOrder = node.zOrder;\r\n        var toZOrder = 1;\r\n        if(layerName == \"Foreground\"){\r\n            toLayerName = \"default\"\r\n        }\r\n        if(layerName == \"default\"){\r\n            toLayerName = \"Background\"\r\n        }\r\n        if(layerName == \"Background\"){\r\n            toLayerName = \"Background\"\r\n        }\r\n        myDiagram.model.startTransaction();\r\n        myDiagram.model.setDataProperty(node.data, \"layerName\", toLayerName);\r\n        myDiagram.model.setDataProperty(node.data, \"zOrder\", toZOrder);\r\n        myDiagram.model.commitTransaction();\r\n    }\r\n    bringupLayer(){\r\n        var node = this.diagram.selection.first();\r\n        var myDiagram = this.diagram;\r\n        if(!node) return;\r\n        var layerName = node.layerName;\r\n        var toLayerName = layerName\r\n        var zOrder = node.zOrder;\r\n        var toZOrder = 999;\r\n        if(layerName == \"Background\"){\r\n            toLayerName = \"default\"\r\n        }\r\n        if(layerName == \"default\"){\r\n            toLayerName = \"Foreground\"\r\n        }\r\n        if(layerName == \"Foreground\"){\r\n            toLayerName = \"Foreground\"\r\n        }\r\n        myDiagram.model.startTransaction();\r\n        myDiagram.model.setDataProperty(node.data, \"layerName\", toLayerName);\r\n        myDiagram.model.setDataProperty(node.data, \"zOrder\", toZOrder);\r\n        myDiagram.model.commitTransaction();\r\n    }\r\n\r\n    bringToLayer(layerName, zOrder) {\r\n\r\n            var node = myDiagram.selection.first();\r\n            myDiagram.model.startTransaction();\r\n            if (node) {\r\n                if (layerName == null) {\r\n                    layerName = node.data.layerName ? node.data.layerName : \"\";\r\n                    var tempData = myDiagram.model.copyNodeData(node.data);\r\n                    myDiagram.model.removeNodeData(node.data);\r\n                    myDiagram.model.addNodeData(tempData);\r\n\r\n                } else {\r\n                    myDiagram.model.setDataProperty(node.data, \"layerName\", layerName);\r\n                }\r\n            }\r\n            myDiagram.model.commitTransaction();\r\n        }\r\n\r\n    showRect(){\r\n        var node = this.diagram.selection.first()\r\n        console.log(\"show shape\")\r\n        if(!node) return;\r\n        if(node.data.category != \"yunGroup\") return;\r\n        node.diagram.startTransaction(\"showRect\")\r\n        node.diagram.model.setDataProperty(node.data, \"showShape\", true)\r\n        var it = node.findSubGraphParts().iterator;\r\n        while (it.next()) {\r\n            var n = it.value;\r\n            if(n.data.role == \"background\"){\r\n                node.diagram.model.setDataProperty(n.data, \"visible\", true)\r\n            }\r\n        }\r\n        node.layout.isValidLayout = false\r\n        node.diagram.commitTransaction(\"showRect\")\r\n    }\r\n    hideRect(){\r\n        var node = this.diagram.selection.first()\r\n        if(!node) return;\r\n        if(node.data.category != \"yunGroup\") return;\r\n        node.diagram.startTransaction(\"hideRect\")\r\n        node.diagram.model.setDataProperty(node.data, \"showShape\", false)\r\n        var it = node.findSubGraphParts().iterator;\r\n        while (it.next()) {\r\n            var n = it.value;\r\n            if(n.data.role == \"background\"){\r\n                node.diagram.model.setDataProperty(n.data, \"visible\", true)\r\n                node.diagram.model.setDataProperty(n.data, \"stroke\", \"rgba(255,0,0,0)\")\r\n            }\r\n        }\r\n        node.diagram.commitTransaction(\"hideRect\")\r\n    }\r\n    autoShowRedline(){\r\n        var node = this.diagram.selection.first()\r\n        if(!node) return;\r\n        if(node.data.category != \"yunGroup\") return;\r\n        node.diagram.startTransaction(\"beginSpark\")\r\n        node.diagram.model.setDataProperty(node.data, \"beginSpark\", \"line\")\r\n        node.diagram.commitTransaction(\"beginSpark\")\r\n    }\r\n    offShowRedLine(){\r\n        var node = this.diagram.selection.first()\r\n        if(!node) return;\r\n        if(node.data.category != \"yunGroup\") return;\r\n        node.diagram.startTransaction(\"offShowRedLine\")\r\n        node.diagram.model.setDataProperty(node.data, \"beginSpark\", undefined)\r\n        node.diagram.commitTransaction(\"offShowRedLine\")\r\n    }\r\n    //快捷键\r\n    dokeyDownFn (e) {\r\n        console.log('dspirallllllllllllllllllllllllll:');\r\n        var diagram = this.diagram\r\n        var that = this;\r\n        var myDiagram = this.diagram;\r\n        var e = myDiagram.lastInput;\r\n        var cmd = myDiagram.commandHandler;\r\n        if (e.event.altKey) {\r\n            if (e.key == \"Q\") {\r\n                autoLayoutAll();\r\n                return;\r\n            } else if (e.key == \"R\") {\r\n                centerNode();\r\n                return;\r\n            } else if (e.key == \"C\") {\r\n                centerCurrentNode();\r\n                return;\r\n            } else if (e.key == \"A\") {\r\n                zoomToFit();\r\n                return;\r\n            }\r\n        }\r\n        if (e.event.keyCode >= 65 && e.event.keyCode <= 90 && !e.event.altKey && !e.event.ctrlKey && !e.event.shiftKey) {\r\n            e.bubbles = false;\r\n            var node = myDiagram.selection.first()\r\n            if(!node) return;\r\n            if(node.data.category == \"wave\" && node.containingGroup && node.containingGroup.data.textAngle == \"horizontal\" && node.containingGroup.data.centerTextAngle == \"independent\"){\r\n                node.findObject(\"TEXT\").visible = true;\r\n                var centerText = node.diagram.findNodeForKey(node.data.centerText)\r\n                if(centerText){\r\n                  centerText.visible = false;\r\n                }\r\n            }\r\n            setTimeout(()=>{\r\n                this.selectText(e, diagram);\r\n            },100)\r\n            return true;\r\n    \r\n        }\r\n        // console.log('catched in dokeydown ' + e.event.keyCode);\r\n        // console.log('catched in dokeydown ' + e.key);\r\n        if (e.event.keyCode === 13) { // could also check for e.control or e.shift\r\n            console.log(\"dspiral add Follower\")\r\n            var node = myDiagram.selection.first();\r\n            if (node && node.category == \"wave\") {\r\n                // this.addFollower(e, true);\r\n                this.addOlive()\r\n            }\r\n        } else if (e.event.keyCode === 9) { // could also check for e.control or e.shift\r\n            this.addFollower(true);\r\n        } else if (e.key === \"t\") { // could also check for e.control or e.shift\r\n            if (cmd.canCollapseSubGraph()) {\r\n                cmd.collapseSubGraph();\r\n            } else if (cmd.canExpandSubGraph()) {\r\n                cmd.expandSubGraph();\r\n            }\r\n        } else if (e.key == \"Del\") {\r\n            e.diagram.commandHandler.deleteSelection();\r\n        } else if (e.event.keyCode == 113) { //F2,不知道为什么失效了，重新赋予功能\r\n            // selectText();\r\n            this.selectText(e, diagram);\r\n        } else if (e.event.keyCode == 37) { //左\r\n            this.moveWithinNodes('left', diagram);\r\n            // go.CommandHandler.prototype.doKeyDown.call(cmd);\r\n        } else if (e.event.keyCode == 38) { //上\r\n            this.moveWithinNodes('up', diagram);\r\n            // go.CommandHandler.prototype.doKeyDown.call(cmd);\r\n        } else if (e.event.keyCode == 39) { //右\r\n            this.moveWithinNodes('right', diagram);\r\n            // go.CommandHandler.prototype.doKeyDown.call(cmd);\r\n        } else if (e.event.keyCode == 40) { //下\r\n            this.moveWithinNodes('down', diagram);\r\n            // go.CommandHandler.prototype.doKeyDown.call(cmd);\r\n        } else {\r\n            // call base method with no arguments\r\n            go.CommandHandler.prototype.doKeyDown.call(cmd);\r\n        }\r\n        e.bubbles = false; //阻止事件冒泡到dom\r\n    }\r\n\r\n    findPrevOlive(node){\r\n        if(node.data.order <= 1){\r\n            return null;\r\n        }\r\n        var prenode = null;\r\n        var it = node.containingGroup.findSubGraphParts().iterator;\r\n        while (it.next()) {\r\n            var n = it.value;\r\n            if(n.data.category == \"wave\"){\r\n                if(n.data.order == node.data.order-1){\r\n                    prenode = n;\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        return prenode;\r\n    }\r\n    findNextOlive(node){\r\n        var nextnode = null;\r\n        var it = node.containingGroup.findSubGraphParts().iterator;\r\n        while (it.next()) {\r\n            var n = it.value;\r\n            if(n.data.role == \"waveTail\"){\r\n                continue;\r\n            }\r\n            if(node.data.category == \"autoText\"){\r\n                if(n.data.role == \"shiText\"){\r\n                    if(n.data.order == node.data.order+1){\r\n                        nextnode = n;\r\n                        break;\r\n                    }\r\n                }\r\n            }else{\r\n                if(n.data.category == \"wave\"){\r\n                    if(n.data.order == node.data.order+1){\r\n                        nextnode = n;\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n\r\n        }\r\n        return nextnode;\r\n    }\r\n\r\n    findUpOlive(node){\r\n        var upnode = null;\r\n        if(node.data.category == \"wave\"){\r\n            if(node.data.order % 2 != 0){\r\n                upnode = this.diagram.findNodeForKey(node.data.xuText)\r\n            }else{\r\n                upnode = this.diagram.findNodeForKey(node.data.shiText)\r\n            }\r\n        }\r\n        if(node.data.role == \"xuText\"){\r\n            if(node.data.order % 2 != 0){\r\n                // upnode = this.diagram.findNodeForKey(node.data.xuText)\r\n            }else{\r\n                upnode = this.diagram.findNodeForKey(node.data.olive)\r\n            }\r\n        }\r\n        if(node.data.role == \"shiText\"){\r\n            if(node.data.order % 2 != 0){\r\n                upnode = this.diagram.findNodeForKey(node.data.olive)\r\n            }else{\r\n                // upnode = this.diagram.findNodeForKey(node.data.olive)\r\n            }\r\n        }\r\n        return upnode;        \r\n    }\r\n\r\n    findDownOlive(node){\r\n        var downnode = null;\r\n        if(node.data.category == \"wave\"){\r\n            if(node.data.order % 2 != 0){\r\n                downnode = this.diagram.findNodeForKey(node.data.shiText)\r\n            }else{\r\n                downnode = this.diagram.findNodeForKey(node.data.xuText)\r\n            }\r\n        }\r\n        if(node.data.role == \"xuText\"){\r\n            if(node.data.order % 2 != 0){\r\n                downnode = this.diagram.findNodeForKey(node.data.olive)\r\n            }else{\r\n                // downnode = this.diagram.findNodeForKey(node.data.olive)\r\n            }\r\n        }\r\n        if(node.data.role == \"shiText\"){\r\n            if(node.data.order % 2 != 0){\r\n                // downnode = this.diagram.findNodeForKey(node.data.olive)\r\n            }else{\r\n                downnode = this.diagram.findNodeForKey(node.data.olive)\r\n            }\r\n        }\r\n        return downnode;\r\n    }\r\n\r\n    moveWithinNodes(direction) {\r\n        var myDiagram = this.diagram;\r\n        var node = myDiagram.selection.first();\r\n        if(!node){\r\n            return;\r\n        }\r\n        // 火花矩阵文字\r\n        if(node.data.category == \"autoText\" && node.data.subRole == \"coreText\"){\r\n            if(!(node.containingGroup && node.containingGroup.data.category == \"yunGroup\" && node.containingGroup.data.category == \"yunpanGroup\")){\r\n                return;\r\n            }\r\n            var nextNode;\r\n            var centerOrderX = 30000\r\n            var centerOrderY = 30000\r\n            if(node.containingGroup.__yunPointsX && node.containingGroup.__yunPointsY){\r\n                centerOrderX = (node.containingGroup.__yunPointsX.length+1)/2\r\n                centerOrderY = (node.containingGroup.__yunPointsY.length+1)/2\r\n\r\n            }\r\n            switch (direction) {\r\n                case 'left':\r\n                    if(node.data.orderX == centerOrderX){\r\n                        return;\r\n                    } \r\n                    var it = node.containingGroup.findSubGraphParts().iterator;\r\n                    while (it.next()) {\r\n                        var n = it.value;\r\n                        if(n.data.subRole == \"coreText\" && n.data.dimKey == node.data.dimKey){\r\n                            if(Number(n.data.orderX) == Number(node.data.orderX)-1){\r\n                                nextNode = n;\r\n                                break;\r\n                            }\r\n                        }\r\n                    }\r\n                    break;\r\n                case 'up':\r\n                    if(node.data.orderY == centerOrderY){\r\n                        return;\r\n                    } \r\n                    var it = node.containingGroup.findSubGraphParts().iterator;\r\n                    while (it.next()) {\r\n                        var n = it.value;\r\n                        if(n.data.subRole == \"coreText\" && n.data.dimKey == node.data.dimKey){\r\n                            if(Number(n.data.orderY) == Number(node.data.orderY)+1){\r\n                                nextNode = n;\r\n                                break;\r\n                            }\r\n                        }\r\n                    }\r\n                    break;\r\n                case 'right':\r\n                    if(node.data.orderX == centerOrderX){\r\n                        return;\r\n                    } \r\n                    var it = node.containingGroup.findSubGraphParts().iterator;\r\n                    while (it.next()) {\r\n                        var n = it.value;\r\n                        if(n.data.subRole == \"coreText\" && n.data.dimKey == node.data.dimKey){\r\n                            if(Number(n.data.orderX) == Number(node.data.orderX)+1){\r\n                                nextNode = n;\r\n                                break;\r\n                            }\r\n                        }\r\n                    }\r\n                    break;\r\n                case 'down':\r\n                    if(node.data.orderY == centerOrderY){\r\n                        return;\r\n                    } \r\n                    var it = node.containingGroup.findSubGraphParts().iterator;\r\n                    while (it.next()) {\r\n                        var n = it.value;\r\n                        if(n.data.subRole == \"coreText\" && n.data.dimKey == node.data.dimKey){\r\n                            if(Number(n.data.orderY) == Number(node.data.orderY)-1){\r\n                                nextNode = n;\r\n                                break;\r\n                            }\r\n                        }\r\n                    }\r\n                    break;\r\n            }\r\n            if (nextNode) {\r\n                myDiagram.select(nextNode);\r\n            }\r\n        }\r\n\r\n        if(node.data.category == \"wave\" || node.data.role == \"shiText\" || node.data.role == \"xuText\"){\r\n            switch (direction) {\r\n                case 'left':\r\n                    var prevNode = this.findPrevOlive(node)\r\n                    if (prevNode) {\r\n                        myDiagram.select(prevNode);\r\n                    }\r\n                    break;\r\n                case 'up':\r\n                    var upNode = this.findUpOlive(node)\r\n                    if (upNode) {\r\n                        myDiagram.select(upNode);\r\n                    }\r\n                    break;\r\n                case 'right':\r\n                    var nextNode = this.findNextOlive(node)\r\n                    if (nextNode) {\r\n                        myDiagram.select(nextNode);\r\n                    }\r\n                    break;\r\n                case 'down':\r\n                    var downNode = this.findDownOlive(node)\r\n                    if (downNode) {\r\n                        myDiagram.select(downNode);\r\n                    }\r\n                    break;\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n// export default Trtd;\r\nmodule.exports = Trtd;\n\n\n// WEBPACK FOOTER //\n// ./src/diagram/dspiral.js","var $ = go.GraphObject.make\r\nvar svg = require('../datas/svg.template');\r\n\r\n// 返回svg节点\r\nmodule.exports = function createArcNodeTemplate (diagram) {\r\n    var properties = {\r\n        figure: \"Circle\",\r\n        fill: \"white\",\r\n        strokeWidth: 2,\r\n        stroke: \"black\",\r\n        fontSize: 15,\r\n        font: \"sans-serif\"\r\n    };\r\n    return $(go.Node, \"Spot\",{\r\n                name: \"NODE\",\r\n                \"_controlExpand\": true,\r\n                layerName: \"Background\",\r\n                locationSpot: go.Spot.Center,\r\n                resizeCellSize: new go.Size(10, 10),\r\n                locationObjectName: \"SHAPE\",\r\n                resizable: true,\r\n                resizeObjectName: \"SHAPE\", // user can resize the Shape\r\n                rotatable: true,\r\n                rotateObjectName: \"SHAPE\", // rotate the Shape without rotating the label\r\n                click: function(e, node){\r\n                    // console.log(node.data);\r\n                },\r\n                doubleClick: function (e, node) {\r\n                    doubleClickCreateNodeType(e);\r\n                },\r\n                selectable: true,\r\n                selectionObjectName:\"SHAPE\",\r\n                movable: true,\r\n                angle: 0,\r\n                //toMaxLinks: 1,\r\n                layoutConditions: go.Part.LayoutStandard,\r\n                //layoutConditions:~go.Part.LayoutAdded,\r\n                // fromLinkable: true, toLinkable: true,\r\n                alignment: go.Spot.Center,\r\n                alignmentFocus: go.Spot.Center,\r\n                resizeAdornmentTemplate: diagram.__trtd.nodeResizeAdornmentTemplate(),\r\n                // rotateAdornmentTemplate: nodeRotateAdornmentTemplate,\r\n                contextMenu: diagram.__trtd.getNodeContextMenu(),\r\n                // contextMenu: $(go.Adornment),\r\n            },\r\n            new go.Binding(\"location\", \"loc\", go.Point.parse).makeTwoWay(go.Point.stringify),\r\n            $(go.Shape, {\r\n                name: \"SHAPE\",\r\n                // geometryString: \"M 0,0 a50,50 0 1,1 100,0\",\r\n                // geometryString: \"M 0 50 L 100 100 L 100 200\",\r\n                fill: \"white\",\r\n                strokeWidth: 3, \r\n                stroke: \"black\",\r\n                minSize: new go.Size(50, 50),\r\n                },\r\n                new go.Binding(\"fill\", \"fill\").makeTwoWay(function(v){\r\n                    return v;\r\n                }),\r\n                new go.Binding(\"stroke\", \"stroke\").makeTwoWay(function(v){\r\n                    return v;\r\n                }),\r\n                new go.Binding(\"strokeWidth\", \"strokeWidth\").makeTwoWay(function(v){\r\n                    return v;\r\n                }),\r\n                new go.Binding(\"desiredSize\", \"desiredSize\", function(v) {\r\n                    // var va = (v / 2) * Math.sqrt(2);\r\n                    // console.log(\"desiredSize\",v)\r\n                    return v\r\n                }).ofObject(\"BACKGROUND\"),\r\n                new go.Binding(\"angle\", \"angle\", function(v) {\r\n                    // var va = (v / 2) * Math.sqrt(2);\r\n                    // console.log(\"desiredSize\",v)\r\n                    return v\r\n                }).ofObject(\"BACKGROUND\"),\r\n                new go.Binding(\"geometryString\", \"geometryString\", function(v) {\r\n                    return v;\r\n                }),\r\n            ),\r\n            $(go.Shape, \"Rectangle\",{\r\n                name: 'BACKGROUND',\r\n                fill: \"rgba(1,1,1,0)\",\r\n                // width: 450,\r\n                // height: 450,\r\n                angle: 0,\r\n                stroke: \"rgba(1,1,1,0)\",\r\n                // minSize: new go.Size(50, 50),\r\n                },\r\n                new go.Binding(\"desiredSize\", \"desiredSize\", function(v, d) {\r\n                    // console.log(\"vd m\", v, d )\r\n                    if(!v) return d.part.findObject(\"SHAPE\").measuredBounds.size;\r\n                    return go.Size.parse(v)\r\n                }).makeTwoWay(function(v) {\r\n                    return go.Size.stringify(v)\r\n                }),\r\n                // new go.Binding(\"angle\", \"angle\").makeTwoWay(function(v){\r\n                //     return v;\r\n                // }),\r\n                // new go.Binding(\"desiredSize\", \"height\", function(v) {\r\n                //     var radius = parseInt(v ? v : 100);\r\n                //     var size = new go.Size(radius, radius);\r\n                //     return size;\r\n                // }).makeTwoWay(function(v) {\r\n                //     return v.height;\r\n                // }),\r\n                // background: \"#555\",\r\n                // stroke: \"red\"}\r\n            ),\r\n    );\r\n}\r\n\r\nfunction doubleClickCreateNodeType(e){\r\n    // console.log('eeeeeeeeeeeeeee:', e);\r\n    var myDiagram = e.diagram;\r\n    myDiagram.startTransaction();\r\n    var text = { text: \"双击编辑文本\", category: 'text' };\r\n    text.loc = go.Point.stringify(myDiagram.lastInput.documentPoint);\r\n    myDiagram.model.addNodeData(text);\r\n    myDiagram.commitTransaction()\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/nodeTemplate/createArcNodeTemplate.js","var $ = go.GraphObject.make\r\nvar svg = require('../datas/svg.template');\r\n\r\n// 返回svg节点\r\nmodule.exports = function createArcNodeTemplate (diagram) {\r\n    var properties = {\r\n        figure: \"Circle\",\r\n        fill: \"white\",\r\n        strokeWidth: 2,\r\n        stroke: \"black\",\r\n        fontSize: 15,\r\n        font: \"sans-serif\"\r\n    };\r\n    return $(go.Node, \"Spot\",{\r\n                name: \"NODE\",\r\n                zOrder: 10,\r\n                layerName: \"default\",\r\n                // isLayoutPositioned: false,\r\n                // defaultStretch: go.GraphObject.Horizontal,\r\n                padding: 0,\r\n                \"_controlExpand\": true,\r\n                // layerName: \"Foreground\",\r\n                locationSpot: go.Spot.LeftCenter,\r\n                resizeCellSize: new go.Size(1, 1),\r\n                locationObjectName: \"SHAPE\",\r\n                resizable: true,\r\n                resizeObjectName: \"SHAPE\", // user can resize the Shape\r\n                rotatable: true,\r\n                mouseDragEnter: function(e, obj) {\r\n                    console.log(\"mouseDragEnter line\")\r\n                },\r\n                mouseDrop: function(e, obj) {\r\n                    var node = obj.part;\r\n                    console.log(\"mouseDropmouseDropmouseDropmouseDrop line\")\r\n                },\r\n                // rotateObjectName: \"SHAPE\", // rotate the Shape without rotating the label\r\n                click: (e, node)=>{\r\n                    console.log(node.data)\r\n                },\r\n                deletable: false,\r\n                doubleClick: function (e, node) {\r\n                    // doubleClickCreateNodeType(e);\r\n                    if(!node.selectable){\r\n                        var part = e.diagram.findObjectAt(e.documentPoint,\r\n                          // Navigation function\r\n                            function(x) { return x.part; },\r\n                            // Because of the navigation function, x will always be a Part.\r\n                            function(x) { return x.canSelect() && x.data.category==\"wave\"; }\r\n                        )\r\n                        if(part){\r\n                            e.diagram.select(part)\r\n                            part.doubleClick(e, part)\r\n                        }\r\n                        // var it = parts.iterator;\r\n                        // while (it.next()) {\r\n                        //   console.log(\"#\" + it.key + \" is \" + it.value);\r\n                        // }\r\n                        \r\n                        console.log(\"partpart...........\",part)\r\n                    }\r\n                },\r\n                selectable: true,\r\n                selectionObjectName:\"SHAPE\",\r\n                movable: true,\r\n                angle: 0,\r\n                //toMaxLinks: 1,\r\n                layoutConditions: go.Part.LayoutStandard,\r\n                //layoutConditions:~go.Part.LayoutAdded,\r\n                // fromLinkable: true, toLinkable: true,\r\n                alignment: go.Spot.Center,\r\n                alignmentFocus: go.Spot.Center,\r\n                resizeAdornmentTemplate: diagram.__trtd.nodeResizeAdornmentTemplate(),\r\n                // rotateAdornmentTemplate: nodeRotateAdornmentTemplate,\r\n                contextMenu: $(go.Adornment),\r\n                // contextMenu: $(go.Adornment),\r\n            },\r\n            new go.Binding(\"zOrder\", \"zOrder\").makeTwoWay(),\r\n            new go.Binding(\"selectable\", \"selectable\").makeTwoWay(),\r\n            new go.Binding(\"locationSpot\", \"locationSpot\", function(v){\r\n                return go.Spot.parse(v)\r\n            }).makeTwoWay(function(v){\r\n                return go.Spot.stringify(v)\r\n            }),\r\n            new go.Binding(\"movable\", \"movable\").makeTwoWay(),\r\n            new go.Binding(\"visible\", \"visible\").makeTwoWay(),\r\n            new go.Binding(\"deletable\", \"deletable\").makeTwoWay(),\r\n            new go.Binding(\"location\", \"loc\", go.Point.parse).makeTwoWay(go.Point.stringify),\r\n            new go.Binding(\"angle\", \"angle\").makeTwoWay(function(v,m,a){\r\n                // console.log(\"wwwwwwwwwwwwwwwww:\",v,\" m:\",m.angle,\" a:\",a)\r\n                return v\r\n                a.startTransaction()\r\n                var group = a.findNodeDataForKey(m.group)\r\n                // a.setDataProperty(group, \"angle\", v)\r\n                for(var i=0;i<a.nodeDataArray.length-1;i++){\r\n                    if(a.nodeDataArray[i].group == group.key && a.nodeDataArray[i].category!=\"line\"){\r\n                        var nodeData = a.nodeDataArray[i]\r\n                        var lineLoc = go.Point.parse(m.loc)\r\n                        var nodeLoc = go.Point.parse(nodeData.loc)\r\n                        console.log('111111111')\r\n                        // distanceSquaredPoint\r\n                        var cp = lineLoc,_rotatePoint = lineLoc // 旋转中心\r\n                        \r\n                        var relativeLocation = nodeLoc.copy().subtract(lineLoc) // 原来的相对位置\r\n                        var newangle = v;\r\n                        var originalAngle = m.angle||0\r\n                        var ang = newangle - originalAngle;  // 直线旋转的角度\r\n                        // var cp = _rotatePoint; \r\n                        var angle = (nodeData.angle||0) + ang; // 橄榄旋转的角度\r\n                        var loc = cp.copy().add(relativeLocation);\r\n                        var dir = cp.directionPoint(loc);\r\n                        var newrad = (ang + dir) * (Math.PI / 180);\r\n                        var centerLocationOffset = lineLoc.copy().subtract(nodeLoc);\r\n                        // var locoffset = centerLocationOffset.copy();\r\n                        // locoffset.rotate(ang);\r\n                        var dist = Math.sqrt(cp.distanceSquaredPoint(loc));\r\n                        var offset = new go.Point(0,0).subtract(cp.copy())\r\n                        var cpOrigin = new go.Point(0,0)\r\n                        var nodeOrigin = nodeLoc.copy().offset(offset.x, offset.y)\r\n                        var newNodeOrigin = nodeOrigin.rotate(ang)\r\n                        var newNodeLoc = newNodeOrigin.copy().offset(-offset.x, -offset.y)\r\n                        console.log(\"newNodeLoc\", newNodeLoc)\r\n                        // var location = new go.Point(cp.x + dist * Math.cos(newrad),\r\n                        //     cp.y + dist * Math.sin(newrad)).subtract(locoffset); \r\n                        a.setDataProperty(nodeData, \"loc\", go.Point.stringify(newNodeLoc))                                   \r\n                        a.setDataProperty(nodeData, \"angle\", v)\r\n                    }\r\n                }\r\n                // var group = a.findNodeDataForKey(m.group)\r\n                a.setDataProperty(group, \"angle\", v)\r\n                a.commitTransaction()\r\n                return v;\r\n            }),\r\n\r\n                $(go.Shape, 'LineH', {\r\n                    name: \"SHAPE\",\r\n                    alignment: go.Spot.Left,alignmentFocus: go.Spot.Left,\r\n                    stretch: go.GraphObject.Horizontal,\r\n                    strokeCap: \"round\",\r\n                    // geometryString: \"M 0,0 a50,50 0 1,1 100,0\",\r\n                    // geometryString: \"M 0 50 L 100 100 L 100 200\",\r\n                    // margin: 10,\r\n                    strokeDashArray: [0, 0],\r\n                    width: 300,\r\n                    height:20,\r\n                    margin:0,\r\n                    fill: \"white\",\r\n                    strokeWidth: 3, \r\n                    stroke: \"black\",\r\n                    minSize: new go.Size(NaN, 10),\r\n                    maxSize: new go.Size(NaN, 20)\r\n                    },\r\n                    // $(go.TextBlock, \"alignment: Left\", { row: 0, column: 0 }),\r\n                    new go.Binding(\"fill\", \"fill\").makeTwoWay(function(v){\r\n                        return v;\r\n                    }),\r\n                    new go.Binding(\"stroke\", \"stroke\").makeTwoWay(function(v){\r\n                        return v;\r\n                    }),\r\n                    new go.Binding(\"strokeDashArray\", \"strokeDashArray\", function(v){\r\n                        return JSON.parse(v)\r\n                    }).makeTwoWay(function(v){\r\n                        return  JSON.stringify(v);\r\n                    }),\r\n                    new go.Binding(\"strokeWidth\", \"strokeWidth\").makeTwoWay(function(v){\r\n                        return v;\r\n                    }),\r\n                    // new go.Binding(\"width\", \"width\").makeTwoWay(),\r\n                    // new go.Binding(\"height\", \"height\").makeTwoWay(),\r\n                    new go.Binding(\"desiredSize\", \"desiredSize\", function(v, d) {\r\n                        // console.log(\"vd m\", v, d )\r\n                        if(!v) return d.part.findObject(\"SHAPE\").measuredBounds.size;\r\n                        return go.Size.parse(v)\r\n                    }).makeTwoWay(function(v) {\r\n                        return go.Size.stringify(v)\r\n                    }),\r\n\r\n                    // new go.Binding(\"geometryString\", \"geometryString\", function(v) {\r\n                    //     return v;\r\n                    // }),\r\n                ),\r\n                $(go.Shape, {\r\n                    name: \"BeginArrow\",\r\n                    visible: false,\r\n                    margin:0,\r\n                    alignment: new go.Spot(0,0.5,10,0),\r\n                     alignmentFocus: go.Spot.Right,\r\n                    geometryString: \"M 0,-4 l -8,4 8,4\",\r\n                    strokeCap: \"round\",\r\n                    // geometryString: \"M 0 50 L 100 100 L 100 200\",\r\n                    fill: \"black\",\r\n                    width:10,\r\n                    height:15,\r\n\r\n                    strokeWidth: 3, \r\n                    stroke: \"black\",\r\n                    // minSize: new go.Size(50, 50),\r\n                    },\r\n                    new go.Binding(\"fill\", \"stroke\",function(v){\r\n                        return v;\r\n                    }),\r\n                    new go.Binding(\"stroke\", \"stroke\").makeTwoWay(function(v){\r\n                        return v;\r\n                    }),\r\n                    new go.Binding(\"strokeWidth\", \"strokeWidth\").makeTwoWay(function(v){\r\n                        return v;\r\n                    }),\r\n                    new go.Binding(\"visible\", \"showBeginArrow\"),\r\n                    // new go.Binding(\"angle\", \"angle\", function(v) {\r\n                    //     // var va = (v / 2) * Math.sqrt(2);\r\n                    //     // console.log(\"desiredSize\",v)\r\n                    //     return v\r\n                    // }).ofObject(\"SHAPE\"),\r\n                    // new go.Binding(\"desiredSize\", \"desiredSize\", function(v) {\r\n                    //     // var va = (v / 2) * Math.sqrt(2);\r\n                    //     // console.log(\"desiredSize\",v)\r\n                    //     return v\r\n                    // }).ofObject(\"BACKGROUND\"),\r\n                    // new go.Binding(\"angle\", \"angle\", function(v) {\r\n                    //     // var va = (v / 2) * Math.sqrt(2);\r\n                    //     // console.log(\"desiredSize\",v)\r\n                    //     return v\r\n                    // }).ofObject(\"BACKGROUND\"),\r\n                    // new go.Binding(\"geometryString\", \"geometryStringArrow\", function(v) {\r\n                    //     return v;\r\n                    // }),\r\n                ),\r\n                $(go.Shape, {\r\n                    name: \"EndArrow\",\r\n                    visible: false,\r\n                    margin:0,\r\n                    alignment: new go.Spot(1,0.5,0,0),\r\n                     alignmentFocus: go.Spot.Right,\r\n                    geometryString: \"M 0,-4 l 8,4 -8,4\",\r\n                    strokeCap: \"round\",\r\n                    // geometryString: \"M 0 50 L 100 100 L 100 200\",\r\n                    fill: \"black\",\r\n                    width:10,\r\n                    height:15,\r\n\r\n                    strokeWidth: 3, \r\n                    stroke: \"black\",\r\n                    // minSize: new go.Size(50, 50),\r\n                    },\r\n                    new go.Binding(\"fill\", \"stroke\",function(v){\r\n                        return v;\r\n                    }),\r\n                    new go.Binding(\"stroke\", \"stroke\").makeTwoWay(function(v){\r\n                        return v;\r\n                    }),\r\n                    new go.Binding(\"strokeWidth\", \"strokeWidth\").makeTwoWay(function(v){\r\n                        return v;\r\n                    }),\r\n                    new go.Binding(\"visible\", \"showEndArrow\"),\r\n                    // new go.Binding(\"angle\", \"angle\", function(v) {\r\n                    //     // var va = (v / 2) * Math.sqrt(2);\r\n                    //     // console.log(\"desiredSize\",v)\r\n                    //     return v\r\n                    // }).ofObject(\"SHAPE\"),\r\n                    // new go.Binding(\"desiredSize\", \"desiredSize\", function(v) {\r\n                    //     // var va = (v / 2) * Math.sqrt(2);\r\n                    //     // console.log(\"desiredSize\",v)\r\n                    //     return v\r\n                    // }).ofObject(\"BACKGROUND\"),\r\n                    // new go.Binding(\"angle\", \"angle\", function(v) {\r\n                    //     // var va = (v / 2) * Math.sqrt(2);\r\n                    //     // console.log(\"desiredSize\",v)\r\n                    //     return v\r\n                    // }).ofObject(\"BACKGROUND\"),\r\n                    // new go.Binding(\"geometryString\", \"geometryStringArrow\", function(v) {\r\n                    //     return v;\r\n                    // }),\r\n                ),\r\n                $(go.Shape, {\r\n                    name: \"Arrow\",\r\n                    visible: true,\r\n                    margin:0,\r\n                    alignment: new go.Spot(1,0.5,5,0),\r\n                     alignmentFocus: go.Spot.Right,\r\n                    geometryString: \"F M 158,-4 l 8,4 -8,4 2,-4 z\",\r\n                    strokeCap: \"round\",\r\n                    // geometryString: \"M 0 50 L 100 100 L 100 200\",\r\n                    fill: \"black\",\r\n                    width:20,\r\n                    height:15,\r\n\r\n                    strokeWidth: 3, \r\n                    stroke: \"black\",\r\n                    // minSize: new go.Size(50, 50),\r\n                    },\r\n                    new go.Binding(\"fill\", \"stroke\",function(v){\r\n                        return v;\r\n                    }),\r\n                    new go.Binding(\"stroke\", \"stroke\").makeTwoWay(function(v){\r\n                        return v;\r\n                    }),\r\n                    new go.Binding(\"strokeWidth\", \"strokeWidth\").makeTwoWay(function(v){\r\n                        return v;\r\n                    }),\r\n                    new go.Binding(\"visible\", \"showArrow\"),\r\n                    // new go.Binding(\"angle\", \"angle\", function(v) {\r\n                    //     // var va = (v / 2) * Math.sqrt(2);\r\n                    //     // console.log(\"desiredSize\",v)\r\n                    //     return v\r\n                    // }).ofObject(\"SHAPE\"),\r\n                    // new go.Binding(\"desiredSize\", \"desiredSize\", function(v) {\r\n                    //     // var va = (v / 2) * Math.sqrt(2);\r\n                    //     // console.log(\"desiredSize\",v)\r\n                    //     return v\r\n                    // }).ofObject(\"BACKGROUND\"),\r\n                    // new go.Binding(\"angle\", \"angle\", function(v) {\r\n                    //     // var va = (v / 2) * Math.sqrt(2);\r\n                    //     // console.log(\"desiredSize\",v)\r\n                    //     return v\r\n                    // }).ofObject(\"BACKGROUND\"),\r\n                    // new go.Binding(\"geometryString\", \"geometryStringArrow\", function(v) {\r\n                    //     return v;\r\n                    // }),\r\n                )\r\n    )\r\n\r\n}\r\n\r\nfunction doubleClickCreateNodeType(e){\r\n    // console.log('eeeeeeeeeeeeeee:', e);\r\n    var myDiagram = e.diagram;\r\n    myDiagram.startTransaction();\r\n    var text = { text: \"双击编辑文本\", category: 'text' };\r\n    text.loc = go.Point.stringify(myDiagram.lastInput.documentPoint);\r\n    myDiagram.model.addNodeData(text);\r\n    myDiagram.commitTransaction()\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/nodeTemplate/createLineNodeTemplate.js","var $ = go.GraphObject.make\r\nvar svg = require('../datas/svg.template');\r\n\r\n\r\nfunction makeWave(tx, ty, curviness, repeat) {\r\n    // if (curviness === 0) {\r\n    //   var geo = new go.Geometry(go.Geometry.Line);\r\n    //   geo.startX = 0;\r\n    //   geo.startY = 0;\r\n    //   geo.endX = tx;\r\n    //   geo.endY = ty;\r\n    //   return geo;\r\n    // }\r\n    if(tx == null) tx = 300;\r\n    if(ty == null) ty = 400;\r\n    if(!repeat) repeat = 1\r\n    var ang = go.Point.direction(0, 0, tx, ty);\r\n    var rad = (ang / 180 * Math.PI) + Math.PI/2;\r\n    var offx = curviness * Math.cos(rad);\r\n    var offy = curviness * Math.sin(rad);\r\n    var geo = new go.Geometry();\r\n    var sx = tx/repeat; var sy = ty/repeat;\r\n    var x = 0; var y = 0;\r\n    var fig = new go.PathFigure(x, y, false);\r\n    for (var i = 0; i < repeat; i++) {\r\n      var odd = (i % 2 === 1);\r\n      fig.add(new go.PathSegment(go.PathSegment.Bezier,\r\n                                  x + sx, y + sy,\r\n                                  x + offx * (odd ? -1 : 1), y + offy * (odd ? -1 : 1),\r\n                                  x + sx + offx * (odd ? -1 : 1), y + sy + offy * (odd ? -1 : 1)));\r\n      x += sx;\r\n      y += sy;\r\n    }\r\n    geo.add(fig);\r\n    return geo;\r\n  }\r\n\r\n  function computeGeo1(data, shape, curviness) {\r\n    // var curviness = 30;\r\n    if(!curviness) curviness = 30;\r\n    // if (shape.stroke === \"red\") curviness = -30;\r\n    // else if (shape.stroke === \"green\") curviness = 0;\r\n    var geo = makeWave(data.x, data.y, curviness, data.repeat);\r\n    var offset = geo.normalize();\r\n    shape.position = new go.Point(-offset.x, -offset.y);\r\n    shape.isGeometryPositioned = true;\r\n    return geo;\r\n  }\r\n\r\n  function computeGeo(data, shape){\r\n    return go.Geometry.parse(\"M 0,80 A100,80 0 1 1 200,80\")\r\n  }\r\n  function computeGeo2(data, shape){\r\n    var geo =  go.Geometry.parse(\"M 0,80 A100,80 0 1 0 200,80\")\r\n    shape.isGeometryPositioned = true\r\n    shape.position = new go.Point(-100, -100)\r\n\r\n    return geo;\r\n  }\r\n\r\n// 返回svg节点\r\nmodule.exports = function createWaveNodeTemplate (diagram) {\r\n    var properties = {\r\n        figure: \"Circle\",\r\n        fill: \"white\",\r\n        strokeWidth: 2,\r\n        stroke: \"black\",\r\n        fontSize: 15,\r\n        font: \"sans-serif\"\r\n    };\r\n    // console.log(\"createWaveNodeTemplatecreateWaveNodeTemplatecreateWaveNodeTemplate\")\r\n    // return $(go.Node,\r\n    //     {\r\n    //         click:()=>{\r\n    //             console.log(\"createWaveNodeTemplate click\")\r\n    //         }            \r\n    //     },\r\n    //     $(go.Shape, { stroke: \"green\" },\r\n    //       new go.Binding(\"geometry\", \"\", computeGeo)),\r\n    //     $(go.Shape, { stroke: \"blue\" },\r\n    //       new go.Binding(\"geometry\", \"\", computeGeo)),\r\n    //     $(go.Shape, { stroke: \"red\", strokeDashArray: [10, 10] },\r\n    //       new go.Binding(\"geometry\", \"\", computeGeo))\r\n    //   );\r\n\r\n    return $(go.Node, \"Spot\",{\r\n                name: \"NODE\",\r\n                \"_controlExpand\": true,\r\n                layerName: \"Background\",\r\n                locationSpot: go.Spot.Center,\r\n                // resizeCellSize: new go.Size(10, 10),\r\n                locationObjectName: \"BACKGROUND\",\r\n                resizable: true,\r\n                resizeObjectName: \"BACKGROUND\", // user can resize the Shape\r\n                rotatable: true,\r\n                rotateObjectName: \"BACKGROUND\", // rotate the Shape without rotating the label\r\n                click: function(e, node){\r\n                    // console.log(node.data);\r\n                },\r\n                doubleClick: function (e, node) {\r\n                    doubleClickCreateNodeType(e);\r\n                },\r\n                selectable: true,\r\n                // selectionObjectName:\"SHAPE\",\r\n                movable: true,\r\n                // width: 200, height: 200,\r\n                angle: 0,\r\n                //toMaxLinks: 1,\r\n                layoutConditions: go.Part.LayoutStandard & go.Part.LayoutNodeSized & go.Part.LayoutAdded & go.Part.LayoutNodeSized,\r\n                //layoutConditions:~go.Part.LayoutAdded,\r\n                // fromLinkable: true, toLinkable: true,\r\n                alignment: go.Spot.Center,\r\n                alignmentFocus: go.Spot.Center,\r\n                resizeAdornmentTemplate: diagram.__trtd.nodeResizeAdornmentTemplate(),\r\n                // rotateAdornmentTemplate: nodeRotateAdornmentTemplate,\r\n                contextMenu: diagram.__trtd.getNodeContextMenu(),\r\n                // contextMenu: $(go.Adornment),\r\n            },\r\n            new go.Binding(\"location\", \"loc\", go.Point.parse).makeTwoWay(go.Point.stringify),\r\n            $(go.Shape, \"Rectangle\",{\r\n                name: 'BACKGROUND',\r\n                fill: \"rgba(1,1,1,0)\",\r\n                // width: 450,\r\n                // height: 450,\r\n                angle: 0,\r\n                stroke: \"rgba(1,1,1,1)\",\r\n                \r\n                // minSize: new go.Size(50, 50),\r\n                },\r\n                new go.Binding(\"desiredSize\", \"desiredSize\", function(v, d) {\r\n                    // console.log(\"vd m\", v, d )\r\n                    // if(!v) return d.part.findObject(\"SHAPE\").measuredBounds.size;\r\n                    return go.Size.parse(v)\r\n                }).makeTwoWay(function(v) {\r\n                    return go.Size.stringify(v)\r\n                }),\r\n            ),\r\n            // $(go.Shape, { stroke: \"green\" },\r\n            //     new go.Binding(\"geometry\", \"\", computeGeo),\r\n            //     new go.Binding(\"stroke\", \"stroke\").makeTwoWay(function(v){\r\n            //         return v;\r\n            //     }),\r\n            //     new go.Binding(\"strokeWidth\", \"strokeWidth\").makeTwoWay(function(v){\r\n            //         return v;\r\n            //     }),\r\n            // ),M 0 0 A80,60 0 1 0 160,0\r\n            // $(go.Panel, \"Vertical\",{\r\n            //     alignment: go.Spot.Center,\r\n            //     stretch: go.GraphObject.Fill,\r\n            //     },\r\n            //     new go.Binding(\"desiredSize\", \"desiredSize\", function(v) {\r\n            //         return v\r\n            //     }).ofObject(\"BACKGROUND\"),\r\n                $(go.Shape, { \r\n                    name:\"UP\",\r\n                    stroke: \"blue\", \r\n                    // geometryString:\"M 0,80 A100,80 0 1 1 200,80\",\r\n                    position:new go.Point(0, 0),\r\n                    isGeometryPositioned: true,\r\n                    alignment: go.Spot.Center,\r\n                    stretch: go.GraphObject.Fill\r\n                },\r\n                    new go.Binding(\"geometry\", \"\", computeGeo),\r\n                    new go.Binding(\"stroke\", \"stroke1\").makeTwoWay(function(v){\r\n                        return v;\r\n                    }),\r\n                    new go.Binding(\"strokeWidth\", \"strokeWidth\").makeTwoWay(function(v){\r\n                        return v;\r\n                    }),\r\n                    // new go.Binding(\"desiredSize\", \"desiredSize\", function(v, d) {\r\n                    //     // console.log(\"vd m\", v, d )\r\n                    //     // if(!v) return d.part.findObject(\"SHAPE\").measuredBounds.size;\r\n                    //     return go.Size.parse(v)\r\n                    // }).makeTwoWay(function(v) {\r\n                    //     return go.Size.stringify(v)\r\n                    // }),\r\n                ),\r\n                $(go.Shape, { \r\n                    name:\"DOWN\",\r\n                    stroke: \"red\", \r\n                    // geometryString:\"M 0,0 A100,80 0 1 0 200,0\", \r\n                    alignment: go.Spot.Center,\r\n                    strokeDashArray: [10, 10],\r\n                    isGeometryPositioned: true,\r\n                    position:new go.Point(-100, -100),\r\n                    stretch: go.GraphObject.Fill,\r\n                 },\r\n\r\n                    // new go.Binding(\"geometry\", \"\", computeGeo),\r\n                    new go.Binding(\"geometry\", \"\", computeGeo2),\r\n                    new go.Binding(\"stroke\", \"stroke2\").makeTwoWay(function(v){\r\n                        return v;\r\n                    }),\r\n                    new go.Binding(\"strokeWidth\", \"strokeWidth\").makeTwoWay(function(v){\r\n                        return v;\r\n                    })\r\n                ),\r\n\r\n                    // new go.Binding(\"desiredSize\", \"desiredSize\", function(v, d) {\r\n                    //     // console.log(\"vd m\", v, d )\r\n                    //     // if(!v) return d.part.findObject(\"SHAPE\").measuredBounds.size;\r\n                    //     return go.Size.parse(v)\r\n                    // }).makeTwoWay(function(v) {\r\n                    //     return go.Size.stringify(v)\r\n                    // }),\r\n                // )\r\n            \r\n            // $(go.Shape, {\r\n            //     name: \"SHAPE\",\r\n            //     // geometryString: \"M 0,0 a50,50 0 1,1 100,0\",\r\n            //     // geometryString: \"M 0 50 L 100 100 L 100 200\",\r\n            //     fill: \"white\",\r\n            //     strokeWidth: 3, \r\n            //     stroke: \"black\",\r\n            //     minSize: new go.Size(50, 50),\r\n            //     },\r\n            //     new go.Binding(\"fill\", \"fill\").makeTwoWay(function(v){\r\n            //         return v;\r\n            //     }),\r\n            //     new go.Binding(\"stroke\", \"stroke\").makeTwoWay(function(v){\r\n            //         return v;\r\n            //     }),\r\n            //     new go.Binding(\"strokeWidth\", \"strokeWidth\").makeTwoWay(function(v){\r\n            //         return v;\r\n            //     }),\r\n            //     new go.Binding(\"desiredSize\", \"desiredSize\", function(v) {\r\n            //         // var va = (v / 2) * Math.sqrt(2);\r\n            //         // console.log(\"desiredSize\",v)\r\n            //         return v\r\n            //     }).ofObject(\"BACKGROUND\"),\r\n            //     new go.Binding(\"angle\", \"angle\", function(v) {\r\n            //         // var va = (v / 2) * Math.sqrt(2);\r\n            //         // console.log(\"desiredSize\",v)\r\n            //         return v\r\n            //     }).ofObject(\"BACKGROUND\"),\r\n            //     new go.Binding(\"geometryString\", \"geometryString\", function(v) {\r\n            //         return v;\r\n            //     }),\r\n            // ),\r\n            // $(go.Shape, \"Rectangle\",{\r\n            //     name: 'BACKGROUND',\r\n            //     fill: \"rgba(1,1,1,0)\",\r\n            //     // width: 450,\r\n            //     // height: 450,\r\n            //     angle: 0,\r\n            //     stroke: \"rgba(1,1,1,0)\",\r\n            //     // minSize: new go.Size(50, 50),\r\n            //     },\r\n            //     new go.Binding(\"desiredSize\", \"desiredSize\", function(v, d) {\r\n            //         // console.log(\"vd m\", v, d )\r\n            //         if(!v) return d.part.findObject(\"SHAPE\").measuredBounds.size;\r\n            //         return go.Size.parse(v)\r\n            //     }).makeTwoWay(function(v) {\r\n            //         return go.Size.stringify(v)\r\n            //     }),\r\n            //     // new go.Binding(\"angle\", \"angle\").makeTwoWay(function(v){\r\n            //     //     return v;\r\n            //     // }),\r\n            //     // new go.Binding(\"desiredSize\", \"height\", function(v) {\r\n            //     //     var radius = parseInt(v ? v : 100);\r\n            //     //     var size = new go.Size(radius, radius);\r\n            //     //     return size;\r\n            //     // }).makeTwoWay(function(v) {\r\n            //     //     return v.height;\r\n            //     // }),\r\n            //     // background: \"#555\",\r\n            //     // stroke: \"red\"}\r\n            // ),\r\n    );\r\n}\r\n\r\nfunction doubleClickCreateNodeType(e){\r\n    // console.log('eeeeeeeeeeeeeee:', e);\r\n    var myDiagram = e.diagram;\r\n    myDiagram.startTransaction();\r\n    var text = { text: \"双击编辑文本\", category: 'text' };\r\n    text.loc = go.Point.stringify(myDiagram.lastInput.documentPoint);\r\n    myDiagram.model.addNodeData(text);\r\n    myDiagram.commitTransaction()\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/nodeTemplate/createWaveNodeTemplate.js","\"use strict\";\r\nvar $ = go.GraphObject.make;\r\n\r\n/*\r\n*  Copyright (C) 1998-2017 by Northwoods Software Corporation. All Rights Reserved.\r\n*/\r\n\r\n/**\r\n* @constructor\r\n* @class\r\n*/\r\nfunction GroupRotatingTool() {\r\n  go.RotatingTool.call(this);\r\n\r\n  // Internal state\r\n  // ._initialInfo holds references to all selected non-Link Parts and\r\n  // their initial relative points and angles\r\n  this._initialInfo = null;\r\n  this._rotatePoint = new go.Point();\r\n  this.handleAngle = 0\r\n  this.handleArchetype =\r\n    $(go.Panel, \"Auto\",\r\n        $(go.Shape, \"BpmnActivityLoop\", { width: 30, height: 30, stroke: \"green\", fill: \"transparent\" }),\r\n        $(go.Shape, \"Rectangle\", {\r\n            width: 30,\r\n            height: 30,\r\n            stroke: \"green\",\r\n            fill: \"transparent\",\r\n            strokeWidth: 0\r\n        })\r\n    );\r\n}\r\ngo.Diagram.inherit(GroupRotatingTool, go.RotatingTool);\r\n\r\nGroupRotatingTool.prototype.doActivate = function() {\r\n \r\n  go.RotatingTool.prototype.doActivate.call(this);\r\n\r\n  // var group = this.adornedObject.part;\r\n  var group = this.adornedObject.part; \r\n  if (group instanceof go.Group && group.data.category == \"waveGroup\") {\r\n    // if (group.placeholder !== null) throw new Error(\"GroupRotatingTool can't handle Placeholder in Group\");\r\n    // assume rotation about the location point\r\n    this._rotatePoint = group.location;\r\n    // remember initial points for each Part\r\n    var infos = new go.Map(go.Part, MultiplePartInfo);\r\n    var textAngle = group.data.textAngle|| \"vertical\" // \"vertical\"\r\n    this.walkTree(group, infos, textAngle);\r\n    this._initialInfo = infos;\r\n  }\r\n}\r\n\r\nGroupRotatingTool.prototype.walkTree = function(part, infos, textAngle) {\r\n  if (part === null || part instanceof go.Link) return;\r\n\r\n  // 文字方向为横向时\r\n  if(textAngle == \"horizontal\"){\r\n    console.log(\"textAngle\")\r\n    if(part.data.category == \"autoText\") return;\r\n  }\r\n  // saves original relative position and original angle\r\n  var loc = part.locationObject.getDocumentPoint(go.Spot.Center);\r\n  var locoffset = loc.copy().subtract(part.location);\r\n  var relloc = loc.subtract(this._rotatePoint);\r\n  infos.add(part, new MultiplePartInfo(relloc, locoffset, part.rotateObject.angle));\r\n  // recurse into Groups\r\n  if (part instanceof go.Group) {\r\n    var it = part.memberParts.iterator;\r\n    while (it.next()) this.walkTree(it.value, infos,textAngle);\r\n  }\r\n};\r\n\r\nfunction MultiplePartInfo(relativeloc, locoffset, rotationAngle) {\r\n  this.relativeLocation = relativeloc;\r\n  this.centerLocationOffset = locoffset;\r\n  this.rotationAngle = rotationAngle;  // in degrees\r\n}\r\n\r\n/**\r\n* Rotate all members of a selected Group about the rotatePoint.\r\n* @this {GroupRotatingTool}\r\n* @param {number} newangle\r\n*/\r\nGroupRotatingTool.prototype.rotate = function(newangle) {\r\n  console.log(\"newangle\",newangle)\r\n  var group = this.adornedObject.part;\r\n\r\n  if (group instanceof go.Group) {\r\n    if((newangle+360)%360<300|| (newangle+360)%360>340){\r\n        if((newangle+360)%360<300) newangle=300\r\n        if((newangle+360)%360>340) newangle=340\r\n\r\n      console.log('dayu.................')\r\n      // setTimeout(()=>{\r\n        // group.diagram.startTransaction()\r\n        // group.layout.isOngoing = true;\r\n        // group.layout.isValidLayout = false;\r\n        // if(group.containingGroup ){\r\n        //   group.containingGroup.layout.isOngoing = true;\r\n        //   group.containingGroup.layout.isValidLayout = false;\r\n        // }\r\n        // group.diagram.commitTransaction() \r\n\r\n      // },100)\r\n \r\n      // return;\r\n    }\r\n  }\r\n  go.RotatingTool.prototype.rotate.call(this, newangle);\r\n  \r\n\r\n\r\n  if (group instanceof go.Group) {\r\n\r\n    var ang = newangle - this.originalAngle;\r\n    var cp = this._rotatePoint;\r\n    group.diagram.startTransaction()\r\n    var it = this._initialInfo.iterator;\r\n    while (it.next()) {\r\n      var part = it.key;\r\n      if (part instanceof go.Link) return; // only Nodes and simple Parts\r\n      var info = it.value;\r\n\r\n      // part.rotateObject.angle = info.rotationAngle + ang;\r\n      var angle = info.rotationAngle + ang;\r\n\r\n      var loc = cp.copy().add(info.relativeLocation);\r\n      var dir = cp.directionPoint(loc);\r\n      var newrad = (ang + dir) * (Math.PI / 180);\r\n      var locoffset = info.centerLocationOffset.copy();\r\n      locoffset.rotate(ang);\r\n      var dist = Math.sqrt(cp.distanceSquaredPoint(loc));\r\n      // part.location = new go.Point(cp.x + dist * Math.cos(newrad),\r\n      //                              cp.y + dist * Math.sin(newrad)).subtract(locoffset);\r\n      var location = new go.Point(cp.x + dist * Math.cos(newrad),\r\n                                   cp.y + dist * Math.sin(newrad)).subtract(locoffset);                                   \r\n      group.diagram.model.setDataProperty(part.data, \"loc\", go.Point.stringify(location))                                   \r\n      group.diagram.model.setDataProperty(part.data, \"angle\", angle) \r\n      // var git = group.memberParts;\r\n      // console.log(\"item:\",git)\r\n      // var maxWidth = 0;\r\n      // var maxHeight = 0;\r\n      // while (git.next()) {\r\n      //   var item = git.value;\r\n      //   console.log(\"item:\",item)\r\n      //   if(item.naturalBounds.width > maxWidth){\r\n      //     maxWidth = item.naturalBounds.width;\r\n      //   }\r\n      //   if(item.naturalBounds.height > maxHeight){\r\n      //     maxHeight = item.naturalBounds.height;\r\n      //   }\r\n      //   console.log(`maxHeight:${maxHeight},maxWidth:${maxWidth}`)\r\n\r\n      // }                    \r\n      // group.diagram.model.setDataProperty(group.data, \"desiredSize\", `${maxWidth+100} ${maxHeight}`)   \r\n      \r\n      // that.diagram.startTransaction();\r\n      console.log(\"isValidLayoutisValidLayout\")\r\n      // var group = that.diagram.findNodeForKey(data.key)\r\n      group.layout.isOngoing = true;\r\n      group.layout.isValidLayout = false;\r\n      if(group.containingGroup ){\r\n        group.containingGroup.layout.isOngoing = true;\r\n        group.containingGroup.layout.isValidLayout = false;\r\n      }\r\n      // that.diagram.commitTransaction();\r\n      group.diagram.commitTransaction()                          \r\n    }\r\n  }\r\n}\r\n\r\n\r\nmodule.exports = GroupRotatingTool\n\n\n// WEBPACK FOOTER //\n// ./src/tools/GroupRotatingTool.js","\"use strict\";\n/*\n*  Copyright (C) 1998-2019 by Northwoods Software Corporation. All Rights Reserved.\n*/\n\n// HTML + JavaScript text editor menu, made with HTMLInfo\n// This is a re-implementation of the default text editor\n// This file exposes one instance of HTMLInfo, window.TextEditor\n// See also TextEditor.html\n(function(window) {\n  var textarea = document.createElement('textarea');\n  textarea.id = \"myTextArea\";\n    console.log(\"TextEditorTextEditorTextEditorTextEditorTextEditorTextEditorTextEditorTextEditorTextEditorTextEditorTextEditorTextEditor222222222222\")\n  textarea.addEventListener('input', function(e) {\n    var tool = TextEditor.tool;\n    if (tool.textBlock === null) return;\n    var tempText = tool.measureTemporaryTextBlock(this.value);\n    var scale = this.textScale;\n    this.style.width = 20 + tempText.measuredBounds.width * scale + 'px';\n    this.rows = tempText.lineCount;\n  }, false);\n\n  var observe;\n  if (window.attachEvent) {\n    observe = function (element, handlers) {\n      handlers.forEach(t => {\n        element.attachEvent('on' + t.evt, t.handler);\n      });\n    };\n  } else {\n    observe = function (element, handlers) {\n      handlers.forEach(t => {\n        element.addEventListener(t.evt, t.handler, false);\n      });\n    };\n  }\n\n  function resize() {\n    textarea.style.minHeight = \"40px\";\n    textarea.style.height = 'auto';\n    textarea.style.height = textarea.scrollHeight + 'px';\n  }\n\n  function delayedResize() {\n    setTimeout(resize, 0);\n  }\n\n  observe(textarea, [\n    {\n      evt: \"change\",\n      handler: resize\n    },\n    {\n      evt: \"cut\",\n      handler: delayedResize\n    },\n    {\n      evt: \"paste\",\n      handler: delayedResize\n    },\n    {\n      evt: \"drop\",\n      handler: delayedResize\n    },\n    {\n      evt: \"keydown\",\n      handler: delayedResize\n    }\n  ]);\n\n  textarea.addEventListener('keydown', function(e) {\n    var tool = TextEditor.tool;\n    if (tool.textBlock === null) return;\n    var keynum = e.which;\n    if (keynum === 13) { // Enter\n      if (tool.textBlock.isMultiline === false) e.preventDefault();\n      tool.acceptText(go.TextEditingTool.Enter);\n      return;\n    } else if (keynum === 9) { // Tab\n      tool.acceptText(go.TextEditingTool.Tab);\n      e.preventDefault();\n      return;\n    } else if (keynum === 27) { // Esc\n      tool.doCancel();\n      if (tool.diagram !== null) tool.diagram.doFocus();\n    }\n  }, false);\n\n  // handle focus:\n  textarea.addEventListener('focus', function(e) {\n    var tool = TextEditor.tool;\n    if (!tool || tool.currentTextEditor === null) return;\n\n    if (tool.state === go.TextEditingTool.StateActive) {\n      tool.state = go.TextEditingTool.StateEditing;\n    }\n\n    if (tool.selectsTextOnActivate) {\n      textarea.select();\n      textarea.setSelectionRange(0, 9999);\n    }\n  }, false);\n\n  // Disallow blur.\n  // If the textEditingTool blurs and the text is not valid,\n  // we do not want focus taken off the element just because a user clicked elsewhere.\n  textarea.addEventListener('blur', function(e) {\n    var tool = TextEditor.tool;\n    if (!tool || tool.currentTextEditor === null || tool.state === go.TextEditingTool.StateNone) return;\n\n    textarea.focus();\n\n    if (tool.selectsTextOnActivate) {\n      textarea.select();\n      textarea.setSelectionRange(0, 9999);\n    }\n  }, false);\n\n\n  var TextEditor = new go.HTMLInfo();\n\n  TextEditor.valueFunction = function() { return textarea.value; }\n\n  TextEditor.mainElement = textarea; // to reference it more easily\n\n  // used to be in doActivate\n  TextEditor.show = function(textBlock, diagram, tool) {\n      console.log(\"show.......................\")\n    if (!(textBlock instanceof go.TextBlock)) return;\n\n    TextEditor.tool = tool;  // remember the TextEditingTool for use by listeners\n\n    // This is called during validation, if validation failed:\n    if (tool.state === go.TextEditingTool.StateInvalid) {\n      textarea.style.border = '3px solid red';\n      textarea.focus();\n      return;\n    }\n\n    // This part is called during initalization:\n\n    var loc = textBlock.getDocumentPoint(go.Spot.Center);\n    var pos = diagram.position;\n    var sc = diagram.scale;\n    var textscale = textBlock.getDocumentScale() * sc;\n    if (textscale < tool.minimumEditorScale) textscale = tool.minimumEditorScale;\n    // Add slightly more width/height to stop scrollbars and line wrapping on some browsers\n    // +6 is firefox minimum, otherwise lines will be wrapped improperly\n    var textwidth = (textBlock.naturalBounds.width * textscale) + 6;\n    var textheight = (textBlock.naturalBounds.height * textscale) + 2;\n    var left = (loc.x - pos.x) * sc;\n    var top = (loc.y - pos.y) * sc;\n\n    textarea.value = textBlock.text;\n    // the only way you can mix font and fontSize is if the font inherits and the fontSize overrides\n    // in the future maybe have textarea contained in its own div\n    diagram.div.style['font'] = textBlock.font;\n\n    var paddingsize = 1;\n    textarea.style['position'] = 'absolute';\n    textarea.style['zIndex'] = '100';\n    textarea.style['font'] = 'inherit';\n    textarea.style['fontSize'] = (textscale * 100) + '%';\n    textarea.style['lineHeight'] = 'normal';\n    textarea.style['width'] = (textwidth) + 'px';\n    textarea.style['left'] = ((left - (textwidth / 2) | 0) - paddingsize) + 'px';\n    textarea.style['top'] = ((top - (textheight / 2) | 0) - paddingsize) + 'px';\n    textarea.style['textAlign'] = textBlock.textAlign;\n    textarea.style['margin'] = '0';\n    textarea.style['padding'] = paddingsize + 'px';\n    textarea.style['border'] = '0';\n    textarea.style['outline'] = 'none';\n    textarea.style['whiteSpace'] = 'pre-wrap';\n    textarea.style['overflow'] = 'hidden'; // for proper IE wrap\n    textarea.rows = textBlock.lineCount;\n    textarea.textScale = textscale; // attach a value to the textarea, for convenience\n    textarea.className = 'goTXarea';\n\n    // Show:\n    diagram.div.appendChild(textarea);\n\n    // After adding, focus:\n    textarea.focus();\n    if (tool.selectsTextOnActivate) {\n      textarea.select();\n      textarea.setSelectionRange(0, 9999);\n    }\n  };\n\n  TextEditor.hide = function(diagram, tool) {\n    diagram.div.removeChild(textarea);\n    TextEditor.tool = null;  // forget reference to TextEditingTool\n  }\n\n  window.TextEditor = TextEditor;\n})(window);\n\n\n\n// WEBPACK FOOTER //\n// ./src/tools/textEditor.js"],"sourceRoot":""}