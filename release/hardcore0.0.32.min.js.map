{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///./src/layout/SpiralLayout.js","webpack:///./src/diagram/tianpan.js","webpack:///webpack/bootstrap 3be55b3873a9b188dcca","webpack:///./src/helpers/helpers.gojs.js","webpack:///./src/nodeTemplate/base.js","webpack:///./src/nodeTemplate/createPictureSingleNodeTemplate.js","webpack:///./src/nodeTemplate/createTextNodeTemplate.js","webpack:///./src/nodeTemplate/createPictureNodeTemplate.js","webpack:///./src/nodeTemplate/createNodeSvgTemplate.js","webpack:///./src/nodeTemplate/createNodeTemplate.js","webpack:///./src/datas/svg.template.js","webpack:///./src/layout/waveGroupLayout.js","webpack:///./src/diagram/trtd.js","webpack:///./src/nodeTemplate/factory.js","webpack:///./src/assets/localization.js","webpack:///./src/main.js","webpack:///./src/nodeTemplate/waveNodeTemplate.js","webpack:///./src/nodeTemplate/waveGroupNodeTemplate.js","webpack:///./src/nodeTemplate/axisGroupNodeTemplate.js","webpack:///./src/layout/axisGroupLayout.js","webpack:///./src/nodeTemplate/iconTextNodeTemplate.js","webpack:///./src/nodeTemplate/autoTextNodeTemplate.js","webpack:///./src/nodeTemplate/labelGroupNodeTemplate.js","webpack:///./src/nodeTemplate/picNodeTemplate.js","webpack:///./src/nodeTemplate/picGroupNodeTemplate.js","webpack:///./src/nodeTemplate/yunGroupNodeTemplate.js","webpack:///./src/layout/yunGroupLayout.js","webpack:///./src/nodeTemplate/yunpanGroupNodeTemplate.js","webpack:///./src/layout/yunpanGroupLayout.js","webpack:///./src/nodeTemplate/shapeNodeTemplate.js","webpack:///./src/nodeTemplate/shapeTextNodeTemplate.js","webpack:///./src/linkTemplate/createTianpanLink.js","webpack:///./src/diagram/dipan.js","webpack:///./src/diagram/jin.js","webpack:///./src/diagram/huo.js","webpack:///./src/diagram/shui.js","webpack:///./src/diagram/yunpan.js","webpack:///./src/diagram/wheel.js","webpack:///./src/diagram/dspiral.js","webpack:///./src/nodeTemplate/createArcNodeTemplate.js","webpack:///./src/nodeTemplate/createLineNodeTemplate.js","webpack:///./src/nodeTemplate/createWaveNodeTemplate.js","webpack:///./src/tools/GroupRotatingTool.js","webpack:///./src/tools/textEditor.js"],"names":["Math","newStartAngle","exports","module","navigator","S4","aElements","document","aEle","i","clear","chart","nodeInfo","str","d","linkInfo","groupInfo","g","adornment","mems","links","part","go","queue","tdTravelTdpDataWidth","dealingNode","collector","childNodeData","model","tdTravelTdpData","nodeData","nextNodeData","window","item","temp","JSON","diff","checkModel","data","nodeDataArray","root","checkDataExists","arguments","defaultVal","result","myDiagram","e","evt","start","end","val","diagram","rootNode","callback","group","stack","node","child","link","nextChild","$","over","x","buttonFillNormal","buttonStrokeNormal","paddingHorizontal","paddingVertical","button","enabledChanged","shape","btn","enabled","cursor","name","figure","spot1","spot2","parameter1","parameter2","stroke","brush","oldskip","NodeBase","options","obj","maxSize","font","wrap","margin","that","fill","strokeWidth","alignment","overflow","textAlign","spacingAbove","spacingBelow","portId","stretch","Uniform","helpers","v","selnode","layerName","zOrder","locationSpot","resizeCellSize","locationObjectName","resizeObjectName","rotateObjectName","doubleClick","click","angle","layoutConditions","alignmentFocus","resizeAdornmentTemplate","contextMenu","selectionAdornmentTemplate","width","height","isActionable","centerPicture","equalWidthHeightPicture","bringToLayer","successFunction","pict","sourceCrossOrigin","Date","properties","fontSize","location","toMaxLinks","strokeDashArray","minSize","Fill","_","randomColor","luminosity","count","tmpColor","follower","preNode","level","parent","cur","nextNode","parNode","parGroup","tdCurrentTheme","key","childGroup","getRootNodeData","rootLoc","rootPoint","firstChild","firstLoc","relativeFirstLoc","relativeMidLoc","midLoc","offset","computeOffset","curLoc","relativeLoc","depth","nextLoc","relativeNextLoc","prevLoc","relativeLocPrev","lastLoc","dy","newR","dx","arr","SpiralLayout","require","TRTD_BASE","lang","createNodeTemplate","createPictureSingleNodeTemplate","createPictureNodeTemplate","createTextNodeTemplate","createNodeSvgTemplate","createTianpanLink","colorMap","Trtd","config","div","diagramConfig","Object","showIds","message","text","category","tmpModel","contextClick","copyable","layout","radius","isInitial","LayoutAdded","parseInt","size","disconnectFromTreeStructure","newLink","from","to","applyTheme2Link","newGroup","nodeGroup","addGroupForNode","sibling","preLink","parentGroup","cmd","locateNode","tempArray","mainNode","n","nextNodeLink","intoLink","tmpNodeData","oldlink","nodes","mylinks","grandNode","isautolayout","currentType","toKey","nextkey","color","nextnode","nextlink","l","nextLocation","parentNode","linkToFollower","copyLink","tb","ControlAutoLayout","autoLayoutPart","newnode","iskeyboard","firstNode","firstLink","InitialFontSize","direction","prevNode","autoLayoutAll","centerNode","centerCurrentNode","zoomToFit","imgdata","scale","background","type","tinycolor","toolTip","desiredSize","first","pushChildKeyToArr","re","interactions","tdTransToNum","va","svg","doubleClickCreateNodeType","selectionObjectName","geometryString","mouseOver","mouseLeave","mouseDragEnter","mouseDragLeave","mouseDrop","column","row","alert","rowSpan","setTimeout","groupTextAngle","shi","textAngle","computeNewRotateLoc","xu","collection","oliveWidth","oliveHeight","shiStroke","xuStroke","centerStroke","oliveType","haveTail","waveTotalSize","shiTextColl","xuTextColl","centerTextColl","it","line","xuStrokeWidth","shiStrokeWidth","shiStrokeDashArray","xuStrokeDashArray","Number","a","b","lastOlive","oldOrder","newOrder","index","loc","centerText","textStroke","initCenterText","objCenterText","adustOliveText","adjustTextAngle","rotateCenter","nodeOrigin","currentLoc","newNodeOrigin","newNodeLoc","WaveGroupLayout","layoutWaveGroup","coll","parts","fromnode","tonode","nodeTemplateFactory","id","borderWidth","borderColor","groupColor","groupStroke","groupStrokeWidth","themeName","linkColor","colorRange","value","source","documentPoint","localStorage","themeText","tmp","newData","imageParas","list","isSelected","p","groupKey","basePoint","groupData","picData","themeData","timeData","energeData","text1Data","text2Data","text3Data","defaultConfig","initialContentAlignment","initialAutoScale","initialDocumentSpot","initialViewportSpot","padding","maxScale","minScale","scrollMode","scrollMargin","maxSelectionCount","InitialLayoutCompleted","validCycle","ViewportBoundsChanged","forelayer","nodeCopy","doms","info","box","toolTipText","mainbox","contextMeluDom","cxElement","menuList","cxTool","contextmenu","mousePt","showMenus","liL","style","waveNodeTemplate","waveGroupNodeTemplate","axisGroupNodeTemplate","iconTextNodeTemplate","autoTextNodeTemplate","labelGroupNodeTemplate","picNodeTemplate","picGroupNodeTemplate","yunGroupNodeTemplate","yunpanGroupNodeTemplate","shapeNodeTemplate","shapeTextNodeTemplate","nodeTemplateClass","eval","en","chn","cn","trans","localization","typeModules","trtdClass","cos","sin","nodesRectList","rect","_cover","tdSpiralMode","copy","topNodes","findFlag","cw","initialAngle","nodesDealed","distance","edge","vert","childCount","hasGroup","nextedge","nextvert","rad","tmpR","radiusDis","tmpPoint","adjustAngleCount","fromVert","y","point","getInvolutePoint","equaldistance","dangle","angleOld","newPoint","curRect","res","dept","equalSpiral","dia","_do","get","set","Base","WaveNodeTemplate","radiusX","radiusY","geo","seg","Bottom","clockwiseFlag","textEdited","textBlock","newv","shiText","xuText","deleteObjs","cbian","c","title","waveGroupLayout","axisGroupLayout","AxisNodeTemplate","AxisGroupLayout","dataCollection","maxWidth","maxHeight","axisYText","axisXText","labelText1","labelText2","labelText3","labelGroup","centerLine","axisX","axisY","waveGroup","x1","x2","itl","IconTextTemplate","verticalAlignment","maxLines","Right","AutoTextTemplate","maxRadius","r1","r2","oliveNode","selOrderX","selOrderY","selDimKey","nodeCoreTexts","selnodeCoreTexts","yunnodeCoreTexts","yunselnodeCoreTexts","normDim","selOrder","nodeOrder","centerOrderX","centerOrderY","tmpX","tmpY","selectionChanged","orderX","orderY","shapeStrokes","showShape","gridWidth","shapeData","role","nod","olive","LabelGroupNodeTemplate","flag","oldStatus","spacing","cellSize","arrangement","wrappingColumn","Location","opacity","Center","PicNodeTemplate","PicGroupNodeTemplate","offsetBig","cbianText1","cbianText2","cbianText3","offsetSmall","textStrokes","picture","pictureBig","sizeBig","cbianType","cbianThemes","cbianName","theme","len","baseNode","pic","propertyPicture","propertySize","propertyoffset","nodeNameList","nodeName","tmpNode","nextIndex","LayoutNodeSized","yunGroupLayout","YunNodeTemplate","minX","minY","YunGroupLayout","gridHeight","verticalLines","horizontalLines","freelLines","allLines","freeTexts","shapeNodes","snapType","beginSpark","allPointsX","allPointsY","shapeWidth","dimXLoc","dimYLoc","horizontalDim","verticalDim","shadowColor","shadowOffset","C","A","B","O","locD","r","OC","directionOC","directionFlagOD","directionOD","angleDOC","OD","cent","sweep","p1","ctl1","ctl2","SmoothLink","centorPoint","centInfo","rcenter","rstart","rend","center2mid","af","start2","end2","computeControlPoint","isNaN","curve","curviness","adjusting","draggedNode","fromNode","toNode","toArrow","lastNode","layerThickness","q","o","globalProperties","tdDipanTextAngle","getNodeContextMenu","changeTemp2normal","selectionAdorned","BottomRight","currentThemeID","splitLayer","maxCircle","totalCount","dipanRoot","nodeArr","nodeLevelArr","maxNodeArr","max","maxCircles","firstnodeData","sectotLayerThickNess","radlay1","found","newdata","rootRadius","layer","separator","label","tmpDataObj","childNum","sweepUnit","length","tmpArray","tmpAngle","followerNode","changeLayout","radialLayout","splitRadlayout","Trtd_tianpan","geometry","mouseEnter","mouseHover","dir","addy","addx","del","yl","locy","locL","loco","newy","newytext","xl","min","newx","newxtext","locx","changelen","changelenx","datalocx","gs","gs2","shapeShowblur","circleStroke","createArcNodeTemplate","createLineNodeTemplate","createWaveNodeTemplate","GroupRotatingTool","rotatingTool","PartResized","waveCount","lastWave","nodeSize","waveSize","SelectionMoved","waveColl","tool","deleteNodes","deleteLines","unnormDim","lineRole","axisData","curOrder","splitOlive","maxOlive","curShiText","curXuText","order","baseLoc","axisGroupKey","labelGroupKey","waveGroupKey","olive1Key","olive2Key","olive3Key","olive4Key","olive1ShiTextKey","olive1XuTextKey","olive2ShiTextKey","olive2XuTextKey","olive3ShiTextKey","olive3XuTextKey","olive4ShiTextKey","olive4XuTextKey","olive1CenterTextKey","olive2CenterTextKey","olive3CenterTextKey","olive4CenterTextKey","axisGroupCount","theta","fireTexts","waveTail","mapObj","curLine","dimTextData","lineData","toLayerName","tempData","prenode","upnode","downnode","upNode","downNode","strokeCap","position","infos","locoffset","relloc","newangle","ang","cp","newrad","dist","textarea","TextEditor","tempText","handlers","element","t","observe","handler","keynum","pos","sc","textscale","textwidth","textheight","left","top","paddingsize","resize"],"mappings":"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","file":"hardcore0.0.32.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"hardcore0.0.32\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"hardcore0.0.32\"] = factory();\n\telse\n\t\troot[\"hardcore0.0.32\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","\r\n/*\r\n*  Copyright (C) 1998-2015 by Northwoods Software Corporation. All Rights Reserved.\r\n*/\r\n\r\n// A custom Layout that lays out a chain of nodes in a spiral\r\n\r\n/**\r\n * @constructor\r\n * @extends Layout\r\n * @class\r\n * This layout assumes the graph is a chain of Nodes,\r\n * {@link #spacing} controls the spacing between nodes.\r\n */\r\n\r\n// 'use strict';\r\n\r\n// import * as go from 'gojs';\r\nvar $ = go.GraphObject.make;\r\nvar tdDebug = false;\r\nvar tdSpacing = 0.7;\r\nvar tdSpiralMode = 'sparse';\r\n\r\nfunction SpiralLayout() {\r\n    go.Layout.call(this);\r\n    this._radius = NaN;\r\n    this._spacing = 10;\r\n    this._clockwise = true;\r\n    this._pointlist = [];\r\n}\r\ngo.Diagram.inherit(SpiralLayout, go.Layout);\r\n\r\n/**\r\n * @ignore\r\n * Copies properties to a cloned Layout.\r\n * @this {SpiralLayout}\r\n * @param {Layout} copy\r\n * @override\r\n */\r\nSpiralLayout.prototype.cloneProtected = function(copy) {\r\n    go.Layout.prototype.cloneProtected.call(this, copy);\r\n\r\n    copy._radius = this._radius;\r\n    copy._spacing = this._spacing;\r\n    copy._clockwise = this._clockwise;\r\n};\r\n\r\n//根据基圆半径和角度参数确定螺旋线上的一个点\r\n//渐开线的参数方程\r\nfunction getInvolutePoint(radius, angle) {\r\n    var cos = Math.cos(angle);\r\n    var sin = Math.sin(angle);\r\n    var x = radius * (cos + angle * sin);\r\n    var y = radius * (sin - angle * cos);\r\n    return new go.Point(x, y);\r\n}\r\n\r\n//检查给定区域是否和nodes内所有节点重叠\r\nfunction checkCoveredWithNodes(rect, nodesRectList) {\r\n    var _cover = false;\r\n\r\n    var it = nodesRectList.iterator;\r\n    while (it.next()) {\r\n\r\n        if (Math.sqrt(rect.point.distanceSquaredPoint(it.value.point)) < (rect.radius + it.value.radius)) {\r\n            //console.log([\" node:\", it.value.node.data.key,'is in the radius ',node.actualBounds.width,' of:',node.data.key].join(\" \"));\r\n            _cover = true;\r\n            break;\r\n        }\r\n    }\r\n    return _cover;\r\n}\r\n\r\n/**\r\n * This method actually positions all of the Nodes, assuming that the ordering of the nodes\r\n * is given by a single link from one node to the next.\r\n * This respects the {@link #spacing} property to affect the layout.\r\n * @this {SpiralLayout}\r\n * @param {Diagram|Group|Iterable} coll the collection of Parts to layout.\r\n */\r\nSpiralLayout.prototype.doLayout = function(coll) {\r\n\r\n\r\n    if (this.network === null) {\r\n        this.network = this.makeNetwork(coll);\r\n    }\r\n    //console.log(\"begin new layout\");\r\n    var root = null;\r\n    var findFlag = false;\r\n    var v;\r\n    // find a root vertex -- one without any incoming edges\r\n    var it = this.network.vertexes.iterator;\r\n    var topNodes = [];\r\n    while (it.next()) {\r\n        //console.log(it.value.node.data.key+\":\"+it.value.node.data.text);\r\n        v = it.value;\r\n        if (!findFlag) {\r\n            if (root === null) root = v; // in case there are only circles\r\n            if (v.sourceEdges.count === 0) {\r\n                root = v;\r\n                findFlag = true;\r\n            }\r\n        } else {\r\n            if (v.sourceEdges.count === 0) {\r\n                topNodes.push(v);\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n\r\n    // couldn't find a root vertex\r\n    if (root === null) {\r\n        this.network = null;\r\n        return;\r\n    }\r\n\r\n    var cw = (this.clockwise ? 1 : -1);\r\n    var rad;\r\n\r\n    var angle = 2.5;\r\n    var isautolayout = window.localStorage.getItem('isautolayout') == null ? true : window.localStorage.getItem('isautolayout') == 'true';\r\n    // now locate each of the following nodes, in order, along a spiral\r\n    var vert;\r\n    var x, y;\r\n    var _pointlist;\r\n    var _do = true;\r\n    var count = 0; //循环计数\r\n    var res;\r\n    var initialAngle = 5;\r\n    var edge, fromVert, dangle, index, dept, dl, nextedge, nextvert,\r\n        nodesDealed = new go.List(),\r\n        curRect, //当前节点的矩形区域\r\n        newPoint,\r\n        dia,\r\n        distance = 150,\r\n        equaldistance;\r\n    if (tdSpiralMode == 'terse') {\r\n        distance = 20;\r\n    }\r\n    if (tdSpiralMode == 'sparse') {\r\n        distance = 150;\r\n    }\r\n    var tmpR; //计算中间值\r\n    edge = root.destinationEdges.first();\r\n    vert = (edge !== null ? edge.toVertex : null);\r\n\r\n    root.node.rad = rad;\r\n    var childCount = 0;\r\n    var hasGroup = false;\r\n    while (vert !== null) {\r\n        childCount++;\r\n        if (vert.node.data['isGroup']) {\r\n            hasGroup = true;\r\n        }\r\n        nextedge = vert.destinationEdges.first();\r\n        nextvert = (nextedge !== null ? nextedge.toVertex : null);\r\n        edge = nextedge;\r\n        //fromVert = vert;\r\n        vert = nextvert;\r\n    }\r\n    edge = root.destinationEdges.first();\r\n    vert = (edge !== null ? edge.toVertex : null);\r\n\r\n    rad = 1;\r\n    var tmpPoint;\r\n    //找到第一个节点和根节点不相交的rad值\r\n    if (vert) {\r\n        tmpR = vert.node.actualBounds.width;\r\n        //var rootRect = new go.Rect(root.node.location.x - root.node.actualBounds.width / 2, root.node.location.y - root.node.actualBounds.height / 2, root.node.actualBounds.width, root.node.actualBounds.height);\r\n        var radiusDis = root.node.actualBounds.width / 2 + vert.node.actualBounds.width / 2;\r\n        while (true) {\r\n            tmpPoint = getInvolutePoint(rad, initialAngle);\r\n            tmpPoint = new go.Point(tmpPoint.x + root.node.location.x, tmpPoint.y + root.node.location.y);\r\n            if ((Math.sqrt(tmpPoint.distanceSquaredPoint(root.node.location))) > (radiusDis + 10)) { //+10 是为了防止第一个子节点和根节点接壤\r\n                break;\r\n            } else {\r\n                rad += 0.1;\r\n            }\r\n        }\r\n    }\r\n    var adjustAngleCount = 0;\r\n\r\n    while (_do) {\r\n\r\n        count++; //计数\r\n        //初始化参数\r\n        angle = initialAngle;\r\n        edge = root.destinationEdges.first();\r\n        //if (edge !== null && edge.link !== null) edge.link.curviness = rad;\r\n        root.node.data.angle = 0;\r\n        if (edge !== null && edge.link !== null) edge.link.curviness = cw * rad;\r\n        var curviness = edge == null ? 20 : edge.link.curviness;\r\n        // now locate each of the following nodes, in order, along a spiral\r\n        vert = (edge !== null ? edge.toVertex : null);\r\n\r\n        fromVert = root;\r\n        index = 0;\r\n        var angleOld; //增加angle时保留的原始值，用于恢复\r\n        x = 0, y = 0;\r\n        //_pointlist = [];\r\n        // _pointlist.push(root.node.data.key + \":(0,0)\");\r\n        if (vert) vert.node.data.angle = angle;\r\n        nodesDealed.clear();\r\n        //nodesDealed.add(new go.Rect(root.node.location.x - root.node.actualBounds.width / 2, root.node.location.y - root.node.actualBounds.height / 2, root.node.actualBounds.width, root.node.actualBounds.height));\r\n        nodesDealed.add({ point: root.node.location, radius: root.node.actualBounds.width / 2 });\r\n\r\n        //等弧长\r\n        //equaldistance = Math.sqrt(getInvolutePoint(rad, 5 * Math.PI / 2).distanceSquaredPoint(getInvolutePoint(rad, 5 * Math.PI / 2 - tdSpacing)));\r\n\r\n        //equaldistance = Math.sqrt(getInvolutePoint(rad, 5 * Math.PI / 2).distanceSquaredPoint(getInvolutePoint(rad, 5 * Math.PI / 2 - tdSpacing)));\r\n        if (tdSpiralMode == 'terse') {\r\n            equaldistance = Math.sqrt(getInvolutePoint(rad, 5).distanceSquaredPoint(getInvolutePoint(rad, 6)));\r\n        } else {\r\n            equaldistance = Math.sqrt(getInvolutePoint(rad, 5 * Math.PI / 2).distanceSquaredPoint(getInvolutePoint(rad, 5 * Math.PI / 2 - tdSpacing)));\r\n        }\r\n        //重新开始布局节点\r\n        while (vert !== null) {\r\n            index++;\r\n            root.node.data.rad = rad;\r\n            //console.log(vert.node.data.key + \":\" + vert.node.data.text);\r\n            // involute spiral\r\n            //循环判断是否有覆盖，如果覆盖增加基圆半径，重新计算下一个位置\r\n            dangle = 0.4;\r\n            angleOld = angle;\r\n            //for(dangle=0.1;dangle<=0.9;dangle+=0.1){\r\n            for (var i = 0; i <= 20; i++) {\r\n                //圆的渐开线参数方程算出下一个节点位置\r\n                newPoint = getInvolutePoint(rad, angle);\r\n                newPoint = new go.Point(newPoint.x + root.node.location.x, newPoint.y + root.node.location.y);\r\n                x = newPoint.x;\r\n                y = newPoint.y;\r\n\r\n                if (vert.node instanceof go.Group && edge.link.toNode !== vert.node) {\r\n                    var offset = edge.link.toNode.location.copy().subtract(vert.node.location);\r\n                    newPoint.x -= offset.x;\r\n                    newPoint.y -= offset.y;\r\n                }\r\n                //tmpR = vert.node.actualBounds.width / 2 * Math.sqrt(2);\r\n                tmpR = vert.node.actualBounds.width / 2;\r\n                //curRect = new go.Rect(newPoint.x - tmpR/ 2, newPoint.y - tmpR / 2, tmpR, tmpR);\r\n                curRect = { point: newPoint, radius: tmpR };\r\n                res = checkCoveredWithNodes(curRect, nodesDealed);\r\n                //res = checkCovered(vert.node, newPoint, this.network.vertexes,nodesDealed);\r\n                //  //检查覆盖\r\n                if (res) {\r\n                    adjustAngleCount++;\r\n                    if (angle >= fromVert.node.data.angle + Math.PI / 2) {\r\n                        angle = fromVert.node.data.angle + Math.PI / 2;\r\n                        break;\r\n                    }\r\n                    //if (angle <= fromVert.node.data.angle + 0.2) {\r\n                    //  angle = fromVert.node.data.angle + 0.2;\r\n                    //}\r\n                    if (tdSpiralMode != 'equidistant') { //等距模式，不自动调节距离\r\n                        angle = fromVert.node.data.angle + (i + 1) * Math.PI / 16; //加的算法\r\n                        //dia = Math.max(equaldistance,vert.node.actualBounds.width / 2+ nextvert.node.actualBounds.width / 2);\r\n                        dept = cw * Math.atan((vert.node.actualBounds.width / 2 + fromVert.node.actualBounds.width / 2 + distance) / Math.sqrt(vert.node.location.distanceSquaredPoint(root.node.location)));\r\n                        if (angle <= fromVert.node.data.angle + dept) { //保证最小间距\r\n                            angle = fromVert.node.data.angle + dept;\r\n                        }\r\n                    } else {\r\n                        break;\r\n                    }\r\n\r\n                } else {\r\n                    break;\r\n                }\r\n\r\n            }\r\n\r\n            //检查覆盖，如果增加angle的方式没有消除覆盖，则增加半径\r\n            if (res) {\r\n                rad += 1; //加的算法\r\n                //angle = angleOld;\r\n                break; //如果有覆盖，则增加基圆半径，保证没有覆盖\r\n                //console.log(\"rad:\"+rad);\r\n            }\r\n\r\n            nextedge = vert.destinationEdges.first();\r\n            nextvert = (nextedge !== null ? nextedge.toVertex : null);\r\n\r\n            vert.centerX = newPoint.x;\r\n            vert.centerY = newPoint.y;\r\n            vert.node.data.angle = angle;\r\n\r\n            edge.link.data.unautoLink = false;\r\n            edge.link.rad = rad;\r\n            edge.link.angle1 = fromVert.node.data.angle;\r\n            edge.link.angle2 = vert.node.data.angle;\r\n\r\n            var equalSpiral = false;\r\n            if ('0512' == '0512') {\r\n                //角度小于一圈，且节点个数小于等于4个时，为了优化线条，节点间距离拉大，节点距离通过angle控制\r\n                //if (childCount <= 6  ) {\r\n                if (tdSpiralMode != 'terse') { //紧凑模式下，不自动调节节点\r\n                    if (childCount <= 6) {\r\n                        if (childCount * 1.3 < 3 * Math.PI / 2 && !hasGroup) {\r\n                            angle += Math.min((3 * Math.PI / 2 / childCount), Math.PI / 2);\r\n                        } else {\r\n                            if (vert.node.data[\"isGroup\"]) {\r\n                                equalSpiral = true;\r\n                            } else {\r\n                                angle += 1.3;\r\n                            }\r\n\r\n                        }\r\n                        //angle += 0.9;\r\n                    } else { //角度大于一圈，时等间距\r\n                        equalSpiral = true;\r\n                    }\r\n                } else {\r\n                    equalSpiral = true;\r\n                }\r\n\r\n                if (equalSpiral) {\r\n                    if (nextvert == null) {\r\n                        dia = equaldistance;\r\n                        dept = cw * Math.atan((dia + distance) / Math.sqrt(newPoint.distanceSquaredPoint(root.node.location))); //why?\r\n                    } else {\r\n                        dia = Math.max(equaldistance, vert.node.actualBounds.width / 2 + nextvert.node.actualBounds.width / 2);\r\n                        dept = cw * Math.atan((dia + distance) / Math.sqrt(newPoint.distanceSquaredPoint(root.node.location))); //why?\r\n                    }\r\n                    angle += dept;\r\n                }\r\n            }\r\n\r\n            tmpR = vert.node.actualBounds.width;\r\n            nodesDealed.add(curRect);\r\n            //nodesDealed.add({point:new go.Point(vert.centerX, vert.centerY), radius:vert.node.actualBounds.width/2});\r\n            edge = nextedge;\r\n            fromVert = vert;\r\n            vert = nextvert;\r\n        }\r\n\r\n        if (vert == null) {\r\n            _do = false;\r\n        }\r\n    }\r\n\r\n    // console.log(root.node.data.key + \":total compute layout times:\" + count);\r\n    this.updateParts();\r\n\r\n    this.network = null;\r\n    if (tdDebug) {\r\n        console.log(\"spiral dolayout end \" + root.node.data.key);\r\n    }\r\n};\r\n\r\nSpiralLayout.prototype.commitLayout = function() {\r\n    this.network.vertexes.each(function(v) {\r\n        v.commit();\r\n    });\r\n    this.network.edges.each(function(v) {\r\n        v.commit();\r\n    });\r\n    if (tdDebug) {\r\n        console.log(\"spiral layout end \");\r\n    }\r\n    //this.invalidateLayout();\r\n};\r\n\r\n/**\r\n * @ignore\r\n * Compute the effective diameter of a Node.\r\n * @this {SpiralLayout}\r\n * @param {LayoutVertex} v\r\n * @return {number}\r\n */\r\nSpiralLayout.prototype.diameter = function(v) {\r\n    if (!v) return 0;\r\n    var b = v.bounds;\r\n    return Math.sqrt(b.width * b.width / 4 + b.height * b.height / 4);\r\n};\r\n\r\n/**\r\n * Gets or sets the radius distance.\r\n * The default value is NaN.\r\n * @name SpiralLayout#radius\r\n * @function.\r\n * @return {number}\r\n */\r\n\r\nObject.defineProperty(SpiralLayout.prototype, \"radius\", {\r\n    get: function() { return this._radius; },\r\n    set: function(val) {\r\n        if (typeof val !== \"number\") throw new Error(\"new value for SpiralLayout.radius must be a number, not: \" + val);\r\n        if (this._radius !== val) {\r\n            this._radius = val;\r\n            this.invalidateLayout();\r\n        }\r\n    }\r\n});\r\n\r\n/**\r\n * Gets or sets the spacing between nodes.\r\n * The default value is 100.\r\n * @name SpiralLayout#spacing\r\n * @function.\r\n * @return {number}\r\n */\r\nObject.defineProperty(SpiralLayout.prototype, \"spacing\", {\r\n    get: function() { return this._spacing; },\r\n    set: function(val) {\r\n        if (typeof val !== \"number\") throw new Error(\"new value for SpiralLayout.spacing must be a number, not: \" + val);\r\n        if (this._spacing !== val) {\r\n            this._spacing = val;\r\n            this.invalidateLayout();\r\n        }\r\n    }\r\n});\r\n\r\nfunction computeOffset(newR, newStartAngle) {\r\n    //console.log(\"newStartAngle:\"+newStartAngle);\r\n    var ctl2, dy, dx; //需要调整\r\n    if (newStartAngle >= 0 && newStartAngle <= 90) {\r\n        dy = newR * Math.sin(newStartAngle * Math.PI / 180);\r\n        dx = newR * Math.cos(newStartAngle * Math.PI / 180);\r\n        return [dx, dy];\r\n    } else if (newStartAngle > 90 && newStartAngle <= 180) {\r\n        dy = newR * Math.sin((180 - newStartAngle) * Math.PI / 180);\r\n        dx = newR * Math.cos((180 - newStartAngle) * Math.PI / 180);\r\n        return [-dx, dy];\r\n    } else if (newStartAngle > 180 && newStartAngle <= 270) {\r\n        dy = newR * Math.sin((newStartAngle - 180) * Math.PI / 180);\r\n        dx = newR * Math.cos((newStartAngle - 180) * Math.PI / 180);\r\n        return [-dx, -dy];\r\n    } else if (newStartAngle > 270 && newStartAngle <= 360) {\r\n        dy = newR * Math.sin((360 - newStartAngle) * Math.PI / 180);\r\n        dx = newR * Math.cos((360 - newStartAngle) * Math.PI / 180);\r\n        return [dx, -dy];\r\n    }\r\n}\r\n\r\nfunction computeControlPoint(p1, p2, p3) {\r\n\r\n    var result;\r\n    result = arguments[3] ? arguments[3] : triangleCircle(p1, p2, p3);\r\n    var radius = result[0];\r\n    var cent = new go.Point(result[1], result[2]);\r\n\r\n    //起始节点的弧度\r\n    var sweep = Math.abs(cent.directionPoint(p1) - cent.directionPoint(p3));\r\n    sweep = sweep > 180 ? 360 - sweep : sweep;\r\n    //console.log(\"sweep:\"+sweep);\r\n    var newR = radius / Math.cos(sweep / 3 * Math.PI / 180);\r\n    var geo = new go.Geometry(go.Geometry.Line);\r\n    geo.startX = cent.x;\r\n    geo.startY = cent.y;\r\n    geo.endX = p1.x;\r\n    geo.endY = p1.y;\r\n    geo.rotate(sweep / 3, cent.x, cent.y); //相对圆心旋转3分之1弧度\r\n    var newStartAngle = cent.direction(geo.endX, geo.endY);\r\n    var ctl1;\r\n    result = computeOffset(newR, newStartAngle);\r\n    ctl1 = cent.copy().offset(result[0], result[1]);\r\n\r\n    geo.rotate(sweep / 3, cent.x, cent.y); //相对圆心旋转3分之1弧度\r\n    newStartAngle = cent.direction(geo.endX, geo.endY);\r\n\r\n    var ctl2; //需要调整\r\n    result = computeOffset(newR, newStartAngle);\r\n    ctl2 = cent.copy().offset(result[0], result[1]);\r\n\r\n    return [ctl1, ctl2];\r\n}\r\n\r\n/**\r\n * Gets or sets whether the spiral should go clockwise or counter-clockwise.\r\n * The default value is true.\r\n * @name SpiralLayout#clockwise\r\n * @function.\r\n * @return {boolean}\r\n */\r\nObject.defineProperty(SpiralLayout.prototype, \"clockwise\", {\r\n    get: function() { return this._clockwise; },\r\n    set: function(val) {\r\n        if (typeof val !== \"boolean\") throw new Error(\"new value for SpiralLayout.clockwise must be a boolean, not: \" + val);\r\n        if (this._clockwise !== val) {\r\n            this._clockwise = val;\r\n            this.invalidateLayout();\r\n        }\r\n    }\r\n});\r\n\r\n/**\r\n 处理：如三点共线，则返回false；否则，返回true，并将计算得到的圆心与半径存放在center和radius众返回。\r\n    */\r\nfunction triangleCircle(p1, p2, p3) {\r\n    //检查三点是否共线\r\n    if (isThreePointsOnOneLine(p1, p2, p3))\r\n        return false;\r\n\r\n    var x1, x2, x3, y1, y2, y3, radius;\r\n\r\n    x1 = p1.x;\r\n    x2 = p2.x;\r\n    x3 = p3.x;\r\n    y1 = p1.y;\r\n    y2 = p2.y;\r\n    y3 = p3.y;\r\n\r\n    //求外接圆半径\r\n    var a = Math.sqrt((x1 - x2) * (x1 - x2) + (y1 - y2) * (y1 - y2));\r\n    var b = Math.sqrt((x1 - x3) * (x1 - x3) + (y1 - y3) * (y1 - y3));\r\n    var c = Math.sqrt((x2 - x3) * (x2 - x3) + (y2 - y3) * (y2 - y3));\r\n    var p = (a + b + c) / 2;\r\n    var S = Math.sqrt(p * (p - a) * (p - b) * (p - c));\r\n    radius = a * b * c / (4 * S);\r\n\r\n    //求外接圆圆心\r\n    var t1 = x1 * x1 + y1 * y1;\r\n    var t2 = x2 * x2 + y2 * y2;\r\n    var t3 = x3 * x3 + y3 * y3;\r\n    var temp = x1 * y2 + x2 * y3 + x3 * y1 - x1 * y3 - x2 * y1 - x3 * y2;\r\n    var x = (t2 * y3 + t1 * y2 + t3 * y1 - t2 * y1 - t3 * y2 - t1 * y3) / temp / 2;\r\n    var y = (t3 * x2 + t2 * x1 + t1 * x3 - t1 * x2 - t2 * x3 - t3 * x1) / temp / 2;\r\n\r\n\r\n    var result = [];\r\n    result = [radius, x, y];\r\n    return result;\r\n}\r\n\r\n/**\r\n 判断3个点是否共线\r\n    */\r\nfunction isThreePointsOnOneLine(p1, p2, p3) {\r\n    return false;\r\n}\r\n\r\n\r\nmodule.exports = SpiralLayout;\n\n\n// WEBPACK FOOTER //\n// ./src/layout/SpiralLayout.js","// require('./core/core.controller')(Trtd);\r\n// import * as go from 'gojs';\r\nvar SpiralLayout = require('../layout/SpiralLayout');\r\nvar helpers = require('../helpers/helpers.gojs')\r\n// var commonFun = require('./commonFun')\r\nvar TRTD_BASE = require('./trtd').Trtd\r\nlet lang = require('../assets/localization');\r\nvar createNodeTemplate = require('../nodeTemplate/createNodeTemplate')\r\nvar createPictureSingleNodeTemplate = require('../nodeTemplate/createPictureSingleNodeTemplate')\r\nvar createPictureNodeTemplate = require('../nodeTemplate/createPictureNodeTemplate')\r\nvar createTextNodeTemplate = require('../nodeTemplate/createTextNodeTemplate')\r\nvar createNodeSvgTemplate = require('../nodeTemplate/createNodeSvgTemplate')\r\n\r\nvar createTianpanLink = require('../linkTemplate/createTianpanLink')\r\n\r\nvar $ = go.GraphObject.make;\r\n\r\nvar colorMap = [\r\n    \"#FFBFBF\",\r\n    \"#E9BFFF\",\r\n    \"#D1FF72\",\r\n    \"#00A2E8\",\r\n    \"#99D9EA\"\r\n];\r\n\r\n\r\nclass Trtd  extends TRTD_BASE {\r\n\tconstructor(div, config){\r\n        super(div, config)\r\n\t\tthis.config = config;\r\n\t\tthis.modelChangedListener = config.modelChangedListener;\r\n\t\tthis.type = config.type;\r\n\t\tthis.diagram = {};\r\n        this.model = config.model;\r\n        this.initDiagramBase(div, config); // 基类初始化diagram\r\n\t\t// 初始化diagram\r\n        this.initDiagram(div, config);\r\n        // this.diagram.__trtd = this;\r\n\t\tthis.initListener();\r\n\t\t// Then you will need to construct a Model (usually a GraphLinksModel) for the Diagram, initialize its data by setting its Model.nodeDataArray and other properties, and then set the diagram's model.\r\n        if(this.model){\r\n            this.initModel();\r\n        }\r\n\t}\r\n/**\r\n * method 初始化diagram\r\n * @param {*} div \r\n * @param {*} config \r\n */\r\n\tinitDiagram(div, config){\r\n        var defaultConfig = {\r\n            // layout: go.GraphObject.make(SpiralLayout, {\r\n            //     isRealtime: false,\r\n            //     radius: NaN,\r\n            //     clockwise: true,\r\n            //     //,spacing:100,\r\n            //     isInitial: true\r\n            // }) \r\n          }\r\n        var diagramConfig = Object.assign(defaultConfig, config.diagramConfig);\r\n        this.diagram.setProperties(diagramConfig);\r\n        this.addNodeTemplate();\r\n        // this.customMenu();\r\n \r\n        this.addLinkTemplate();\r\n        this.addGroupTemplate();\r\n    }\r\n    getTdData(){\r\n        return this.diagram.model.toJson()\r\n    }\r\n    // 以下两个方法控制菜单显示\r\n    getDefaultCustomMenuDivStr(){\r\n        return `\r\n        <ul>\r\n            <li trtd_action=\"addFollower\"><a class=\"i18n\" data-lang=\"insertsl\">插入同级节点</a></li>\r\n            <li trtd_action=\"startNewSpiral\"><a class=\"i18n\" data-lang=\"icn\">插入子节点</a></li>\r\n            <li trtd_action=\"apiDuplicateNode\"><a class=\"i18n\" data-lang=\"duplicateNode\">复制节点</a></li>\r\n            <li trtd_action=\"apiDeleteSelection\"><a class=\"i18n\" data-lang=\"remove\">删除</a></li>\r\n            <li trtd_action=\"orderChildNode\"><a class=\"i18n\" data-lang=\"ordernode\">子节点编号</a></li>\r\n            <li trtd_action=\"clearOrderChildNode\"><a class=\"i18n\" data-lang=\"clearordernode\">取消子节点编号</a></li>\r\n            <li trtd_action=\"clearNodeTextMenu\"><a class=\"i18n\" data-lang=\"emptynodetext\">清空节点文本</a></li>\r\n            <li trtd_action=\"apiInsertTianpanNode\"><a class=\"i18n\" data-lang=\"insertnodetianpan\">插入天盘节点</a></li>\r\n            <li trtd_action=\"addTextNode\"><a class=\"i18n\" data-lang=\"inserttext\">插入文本</a></li>\r\n            <li trtd_action=\"locateRootNodeMenu\"><a class=\"i18n\" data-lang=\"locaterootnode\">定位根节点</a></li>\r\n            <li trtd_action=\"showAllNodesMenu\"><a class=\"i18n\" data-lang=\"displayallnodes\">显示所有节点</a></li>\r\n            <li trtd_action=\"fixPictureMenu\"><a class=\"i18n\" data-lang=\"fixnode\">固定节点</a></li>\r\n            <li trtd_action=\"activePictureMenu\"><a class=\"i18n\" data-lang=\"cancelfix\">取消固定</a></li>\r\n\r\n            <li trtd_action=\"delYunpanAxis\"><a class=\"i18n\" data-lang=\"cancelfix\">删除 CTRL+DEL</a></li>\r\n            <li trtd_action=\"addYunpanAxis\"><a class=\"i18n\" data-lang=\"cancelfix\">增加 CTRL+X/Y</a></li>\r\n        </ul>\r\n        `\r\n    }\r\n    \r\n    getShowContextMenus(node){\r\n        var showIds = \"\"\r\n        if(node){\r\n            if(node.data.category == \"autoText\"){\r\n                return \"apiDeleteSelection\"\r\n            }\r\n            if(node.data.category == \"picGroup\"){\r\n                return \"apiDeleteSelection\"\r\n            }\r\n            if( node.data.category == \"8\"){\r\n                showIds = \"apiDeleteSelection,\";\r\n            }\r\n            if( node.data.category == \"text\"){\r\n                showIds = \"apiDeleteSelection,\" + \"apiDuplicateNode\";\r\n            }\r\n            if( node.data.category == \"3\"){\r\n                showIds = \"apiDeleteSelection,\";\r\n                if(node.selectable){\r\n                    showIds += \",fixPictureMenu\"\r\n                }else{\r\n                    showIds += \",activePictureMenu\"\r\n                }\r\n            }\r\n            if( node.data.category == \"0\" || node.data.category == \"1\" || node.data.category == \"2\" || node.data.category == \"\"){\r\n                showIds = \"apiDeleteSelection,apiDuplicateNode,addFollower,startNewSpiral,orderChildNode,clearOrderChildNode\";\r\n            }\r\n            if(node.data.category == \"yunpanx\"||node.data.category == \"yunpany\"){\r\n                showIds = \"delYunpanAxis,addYunpanAxis\";\r\n            }\r\n            // return \"addFollowerGround,\" + \"addNewCircle,\"+\"apiDeleteSelection\";\r\n        }else{\r\n            // return \"addFollowerGround\"\r\n            showIds = \"addTextNode,apiInsertTianpanNode\"\r\n        }\r\n        return showIds;\r\n    }\r\n\r\n    apiInsertTianpanNode(){\r\n        var myDiagram = this.diagram;\r\n        myDiagram.startTransaction();\r\n        var nodeData = {\r\n            \"key\":helpers.guid(), \"text\":\"双击编辑内容\", \"level\":0,\r\n         \"radius\":100,  \"fill\":\"white\", \"category\":\"0\", \r\n         \"strokeWidth\":2, \"stroke\":\"black\", \"font\":\"bold 18px 幼圆\", \"textStroke\":\"black\", \"newAdd\":true, \"angle\":5}\r\n        // var text = { text: message||lang.trans('blankText'), category: 'text' };\r\n        nodeData.loc = go.Point.stringify(myDiagram.lastInput.documentPoint);\r\n        myDiagram.model.addNodeData(nodeData);\r\n        myDiagram.commitTransaction()\r\n        // this.diagram.toolManager.clickCreatingTool.insertPart(this.diagram.lastInput.documentPoint);\r\n    }\r\n    fixPictureMenu(){\r\n        var myDiagram = this.diagram\r\n        // var node = myDiagram.selection.first();\r\n        var node = myDiagram.findPartAt(myDiagram.lastInput.documentPoint, false);\r\n        myDiagram.startTransaction();\r\n        myDiagram.model.setDataProperty(node.data, \"selectable\", node.data.selectable != undefined ? (!node.data.selectable) : false);\r\n        myDiagram.commitTransaction();\r\n    }\r\n\r\n    activePictureMenu(){\r\n        this.fixPictureMenu()\r\n    }\r\n    addTextNode(message){\r\n        console.log('eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee:');\r\n        var myDiagram = this.diagram;\r\n        myDiagram.startTransaction();\r\n        var text = { text: message||lang.trans('blankText'), category: 'autoText' };\r\n        text.loc = go.Point.stringify(myDiagram.lastInput.documentPoint);\r\n        myDiagram.model.addNodeData(text);\r\n        myDiagram.commitTransaction()\r\n    }\r\n    guid() {\r\n        function S4() {\r\n            return (((1+Math.random())*0x10000)|0).toString(16).substring(1);\r\n        }\r\n    return (S4()+S4()+\"-\"+S4()+\"-\"+S4()+\"-\"+S4()+\"-\"+S4()+S4()+S4());\r\n    }\r\n    \r\n\r\n    /**\r\n     * method 初始化model\r\n     */\r\n\tinitModel(model){\r\n        if(model){\r\n            this.model = model;\r\n        }\r\n        console.log('initModel')\r\n        var tmpModel = go.Model.fromJson(this.model);\r\n        if(tmpModel.modelData.currentType == 'dipan'){\r\n            tmpModel.nodeDataArray = tmpModel.nodeDataArray.filter((d)=>{\r\n                if(!d.isGroup){\r\n                    delete d.group\r\n                    return true;\r\n                }\r\n            })\r\n            // tmpModel.nodeDataArray = \r\n            tmpModel.linkDataArray=[]\r\n        }\r\n        if(!tmpModel.modelData.currentType){\r\n            tmpModel.modelData.currentType = this.type;\r\n        }\r\n        if([\"jin\",\"shui\",\"wheel\",\"huo\"].indexOf(this.type)>-1 ){\r\n            tmpModel.modelData.currentType = \"tianpan\"\r\n        }\r\n        console.log(\" tmpModel.modelData.currentType\")\r\n        this.diagram.layout.isInitial = false;\r\n        //randomUrl(tmpModel);\r\n        tmpModel.modelData.type = this.type\r\n        for(var i = 0;i<tmpModel.nodeDataArray.length;i++){\r\n            if(tmpModel.nodeDataArray[i].category == \"waveGroup\"){\r\n                if(!tmpModel.nodeDataArray[i].centerTextAngle){\r\n                    tmpModel.nodeDataArray[i].centerTextAngle = \"independent\"\r\n                }\r\n                if(!tmpModel.nodeDataArray[i].centerTextMode){\r\n                    tmpModel.nodeDataArray[i].centerTextMode = \"independent\"\r\n                }\r\n                if(!tmpModel.nodeDataArray[i].maxOlive){\r\n                    tmpModel.nodeDataArray[i].maxOlive = 50\r\n                }\r\n            }\r\n            if(tmpModel.nodeDataArray[i].category == \"yunGroup\"){\r\n                if(!tmpModel.nodeDataArray[i].shapeStrokes){\r\n                    tmpModel.nodeDataArray[i].shapeStrokes = [\"RGBA(237,28,36,0.3)\",\"RGBA(255,192,0,0.3)\",\"RGBA(255,255,0,0.3)\",\"RGBA(146,208,80,0.3)\",\"RGBA(192,200,250,0.3)\",\"RGBA(255,178,125,0.3)\",\"RGBA(209,110,210,0.3)\",\"RGBA(248,163,62,0.3)\",\"RGBA(248,161,164,0.3)\",\"RGBA(244,115,120,0.3)\"]\r\n                }\r\n                if(!tmpModel.nodeDataArray[i].beginSpark){\r\n                    tmpModel.nodeDataArray[i].beginSpark = \"line\"\r\n                }\r\n                if(tmpModel.nodeDataArray[i].showShape == null){\r\n                    tmpModel.nodeDataArray[i].showShape = true\r\n                }\r\n            }\r\n            if(tmpModel.nodeDataArray[i].category == \"shape\" && tmpModel.nodeDataArray[i].role == \"background\"){\r\n                tmpModel.nodeDataArray[i].visible = true\r\n            }\r\n            if(tmpModel.nodeDataArray[i].role && tmpModel.nodeDataArray[i].role.indexOf(\"labelText\") > -1 ){\r\n                tmpModel.nodeDataArray[i].movable = true;\r\n            }\r\n            if(tmpModel.nodeDataArray[i].category == \"labelGroup\"){\r\n                tmpModel.nodeDataArray[i].selectable = false\r\n            }\r\n            // if(tmpModel.nodeDataArray[i].category == \"autoText\" && tmpModel.nodeDataArray[i].subRole==\"themeText\"\r\n            //     && tmpModel.nodeDataArray[i].orderX == 10 && tmpModel.nodeDataArray[i].orderY == 10\r\n            // ){\r\n            //     if(!tmpModel.nodeDataArray[i].width){\r\n            //         tmpModel.nodeDataArray[i].width = 140\r\n            //     }\r\n            //     if(!tmpModel.nodeDataArray[i].height){\r\n            //         tmpModel.nodeDataArray[i].height = 140\r\n            //     }\r\n            // }\r\n        }\r\n        // tmpModel.modelData.version = Trtd.version\r\n        // console.log(\" tmpModel.modelData.version \",  tmpModel.modelData.version)\r\n        this.diagram.model = tmpModel;\r\n        // this.diagram.model.copyNodeDataFunction = function(object, model) {\r\n        //     console.log(\"copyNodeDataFunctioncopyNodeDataFunctioncopyNodeDataFunction\")\r\n        //     // if (object.isGroup) {\r\n        //     //     return null;\r\n        //     // }\r\n        //     // var outputObj = null;\r\n        //     var outputObj = JSON.parse(JSON.stringify(object))\r\n        //     // outputObj.level = 0;\r\n        //     // outputObj.next = undefined;\r\n        //     // outputObj.group = undefined;\r\n        //     // outputObj.prev = undefined;\r\n        //     // outputObj.isparent = undefined;\r\n        //     // outputObj.parent = undefined;\r\n        //     // outputObj.copiedKey = outputObj.key;\r\n        //     delete outputObj.key;\r\n        //     delete outputObj.__gohashid;\r\n        //     delete outputObj.points;\r\n        //     // if(object.category == \"autoText\" && object.role != \"freeText\"){\r\n        //     //     delete object.dimKey;\r\n        //     //     delete object.role;\r\n        //     //     delete object.subRole;\r\n        //     // }\r\n        //     return object;\r\n        // }\r\n        // configModel(myDiagram.model);\r\n        this.diagram.updateAllTargetBindings();\r\n        // this.diagram.animationManager.isEnabled = true\r\n        // this.saveModel()\r\n    }\r\n    loadModel(model){\r\n        // console.log(model)\r\n        // var node = this.diagram.selection.first()\r\n        // if(node){\r\n        //     this.diagram.commandHandler.scrollToPart(node)\r\n        // }\r\n        this.diagram.animationManager.isEnabled = false\r\n        this.initModel(model)\r\n    }\r\n    // addNodeFile(model){\r\n    //     console.log(model)\r\n    // }\r\n    /**\r\n     * method: 初始化监听方法\r\n     */\r\n\tinitListener(){\r\n\t\tconsole.log('initListener')\r\n    }\r\n\r\n    addGroupTemplate(){\r\n        // return function getGroupTemplate() {\r\n            this.diagram.groupTemplateMap.add(\"\", $(go.Group, \"Auto\", {\r\n                    layerName: \"Background\",\r\n                    selectable: false,\r\n                    pickable: false,\r\n                    locationSpot: go.Spot.Center,\r\n                    ungroupable: true,\r\n                    alignment: go.Spot.Center,\r\n                    click: function(d) {\r\n                        // alert('click group');\r\n                        // d.diagram.clearSelection();\r\n                    },\r\n                    contextClick: function(d) {\r\n                        // alert('click right group');\r\n                    },\r\n                    alignmentFocus: go.Spot.Center,\r\n                    // contextMenu: nodeContextMenu,\r\n                    selectionAdornmentTemplate: $(go.Adornment, \"Spot\",\r\n                        $(go.Panel, \"Auto\",\r\n                            $(go.Shape, 'Circle', { stroke: \"dodgerblue\", strokeWidth: 2, fill: null },\r\n                                new go.Binding(\"width\", \"\", function(v) {\r\n                                    var node = myDiagram.selection.first();\r\n                                    if (node instanceof go.Group) {\r\n                                        return node.actualBounds.width;\r\n                                    }\r\n                                }),\r\n                                new go.Binding(\"height\", \"\", function(v) {\r\n                                    var node = myDiagram.selection.first();\r\n                                    if (node instanceof go.Group) {\r\n                                        return node.actualBounds.height;\r\n                                    }\r\n                                })),\r\n                            //new go.Binding('wit')),\r\n                            $(go.Placeholder)\r\n                        ),\r\n                        $(go.Panel, \"Horizontal\", { alignment: go.Spot.Top, alignmentFocus: go.Spot.Bottom })\r\n                    ),\r\n                    copyable: false\r\n                }, {\r\n                    layout: $(SpiralLayout, {\r\n                        isRealtime: false,\r\n                        radius: NaN,\r\n                        clockwise: true,\r\n                        isInitial: false\r\n                    }),\r\n                    layoutConditions: go.Part.LayoutStandard & ~go.Part.LayoutNodeSized & ~go.Part.LayoutAdded\r\n                },\r\n                new go.Binding(\"location\", \"loc\", go.Point.parse).makeTwoWay(go.Point.stringify),\r\n                $(go.Panel, \"Auto\",\r\n                    $(go.Shape, \"Circle\", {\r\n                            name: \"SHAPE\",\r\n                            fill: \"rgba(212,230,188,0)\",\r\n                            stroke: null,\r\n                            // ,\r\n                            //width:300,\r\n                            //height:300,\r\n                            spot1: new go.Spot(0.01, 0.01),\r\n                            spot2: new go.Spot(0.99, 0.99)\r\n                        },\r\n                        new go.Binding(\"stroke\", \"stroke\", function(v) {\r\n                            return v instanceof go.Brush ? v.stroke : v;\r\n                        }).makeTwoWay(),\r\n                        new go.Binding(\"strokeWidth\", \"strokeWidth\", function(d) {\r\n                            return d;\r\n                        }).makeTwoWay(function(d) {\r\n                            return d;\r\n                        }),\r\n                        new go.Binding(\"figure\", \"figure\").makeTwoWay(),\r\n                        new go.Binding(\"desiredSize\", \"radius\", function(v) {\r\n                            //alert(v);\r\n        \r\n                            var radius = parseInt(v ? v : 100);\r\n                            var size = new go.Size(radius, radius);\r\n                            return size;\r\n                        }).makeTwoWay(function(v) {\r\n                            return v.width;\r\n                        })\r\n                    ),\r\n                    $(go.Placeholder, {\r\n                        // margin: tdSpiralMode == 'terse' ? -10 : 0\r\n                        margin: 0\r\n                    })\r\n                )\r\n            )\r\n        )\r\n    }\r\n    /**\r\n     * 添加节点模板\r\n     */\r\n    addNodeTemplate(){\r\n\r\n        var that = this;\r\n        var myDiagram = this.diagram\r\n        // var globalProperties = this.tdGetModelData(null, myDiagram.model,myDiagram); //获取所有全局属性到一个对象中,从localstorage中\r\n        //var layerThickness = myDiagram.model.modelData.layerThickness;\r\n        // var layerThickness = parseInt(globalProperties['layerThickness']);\r\n        // console.log(layerThickness)\r\n        // var tdDipanTextAngle = globalProperties['tdDipanTextAngle'];\r\n        // console.log(tdDipanTextAngle)\r\n\r\n        // myDiagram.nodeTemplateMap.add(\"dipan\", this.createDipanTemplate(layerThickness,tdDipanTextAngle));\r\n        // myDiagram.nodeTemplateMap.add(\"Root\", this.getDipanRootTemplate(layerThickness));\r\n        // myDiagram.nodeTemplateMap.add(\"text\", );\r\n        this.addNodeTemplateBase()\r\n        myDiagram.nodeTemplateMap.add(\"0\", createNodeTemplate(this.diagram));\r\n        myDiagram.nodeTemplateMap.add(\"1\", createNodeTemplate(this.diagram));\r\n        myDiagram.nodeTemplateMap.add(\"2\", createNodeTemplate(this.diagram));\r\n        myDiagram.nodeTemplateMap.add(\"3\", createPictureSingleNodeTemplate(this.diagram));\r\n        myDiagram.nodeTemplateMap.add(\"4\", createPictureNodeTemplate(this.diagram));\r\n        // myDiagram.nodeTemplateMap.add(\"text\", createTextNodeTemplate(this.diagram));\r\n        myDiagram.nodeTemplateMap.add(\"\", createNodeTemplate(this.diagram));\r\n\r\n        myDiagram.nodeTemplateMap.add(\"8\",createNodeSvgTemplate(this.diagram));\r\n\r\n        \r\n    }\r\n\r\n    addLinkTemplate(){\r\n        this.diagram.linkTemplateMap.add(\"\", createTianpanLink(this.diagram));\r\n        // myDiagram.linkTemplateMap.add(\"\", linkTemplate.getTianpanLink());\r\n    }\r\n\r\n    /***\r\n     * 将node(包括它的后代)设置为parent的第一个孩子. 如果parent是Node的后代，则不操作\r\n     * @param node go.Node Type\r\n     * @param parent go.Node Type\r\n     */\r\n    setNodeAsChildren(node, parent) {\r\n        if (isDescendant(parent, node)) {\r\n            //illegal action\r\n            return;\r\n        }\r\n        if (parent.data.isparent == node.data.key) {\r\n            return;\r\n        }\r\n\r\n        var diagram = node.diagram,\r\n            model = node.diagram.model;\r\n\r\n        model.startTransaction('setNodeAsChildren');\r\n        disconnectFromTreeStructure(node);\r\n\r\n        //add as the child of parent\r\n        if (parent.data.isparent) {\r\n            //if has children\r\n            var firstChild = diagram.findNodeForKey(parent.data.isparent);\r\n            model.setDataProperty(parent.data, 'isparent', node.data.key);\r\n            model.setDataProperty(firstChild.data, 'prev', node.data.key);\r\n            model.setDataProperty(node.data, 'next', firstChild.data.key);\r\n            model.setDataProperty(node.data, 'parent', parent.data.key);\r\n            // model.setDataProperty(node.data, 'fill', firstChild.data.fill);\r\n\r\n            var link = parent.findLinksTo(firstChild).first();\r\n            model.setToKeyForLinkData(link.data, node.data.key);\r\n            var newLink = model.copyLinkData(link.data);\r\n            newLink.from = node.data.key;\r\n            newLink.to = firstChild.data.key;\r\n            model.addLinkData(newLink);\r\n\r\n        } else {\r\n            //if it's a single node which has no children\r\n            model.setDataProperty(parent.data, 'isparent', node.data.key);\r\n            model.setDataProperty(node.data, 'next', null);\r\n            model.setDataProperty(node.data, 'parent', parent.data.key);\r\n            var newLink = { from: parent.data.key, to: node.data.key, level: parent.data.level + 1, isTreeLink: true };\r\n            // if (parent.findLinksInto().first()) {\r\n            //     newLink.strokeWidth = Math.max(1, parent.findLinksInto().first().data.strokeWidth - 0.5);\r\n            // } else {\r\n            //     newLink.strokeWidth = 4;\r\n            // }\r\n\r\n            newLink.strokeWidth = 2;\r\n\r\n            applyTheme2Link(newLink, node);\r\n            model.addLinkData(newLink);\r\n\r\n            var newGroup = {\r\n                isGroup: true,\r\n                group: parent.data.group,\r\n                parent: parent.data.key,\r\n                key: \"g_\" + parent.data.key,\r\n                level: parent.data.level\r\n            }\r\n            model.addNodeData(newGroup);\r\n            model.setDataProperty(parent.data, \"group\", newGroup.key);\r\n        }\r\n\r\n        //update group\r\n        var nodeGroup = node.containingGroup;\r\n        if (nodeGroup && nodeGroup.data.parent == node.data.key) {\r\n            model.setDataProperty(nodeGroup.data, 'group', parent.data.group);\r\n        } else {\r\n            if (node.data.parent == null && node.data.isparent != null) {\r\n                //add group for root node\r\n                addGroupForNode(node, parent.data.group);\r\n            } else {\r\n                model.setDataProperty(node.data, \"group\", parent.data.group);\r\n            }\r\n        }\r\n\r\n        //update level\r\n        var diff = node.data.level - parent.data.level - 1;\r\n        helpers.travelParts(node, function(part) {\r\n            model.setDataProperty(part.data, 'level', part.data.level - diff);\r\n        });\r\n        model.commitTransaction('setNodeAsChildren');\r\n    }\r\n\r\n    /***\r\n     * 将node(包括它的后代)设置为sibling的下一个兄弟\r\n     * @param node  go.Node Type\r\n     * @param sibling go.Node Type\r\n     */\r\n    setNodeAsSibling(node, sibling) {\r\n        if (isDescendant(sibling, node)) {\r\n            //illegal action\r\n            return;\r\n        }\r\n        if (sibling.data.next == node.data.key) {\r\n            return;\r\n        }\r\n    \r\n        var diagram = node.diagram,\r\n            model = node.diagram.model;\r\n    \r\n        model.startTransaction('setNodeAsSibling');\r\n        disconnectFromTreeStructure(node);\r\n    \r\n        //add as next brother of sibling\r\n        if (sibling.data.next != null) {\r\n            var nextNode = diagram.findNodeForKey(sibling.data.next);\r\n            model.setDataProperty(sibling.data, 'next', node.data.key);\r\n            model.setDataProperty(node.data, 'next', nextNode.data.key);\r\n            model.setDataProperty(node.data, 'prev', sibling.data.key);\r\n            model.setDataProperty(nextNode.data, 'prev', node.data.key);\r\n            model.setDataProperty(node.data, 'parent', sibling.data.parent);\r\n            // model.setDataProperty(node.data, 'fill', sibling.data.fill);\r\n    \r\n            var link = sibling.findLinksTo(nextNode).first();\r\n            model.setToKeyForLinkData(link.data, node.data.key);\r\n            var newLink = model.copyLinkData(link.data);\r\n            newLink.from = node.data.key;\r\n            newLink.to = nextNode.data.key;\r\n            model.addLinkData(newLink);\r\n        } else {\r\n            model.setDataProperty(sibling.data, 'next', node.data.key);\r\n            model.setDataProperty(node.data, 'next', null);\r\n            model.setDataProperty(node.data, 'prev', sibling.data.key);\r\n            model.setDataProperty(node.data, 'parent', sibling.data.parent);\r\n            // console.log(\"sibling.data.fill\",sibling.data.fill)\r\n            model.setDataProperty(node.data, 'fill', sibling.data.fill);\r\n    \r\n            var preLink = sibling.findLinksInto().first();\r\n            var newLink = model.copyLinkData(preLink.data);\r\n            newLink.from = sibling.data.key;\r\n            newLink.to = node.data.key;\r\n            model.addLinkData(newLink);\r\n        }\r\n    \r\n        //update level\r\n        var diff = node.data.level - sibling.data.level;\r\n        helpers.travelParts(node, function(part) {\r\n            model.setDataProperty(part.data, 'level', part.data.level - diff);\r\n        });\r\n    \r\n        //update group\r\n        var nodeGroup = node.containingGroup;\r\n        var parent = diagram.findNodeForKey(sibling.data.parent);\r\n        if (nodeGroup && nodeGroup.data.parent == node.data.key) {\r\n            model.setDataProperty(node.containingGroup.data, 'group', parent.data.group);\r\n        } else {\r\n            if (node.data.parent == null && node.data.isparent != null) {\r\n                //add group for root node\r\n                addGroupForNode(node, parent.data.group);\r\n            } else {\r\n                model.setDataProperty(node.data, \"group\", parent.data.group);\r\n            }\r\n        }\r\n        if (parent && parent.containingGroup) {\r\n            var parentGroup = parent.containingGroup;\r\n            if (parentGroup) {\r\n                parentGroup.layout.isOngoing = true;\r\n                parentGroup.layout.isValidLayout = false;\r\n            }\r\n        }\r\n        model.commitTransaction('setNodeAsSibling');\r\n    }\r\n\r\n\r\n    /***\r\n     * 将node(包括它的后代)设置为parent的第一个孩子. 如果parent是Node的后代，则不操作\r\n     * @param node go.Node Type\r\n     * @param parent go.Node Type\r\n     */\r\n    setNodeAsChildren(node, parent) {\r\n        if (isDescendant(parent, node)) {\r\n            //illegal action\r\n            return;\r\n        }\r\n        if (parent.data.isparent == node.data.key) {\r\n            return;\r\n        }\r\n\r\n        var diagram = node.diagram,\r\n            model = node.diagram.model;\r\n\r\n        model.startTransaction('setNodeAsChildren');\r\n        disconnectFromTreeStructure(node);\r\n\r\n        //add as the child of parent\r\n        if (parent.data.isparent) {\r\n            //if has children\r\n            var firstChild = diagram.findNodeForKey(parent.data.isparent);\r\n            model.setDataProperty(parent.data, 'isparent', node.data.key);\r\n            model.setDataProperty(firstChild.data, 'prev', node.data.key);\r\n            model.setDataProperty(node.data, 'next', firstChild.data.key);\r\n            model.setDataProperty(node.data, 'parent', parent.data.key);\r\n            // model.setDataProperty(node.data, 'fill', firstChild.data.fill);\r\n\r\n            var link = parent.findLinksTo(firstChild).first();\r\n            model.setToKeyForLinkData(link.data, node.data.key);\r\n            var newLink = model.copyLinkData(link.data);\r\n            newLink.from = node.data.key;\r\n            newLink.to = firstChild.data.key;\r\n            model.addLinkData(newLink);\r\n\r\n        } else {\r\n            //if it's a single node which has no children\r\n            model.setDataProperty(parent.data, 'isparent', node.data.key);\r\n            model.setDataProperty(node.data, 'next', null);\r\n            model.setDataProperty(node.data, 'parent', parent.data.key);\r\n            var newLink = { from: parent.data.key, to: node.data.key, level: parent.data.level + 1, isTreeLink: true };\r\n            // if (parent.findLinksInto().first()) {\r\n            //     newLink.strokeWidth = Math.max(1, parent.findLinksInto().first().data.strokeWidth - 0.5);\r\n            // } else {\r\n            //     newLink.strokeWidth = 4;\r\n            // }\r\n\r\n            newLink.strokeWidth = 2;\r\n\r\n            applyTheme2Link(newLink, node);\r\n            model.addLinkData(newLink);\r\n\r\n            var newGroup = {\r\n                isGroup: true,\r\n                group: parent.data.group,\r\n                parent: parent.data.key,\r\n                key: \"g_\" + parent.data.key,\r\n                level: parent.data.level\r\n            }\r\n            model.addNodeData(newGroup);\r\n            model.setDataProperty(parent.data, \"group\", newGroup.key);\r\n        }\r\n\r\n        //update group\r\n        var nodeGroup = node.containingGroup;\r\n        if (nodeGroup && nodeGroup.data.parent == node.data.key) {\r\n            model.setDataProperty(nodeGroup.data, 'group', parent.data.group);\r\n        } else {\r\n            if (node.data.parent == null && node.data.isparent != null) {\r\n                //add group for root node\r\n                addGroupForNode(node, parent.data.group);\r\n            } else {\r\n                model.setDataProperty(node.data, \"group\", parent.data.group);\r\n            }\r\n        }\r\n\r\n        //update level\r\n        var diff = node.data.level - parent.data.level - 1;\r\n        helpers.travelParts(node, function(part) {\r\n            model.setDataProperty(part.data, 'level', part.data.level - diff);\r\n        });\r\n        model.commitTransaction('setNodeAsChildren');\r\n    }\r\n\r\n\r\n    // tdGetModelData(name,model) { //获取盘的model.modelData中的全局属性 \r\n    //     // if(myDiagram1){\r\n    //     //     myDiagram = myDiagram1\r\n    //     // }\r\n    //     var myDiagram = this.diagram\r\n    //     var  model = myDiagram.model\r\n    //     var defaultVal = {\r\n    //         currentType: 'tianpan',\r\n    //         currentThemeID: 0,\r\n    //         layerThickness: 100,\r\n    //         splitLayer: 1,\r\n    //         layout: 'inner',\r\n    //         tdDipanTextAngle: 'xuanzhuan'\r\n    //     };\r\n    //     console.log(\"getRootNodeData1111111111111111111111\")\r\n    //     var root = getRootNodeData(model);\r\n    //     if (typeof(name) != 'undefined' && name != null) { //返回指定的属性值\r\n    //         if (root) {\r\n    //             return root[name] || model.modelData[name] || defaultVal[name]\r\n    //         } else {\r\n    //             return model.modelData[name] || defaultVal[name];\r\n    //         }\r\n    //     }\r\n    //     //返回所有属性值\r\n    //     if (root) {\r\n    //         for (var key in defaultVal) {\r\n    //             if (root[key]) {\r\n    //                 defaultVal[key] = root[key];\r\n    //             } else {\r\n    //                 if (model.modelData && model.modelData[key]) {\r\n    //                     defaultVal[key] = model.modelData[key];\r\n    //                 }\r\n    //             }\r\n    //         }\r\n    //     } else {\r\n    //         for (var key in defaultVal) {\r\n    //             if (model.modelData && model.modelData[key]) {\r\n    //                 defaultVal[key] = model.modelData[key];\r\n    //             }\r\n    //         }\r\n    //     }\r\n    //     return defaultVal;\r\n    // }\r\n    deleteSelection (e) {\r\n        var myDiagram = this.diagram;\r\n        var cmd = myDiagram.commandHandler;\r\n        var node = myDiagram.selection.first();\r\n        \r\n        if (!node) {\r\n            return;\r\n        }\r\n        // var nodeCopy = JSON.parse(JSON.stringify(node.data))\r\n        if (node instanceof go.Group) {\r\n            return;\r\n        }\r\n        if (node.data.key == 1 || node.data.key == 'g_1') {\r\n            //root node or root group\r\n            return;\r\n        }\r\n    \r\n        var locateNode = null;\r\n        var tempArray = [\"next\",\"prev\",\"parent\"]\r\n        for(var i=0;i<tempArray.length;i++){\r\n            if(node.data[tempArray[i]]){\r\n                locateNode = myDiagram.findNodeForKey(node.data[tempArray[i]])\r\n                break;\r\n            }\r\n        }\r\n        // if (node.findNodesOutOf().first()) {\r\n        //     locateNode = node.findNodesOutOf().first();\r\n        // } else if (node.findNodesInto().first()) {\r\n        //     locateNode = node.findNodesInto().first();\r\n        // }\r\n    \r\n        myDiagram.startTransaction(\"deleteSelection1\");\r\n        try {\r\n    \r\n            if (node instanceof go.Link) {\r\n                return;\r\n            }\r\n            myDiagram.startTransaction('sub');\r\n\r\n            if(node.data.category == \"autoText\"){\r\n                myDiagram.model.removeNodeData(node.data)\r\n            }else{\r\n                this.deleteNode(node, e);\r\n            }\r\n\r\n    \r\n            myDiagram.commitTransaction('sub');\r\n            // myDiagram.model.removeNodeData(node.data);\r\n            go.CommandHandler.prototype.deleteSelection.call(cmd);\r\n    \r\n            // myDiagram.updateAllTargetBindings();\r\n    \r\n        } catch (ex) {\r\n            console.log(ex);\r\n            myDiagram.commitTransaction(\"deleteSelection1\");\r\n            return;\r\n        }\r\n        // myDiagram.updateAllTargetBindings();\r\n        myDiagram.commitTransaction(\"deleteSelection1\");\r\n        if (locateNode) {\r\n            myDiagram.select(locateNode);\r\n        }\r\n\r\n    }\r\n    //删除节点\r\n    deleteNode(node, e) {\r\n        console.log(\"deleteNodedeleteNodedeleteNodedeleteNode\")\r\n        var myDiagram = this.diagram;\r\n        var mainNode = null;\r\n        if (node instanceof go.Group) {\r\n            //查找第一个节点\r\n            node.memberParts.each(function(n) {\r\n                if (n.data.isparent) {\r\n                    mainNode = n;\r\n                }\r\n            })\r\n        }\r\n        node = mainNode == null ? node : mainNode;\r\n        if (node instanceof go.Node) {\r\n            var preNode = node.findNodesInto().first() ? node.findNodesInto().first() : null;\r\n            var nextNode = node.data.next ? myDiagram.findNodeForKey(node.data.next) : null;\r\n            if (nextNode) {\r\n                var nextNodeLink = nextNode.findLinksInto().first();\r\n            } else {\r\n                var nextNodeLink = null;\r\n            }\r\n\r\n            var intoLink = node.findLinksInto().first();\r\n            var tmpNodeData = {};\r\n            // _.extendOwn(tmpNodeData, node.data);\r\n            // tmpNodeData = helpers.extend(tmpNodeData, node.data);\r\n            tmpNodeData = JSON.parse(JSON.stringify(node.data));\r\n            var oldlink = node.findLinksInto().first() ? node.findLinksInto().first().data : null;\r\n            var link = {};\r\n            // link = _.extendOwn(link, oldlink);\r\n            // link = helpers.extend(link, oldlink);\r\n            if(oldlink){\r\n                delete oldlink.points;\r\n\r\n            }\r\n            link = JSON.parse(JSON.stringify(oldlink))\r\n            delete link.__gohashid;\r\n            delete link.points;\r\n            if (node.data.group) {\r\n                var nodeGroup = myDiagram.findNodeForKey(node.data.group);\r\n                // var nodeGroupData = nodeGroup.data;\r\n            } else {\r\n                var nodeGroup = null;\r\n                var nodeGroupData = null;\r\n            }\r\n\r\n            //如果不是根节点,除了根节点都有一条入边\r\n            // myDiagram.startTransaction(\"changeLinks\");\r\n            try {\r\n                if (node.data.isparent) {\r\n                    var nodes = [],\r\n                        groups = [],\r\n                        mylinks = [];\r\n                    myDiagram.nodes.each(function(n) {\r\n                        if (n.isMemberOf(nodeGroup) && n.data.key != node.data.key) {\r\n                            nodes.push(n.data);\r\n                            if (n.findLinksInto().count > 0) {\r\n                                mylinks.push(n.findLinksInto().first().data);\r\n                            }\r\n\r\n                        }\r\n                    });\r\n\r\n                    if (mainNode) {\r\n                        nodes.push(node.data);\r\n                    }\r\n                    myDiagram.model.removeNodeDataCollection(nodes);\r\n                    myDiagram.model.removeLinkDataCollection(mylinks);\r\n                    myDiagram.model.removeNodeData(nodeGroup.data);\r\n                }\r\n\r\n                if (preNode != null) {\r\n                    ////如果是父节点，则删除所有子孙节点,包括group\r\n\r\n                    //当前节点为第一个子节点\r\n                    if (preNode.data.key == tmpNodeData.parent) {\r\n                        //如果当前节点是最后一个子节点\r\n                        if (nextNode == null) {\r\n\r\n                            var parGroup = myDiagram.findNodeForKey(preNode.data.group);\r\n                            var grandNode = myDiagram.findNodeForKey(preNode.data.parent);\r\n                            if(preNode.data.category!==\"Root\"){//zyy增加判断\r\n                                if (grandNode) {\r\n                                    myDiagram.model.setDataProperty(preNode.data, \"group\", grandNode.data.group);\r\n                                } else {\r\n                                    if(parGroup && parGroup.data.group){\r\n                                        myDiagram.model.setDataProperty(preNode.data, \"group\", parGroup.data.group);\r\n                                    }else{\r\n                                        myDiagram.model.setDataProperty(preNode.data, \"group\", undefined);\r\n                                    }\r\n                                }\r\n                            }\r\n\r\n                            //父节点的isparent属性\r\n                            myDiagram.model.setDataProperty(preNode.data, \"isparent\", undefined);\r\n                            //var parGroup = myDiagram.findNodeForKey(preNode.data.group);\r\n                            if (parGroup) {\r\n                                myDiagram.model.removeNodeData(parGroup.data);\r\n                            }\r\n                        } else {\r\n                            link.from = preNode.data.key;\r\n                            link.to = nextNode.data.key;\r\n                            myDiagram.model.setDataProperty(nextNode.data, \"prev\", undefined);\r\n                            myDiagram.model.addLinkData(link);\r\n                            myDiagram.model.setDataProperty(myDiagram.model.findNodeDataForKey(tmpNodeData.parent), \"isparent\", nextNode.data.key);\r\n\r\n                        }\r\n                    } else {\r\n                        //\r\n                        myDiagram.model.setDataProperty(preNode.data, \"next\", nextNode == null ? null : nextNode.data.key);\r\n\r\n                        if (nextNode != null) {\r\n                            link.from = preNode.data.key;\r\n                            link.to = nextNode.data.key;\r\n                            myDiagram.model.setDataProperty(nextNode.data, \"prev\", preNode.data.key);\r\n                            myDiagram.model.addLinkData(link);\r\n                        }\r\n                    }\r\n\r\n                    //var parLink = node.findLinksInto().first();\r\n                    if (intoLink) {\r\n                        myDiagram.model.removeLinkData(intoLink.data);\r\n                    }\r\n                    if (nextNodeLink) {\r\n                        myDiagram.model.removeLinkData(nextNodeLink.data);\r\n                    }\r\n                }\r\n            } catch (ex) {\r\n                console.log(ex.message);\r\n            }\r\n\r\n        }\r\n        myDiagram.isModified = true;\r\n    }\r\n\r\n    addLevelNodeData(node) {\r\n        var isautolayout = window.localStorage.getItem('isautolayout') == null ? true : window.localStorage.getItem('isautolayout') == 'true';\r\n        // var isautoselect =  window.localStorage.getItem('isautoselect') == null?true:window.localStorage.getItem('isautoselect') == 'true';\r\n        var myDiagram = node.diagram;\r\n        var currentType = 'tianpan';\r\n        var toKey = node.data.next;\r\n        //delete the next link\r\n    \r\n        var nextkey = (myDiagram.model.nodeDataArray.length + 1).toString();\r\n        //var follower = {key: nextkey, text: nextkey, color: \"yellow\"};\r\n    \r\n        var follower = { key: nextkey, text: lang.trans(\"dce\"), color: \"yellow\" };\r\n        myDiagram.model.makeNodeDataKeyUnique(follower);\r\n        nextkey = follower.key;\r\n        var nextnode = null;\r\n        var nextlink = null;\r\n        var group = myDiagram.model.findNodeDataForKey(node.data.parent).group;\r\n        //找到下一个子节点\r\n        node.findNodesOutOf().each(function(n) {\r\n            if (n.data.level == node.data.level) {\r\n                nextnode = n;\r\n            }\r\n        });\r\n    \r\n        var nextlink = null;\r\n        //找到下一条边\r\n        node.findLinksOutOf().each(function(l) {\r\n            if (l.data.level == node.data.level) {\r\n                nextlink = l;\r\n            }\r\n        });\r\n        //ControlAutoLayout(false);\r\n        myDiagram.model.startTransaction();\r\n    \r\n        follower = applyTheme2Node(follower, node);\r\n        //delete the next link\r\n        var deleteLink = null;\r\n    \r\n        //if has next node\r\n        if (nextnode != null) {\r\n            follower.next = nextnode.data.key;\r\n            myDiagram.model.setDataProperty(nextnode.data, \"prev\", follower.key);\r\n        }\r\n    \r\n        if (group) {\r\n            follower.group = group;\r\n        }\r\n    \r\n    \r\n        follower.level = node.data.level;\r\n        if (currentType == \"tianpan\") {\r\n            follower.radius = node.data.radius;\r\n            //follower.fill = colorMap[follower.level % 5];\r\n            follower.fill = node.data.fill;\r\n        } else {\r\n            follower.radius = node.data.radius;\r\n            follower.fill = node.data.fill;\r\n            //follower.fill =go.Brush.randomColor(128, 240);\r\n            follower.dangle = node.data.dangle;\r\n            follower.dradius = node.data.dradius;\r\n            follower.sweep = node.data.sweep;\r\n            follower.layerThickness = node.data.layerThickness || 100;\r\n            follower.tdDipanTextAngle = node.data.tdDipanTextAngle || 'xuanzhuan';\r\n        }\r\n        follower.parent = node.data.parent;\r\n        follower.prev = node.data.key;\r\n        follower.strokeWidth = node.data.strokeWidth;\r\n        follower.stroke = node.data.stroke;\r\n        follower.font = node.data.font;\r\n        //follower.font = node.data.font;\r\n        follower.textStroke = node.findObject(\"TEXT\").stroke;\r\n        if (node.data.figure) {\r\n            follower.figure = node.data.figure;\r\n        }\r\n        follower.loc = node.data.loc;\r\n        if (currentType == 'tianpan') {\r\n    \r\n            var nextLocation = node.location.copy();\r\n            if (node.data.parent) {\r\n                var parentNode = myDiagram.findNodeForKey(node.data.parent);\r\n                if (parentNode) {\r\n                    nextLocation = computeNextLoc(node, parentNode);\r\n                }\r\n            }\r\n            follower.loc = go.Point.stringify(nextLocation);\r\n    \r\n        }\r\n        if (node.data.width) {\r\n            follower.width = node.data.width;\r\n        }\r\n        if (node.data.height) {\r\n            follower.height = node.data.height;\r\n        }\r\n        follower.category = node.data.category;\r\n        follower.newAdd = true;\r\n        // add a new node\r\n        myDiagram.model.addNodeData(follower);\r\n    \r\n        // add a link from the selected node to the new node\r\n        var linkToFollower = { from: node.data.key, to: follower.key };\r\n        linkToFollower.level = node.data.level;\r\n        linkToFollower.color = follower.fill;\r\n        linkToFollower.isTreeLink = true;\r\n        linkToFollower = applyTheme2Link(linkToFollower, node);\r\n    \r\n        // linkToFollower.strokeWidth = node.data.level == 1 ? 4 : Math.max(1, 3 - (linkToFollower.level - 1) * 0.5);\r\n        linkToFollower.strokeWidth = 2;\r\n        if (node.findLinksInto() && node.findLinksInto().first()) {\r\n            linkToFollower.color = node.findLinksInto().first().data.color;\r\n            linkToFollower.strokeWidth = node.findLinksInto().first().data.strokeWidth;\r\n            linkToFollower.toArrow = node.findLinksInto().first().data.toArrow;\r\n            linkToFollower.strokeDashArray = node.findLinksInto().first().data.strokeDashArray;\r\n        } else {\r\n            linkToFollower = applyTheme2Link(linkToFollower, node);\r\n        }\r\n        if (currentType == 'dipan') {\r\n            if (node.data.category == 'Root' || node.data.category == 'dipan') {\r\n                linkToFollower.category = 'dipan';\r\n            }\r\n        }\r\n        myDiagram.model.addLinkData(linkToFollower, node);\r\n    \r\n        myDiagram.model.setDataProperty(node.data, \"next\", nextkey);\r\n        if (nextlink != null) {\r\n            var copyLink = {};\r\n            // _.extendOwn(copyLink, nextlink.data);\r\n            // copyLink = helpers.extend(copyLink, nextlink.data);\r\n            delete nextlink.data.points\r\n            copyLink = JSON.parse(JSON.stringify(nextlink.data));\r\n\r\n            delete copyLink.__gohashid;\r\n            delete copyLink.points;\r\n            copyLink.from = follower.key;\r\n            copyLink.to = nextlink.data.to;\r\n            myDiagram.model.removeLinkData(nextlink.data);\r\n            myDiagram.model.addLinkData(copyLink);\r\n        }\r\n        myDiagram.model.commitTransaction();\r\n        myDiagram.isModified = true;\r\n        return follower;\r\n    }\r\n\r\n    addFollower(e, iskeyboard) {\r\n        if(!e){\r\n            var e = this.diagram.lastInput\r\n        }\r\n        var myDiagram = e.diagram;\r\n        var node = myDiagram.selection.first();\r\n        if (!node) return;\r\n        var diagram = node.diagram;\r\n        // var isautolayout = window.localStorage.getItem('isautolayout') == null ? true : window.localStorage.getItem('isautolayout') == 'true';\r\n        var isautolayout = true\r\n        if (node === null || !(node instanceof go.Node) || node instanceof go.Group) return;\r\n        if (node.findLinksInto().count == 0) return;\r\n        if (myDiagram.toolManager.textEditingTool.isActive) {\r\n            var tb = myDiagram.selection.first().findObject('TEXT');\r\n            tb.text = myDiagram.toolManager.textEditingTool.currentTextEditor.innerText;\r\n            myDiagram.toolManager.textEditingTool.stopTool();\r\n        }\r\n        if (!isautolayout) {\r\n            ControlAutoLayout(e, false);\r\n        } else {\r\n            if (node.data.level >= 3) {\r\n                ControlAutoLayout(e, false);\r\n                autoLayoutPart(node);\r\n            } else {\r\n                ControlAutoLayout(e, true);\r\n            }\r\n        }\r\n    \r\n        myDiagram.model.startTransaction('all');\r\n    \r\n        var follower = this.addLevelNodeData(node);\r\n        myDiagram.model.commitTransaction('all');\r\n    \r\n        if (typeof iskeyboard != 'undefined' && iskeyboard == true) { // check whether is a keyboard trigger the action\r\n            var newnode = diagram.findNodeForData(follower);\r\n            if (newnode) {\r\n                diagram.select(newnode);\r\n            }\r\n    \r\n            //myDiagram.scale = 0.6588944708324703;\r\n            myDiagram.isModified = true;\r\n    \r\n            var tb = myDiagram.selection.first().findObject('TEXT');\r\n            // // console.log(tb)\r\n            if (tb) myDiagram.commandHandler.editTextBlock(tb);\r\n            helpers.simulateEnterWithAlt(e);\r\n        }\r\n    }\r\n\r\n    startNewSpiral(iskeyboard) {\r\n        var myDiagram = this.diagram;\r\n        var e = myDiagram.lastInput;\r\n        var node = myDiagram.selection.first();\r\n        if (!node) return;\r\n        var diagram = node.diagram;\r\n        // var isautolayout = window.localStorage.getItem('isautolayout') == null ? true : window.localStorage.getItem('isautolayout') == 'true';\r\n        var isautolayout = true\r\n        // var isautoselect =  window.localStorage.getItem('isautoselect') == null?true:window.localStorage.getItem('isautoselect') == 'true';\r\n        if (node === null || !(node instanceof go.Node) || node instanceof go.Group) return;\r\n    \r\n        if (node.data.isparent && myDiagram.findNodeForKey(node.data.isparent) && !myDiagram.findNodeForKey(node.data.isparent).visible) {\r\n            return;\r\n        }\r\n        if (!isautolayout) {\r\n            ControlAutoLayout(e, false);\r\n        } else {\r\n            if (node.data.level >= 2) {\r\n                ControlAutoLayout(e, false);\r\n                autoLayoutPart(node);\r\n            } else {\r\n                ControlAutoLayout(e, true);\r\n            }\r\n        }\r\n        myDiagram.startTransaction();\r\n        myDiagram.startTransaction(\"addChildNodeData\");\r\n        var follower = this.addChildNodeData(node);\r\n        // var root = getRootNodeData(node.data, myDiagram.model, 0);\r\n        myDiagram.commitTransaction(\"addChildNodeData\");\r\n        myDiagram.commitTransaction();\r\n    \r\n        // select the new Node\r\n        if (typeof iskeyboard != 'undefined' && iskeyboard == true) {\r\n            var newnode = myDiagram.findNodeForData(follower);\r\n            if (newnode) {\r\n                myDiagram.centerRect(newnode.actualBounds);\r\n            }\r\n    \r\n            diagram.select(newnode); //需要居中\r\n            var tb = myDiagram.selection.first().findObject('TEXT');\r\n            if (tb) myDiagram.commandHandler.editTextBlock(tb);\r\n            helpers.simulateEnterWithAlt(e);\r\n        }\r\n    }\r\n\r\n    \r\n    //modify nodeDataArray\r\n    addChildNodeData(node) {\r\n        console.log(\"===================天盘\")\r\n        var isautolayout = window.localStorage.getItem('isautolayout') == null ? true : window.localStorage.getItem('isautolayout') == 'true';\r\n        // var isautoselect =  window.localStorage.getItem('isautoselect') == null?true:window.localStorage.getItem('isautoselect') == 'true';\r\n        var myDiagram = node.diagram;\r\n        var result = arguments[1] ? arguments[1] : null;\r\n        var currentType = 'tianpan';\r\n        // var nodeRoot = getRootNodeData(node.data, myDiagram.model);\r\n        // if (nodeRoot.category == \"Root\") {\r\n        //     currentType = 'dipan';\r\n        // } else {\r\n        //     currentType = 'tianpan';\r\n        // }\r\n        currentType = 'tianpan';\r\n        //myDiagram.startTransaction();\r\n        var nextkey = (myDiagram.model.nodeDataArray.length + 1).toString();\r\n        //var follower = {key: nextkey, text: nextkey};\r\n        var follower = { key: nextkey, text: lang.trans('dce') };\r\n        //if (result != null) {\r\n        myDiagram.model.makeNodeDataKeyUnique(follower);\r\n        nextkey = follower.key;\r\n        //}\r\n        //找到第一个子节点\r\n        var firstNode = myDiagram.findNodeForKey(node.data.isparent);\r\n        // node.findNodesOutOf().each(function(n) {\r\n        //     if (n.data.level > node.data.level) {\r\n        //         firstNode = n;\r\n        //     }\r\n        // });\r\n\r\n        var firstLink = null;\r\n        //找到第一条子边\r\n        node.findLinksOutOf().each(function(l) {\r\n            if (l.data.level > node.data.level) {\r\n                firstLink = l;\r\n            }\r\n        });\r\n        follower.level = node.data.level + 1;\r\n        follower.parent = node.data.key;\r\n        follower.prev = undefined;\r\n\r\n        //如果已经有子节点\r\n        if (node.data.isparent && firstNode != null) {\r\n\r\n            follower.next = firstNode.data.key;\r\n            myDiagram.model.setDataProperty(firstNode.data, \"prev\", follower.key);\r\n        }\r\n\r\n        if (result != null) {\r\n            //只是用来填充的节点\r\n            follower.istemp = true;\r\n            follower.text = \"\";\r\n        }\r\n\r\n\r\n\r\n        if (node.data.level == 0) {\r\n            follower.radius = Math.max(node.data.radius * 0.75, 100);\r\n        } else {\r\n            if (node.data.radius) {\r\n                follower.radius = Math.max(node.data.radius - 5, 50);\r\n            } else {\r\n                follower.radius = Math.max(InitialFontSize - node.data.level * 10, 50);\r\n            }\r\n\r\n        }\r\n        //如果当前节点属于某个group，根节点和普通主节点通用\r\n        if (firstNode != null) {\r\n            if (node.containingGroup) {\r\n                follower.group = node.containingGroup.data.key;\r\n            }\r\n\r\n        }\r\n        //如果当前节点属于某个group，根节点和普通主节点通用\r\n        // if (firstNode == null && currentType=='tianpan') {\r\n        if (firstNode == null) {\r\n            // add a group; make it a member of the same group as the selected node\r\n            var newGroup = {\r\n                isGroup: true,\r\n                group: node.data.group,\r\n                parent: node.data.key,\r\n                fill: \"rgba(0,0,0,0)\",\r\n                stroke: \"rgba(0,0,0,0)\",\r\n                strokeWidth: 0,\r\n                level: node.data.level\r\n            };\r\n            newGroup = applyTheme2Group(newGroup, node);\r\n            // if (node.data.category == \"dipan\" || node.data.category == \"Root\") {\r\n            //     newGroup.category = \"dipan\";\r\n\r\n\r\n            // }\r\n            myDiagram.model.addNodeData(newGroup);\r\n            //修改主节点的group为新的group\r\n            myDiagram.model.setGroupKeyForNodeData(node.data, newGroup.key);\r\n            follower.group = newGroup.key;\r\n        }\r\n\r\n\r\n        follower.fill = colorMap[follower.level % 5];\r\n        follower.category = node.data.category;\r\n\r\n        follower.loc = go.Point.stringify(computeChildLoc(node));\r\n\r\n\r\n\r\n        // follower.strokeWidth = node.data.strokeWidth;\r\n        follower.strokeWidth = 2;\r\n        if (node.data.figure) {\r\n            follower.figure = node.data.figure;\r\n        }\r\n\r\n        if (node.data.picture) {\r\n            follower.picture = node.data.picture;\r\n        }\r\n\r\n\r\n        if (node.data.width) {\r\n            follower.width = node.data.width;\r\n        }\r\n        if (node.data.height) {\r\n            follower.height = node.data.height;\r\n        }\r\n\r\n        follower = applyTheme2Node(follower, node);\r\n\r\n        follower.font = node.data.font;\r\n        follower.textStroke = node.findObject(\"TEXT\").stroke;\r\n        myDiagram.model.setDataProperty(node.data, \"isparent\", nextkey);\r\n        follower.newAdd = true;\r\n        myDiagram.model.addNodeData(follower);\r\n\r\n\r\n        // add a link from the selected node to the new node\r\n        var linkToFollower = { from: node.data.key, to: follower.key };\r\n\r\n        linkToFollower.level = follower.level;\r\n        //linkToFollower.color = follower.fill;\r\n        linkToFollower.isTreeLink = true;\r\n\r\n\r\n        // linkToFollower.strokeWidth = node.data.level <= 0 ? 4 : Math.max(1, 3 - (linkToFollower.level - 1) * 0.5);\r\n        linkToFollower.strokeWidth = 2;\r\n        var intoLink = null;\r\n        intoLink = node.findLinksInto().first();\r\n        if (firstLink != null) {\r\n            linkToFollower.toArrow = firstLink.data.toArrow;\r\n            linkToFollower.strokeDashArray = firstLink.data.strokeDashArray;\r\n            linkToFollower.color = firstLink.data.color;\r\n            linkToFollower.strokeWidth = 2;\r\n            // if (node.data.level == 0) {\r\n            //     linkToFollower.strokeWidth = 4;\r\n            // } else {\r\n            //     if (node.data.level == 1) {\r\n            //         linkToFollower.strokeWidth = Math.max(1, firstLink.data.strokeWidth - 1);\r\n            //     } else {\r\n            //         linkToFollower.strokeWidth = Math.max(1, firstLink.data.strokeWidth - 0.5);\r\n            //     }\r\n            // }\r\n            //linkToFollower.strokeWidth = node.data.level <= 0 ? 4 : (node.data.level == 1?node.data.strokeWidth -1:node.data.strokeWidth-0.5)  Math.max(1, 3 - (linkToFollower.level - 1) * 0.5));\r\n        } else if (intoLink != null) {\r\n            linkToFollower.toArrow = intoLink.data.toArrow;\r\n            linkToFollower.strokeDashArray = intoLink.data.strokeDashArray;\r\n            linkToFollower.color = intoLink.data.color;\r\n            linkToFollower.strokeWidth = 2;\r\n            // if (node.data.level == 0) {\r\n            //     linkToFollower.strokeWidth = 4;\r\n            // } else {\r\n            //     if (node.data.level == 1) {\r\n            //         linkToFollower.strokeWidth = Math.max(1, intoLink.data.strokeWidth - 1);\r\n            //     } else {\r\n            //         linkToFollower.strokeWidth = Math.max(1, intoLink.data.strokeWidth - 0.5);\r\n            //     }\r\n            // }\r\n        } else {\r\n            linkToFollower = applyTheme2Link(linkToFollower, node);\r\n        }\r\n\r\n        if (node.data.category == \"dipan\" || node.data.category == 'Root') { //处理天盘\r\n            linkToFollower.category = \"dipan\";\r\n        }\r\n\r\n        myDiagram.model.addLinkData(linkToFollower);\r\n        if (firstLink != null) {\r\n            var copyLink = {};\r\n            // _.extendOwn(copyLink, firstLink.data);\r\n            // copyLink = helpers.extend(copyLink, firstLink.data);\r\n            delete firstLink.data.points\r\n            copyLink = JSON.parse(JSON.stringify(firstLink.data))\r\n            delete copyLink.__gohashid;\r\n            delete copyLink.points;\r\n            copyLink.from = follower.key;\r\n            copyLink.to = firstLink.data.to;\r\n            myDiagram.model.removeLinkData(firstLink.data);\r\n            myDiagram.model.addLinkData(copyLink);\r\n            // myDiagram.model.setFromKeyForLinkData(firstLink.data, follower.key);\r\n        }\r\n        if (currentType == 'tianpan') {\r\n            //  if (!isautolayout || !isautoselect) {\r\n            //   ControlAutoLayout(false);\r\n            //   // if(node.data.isparent && myDiagram.findNodeForKey(node.data.isparent) && node.data.group){\r\n            //   //   node = myDiagram.findNodeForKey(node.data.group)\r\n            //   // }\r\n            //   if (node && node.containingGroup) {\r\n            //     node.containingGroup.layout.isOngoing = true;\r\n            //     node.containingGroup.layout.isValidLayout = false;\r\n            //   }else{\r\n            //     node.diagram.layout.isOngoing = true;\r\n            //     node.diagram.layout.isValidLayout = false;\r\n            //   }\r\n            // }\r\n        }\r\n        //myDiagram.commitTransaction(\"new spiral\");\r\n        myDiagram.isModified = true;\r\n        return follower;\r\n    }\r\n\r\n\r\n    moveWithinNodes(direction) {\r\n        var myDiagram = this.diagram;\r\n        var node = myDiagram.selection.first();\r\n        if(!node){\r\n            return;\r\n        }\r\n        if (!node) {\r\n            myDiagram.select(myDiagram.findNodeForKey(1));\r\n            return;\r\n        }\r\n        switch (direction) {\r\n            case 'left':\r\n                if (node.data.prev) {\r\n                    var prevNode = myDiagram.findNodeForKey(node.data.prev);\r\n                    if (prevNode) {\r\n                        myDiagram.select(prevNode);\r\n                    }\r\n                }\r\n                break;\r\n            case 'up':\r\n                if (node.data.parent) {\r\n                    var prevNode = myDiagram.findNodeForKey(node.data.parent);\r\n                    if (prevNode) {\r\n                        myDiagram.select(prevNode);\r\n                    }\r\n                }\r\n                break;\r\n            case 'right':\r\n                if (node.data.next) {\r\n                    var prevNode = myDiagram.findNodeForKey(node.data.next);\r\n                    if (prevNode) {\r\n                        myDiagram.select(prevNode);\r\n                    }\r\n                }\r\n                break;\r\n            case 'down':\r\n                if (node.data.isparent) {\r\n                    var prevNode = myDiagram.findNodeForKey(node.data.isparent);\r\n                    if (prevNode) {\r\n                        myDiagram.select(prevNode);\r\n                    }\r\n                }\r\n                break;\r\n        }\r\n    }\r\n\r\n    selectText(e) {\r\n        var myDiagram = this.diagram\r\n        var node = myDiagram.selection.first();\r\n        if (!node) return;\r\n        // removeNodeRemarkTips();\r\n        var tb = myDiagram.selection.first().findObject('TEXT');\r\n        if (tb) myDiagram.commandHandler.editTextBlock(tb);\r\n        helpers.simulateEnterWithAlt(e);\r\n    }\r\n\r\n    //快捷键\r\n    dokeyDownFn (e) {\r\n        // console.log('myDiagram:', diagram);\r\n        var diagram = this.diagram\r\n        var that = this;\r\n        var myDiagram = this.diagram;\r\n        var e = myDiagram.lastInput;\r\n        var cmd = myDiagram.commandHandler;\r\n        if (e.event.altKey) {\r\n            if (e.key == \"Q\") {\r\n                autoLayoutAll();\r\n                return;\r\n            } else if (e.key == \"R\") {\r\n                centerNode();\r\n                return;\r\n            } else if (e.key == \"C\") {\r\n                centerCurrentNode();\r\n                return;\r\n            } else if (e.key == \"A\") {\r\n                zoomToFit();\r\n                return;\r\n            }\r\n        }\r\n        if (e.event.keyCode >= 65 && e.event.keyCode <= 90 && !e.event.altKey && !e.event.ctrlKey && !e.event.shiftKey) {\r\n            e.bubbles = false;\r\n            this.selectText(e, diagram);\r\n            return true;\r\n    \r\n        }\r\n        // console.log('catched in dokeydown ' + e.event.keyCode);\r\n        // console.log('catched in dokeydown ' + e.key);\r\n        if (e.event.keyCode === 13) { // could also check for e.control or e.shift\r\n            var node = myDiagram.selection.first();\r\n            if (node && node.data.parent) {\r\n                this.addFollower(e, true);\r\n            }\r\n            if (node && !node.data.parent) {\r\n                that.startNewSpiral(true);\r\n            }\r\n        } else if (e.event.keyCode === 9) { // could also check for e.control or e.shift\r\n            that.startNewSpiral(true);\r\n        } else if (e.key === \"t\") { // could also check for e.control or e.shift\r\n            if (cmd.canCollapseSubGraph()) {\r\n                cmd.collapseSubGraph();\r\n            } else if (cmd.canExpandSubGraph()) {\r\n                cmd.expandSubGraph();\r\n            }\r\n        } else if (e.key == \"Del\") {\r\n            e.diagram.commandHandler.deleteSelection();\r\n        } else if (e.event.keyCode == 113) { //F2,不知道为什么失效了，重新赋予功能\r\n            // selectText();\r\n            this.selectText(e, diagram);\r\n        } else if (e.event.keyCode == 37) { //左\r\n            this.moveWithinNodes('left', diagram);\r\n            // go.CommandHandler.prototype.doKeyDown.call(cmd);\r\n        } else if (e.event.keyCode == 38) { //上\r\n            this.moveWithinNodes('up', diagram);\r\n            // go.CommandHandler.prototype.doKeyDown.call(cmd);\r\n        } else if (e.event.keyCode == 39) { //右\r\n            this.moveWithinNodes('right', diagram);\r\n            // go.CommandHandler.prototype.doKeyDown.call(cmd);\r\n        } else if (e.event.keyCode == 40) { //下\r\n            this.moveWithinNodes('down', diagram);\r\n            // go.CommandHandler.prototype.doKeyDown.call(cmd);\r\n        } else {\r\n            // call base method with no arguments\r\n            go.CommandHandler.prototype.doKeyDown.call(cmd);\r\n        }\r\n        e.bubbles = false; //阻止事件冒泡到dom\r\n    }\r\n    \r\n    // 生成base64图片\r\n    downloadImage() {\r\n        var myDiagram = this.diagram;\r\n        var imgdata = myDiagram.makeImageData({\r\n            scale: 1.0,\r\n            background: \"#ffffff\",\r\n            type: \"image/png\",\r\n            maxSize: new go.Size(9000, 9000)\r\n        });\r\n\r\n        return imgdata;\r\n    }\r\n\r\n   \r\n    getNodeSelectionAdornmentTemplate() {\r\n        return $(go.Adornment, \"Spot\",\r\n            $(go.Panel, \"Auto\",\r\n                $(go.Shape, { figure: \"Circle\", fill: 'rgba(255,0,120,0.2)', stroke: \"#767678\", strokeWidth: 12 },\r\n                    new go.Binding(\"stroke\", \"\", function(e, obj) {\r\n                        if (e.stroke) {\r\n                            return tinycolor(e.stroke).saturate().toString()\r\n                        } else {\r\n                            return \"#767678\";\r\n                        }\r\n                    }),\r\n                    // new go.Binding(\"fill\",\"\",function(e,obj){\r\n                    //   var radBrush = $(go.Brush, \"Radial\", { 0: \"rgba(248,248,242,0)\", 1: 'RGB(255,242,0)' });\r\n                    //   return radBrush;\r\n                    // })\r\n                    // ,\r\n                    new go.Binding(\"strokeWidth\", \"\", function(e, obj) {\r\n                        if (e.strokeWidth) {\r\n                            return e.strokeWidth + 5;\r\n                        } else {\r\n                            return 6;\r\n                        }\r\n    \r\n                    }),\r\n                    new go.Binding(\"width\", \"\", function(e, obj) {\r\n                        return e.radius || 150;\r\n                    }),\r\n                    new go.Binding(\"height\", \"\", function(e, obj) {\r\n                        return e.radius || 150;\r\n                    })\r\n                ),\r\n                $(go.Placeholder) // this represents the selected Node\r\n    \r\n            ),\r\n            // the button to create a \"next\" node, at the top-right corner\r\n            $(\"Button\", {\r\n                    name: \"AddChild\",\r\n                    toolTip: $(go.Adornment, \"Auto\",\r\n                        $(go.Shape, { fill: \"#FFFFCC\" }),\r\n                        $(go.TextBlock, { textAlign: 'center', margin: new go.Margin(8, 4, 4, 4) }, // the tooltip shows the result of calling nodeInfo(data)\r\n                            new go.Binding(\"text\", \"\", function(d) {\r\n                                return \"增加子节点\";\r\n                            }))\r\n                    ),\r\n                    alignment: go.Spot.Top,\r\n                    alignmentFocus: go.Spot.Bottom,\r\n                    width: 30,\r\n                    height: 30,\r\n                    click: function (e) {\r\n                        e.diagram.__trtd.startNewSpiral()\r\n                    } // this function is defined below\r\n                },\r\n                $(go.Shape, \"PlusLine\", { stroke: '#770077', desiredSize: new go.Size(15, 15) })\r\n            ),\r\n    \r\n            $(\"Button\", {\r\n                    name: \"AddLevel\",\r\n                    toolTip: $(go.Adornment, \"Auto\",\r\n                        $(go.Shape, { fill: \"#FFFFCC\" }),\r\n                        $(go.TextBlock, { textAlign: 'center', margin: new go.Margin(8, 4, 4, 4) }, // the tooltip shows the result of calling nodeInfo(data)\r\n                            new go.Binding(\"text\", \"\", function(d) {\r\n                                return \"增加同级节点\";\r\n                            }))\r\n                    ),\r\n                    alignment: new go.Spot(1, 0.5, 15, 0),\r\n                    width: 30,\r\n                    height: 30,\r\n                    click: function (e) {\r\n                        e.diagram.__trtd.addFollower(e)\r\n                    } // this function is defined below\r\n                },\r\n                $(go.Shape, \"PlusLine\", { stroke: \"#227700\", desiredSize: new go.Size(15, 15) }),\r\n                new go.Binding(\"visible\", \"level\", function(level) {\r\n                    return level != 0; // hidden this button if current node is root node\r\n    \r\n                })\r\n            ),\r\n            // $(go.Panel, \"Auto\", {        // 放大镜\r\n            //         name: \"ButtonIcon1\",\r\n            //         alignment: new go.Spot(0, 1, 5, -5),\r\n            //         //alignment: go.Spot.BottomLeft,\r\n            //         //alignmentFocus: go.Spot.BottomLeft,\r\n            //         width: 60,\r\n            //         height: 60,\r\n            //         isActionable: true,\r\n            //         click: expandCollapse // this function is defined below\r\n            //     },\r\n    \r\n            //     $(go.Shape, \"Circle\", {\r\n            //         fill: \"rgba(1,1,1,0)\",\r\n            //         strokeWidth: 0,\r\n            //         stroke: \"green\",\r\n            //         width: 50,\r\n            //         height: 50\r\n            //     }),\r\n            //     $(go.Shape, {\r\n            //             '_para1': true,\r\n            //             name: \"ButtonIcon\",\r\n            //             fill: \"red\",\r\n            //             strokeWidth: 2,\r\n            //             stroke: \"#767678\",\r\n            //             geometryString: icons[\"zoomout\"], // default value for isTreeExpanded is true\r\n            //             desiredSize: new go.Size(30, 30)\r\n            //         },\r\n            //         new go.Binding(\"geometryString\", \"\", function(d, button) {\r\n            //             // console.log('dddddd:', d);\r\n            //             // console.log('button:', button);\r\n            //             // var myDiagram = d.diagram;\r\n            //             // var node = myDiagram.selection.first();\r\n            //             // if (node[\"_controlExpand\"]) {\r\n            //             //     return icons[\"zoomout\"];\r\n            //             // } else {\r\n            //             //     return icons[\"zoomin\"];\r\n            //             // }\r\n            //             return icons[\"zoomin\"];\r\n            //         })\r\n            //     )\r\n            // )\r\n        );\r\n    } // end Adornment\r\n\r\n    // 给子节点添加序号\r\n    orderChildNode(obj) {\r\n        var myDiagram = this.diagram;\r\n        var arr = [];\r\n        var node = myDiagram.selection.first();\r\n        console.log(\"node\", node);\r\n        if (node) {\r\n            myDiagram.startTransaction();\r\n            console.log(\"node.data\", node.data);\r\n            if (node.data.isparent) {\r\n                var first = myDiagram.model.findNodeDataForKey(node.data.isparent);\r\n                arr.push(first);\r\n                pushChildKeyToArr(first, arr, this);\r\n\r\n                var re = /^(\\d+\\、+)|(\\d+\\.+)/g;\r\n                for (var i = 0; i < arr.length; i++) {\r\n                    if (re.test(arr[i].text)) {\r\n                        myDiagram.model.setDataProperty(arr[i], \"text\", (arr[i].text).replace(re, (i + 1) + \".\"));\r\n                    } else {\r\n                        if(arr[i].text == ''){\r\n                            myDiagram.model.setDataProperty(arr[i], \"text\", (i + 1));                                \r\n                        }else{\r\n                            myDiagram.model.setDataProperty(arr[i], \"text\", (i + 1) + \".\" + arr[i].text);\r\n                        }\r\n                    }\r\n                }\r\n            } else {\r\n                console.log(\"无子节点！\");\r\n            }\r\n            myDiagram.commitTransaction();\r\n        };\r\n    }\r\n\r\n    clearOrderChildNode(obj) {\r\n        var myDiagram = this.diagram;\r\n        var arr = [];\r\n        var node = myDiagram.selection.first();\r\n        console.log(\"node\", node);\r\n        if (node) {\r\n            myDiagram.startTransaction();\r\n            console.log(\"node.data\", node.data);\r\n            if (node.data.isparent) {\r\n                var first = myDiagram.model.findNodeDataForKey(node.data.isparent);\r\n                arr.push(first);\r\n                pushChildKeyToArr(first, arr, this);\r\n\r\n                var re = /^(\\d+\\、+)|(\\d+\\.+)/g;\r\n                for (var i = 0; i < arr.length; i++) {\r\n                    if (re.test(arr[i].text)) {\r\n                        myDiagram.model.setDataProperty(arr[i], \"text\", (arr[i].text).replace(re, \"\"));\r\n                    }\r\n                }\r\n            } else {\r\n                console.log(\"无子节点！\");\r\n            }\r\n            myDiagram.commitTransaction();\r\n        };\r\n    }\r\n}\r\n\r\n//临时扇区转换为正式扇区\r\nfunction changeTemp2normal(myDiagram) {\r\n\r\n    var node = myDiagram.selection.first();\r\n    if (node.data.istemp) {\r\n        myDiagram.model.startTransaction();\r\n        var tmpNode = myDiagram.findNodeForKey(node.data.parent);\r\n        myDiagram.model.setDataProperty(node.data, \"istemp\", undefined);\r\n        var lastNode = null; //记录这一级扇区\r\n        while (tmpNode) {\r\n            if (tmpNode.data.istemp) {\r\n                myDiagram.model.setDataProperty(tmpNode.data, \"istemp\", undefined);\r\n                myDiagram.model.setDataProperty(tmpNode.data, \"text\", \"双击编辑内容\");\r\n                lastNode = tmpNode;\r\n            } else {\r\n                if (lastNode) {\r\n                    myDiagram.model.setDataProperty(tmpNode.data, \"isparent\", lastNode.data.key);\r\n                }\r\n                break;\r\n            }\r\n            tmpNode = myDiagram.findNodeForKey(tmpNode.data.parent);\r\n        }\r\n        myDiagram.model.commitTransaction();\r\n        myDiagram.isModified = true;\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\nfunction applyTheme2Node(follower,node) {\r\n\r\n    node.diagram.model.setDataProperty(follower, 'strokeWidth', node.diagram.__trtd.tdCurrentTheme.borderWidth);\r\n    node.diagram.model.setDataProperty(follower, 'stroke', node.diagram.__trtd.tdCurrentTheme.borderColor);\r\n    if (node.diagram.__trtd.tdCurrentTheme.colorRange == null) {\r\n        node.diagram.model.setDataProperty(follower, 'fill', randomColor({ luminosity: 'light', count: 1 })[0]);\r\n    } else if (node.diagram.__trtd.tdCurrentTheme.colorRange instanceof Array) {\r\n        var tmpColor = \"white\";\r\n        if (follower.level >= node.diagram.__trtd.tdCurrentTheme.colorRange.length) {\r\n            tmpColor = node.diagram.__trtd.tdCurrentTheme.colorRange[follower.level % node.diagram.__trtd.tdCurrentTheme.colorRange.length];\r\n        } else {\r\n            tmpColor = node.diagram.__trtd.tdCurrentTheme.colorRange[follower.level];\r\n        }\r\n        node.diagram.model.setDataProperty(follower, 'fill', tmpColor);\r\n    } else if (node.diagram.__trtd.tdCurrentTheme.colorRange == \"random\") {\r\n        //层级颜色一样的随机色\r\n        if (follower.prev) {\r\n            var preNode = node.diagram.findNodeForKey(follower.prev);\r\n            if (preNode) {\r\n                node.diagram.model.setDataProperty(follower, 'fill', preNode.data.fill);\r\n            } else {\r\n                node.diagram.model.setDataProperty(follower, 'fill', randomColor({ luminosity: 'light', count: 1 })[0]);\r\n            }\r\n\r\n        } else {\r\n            node.diagram.model.setDataProperty(follower, 'fill', randomColor({ luminosity: 'light', count: 1 })[0]);\r\n        }\r\n    } else {\r\n        if (node.diagram.__trtd.tdCurrentTheme.colorRange == \"white\") {\r\n            node.diagram.model.setDataProperty(follower, 'fill', \"white\");\r\n        } else {\r\n            node.diagram.model.setDataProperty(follower, 'fill', \"rgba(0,0,0,0)\");\r\n        }\r\n\r\n    }\r\n    return follower;\r\n}\r\n\r\n//生成地盘的figure形状\r\nfunction makeAnnularWedge(data, layerThickness) {\r\n    var sweep = data.sweep ? data.sweep : 360;\r\n    var layerThickness = data.layerThickness || 100;\r\n    var radius = data.dradius ? data.dradius : 100;\r\n    var p = new go.Point(radius + layerThickness, 0).rotate(-sweep / 2);\r\n    var q = new go.Point(radius, 0).rotate(sweep / 2);\r\n    var geo = new go.Geometry()\r\n        .add(new go.PathFigure(p.x, p.y)\r\n            .add(new go.PathSegment(go.PathSegment.Arc, -sweep / 2, sweep, 0, 0, radius + layerThickness, radius + layerThickness))\r\n            .add(new go.PathSegment(go.PathSegment.Line, q.x, q.y))\r\n            .add(new go.PathSegment(go.PathSegment.Arc, sweep / 2, -sweep, 0, 0, radius, radius).close()));\r\n    geo.normalize();\r\n    return geo;\r\n}\r\n\r\nfunction getRootNodeData(model,nodeData,level) {\r\n    var parent, root = nodeData;\r\n    if (!level) {\r\n        level = 0;\r\n    }\r\n    while (root.parent) {\r\n        if (root.level == level) {\r\n            break;\r\n        }\r\n        parent = model.findNodeDataForKey(root.parent);\r\n        if (parent) {\r\n            root = parent;\r\n        }\r\n    }\r\n    return root;\r\n}\r\n\r\n\r\nfunction getNodeContextMenu() {\r\n   \r\n\r\n    let style = {\r\n        // width: 120,\r\n        // height: 30,\r\n        // margin: 2,\r\n        // font: \"bold 14px sans-serif\",\r\n        // margin: 3,\r\n    }\r\n\r\n    return $(go.Adornment, \"Vertical\",\r\n        $(\"ContextMenuButton\",\r\n            $(go.TextBlock, \"应用样式到所有同级节点\"), {\r\n                click: function(e, obj) {\r\n                    menus.applyStyle2Level(e, obj);\r\n                }\r\n            }),\r\n        $(\"ContextMenuButton\",\r\n            $(go.TextBlock, \"应用样式到同级节点\"), {\r\n                click: function(e, obj) {\r\n                    menus.applyStyle2CurLevel(e, obj);\r\n                }\r\n            }),\r\n        $(\"ContextMenuButton\",\r\n            $(go.TextBlock, \"应用样式到子节点\"), {\r\n                click: function(e, obj) {\r\n                    menus.applyStyle2ChiLevel(e, obj);\r\n                }\r\n            }),\r\n        $(\"ContextMenuButton\",\r\n            $(go.TextBlock, \"添加\"), {\r\n                click: function(e, obj) {\r\n                    menus.addFollower(e);\r\n                }\r\n            }),\r\n        $(\"ContextMenuButton\",\r\n            $(go.TextBlock, \"添加子节点\"), {\r\n                click: function(e) {\r\n                    menus.startNewSpiral();\r\n                }\r\n            }),\r\n        $(\"ContextMenuButton\",\r\n            $(go.TextBlock, \"定位当前节点\"), style, {\r\n                click: centerCurrentNode\r\n            }),\r\n\r\n        $(\"ContextMenuButton\",\r\n            $(go.TextBlock, \"删除\"), style, {\r\n                click: function(e, obj) {\r\n                    console.log('eeeeeeeeee:', e);\r\n                    e.diagram.commandHandler.deleteSelection();\r\n                }\r\n            }),\r\n        // $(\"ContextMenuButton\",\r\n        //     $(go.TextBlock, \"添加图片\"), style, {\r\n        //         click: function(e, obj) {\r\n        //             insertPicture();\r\n        //         }\r\n        //     }),\r\n        // $(\"ContextMenuButton\",\r\n        //     $(go.TextBlock, \"移除图片\"), style, {\r\n        //         click: function(e, obj) {\r\n        //             removeNodePicture();\r\n        //         }\r\n        //     }),\r\n        $(\"ContextMenuButton\",\r\n            $(go.TextBlock, \"清空文本\"), style, {\r\n                click: function(e, obj) {\r\n                    var myDiagram = e.diagram;\r\n                    var node = myDiagram.selection.first();\r\n                    if (node) {\r\n                        myDiagram.startTransaction();\r\n                        //node.data.text=\"\";\r\n                        myDiagram.model.setDataProperty(node.data, \"text\", \"\");\r\n                        myDiagram.commitTransaction();\r\n                    }\r\n                    //removeNodePicture();\r\n                }\r\n            }),\r\n        $(\"ContextMenuButton\",\r\n            $(go.TextBlock, \"删除 DEL\"), style, {\r\n                click: function(e, obj) {\r\n                    var myDiagram = e.diagram;\r\n                    var node = myDiagram.selection.first();\r\n                    if (node) {\r\n                        yunpan.yunpandel(e)\r\n                    }\r\n                    //removeNodePicture();\r\n                }\r\n            }),\r\n        $(\"ContextMenuButton\",\r\n            $(go.TextBlock, \"增加 CTRL+X/Y\"), style, {\r\n                click: function(e, obj) {\r\n                    var myDiagram = e.diagram;\r\n                    var node = myDiagram.selection.first();\r\n                    if (node) {\r\n                        if(node.data.loc.split(\" \")[1] === \"0\"&&node.data.category!==\"x\"){\r\n                            yunpan.addy(e)\r\n                        }else if(node.data.loc.split(\" \")[0] === \"0\"&&node.data.category!==\"y\"){\r\n                            yunpan.addx(e)\r\n                        }; \r\n                    }\r\n                    //removeNodePicture();\r\n                }\r\n            }),\r\n        $(\"ContextMenuButton\",\r\n            $(go.TextBlock, \"删除 DEL\"), style, {\r\n                click: function(e, obj) {\r\n                    var myDiagram = e.diagram;\r\n                    var node = myDiagram.selection.first();\r\n                    if (node) {\r\n                        yunpan.yunpandel(e)\r\n                    }\r\n                    //removeNodePicture();\r\n                }\r\n            }),\r\n        $(\"ContextMenuButton\",\r\n            $(go.TextBlock, \"增加同级节点\"), style, {\r\n                click: function(e, obj) {\r\n                    var myDiagram = e.diagram;\r\n                    var node = myDiagram.selection.first();\r\n                    if(myDiagram.selection.first().data.istemp){\r\n                        return\r\n                    }\r\n                    dipan.addFollowerGround(e);\r\n                }\r\n            }),\r\n        $(\"ContextMenuButton\",\r\n            $(go.TextBlock, \"增加子节点\"), style, {\r\n                click: function(e, obj) {\r\n                    var myDiagram = e.diagram;\r\n                    var node = myDiagram.selection.first();\r\n                    if(node.data.parent){\r\n                        var parentNode = node.diagram.findNodeForKey(node.data.parent);\r\n                        if(parentNode.data.istemp){\r\n                            return\r\n                        }\r\n                    }\r\n                    dipan.addNewCircle(e);\r\n                }\r\n            }),\r\n        $(\"ContextMenuButton\",\r\n            $(go.TextBlock, \"删除\"), style, {\r\n                click: function(e, obj) {\r\n                    var myDiagram = e.diagram;\r\n                    var node = myDiagram.selection.first();\r\n                    if(node.data.parent){\r\n                        var parentNode = node.diagram.findNodeForKey(node.data.parent);\r\n                        if(parentNode.data.istemp){\r\n                            return\r\n                        }\r\n                    }\r\n                    dipan.addNewCircle(e);\r\n                }\r\n            }),\r\n            $(\"ContextMenuButton\",\r\n            $(go.TextBlock, \"复制副本\"), style, {\r\n                click: function(e, obj) {\r\n                    var myDiagram = e.diagram;\r\n                    var node = myDiagram.selection.first();\r\n                    if(myDiagram.selection.first().data.istemp){\r\n                        return\r\n                    }\r\n                    dipan.addFollowerGround(e);\r\n                }\r\n            }),\r\n        $(\"ContextMenuButton\",\r\n            $(go.TextBlock, \"权限设置\"), style, {\r\n                click: function(e, obj) {\r\n                    var myDiagram = e.diagram;\r\n                    var node = myDiagram.selection.first();\r\n                    if(node.data.parent){\r\n                        var parentNode = node.diagram.findNodeForKey(node.data.parent);\r\n                        if(parentNode.data.istemp){\r\n                            return\r\n                        }\r\n                    }\r\n                    dipan.addNewCircle(e);\r\n                }\r\n            }),\r\n        $(\"ContextMenuButton\",\r\n            $(go.TextBlock, \"删除\"), style, {\r\n                click: function(e, obj) {\r\n                    var myDiagram = e.diagram;\r\n                    var node = myDiagram.selection.first();\r\n                    if(node.data.parent){\r\n                        var parentNode = node.diagram.findNodeForKey(node.data.parent);\r\n                        if(parentNode.data.istemp){\r\n                            return\r\n                        }\r\n                    }\r\n                    dipan.addNewCircle(e);\r\n                }\r\n            })\r\n\r\n    );\r\n}\r\n\r\n\r\n// function cxcommand (obj, val) {\r\n//     var diagram = obj.diagram;\r\n//     var myDiagram = obj.diagram;\r\n//     if (!(diagram.currentTool instanceof go.ContextMenuTool)) return;\r\n//     switch (val) {\r\n//         // case \"Paste\": diagram.commandHandler.pasteSelection(diagram.lastInput.documentPoint); break;\r\n//         case \"addChildNodeMenu\":\r\n//         diagram.__trtd.startNewSpiral();\r\n//             break;\r\n//         case \"addLevelNodeMenu\":\r\n//         diagram.__trtd.addFollower(obj);\r\n//             break;\r\n//         case \"deleteNodeMenu\":\r\n//             myDiagram.toolManager.textEditingTool.doCancel();\r\n//             myDiagram.commandHandler.deleteSelection();\r\n//             break;\r\n//         case \"addNodePictureMenu\":\r\n//             // jQuery(\"#insertimage\").modal('show');\r\n//             // document.getElementById('insertimage').modal('show');\r\n//             break; //特殊处理\r\n//         case \"removeNodePictureMenu\":\r\n//             removeNodePicture(obj);\r\n//             break;\r\n//         case \"clearNodeTextMenu\":\r\n//             var node = myDiagram.selection.first();\r\n//             if (node) {\r\n//                 myDiagram.startTransaction();\r\n//                 myDiagram.model.setDataProperty(node.data, \"text\", \"\");\r\n//                 myDiagram.commitTransaction();\r\n//             };\r\n//             break;\r\n//         case \"locateRootNodeMenu\":\r\n//             centerNode(obj);\r\n//             break;\r\n//         case \"showAllNodesMenu\":\r\n//             zoomToFit(obj);\r\n//             break;\r\n//         case \"removeOutCycleMenu\":\r\n//             removeOutCycle(obj);\r\n//             break;\r\n//         case \"centerPictureMenu\":\r\n//             centerPicture(obj);\r\n//             break;\r\n//         case \"equalWidthHeightPictureMenu\":\r\n//             equalWidthHeightPicture(obj);\r\n//             break;\r\n//         case \"bringToTopMenu\":\r\n//             bringToLayer(\"Foreground\", obj);\r\n//             break;\r\n//         case \"bringToBackgroundMenu\":\r\n//             bringToLayer(\"Background\", obj);\r\n//             break;\r\n//         case \"bringUpMenu\":\r\n//             bringToLayer(null, obj);\r\n//             break;\r\n//         case \"layoutGroupMenu\":\r\n//             autoLayoutAll(true, obj);\r\n//             break;\r\n\r\n//         case \"insertTextMenu\":\r\n//             insertTextNode(obj);\r\n//             break;\r\n//         case \"duplicateNode\":\r\n//             duplicateNode(obj);\r\n//             break; // 复制节点\r\n//         case \"insertTianpanMenu\":\r\n//             myDiagram.toolManager.clickCreatingTool.insertPart(myDiagram.lastInput.documentPoint);\r\n//             break;\r\n//         //固定节点\r\n//         case \"fixPictureMenu\":   \r\n//         case \"activePictureMenu\":\r\n//             var node = myDiagram.findPartAt(myDiagram.lastInput.documentPoint, false);\r\n//             // var node = myDiagram.selection.first();\r\n//             myDiagram.startTransaction();\r\n//             myDiagram.model.setDataProperty(node.data, \"selectable\", node.data.selectable != undefined ? (!node.data.selectable) : false);\r\n//             myDiagram.commitTransaction();\r\n//             break;\r\n//         case \"orderChildNode\":\r\n//             obj.diagram.__trtd.orderChildNode(obj);\r\n//             break;\r\n//         case \"clearOrderChildNode\":\r\n//             obj.diagram.__trtd.clearOrderChildNode(obj);\r\n//             break;\r\n//         case \"delYunpanAxis\":\r\n//             yunpan.yunpandel(obj);\r\n//             break;\r\n//         case \"addYunpanAxis\":\r\n//             var node = myDiagram.selection.first();\r\n//             if(node.data.loc.split(\" \")[1] === \"0\"&&node.data.category!==\"x\"){\r\n//                 yunpan.addy(obj)\r\n//             }else if(node.data.loc.split(\" \")[0] === \"0\"&&node.data.category!==\"y\"){\r\n//                 yunpan.addx(obj)\r\n//             }; \r\n//             break;\r\n//         case \"addLevelDipanNode\":\r\n//             if(myDiagram.selection.first().data.istemp){\r\n//                 return\r\n//             }\r\n//             obj.addFollowerGround();\r\n//             break;\r\n//         case \"addChildDipanNode\":\r\n//             var node = myDiagram.selection.first();\r\n//                 if(node.data.parent){\r\n//                     var parentNode = node.diagram.findNodeForKey(node.data.parent);\r\n//                     if(parentNode.data.istemp){\r\n//                         return\r\n//                     }\r\n//                 }\r\n//             obj.addNewCircle(obj);\r\n//             break;\r\n//         case \"deleteDipanNode\":\r\n//         // myDiagram.commandHandler.deleteSelection();\r\n//         obj.deleteSelection();\r\n//         break;\r\n//     }\r\n//     diagram.currentTool.stopTool();\r\n// }\r\n\r\n\r\n\r\n\r\n\r\n   /***\r\n     * 判断Node descendant是否是node的后代，如果是返回true, 否则返回false\r\n     * @param descendent go.Node type\r\n     * @param node go.Node Type\r\n     */\r\n    function isDescendant(descendant, node) {\r\n        var diagram = node.diagram,\r\n            cur = descendant;\r\n        //此处若出现bug，请告知，谢谢\r\n        while (cur.data.parent && cur.data.parent != node.data.key) {\r\n            cur = diagram.findNodeForKey(cur.data.parent);\r\n        }\r\n\r\n        return (cur.data.parent != null);\r\n    }\r\n\r\n    /***\r\n     * disconnect node (including his descendants) from diagram\r\n     * @param node go.Node type\r\n     */\r\n    function disconnectFromTreeStructure(node) {\r\n        if (node.data.parent == null) {\r\n            //if it's root node\r\n            return;\r\n        }\r\n        var diagram = node.diagram,\r\n            model = node.diagram.model;\r\n        if (node.data.prev) {\r\n            //it's not the first child of it's parent\r\n            var preNode = diagram.findNodeForKey(node.data.prev);\r\n            if (node.data.next) {\r\n                var nextNode = diagram.findNodeForKey(node.data.next);\r\n                model.setDataProperty(preNode.data, \"next\", nextNode.data.key);\r\n                model.setDataProperty(nextNode.data, \"prev\", preNode.data.key);\r\n                var link = preNode.findLinksTo(node).first();\r\n                model.setToKeyForLinkData(link.data, nextNode.data.key);\r\n\r\n                var link = node.findLinksTo(nextNode).first();\r\n                model.removeLinkData(link.data);\r\n            } else {\r\n                model.setDataProperty(preNode.data, \"next\", null);\r\n                var link = preNode.findLinksTo(node).first();\r\n                model.removeLinkData(link.data);\r\n            }\r\n\r\n        } else {\r\n            //it's the first child of it's parent\r\n            var parNode = diagram.findNodeForKey(node.data.parent);\r\n            if (node.data.next) {\r\n                var nextNode = diagram.findNodeForKey(node.data.next);\r\n                model.setDataProperty(parNode.data, \"isparent\", nextNode.data.key);\r\n                model.setDataProperty(nextNode.data, \"prev\", null);\r\n\r\n                var link = parNode.findLinksTo(node).first();\r\n                model.setToKeyForLinkData(link.data, nextNode.data.key);\r\n\r\n                link = node.findLinksTo(nextNode).first();\r\n                model.removeLinkData(link.data);\r\n            } else {\r\n                if (!parNode) {\r\n                    return;\r\n                }\r\n                model.setDataProperty(parNode.data, \"isparent\", null);\r\n                var link = parNode.findLinksTo(node).first();\r\n                if (link) {\r\n                    model.removeLinkData(link.data);\r\n                }\r\n\r\n\r\n                //remove group if parent node have children\r\n                var parGroup = parNode.containingGroup;\r\n                if (parGroup) {\r\n                    model.setDataProperty(parNode.data, 'group', parGroup.data.group);\r\n                    model.removeNodeData(parGroup.data);\r\n                }\r\n\r\n            }\r\n\r\n        }\r\n        model.setDataProperty(node.data, 'parent', null);\r\n        model.setDataProperty(node.data, 'prev', null);\r\n        model.setDataProperty(node.data, 'next', null);\r\n    } //end removing from original tree structure\r\n\r\n    function applyTheme2Link(linkToFollower, node) {\r\n        var myDiagram = node.diagram;\r\n        var tdCurrentTheme = myDiagram.__trtd.tdCurrentTheme\r\n        if (tdCurrentTheme.linkColor != null) {\r\n            // linkToFollower.color = tdCurrentTheme.linkColor;\r\n            myDiagram.model.setDataProperty(linkToFollower, 'color', tdCurrentTheme.linkColor);\r\n        }\r\n    \r\n        return linkToFollower;\r\n    }\r\n    \r\n    /***\r\n     * add group for node\r\n     * @param node go.Node\r\n     * @param parentGroupKey\r\n     */\r\n    function addGroupForNode(node, parentGroupKey) {\r\n        if (node.data.group != null || node.data.isparent == null) {\r\n            return;\r\n        }\r\n        var child = diagram.findNodeForKey(node.data.isparent);\r\n        if (!child) {\r\n            return;\r\n        }\r\n        var diagram = node.diagram;\r\n        var model = diagram.model;\r\n\r\n        var group = { isGroup: true, parent: node.data.key, key: \"g_\" + node.data.key, group: parentGroupKey, level: node.data.level };\r\n        model.addNodeData(group);\r\n        model.setDataProperty(node.data, \"group\", group.key);\r\n\r\n        // set group for his child.\r\n\r\n        var childGroup = child.containingGroup;\r\n        if (childGroup) {\r\n            model.setDataProperty(childGroup.data, \"group\", group.key);\r\n        } else {\r\n            model.setDataProperty(child.data, \"group\", group.key);\r\n        }\r\n        while (child.data.next) {\r\n            child = diagram.findNodeForKey(child.data.next);\r\n            childGroup = child.containingGroup;\r\n            if (childGroup) {\r\n                model.setDataProperty(childGroup.data, \"group\", group.key);\r\n            } else {\r\n                model.setDataProperty(child.data, \"group\", group.key);\r\n            }\r\n        }\r\n    }    \r\n\r\n    function ControlAutoLayout(e, flag) {\r\n        var myDiagram = e.diagram;\r\n        var diagram = e.diagram;\r\n        var node = diagram.selection.first();\r\n        if (node) {\r\n            var root = getRootNodeData( diagram.model, node.data, 0);\r\n            diagram.startTransaction(\"ControlAutoLayout\");\r\n            helpers.tdTravelTdpData(root, diagram.model, [], function(d) {\r\n\r\n                if (diagram.findNodeForKey(d.key).containingGroup && diagram.findNodeForKey(d.key).containingGroup.layout) {\r\n                    diagram.findNodeForKey(d.key).containingGroup.layout.isInitial = flag;\r\n                    diagram.findNodeForKey(d.key).containingGroup.layout.isOngoing = flag;\r\n                }\r\n            })\r\n            if (root.group && diagram.findNodeForKey(root.group)) {\r\n                diagram.findNodeForKey(root.group).layout.isInitial = flag;\r\n                diagram.findNodeForKey(root.group).layout.isOngoing = flag;\r\n            } else {\r\n                diagram.layout.isInitial = flag;\r\n                diagram.layout.isOngoing = flag;\r\n            }\r\n        } else {\r\n            diagram.nodes.each(function(node) {\r\n                if (diagram.findNodeForKey(node.data.key).layout) {\r\n                    diagram.findNodeForKey(node.data.key).layout.isInitial = flag;\r\n                    diagram.findNodeForKey(node.data.key).layout.isOngoing = flag;\r\n                }\r\n            });\r\n            diagram.layout.isInitial = flag;\r\n            diagram.layout.isOngoing = flag;\r\n        }\r\n        diagram.commitTransaction(\"ControlAutoLayout\");\r\n    }    \r\n\r\n//设置局部布局\r\nfunction autoLayoutPart(node) {\r\n    if (!node) return;\r\n    var group = node.containingGroup;\r\n    if (group) {\r\n        group.layout.isInitial = true;\r\n        group.layout.isOngoing = true;\r\n    }\r\n}\r\n\r\nfunction applyTheme2Group(group, node) {\r\n    var tdCurrentTheme = node.diagram.__trtd.tdCurrentTheme\r\n    if (tdCurrentTheme.groupStrokeWidth) {\r\n        node.diagram.model.setDataProperty(group, 'strokeWidth', tdCurrentTheme.groupStrokeWidth);\r\n        // group.strokeWidth = tdCurrentTheme.groupStrokeWidth;\r\n    }\r\n    if (tdCurrentTheme.groupStroke) {\r\n        group.stroke = tdCurrentTheme.groupStroke;\r\n        node.diagram.model.setDataProperty(group, 'stroke', tdCurrentTheme.groupStroke);\r\n    }\r\n    if (tdCurrentTheme.groupColor) {\r\n        group.fill = tdCurrentTheme.groupColor;\r\n        node.diagram.model.setDataProperty(group, 'fill', tdCurrentTheme.groupColor);\r\n    }\r\n    return group;\r\n}\r\n\r\nfunction computeChildLoc(root) {\r\n    if (root.data.isparent) {\r\n        var rootLoc = root.location.copy();\r\n        var rootPoint = new go.Point(0, 0);\r\n        var firstChild = root.diagram.findNodeForKey(root.data.isparent);\r\n        var firstLoc = firstChild.location.copy();\r\n        var relativeFirstLoc = new go.Point(firstLoc.x - rootLoc.x, firstLoc.y - rootLoc.y);\r\n\r\n        var relativeMidLoc = relativeFirstLoc.copy().rotate(-90);\r\n        var midLoc = new go.Point(relativeMidLoc.x + rootLoc.x, relativeMidLoc.y + rootLoc.y);\r\n        return midLoc;\r\n    }\r\n    var rootLoc = root.location.copy();\r\n    var offset = computeOffset(root.actualBounds.width + 100, 225);\r\n    rootLoc.offset(offset[0], offset[1]);\r\n\r\n    return rootLoc;\r\n}\r\n\r\nfunction computeNextLoc(node, root) {\r\n    /* 计算根据中心节点顺时针旋转一定角度得到的下一个节点位置 */\r\n    var rootLoc = root.location.copy();\r\n    var curLoc = node.location.copy();\r\n    var relativeLoc = new go.Point(curLoc.x - rootLoc.x, curLoc.y - rootLoc.y);\r\n    var rootPoint = new go.Point(0, 0);\r\n    var depth = 20;\r\n\r\n    if (node.data.next) { // 如果存在下一个节点，则新节点位于当前节点和下一个节点之间，稍微偏差一点\r\n        var nextNode = node.diagram.findNodeForKey(node.data.next);\r\n        var nextLoc = nextNode.location.copy();\r\n        var relativeNextLoc = new go.Point(nextLoc.x - rootLoc.x, nextLoc.y - rootLoc.y);\r\n\r\n        var relativeMidLoc = new go.Point((relativeLoc.x + relativeNextLoc.x) / 2, (relativeLoc.y + relativeNextLoc.y) / 2);\r\n        var angle = rootPoint.directionPoint(relativeMidLoc) - rootPoint.directionPoint(relativeLoc);\r\n        relativeMidLoc = relativeLoc.rotate(angle);\r\n        var offset = computeOffset(depth, rootPoint.directionPoint(relativeMidLoc));\r\n        relativeMidLoc.offset(offset[0], offset[1]);\r\n        var midLoc = new go.Point(relativeMidLoc.x + rootLoc.x, relativeMidLoc.y + rootLoc.y);\r\n        return midLoc;\r\n    }\r\n\r\n    //角度由前一个节点和当前节点一致\r\n    if (node.data.prev && node.diagram.findNodeForKey(node.data.prev)) {\r\n        var prevLoc = node.diagram.findNodeForKey(node.data.prev).location.copy();\r\n        var relativeLocPrev = new go.Point(prevLoc.x - rootLoc.x, prevLoc.y - rootLoc.y);\r\n        var angle = rootPoint.directionPoint(relativeLoc) - rootPoint.directionPoint(relativeLocPrev);\r\n        console.log('angle:' + angle);\r\n        if (angle > 45) {\r\n            angle = 45;\r\n        }\r\n    } else {\r\n        var angle = 60;\r\n    }\r\n    var lastLoc = relativeLoc.rotate(angle);\r\n    var offset = computeOffset(depth, rootPoint.directionPoint(lastLoc));\r\n    lastLoc.offset(offset[0], offset[1]);\r\n    lastLoc = new go.Point(lastLoc.x + rootLoc.x, lastLoc.y + rootLoc.y);\r\n    return lastLoc;\r\n}\r\n\r\nfunction computeOffset(newR, newStartAngle) {\r\n    //console.log(\"newStartAngle:\"+newStartAngle);\r\n    var ctl2, dy, dx; //需要调整\r\n    if (newStartAngle >= 0 && newStartAngle <= 90) {\r\n        dy = newR * Math.sin(newStartAngle * Math.PI / 180);\r\n        dx = newR * Math.cos(newStartAngle * Math.PI / 180);\r\n        return [dx, dy];\r\n    } else if (newStartAngle > 90 && newStartAngle <= 180) {\r\n        dy = newR * Math.sin((180 - newStartAngle) * Math.PI / 180);\r\n        dx = newR * Math.cos((180 - newStartAngle) * Math.PI / 180);\r\n        return [-dx, dy];\r\n    } else if (newStartAngle > 180 && newStartAngle <= 270) {\r\n        dy = newR * Math.sin((newStartAngle - 180) * Math.PI / 180);\r\n        dx = newR * Math.cos((newStartAngle - 180) * Math.PI / 180);\r\n        return [-dx, -dy];\r\n    } else if (newStartAngle > 270 && newStartAngle <= 360) {\r\n        dy = newR * Math.sin((360 - newStartAngle) * Math.PI / 180);\r\n        dx = newR * Math.cos((360 - newStartAngle) * Math.PI / 180);\r\n        return [dx, -dy];\r\n    }\r\n}\r\n\r\nfunction pushChildKeyToArr(data, arr, node) {\r\n    var myDiagram = node.diagram;\r\n    if (data.next) {\r\n        var obj = myDiagram.model.findNodeDataForKey(data.next);\r\n        arr.push(obj);\r\n        return pushChildKeyToArr(obj, arr, node);\r\n    } else {\r\n        return arr;\r\n    }\r\n}\r\n\r\n\r\nTrtd.go = go;\r\n\r\n// if (typeof window !== 'undefined') {\r\n// \tif(window.Trtd){\r\n//         window.Trtd.dipan = Trtd;\r\n//     } else{\r\n//         window.Trtd = {\r\n//             dipan: Trtd\r\n//         }\r\n//     }\r\n// }\r\n\r\nmodule.exports = Trtd;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/diagram/tianpan.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"http://static.365trtd.com/hardcore/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 13);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 3be55b3873a9b188dcca","// 'use strict';\n\n// var helpers = require('./helpers.core');\n// import buckets from '../assets/buckets.min'\n/**\n * @namespace Chart.helpers.canvas\n */\nvar exports = module.exports = {\n\n\tcheckPhone(){\n\t\t\tif(!navigator) return true;\n\t\t\tif ((navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i))) {\n\t\t\t\t/*window.location.href=\"你的手机版地址\";*/\n\t\t\t\treturn true\n\t\t\t}\n\t\t\telse {\n\t\t\t\t/*window.location.href=\"你的电脑版地址\";    */\n\t\t\t\treturn false\n\t\t\t}\n\t},\n\n\tguid() {\n\t\tfunction S4() {\n\t\t\treturn (((1+Math.random())*0x10000)|0).toString(16).substring(1);\n\t\t}\n\t\treturn (S4()+S4()+\"-\"+S4()+\"-\"+S4()+\"-\"+S4()+\"-\"+S4()+S4()+S4());\n\t},\n\n\tgetElementByAttr(document, tag,attr,value)\n\t{\n\t\tvar aElements=document.getElementsByTagName(tag);\n\t\tvar aEle=[];\n\t\tfor(var i=0;i<aElements.length;i++)\n\t\t{\n\t\t\tif(aElements[i].getAttribute(attr)==value)\n\t\t\t\taEle.push( aElements[i] );\n\t\t}\n\t\treturn aEle;\n\t},\n\t// extend: function(target) {\n\t// \tvar setFn = function(value, key) {\n\t// \t\ttarget[key] = value;\n\t// \t};\n\t// \tfor (var i = 1, ilen = arguments.length; i < ilen; ++i) {\n\t// \t\thelpers.each(arguments[i], setFn);\n\t// \t}\n\t// \treturn target;\n\t// },\n\n\t/**\n\t * Clears the entire canvas associated to the given `chart`.\n\t * @param {Chart} chart - The chart for which to clear the canvas.\n\t */\n\tclear: function(chart) {\n\t\tchart.ctx.clearRect(0, 0, chart.width, chart.height);\n\t},\n\tnodeInfo: function(d) {  // Tooltip info for a node data object\n\t\tvar str = \"Node \" + d.key + \": \" + d.text + \"\\n\";\n\t\tif (d.group)\n\t\t  str += \"member of \" + d.group;\n\t\telse\n\t\t  str += \"top-level node\";\n\t\treturn str;\n\t},\n\tlinkInfo: function(d) {  // Tooltip info for a link data object\n\t\treturn \"Link:\\nfrom \" + d.from + \" to \" + d.to;\n\t},\n\tgroupInfo: function(adornment) {  // takes the tooltip or context menu, not a group node data object\n\t\tvar g = adornment.adornedPart;  // get the Group that the tooltip adorns\n\t\tvar mems = g.memberParts.count;\n\t\tvar links = 0;\n\t\tg.memberParts.each(function(part) {\n\t\t\tif (part instanceof go.Link) links++;\n\t\t});\n\t\treturn \"Group \" + g.data.key + \": \" + g.data.text + \"\\n\" + mems + \" members including \" + links + \" links\";\n\t},\n\tqueue: function(){\n\t\tthis.data = [];\n\t\tthis.enqueue = function(record) {\n\t\t\tthis.data.unshift(record);\n\t\t  }\n\t\tthis.dequeue = function() {\n\t\t\tthis.data.pop();\n\t\t}\n\t},\n\t// buckets: buckets,\n\t\t//遍历天地盘做指定操作,colletor=[] 广度优先\n\t\ttdTravelTdpDataWidth: function(nodeData, model, collector, callback) {\n\t\t\t\n\t\t\tvar queue = new exports.queue(); //队列数据结构，辅助用\n\t\t\tconsole.log(\"queue:\",queue)\n\t\t\tqueue.enqueue(nodeData);\n\n\t\t\tvar dealingNode = null;\n\t\t\twhile (!queue.isEmpty()) {\n\t\t\t\tdealingNode = queue.dequeue();\n\t\t\t\tcollector.push(callback(dealingNode));\n\t\t\t\t//1 处理同级节点\n\t\t\t\tif (dealingNode.isparent) {\n\t\t\t\t\tvar childNodeData = model.findNodeDataForKey(dealingNode.isparent);\n\t\t\t\t\tif (childNodeData) {\n\t\t\t\t\t\tqueue.enqueue(childNodeData);\n\t\t\t\t\t\twhile (childNodeData.next && childNodeData.next != childNodeData.key) { //加入所有子节点\n\t\t\t\t\t\t\tchildNodeData = model.findNodeDataForKey(childNodeData.next);\n\t\t\t\t\t\t\tif (childNodeData) {\n\t\t\t\t\t\t\t\tqueue.enqueue(childNodeData);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t}\n\t\t},\n\n\t\t//遍历天地盘做指定操作,colletor=[]  深度优先\n\t\ttdTravelTdpData: function(nodeData, model, collector, callback) {\n\t\t\tif (nodeData) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\t\tcollector.push(callback(nodeData));\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\tconsole.log(e);\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t} else {\n\t\t\t\t\treturn;\n\t\t\t}\n\t\t\t//1 先处理子节点\n\t\t\tif (nodeData.isparent) {\n\t\t\t\t\tvar childNodeData = model.findNodeDataForKey(nodeData.isparent);\n\t\t\t\t\texports.tdTravelTdpData(childNodeData, model, collector, callback);\n\t\t\t}\n\t\t\t//2 再处理兄弟节点\n\t\t\tif (nodeData.next && nodeData.next != nodeData.key) { //处理异常情况\n\t\t\t\t\tvar nextNodeData = model.findNodeDataForKey(nodeData.next);\n\t\t\t\t\texports.tdTravelTdpData(nextNodeData, model, collector, callback);\n\t\t\t}\n\t\t},\n\t\tdeleteOldData(time){\n\t\t\tvar  temp, diff;\n\t\t\tfor(var item in window.localStorage) {\n\t\t\t\tif(window.localStorage.hasOwnProperty(item)) {\n\t\t\t\t\t// size += window.localStorage.getItem(item).length;\n\t\t\t\t\tif(item.startsWith(\"TDCurrent\")){\n\t\t\t\t\t\ttry{\n\t\t\t\t\t\t\ttemp = JSON.parse(window.localStorage.getItem(item))\n\t\t\t\t\t\t\tdiff =  new Date().getTime() - temp.modelData.updatedAt;\n\t\t\t\t\t\t\tif(diff/1000 > 86400*time){\n\t\t\t\t\t\t\t\tconsole.log(\"delete old data:\"+item)\n\t\t\t\t\t\t\t\twindow.localStorage.removeItem(item)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}catch(e){\n\t\t\t\t\t\t\tconsole.error(e)\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tsaveModelToLocalStorage(tpid, model){\n\t\t\tconsole.log(\"存储model到localStorage，只保留最近三天的\")\n\t\t\tmodel.modelData.updatedAt = new Date().getTime()\n\t\t\tif(!window.localStorage) {\n\t\t\t\tconsole.error('浏览器不支持localStorage');\n\t\t\t\treturn;\n\t\t\t}\t\t\n\t\t\t// 只保留最近一周内的盘\n\t\t\texports.deleteOldData(3)\n\t\t\ttry{\n\t\t\t\twindow.localStorage.setItem(\"TDCurrent\" + tpid, model.toJson());\n\t\t\t}catch(e){\n\t\t\t\texports.deleteOldData(1)\n\t\t\t\t// window.localStorage.clear()\n\t\t\t}\n\t\t},\n\n\t\t// 检查gojs model数据关系是否正确\n\t\tcheckModel: function(model){\n\t\t\tvar nodeDataArray = model.nodeDataArray\n\t\t\tvar root = model.findNodeDataForKey(1)\n\t\t\tvar collectior = []\n\t\t\tfunction checkDataExists(key){\n\t\t\t\tvar data = model.findNodeDataForKey(key)\n\t\t\t\tif(data){\n\t\t\t\t\treturn \"exist\"\n\t\t\t\t}else{\n\t\t\t\t\treturn \"not exist\"\n\t\t\t\t}\n\t\t\t}\n\t\t\texports.tdTravelTdpData(root, model, collectior, function(data){\n\t\t\t\t\n\t\t\t\tvar msg = `check key:${data.key},level:${data.level},parent:${data.parent},`+\n\t\t\t\t`isparent:${data.isparent},prev:${data.prev},next:${data.next}`\n\t\t\t\tif(data.next && checkDataExists(data.next) == \"not exist\"){\n\t\t\t\t\tconsole.error(`data ${data.key} next指向的节点不存在, data: ${msg}`)\n\t\t\t\t}\n\t\t\t\tif(data.isparent && checkDataExists(data.isparent) == \"not exist\"){\n\t\t\t\t\tconsole.error(`data ${data.key} isparent指向的节点不存在, data: ${msg}`)\n\t\t\t\t}\n\t\t\t\tif(data.parent && checkDataExists(data.parent) == \"not exist\"){\n\t\t\t\t\tconsole.error(`data ${data.key} parent指向的节点不存在, data: ${msg}`)\n\t\t\t\t}\n\t\t\t\tif(data.prev && checkDataExists(data.prev) == \"not exist\"){\n\t\t\t\t\tconsole.error(`data ${data.key} prev指向的节点不存在, data: ${msg}`)\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\t// 数值转换\n\t\ttdTransToNum(from, defaultVal) {\n\t\t\tif(arguments.length <= 1){\n\t\t\t\tdefaultVal = 0\n\t\t\t}\n\t\t\tvar result = defaultVal;\n\t\t\ttry {\n\t\t\t\tresult = parseFloat(from);\n\t\t\t\treturn result;\n\t\t\t} catch (e) {\n\t\t\t\treturn result;\n\t\t\t}\n\t\t\t},\t\n\t\tsimulateEnterWithAlt(e) { //模拟alt+Enter键盘,将gojs内置文本编辑窗口中的Alt+Enter 转换为\\n\n\t\t\tvar myDiagram = e.diagram;\n\t\t\tif (myDiagram.currentTool.currentTextEditor) {\n\t\t\t\t// jQuery(myDiagram.currentTool.currentTextEditor).unbind(\"keypress\", myDiagram.currentTool.currentTextEditor);\n\t\t\t\t// jQuery(myDiagram.currentTool.currentTextEditor).keypress(textEditorHandler);\n\t\t\t\tmyDiagram.currentTool.currentTextEditor.mainElement.onkeypress = null;\n\t\t\t\tmyDiagram.currentTool.currentTextEditor.mainElement.onkeypress = textEditorHandler;\n\t\t\t\tvar val = myDiagram.currentTool.currentTextEditor.mainElement.value\n\t\t\t\t// 只在手机端定位到结尾\n\t\t\t\tif(module.exports.checkPhone()){\n\t\t\t\t\tmyDiagram.currentTool.currentTextEditor.mainElement.selectionStart = val.length; \n\t\t\t\t\tmyDiagram.currentTool.currentTextEditor.mainElement.selectionEnd = val.length; \n\t\t\t\t}\n\t\t\t\tfunction textEditorHandler(e) {\n\t\t\t\t\tvar evt = e;\n\t\t\t\t\tconsole.log('textblock catched the key:' + evt);\n\t\t\t\t\tif (evt.which) {\n\t\t\t\t\t\tif (evt.keyCode == 13 && evt.altKey || evt.keyCode == 10 && evt.ctrlKey || evt.keyCode == 13 && evt.shiftKey || evt.keyCode == 10 && evt.shiftKey) {\n\t\t\t\t\t\t\tvar start = this.selectionStart,\n\t\t\t\t\t\t\t\tend = this.selectionEnd,\n\t\t\t\t\t\t\t\tval = this.value;\n\t\t\t\t\t\t\tthis.value = val.slice(0, start) + \"\\n\" + val.slice(end);\n\t\t\t\t\n\t\t\t\t\t\t\t// Move the caret\n\t\t\t\t\t\t\tthis.selectionStart = this.selectionEnd = start + 1;\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\n\t\t\t\t\tif (evt.keyCode == 13 && !evt.altKey) {\n\t\t\t\t\n\t\t\t\t\t\tif (myDiagram.currentTool.isActive) {\n\t\t\t\t\t\t\tmyDiagram.currentTool.acceptText(go.TextEditingTool.LostFocus);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn false; //阻止默认行为\n\t\t\t\t\t}\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t/***\n * travel nodes, group and links\n * @param rootnode go.Node\n * @param callback function(part){}\n */\ntravelParts(rootNode, callback) {\n    var diagram = rootNode.diagram;\n    callback(rootNode);\n    var group = rootNode.containingGroup;\n    if (group && group.data.parent == rootNode.data.key) {\n        callback(group);\n    }\n    var stack = [rootNode];\n    var node, link, child, nextChild;\n    while (stack.length > 0) {\n        node = stack.pop();\n        if (node.data.isparent) {\n            child = diagram.findNodeForKey(node.data.isparent);\n            link = node.findLinksTo(child).first();\n            callback(link);\n            callback(child);\n            group = child.containingGroup;\n            if (group && group.data.parent == child.data.key) {\n                callback(group);\n            }\n            stack.push(child);\n            while (child.data.next) {\n                nextChild = diagram.findNodeForKey(child.data.next);\n                link = child.findLinksTo(nextChild).first();\n                callback(link);\n                callback(nextChild);\n                group = nextChild.containingGroup;\n                if (group && group.data.parent == nextChild.data.key) {\n                    callback(group);\n                }\n                stack.push(nextChild);\n                child = nextChild;\n            }\n        }\n    }\n}\n\n\t\t\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/helpers/helpers.gojs.js","var $ = go.GraphObject.make;\r\nconsole.info(\"gggggggggggggggggggggggg\")\r\ngo.GraphObject.defineBuilder('CircleButton', function (args) {\r\n    // default colors for 'Button' shape\r\n    var buttonFillNormal = '#F5F5F5';\r\n    var buttonStrokeNormal = '#BDBDBD';\r\n    var buttonFillOver = '#E0E0E0';\r\n    var buttonStrokeOver = '#9E9E9E';\r\n    var buttonFillPressed = '#BDBDBD'; // set to null for no button pressed effects\r\n    var buttonStrokePressed = '#9E9E9E';\r\n    var buttonFillDisabled = '#E5E5E5';\r\n  \r\n    // padding inside the ButtonBorder to match sizing from previous versions\r\n    var paddingHorizontal = 2.76142374915397;\r\n    var paddingVertical = 2.761423749153969;\r\n  \r\n    var button = (\r\n      go.GraphObject.make(go.Panel, 'Auto',\r\n        {\r\n          isActionable: true,  // needed so that the ActionTool intercepts mouse events\r\n          enabledChanged: function (btn, enabled) {\r\n            var shape = btn.findObject('ButtonBorder');\r\n            if (shape !== null) {\r\n              shape.fill = enabled ? btn['_buttonFillNormal'] : btn['_buttonFillDisabled'];\r\n            }\r\n          },\r\n          cursor: 'pointer',\r\n          // save these values for the mouseEnter and mouseLeave event handlers\r\n          '_buttonFillNormal': buttonFillNormal,\r\n          '_buttonStrokeNormal': buttonStrokeNormal,\r\n          '_buttonFillOver': buttonFillOver,\r\n          '_buttonStrokeOver': buttonStrokeOver,\r\n          '_buttonFillPressed': buttonFillPressed,\r\n          '_buttonStrokePressed': buttonStrokePressed,\r\n          '_buttonFillDisabled': buttonFillDisabled\r\n        },\r\n        go.GraphObject.make(go.Shape,  // the border\r\n          {\r\n            name: 'ButtonBorder',\r\n            figure: 'Circle',\r\n            spot1: new go.Spot(0, 0, paddingHorizontal, paddingVertical),\r\n            spot2: new go.Spot(1, 1, -paddingHorizontal, -paddingVertical),\r\n            parameter1: 2,\r\n            parameter2: 2,\r\n            fill: buttonFillNormal,\r\n            stroke: buttonStrokeNormal\r\n          }\r\n        )\r\n      )\r\n    );\r\n  \r\n    // There's no GraphObject inside the button shape -- it must be added as part of the button definition.\r\n    // This way the object could be a TextBlock or a Shape or a Picture or arbitrarily complex Panel.\r\n  \r\n    // mouse-over behavior\r\n    button.mouseEnter = function (e, btn, prev) {\r\n      if (!btn.isEnabledObject()) return;\r\n      var shape = btn.findObject('ButtonBorder');  // the border Shape\r\n      if (shape instanceof go.Shape) {\r\n        var brush = btn['_buttonFillOver'];\r\n        btn['_buttonFillNormal'] = shape.fill;\r\n        shape.fill = brush;\r\n        brush = btn['_buttonStrokeOver'];\r\n        btn['_buttonStrokeNormal'] = shape.stroke;\r\n        shape.stroke = brush;\r\n      }\r\n    };\r\n  \r\n    button.mouseLeave = function (e, btn, prev) {\r\n      if (!btn.isEnabledObject()) return;\r\n      var shape = btn.findObject('ButtonBorder');  // the border Shape\r\n      if (shape instanceof go.Shape) {\r\n        shape.fill = btn['_buttonFillNormal'];\r\n        shape.stroke = btn['_buttonStrokeNormal'];\r\n      }\r\n    };\r\n  \r\n    // mousedown/mouseup behavior\r\n    button.actionDown = function (e, btn) {\r\n      if (!btn.isEnabledObject()) return;\r\n      if (btn['_buttonFillPressed'] === null) return;\r\n      if (e.button !== 0) return;\r\n      var shape = btn.findObject('ButtonBorder');  // the border Shape\r\n      if (shape instanceof go.Shape) {\r\n        var diagram = e.diagram;\r\n        var oldskip = diagram.skipsUndoManager;\r\n        diagram.skipsUndoManager = true;\r\n        var brush = btn['_buttonFillPressed'];\r\n        btn['_buttonFillOver'] = shape.fill;\r\n        shape.fill = brush;\r\n        brush = btn['_buttonStrokePressed'];\r\n        btn['_buttonStrokeOver'] = shape.stroke;\r\n        shape.stroke = brush;\r\n        diagram.skipsUndoManager = oldskip;\r\n      }\r\n    };\r\n  \r\n    button.actionUp = function (e, btn) {\r\n      if (!btn.isEnabledObject()) return;\r\n      if (btn['_buttonFillPressed'] === null) return;\r\n      if (e.button !== 0) return;\r\n      var shape = btn.findObject('ButtonBorder');  // the border Shape\r\n      if (shape instanceof go.Shape) {\r\n        var diagram = e.diagram;\r\n        var oldskip = diagram.skipsUndoManager;\r\n        diagram.skipsUndoManager = true;\r\n        if (overButton(e, btn)) {\r\n          shape.fill = btn['_buttonFillOver'];\r\n          shape.stroke = btn['_buttonStrokeOver'];\r\n        } else {\r\n          shape.fill = btn['_buttonFillNormal'];\r\n          shape.stroke = btn['_buttonStrokeNormal'];\r\n        }\r\n        diagram.skipsUndoManager = oldskip;\r\n      }\r\n    };\r\n  \r\n    button.actionCancel = function (e, btn) {\r\n      if (!btn.isEnabledObject()) return;\r\n      if (btn['_buttonFillPressed'] === null) return;\r\n      var shape = btn.findObject('ButtonBorder');  // the border Shape\r\n      if (shape instanceof go.Shape) {\r\n        var diagram = e.diagram;\r\n        var oldskip = diagram.skipsUndoManager;\r\n        diagram.skipsUndoManager = true;\r\n        if (overButton(e, btn)) {\r\n          shape.fill = btn['_buttonFillOver'];\r\n          shape.stroke = btn['_buttonStrokeOver'];\r\n        } else {\r\n          shape.fill = btn['_buttonFillNormal'];\r\n          shape.stroke = btn['_buttonStrokeNormal'];\r\n        }\r\n        diagram.skipsUndoManager = oldskip;\r\n      }\r\n    };\r\n  \r\n    button.actionMove = function (e, btn) {\r\n      if (!btn.isEnabledObject()) return;\r\n      if (btn['_buttonFillPressed'] === null) return;\r\n      var diagram = e.diagram;\r\n      if (diagram.firstInput.button !== 0) return;\r\n      diagram.currentTool.standardMouseOver();\r\n      if (overButton(e, btn)) {\r\n        var shape = btn.findObject('ButtonBorder');\r\n        if (shape instanceof go.Shape) {\r\n          var oldskip = diagram.skipsUndoManager;\r\n          diagram.skipsUndoManager = true;\r\n          var brush = btn['_buttonFillPressed'];\r\n          if (shape.fill !== brush) shape.fill = brush;\r\n          brush = btn['_buttonStrokePressed'];\r\n          if (shape.stroke !== brush) shape.stroke = brush;\r\n          diagram.skipsUndoManager = oldskip;\r\n        }\r\n      }\r\n    };\r\n  \r\n    function overButton(e, btn) {\r\n      var over = e.diagram.findObjectAt(\r\n        e.documentPoint,\r\n        function (x) {\r\n          while (x.panel !== null) {\r\n            if (x.isActionable) return x;\r\n            x = x.panel;\r\n          }\r\n          return x;\r\n        },\r\n        function (x) { return x === btn; }\r\n      );\r\n      return over !== null;\r\n    }\r\n  \r\n    return button;\r\n  });\r\n  \r\nclass NodeBase {\r\n    constructor(options){\r\n        var that = this\r\n        this.diagram = options.diagram\r\n        this.nodeProperties = this.getNodeProperties()\r\n        this.binding = this.getBinding()\r\n        // this.nodeTemplate = this.getNodeTemplate()\r\n    }\r\n\r\n    getTooTip() {\r\n      var that = this;\r\n      return $(\r\n        \"ToolTip\",\r\n        { \"Border.fill\": \"whitesmoke\", \"Border.stroke\": \"black\" },\r\n        new go.Binding(\"visible\", \"\", function(obj) {\r\n          console.log(\"ToolTipToolTipToolTip\");\r\n          return obj.remark != null;\r\n        }),\r\n        $(\r\n          go.TextBlock,\r\n          {\r\n            maxSize: new go.Size(400, NaN),\r\n  \r\n            font: \"24px bold\",\r\n            wrap: go.TextBlock.WrapFit,\r\n            margin: 5\r\n          },\r\n  \r\n          new go.Binding(\"text\", \"\", function(obj) {\r\n           \r\n            return obj.remark || \"\";\r\n          })\r\n        )\r\n      );\r\n    }\r\n\r\n    getNodeProperties(){\r\n        var that = this\r\n        var diagram = this.diagram\r\n        var properties = {\r\n            // type: go.Panel.Auto,\r\n            // \"_controlExpand\": true,\r\n            // layerName: \"default\",\r\n            // locationSpot: go.Spot.Center,\r\n            // resizeCellSize: new go.Size(10, 10),\r\n            // // locationObjectName: \"SHAPE\",\r\n            // resizable: true,\r\n            // // resizeObjectName: \"SHAPE\", // user can resize the Shape\r\n            // rotatable: false,\r\n            // location: new go.Point(0, 0),\r\n            // click: that.click,\r\n            // //rotateObjectName: \"SHAPE\",  // rotate the Shape without rotating the label\r\n            // doubleClick: that.doubleClick,\r\n            // toMaxLinks: 1,\r\n            // layoutConditions: go.Part.LayoutStandard,\r\n            // //layoutConditions:~go.Part.LayoutAdded,\r\n            // // fromLinkable: true, toLinkable: true,\r\n            // alignment: go.Spot.Center,\r\n            // alignmentFocus: go.Spot.Center,\r\n            // resizeAdornmentTemplate: diagram.__trtd.nodeResizeAdornmentTemplate(),\r\n            // // contextMenu: $(go.Adornment),\r\n            // contextMenu: $(go.Adornment),\r\n            // selectionAdornmentTemplate: diagram.__trtd.getNodeSelectionAdornmentTemplate(),\r\n            // mouseOver: that.mouseOver,\r\n            // mouseLeave: that.mouseLeave,\r\n            // mouseDragEnter: that.mouseDragEnter,\r\n            // mouseDragLeave: that.mouseDragLeave,\r\n            // mouseDrop: that.mouseDrop\r\n        }\r\n        return properties\r\n    }\r\n\r\n    getNodeSelectionAdornmentTemplate(){\r\n      return  $(go.Adornment, \"Auto\",\r\n          $(go.Shape, \"Rectangle\",\r\n          // { fill: null, stroke: \"#9aa8b6\", strokeWidth: 1 }),\r\n          { fill: null, stroke: \"dodgerblue\", strokeWidth: 3 }),\r\n          $(go.Placeholder)\r\n        )  // end Adornment\r\n    }\r\n\r\n    getBinding(){\r\n        return [\r\n            new go.Binding(\"location\", \"loc\", go.Point.parse).makeTwoWay(go.Point.stringify),\r\n            new go.Binding(\"movable\", \"movable\").makeTwoWay(),\r\n            new go.Binding(\"isShadowed\", \"isShadowed\").makeTwoWay(),\r\n            new go.Binding(\"selectable\", \"selectable\").makeTwoWay(),\r\n            new go.Binding(\"angle\", \"angle\").makeTwoWay(),\r\n            new go.Binding(\"copyable\", \"copyable\").makeTwoWay(),\r\n        ]\r\n    }\r\n    getTextBuild(){\r\n        return $(go.TextBlock, {\r\n                name: \"TEXT\",\r\n                alignment: new go.Spot(0.5, 0.4),\r\n                font: \"bold 18px 幼圆\",\r\n                editable: true,\r\n                // flip:go.GraphObject.FlipHorizontal,\r\n                //margin: 3, editable: true,\r\n                stroke: \"black\",\r\n                isMultiline: true,\r\n                overflow: go.TextBlock.OverflowClip,\r\n                wrap: go.TextBlock.WrapDesiredSize,\r\n                textAlign: \"center\",\r\n                spacingAbove: 4,\r\n                spacingBelow: 4,\r\n                portId: \"TEXT\",\r\n                stretch: go.GraphObject.Uniform\r\n            },\r\n            new go.Binding(\"textAlign\", \"textAlign\", function(v) {\r\n                return ['start', 'center', 'end'].indexOf(v)>-1 ? v : \"center\";\r\n            }).makeTwoWay(),\r\n            new go.Binding(\"spacingAbove\", \"spacingline\", function(v) {\r\n                return helpers.tdTransToNum(v, 4);\r\n            }).makeTwoWay(),\r\n            new go.Binding(\"spacingBelow\", \"spacingline\", function(v) {\r\n                return helpers.tdTransToNum(v, 4);\r\n            }).makeTwoWay(),\r\n            new go.Binding(\"width\", \"width\", function(v) {\r\n                return v-30;\r\n            }).ofObject(\"main\"),\r\n            // new go.Binding(\"height\", \"height\", function (v) {\r\n            //   return v;\r\n            // }).ofObject(\"SHAPE\"),\r\n            new go.Binding(\"text\", \"text\").makeTwoWay(),\r\n            new go.Binding(\"stroke\", \"textStroke\").makeTwoWay(),\r\n            new go.Binding(\"font\", \"font\").makeTwoWay()\r\n        )\r\n      }\r\n      \r\n    getNodeTemplate(){\r\n        console.log(\"NodeBase.getNodeTemplate\")\r\n        var that = this;\r\n        return $(go.Node, \r\n            that.nodeProperties,\r\n            that.binding\r\n        );\r\n    }\r\n\r\n    click(e, node){\r\n        // console.log(node.data)\r\n        if(node.diagram.__trtd.nodeClickListener){\r\n            node.diagram.__trtd.nodeClickListener(node)\r\n        }\r\n    }\r\n\r\n    doubleClick(e, node){\r\n        e.diagram.__trtd.selectText(e, node)\r\n    }\r\n\r\n    mouseOver(e, node) {\r\n        // if(node.data.hyperlink){\r\n        //   var textObj = node.findObject('TEXT');\r\n        //   textObj.isUnderline = true;\r\n        // }\r\n\r\n        e.diagram.__trtd.showNodeRemarkTips(e, node);\r\n\r\n    }\r\n\r\n    mouseLeave(e, node) {\r\n        // if(node.data.hyperlink) {\r\n        //   var textObj = node.findObject('TEXT');\r\n        //   textObj.isUnderline = false;\r\n        // }\r\n        e.diagram.__trtd.removeNodeRemarkTips();\r\n    }\r\n    mouseDragEnter(e, obj) {\r\n        var node = obj.part;\r\n        var selnode = e.diagram.selection.first();\r\n        if (!(selnode instanceof go.Node) || selnode.category == \"3\" || selnode.category == \"text\" || selnode.key == 1) {\r\n            return;\r\n        }\r\n        //var sat = node.selectionAdornmentTemplate;\r\n        //var adorn = sat.copy();\r\n        //adorn.adornedObject = node;\r\n        //node.addAdornment(\"dragEnter\", adorn);\r\n\r\n        //if (!mayWorkFor(selnode, node)) return;\r\n        var shape = node.findObject(\"SHAPE\");\r\n        if (shape) {\r\n            shape._prevFill = shape.fill; // remember the original brush\r\n            shape.fill = \"darkred\";\r\n        }\r\n\r\n    }\r\n    mouseDragLeave(e, obj) {\r\n        var node = obj.part;\r\n        var shape = node.findObject(\"SHAPE\");\r\n        if (shape && shape._prevFill) {\r\n            shape.fill = shape._prevFill; // restore the original brush\r\n        }\r\n        //node.removeAdornment(\"dragEnter\");\r\n    }\r\n    mouseDrop(e, obj) {\r\n        var node = obj.part;\r\n        var selnode = e.diagram.selection.first();\r\n        if (!(selnode instanceof go.Node) || selnode.data.category == \"3\" || selnode.data.category == \"text\" || selnode.data.key == 1) {\r\n            return;\r\n        }\r\n\r\n        if (node.data.isparent) {\r\n            var child = e.diagram.findNodeForKey(node.data.isparent);\r\n            while (child.data.next) {\r\n                child = e.diagram.findNodeForKey(child.data.next);\r\n            }\r\n            if (child.data.key == selnode.data.key) {\r\n                //最后一个子节点拖放到父节点上时，不做任何操作\r\n                return;\r\n            }\r\n            e.diagram.__trtd.setNodeAsSibling(selnode, child);\r\n        } else {\r\n            e.diagram.__trtd.setNodeAsChildren(selnode, node);\r\n        }\r\n    }\r\n}\r\n\r\nmodule.exports = NodeBase\n\n\n// WEBPACK FOOTER //\n// ./src/nodeTemplate/base.js","var $ = go.GraphObject.make;\r\n\r\nmodule.exports = // 返回图片天盘的独立节点模板\r\nfunction createPictureSingleNodeTemplate (diagram) {\r\n    // var $ = go.GraphObject.make;\r\n    var properties = {\r\n        figure: \"Circle\",\r\n        fill: \"white\",\r\n        strokeWidth: 1,\r\n        stroke: \"#767678\",\r\n        fontSize: 15,\r\n        font: \"sans-serif\"\r\n    };\r\n    return $(go.Node, \"Auto\", {\r\n        name: \"NODE\",\r\n        \"_controlExpand\": true,\r\n        layerName: \"Background\",\r\n        // layerName: \"Foreground\",\r\n        zOrder: 20,\r\n        locationSpot: go.Spot.Center,\r\n        resizeCellSize: new go.Size(10, 10),\r\n        locationObjectName: \"SHAPE\",\r\n        resizable: true,\r\n        resizeObjectName: \"SHAPE\", // user can resize the Shape\r\n        rotatable: true,\r\n        rotateObjectName: \"SHAPE\", // rotate the Shape without rotating the label\r\n        doubleClick: function (e, node) {\r\n            // interactions.selectText(e, node)\r\n            console.log(node.data)\r\n            if(node.diagram.__trtd.nodeDoubleClickListener){\r\n                node.diagram.__trtd.nodeDoubleClickListener(node)\r\n            }\r\n            \r\n        },\r\n        click: function(e, node) {\r\n            console.log(node.data)\r\n            if(node.diagram.__trtd.nodeClickListener){\r\n                node.diagram.__trtd.nodeClickListener(node)\r\n            }\r\n            // showNodeToolBar(e,node);\r\n        },\r\n        selectable: true,\r\n        movable: true,\r\n        angle: 0,\r\n        //toMaxLinks: 1,\r\n        layoutConditions: go.Part.LayoutStandard,\r\n        //layoutConditions:~go.Part.LayoutAdded,\r\n        // fromLinkable: true, toLinkable: true,\r\n        alignment: go.Spot.Center,\r\n        alignmentFocus: go.Spot.Center,\r\n        resizeAdornmentTemplate: diagram.__trtd.nodeResizeAdornmentTemplate(),\r\n        //rotateAdornmentTemplate: nodeRotateAdornmentTemplate,\r\n        contextMenu: diagram.__trtd.nodeContextMenu,\r\n        selectionAdornmentTemplate: function() {\r\n            var $ = go.GraphObject.make;\r\n            return $(go.Adornment, \"Spot\",\r\n                $(go.Panel, \"Auto\",\r\n                    $(go.Shape, { fill: null, stroke: \"blue\", strokeWidth: 1 }),\r\n                    $(go.Placeholder) // this represents the selected Node\r\n\r\n                ),\r\n                //$(\"TreeExpanderButton\",\r\n                $(go.Panel, \"Vertical\", {\r\n                        name: \"ButtonIcon1\",\r\n                        alignment: new go.Spot(0, 1, -20, 20),\r\n                        alignmentFocus: go.Spot.Center,\r\n                        width: 60,\r\n                        height: 60,\r\n                        isActionable: true,\r\n                        // click: interactions.expandCollapse // this function is defined below\r\n                    },\r\n\r\n                    $(go.Shape, \"Circle\", {\r\n                        fill: \"rgba(1,1,1,0)\",\r\n                        strokeWidth: 0,\r\n                        stroke: \"green\",\r\n                        width: 50,\r\n                        height: 50\r\n                    })\r\n\r\n                )\r\n            ); // end Adornment\r\n        }(),\r\n        contextMenu: function() {\r\n            var $ = go.GraphObject.make;\r\n            return $(go.Adornment, \"Vertical\",\r\n                $(\"ContextMenuButton\",\r\n                    $(go.TextBlock, \"删除\"), {\r\n                        click: function(e, obj) {\r\n                            e.diagram.commandHandler.deleteSelection();\r\n                        }\r\n                    }),\r\n                $(\"ContextMenuButton\",\r\n                    $(go.TextBlock, \"居中\"), {\r\n                        click: function(e, obj) {\r\n                            centerPicture();\r\n                        }\r\n                    }),\r\n                $(\"ContextMenuButton\",\r\n                    $(go.TextBlock, \"等宽高\"), {\r\n                        click: function(e, obj) {\r\n                            equalWidthHeightPicture();\r\n                        }\r\n                    }),\r\n                $(\"ContextMenuButton\",\r\n                    $(go.TextBlock, \"原始比例\", { stroke: \"gray\" }), {\r\n                        click: function(e, obj) {\r\n                            //equalWidthHeightPicture();\r\n                        }\r\n                    }),\r\n                $(\"ContextMenuButton\",\r\n                    $(go.TextBlock, \"至于顶层\"), {\r\n                        click: function(e, obj) {\r\n                            //bringToBackground();\r\n                            bringToLayer(\"Foreground\");\r\n                        }\r\n                    }),\r\n                $(\"ContextMenuButton\",\r\n                    $(go.TextBlock, \"至于底层\"), {\r\n                        click: function(e, obj) {\r\n                            bringToLayer(\"Background\");\r\n                        }\r\n                    }),\r\n                $(\"ContextMenuButton\",\r\n                    $(go.TextBlock, \"上移一层\"), {\r\n                        click: function(e, obj) {\r\n                            bringToLayer(null);\r\n                        }\r\n                    }),\r\n                $(\"ContextMenuButton\",\r\n                    $(go.TextBlock, \"固定\",\r\n                        new go.Binding(\"text\", \"\", function(d, obj) {\r\n                            var node = obj.part;\r\n                            return node.data.selectable != undefined ? (node.data.selectable ? \"固定\" : \"取消固定\") : \"固定\";\r\n                        })\r\n                    ), {\r\n                        name: \"fixnode\",\r\n                        click: function(e, obj) {\r\n                            var diagram = obj.diagram;\r\n                            var node = obj.part;\r\n                            diagram.startTransaction();\r\n                            //node.setProperties({\"movable\":node.data.movable?(!node.data.movable):true});\r\n                            diagram.model.setDataProperty(node.data, \"selectable\", node.data.selectable != undefined ? (!node.data.selectable) : false);\r\n                            diagram.commitTransaction();\r\n                        }\r\n                    }\r\n                )\r\n            );\r\n        }()},\r\n        new go.Binding(\"location\", \"loc\", go.Point.parse).makeTwoWay(go.Point.stringify),\r\n        new go.Binding(\"isShadowed\", \"isShadowed\").makeTwoWay(),\r\n        new go.Binding(\"selectable\", \"selectable\").makeTwoWay(),\r\n        new go.Binding(\"movable\", \"movable\").makeTwoWay(),\r\n        new go.Binding(\"layerName\", \"layerName\", function(v, d) {\r\n            return v ? v : \"\";\r\n        }).makeTwoWay(function(v) {\r\n            return v;\r\n        }),\r\n        $(go.TextBlock, // the text label\r\n            new go.Binding(\"text\", \"text\")),\r\n        $(go.Picture, // the icon showing the logo\r\n            // You should set the desiredSize (or width and height)\r\n            // whenever you know what size the Picture should be.\r\n            { name: \"SHAPE\" }, {\r\n                successFunction: function(pict, evt) {\r\n                    if ((!pict.width || !pict.height) && (!pict.part.data.width || !pict.part.data.height)) {\r\n                        pict.width = pict.element.width;\r\n                        pict.height = pict.element.height;\r\n                    }\r\n                }\r\n            }, {\r\n                sourceCrossOrigin: function(pict) {\r\n                    return \"\";\r\n                }\r\n            },\r\n            new go.Binding(\"source\", \"picture\", function(v){\r\n                    \r\n                return v+\"?\"+Date.now()\r\n\r\n            }).makeTwoWay(function(v){\r\n                if(v){\r\n                    v = v.replace(/\\?.*$/g,\"\")\r\n                    return v\r\n                }else{\r\n                    return \"\"\r\n                }\r\n            }),\r\n            new go.Binding(\"width\", \"width\", function(v, d) {\r\n                return v;\r\n            }).makeTwoWay(function(v) {\r\n                return v;\r\n            }),\r\n            new go.Binding(\"height\", \"height\", function(v, d) {\r\n                return v;\r\n            }).makeTwoWay(function(v) {\r\n                return v;\r\n            }),\r\n            new go.Binding(\"angle\", \"pictureangle\").makeTwoWay(),\r\n            new go.Binding(\"opacity\", \"opacity\", function(v, d) {\r\n                return v ? parseFloat(v) : 1;\r\n            }).makeTwoWay(function(v) {\r\n                return v;\r\n            })\r\n        )\r\n    );\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/nodeTemplate/createPictureSingleNodeTemplate.js","var $ = go.GraphObject.make;\r\n\r\nmodule.exports = function createTextNodeTemplate (diagram) {\r\n    var properties = {\r\n        figure: \"Rectangle\",\r\n        fill: \"rgba(0,0,0,0)\",\r\n        strokeWidth: 1,\r\n        stroke: \"rgba(0,0,0,0)\",\r\n        fontSize: 15,\r\n        font: \"sans-serif\"\r\n    };\r\n    return $(go.Node, \"Spot\", {\r\n            \"_controlExpand\": true,\r\n            layerName: \"Foreground\",\r\n            movable: true,\r\n            locationSpot: go.Spot.Center,\r\n            resizeCellSize: new go.Size(10, 10),\r\n            locationObjectName: \"SHAPE\",\r\n            resizable: true,\r\n            resizeObjectName: \"SHAPE\", // user can resize the Shape\r\n            rotatable: true,\r\n            location: new go.Point(0, 0),\r\n            //rotateObjectName: \"SHAPE\",  // rotate the Shape without rotating the label\r\n            // doubleClick: selectText,\r\n            toMaxLinks: 1,\r\n            layoutConditions: go.Part.LayoutStandard,\r\n            //layoutConditions:~go.Part.LayoutAdded,\r\n            // fromLinkable: true, toLinkable: true,\r\n            alignment: go.Spot.Center,\r\n            alignmentFocus: go.Spot.Center,\r\n            contextMenu: $(go.Adornment),\r\n            doubleClick: function (e, node){\r\n                e.diagram.__trtd.selectText(e, node)\r\n            }\r\n\r\n            // selectionAdornmentTemplate: nodeSelectionAdornmentTemplate,\r\n        },\r\n        new go.Binding(\"locationSpot\", \"locationSpot\", function(v){\r\n            console.log(\"locationSpot1\")\r\n            return go.Spot.parse(v)\r\n        }).makeTwoWay(function(v){\r\n            console.log(\"locationSpot2\")\r\n            return go.Spot.stringify(v)\r\n        }),\r\n        new go.Binding(\"deletable\", \"deletable\").makeTwoWay(),\r\n        new go.Binding(\"movable\", \"movable\").makeTwoWay(),\r\n        new go.Binding(\"location\", \"loc\", go.Point.parse).makeTwoWay(go.Point.stringify),\r\n        new go.Binding(\"isShadowed\", \"isShadowed\").makeTwoWay(),\r\n        new go.Binding(\"angle\", \"angle\").makeTwoWay(),\r\n        new go.Binding(\"selectable\", \"selectable\").makeTwoWay(),\r\n        new go.Binding(\"layerName\", \"layerName\", function(v, d) {\r\n            return v ? v : \"\";\r\n        }).makeTwoWay(function(v) {\r\n            return v;\r\n        }),\r\n        $(go.Shape, {\r\n                strokeDashArray: null,\r\n                // strokeDashOffset:10,\r\n                name: \"SHAPE\",\r\n                figure: \"Rectangle\",\r\n                fill: \"rgba(0,0,0,0)\",\r\n                fromLinkable: true,\r\n                toLinkable: true,\r\n                cursor: \"pointer\",\r\n                minSize: new go.Size(50, 50),\r\n                strokeWidth: 2,\r\n                stroke: \"rgba(0,0,0,0)\",\r\n                portId: \"\",\r\n                width:150\r\n            },\r\n            new go.Binding(\"strokeDashArray\", \"strokeDashArray\", function(v) {\r\n                return [v.split()[0], v.split()[1]];\r\n            }).makeTwoWay(function(v) {\r\n                return v[0] + \" \" + v[1];\r\n            }), //保留，设置边线样式\r\n            new go.Binding(\"fill\", \"fill\", function(v, obj) {\r\n                return v instanceof go.Brush ? v.color : v;\r\n            }).makeTwoWay(),\r\n            // new go.Binding(\"fill\", \"isSelected\", function(s, obj) { return s ? \"red\" : obj.part.data.color; }).ofObject()),\r\n            new go.Binding(\"width\", \"width\", function(v) {\r\n                //alert(v);\r\n                return v;\r\n            }).makeTwoWay(function(v) {\r\n                return v;\r\n            }),\r\n            new go.Binding(\"height\", \"height\", function(v) {\r\n                //alert(v);\r\n                return v;\r\n            }).makeTwoWay(function(v) {\r\n                return v;\r\n            }),\r\n            new go.Binding(\"stroke\", \"stroke\", function(v) {\r\n                return v instanceof go.Brush ? v.stroke : v;\r\n            }).makeTwoWay(),\r\n            new go.Binding(\"strokeWidth\", \"strokeWidth\", function(d) {\r\n                return d;\r\n            }).makeTwoWay(function(d) {\r\n                return d;\r\n            }),\r\n            new go.Binding(\"figure\", \"figure\").makeTwoWay(), {\r\n                figure: properties.figure,\r\n                fill: properties.fill,\r\n                strokeWidth: properties.strokeWidth,\r\n                stroke: properties.stroke\r\n            }\r\n        ),\r\n        $(go.Shape, {\r\n                name: \"SHAPE_Back\",\r\n                figure: \"Rectangle\",\r\n                fill: \"rgba(0,0,0,0)\",\r\n                // fromLinkable: true,\r\n                // toLinkable: true,\r\n                strokeWidth: 0\r\n            },\r\n            new go.Binding(\"width\", \"width\", function(v) {\r\n                return v;\r\n            }).ofObject(\"SHAPE\"),\r\n            new go.Binding(\"height\", \"height\", function(v) {\r\n                return v;\r\n            }).ofObject(\"SHAPE\")\r\n        ),\r\n        $(go.TextBlock, {\r\n                name: \"TEXT\",\r\n                alignment: new go.Spot(0.5, 0.5),\r\n                font: \"bold 18px 幼圆\",\r\n                editable: true,\r\n                //margin: 3, editable: true,\r\n                stroke: \"black\",\r\n                isMultiline: true,\r\n                overflow: go.TextBlock.OverflowClip,\r\n                wrap: go.TextBlock.WrapDesiredSize,\r\n                textAlign: \"center\",\r\n                // verticalAlignment: go.Spot.Bottom,\r\n                spacingAbove: 4,\r\n                spacingBelow: 4,\r\n                portId: \"TEXT\",\r\n                stretch: go.GraphObject.Fill\r\n            },\r\n            new go.Binding(\"textAlign\", \"textAlign\", function(v) {\r\n                return _.contains(['start', 'center', 'end'], v) ? v : \"center\";\r\n            }).makeTwoWay(),\r\n            new go.Binding(\"spacingAbove\", \"spacingline\", function(v) {\r\n                return helpers.tdTransToNum(v, 4);\r\n            }).makeTwoWay(),\r\n            new go.Binding(\"spacingBelow\", \"spacingline\", function(v) {\r\n                return helpers.tdTransToNum(v, 4);\r\n            }).makeTwoWay(),\r\n            new go.Binding(\"width\", \"width\", function(v) {\r\n                return v;\r\n            }).ofObject(\"SHAPE\"),\r\n            // new go.Binding(\"height\", \"height\", function (v) {\r\n            //   return v;\r\n            // }).ofObject(\"SHAPE\"),\r\n            new go.Binding(\"text\", \"text\").makeTwoWay(),\r\n            new go.Binding(\"stroke\", \"textStroke\").makeTwoWay(),\r\n            new go.Binding(\"font\", \"font\").makeTwoWay()\r\n        )\r\n    );\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/nodeTemplate/createTextNodeTemplate.js","// 返回图片天盘节点模板\r\nvar $ = go.GraphObject.make;\r\n\r\nmodule.exports = function createPictureNodeTemplate (diagram) {\r\n    // var $ = go.GraphObject.make;\r\n\r\n    return $(go.Node, \"Auto\", {\r\n            \"_controlExpand\": true,\r\n            layerName: \"default\",\r\n            locationSpot: go.Spot.Center,\r\n            resizeCellSize: new go.Size(10, 10),\r\n            locationObjectName: \"SHAPE\",\r\n            resizable: true,\r\n            resizeObjectName: \"SHAPE\", // user can resize the Shape\r\n            rotatable: false,\r\n            //rotateObjectName: \"SHAPE\",  // rotate the Shape without rotating the label\r\n            doubleClick: function (e, node) {\r\n                interactions.selectText(e, node)\r\n            },\r\n            //toMaxLinks: 1,\r\n            layoutConditions: go.Part.LayoutStandard,\r\n            //layoutConditions:~go.Part.LayoutAdded,    \r\n            // fromLinkable: true, toLinkable: true,\r\n            alignment: go.Spot.Center,\r\n            alignmentFocus: go.Spot.Center,\r\n            resizeAdornmentTemplate: diagram.__trtd.nodeResizeAdornmentTemplate(),\r\n\r\n            contextMenu: $(go.Adornment),\r\n            selectionAdornmentTemplate: diagram.__trtd.getNodeSelectionAdornmentTemplate()\r\n        //layoutConditions: go.Part.LayoutStandard & ~go.Part.LayoutNodeSized & ~go.Part.LayoutAdded\r\n        },\r\n        new go.Binding(\"location\", \"loc\", go.Point.parse).makeTwoWay(go.Point.stringify),\r\n        new go.Binding(\"isShadowed\", \"isShadowed\").makeTwoWay(),\r\n        $(go.Panel, \"Spot\",\r\n            $(go.Picture, // the icon showing the logo\r\n                // You should set the desiredSize (or width and height)\r\n                // whenever you know what size the Picture should be.\r\n                { name: \"SHAPE\" }, {\r\n                    sourceCrossOrigin: function(pict) {\r\n                        return \"Anonymous\";\r\n                    }\r\n                },\r\n                new go.Binding(\"source\", \"picture\", function(v){\r\n                    \r\n                    return v+\"?\"+Date.now()\r\n\r\n                }).makeTwoWay(function(v){\r\n                    if(v){\r\n                        v = v.replace(/\\?.*$/g,\"\")\r\n                        return v\r\n                    }else{\r\n                        return \"\"\r\n                    }\r\n                }),\r\n                new go.Binding(\"width\", \"width\", function(v, d) {\r\n                    return v;\r\n                }).makeTwoWay(function(v) {\r\n                    return v;\r\n                }),\r\n                new go.Binding(\"height\", \"height\", function(v, d) {\r\n                    return v;\r\n                }).makeTwoWay(function(v) {\r\n                    return v;\r\n                })\r\n            ),\r\n            $(go.TextBlock, {\r\n                    name: \"TEXT\",\r\n                    alignment: new go.Spot(0.5, 0.5),\r\n                    font: \"bold 18px 幼圆\",\r\n                    //margin: 3, editable: true,\r\n                    stroke: \"black\",\r\n                    isMultiline: true,\r\n                    overflow: go.TextBlock.OverflowClip,\r\n                    wrap: go.TextBlock.WrapDesiredSize,\r\n                    textAlign: \"center\",\r\n                    spacingAbove: 4,\r\n                    spacingBelow: 4,\r\n                    portId: \"TEXT\",\r\n                    stretch: go.GraphObject.Fill\r\n                        //,width:100\r\n                },\r\n                new go.Binding(\"textAlign\", \"textAlign\", function(v) {\r\n                    return _.contains(['start', 'center', 'end'], v) ? v : \"center\";\r\n                }).makeTwoWay(),\r\n                new go.Binding(\"spacingAbove\", \"spacingline\", function(v) {\r\n                    return tdTransToNum(v, 4);\r\n                }).makeTwoWay(),\r\n                new go.Binding(\"spacingBelow\", \"spacingline\", function(v) {\r\n                    return tdTransToNum(v, 4);\r\n                }).makeTwoWay(),\r\n                //new go.Binding(\"width\",\"width\",function(v){return v/2 * Math.sqrt(2)+7;}).ofObject(\"SHAPE\"),\r\n                new go.Binding(\"maxSize\", \"width\", function(v) {\r\n                    var va = v / 2 * Math.sqrt(2);\r\n                    return new go.Size(va, va);\r\n                }).ofObject(\"SHAPE\"),\r\n                // new go.Binding(\"height\",\"width\",function(v){return v/2 * Math.sqrt(2);;}).ofObject(\"SHAPE\"),\r\n                new go.Binding(\"text\", \"text\").makeTwoWay(),\r\n                new go.Binding(\"stroke\", \"textStroke\").makeTwoWay(),\r\n                new go.Binding(\"font\", \"font\").makeTwoWay()\r\n            )\r\n        ), {\r\n            toolTip: $(go.Adornment, \"Auto\",\r\n                $(go.Shape, { fill: \"#FFFFCC\" }),\r\n                $(go.TextBlock, { margin: 4 }, // the tooltip shows the result of calling nodeInfo(data)\r\n                    new go.Binding(\"text\", \"\", function(d) {\r\n                        return d.text;\r\n                    })\r\n                )\r\n            )\r\n        }\r\n    );\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/nodeTemplate/createPictureNodeTemplate.js","var $ = go.GraphObject.make\r\nvar svg = require('../datas/svg.template');\r\n\r\n// 返回svg节点\r\nmodule.exports = function createNodeSvgTemplate (diagram) {\r\n    var properties = {\r\n        figure: \"Circle\",\r\n        fill: \"white\",\r\n        strokeWidth: 2,\r\n        stroke: \"black\",\r\n        fontSize: 15,\r\n        font: \"sans-serif\"\r\n    };\r\n    return $(go.Node, \"Spot\",{\r\n                name: \"NODE\",\r\n                \"_controlExpand\": true,\r\n                layerName: \"Background\",\r\n                locationSpot: go.Spot.Center,\r\n                resizeCellSize: new go.Size(10, 10),\r\n                locationObjectName: \"BACKGROUND\",\r\n                resizable: true,\r\n                resizeObjectName: \"BACKGROUND\", // user can resize the Shape\r\n                rotatable: true,\r\n                rotateObjectName: \"BACKGROUND\", // rotate the Shape without rotating the label\r\n                click: function(e, node){\r\n                    // console.log(node.data);\r\n                },\r\n                doubleClick: function (e, node) {\r\n                    doubleClickCreateNodeType(e);\r\n                },\r\n                selectable: true,\r\n                selectionObjectName:\"BACKGROUND\",\r\n                movable: true,\r\n                angle: 0,\r\n                //toMaxLinks: 1,\r\n                layoutConditions: go.Part.LayoutStandard,\r\n                //layoutConditions:~go.Part.LayoutAdded,\r\n                // fromLinkable: true, toLinkable: true,\r\n                alignment: go.Spot.Center,\r\n                alignmentFocus: go.Spot.Center,\r\n                resizeAdornmentTemplate: diagram.__trtd.nodeResizeAdornmentTemplate(),\r\n                // rotateAdornmentTemplate: nodeRotateAdornmentTemplate,\r\n                contextMenu: $(go.Adornment),\r\n                // contextMenu: $(go.Adornment),\r\n            },\r\n            new go.Binding(\"location\", \"loc\", go.Point.parse).makeTwoWay(go.Point.stringify),\r\n            new go.Binding(\"isShadowed\", \"isShadowed\").makeTwoWay(),\r\n            new go.Binding(\"selectable\", \"selectable\").makeTwoWay(),\r\n            new go.Binding(\"movable\", \"movable\").makeTwoWay(),\r\n            new go.Binding(\"deletable\", \"deletable\").makeTwoWay(),\r\n            $(go.Shape, {\r\n                name: \"SHAPE\",\r\n                geometryString: svg.threeWheel,\r\n                fill: \"black\",\r\n                strokeWidth: 5, \r\n                stroke: \"black\",\r\n                minSize: new go.Size(50, 50),\r\n                },\r\n                new go.Binding(\"fill\", \"fill\").makeTwoWay(function(v){\r\n                    return v;\r\n                }),\r\n                new go.Binding(\"stroke\", \"stroke\").makeTwoWay(function(v){\r\n                    return v;\r\n                }),\r\n                new go.Binding(\"strokeWidth\", \"strokeWidth\").makeTwoWay(function(v){\r\n                    return v;\r\n                }),\r\n                new go.Binding(\"desiredSize\", \"desiredSize\", function(v) {\r\n                    // var va = (v / 2) * Math.sqrt(2);\r\n                    // console.log(\"desiredSize\",v)\r\n                    return v\r\n                }).ofObject(\"BACKGROUND\"),\r\n                new go.Binding(\"angle\", \"angle\", function(v) {\r\n                    // var va = (v / 2) * Math.sqrt(2);\r\n                    // console.log(\"desiredSize\",v)\r\n                    return v\r\n                }).ofObject(\"BACKGROUND\"),\r\n                new go.Binding(\"geometryString\", \"geometryValue\", function(v) {\r\n                    return svg[v];\r\n                }),\r\n            ),\r\n            $(go.Shape, \"Rectangle\",{\r\n                name: 'BACKGROUND',\r\n                fill: \"rgba(1,1,1,0)\",\r\n                // width: 450,\r\n                // height: 450,\r\n                stroke: \"rgba(1,1,1,0)\",\r\n                // minSize: new go.Size(50, 50),\r\n                },\r\n                new go.Binding(\"desiredSize\", \"desiredSize\", function(v, d) {\r\n                    // console.log(\"vd m\", v, d )\r\n                    if(!v) return d.part.findObject(\"SHAPE\").measuredBounds.size;\r\n                    return go.Size.parse(v)\r\n                }).makeTwoWay(function(v) {\r\n                    return go.Size.stringify(v)\r\n                }),\r\n                new go.Binding(\"angle\", \"angle\").makeTwoWay(function(v){\r\n                    return v;\r\n                }),\r\n                // new go.Binding(\"desiredSize\", \"height\", function(v) {\r\n                //     var radius = parseInt(v ? v : 100);\r\n                //     var size = new go.Size(radius, radius);\r\n                //     return size;\r\n                // }).makeTwoWay(function(v) {\r\n                //     return v.height;\r\n                // }),\r\n                // background: \"#555\",\r\n                // stroke: \"red\"}\r\n            ),\r\n    );\r\n}\r\n\r\nfunction doubleClickCreateNodeType(e){\r\n    // console.log('eeeeeeeeeeeeeee:', e);\r\n    var myDiagram = e.diagram;\r\n    myDiagram.startTransaction();\r\n    var text = { text: \"双击编辑文本\", category: 'text' };\r\n    text.loc = go.Point.stringify(myDiagram.lastInput.documentPoint);\r\n    myDiagram.model.addNodeData(text);\r\n    myDiagram.commitTransaction()\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/nodeTemplate/createNodeSvgTemplate.js","var $ = go.GraphObject.make;\r\n\r\nmodule.exports = // 返回天盘模板\r\nfunction createNodeTemplate (diagram) {\r\n    var properties = {\r\n        figure: \"Circle\",\r\n        fill: \"white\",\r\n        strokeWidth: 2,\r\n        stroke: \"black\",\r\n        fontSize: 15,\r\n        font: \"sans-serif\"\r\n    };\r\n\r\n    return $(go.Node, \"Spot\", {\r\n        \"_controlExpand\": true,\r\n        layerName: \"default\",\r\n        locationSpot: go.Spot.Center,\r\n        resizeCellSize: new go.Size(10, 10),\r\n        locationObjectName: \"SHAPE\",\r\n        resizable: true,\r\n        resizeObjectName: \"SHAPE\", // user can resize the Shape\r\n        rotatable: false,\r\n        location: new go.Point(0, 0),\r\n        click: function(e, node) {\r\n            console.log(node.data)\r\n            if(node.diagram.__trtd.nodeClickListener){\r\n                node.diagram.__trtd.nodeClickListener(node)\r\n            }\r\n            // showNodeToolBar(e,node);\r\n        },\r\n        //rotateObjectName: \"SHAPE\",  // rotate the Shape without rotating the label\r\n        doubleClick: function (e, node){\r\n            e.diagram.__trtd.selectText(e, node)\r\n        },\r\n        toMaxLinks: 1,\r\n        layoutConditions: go.Part.LayoutStandard,\r\n        //layoutConditions:~go.Part.LayoutAdded,\r\n        // fromLinkable: true, toLinkable: true,\r\n        alignment: go.Spot.Center,\r\n        alignmentFocus: go.Spot.Center,\r\n        resizeAdornmentTemplate: diagram.__trtd.nodeResizeAdornmentTemplate(),\r\n        // contextMenu: $(go.Adornment),\r\n        contextMenu: $(go.Adornment),\r\n        selectionAdornmentTemplate: diagram.__trtd.getNodeSelectionAdornmentTemplate(),\r\n        mouseOver: function(e, node) {\r\n            // if(node.data.hyperlink){\r\n            //   var textObj = node.findObject('TEXT');\r\n            //   textObj.isUnderline = true;\r\n            // }\r\n\r\n            diagram.__trtd.showNodeRemarkTips(e, node);\r\n        },\r\n        mouseLeave: function(e, node) {\r\n            // if(node.data.hyperlink) {\r\n            //   var textObj = node.findObject('TEXT');\r\n            //   textObj.isUnderline = false;\r\n            // }\r\n            diagram.__trtd.removeNodeRemarkTips();\r\n        },\r\n        mouseDragEnter: function(e, obj) {\r\n            var node = obj.part;\r\n            var selnode = e.diagram.selection.first();\r\n            if (!(selnode instanceof go.Node) || selnode.category == \"3\" || selnode.category == \"text\" || selnode.key == 1) {\r\n                return;\r\n            }\r\n            //var sat = node.selectionAdornmentTemplate;\r\n            //var adorn = sat.copy();\r\n            //adorn.adornedObject = node;\r\n            //node.addAdornment(\"dragEnter\", adorn);\r\n\r\n            //if (!mayWorkFor(selnode, node)) return;\r\n            var shape = node.findObject(\"SHAPE\");\r\n            if (shape) {\r\n                shape._prevFill = shape.fill; // remember the original brush\r\n                shape.fill = \"darkred\";\r\n            }\r\n\r\n        },\r\n        mouseDragLeave: function(e, obj) {\r\n            var node = obj.part;\r\n            var shape = node.findObject(\"SHAPE\");\r\n            if (shape && shape._prevFill) {\r\n                shape.fill = shape._prevFill; // restore the original brush\r\n            }\r\n            //node.removeAdornment(\"dragEnter\");\r\n        },\r\n        mouseDrop: function(e, obj) {\r\n            var node = obj.part;\r\n            var selnode = e.diagram.selection.first();\r\n            if (!(selnode instanceof go.Node) || selnode.data.category == \"3\" || selnode.data.category == \"text\" || selnode.data.key == 1) {\r\n                return;\r\n            }\r\n\r\n            if (node.data.isparent) {\r\n                var child = e.diagram.findNodeForKey(node.data.isparent);\r\n                while (child.data.next) {\r\n                    child = e.diagram.findNodeForKey(child.data.next);\r\n                }\r\n                if (child.data.key == selnode.data.key) {\r\n                    //最后一个子节点拖放到父节点上时，不做任何操作\r\n                    return;\r\n                }\r\n                e.diagram.__trtd.setNodeAsSibling(selnode, child);\r\n            } else {\r\n                e.diagram.__trtd.setNodeAsChildren(selnode, node);\r\n            }\r\n        }},\r\n        new go.Binding(\"location\", \"loc\", go.Point.parse).makeTwoWay(go.Point.stringify),\r\n        new go.Binding(\"isShadowed\", \"isShadowed\").makeTwoWay(),\r\n        new go.Binding(\"selectable\", \"selectable\").makeTwoWay(),\r\n        new go.Binding(\"movable\", \"movable\").makeTwoWay(),\r\n        new go.Binding(\"deletable\", \"deletable\").makeTwoWay(),\r\n        $(go.Shape, {\r\n                strokeDashArray: null,\r\n                // strokeDashOffset:10,\r\n                name: \"SHAPE\",\r\n                figure: \"Circle\",\r\n                fill: \"rgba(0,0,0,0)\",\r\n                fromLinkable: true,\r\n                toLinkable: true,\r\n                cursor: \"pointer\",\r\n                minSize: new go.Size(50, 50),\r\n                strokeWidth: 2,\r\n                stroke: \"black\",\r\n                portId: \"\"\r\n\r\n            },\r\n            new go.Binding(\"strokeDashArray\", \"strokeDashArray\", function(v) {\r\n                try {\r\n                    var val = [parseInt(v.split(\" \")[0]), parseInt(v.split(\" \")[1])];\r\n                } catch (e) {\r\n                    var val = null;\r\n                }\r\n                return val;\r\n            }).makeTwoWay(function(v) {\r\n                return v[0] + \" \" + v[1];\r\n            }), //保留，设置边线样式\r\n            new go.Binding(\"fill\", \"fill\", function(v, obj) {\r\n                return v instanceof go.Brush ? v.color : v;\r\n            }).makeTwoWay(),\r\n            // new go.Binding(\"fill\", \"isSelected\", function(s, obj) { return s ? \"red\" : obj.part.data.color; }).ofObject()),\r\n            new go.Binding(\"desiredSize\", \"radius\", function(v) {\r\n                //alert(v);\r\n                var radius = parseInt(v ? v : 100);\r\n                var size = new go.Size(radius, radius);\r\n                return size;\r\n            }).makeTwoWay(function(v) {\r\n                return v.width;\r\n            }),\r\n            new go.Binding(\"stroke\", \"stroke\", function(v) {\r\n                return v instanceof go.Brush ? v.stroke : v;\r\n            }).makeTwoWay(),\r\n\r\n            new go.Binding(\"strokeWidth\", \"strokeWidth\", function(d) {\r\n                return d;\r\n            }).makeTwoWay(function(d) {\r\n                return d;\r\n            }),\r\n            new go.Binding(\"figure\", \"figure\").makeTwoWay(), {\r\n                figure: properties.figure,\r\n                fill: properties.fill,\r\n                strokeWidth: properties.strokeWidth,\r\n                stroke: properties.stroke\r\n            }\r\n        ),\r\n        $(go.Shape, {\r\n                name: \"SHAPE_Back\",\r\n                figure: \"Rectangle\",\r\n                fill: \"rgba(128,128,128,0)\",\r\n                fromLinkable: true,\r\n                toLinkable: true,\r\n                strokeWidth: 0\r\n            },\r\n            new go.Binding(\"desiredSize\", \"width\", function(v) {\r\n                var va = (v / 2) * Math.sqrt(2);\r\n                return new go.Size(va - 3, va - 3);\r\n            }).ofObject(\"SHAPE\")\r\n        ),\r\n    \r\n        $(go.Panel, \"Table\",\r\n            $(go.RowColumnDefinition, { column: 0, width: 0 }\r\n                // new go.Binding('width','hyperlink',function(v){\r\n                //   return v?10:0;\r\n                // })\r\n            ),\r\n            $(go.Shape, 'Rectangle', {\r\n                row: 0,\r\n                column: 0,\r\n                // width:10,\r\n                fill: 'rgba(0,255,0,0)',\r\n                strokeWidth: 0\r\n            }),\r\n            $(go.Panel, \"Auto\", { row: 1, column: 0 },\r\n                $(go.Shape, \"RoundedRectangle\", { fill: \"rgba(0,0,0,0)\", strokeWidth: 0 }),\r\n                $(go.Picture, {\r\n                        alignment: go.Spot.Left,\r\n                        click: function(e) {\r\n                            alert('picture clicked');\r\n                        },\r\n                        name: 'Picture',\r\n                        // source: 'media/images/Katong/little-boy-black.png',\r\n                        desiredSize: new go.Size(10, 10)\r\n                    }\r\n\r\n                    // new go.Binding(\"source\", \"key\", findHeadShot)\r\n                )\r\n            ),\r\n            $(go.Shape, 'Rectangle', {\r\n                row: 2,\r\n                column: 0,\r\n                // width:10,\r\n                fill: 'rgba(0,0,0,0)',\r\n                strokeWidth: 0\r\n            }),\r\n            $(go.Panel, \"Auto\", { row: 0, column: 1, rowSpan: 3 },\r\n                $(go.TextBlock, {\r\n                        // stretch: go.GraphObject.Vertical,\r\n                        name: \"TEXT\",\r\n                        alignment: new go.Spot(0.5, 0.5),\r\n                        font: \"bold 18px 幼圆\",\r\n                        // editable: true,\r\n                        //margin: 3, editable: true,\r\n                        stroke: \"black\",\r\n                        isMultiline: true,\r\n                        overflow: go.TextBlock.OverflowClip,\r\n                        wrap: go.TextBlock.WrapDesiredSize,\r\n                        textAlign: \"center\",\r\n                        spacingAbove: 4,\r\n                        spacingBelow: 4,\r\n                        portId: \"TEXT\",\r\n                        stretch: go.GraphObject.Fill,\r\n                        click: function(e, node) {\r\n\r\n                        }\r\n                    },\r\n                    new go.Binding(\"textAlign\", \"textAlign\", function(v) {\r\n                        return _.contains(['start', 'center', 'end'], v) ? v : \"center\";\r\n                    }).makeTwoWay(),\r\n                    new go.Binding(\"spacingAbove\", \"spacingline\", function(v) {\r\n                        return tdTransToNum(v, 4);\r\n                    }).makeTwoWay(),\r\n                    new go.Binding(\"spacingBelow\", \"spacingline\", function(v) {\r\n                        return tdTransToNum(v, 4);\r\n                    }).makeTwoWay(),\r\n                    new go.Binding(\"width\", \"width\", function(v) {\r\n                        var va = v / 2 * Math.sqrt(2);\r\n                        return va;\r\n                    }).ofObject(\"SHAPE\"),\r\n                    new go.Binding(\"text\", \"text\").makeTwoWay(),\r\n                    new go.Binding(\"stroke\", \"textStroke\").makeTwoWay(),\r\n                    new go.Binding(\"font\", \"font\").makeTwoWay()\r\n                )\r\n            )\r\n        )\r\n    );\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/nodeTemplate/createNodeTemplate.js","var svg = {\n    'threeWheel': 'M 225 0 C 100.736 0 0 100.735 0 225 s 100.736 225 225 225 c 124.265 0 225.001 -100.734 225.001 -225 C 450.002 100.735 349.265 0 225 0 Z M 225 1.515 c 62.006 0 118.106 25.257 158.591 66.037 c -38.634 133.172 -160.888 157.047 -160.888 157.047 l 0.047 0.083 h -0.051 C 123.453 130.609 19.61 161.966 9.597 165.291 C 35.716 70.857 122.255 1.515 225 1.515 Z M 1.517 225 c 0 -20.075 2.663 -39.524 7.627 -58.035 c 6.686 -2.295 111.992 -36.362 212.807 58.54 c -3.347 10.815 -36.032 125.634 54.089 217.118 c -16.395 3.83 -33.479 5.859 -51.04 5.859 C 101.575 448.482 1.517 348.428 1.517 225 Z M 277.292 442.318 c -89.298 -94.891 -57.746 -204.506 -53.915 -216.53 l 0.076 0.135 c 0 0 126.301 -26.492 161.022 -157.465 c 39.584 40.319 64.008 95.575 64.008 156.542 C 448.483 330.418 375.489 418.773 277.292 442.318 Z',\n    'fireWheel': 'M225.000,450.000 C100.736,450.000 -0.000,349.264 -0.000,225.000 C-0.000,100.736 100.736,-0.000 225.000,-0.000 C349.264,-0.000 450.000,100.736 450.000,225.000 C450.000,349.264 349.264,450.000 225.000,450.000 ZM225.000,448.000 C338.085,448.000 431.498,363.821 446.026,254.709 C432.978,302.699 389.123,338.000 337.000,338.000 C274.592,338.000 224.000,287.408 224.000,225.000 C224.000,163.696 174.304,114.000 113.000,114.000 C51.696,114.000 2.000,163.696 2.000,225.000 C2.000,348.159 101.841,448.000 225.000,448.000 ZM225.000,2.000 C111.915,2.000 18.502,86.179 3.974,195.291 C17.022,147.301 60.877,112.000 113.000,112.000 C175.408,112.000 226.000,162.592 226.000,225.000 C226.000,286.304 275.696,336.000 337.000,336.000 C398.304,336.000 448.000,286.304 448.000,225.000 C448.000,225.000 448.000,225.000 448.000,225.000 C448.000,101.841 348.159,2.000 225.000,2.000 Z',\n    'goldWheel': 'M449.993,0.008 L225.395,287.495 L355.004,449.995 L94.004,449.995 L224.597,287.502 L-0.008,0.008 L449.993,0.008 Z',\n    'waterWheel': 'M268.000,443.000 C299.658,443.000 328.270,429.976 348.785,409.000 L351.564,409.000 C330.601,431.167 300.917,445.000 268.000,445.000 C204.487,445.000 153.000,393.513 153.000,330.000 C153.000,282.847 181.389,242.341 222.000,224.593 L222.000,224.508 C263.076,207.589 292.000,167.180 292.000,120.000 C292.000,57.592 241.408,7.000 179.000,7.000 C148.889,7.000 121.551,18.800 101.296,38.000 L98.382,38.000 C119.136,17.594 147.595,5.000 179.000,5.000 C242.513,5.000 294.000,56.487 294.000,120.000 C294.000,167.153 265.611,207.659 225.000,225.407 L225.000,225.478 C183.921,242.396 155.000,282.817 155.000,330.000 C155.000,392.408 205.592,443.000 268.000,443.000 Z'\n}\n\nmodule.exports = svg;\n\n\n// WEBPACK FOOTER //\n// ./src/datas/svg.template.js","    var helpers = require('../helpers/helpers.gojs')\r\n\r\n    \r\n    function adustOliveText(d){\r\n            setTimeout(function(){\r\n              try{\r\n                console.log(\"check overflow\")\r\n                if(!d.text) return;\r\n                if(d.text && d.text.trim() == \"\") return;\r\n                if(d.lineCount %2 != 0){\r\n                  if(d.text[d.text.length-1] == \"\\n\"){\r\n                    d.text = d.text.substring(0, d.text.length-1)\r\n                    return;\r\n                  }\r\n                  d.text = d.text+\"\\n\"\r\n                }\r\n                // if(d && d.lineCount!=null && d.lineCount%2 != 0){\r\n                //   if(d.text && d.text[d.text.length-1] != \"\\n\"){\r\n                //     d.text+=\"\\n\"\r\n                //   }\r\n                // }\r\n              }catch(e){\r\n                console.error(e)\r\n              }\r\n            },100)\r\n    }\r\n\r\n\r\n    function adjustTextAngle(obj, shi, xu, group){\r\n        var groupTextAngle = group.data.textAngle|| \"vertical\" // \"vertical\"\r\n        var textAngle;\r\n        if(obj.data.order%2==0){ // 偶数\r\n            // 偶数实线在上\r\n            if(shi){\r\n\r\n                if(!shi.data.nangle){\r\n                    textAngle = groupTextAngle\r\n                }else{\r\n                    textAngle = shi.data.textAngle || groupTextAngle\r\n                }\r\n                // if(!shi.data.nloc){\r\n                //     shi.location = obj.location.copy().offset(obj.naturalBounds.width/2, -obj.naturalBounds.height/2)\r\n                // }\r\n                if(textAngle == \"horizontal\"){\r\n                    // if(!shi.data.nloc){\r\n                        shi.locationSpot = new go.Spot(1, 1, 0, 0)\r\n                    // }\r\n                    shi.angle = 0\r\n                    // \r\n                    // if(shi.data.textAlign == null){\r\n                        // shi.findObject(\"TEXT\").textAlign = \"center\";\r\n                        // }\r\n                    }\r\n                    shi.__location = obj.location.copy().offset(obj.naturalBounds.width/2, 0)\r\n                    shi.__location = computeNewRotateLoc(group.location, shi.__location, obj.angle)\r\n                    if(!shi.data.nloc){\r\n                        shi.location = obj.location.copy().offset(obj.naturalBounds.width/2, -obj.naturalBounds.height/2)\r\n                        shi.location = computeNewRotateLoc(group.location, shi.location, obj.angle)\r\n                        // shi.location = shi.__location.copy()\r\n                        // delete shi.__offset\r\n                        delete shi.__switchOrder\r\n                    }else{\r\n                        \r\n                        if(!shi.__offset){\r\n                            shi.__offset = shi.__location.copy().subtract(shi.location)\r\n                        }else{\r\n                            shi.location = shi.__location.copy().subtract(shi.__offset)\r\n                            // if(shi.__switchOrder){\r\n                            //     shi.__offset.x = -shi.__offset.x\r\n                            //     shi.__offset.y = -shi.__offset.y\r\n                            //     shi.location = shi.__location.copy().subtract(shi.__offset)\r\n                            //     delete shi.__switchOrder\r\n                            //     shi.__offset = shi.__location.copy().subtract(shi.location)\r\n                            // }else{\r\n                            //     shi.location = shi.__location.copy().subtract(shi.__offset)\r\n                            // }\r\n                            // xu.location = xu.__location.copy().offset(-Math.abs(xu.__offset.x), -Math.abs(xu.__offset.y))\r\n                            // xu.location = xu.__location.copy().subtract(xu.__offset)\r\n                        }\r\n                    }\r\n                if(textAngle == \"vertical\"){\r\n                    // if(!shi.data.nloc){\r\n                        shi.locationSpot = new go.Spot(0.5, 1, 0, 0)\r\n                    // }\r\n                    shi.angle = obj.angle\r\n                    // if(shi.data.textAlign == null){\r\n                        // obj.diagram.model.setDataProperty(shi.data,\"textAlign\", \"left\")\r\n                        // shi.findObject(\"TEXT\").textAlign = \"center\";\r\n                    // }\r\n                        \r\n                }\r\n            }\r\n            if(xu){\r\n                if(!xu.data.nangle){\r\n                    textAngle = groupTextAngle\r\n                }else{\r\n                    textAngle = xu.data.textAngle || groupTextAngle\r\n                }\r\n\r\n                if(textAngle == \"horizontal\"){\r\n                    // if(!xu.data.nloc){\r\n                        xu.locationSpot = new go.Spot(0, 0, 0, 0)\r\n                    // }\r\n                    xu.angle = 0\r\n                    // obj.diagram.model.setDataProperty(xu.data,\"textAlign\", \"left\")\r\n                    // if(xu.data.textAlign == null){\r\n                        // xu.findObject(\"TEXT\").textAlign = \"center\"\r\n                    // }\r\n                }\r\n                console.log(\"xuxuxuxuxxuxu\", xu.data.order)\r\n                xu.__location = obj.location.copy().offset(obj.naturalBounds.width/2, 0)\r\n                xu.__location = computeNewRotateLoc(group.location, xu.__location, obj.angle)\r\n                if(!xu.data.nloc){\r\n                    xu.location = obj.location.copy().offset(obj.naturalBounds.width/2, obj.naturalBounds.height/2)\r\n                    xu.location = computeNewRotateLoc(group.location, xu.location, obj.angle)\r\n                    // xu.location = xu.__location.copy()\r\n                    // delete xu.__offset\r\n                    delete xu.__switchOrder\r\n                }else{\r\n                    \r\n                    if(!xu.__offset){\r\n                        xu.__offset = xu.__location.copy().subtract(xu.location)\r\n                    }else{\r\n                        xu.location = xu.__location.copy().subtract(xu.__offset)\r\n                        // if(xu.__switchOrder){\r\n                        //     xu.__offset.x = -xu.__offset.x\r\n                        //     xu.__offset.y = -xu.__offset.y\r\n                        //     xu.location = xu.__location.copy().subtract(xu.__offset)\r\n                        //     delete xu.__switchOrder\r\n                        //     xu.__offset = xu.__location.copy().subtract(xu.location)\r\n                        // }else{\r\n                        //     xu.location = xu.__location.copy().subtract(xu.__offset)\r\n                        // }\r\n                        // xu.location = xu.__location.copy().offset(-Math.abs(xu.__offset.x), -Math.abs(xu.__offset.y))\r\n                        // xu.location = xu.__location.copy().subtract(xu.__offset)\r\n                    }\r\n                }\r\n                // if(xu.data.key == \"9fe41098-8d5a-e18f-b79a-b4693eacd39d\"){\r\n                //     console.log(`location: ${go.Point.stringify(xu.location)}\r\n                //     __location: ${go.Point.stringify(xu.__location)}\r\n                //     __offset: ${go.Point.stringify(xu.__offset)}\r\n                //     `)\r\n                // }\r\n                if(textAngle == \"vertical\"){\r\n                    // if(!xu.data.nloc){\r\n                        xu.locationSpot = new go.Spot(0.5, 0, 0, 0)\r\n                    // }\r\n                    xu.angle = obj.angle\r\n                    // obj.diagram.model.setDataProperty(xu.data,\"textAlign\", \"left\")\r\n                    // if(xu.data.textAlign == null){\r\n                        // xu.findObject(\"TEXT\").textAlign = \"center\"\r\n                    // }\r\n                }\r\n\r\n            }\r\n        }else{ // 奇数\r\n            // 奇数实线在下\r\n            if(shi){\r\n                if(!shi.data.nangle){\r\n                    textAngle = groupTextAngle\r\n                }else{\r\n                    textAngle = shi.data.textAngle || groupTextAngle\r\n                }\r\n                shi.__location = obj.location.copy().offset(obj.naturalBounds.width/2, 0)\r\n                shi.__location = computeNewRotateLoc(group.location, shi.__location, obj.angle)\r\n                if(!shi.data.nloc){\r\n                    shi.location = obj.location.copy().offset(obj.naturalBounds.width/2, obj.naturalBounds.height/2)\r\n                    shi.location = computeNewRotateLoc(group.location, shi.location, obj.angle)\r\n                    // shi.location = shi.__location.copy()\r\n                    // delete shi.__offset\r\n                    delete shi.__switchOrder \r\n                }else{\r\n                   \r\n                    if(!shi.__offset){\r\n                        shi.__offset = shi.__location.copy().subtract(shi.location)\r\n                    }\r\n                    else{\r\n                        shi.location = shi.__location.copy().subtract(shi.__offset)\r\n                        // if(shi.__switchOrder){\r\n                        //     shi.__offset.x = -shi.__offset.x\r\n                        //     shi.__offset.y = -shi.__offset.y\r\n                        //     shi.location = shi.__location.copy().subtract(shi.__offset)\r\n                        //     delete shi.__switchOrder\r\n                        //     shi.__offset = shi.__location.copy().subtract(shi.location)\r\n                        // }else{\r\n                        //     shi.location = shi.__location.copy().subtract(shi.__offset)\r\n                        // }\r\n                        // xu.location = xu.__location.copy().offset(-Math.abs(xu.__offset.x), -Math.abs(xu.__offset.y))\r\n                        // xu.location = xu.__location.copy().subtract(xu.__offset)\r\n                    }\r\n                }\r\n                if(textAngle == \"horizontal\"){\r\n                    // if(!shi.data.nloc){\r\n                        shi.locationSpot = new go.Spot(0, 0, 0, 0)\r\n                    // }\r\n                    shi.angle = 0\r\n                    // obj.diagram.model.setDataProperty(shi.data,\"textAlign\", \"left\")\r\n                    // if(shi.data.textAlign == null){\r\n                        // shi.findObject(\"TEXT\").textAlign = \"center\";\r\n                    // }\r\n                }\r\n                if(textAngle == \"vertical\"){\r\n                    // if(!shi.data.nloc){\r\n                    shi.locationSpot = new go.Spot(0.5, 0, 0, 0)\r\n                    // }\r\n                    shi.angle = obj.angle\r\n                    // if(shiTextColl[index].data.textAlign == null){\r\n                        // obj.diagram.model.setDataProperty(shiTextColl[index].data,\"textAlign\", \"left\")\r\n                        // shiTextColl[index].findObject(\"TEXT\").textAlign = \"center\";\r\n                    // }   \r\n                }\r\n            }\r\n            if(xu){\r\n                if(!xu.data.nangle){\r\n                    textAngle = groupTextAngle\r\n                }else{\r\n                    textAngle = xu.data.textAngle || groupTextAngle\r\n                }\r\n                xu.__location = obj.location.copy().offset(obj.naturalBounds.width/2, 0)\r\n                xu.__location = computeNewRotateLoc(group.location, xu.__location, obj.angle)\r\n                if(!xu.data.nloc){\r\n                    xu.location = obj.location.copy().offset(obj.naturalBounds.width/2, -obj.naturalBounds.height/2)\r\n                    xu.location = computeNewRotateLoc(group.location, xu.location, obj.angle)\r\n                    // xu.location = xu.__location.copy()\r\n                    // delete xu.__offset\r\n                    delete xu.__switchOrder\r\n                }else{\r\n                    \r\n                    if(!xu.__offset){\r\n                        xu.__offset = xu.__location.copy().subtract(xu.location)\r\n                    }else{\r\n                        xu.location = xu.__location.copy().subtract(xu.__offset)\r\n                        // if(xu.__switchOrder){\r\n                        //     xu.__offset.x = -xu.__offset.x\r\n                        //     xu.__offset.y = -xu.__offset.y\r\n                        //     xu.location = xu.__location.copy().subtract(xu.__offset)\r\n                        //     delete xu.__switchOrder\r\n                        //     xu.__offset = xu.__location.copy().subtract(xu.location)\r\n                        // }else{\r\n                        //     xu.location = xu.__location.copy().subtract(xu.__offset)\r\n                        // }\r\n                        // xu.location = xu.__location.copy().offset(-Math.abs(xu.__offset.x), -Math.abs(xu.__offset.y))\r\n                        // xu.location = xu.__location.copy().subtract(xu.__offset)\r\n                    }\r\n                }\r\n                // if(xu.data.key == \"9fe41098-8d5a-e18f-b79a-b4693eacd39d\"){\r\n                //     console.log(`location: ${go.Point.stringify(xu.location)}\r\n                //     __location: ${go.Point.stringify(xu.__location)}\r\n                //     __offset: ${go.Point.stringify(xu.__offset)}\r\n                //     `)\r\n                // }\r\n                if(textAngle == \"horizontal\"){\r\n                    // obj.diagram.model.setDataProperty(xu.data,\"textAlign\", \"right\")\r\n                    // if(xu.data.textAlign == null){\r\n                        // xu.findObject(\"TEXT\").textAlign = \"center\";\r\n                    // }\r\n                    // if(!xu.data.nloc){\r\n                        xu.locationSpot = new go.Spot(1, 1, 0, 0)\r\n                    // }\r\n                    xu.angle = 0\r\n                }\r\n\r\n                if(textAngle == \"vertical\"){\r\n                    // if(!xu.data.nloc){\r\n                        xu.locationSpot = new go.Spot(0.5, 1, 0, 0)\r\n                    // }\r\n                    xu.angle = obj.angle\r\n                    // obj.diagram.model.setDataProperty(xuTextColl[index].data,\"textAlign\", \"left\")\r\n                    // if(xuTextColl[index].data.textAlign == null){\r\n                        // xuTextColl[index].findObject(\"TEXT\").textAlign = \"center\"\r\n                    // }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    function layoutWaveGroup(it,diagram,group){\r\n\r\n        var collection = []\r\n        // var group = this.group\r\n        var oliveWidth = group.data.oliveWidth\r\n        var oliveHeight = group.data.oliveHeight\r\n        var shiStroke = group.data.shiStroke\r\n        var xuStroke = group.data.xuStroke\r\n        var centerStroke = group.data.centerStroke || \"#3f5369\"\r\n        var oliveType = group.data.oliveType||\"Ellipse\"\r\n        var haveTail = group.data.haveTail||false\r\n        var textAngle = group.data.textAngle|| \"vertical\" // \"vertical\"\r\n        // group.location = new go.Point(0,0)\r\n        var maxWidth = 0;\r\n        var maxHeight = 0;\r\n        var line;\r\n        var waveTotalSize = oliveWidth*2/3\r\n        var shiTextColl = []\r\n        var xuTextColl = []\r\n        var centerTextColl = []\r\n        var shiStrokeWidth, xuStrokeWidth,shiStrokeDashArray,xuStrokeDashArray\r\n        var autogroupConfig; // 自动布局配置\r\n        // 增加波形双螺旋的开放尾部\r\n        // var tailOlive = {\"category\":\"waveTail\", \r\n        //     \"text\":\"       \", \r\n        //     \"level\":0, \"key\": helpers.guid(), \r\n        //     \"group\":node.data.group, \r\n        //     \"loc\":node.data.loc,\r\n        //     \"desiredSize\":node.data.desiredSize, \r\n        //     \"order\": 2000,\r\n        // }\r\n\r\n        // if(oliveType == \"Wave\" && haveTail){\r\n        //     // 查找是否包含尾部\r\n        //     while(it.next()){\r\n        //         var node = it.value;\r\n        //         if(node.data.role == \"waveTail\"){\r\n\r\n        //         }\r\n        //     }\r\n        //     it.reset(); // 重置索引\r\n        // }\r\n\r\n        while (it.next()) {\r\n            var node = it.value;\r\n                // var item = git.value;\r\n            //   console.log(\"item:\",item)\r\n         \r\n            //   console.log(node.data)\r\n              if(node.data.role == \"shiText\"){\r\n                shiTextColl.push(node)\r\n              }\r\n              if(node.data.role == \"xuText\"){\r\n                xuTextColl.push(node)\r\n              }\r\n              if(node.data.role == \"centerText\"){\r\n                centerTextColl.push(node)\r\n              }\r\n            if (node instanceof go.Node) {\r\n            // position the node . . .\r\n                if(node.data.category == \"line\"){\r\n                    line = node;\r\n                    node.location = group.location.copy().offset(0,0)\r\n                    node.angle = group.angle\r\n                }\r\n                if(node.data.category == \"wave\"){\r\n                    // node.width = oliveWidth\r\n                    // node.desiredSize = new go.Size(200,100)\r\n\r\n                    if(oliveType == \"Ellipse\"){\r\n                        node.diagram.model.setDataProperty(node.data, \"oliveType\",\"Ellipse\")\r\n                        node.diagram.model.setDataProperty(node.data, \"desiredSize\",`${oliveWidth} ${oliveHeight}`)\r\n                    }else{\r\n                        // 设置橄榄类型为波形\r\n                        node.diagram.model.setDataProperty(node.data, \"oliveType\",\"Wave\")\r\n                        // 设置波形的尾部开放\r\n                        if(node.data.role == \"waveTail\"){\r\n                            node.diagram.model.setDataProperty(node.data, \"desiredSize\",`${oliveWidth/2} ${oliveHeight}`)\r\n                            node.diagram.model.setDataProperty(node.data, \"selectable\",false)\r\n                        }else{\r\n                            node.diagram.model.setDataProperty(node.data, \"desiredSize\",`${oliveWidth} ${oliveHeight}`)\r\n                        }\r\n                    }\r\n                    \r\n                    // if(node.findObject(\"TEXT\").lineCount %2 != 0){\r\n                    //     if(node.data.text && node.data.text[node.data.text.length-1] != \"\\n\"){\r\n                    //         node.data.text+=\"\\n\"\r\n                    //       }\r\n                    //     node.diagram.model.setDataProperty(node.data, \"text\",node.data.text)\r\n                    // }\r\n                    // if(node.data.role == \"waveTail\"){\r\n                    //     node.diagram.model.setDataProperty(node.data, \"desiredSize\",`${oliveWidth/2} ${oliveHeight}`)\r\n                    //     node.diagram.model.setDataProperty(node.data, \"selectable\",false)\r\n                    // }else{\r\n                    //     node.diagram.model.setDataProperty(node.data, \"desiredSize\",`${oliveWidth} ${oliveHeight}`)\r\n                    // }\r\n\r\n                    // if(node.naturalBounds.width > maxWidth){\r\n                    //     maxWidth = node.naturalBounds.width;\r\n                    //   }\r\n                    // if(node.naturalBounds.height > maxHeight){\r\n                    // maxHeight = node.naturalBounds.height;\r\n                    // }\r\n                    // if(node.measuredBounds.height > maxHeight){\r\n                    // maxHeight = node.measuredBounds.height;\r\n                    // }\r\n                    // if(node.findObject(\"main\").height > maxHeight){\r\n                    // maxHeight = node.findObject(\"main\").height;\r\n                    // }\r\n                    node.angle = group.angle\r\n                    waveTotalSize+=node.naturalBounds.width\r\n                    collection.push(node)\r\n                }\r\n            }\r\n        }\r\n\r\n\r\n        waveTotalSize = collection.length*oliveWidth + oliveWidth*2/3\r\n        if(haveTail){\r\n            waveTotalSize = collection.length*oliveWidth \r\n        }\r\n        console.log(`maxHeight:${maxHeight},maxWidth:${maxWidth}`)\r\n        line.findObject(\"SHAPE\").width = waveTotalSize\r\n        line.diagram.model.setDataProperty(line.data,\"stroke\", centerStroke)\r\n        // line.centerStroke\r\n        // line.height = 4\r\n        // if(group.resizeObject.width != waveTotalSize){\r\n            group.containingGroup.layout.isOngoing = true;\r\n            group.containingGroup.layout.isValidLayout = false;\r\n        // }\r\n        \r\n        // autogroupConfig = group.group.nonauto||\"\";\r\n        // var autogroupConfigObj = {}\r\n        // autogroupConfig = autogroupConfig.split(\",\")\r\n        // for(var i=0;i<autogroupConfig.length;i++){\r\n        //     autogroupConfigObj[autogroupConfig[i]] = true;\r\n        // }\r\n        group.resizeObject.width = waveTotalSize\r\n        group.resizeObject.height = oliveHeight\r\n        group.waveCount = collection.length;\r\n        xuStrokeWidth = group.data.xuStrokeWidth\r\n        shiStrokeWidth = group.data.shiStrokeWidth\r\n        shiStrokeDashArray = group.data.shiStrokeDashArray\r\n        xuStrokeDashArray = group.data.xuStrokeDashArray\r\n        collection = collection.sort(function(a,b){\r\n            // console.log(`Number(a.data.order)${Number(a.data.order)} > Number(b.data.order) ${Number(b.data.order)}`,Number(a.data.order) > Number(b.data.order))\r\n            return Number(a.data.order) - Number(b.data.order)\r\n        })\r\n        // shiTextColl.sort(function(a,b){\r\n        //     return a.data.order - b.data.order\r\n        // })\r\n        // xuTextColl.sort(function(a,b){\r\n        //     return a.data.order - b.data.order\r\n        // })\r\n        // centerTextColl.sort(function(a,b){\r\n        //     return a.data.order - b.data.order\r\n        // })\r\n        var lastOlive = null;// 记录最后一个橄榄的位置，用于增加开放尾部\r\n        var oldOrder = null;\r\n        collection.forEach(function(obj,index){\r\n            // obj.data.order = index + 1;\r\n            var newOrder = index +1 \r\n            // console.log(\"orderorderorderorderorderorderorderorderorderorder\",newOrder,obj.data.order)\r\n            // var oldOrder = obj.__oldOrder\r\n            if(!obj.__oldOrder){\r\n                oldOrder = obj.data.order\r\n            }else{\r\n                oldOrder = obj.__oldOrder\r\n            }\r\n            delete obj.__oldOrder\r\n            shiTextColl[index] = obj.diagram.findNodeForKey(obj.data.shiText)\r\n            xuTextColl[index] = obj.diagram.findNodeForKey(obj.data.xuText)\r\n            if(!obj.data.isNew && obj.data.role != \"waveTail\"){\r\n                if(oldOrder%2 != newOrder%2){\r\n                    if(shiTextColl[index].data.nloc){\r\n                        obj.diagram.model.setDataProperty(shiTextColl[index].data,\"nloc\", null)\r\n                        shiTextColl[index].__oldLocation = shiTextColl[index].location\r\n                    }\r\n                    else{\r\n                        // 之前是自动布局，如果有记录相对位置，则恢复\r\n                        // if(shiTextColl[index].__offset){\r\n                        //     obj.diagram.model.setDataProperty(shiTextColl[index].data,\"nloc\", true)\r\n                        //     // xu.__offset = xu.__location.copy().subtract(xu.location)\r\n                        //     // shiTextColl[index].location = shiTextColl[index].__location.copy().subtract(shiTextColl[index].__offset)\r\n                        //     // delete shiTextColl[index].__oldLocation\r\n                        // }\r\n                    }\r\n\r\n                    if(xuTextColl[index].data.nloc){\r\n                        obj.diagram.model.setDataProperty(xuTextColl[index].data,\"nloc\", null)\r\n                        xuTextColl[index].__oldLocation = xuTextColl[index].location\r\n                    }else{\r\n                        // if(xuTextColl[index].__offset){\r\n                        //     obj.diagram.model.setDataProperty(xuTextColl[index].data,\"nloc\", true)\r\n                        //     // xu.__offset = xu.__location.copy().subtract(xu.location)\r\n                        //     // xuTextColl[index].location = xuTextColl[index].__location.copy().subtract(xuTextColl[index].__offset)\r\n                        //     // delete shiTextColl[index].__oldLocation\r\n                        // }\r\n                    }\r\n                    // shiTextColl[index].__switchOrder = true;\r\n                    // xuTextColl[index].__switchOrder = true;\r\n                    // obj.diagram.model.setDataProperty(xuTextColl[index].data,\"nloc\", null)\r\n                    // shiTextColl[index].__offset.x = -shiTextColl[index].__offset.x\r\n                    // shiTextColl[index].__offset.y = -shiTextColl[index].__offset.y\r\n                }\r\n            }\r\n\r\n            obj.diagram.model.setDataProperty(obj.data,\"order\", newOrder)\r\n            if(!obj.data.nalign){\r\n                obj.diagram.model.setDataProperty(obj.data,\"textAlign\", \"center\")\r\n            }\r\n            if(shiStroke){\r\n                obj.diagram.model.setDataProperty(obj.data,\"shiStroke\", shiStroke)\r\n            }\r\n            if(xuStroke){\r\n                obj.diagram.model.setDataProperty(obj.data,\"xuStroke\", xuStroke)\r\n            }\r\n            if(xuStrokeWidth){\r\n                obj.diagram.model.setDataProperty(obj.data,\"xuStrokeWidth\", xuStrokeWidth)\r\n            }\r\n            if(shiStrokeWidth){\r\n                obj.diagram.model.setDataProperty(obj.data,\"shiStrokeWidth\", shiStrokeWidth)\r\n            }\r\n            if(shiStrokeDashArray){\r\n                obj.diagram.model.setDataProperty(obj.data,\"shiStrokeDashArray\", shiStrokeDashArray)\r\n            }\r\n            if(xuStrokeDashArray){\r\n                obj.diagram.model.setDataProperty(obj.data,\"xuStrokeDashArray\", xuStrokeDashArray)\r\n            }\r\n            \r\n            // obj.diagram.model.setDataProperty(obj.data,\"text\", obj.data.text+\" \"+newOrder)\r\n            obj.location = group.location.copy().offset(oliveWidth*(newOrder-1),0)\r\n            // obj.location = new go.Point(300*(obj.data.order-1),0)\r\n            // obj.\r\n            // var group = a.findNodeDataForKey(m.group)\r\n            var initCenterText = false\r\n            if(group.data.centerTextAngle == \"independent\"){\r\n                if(!obj.data.centerText){\r\n                    var loc = obj.location.copy().offset(obj.naturalBounds.width/2, 0)\r\n                    loc = computeNewRotateLoc(group.location, loc, obj.angle)\r\n                    var centerText = {\r\n                        \"text\":obj.data.text,\r\n                        \"minSize\":`${oliveWidth-30} 30`,\r\n                        \"deletable\":false,\r\n                        textAlign: obj.data.textAlign,\r\n                        \"font\":obj.data.font || \"18px 'Microsoft YaHei'\", \r\n                        textStroke:obj.data.textStroke,\r\n                        \"category\":\"autoText\", \r\n                        \"key\": helpers.guid(), \"width\": oliveWidth-30, \r\n                        \"role\":\"centerText\", \"level\":0, \"group\": obj.data.group, \r\n                        \"order\": newOrder,\r\n                        \"visible\": false,\r\n                        \"layerName\":\"Foreground\",\r\n                        locationSpot: go.Spot.stringify(new go.Spot(0.5, 0.5, 0, 0)),\r\n                        \"selectable\": false,\r\n                        \"olive\": obj.data.key,\r\n                        \"loc\": go.Point.stringify(loc),\r\n                        angle: 0\r\n                        }\r\n                    obj.diagram.model.addNodeData(centerText)\r\n                    // var objCenterText = obj.diagram.model.findNodeDataForKey(centerText.key)\r\n                    obj.diagram.model.setDataProperty(obj.data,\"centerText\", centerText.key)\r\n                    initCenterText = true;\r\n                }\r\n                var objCenterText = obj.diagram.findNodeForKey(obj.data.centerText)\r\n                if(objCenterText){\r\n                    if(!objCenterText.data.nalign){\r\n                        obj.diagram.model.setDataProperty(objCenterText.data,\"textAlign\", \"center\")\r\n                    }\r\n                    if(!obj.data.nangle){\r\n                        if(textAngle == \"vertical\"){\r\n                            obj.diagram.model.setDataProperty(objCenterText.data,\"visible\", false)\r\n                            obj.diagram.model.setDataProperty(obj.data,\"textVisible\", true)\r\n                        }\r\n                        if(textAngle == \"horizontal\"){\r\n                            obj.diagram.model.setDataProperty(objCenterText.data,\"visible\", true)\r\n                            obj.diagram.model.setDataProperty(obj.data,\"textVisible\", false)\r\n                            obj.diagram.model.setDataProperty(objCenterText.data,\"angle\", 0)\r\n                        }\r\n\r\n                    }\r\n                    if(!initCenterText){\r\n                        var loc = obj.location.copy().offset(obj.naturalBounds.width/2, 0)\r\n                        loc = computeNewRotateLoc(group.location, loc, obj.angle)\r\n                        obj.diagram.model.setDataProperty(objCenterText.data,\"loc\", go.Point.stringify(loc))\r\n                    }\r\n                    obj.diagram.model.setDataProperty(objCenterText.data,\"order\", newOrder)\r\n                    if(!objCenterText.data.nwidth){\r\n                        obj.diagram.model.setDataProperty(objCenterText.data,\"width\", oliveWidth-30)\r\n                    }\r\n                    obj.diagram.model.setDataProperty(objCenterText.data,\"minSize\", `${oliveWidth-30} 30`)\r\n                    // obj.diagram.model.setDataProperty(objCenterText,\"selectable\", true)\r\n                    // if(group.data.centerTextMode == \"followLine\"){\r\n                    //     obj.diagram.model.setDataProperty(objCenterText.data,\"textStroke\", centerStroke)\r\n                    // }else{\r\n                    //     // obj.diagram.model.setDataProperty(objCenterText.data,\"textStroke\", \"black\")\r\n                    // }\r\n                    if(helpers.checkPhone()){\r\n                        objCenterText.layerName = \"Background\"\r\n                    }\r\n                }\r\n            }\r\n            // if(group.data.centerTextMode == \"followLine\"){\r\n            //     obj.diagram.model.setDataProperty(obj.data,\"textStroke\", centerStroke)\r\n            // }else{\r\n            //     obj.diagram.model.setDataProperty(obj.data,\"textStroke\", \"black\")\r\n            // }\r\n            // if(textAngle == \"vertical\"){\r\n                if(obj.text && obj.text.trim() != \"\"){\r\n                    adustOliveText(obj.findObject(\"TEXT\"))\r\n                }\r\n            // }\r\n            if(shiTextColl[index]){\r\n\r\n                if(!shiTextColl[index].desiredSize.width){\r\n                    shiTextColl[index].updateTargetBindings()\r\n                }\r\n\r\n                obj.diagram.model.setDataProperty(shiTextColl[index].data,\"showBorder\", true)\r\n                if(!shiTextColl[index].data.nwidth){\r\n                    obj.diagram.model.setDataProperty(shiTextColl[index].data,\"width\", oliveWidth)\r\n                }\r\n                obj.diagram.model.setDataProperty(shiTextColl[index].data,\"minSize\", `${oliveWidth-30} 30`)\r\n                // obj.diagram.model.setDataProperty(shiTextColl[index].data,\"textAlign\", null)\r\n                // delete shiTextColl[index].data.textAlign\r\n                // 判断是否自动对齐\r\n                // if(!shiTextColl[index].data.nalign){\r\n                //     obj.diagram.model.setDataProperty(shiTextColl[index].data,\"textAlign\", \"center\")\r\n                // }\r\n                // // obj.diagram.model.setDataProperty(shiTextColl[index].data,\"showBorder\", true)\r\n                // if(!shiTextColl[index].__oldOrder){\r\n                //     shiTextColl[index].__oldOrder = shiTextColl[index].data.order\r\n                // }\r\n                // if(shiTextColl[index].__oldOrder ){\r\n                //     // order变化前后奇偶不同\r\n                //     if(oldOrder%2 != newOrder%2){\r\n                //         // shiTextColl[index].__switchOrder = true;\r\n                //         // shiTextColl[index].__offset.x = -shiTextColl[index].__offset.x\r\n                //         // shiTextColl[index].__offset.y = -shiTextColl[index].__offset.y\r\n                //     }\r\n                // }\r\n                // delete shiTextColl[index].__oldOrder\r\n                obj.diagram.model.setDataProperty(shiTextColl[index].data,\"order\", newOrder)\r\n                if(!shiTextColl[index].data.ncolor){\r\n                    obj.diagram.model.setDataProperty(shiTextColl[index].data,\"textStroke\", shiStroke)\r\n                }\r\n                // obj.diagram.model.setDataProperty(shiTextColl[index].data,\"order\", newOrder)\r\n                // if(!shiTextColl[index].data.ncolor){\r\n                //     obj.diagram.model.setDataProperty(shiTextColl[index].data,\"textStroke\", shiStroke)\r\n                // }\r\n            }\r\n            if(xuTextColl[index]) {\r\n                if(!xuTextColl[index].desiredSize.width){\r\n                    xuTextColl[index].updateTargetBindings()\r\n                }\r\n\r\n                obj.diagram.model.setDataProperty(xuTextColl[index].data,\"minSize\", `${oliveWidth-30} 30`)\r\n                obj.diagram.model.setDataProperty(xuTextColl[index].data,\"showBorder\", true)\r\n                if(!xuTextColl[index].data.nwidth){\r\n                    obj.diagram.model.setDataProperty(xuTextColl[index].data,\"width\", oliveWidth)\r\n                }\r\n                // if(!xuTextColl[index].data.nalign){\r\n                //     obj.diagram.model.setDataProperty(xuTextColl[index].data,\"textAlign\", \"center\")\r\n                // }\r\n                // obj.diagram.model.setDataProperty(xuTextColl[index].data,\"textAlign\", null)\r\n                // delete xuTextColl[index].data.textAlign\r\n                // if(!xuTextColl[index].__oldOrder){\r\n                //     xuTextColl[index].__oldOrder = xuTextColl[index].data.order\r\n                // }\r\n                // if(xuTextColl[index].__oldOrder){\r\n                //     // order变化前后奇偶不同\r\n                //     if(xuTextColl[index].__oldOrder%2 != newOrder%2){\r\n                //         // xuTextColl[index].__switchOrder = true;\r\n                //         // xuTextColl[index].__offset.x = -xuTextColl[index].__offset.x\r\n                //         // xuTextColl[index].__offset.y = -xuTextColl[index].__offset.y\r\n                //     }\r\n                // }\r\n                // delete xuTextColl[index].__oldOrder\r\n                obj.diagram.model.setDataProperty(xuTextColl[index].data,\"order\", newOrder)\r\n                if(!xuTextColl[index].data.ncolor){\r\n                    obj.diagram.model.setDataProperty(xuTextColl[index].data,\"textStroke\", xuStroke)\r\n                }\r\n                // obj.diagram.model.setDataProperty(xuTextColl[index].data,\"order\", newOrder)\r\n                // if(!xuTextColl[index].data.ncolor){\r\n                //     obj.diagram.model.setDataProperty(xuTextColl[index].data,\"textStroke\", xuStroke)\r\n                // }\r\n            }\r\n            obj.__location = computeNewRotateLoc(group.location, obj.location.copy(), obj.angle)\r\n            adjustTextAngle(obj, shiTextColl[index],xuTextColl[index],group)\r\n            \r\n            obj.location = obj.__location\r\n            lastOlive = obj;\r\n            obj.diagram.model.setDataProperty(obj.data,\"isNew\", null)\r\n        })\r\n        \r\n    }\r\n\r\n    // define a custom grid layout that makes sure the length of each lane is the same\r\n    // and that each lane is broad enough to hold its subgraph\r\n    function WaveGroupLayout() {\r\n        go.Layout.call(this);\r\n        // go.GridLayout.call(this);\r\n        // this.cellSize = new go.Size(1, 1);\r\n        // this.wrappingColumn = Infinity;\r\n        // this.wrappingWidth = Infinity;\r\n        // this.spacing = new go.Size(0, 0);\r\n        // this.alignment = go.GridLayout.Position;\r\n      }\r\n      go.Diagram.inherit(WaveGroupLayout, go.Layout);\r\n  \r\n      function computeNewRotateLoc(rotateCenter,currentLoc, angle){\r\n          if(rotateCenter.equals(currentLoc)) return currentLoc\r\n        // 计算选择中心点到（0,0）点的偏移\r\n        var offset = new go.Point(0,0).subtract(rotateCenter.copy())\r\n        // 将原来的点偏移到相对0,0点的位置\r\n        var nodeOrigin = currentLoc.copy().offset(offset.x, offset.y)\r\n        var newNodeOrigin = nodeOrigin.rotate(angle)\r\n        var newNodeLoc = newNodeOrigin.copy().offset(-offset.x, -offset.y)\r\n        return newNodeLoc\r\n        // console.log(\"newNodeLoc\", newNodeLoc)\r\n      }\r\n      \r\n      WaveGroupLayout.prototype.doLayout = function(coll) {\r\n          console.log(\"WaveGroupLayout.doLayout\")\r\n        var diagram = this.diagram;\r\n        diagram.model.startTransaction(\"WaveGroupLayout\")\r\n        \r\n          // COLL might be a Diagram or a Group or some Iterable<Part>\r\n        var it = this.collectParts(coll).iterator;\r\n        var group = this.group\r\n        layoutWaveGroup(it, diagram, group)\r\n\r\n        go.Layout.prototype.doLayout.call(this, coll);\r\n        // diagram.model.addNodeData(tailOlive)\r\n        \r\n        diagram.model.commitTransaction(\"WaveGroupLayout\");\r\n        // setTimeout(()=>{\r\n        //     diagram.updateAllTargetBindings()\r\n        // })\r\n        return;\r\n        // return;\r\n        // var diagram = this.diagram;\r\n        if (diagram === null) return;\r\n        diagram.startTransaction(\"PoolLayout\");\r\n        // make sure all of the Group Shapes are big enough\r\n        // var minsize = computeMinPoolSize();\r\n        // diagram.findTopLevelGroups().each(function(lane) {\r\n        //   if (!(lane instanceof go.Group)) return;\r\n        //   var shape = lane.selectionObject;\r\n        //   if (shape !== null) {  // change the desiredSize to be big enough in both directions\r\n        //     var sz = computeLaneSize(lane);\r\n        //     shape.width = (!isNaN(shape.width)) ? Math.max(shape.width, sz.width) : sz.width;\r\n        //     shape.height = (isNaN(shape.height) ? minsize.height : Math.max(shape.height, minsize.height));\r\n        //     var cell = lane.resizeCellSize;\r\n        //     if (!isNaN(shape.width) && !isNaN(cell.width) && cell.width > 0) shape.width = Math.ceil(shape.width / cell.width) * cell.width;\r\n        //     if (!isNaN(shape.height) && !isNaN(cell.height) && cell.height > 0) shape.height = Math.ceil(shape.height / cell.height) * cell.height;\r\n        //   }\r\n        // });\r\n        // now do all of the usual stuff, according to whatever properties have been set on this GridLayout\r\n        go.GridLayout.prototype.doLayout.call(this, coll);\r\n        diagram.commitTransaction(\"PoolLayout\");\r\n      };\r\n      // end PoolLayout class\r\n\r\n      module.exports = WaveGroupLayout\r\n      module.exports.layoutWaveGroup = layoutWaveGroup\r\n      module.exports.adjustTextAngle = adjustTextAngle\n\n\n// WEBPACK FOOTER //\n// ./src/layout/waveGroupLayout.js","var $ = go.GraphObject.make;\r\nvar helpers = require('../helpers/helpers.gojs')\r\nvar createTextNodeTemplate = require('../nodeTemplate/createTextNodeTemplate')\r\nvar createPictureSingleNodeTemplate = require('../nodeTemplate/createPictureSingleNodeTemplate')\r\nvar nodeTemplateFactory = require('../nodeTemplate/factory')\r\nclass Trtd {\r\n    constructor(div, config){\r\n        console.log('trtd base')\r\n        this.config = config;\r\n        this.textDoubleClick = config.textDoubleClick\r\n\t\tthis.modelChangedListener = config.modelChangedListener;\r\n\t\tthis.showContextMenuListener = config.showContextMenuListener;\r\n\t\tthis.hideContextMenuListener = config.hideContextMenuListener;\r\n\t\tthis.dealFireTextCallback = config.dealFireTextCallback;\r\n\t\tthis.exportAsSubFigureCallback = config.exportAsSubFigureCallback; // 将选中内容创建为子盘\r\n\t\tthis.ViewportBoundsChangedListener = config.ViewportBoundsChangedListener;\r\n\t\tthis.InitialLayoutCompleted = config.InitialLayoutCompleted;\r\n        this.cxElement = config.cxElement; // 外部传入的菜单dom元素\r\n        this.deleteCallback = config.deleteCallback; // 删除回调\r\n        this.canAddAxisGroup = config.canAddAxisGroup == null?true:config.canAddAxisGroup \r\n        this.createFigure = config.createFigure; // 外部创建figure方法，异步调用，返回盘的id，写入节点的figure属性，一般为id\r\n        this.openFigure = config.openFigure; // 外部打开figure方法，根据节点的figure属性打开盘\r\n        \r\n        this.useDefaultContext = config.useDefaultContext == null?true:config.useDefaultContext;\r\n        // if()\r\n        this.defaultCxElement = null; // 默认菜单dom元素\r\n        this.type = config.type;\r\n\r\n        this.div = div;\r\n        this.containerDivId = config.containerDivId||\"mainbox\"; // diagram的div父级div的id，菜单会建在这下面\r\n\t\tthis.diagram = {};\r\n        if(config.model != null && typeof(config.model) == \"object\" ){\r\n            console.log(\"dsfdf\")\r\n            config.model = JSON.stringify(config.model)\r\n        }\r\n        this.model = config.model;\r\n        this.tpid = config.tpid||Date.now();\r\n        this.InitialFontSize = 18\r\n        this.tdCurrentTheme = {\r\n            id: 6,\r\n            borderWidth: 2,\r\n            borderColor: \"black\",\r\n            groupColor: \"rgba(0,0,0,0)\",\r\n            groupStroke: \"rgba(0,0,0,0)\",\r\n            groupStrokeWidth: 0,\r\n            themeName: \"黑白\",\r\n            linkColor: \"black\",\r\n            colorRange: \"white\"\r\n        }\r\n        this.nodeClickListener = config.nodeClickListener;\r\n        this.nodeDoubleClickListener = config.nodeDoubleClickListener;\r\n        this.isModified = false; // 是否保存\r\n        this.lastModified = 0; // 保存的序号，每一次modified事件加1，不再变化时执行真实保存，用于提高性能\r\n        this.modifiedIndex = 0; // 保存的序号，每一次modified事件加1，不再变化时执行真实保存，用于提高性能\r\n\t\t// // 初始化diagram\r\n\t\t// this.initDiagram(div, config);\r\n\t\t// this.initListener();\r\n\t\t// // Then you will need to construct a Model (usually a GraphLinksModel) for the Diagram, initialize its data by setting its Model.nodeDataArray and other properties, and then set the diagram's model.\r\n        // if(this.model){\r\n        //     this.initModel();\r\n        // }\r\n    }\r\n    initDiagram(){\r\n        console.log(\"基类方法，子类需要实现，用来初始化画布\")\r\n    }\r\n    addNodeTemplate(){\r\n        console.log(\"基类方法，子类需要实现，用来初始化节点模板\")\r\n    }\r\n\r\n\r\n    /**\r\n     *  设置缩放比例\r\n     * @param value\r\n     */\r\n    resetZoom(value) {\r\n        // console.log(value)\r\n        this.diagram.commandHandler.resetZoom(value);\r\n    }\r\n    getDefaultCustomMenuDivStr(){\r\n        console.log(\"基类方法，子类需要实现，设置默认自定义菜单\")\r\n        return `\r\n        <ul>\r\n            <li trtd_action=\"addLevelNodeMenu\"><a class=\"i18n\" data-lang=\"insertsl\">插入同级节点</a></li>\r\n            <li trtd_action=\"addChildNodeMenu\"><a class=\"i18n\" data-lang=\"icn\">插入子节点</a></li>\r\n            <li trtd_action=\"duplicateNode\"><a class=\"i18n\" data-lang=\"duplicateNode\">复制节点</a></li>\r\n            <li trtd_action=\"deleteNodeMenu\"><a class=\"i18n\" data-lang=\"remove\">删除</a></li>\r\n            <li trtd_action=\"orderChildNode\"><a class=\"i18n\" data-lang=\"ordernode\">子节点编号</a></li>\r\n            <li trtd_action=\"clearOrderChildNode\"><a class=\"i18n\" data-lang=\"clearordernode\">取消子节点编号</a></li>\r\n            <li trtd_action=\"clearNodeTextMenu\"><a class=\"i18n\" data-lang=\"emptynodetext\">清空节点文本</a></li>\r\n            <li trtd_action=\"insertTianpanMenu\"><a class=\"i18n\" data-lang=\"insertnodetianpan\">插入天盘节点</a></li>\r\n            <li trtd_action=\"insertTextMenu\"><a class=\"i18n\" data-lang=\"inserttext\">插入文本</a></li>\r\n            <li trtd_action=\"locateRootNodeMenu\"><a class=\"i18n\" data-lang=\"locaterootnode\">定位根节点</a></li>\r\n            <li trtd_action=\"showAllNodesMenu\"><a class=\"i18n\" data-lang=\"displayallnodes\">显示所有节点</a></li>\r\n            <li trtd_action=\"fixPictureMenu\"><a class=\"i18n\" data-lang=\"fixnode\">固定节点</a></li>\r\n            <li trtd_action=\"activePictureMenu\"><a class=\"i18n\" data-lang=\"cancelfix\">取消固定</a></li>\r\n        \r\n            <li trtd_action=\"delYunpanAxis\"><a class=\"i18n\" data-lang=\"cancelfix\">删除 CTRL+DEL</a></li>\r\n            <li trtd_action=\"addYunpanAxis\"><a class=\"i18n\" data-lang=\"cancelfix\">增加 CTRL+X/Y</a></li>\r\n            <li trtd_action=\"addFollowerGround\"><a class=\"i18n\" data-lang=\"insertsl\">增加同级节点</a></li>\r\n            <li trtd_action=\"addNewCircle\"><a class=\"i18n\" data-lang=\"icn\">增加子节点</a></li>\r\n            <li trtd_action=\"apiDeleteSelection\"><a class=\"i18n\" data-lang=\"remove\">删除</a></li>\r\n        </ul>\r\n        `\r\n    }\r\n\r\n    getShowContextMenus(node){\r\n        console.log(\"基类方法，子类需要实现，显示默认自定义带单时控制哪些菜单需要显示\")\r\n\r\n        var showIds = '';\r\n\r\n        if (!node || node.data.isGroup) {\r\n            // myDiagram.clearSelection();\r\n            showIds = \"locateRootNodeMenu,showAllNodesMenu,insertTextMenu,insertTianpanMenu\";\r\n            // if(myDiagram.model.modelData.currentType == \"dipan\"){\r\n            //     cxElement.getElementsByClassName('removeOutCycleMenu')[0].style.display = 'block';\r\n            // }\r\n        } else {\r\n                if (!(node instanceof go.Group) && (!node.data.category || node.data.category == \"\" || node.data.category == \"0\" || node.data.category == \"1\" || node.data.category == \"4\")) { //天盘节点,非group\r\n                    showIds = \"addLevelNodeMenu,addChildNodeMenu,deleteNodeMenu,orderChildNode,clearOrderChildNode,\" + \"clearNodeTextMenu,duplicateNode\";\r\n                    console.log(\"2111\")\r\n                    if(node.selectable){\r\n                        showIds += \"fixPictureMenu\"\r\n                    }else{\r\n                        showIds += \"activePictureMenu\"\r\n                    }\r\n                }\r\n\r\n\r\n                if( node.data.category == \"8\" ||  node.data.category == \"text\"||  node.data.category == \"addtextTemplate\"){\r\n                    showIds = \"deleteNodeMenu,\" + \"duplicateNode\";\r\n                }\r\n\r\n                if( node.data.category === \"yunpanx\"||node.data.category === \"yunpany\"){\r\n                    console.log(\"222222222222\")\r\n                    showIds = \"delYunpanAxis,\" + \"addYunpanAxis\";\r\n                }\r\n\r\n                if( node.data.category === \"dipan\"){\r\n                    showIds = \"addFollowerGround,\" + \"addChildDipanNode,\"+\"deleteDipanNode\";\r\n                }\r\n                \r\n\r\n\r\n                // for (var _i2 = 0; _i2 < showIds.split(',').length; _i2++) {\r\n                //     if (showIds.split(',')[_i2]&&showIds.split(',')[_i2]!==\"fixPictureMenu\"&&showIds.split(',')[_i2]!==\"activePictureMenu\") {\r\n                //         helpers.getElementByAttr(cxElement,\"li\",\"trtd_action\",showIds.split(',')[_i2])[0].style.display = 'block'\r\n                //         // cxElement.getElementsByClassName(showIds.split(',')[_i2])[0].style.display = 'block';\r\n                //     }else if(showIds.split(',')[_i2]!==\"fixPictureMenu\"||showIds.split(',')[_i2]!==\"activePictureMenu\"){\r\n                //         if (node.selectable) {\r\n                //             cxElement.getElementsByClassName('fixPictureMenu')[0].style.display = 'block';\r\n                //             cxElement.getElementsByClassName('activePictureMenu')[0].style.display = 'none';\r\n                //         } else {\r\n                //             cxElement.getElementsByClassName('fixPictureMenu')[0].style.display = 'none';\r\n                //             cxElement.getElementsByClassName('activePictureMenu')[0].style.display = 'block';\r\n                //         }\r\n                //     }\r\n                // }\r\n            }\r\n\r\n        return showIds\r\n    }\r\n    insertPicture(source){\r\n        this.apiInsertPicture(source)\r\n    }\r\n    apiInsertPicture(source){\r\n        console.log(\"基类方法，子类需要实现，对外接口，插入图片\")\r\n        // console.log(source)\r\n        var myDiagram = this.diagram\r\n        var currentType = this.diagram.model.modelData.currentType;\r\n        // var globalProperties = tdGetModelData(null, myDiagram.model);\r\n        //var layerThickness = parseInt(globalProperties['layerThickness']); //默认值100\r\n        // 获取扇形半径\r\n       \r\n        // var layerThickness = myDiagram.model.modelData.layerThickness;\r\n        //获取中心圆半径\r\n        // var rootNodeRadius = parseInt(myDiagram.model.findNodeDataForKey(1).layerThickness);\r\n        // var tdDipanTextAngle = globalProperties['tdDipanTextAngle'];\r\n        var node = myDiagram.selection.first();\r\n        if (node && node.data.category == 'dipan' && !rootKey) return; //地盘节点不允许插入将诶点\r\n        // if(node) return; // 暂时关闭节点插入图片功能\r\n        myDiagram.model.startTransaction('setSourceOfPicture');\r\n        try{\r\n            var documentPoint = JSON.parse(localStorage.getItem(\"TRTD_documentPoint\"))\r\n            if(!documentPoint) documentPoint = myDiagram.lastInput.documentPoint\r\n        }catch(err){\r\n            var documentPoint = myDiagram.lastInput.documentPoint\r\n        }\r\n        if (node) {\r\n            // myDiagram.model.setDataProperty(node.data,'lastCategory', node.data.category);  //保存添加图片前的类别，以便移除图片时恢复\r\n            // if (node.data.category != \"3\" && node.data.category != 'text') {\r\n            //     myDiagram.model.setCategoryForNodeData(node.data, \"4\");\r\n            // }\r\n            if (node.data.category == '3') { //文字节点暂时不能添加图片\r\n                myDiagram.model.setDataProperty(node.data, \"picture\", source);\r\n            }\r\n        } else {\r\n            // var e = myDiagram.lastInput;\r\n            var nextkey = (myDiagram.model.nodeDataArray.length + 1).toString();\r\n            var follower = { key: nextkey, text: \"\", category: \"3\" };\r\n            myDiagram.model.makeNodeDataKeyUnique(follower);\r\n            follower.loc = go.Point.stringify(documentPoint);\r\n\r\n            //follower.picture = obj.children[0].src;\r\n            follower.picture = source;\r\n            myDiagram.model.addNodeData(follower);\r\n        }\r\n\r\n        myDiagram.model.commitTransaction('setSourceOfPicture');\r\n    }\r\n    apiGetTheme(){\r\n        var model = this.diagram.model;\r\n        var themeText = \"\"\r\n        for(var i=0;i<model.nodeDataArray.length;i++){\r\n            if(model.nodeDataArray[i].role == \"theme\" || model.nodeDataArray[i].role == \"themeText\"|| model.nodeDataArray[i].subRole == \"themeText\"){\r\n                themeText = model.nodeDataArray[i].text\r\n                break;\r\n            }\r\n        }\r\n        if(!themeText){\r\n            var root = model.findNodeDataForKey(1)\r\n            if(root){\r\n                themeText = root.text\r\n            }\r\n        }\r\n        return themeText\r\n    }\r\n    apiGetThemeNode(){\r\n        var model = this.diagram.model;\r\n        var themeText = null\r\n        var it = this.diagram.nodes;\r\n        var tmp;\r\n        while(it.next()){\r\n            tmp = it.value;\r\n            if(tmp.data.role == \"theme\" || tmp.data.role == \"themeText\"|| tmp.data.subRole == \"themeText\"){\r\n                themeText = tmp\r\n                break;\r\n            }     \r\n        }\r\n        // for(var i=0;i<model.nodeDataArray.length;i++){\r\n        //     if(model.nodeDataArray[i].role == \"theme\" || model.nodeDataArray[i].role == \"themeText\"|| model.nodeDataArray[i].subRole == \"themeText\"){\r\n        //         themeText = model.nodeDataArray[i]\r\n        //         break;\r\n        //     }\r\n        // }\r\n        if(!themeText){\r\n            var root = this.diagram.findNodeForKey(1)\r\n            if(root){\r\n                themeText = root\r\n            }\r\n        }\r\n        return themeText\r\n    }\r\n\r\n    insertFigure(source, figureId) { //rootKey表示属于某个地盘节点的背景\r\n        // console.log(source)\r\n        var myDiagram = this.diagram\r\n        var currentType = this.diagram.model.modelData.currentType;\r\n        // var globalProperties = tdGetModelData(null, myDiagram.model);\r\n        //var layerThickness = parseInt(globalProperties['layerThickness']); //默认值100\r\n        // 获取扇形半径\r\n       \r\n        // var layerThickness = myDiagram.model.modelData.layerThickness;\r\n        //获取中心圆半径\r\n        // var rootNodeRadius = parseInt(myDiagram.model.findNodeDataForKey(1).layerThickness);\r\n        // var tdDipanTextAngle = globalProperties['tdDipanTextAngle'];\r\n        var node = myDiagram.selection.first();\r\n        // if (node && node.data.category == 'dipan' && !rootKey) return; //地盘节点不允许插入将诶点\r\n        if(node) return; // 暂时关闭节点插入图片功能\r\n        myDiagram.model.startTransaction('setSourceOfPicture');\r\n        try{\r\n            var documentPoint = JSON.parse(localStorage.getItem(\"TRTD_documentPoint\"))\r\n        }catch(err){\r\n            var documentPoint = myDiagram.lastInput.documentPoint\r\n        }\r\n        if (node) {\r\n            // myDiagram.model.setDataProperty(node.data,'lastCategory', node.data.category);  //保存添加图片前的类别，以便移除图片时恢复\r\n            if (node.data.category != \"3\" && node.data.category != 'text') {\r\n                myDiagram.model.setCategoryForNodeData(node.data, \"4\");\r\n            }\r\n            if (node.data.category != 'text') { //文字节点暂时不能添加图片\r\n                myDiagram.model.setDataProperty(node.data, \"picture\", source);\r\n            }\r\n        } else {\r\n            // var e = myDiagram.lastInput;\r\n            var nextkey = (myDiagram.model.nodeDataArray.length + 1).toString();\r\n            var follower = { key: nextkey, text: \"\", category: \"3\" };\r\n            myDiagram.model.makeNodeDataKeyUnique(follower);\r\n            follower.loc = go.Point.stringify(documentPoint);\r\n            follower.figureId = figureId;\r\n\r\n            //follower.picture = obj.children[0].src;\r\n            follower.picture = source;\r\n            myDiagram.model.addNodeData(follower);\r\n        }\r\n\r\n        myDiagram.model.commitTransaction('setSourceOfPicture');\r\n\r\n    }\r\n\r\n\r\n\r\n// 复制单个节点\r\napiDuplicateNode() {\r\n    var myDiagram = this.diagram;\r\n    var node = myDiagram.selection.first();\r\n    if (!node) return;\r\n    myDiagram.startTransaction();\r\n    var newData = myDiagram.model.copyNodeData(node.data);\r\n    var location = node.location.copy();\r\n    location.offset(50, -50);\r\n    newData.loc = go.Point.stringify(location);\r\n    newData.level = 0;\r\n    newData = clearRelProperty(newData);\r\n    myDiagram.model.addNodeData(newData);\r\n    myDiagram.commitTransaction();\r\n    // 清除节点的关系属性，比如父节点索引，子节点索引等\r\n    function clearRelProperty(data) {\r\n        data.level = 0;\r\n        delete data.prev;\r\n        delete data.isparent;\r\n        delete data.next;\r\n        delete data.group;\r\n        delete data.parent;\r\n        delete data.role\r\n        delete data.group\r\n        delete data.dimKey\r\n        delete data.subRole\r\n        delete data.order\r\n        delete data.figure\r\n        delete data.iconVisible\r\n        delete data.deletable\r\n        delete data.theta\r\n        delete data.orderX\r\n        delete data.orderY\r\n        delete data.dimX\r\n        delete data.dimY\r\n        return data;\r\n    }\r\n}\r\n\r\n    apiPreviewImage(background=\"white\", scale=1){\r\n        console.log(\"基类方法，子类需要实现，对外接口，预览图片，生成base64\")\r\n        var myDiagram = this.diagram;\r\n        var imageParas = {\r\n            scale: scale,\r\n            // background: \"rgba(0,0,0,0)\",\r\n            background: background,\r\n            type: \"image/png\",\r\n            maxSize: new go.Size(9000, 9000)\r\n        }\r\n        var list = new go.List(go.GraphObject);\r\n\r\n        var node = myDiagram.selection.first()\r\n        var isSelected = false\r\n        if(node ){\r\n            while(node.containingGroup){\r\n                node = node.containingGroup\r\n            }\r\n            if(node.data.isGroup){\r\n                isSelected = true\r\n            }\r\n            \r\n        }\r\n\r\n        if(isSelected){\r\n            var it = node.findSubGraphParts().iterator;\r\n            while(it.next()){\r\n                var p = it.value;\r\n                var temp = p.findObject(\"figure\")\r\n                if(temp){\r\n                    temp.visible = false;\r\n                }\r\n                if (!(p instanceof go.Group)) {\r\n                    list.add(p);\r\n                    if( p instanceof go.Node){\r\n                        if(p.data.role == \"centerText\"){\r\n                            p.layerName = \"Foreground\"\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }else{\r\n            myDiagram.nodes.each(function(p) {\r\n                var temp = p.findObject(\"figure\")\r\n                if(temp){\r\n                    temp.visible = false;\r\n                }\r\n                if (!(p instanceof go.Group)) {\r\n                    list.add(p);\r\n                    if( p instanceof go.Node){\r\n                        if(p.data.role == \"centerText\"){\r\n                            p.layerName = \"Foreground\"\r\n                        }\r\n                    }\r\n                }\r\n            })\r\n        }\r\n        \r\n        myDiagram.links.each(function(p) {\r\n            list.add(p);\r\n        })\r\n        imageParas.parts = list.iterator;\r\n\r\n        var imgdata = myDiagram.makeImageData(imageParas);\r\n        myDiagram.nodes.each(function(p) {\r\n            var temp = p.findObject(\"figure\")\r\n            if(p.data.figure && temp){\r\n                temp.visible = true;\r\n            }\r\n            // if (!(p instanceof go.Group)) {\r\n            //     list.add(p);\r\n            //     if( p instanceof go.Node){\r\n            //         if(p.data.role == \"centerText\"){\r\n            //             p.layerName = \"Foreground\"\r\n            //         }\r\n            //     }\r\n            // }\r\n        })\r\n        return imgdata;\r\n    }\r\n    apiDeleteSelection(){\r\n        console.log(\"基类方法，子类需要实现，对外接口，删除选中的节点\")\r\n        this.diagram.toolManager.textEditingTool.doCancel();\r\n        this.diagram.commandHandler.deleteSelection();\r\n    }\r\n    apiUndo () {\r\n        this.diagram.commandHandler.undo();\r\n    }\r\n    apiRedo () {\r\n        this.diagram.commandHandler.redo();\r\n    }\r\n    saveModel(e){\r\n        // if (e.isTransactionFinished) {\r\n            // console.log('model changed and has been saved to localstorage');\r\n             helpers.saveModelToLocalStorage(this.tpid, this.diagram.model)\r\n            // helpers.checkModel(e.model)\r\n        // }\r\n    }\r\n\r\n    addNodeTemplateBase(){\r\n        var myDiagram = this.diagram\r\n        this.diagram.nodeTemplateMap.add(\"text\", createTextNodeTemplate(this.diagram));\r\n        this.diagram.nodeTemplateMap.add(\"3\", createPictureSingleNodeTemplate(this.diagram));\r\n\r\n        // myDiagram.nodeTemplateMap.add(\"cbian\",  nodeTemplateFactory(\"cbian\",{diagram:this.diagram}).getNodeTemplate())\r\n        myDiagram.nodeTemplateMap.add(\"pic\",  nodeTemplateFactory(\"pic\",{diagram:this.diagram}).getNodeTemplate())\r\n        myDiagram.nodeTemplateMap.add(\"autoText\", nodeTemplateFactory(\"autoText\",{diagram:myDiagram}).getNodeTemplate());\r\n        myDiagram.groupTemplateMap.add(\"picGroup\", nodeTemplateFactory(\"picGroup\",{diagram:myDiagram}).getNodeTemplate());\r\n    }\r\n    // 添加水罗盘，三门系统\r\n    addWater(){\r\n        console.log(\"addWater\")\r\n        var diagram = this.diagram\r\n        var node = diagram.selection.first();\r\n        var group = null\r\n        if(node && node.data.category == \"axisGroup\"){\r\n            group=node.data.key;\r\n        }\r\n        var e = diagram.lastInput\r\n        diagram.startTransaction(\"addCbian\")\r\n        var groupKey = helpers.guid()\r\n        \r\n        var basePoint = e.documentPoint\r\n        var groupData = {\"category\":\"picGroup\", \r\n         \"role\":\"cbian\", \"isGroup\":true, \"level\":0, \r\n        \"key\":groupKey, \"loc\":go.Point.stringify(basePoint), \"deletable\":true}\r\n        if(group){\r\n            groupData.group = group\r\n        }\r\n        \r\n        var picData = { \"group\":groupKey, \"text\":\"\", \r\n        \"resizable\":false, \"category\":\"pic\", \r\n        \"loc\":go.Point.stringify(basePoint),\r\n        \"picture\":\"https://static.365trtd.com/system/water/water.png\", \"width\":150, \"height\":150}\r\n        // \"picture\":\"https://static.365trtd.com/system/cbian/cbian.png\", \"width\":150, \"height\":150}\r\n        \r\n        var themeData = {\"text\":\"总结\", \"deletable\":true,  \"fill\":\"black\", \"iconVisible\":false, \r\n        \"locationSpot\":\"1 0 0 0\", \"textAlign\":\"center\", \"category\":\"autoText\", \r\n        \"loc\":go.Point.stringify(basePoint.copy().offset(3,-3)), \r\n        \"movable\":true, \"group\":groupKey}\r\n        var timeData = {\"text\":\"时间\", \"deletable\":true,  \"fill\":\"black\", \"iconVisible\":false, \r\n        \"locationSpot\":\"1 0 0 0\", \"textAlign\":\"center\", \"category\":\"autoText\", \r\n        \"loc\":go.Point.stringify(basePoint.copy().offset(150, 0)), \r\n        \"movable\":true, \"group\":groupKey}\r\n        var energeData = {\"text\":\"能量\", \"deletable\":true, \"fill\":\"black\", \"iconVisible\":false, \r\n        \"locationSpot\":\"1 0 0 0\", \"textAlign\":\"center\", \"category\":\"autoText\", \r\n        \"loc\":go.Point.stringify(basePoint.copy().offset(0, -150)), \r\n        \"movable\":true, \"group\":groupKey}\r\n        var text1Data = {\"text\":\"总结1\", \"deletable\":true,  \"textStroke\":\"#0e399d\", \"iconVisible\":false, \r\n        \"locationSpot\":\"0 0 0 0\", \"textAlign\":\"left\", \"category\":\"autoText\", \r\n        \"loc\":go.Point.stringify(basePoint.copy().offset(155*Math.cos(30*Math.PI/180), -150*Math.sin(30*Math.PI/180))), \r\n        \"movable\":true, \"group\":groupKey}\r\n        var text2Data = {\"text\":\"总结2\", \"deletable\":true, \"textStroke\":\"#FFC000\", \"iconVisible\":false, \r\n        \"locationSpot\":\"0 0.5 0 0\", \"textAlign\":\"left\", \"category\":\"autoText\", \r\n        \"loc\":go.Point.stringify(basePoint.copy().offset(145*Math.cos(45*Math.PI/180), -150*Math.sin(45*Math.PI/180))), \r\n        \"movable\":true, \"group\":groupKey}\r\n        var text3Data = {\"text\":\"总结3\", \"deletable\":true, \"textStroke\":\"#cb1c27\", \"iconVisible\":false, \r\n        \"locationSpot\":\"0 1 0 0\", \"textAlign\":\"left\", \"category\":\"autoText\", \r\n        \"loc\":go.Point.stringify(basePoint.copy().offset(145*Math.cos(70*Math.PI/180), -140*Math.sin(70*Math.PI/180))), \r\n        \"movable\":true, \"group\":groupKey}\r\n\r\n        diagram.model.addNodeData(text1Data)\r\n        diagram.model.addNodeData(text2Data)\r\n        diagram.model.addNodeData(text3Data)\r\n        diagram.model.addNodeData(themeData)\r\n        diagram.model.addNodeData(timeData)\r\n        diagram.model.addNodeData(energeData)\r\n        diagram.model.addNodeData(picData)\r\n        diagram.model.addNodeData(groupData)\r\n        \r\n    //     {\"text\":\"自由文本\",\r\n    //     \"deletable\":true, \r\n    //     \"role\":\"freeText\",\r\n    //     \"fill\":\"black\", \r\n    //     \"iconVisible\":false, \r\n    //     \"locationSpot\":\"0.5 0.5 0 0\", \r\n    //     \"textAlign\":\"center\", \r\n    //     \"category\":\"autoText\", \r\n    //     \"loc\": go.Point.stringify(e.documentPoint), \r\n    //     \"movable\":true, \"group\":node.data.key\r\n    //    }\r\n\r\n        diagram.commitTransaction(\"addWater\")\r\n    \r\n    }\r\n\r\n    initDiagramBase(div, config){\r\n        console.log(\"基类初始化画布，子类修改diagram\")\r\n        var myDiagram = this.diagram;\r\n        var that = this;\r\n        \r\n    // function onTextChanged(){}\r\n        // function saveModel() {}\r\n        var myDiagram = this.diagram;\r\n\r\n        function onTextChanged(e) {\r\n            e.diagram.isModified = true;\r\n            console.log(\"onTextChanged\")\r\n        }\r\n        \r\n        // //var $ = go.GraphObject.make; \r\n        // function saveModel(e) {\r\n        //     // console.log(e)\r\n        //     if (e.isTransactionFinished) {\r\n        //         console.log('model changed and has been saved to localstorage');\r\n        //         helpers.saveModelToLocalStorage(that.tpid, that.diagram.model)\r\n        //         helpers.checkModel(e.model)\r\n        //     }\r\n        // }\r\n        var defaultConfig = {\r\n            initialContentAlignment: go.Spot.Center,\r\n            initialAutoScale: go.Diagram.Uniform,\r\n            initialDocumentSpot: go.Spot.Center,\r\n            initialViewportSpot: go.Spot.Center,\r\n            \"toolManager.hoverDelay\": 100,\r\n            padding: -20,\r\n            click: function(e) {\r\n                // closeToolbarWindow();\r\n                // removeNodeToolBar();\r\n                console.log(\"eeee:\",e)\r\n                localStorage.setItem(\"TRTD_documentPoint\",go.Point.stringify(e.documentPoint))\r\n            },\r\n            \"dragSelectingTool.isEnabled\": false,\r\n            \"draggingTool.isCopyEnabled\": false,\r\n            // \"rotatingTool.snapAngleEpsilon\": 10,\r\n            \"commandHandler.archetypeGroupData\": { text: \"Group\", isGroup: true, color: \"blue\" },\r\n        \r\n            // enable undo & redo\r\n            allowDrop: true,\r\n            \"undoManager.isEnabled\": true,\r\n            \"undoManager.maxHistoryLength\": 20,\r\n            \"toolManager.mouseWheelBehavior\": go.ToolManager.WheelZoom,\r\n            maxScale: 5.0,\r\n            minScale: 0.2,\r\n            hasVerticalScrollbar: false,\r\n            hasHorizontalScrollbar: false,\r\n            scrollMode: go.Diagram.InfiniteScroll,\r\n            scrollMargin: 50,\r\n            \"animationManager.isEnabled\": false,\r\n        \r\n            //rotatingTool: go.GraphObject.make(TopRotatingTool),  // defined below\r\n            \r\n            maxSelectionCount: 1,\r\n            InitialLayoutCompleted:(e)=>{\r\n                console.info(\"hhhhhhhhhhhhhhhhhhhh InitialLayoutCompleted\")\r\n                e.diagram.animationManager.isEnabled = true\r\n                if(that.InitialLayoutCompleted){\r\n                    that.InitialLayoutCompleted(e)\r\n                }\r\n            },\r\n            // make sure users can only create trees\r\n\r\n            validCycle: go.Diagram.CycleDestinationTree,\r\n        \r\n            \"ModelChanged\": function(e){\r\n                if (!e.isTransactionFinished) {\r\n                    return;\r\n                }\r\n                // return;\r\n                that.isModified = true;\r\n                that.lastModified = Date.now();\r\n                that.modifiedIndex += 1;\r\n                setTimeout(()=>{\r\n                    // 如果已经保存则不处理\r\n                    if(!that.isModified) {\r\n                        console.log(\"已经保存，跳过\",diff,\",\",that.modifiedIndex)\r\n                        return;\r\n                    };\r\n                    // var now = Date.now()\r\n                    var diff = Date.now() - that.lastModified\r\n                    if(diff >=1000){\r\n                        console.log(\"大于1000毫秒需要保存\",diff,\",\",that.modifiedIndex)\r\n                        that.modifiedIndex = 0\r\n                        that.isModified = false\r\n                        that.saveModel(e)\r\n                        if(that.modelChangedListener){\r\n                            that.modelChangedListener(e.model)\r\n                        }\r\n                    }\r\n                },1100)\r\n\r\n            },\r\n        \r\n            \"TextEdited\": onTextChanged, //在下面定义\r\n            contextMenu: $(go.Adornment),\r\n            ViewportBoundsChanged:(e)=>{\r\n                // console.log(\"ViewportBoundsChangedListener\", e)\r\n                if(that.ViewportBoundsChangedListener){\r\n                    that.ViewportBoundsChangedListener(e)\r\n                }\r\n            }\r\n        }\r\n        \r\n        var diagramConfig = Object.assign(defaultConfig, config.diagramConfig);\r\n        delete diagramConfig.type;\r\n        delete diagramConfig.tpid;\r\n        delete diagramConfig.model;\r\n        delete diagramConfig.modelChangedListener; // 这里需要优化，传入的参数不一定能够在diagram里配置\r\n        delete diagramConfig.mouseOverListener;\r\n\t\tdelete diagramConfig.clickListener;\r\n        this.diagram = $(go.Diagram, div, diagramConfig);\r\n        this.diagram.__trtd = this;\r\n        var myDiagram = this.diagram;\r\n\r\n        var forelayer = myDiagram.findLayer(\"Foreground\");\r\n        myDiagram.addLayerBefore(go.GraphObject.make(go.Layer, { name: \"default\" }), forelayer);\r\n        myDiagram.addLayerBefore(go.GraphObject.make(go.Layer, { name: \"overflow\" }), forelayer);\r\n        for (var i = 10; i >= 0; i--) {\r\n            myDiagram.addLayerBefore(go.GraphObject.make(go.Layer, { name: i.toString() }), forelayer);\r\n        }\r\n        //myDiagram.toolManager.draggingTool.computeEffectiveCollection = computeEffectiveCollection;\r\n        myDiagram.toolManager.draggingTool.computeEffectiveCollection = computeEffectiveCollection;\r\n        // myDiagram.toolManager.dragSelectingTool.isPartialInclusion = true;\r\n        \r\n        myDiagram.toolManager.rotatingTool.handleArchetype =\r\n                $(go.Panel, \"Auto\",\r\n                    $(go.Shape, \"BpmnActivityLoop\", { width: 30, height: 30, stroke: \"green\", fill: \"transparent\" }),\r\n                    $(go.Shape, \"Rectangle\", {\r\n                        width: 30,\r\n                        height: 30,\r\n                        stroke: \"green\",\r\n                        fill: \"transparent\",\r\n                        strokeWidth: 0\r\n                    })\r\n                );\r\n\r\n        myDiagram.toolManager.linkReshapingTool.handleArchetype =\r\n            $(go.Shape, \"Circle\", {\r\n                width: 30,\r\n                height: 30,\r\n                fill: \"lightblue\",\r\n                stroke: \"dodgerblue\"\r\n            });        \r\n\r\n        // only allow new links between ports of the same group\r\n        myDiagram.toolManager.linkingTool.linkValidation = sameGroup;\r\n        // only allow reconnecting an existing link to a port of the same color\r\n        myDiagram.toolManager.relinkingTool.linkValidation = sameGroup;\r\n        myDiagram.commandHandler.doKeyDown = (e)=>{\r\n            this.dokeyDownFn(e)\r\n        }\r\n        myDiagram.commandHandler.deleteSelection = function(){\r\n            console.log(\"deleteSelectiondeleteSelection\")\r\n            var node = that.diagram.selection.first();\r\n            if (!node) {\r\n                return;\r\n            }\r\n            // 不允许删除主题\r\n            if(node.data.role == \"theme\" || node.data.role == \"themeText\"|| node.data.subRole == \"themeText\"){\r\n                return;\r\n            }\r\n            var nodeCopy = JSON.parse(JSON.stringify(node.data))\r\n            that.deleteSelection();\r\n            if(that.deleteCallback){\r\n                that.deleteCallback(nodeCopy)\r\n            }\r\n        }\r\n        myDiagram.commandHandler.redo = function() {\r\n            var cmd = myDiagram.commandHandler;\r\n            //myDiagram.currentTool.doCancel();\r\n            //go.CommandHandler.prototype.redo.call(cmd);\r\n            myDiagram.clearSelection();\r\n            go.CommandHandler.prototype.redo.call(cmd);\r\n        };\r\n        myDiagram.commandHandler.undo = function() {\r\n            var cmd = myDiagram.commandHandler;\r\n\r\n            myDiagram.clearSelection();\r\n            if (myDiagram.toolManager) {\r\n                myDiagram.toolManager.textEditingTool.doCancel();\r\n            }\r\n            go.CommandHandler.prototype.undo.call(cmd);\r\n        };\r\n\r\n        myDiagram.toolManager.clickCreatingTool.archetypeNodeData = {\r\n            category: \"autoText\",\r\n            text: \"双击编辑文本\",\r\n            level: 0,\r\n            radius: 120,\r\n        };\r\n\r\n        this.addNodeTemplateBase()\r\n        this.addDiagramContextMenu();\r\n        // if(this.model){\r\n        //     this.initModel();\r\n        // }\r\n    }\r\n    removeNodeRemarkTips() {\r\n        var doms = document.getElementById('tooltip');\r\n        if (doms) {\r\n            doms.parentNode.removeChild(doms);\r\n        }\r\n    }\r\n\r\n    showNodeRemarkTips(e, node) {\r\n        var info = document.getElementById('tooltip');\r\n        if (!info || info.length == 0) {\r\n            let str = document.createElement('div');\r\n            str.setAttribute('id', 'tooltip');\r\n            str.setAttribute('style', 'word-wrap: break-word;word-break: break-all');\r\n            document.body.appendChild(str);\r\n            info = document.getElementById('tooltip');\r\n        }\r\n        var box = document.getElementById(\"tooltip\");\r\n    \r\n        if (!node.data.istemp && (node.data.text && node.data.text.trim() == \"\") && (node.data.remark && node.data.remark.trim() == \"\" || typeof(node.data.remark) == 'undefined')) return;\r\n    \r\n        if (node.data.istemp) {\r\n            var toolTipText = lang.trans('tempnodetips');\r\n        } else if(node.category === \"y\"||(node.category === \"LogicXor\"&&node.data.loc.split(' ')[1] === \"5\")){\r\n            var toolTipText =\"最右新增\";\r\n        }else if(node.category === \"x\"||(node.category === \"LogicXor\"&&node.data.loc.split(' ')[0] === \"-20\")){\r\n            var toolTipText =\"最上新增\";\r\n        }else {\r\n            var toolTipText = node.data.text + \"<br><hr>\";\r\n            toolTipText += node.data.remark ? node.data.remark : \"\";\r\n        }\r\n    \r\n        box.innerHTML = toolTipText;\r\n        // box.style.left = e.viewPoint.x + \"px\";\r\n        // box.style.top = e.viewPoint.y + \"px\";\r\n        if(node.category === \"y\"||node.category === \"x\"||node.category === \"LogicXor\"){\r\n            box.style.left = (e.event.clientX + 10) + \"px\";\r\n            box.style.top = (e.event.clientY - 10) + \"px\";\r\n        }else{\r\n            box.style.left = (e.event.clientX + 50) + \"px\";\r\n            box.style.top = (e.event.clientY - 50) + \"px\";\r\n        }\r\n        box.style.position = \"fixed\";\r\n        box.style.zIndex = 5555;\r\n        box.style.backgroundColor = \"#FFFFE1\";\r\n        // $(\"#tooltip\")[0].innerHtml = \"<p>aaaaaaaaa<br>bbbbbbbbbbbbb</p>\";\r\n    }\r\n\r\n    nodeResizeAdornmentTemplate () {\r\n        return $(go.Adornment, \"Spot\",\r\n            $(go.Placeholder), // takes size and position of adorned object\r\n            $(go.Shape, \"Circle\", // left resize handle\r\n                {\r\n                    alignment: go.Spot.TopLeft,\r\n                    alignmentFocus: go.Spot.BottomRight,\r\n                    cursor: \"col-resize\",\r\n                    desiredSize: new go.Size(30, 30),\r\n                    fill: \"lightblue\",\r\n                    stroke: \"dodgerblue\"\r\n                }),\r\n            $(go.Shape, \"Circle\", // right resize handle\r\n                {\r\n                    alignment: go.Spot.BottomRight,\r\n                    alignmentFocus: go.Spot.TopLeft,\r\n                    cursor: \"col-resize\",\r\n                    desiredSize: new go.Size(30, 30),\r\n                    fill: \"lightblue\",\r\n                    stroke: \"dodgerblue\"\r\n                })\r\n        )\r\n    }\r\n    // 创建默认菜单 this.defaultCxElement\r\n    customMenu () {\r\n        console.log(\"第一步创建默认的自定义菜单\")\r\n        if(this.defaultCxElement){\r\n            console.log(\"使用默认菜单，已经存在\")\r\n            return this.defaultCxElement;\r\n        }\r\n        console.log(this.useDefaultContext)\r\n        // 不使用默认菜单\r\n        if(!this.useDefaultContext){\r\n            \r\n            return null;\r\n        }\r\n        // 添加菜单选项\r\n        var str = this.getDefaultCustomMenuDivStr()\r\n        \r\n        let div = document.createElement('div');\r\n        // div.setAttribute('id', 'contextMenu');\r\n        div.setAttribute('class', 'context-menu');\r\n        div.innerHTML = str;\r\n        // document.getElementsByClassName('mainbox')[0].appendChild(div);\r\n        var mainbox = document.getElementById(this.containerDivId)\r\n        mainbox.appendChild(div);\r\n        let contextMeluDom = mainbox.getElementsByClassName('context-menu')[0]\r\n        this.defaultCxElement = contextMeluDom\r\n        this.bindMenuEventListener(contextMeluDom)\r\n        return contextMeluDom\r\n    }\r\n\r\n    bindMenuEventListener(cxElement){\r\n        let menuList = cxElement.getElementsByTagName('li');\r\n        console.log(\"创建的自定义菜单需要绑定一些事件\")\r\n        for(let i = 0; i < menuList.length; i++){\r\n            menuList[i].addEventListener('click', () => {\r\n                let val = menuList[i].getAttribute('trtd_action');\r\n                // cxcommand(this, val);\r\n                console.log(\"menuList[i].addEventListener('click'\")\r\n                this.diagram.__trtd[val]();\r\n                this.diagram.currentTool.stopTool();\r\n                return false\r\n                // setTimeout(()=>{\r\n                //     this.diagram.toolManager.contextMenuTool.hideContextMenu()\r\n                // },100)\r\n            })\r\n        }\r\n    }\r\n\r\n    addDiagramContextMenu(){\r\n      \r\n        // console.log(\"基类 addDiagramContextMenu\")\r\n        console.log(\"第二步 将自定义菜单与diagram绑定\")\r\n        // console.log(objNode)\r\n       \r\n\r\n        var that = this;\r\n        var myDiagram = this.diagram;\r\n        var cxTool = myDiagram.toolManager.contextMenuTool;\r\n        // This is the actual HTML context menu:\r\n\r\n        // var mainbox = document.getElementById('mainbox')\r\n        // mainbox.appendChild(div);\r\n        \r\n        // let menuList = mainbox.getElementsByClassName('context-menu')[0].getElementsByTagName('li');\r\n        // var cxElement = mainbox.getElementsByClassName('context-menu')[0]\r\n        console.log(this.cxElement)\r\n        \r\n        if(!this.cxElement){ // 外部没有传入菜单元素，则使用默认的菜单\r\n            if(!this.defaultCxElement){\r\n                this.defaultCxElement = this.customMenu()\r\n            }\r\n            var cxElement = this.defaultCxElement\r\n        }else{\r\n            var cxElement = this.cxElement\r\n        }\r\n        if(!cxElement){\r\n            return;\r\n        }\r\n        // We don't want the div acting as a context menu to have a (browser) context menu!\r\n        cxElement.addEventListener(\"contextmenu\", function(e) {\r\n            // this.onfocus();\r\n            e.preventDefault();\r\n            return false;\r\n        }, false);\r\n        // cxElement.addEventListener(\"blur\", function(e) {\r\n        //     cxTool.stopTool();\r\n        //     // maybe start another context menu\r\n        //     if (cxTool.canStart()) {\r\n        //         myDiagram.currentTool = cxTool;\r\n        //         cxTool.doMouseUp();\r\n        //     }\r\n        // }, false);\r\n        cxElement.tabIndex = \"1\";\r\n        // This is the override of ContextMenuTool.showContextMenu:\r\n        // This does not not need to call the base method.\r\n        cxTool.showContextMenu = function(contextmenu, obj) {\r\n            console.log('thisthisthis:', this.diagram);\r\n            console.log('thisthisthis:', this.diagram.model);\r\n    \r\n            console.log('this:', this.diagram.selection);\r\n            var diagram = this.diagram;\r\n            // console.log('diagram:', diagram);\r\n            if (diagram === null) return;\r\n            // Hide any other existing context menu\r\n            if (contextmenu !== this.currentContextMenu) {\r\n                this.hideContextMenu();\r\n            }\r\n\r\n            var node = myDiagram.findPartAt(myDiagram.lastInput.documentPoint, false);\r\n            this.currentContextMenu = contextmenu;\r\n            var mousePt = diagram.lastInput.viewPoint;\r\n            console.log(diagram.lastInput)\r\n            cxElement.style.left = mousePt.x + \"px\";\r\n            cxElement.style.top = mousePt.y + \"px\";\r\n            // console.log(diagram.lastInput.Dr.clientX)\r\n            // console.log(mousePt.x)\r\n            \r\n            // cxElement.style.left = diagram.lastInput.Dr.clientX + \"px\";\r\n            // cxElement.style.top = diagram.lastInput.Dr.clientY + \"px\";\r\n\r\n            if(that.showContextMenuListener){\r\n                return that.showContextMenuListener(this.diagram, node)\r\n            }\r\n\r\n            // ===========================================================\r\n            // Show only the relevant buttons given the current state.\r\n            var showMenus = that.getShowContextMenus(node)\r\n            let liL = cxElement.getElementsByTagName('li')\r\n            if(showMenus){\r\n                console.log(showMenus.split(',').length)\r\n                for(let i = 0; i < liL.length; i++){\r\n                    liL[i].style.display = 'none';\r\n                }\r\n                for(let i = 0; i < showMenus.split(',').length; i++){\r\n                    try{\r\n                        if(helpers.getElementByAttr(cxElement,\"li\",\"trtd_action\",showMenus.split(',')[i])[0]){\r\n                            helpers.getElementByAttr(cxElement,\"li\",\"trtd_action\",showMenus.split(',')[i])[0].style.display = 'block'\r\n                        }\r\n                        \r\n                    }catch(e){\r\n                        console.error(e)\r\n                        continue\r\n                    }\r\n                    // cxElement.getElementsByClassName(showIds.split(',')[i])[0].style.display = 'block';\r\n                }\r\n            }else{\r\n                if(showMenus == \"\"){\r\n                    for(let i = 0; i < liL.length; i++){\r\n                        liL[i].style.display = 'block';\r\n                    }\r\n                }else{\r\n                    for(let i = 0; i < liL.length; i++){\r\n                        liL[i].style.display = 'none';\r\n                    }\r\n                }\r\n            }\r\n\r\n            // Now show the whole context menu element\r\n            cxElement.style.display = \"block\";\r\n            // we don't bother overriding positionContextMenu, we just do it here:\r\n\r\n            // cxElement.style.left = x+10 + \"px\";\r\n            // cxElement.style.top = y-40 + \"px\";\r\n            // Remember that there is now a context menu showing\r\n            \r\n        }\r\n            // This is the corresponding override of ContextMenuTool.hideContextMenu:\r\n            // This does not not need to call the base method.\r\n        cxTool.hideContextMenu = function() {\r\n            if (this.currentContextMenu === null) return;\r\n            this.currentContextMenu = null;\r\n            cxElement.style.display = \"none\";\r\n            if(that.hideContextMenuListener){\r\n                return that.hideContextMenuListener(myDiagram)\r\n            }\r\n        }\r\n    }\r\n\r\n    getNodeContextMenu() {\r\n        return $(go.Adornment)\r\n\r\n        let style = {\r\n            // width: 120,\r\n            // height: 30,\r\n            // margin: 2,\r\n            // font: \"bold 14px sans-serif\",\r\n            // margin: 3,\r\n        }\r\n    \r\n        return $(go.Adornment, \"Vertical\",\r\n            $(\"ContextMenuButton\",\r\n                $(go.TextBlock, \"应用样式到所有同级节点\"), {\r\n                    click: function(e, obj) {\r\n                        menus.applyStyle2Level(e, obj);\r\n                    }\r\n                }),\r\n            $(\"ContextMenuButton\",\r\n                $(go.TextBlock, \"应用样式到同级节点\"), {\r\n                    click: function(e, obj) {\r\n                        menus.applyStyle2CurLevel(e, obj);\r\n                    }\r\n                }),\r\n            $(\"ContextMenuButton\",\r\n                $(go.TextBlock, \"应用样式到子节点\"), {\r\n                    click: function(e, obj) {\r\n                        menus.applyStyle2ChiLevel(e, obj);\r\n                    }\r\n                }),\r\n            $(\"ContextMenuButton\",\r\n                $(go.TextBlock, \"添加\"), {\r\n                    click: function(e, obj) {\r\n                        menus.addFollower(e);\r\n                    }\r\n                }),\r\n            $(\"ContextMenuButton\",\r\n                $(go.TextBlock, \"添加子节点\"), {\r\n                    click: function(e) {\r\n                        menus.startNewSpiral(e);\r\n                    }\r\n                }),\r\n            $(\"ContextMenuButton\",\r\n                $(go.TextBlock, \"定位当前节点\"), style, {\r\n                    click: function(e){\r\n\r\n                    }\r\n                }),\r\n    \r\n            $(\"ContextMenuButton\",\r\n                $(go.TextBlock, \"删除\"), style, {\r\n                    click: function(e, obj) {\r\n                        console.log('eeeeeeeeee:', e);\r\n                        e.diagram.commandHandler.deleteSelection();\r\n                    }\r\n                }),\r\n            // $(\"ContextMenuButton\",\r\n            //     $(go.TextBlock, \"添加图片\"), style, {\r\n            //         click: function(e, obj) {\r\n            //             insertPicture();\r\n            //         }\r\n            //     }),\r\n            // $(\"ContextMenuButton\",\r\n            //     $(go.TextBlock, \"移除图片\"), style, {\r\n            //         click: function(e, obj) {\r\n            //             removeNodePicture();\r\n            //         }\r\n            //     }),\r\n            $(\"ContextMenuButton\",\r\n                $(go.TextBlock, \"清空文本\"), style, {\r\n                    click: function(e, obj) {\r\n                        var myDiagram = e.diagram;\r\n                        var node = myDiagram.selection.first();\r\n                        if (node) {\r\n                            myDiagram.startTransaction();\r\n                            //node.data.text=\"\";\r\n                            myDiagram.model.setDataProperty(node.data, \"text\", \"\");\r\n                            myDiagram.commitTransaction();\r\n                        }\r\n                        //removeNodePicture();\r\n                    }\r\n                }),\r\n            $(\"ContextMenuButton\",\r\n                $(go.TextBlock, \"删除 DEL\"), style, {\r\n                    click: function(e, obj) {\r\n                        var myDiagram = e.diagram;\r\n                        var node = myDiagram.selection.first();\r\n                        if (node) {\r\n                            yunpan.yunpandel(e)\r\n                        }\r\n                        //removeNodePicture();\r\n                    }\r\n                }),\r\n            $(\"ContextMenuButton\",\r\n                $(go.TextBlock, \"增加 CTRL+X/Y\"), style, {\r\n                    click: function(e, obj) {\r\n                        var myDiagram = e.diagram;\r\n                        var node = myDiagram.selection.first();\r\n                        if (node) {\r\n                            if(node.data.loc.split(\" \")[1] === \"0\"&&node.data.category!==\"x\"){\r\n                                yunpan.addy(e)\r\n                            }else if(node.data.loc.split(\" \")[0] === \"0\"&&node.data.category!==\"y\"){\r\n                                yunpan.addx(e)\r\n                            }; \r\n                        }\r\n                        //removeNodePicture();\r\n                    }\r\n                }),\r\n            $(\"ContextMenuButton\",\r\n                $(go.TextBlock, \"删除 DEL\"), style, {\r\n                    click: function(e, obj) {\r\n                        var myDiagram = e.diagram;\r\n                        var node = myDiagram.selection.first();\r\n                        if (node) {\r\n                            yunpan.yunpandel(e)\r\n                        }\r\n                        //removeNodePicture();\r\n                    }\r\n                }),\r\n            $(\"ContextMenuButton\",\r\n                $(go.TextBlock, \"增加同级节点\"), style, {\r\n                    click: function(e, obj) {\r\n                        var myDiagram = e.diagram;\r\n                        var node = myDiagram.selection.first();\r\n                        if(myDiagram.selection.first().data.istemp){\r\n                            return\r\n                        }\r\n                        dipan.addFollowerGround(e);\r\n                    }\r\n                }),\r\n            $(\"ContextMenuButton\",\r\n                $(go.TextBlock, \"增加子节点\"), style, {\r\n                    click: function(e, obj) {\r\n                        var myDiagram = e.diagram;\r\n                        var node = myDiagram.selection.first();\r\n                        if(node.data.parent){\r\n                            var parentNode = node.diagram.findNodeForKey(node.data.parent);\r\n                            if(parentNode.data.istemp){\r\n                                return\r\n                            }\r\n                        }\r\n                        dipan.addNewCircle(e);\r\n                    }\r\n                }),\r\n            $(\"ContextMenuButton\",\r\n                $(go.TextBlock, \"删除\"), style, {\r\n                    click: function(e, obj) {\r\n                        var myDiagram = e.diagram;\r\n                        var node = myDiagram.selection.first();\r\n                        if(node.data.parent){\r\n                            var parentNode = node.diagram.findNodeForKey(node.data.parent);\r\n                            if(parentNode.data.istemp){\r\n                                return\r\n                            }\r\n                        }\r\n                        dipan.addNewCircle(e);\r\n                    }\r\n                }),\r\n                $(\"ContextMenuButton\",\r\n                $(go.TextBlock, \"复制副本\"), style, {\r\n                    click: function(e, obj) {\r\n                        var myDiagram = e.diagram;\r\n                        var node = myDiagram.selection.first();\r\n                        if(myDiagram.selection.first().data.istemp){\r\n                            return\r\n                        }\r\n                        dipan.addFollowerGround(e);\r\n                    }\r\n                }),\r\n            $(\"ContextMenuButton\",\r\n                $(go.TextBlock, \"权限设置\"), style, {\r\n                    click: function(e, obj) {\r\n                        var myDiagram = e.diagram;\r\n                        var node = myDiagram.selection.first();\r\n                        if(node.data.parent){\r\n                            var parentNode = node.diagram.findNodeForKey(node.data.parent);\r\n                            if(parentNode.data.istemp){\r\n                                return\r\n                            }\r\n                        }\r\n                        dipan.addNewCircle(e);\r\n                    }\r\n                }),\r\n            $(\"ContextMenuButton\",\r\n                $(go.TextBlock, \"删除\"), style, {\r\n                    click: function(e, obj) {\r\n                        var myDiagram = e.diagram;\r\n                        var node = myDiagram.selection.first();\r\n                        if(node.data.parent){\r\n                            var parentNode = node.diagram.findNodeForKey(node.data.parent);\r\n                            if(parentNode.data.istemp){\r\n                                return\r\n                            }\r\n                        }\r\n                        dipan.addNewCircle(e);\r\n                    }\r\n                })\r\n    \r\n        );\r\n    }\r\n\r\n    dokeyDownFn() {   \r\n            //快捷键\r\n            // function dokeyDownFn (myDiagram) {\r\n            var myDiagram = this.diagram;\r\n            var diagram = this.diagram;\r\n            var e = this.diagram.lastInput;\r\n            var cmd = myDiagram.commandHandler;\r\n            var node = myDiagram.selection.first();\r\n\r\n            if (e.event.altKey) {\r\n                if (e.key == \"Q\") {\r\n                    autoLayoutAll();\r\n                    return;\r\n                } else if (e.key == \"R\") {\r\n                    centerNode();\r\n                    return;\r\n                } else if (e.key == \"C\") {\r\n                    centerCurrentNode();\r\n                    return;\r\n                } else if (e.key == \"A\") {\r\n                    zoomToFit();\r\n                    return;\r\n                }\r\n            }\r\n            if (e.event.keyCode >= 65 && e.event.keyCode <= 90 && !e.event.altKey && !e.event.ctrlKey && !e.event.shiftKey) {\r\n                // e.bubbles = true;\r\n                e.bubbles = false;\r\n                diagram.__trtd.selectText(e);\r\n                return true;\r\n            }\r\n\r\n            if (e.event.keyCode === 13) { // could also check for e.control or e.shift\r\n                if (node && node.data.category == 'Root' ) {\r\n                    diagram.__trtd.addFollowerGround();\r\n                } else if(node && node.data.category == 'dipan'){\r\n                    diagram.__trtd.addFollowerGround();\r\n                }\r\n\r\n            } else if (e.event.keyCode === 9) { // could also check for e.control or e.shift\r\n                if (node && node.data.category == 'Root') {\r\n\r\n                    diagram.__trtd.addNewCircle();\r\n                } else if(node && node.data.category == 'dipan'){\r\n                    diagram.__trtd.addNewCircle();\r\n                }\r\n            } else if (e.key === \"t\") { // could also check for e.control or e.shift\r\n                if (cmd.canCollapseSubGraph()) {\r\n                    cmd.collapseSubGraph();\r\n                } else if (cmd.canExpandSubGraph()) {\r\n                    cmd.expandSubGraph();\r\n                }\r\n            } else if (e.key == \"Del\") {\r\n                if (myDiagram.selection.count == 0) {\r\n                    return;\r\n                }\r\n                diagram.__trtd.deleteSelection();\r\n            } else if (e.event.keyCode == 113) { //F2,覆盖地盘默认行为\r\n                diagram.__trtd.selectText();\r\n            } else if (e.event.keyCode == 37) { //左\r\n                diagram.__trtd.moveWithinNodes('left');\r\n            } else if (e.event.keyCode == 38) { //上\r\n                diagram.__trtd.moveWithinNodes('up');\r\n            } else if (e.event.keyCode == 39) { //右\r\n                diagram.__trtd.moveWithinNodes('right');\r\n            } else if (e.event.keyCode == 40) { //下\r\n                diagram.__trtd.moveWithinNodes('down');\r\n            } else {\r\n                // call base method with no arguments\r\n                go.CommandHandler.prototype.doKeyDown.call(cmd);\r\n            }\r\n            e.bubbles = false; //阻止事件冒泡到dom\r\n        // };\r\n\r\n        // return this.dokeyDownFn(this);\r\n    }\r\n}\r\n\r\nfunction computeEffectiveCollection(parts) {\r\n    console.log(\"computeEffectiveCollection\")\r\n    var coll = new go.Set();\r\n    var node = parts.first();\r\n    if (node) {\r\n        if(node.containingGroup && node.containingGroup.data.category == \"labelGroup\"){\r\n            var it = node.containingGroup.findSubGraphParts().iterator;\r\n            coll.add(node.containingGroup)\r\n            while(it.next()){\r\n                var n = it.value;\r\n                coll.add(n)\r\n            }\r\n        }else{\r\n            helpers.travelParts(node, function(p) {\r\n                coll.add(p);\r\n            })\r\n        }\r\n    } else {\r\n        coll.addAll(parts);\r\n    }\r\n    var tool = this;\r\n\r\n    return go.DraggingTool.prototype.computeEffectiveCollection.call(this, coll);\r\n};\r\n\r\nfunction sameGroup(fromnode, fromport, tonode, toport) {\r\n    //a node has 2 outer links at most\r\n    if (fromnode.findLinksOutOf().count >= 2) return;\r\n    //root node has 1 outer links at most\r\n    if (fromnode.findLinksOutOf().count >= 1 && fromnode.data.key == 1) return;\r\n    return fromnode.data.group === tonode.data.group;\r\n    // this could look at the fromport.fill and toport.fill instead,\r\n    // assuming that the ports are Shapes, which they are because portID was set on them,\r\n    // and that there is a data Binding on the Shape.fill\r\n}\r\n\r\nfunction cxcommand (obj, val) {\r\n    var diagram = obj.diagram;\r\n    var myDiagram = obj.diagram;\r\n    if (!(diagram.currentTool instanceof go.ContextMenuTool)) return;\r\n    switch (val) {\r\n        // case \"Paste\": diagram.commandHandler.pasteSelection(diagram.lastInput.documentPoint); break;\r\n        case \"addChildNodeMenu\":\r\n            tdAddChildNode(obj);\r\n            break;\r\n        case \"addLevelNodeMenu\":\r\n            tdAddLevelNode(obj);\r\n            break;\r\n        case \"changeDipanBgMenu\":\r\n            changeDipanBackgroundImg();\r\n            break;\r\n        case \"removeDipanBgMenu\":\r\n            removeDipanBackgroundImg(obj);\r\n            break;\r\n        case \"deleteNodeMenu\":\r\n            myDiagram.toolManager.textEditingTool.doCancel();\r\n            myDiagram.commandHandler.deleteSelection();\r\n            break;\r\n        case \"addNodePictureMenu\":\r\n            // jQuery(\"#insertimage\").modal('show');\r\n            // document.getElementById('insertimage').modal('show');\r\n            break; //特殊处理\r\n        case \"removeNodePictureMenu\":\r\n            removeNodePicture(obj);\r\n            break;\r\n        case \"clearNodeTextMenu\":\r\n            var node = myDiagram.selection.first();\r\n            if (node) {\r\n                myDiagram.startTransaction();\r\n                myDiagram.model.setDataProperty(node.data, \"text\", \"\");\r\n                myDiagram.commitTransaction();\r\n            };\r\n            break;\r\n        case \"locateRootNodeMenu\":\r\n            centerNode(obj);\r\n            break;\r\n        case \"showAllNodesMenu\":\r\n            zoomToFit(obj);\r\n            break;\r\n        case \"removeOutCycleMenu\":\r\n            removeOutCycle(obj);\r\n            break;\r\n        case \"centerPictureMenu\":\r\n            centerPicture(obj);\r\n            break;\r\n        case \"equalWidthHeightPictureMenu\":\r\n            equalWidthHeightPicture(obj);\r\n            break;\r\n        case \"bringToTopMenu\":\r\n            bringToLayer(\"Foreground\", obj);\r\n            break;\r\n        case \"bringToBackgroundMenu\":\r\n            bringToLayer(\"Background\", obj);\r\n            break;\r\n        case \"bringUpMenu\":\r\n            bringToLayer(null, obj);\r\n            break;\r\n        case \"layoutGroupMenu\":\r\n            autoLayoutAll(true, obj);\r\n            break;\r\n\r\n        case \"insertTextMenu\":\r\n            insertTextNode(obj);\r\n            break;\r\n        case \"duplicateNode\":\r\n            duplicateNode(obj);\r\n            break; // 复制节点\r\n        case \"insertTianpanMenu\":\r\n            myDiagram.toolManager.clickCreatingTool.insertPart(myDiagram.lastInput.documentPoint);\r\n            break;\r\n        //固定节点\r\n        case \"fixPictureMenu\":   \r\n        case \"activePictureMenu\":\r\n            //var node = myDiagram.findPartAt(myDiagram.lastInput.documentPoint, false);\r\n            var node = myDiagram.selection.first();\r\n            myDiagram.startTransaction();\r\n            myDiagram.model.setDataProperty(node.data, \"selectable\", node.data.selectable != undefined ? (!node.data.selectable) : false);\r\n            myDiagram.commitTransaction();\r\n            break;\r\n        case \"orderChildNode\":\r\n            orderChildNode(obj);\r\n            break;\r\n        case \"clearOrderChildNode\":\r\n            clearOrderChildNode(obj);\r\n            break;\r\n        case \"delYunpanAxis\":\r\n            // yunpan.yunpandel(obj);\r\n            break;\r\n        case \"addYunpanAxis\":\r\n            // var node = myDiagram.selection.first();\r\n            // if(node.data.loc.split(\" \")[1] === \"0\"&&node.data.category!==\"x\"){\r\n            //     yunpan.addy(obj)\r\n            // }else if(node.data.loc.split(\" \")[0] === \"0\"&&node.data.category!==\"y\"){\r\n            //     yunpan.addx(obj)\r\n            // }; \r\n            break;\r\n        case \"addLevelDipanNode\":\r\n            if(myDiagram.selection.first().data.istemp){\r\n                return\r\n            }\r\n            obj.addFollowerGround();\r\n            break;\r\n        case \"addChildDipanNode\":\r\n            var node = myDiagram.selection.first();\r\n                if(node.data.parent){\r\n                    var parentNode = node.diagram.findNodeForKey(node.data.parent);\r\n                    if(parentNode.data.istemp){\r\n                        return\r\n                    }\r\n                }\r\n            obj.addNewCircle(obj);\r\n            break;\r\n        case \"deleteDipanNode\":\r\n        // myDiagram.commandHandler.deleteSelection();\r\n        obj.deleteSelection();\r\n        break;\r\n    }\r\n    diagram.currentTool.stopTool();\r\n}\r\n\r\n\r\n\r\n\r\n// module.exports.Trtd = Trtd;\r\nmodule.exports.Trtd = Trtd;\n\n\n// WEBPACK FOOTER //\n// ./src/diagram/trtd.js","\r\n// var sampleNodeTemplate = require('./sampleNodeTemplate')\r\nvar waveNodeTemplate = require('./waveNodeTemplate')\r\n// var waveTailNodeTemplate = require('./waveTailNodeTemplate')\r\nvar waveGroupNodeTemplate = require('./waveGroupNodeTemplate')\r\nvar axisGroupNodeTemplate = require('./axisGroupNodeTemplate')\r\nvar iconTextNodeTemplate = require('./iconTextNodeTemplate')\r\nvar autoTextNodeTemplate = require('./autoTextNodeTemplate')\r\nvar labelGroupNodeTemplate = require('./labelGroupNodeTemplate')\r\n// var cbianNodeTemplate = require('./cbianNodeTemplate')\r\nvar picNodeTemplate = require('./picNodeTemplate')\r\nvar picGroupNodeTemplate = require('./picGroupNodeTemplate')\r\nvar yunGroupNodeTemplate = require('./yunGroupNodeTemplate')\r\nvar yunpanGroupNodeTemplate = require('./yunpanGroupNodeTemplate')\r\nvar shapeNodeTemplate = require('./shapeNodeTemplate')\r\nvar shapeTextNodeTemplate = require('./shapeTextNodeTemplate')\r\n\r\nmodule.exports =  function(nodeType, options){\r\n    var temp = `${nodeType}NodeTemplate`\r\n    console.log(\"factory:\",temp)\r\n    var nodeTemplateClass = eval(temp)\r\n    return new nodeTemplateClass(options)\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/nodeTemplate/factory.js","\n\tvar localization = {\n\t\t\"trtd\":{\n\t\t\t// \"en\":\"Spherical Revolving World\",\n\t\t\t\"en\":\"Turn Round TD\",\n\t\t\t\"chn\":\"圆转天地\"\n\t\t},\n\t\t\"save\":{\n\t\t\t\"en\":\"Save\",\n\t\t\t\"chn\":\"保存\"\n\t\t},\n\t\t\"preview\":{\n\t\t\t\"en\":\"Preview\",\n\t\t\t\"chn\":\"预览\"\n\t\t},\n\t\t\"logout\":{\n\t\t\t\"en\":\"Log out\",\n\t\t\t\"chn\":\"退出\"\n\t\t},\n\t\t\"menu\":{\n\t\t\t\"en\":\"Menu\",\n\t\t\t\"chn\":\"菜单\"\n\t\t},\n\t\t\"usual\":{\n\t\t\t\"en\":\"Common\",\n\t\t\t\"chn\":\"常用\"\n\t\t},\n\t\t\"thinking\":{\n\t\t\t\"en\":\"Train of Thought\",\n\t\t\t\"chn\":\"思路\"\n\t\t},\n\t\t\"appearance\":{\n\t\t\t\"en\":\"Appearance\",\n\t\t\t\"chn\":\"外观\"\n\t\t},\n\t\t\"view\":{\n\t\t\t\"en\":\"View\",\n\t\t\t\"chn\":\"视图\"\n\t\t},\n\t\t\"insertll\":{\n\t\t\t\"en\":\"Insert the Lower Leve\",\n\t\t\t\"chn\":\"插入下级\"\n\t\t},\n\t\t\"insertsl\":{\n\t\t\t\"en\":\"Insert Sibling Level\",\n\t\t\t\"chn\":\"插入同级\"\n\t\t},\n\t\t\"undo\":{\n\t\t\t\"en\":\"Undo\",\n\t\t\t\"chn\":\"撤销\"\n\t\t},\n\t\t\"redo\":{\n\t\t\t\"en\":\"Redo\",\n\t\t\t\"chn\":\"重做\"\n\t\t},\n\t\t\"cte\":{\n\t\t\t\"en\":\"Click to edit\",\n\t\t\t\"chn\":\"单击编辑\"\n\t\t},\n\t\t\"dce\":{\n\t\t\t\"en\":\"Double Click to Edit\",\n\t\t\t\"chn\":\"双击编辑内容\"\n\t\t},\n\t\t\"centertheme\":{\n\t\t\t\"en\":\"Central Theme\",\n\t\t\t\"chn\":\"中心主题\"\n\t\t},\n\t\t\"edit\":{\n\t\t\t\"en\":\"Edit\",\n\t\t\t\"chn\":\"编辑\"\n\t\t},\n\t\t\"remove\":{\n\t\t\t\"en\":\"Delete\",\n\t\t\t\"chn\":\"删除\"\n\t\t},\n\t\t\"radius\":{\n\t\t\t\"en\":\"Size\",\n\t\t\t\"chn\":\"大小\"\n\t\t},\n\t\t\"shape\":{\n\t\t\t\"en\":\"Shape\",\n\t\t\t\"chn\":\"形状\"\n\t\t},\n\t\t\"borderwidth\":{\n\t\t\t\"en\":\"Border Width\",\n\t\t\t\"chn\":\"边框宽度\"\n\t\t},\n\t\t\"noborder\":{\n\t\t\t\"en\":\"No Border\",\n\t\t\t\"chn\":\"无边框\"\n\t\t},\n\t\t\"borderstyle\":{\n\t\t\t\"en\":\"Border Style\",\n\t\t\t\"chn\":\"边框样式\"\n\t\t},\n\t\t\"fillcolor\":{\n\t\t\t\"en\":\"Fill Color\",\n\t\t\t\"chn\":\"填充色\"\n\t\t},\n\t\t\"bordercolor\":{\n\t\t\t\"en\":\"Border Color\",\n\t\t\t\"chn\":\"边框颜色\"\n\t\t},\n\t\t\"image\":{\n\t\t\t\"en\":\"Pictures\",\n\t\t\t\"chn\":\"图片\"\n\t\t},\n\t\t\"insert\":{\n\t\t\t\"en\":\"Insert\",\n\t\t\t\"chn\":\"插入\"\n\t\t},\n\t\t\"delete\":{\n\t\t\t\"en\":\"Remove\",\n\t\t\t\"chn\":\"移除\"\n\t\t},\n\t\t\"remark\":{\n\t\t\t\"en\":\"Comment\",\n\t\t\t\"chn\":\"备注\"\n\t\t},\n\t\t\"removeallnode\":{\n\t\t\t\"en\":\"Empty Nodes\",\n\t\t\t\"chn\":\"清空节点\"\n\t\t},\n\t\t\"removeallline\":{\n\t\t\t\"en\":\"Delete Lines\",\n\t\t\t\"chn\":\"清空连线\"\n\t\t},\n\t\t\"arrangelayout\":{\n\t\t\t\"en\":\"Arrange layout\",\n\t\t\t\"chn\":\"整理布局\"\n\t\t},\n\t\t\"previewSubPan\":{\n\t\t\t\"en\":\"Preview SubPan\",\n\t\t\t\"chn\":\"预览子盘\"\n\t\t},\n        \"arrowstyle\":{\n            \"en\":\"Arrow Style\",\n            \"chn\":\"箭头样式\"\n        },\n        \"linkstyle\":{\n            \"en\":\"Link Style\",\n            \"chn\":\"弧样式\"\n        },\n\t\t\"clearText\":{\n\t\t\t\"en\":\"Clear Text\",\n\t\t\t\"chn\":\"清空文本\"\n\t\t},\n\t\t\"tdautolayout\":{\n\t\t\t// \"en\":\"Auto-placement of the TianPan\",\n\t\t\t\"en\":\"Auto layout\",\n\t\t\t\"chn\":\"天盘自动布局\"\n\t\t},\n\t\t\"jumptonewnode\":{\n\t\t\t// \"en\":\"Automatically Redirect to the New Nodes\",\n\t\t\t\"en\":\"Auto locate\",\n\t\t\t\"chn\":\"自动跳转到新的节点\"\n\t\t},\n\t\t\"theme\":{\n\t\t\t\"en\":\"Subject\",\n\t\t\t\"chn\":\"主题\"\n\t\t},\n\t\t\"backcolor\":{\n\t\t\t\"en\":\"Background Color\",\n\t\t\t\"chn\":\"背景颜色\"\n\t\t},\n\t\t\"objofaction\":{\n\t\t\t\"en\":\"Object\",\n\t\t\t\"chn\":\"作用对象\"\n\t\t},\n\t\t\"oneobj\":{\n\t\t\t\"en\":\"Single Node\",\n\t\t\t\"chn\":\"单个节点\"\n\t\t},\n\t\t\"sibobj\":{\n\t\t\t\"en\":\"Sibling Nodes\",\n\t\t\t\"chn\":\"同级节点\"\n\t\t},\n\t\t\"allsibobj\":{\n\t\t\t\"en\":\"All Sibling Nodes\",\n\t\t\t\"chn\":\"所有同级节点\"\n\t\t},\n\t\t\"allnodes\":{\n\t\t\t\"en\":\"All Nodes\",\n\t\t\t\"chn\":\"所有节点\"\n\t\t},\n\t\t\"shade\":{\n\t\t\t\"en\":\"Shade\",\n\t\t\t\"chn\":\"阴影\"\n\t\t},\n\t\t\"font\":{\n\t\t\t\"en\":\"Font\",\n\t\t\t\"chn\":\"字体\"\n\t\t},\n\t\t\"fontsize\":{\n\t\t\t\"en\":\"Font Size\",\n\t\t\t\"chn\":\"字号\"\n\t\t},\n\t\t\"compactdegree\":{\n\t\t\t\"en\":\"Compact Level\",\n\t\t\t\"chn\":\"紧凑程度\"\n\t\t},\n\t\t\"compact\":{\n\t\t\t\"en\":\"Compact\",\n\t\t\t\"chn\":\"紧凑\"\n\t\t},\n\t\t\"sparse\":{\n\t\t\t\"en\":\"Sparse\",\n\t\t\t\"chn\":\"稀疏\"\n\t\t},\n\t\t\"eq\":{\n\t\t\t\"en\":\"Equal Interval\",\n\t\t\t\"chn\":\"等间距\"\n\t\t},\n\t\t\"spread\":{\n\t\t\t\"en\":\"Spread\",\n\t\t\t\"chn\":\"展开\"\n\t\t},\n\t\t\"firstl\":{\n\t\t\t\"en\":\"First Layer\",\n\t\t\t\"chn\":\"第一层\"\n\t\t},\n\t\t\"secondl\":{\n\t\t\t\"en\":\"Second Layer\",\n\t\t\t\"chn\":\"第二层\"\n\t\t},\n\t\t\"threel\":{\n\t\t\t\"en\":\"Third Layer\",\n\t\t\t\"chn\":\"第三层\"\n\t\t},\n\t\t\"fourl\":{\n\t\t\t\"en\":\"Fourth Layer\",\n\t\t\t\"chn\":\"第四层\"\n\t\t},\n\t\t\"fifthl\":{\n\t\t\t\"en\":\"Fifth Layer\",\n\t\t\t\"chn\":\"第五层\"\n\t\t},\n\t\t\"localnodes\":{\n\t\t\t\"en\":\"Location Nodes\",\n\t\t\t\"chn\":\"定位节点\"\n\t\t},\n\t\t\"rootnode\":{\n\t\t\t\"en\":\"Root Node\",\n\t\t\t\"chn\":\"根节点\"\n\t\t},\n\t\t\"currentnode\":{\n\t\t\t\"en\":\"Current Nodes\",\n\t\t\t\"chn\":\"当前节点\"\n\t\t},\n\t\t\"displayallnodes\":{\n\t\t\t\"en\":\"Display All Nodes\",\n\t\t\t\"chn\":\"显示所有节点\"\n\t\t},\n\t\t\"return\":{\n\t\t\t\"en\":\"Back\",\n\t\t\t\"chn\":\"返回\"\n\t\t},\n\t\t\"tianpan\":{\n\t\t\t\"en\":\"TianPan\",\n\t\t\t\"chn\":\"天盘\"\n\t\t},\n\t\t\"dipan\":{\n\t\t\t\"en\":\"DiPan\",\n\t\t\t\"chn\":\"地盘\"\n\t\t},\n\t\t\"open\":{\n\t\t\t\"en\":\"Open\",\n\t\t\t\"chn\":\"打开\"\n\t\t},\n\t\t\"saveas\":{\n\t\t\t\"en\":\"Save As\",\n\t\t\t\"chn\":\"另存为\"\n\t\t},\n\t\t\"help\":{\n\t\t\t\"en\":\"Help\",\n\t\t\t\"chn\":\"帮助\"\n\t\t},\n\t\t\"new\":{\n\t\t\t\"en\":\"New\",\n\t\t\t\"chn\":\"新建\"\n\t\t},\n\t\t\"commontemplate\":{\n\t\t\t\"en\":\"Common template\",\n\t\t\t\"chn\":\"常用模板\"\n\t\t},\n\t\t\"openlocalfile\":{\n\t\t\t\"en\":\"Open local file\",\n\t\t\t\"chn\":\"打开本地文件\"\n\t\t},\n\t\t\"importtext\":{\n\t\t\t\"en\":\"Import outline text\",\n\t\t\t\"chn\":\"导入大纲文本\"\n\t\t},\n\t\t\"recentlyfile\":{\n\t\t\t\"en\":\"Recently used files\",\n\t\t\t\"chn\":\"最近使用的文件\"\n\t\t},\n\t\t\"exportdata\":{\n\t\t\t\"en\":\"Export Data\",\n\t\t\t\"chn\":\"另存为txt数据\"\n\t\t},\n\t\t\"exporttext\":{\n\t\t\t\"en\":\"Export Outline Text\",\n\t\t\t\"chn\":\"导出大纲文本\"\n\t\t},\n\t\t\"exportimg\":{\n\t\t\t\"en\":\"Export Pictures\",\n\t\t\t\"chn\":\"导出图片\"\n\t\t},\n\t\t\"websupport\":{\n\t\t\t\"en\":\"Website Support\",\n\t\t\t\"chn\":\"网站支持\"\n\t\t},\n\t\t\"techsupport\":{\n\t\t\t\"en\":\"Technical Support\",\n\t\t\t\"chn\":\"技术支持\"\n\t\t},\n\t\t\"techsupportqq\":{\n\t\t\t\"en\":\"Technical Support to QQ Groups\",\n\t\t\t\"chn\":\"技术支持QQ群\"\n\t\t},\n\t\t\"shortcutkey\":{\n\t\t\t\"en\":\"Shortcut Key\",\n\t\t\t\"chn\":\"快捷键\"\n\t\t},\n\t\t\"addchildnode\":{\n\t\t\t\"en\":\"Add Child\",\n\t\t\t\"chn\":\"增加子节点\"\n\t\t},\n\t\t\"addsibnode\":{\n\t\t\t\"en\":\"Add Sibling\",\n\t\t\t\"chn\":\"增加同级节点\"\n\t\t},\n\t\t\"key\":{\n\t\t\t\"en\":\"Key\",\n\t\t\t\"chn\":\"键\"\n\t\t},\n\t\t\"or\":{\n\t\t\t\"en\":\"Or\",\n\t\t\t\"chn\":\"或\"\n\t\t},\n\t\t\"confirmedittext\":{\n\t\t\t\"en\":\"Confirm the completion of editing text\",\n\t\t\t\"chn\":\"编辑完文字确认\"\n\t\t},\n\t\t\"editnewline\":{\n\t\t\t\"en\":\"Edit text newline\",\n\t\t\t\"chn\":\"编辑文字换行\"\n\t\t},\n\t\t\"canceltextedit\":{\n\t\t\t\"en\":\"Cancel Text Editing\",\n\t\t\t\"chn\":\"取消编辑文字\"\n\t\t},\n\t\t\"activetextedit\":{\n\t\t\t\"en\":\"Activate Text Editing\",\n\t\t\t\"chn\":\"激活编辑文字\"\n\t\t},\n\t\t\"sanpak\":{\n\t\t\t\"en\":\"Select a node and press any key\",\n\t\t\t\"chn\":\"选中节点后按任意字母键\"\n\t\t},\n\t\t\"auxview\":{\n\t\t\t\"en\":\"Auxiliary View\",\n\t\t\t\"chn\":\"辅助查看\"\n\t\t},\n\t\t\"focusselectnode\":{\n\t\t\t\"en\":\"Focus on selected nodes\",\n\t\t\t\"chn\":\"聚焦选中节点\"\n\t\t},\n\t\t\"locateselectednode\":{\n\t\t\t\"en\":\"Locate selected nodes\",\n\t\t\t\"chn\":\"定位选中节点\"\n\t\t},\n\t\t\"locaterootnode\":{\n\t\t\t\"en\":\"Locate Root Nodes\",\n\t\t\t\"chn\":\"定位根节点\"\n\t\t},\n\t\t\"bigcanvas\":{\n\t\t\t\"en\":\"Enlarge Canvas\",\n\t\t\t\"chn\":\"放大画布\"\n\t\t},\n\t\t\"smallcanvas\":{\n\t\t\t\"en\":\"Narrow Canvas\",\n\t\t\t\"chn\":\"缩小画布\"\n\t\t},\n\t\t\"switchnode\":{\n\t\t\t\"en\":\"Switch selected nodes\",\n\t\t\t\"chn\":\"切换选择的节点\"\n\t\t},\n\t\t\"mttnsn\":{\n\t\t\t\"en\":\"Move to the next sibling node\",\n\t\t\t\"chn\":\"移动到下一个同级节点\"\n\t\t},\n\t\t\"mttlsn\":{\n\t\t\t\"en\":\"Move to the last sibling node\",\n\t\t\t\"chn\":\"移动到上一个节点\"\n\t\t},\n\t\t\"mttfsn\":{\n\t\t\t\"en\":\"Move to the first child node\",\n\t\t\t\"chn\":\"移动到第一个节点\"\n\t\t},\n\t\t\"mtfn\":{\n\t\t\t\"en\":\"Move to Father Node\",\n\t\t\t\"chn\":\"移动到父节点\"\n\t\t},\n\t\t\"direckey\":{\n\t\t\t\"en\":\"Direction Key\",\n\t\t\t\"chn\":\"方向键\"\n\t\t},\n\t\t\"servicetd\":{\n\t\t\t\"en\":\"Send Feedback\",\n\t\t\t\"chn\":\"我要给圆转天地提意见\"\n\t\t},\n\t\t\"cbottc\":{\n\t\t\t\"en\":\"Change background of the DiPan\",\n\t\t\t\"chn\":\"更换地盘背景\"\n\t\t},\n\t\t\"rbottc\":{\n\t\t\t\"en\":\"Remove background of the DiPan\",\n\t\t\t\"chn\":\"移除地盘背景\"\n\t\t},\n\t\t\"icn\":{\n\t\t\t\"en\":\"Insert child nodes\",\n\t\t\t\"chn\":\"插入子节点\"\n\t\t},\n\t\t\"addnodepic\":{\n\t\t\t\"en\":\"Add Node Pictures\",\n\t\t\t\"chn\":\"添加节点图片\"\n\t\t},\n\t\t\"removepicture\":{\n\t\t\t\"en\":\"Remove Pictures\",\n\t\t\t\"chn\":\"移除图片\"\n\t\t},\n\t\t\"emptynodetext\":{\n\t\t\t\"en\":\"Empty Node Text\",\n\t\t\t\"chn\":\"清空节点文本\"\n\t\t},\n\t\t\"insertnodetianpan\":{\n\t\t\t\"en\":\"Insert Nodes of TianPan\",\n\t\t\t\"chn\":\"插入天盘节点\"\n\t\t},\n\t\t\"inserttext\":{\n\t\t\t\"en\":\"Insert Text\",\n\t\t\t\"chn\":\"插入文本\"\n\t\t},\n\t\t\"centerpicture\":{\n\t\t\t\"en\":\"Center Pictures\",\n\t\t\t\"chn\":\"居中图片\"\n\t\t},\n\t\t\"ewah\":{\n\t\t\t\"en\":\"Equal Width and Hight\",\n\t\t\t\"chn\":\"等宽高\"\n\t\t},\n\t\t\"bringtofront\":{\n\t\t\t\"en\":\"Bring to Front\",\n\t\t\t\"chn\":\"置于顶层\"\n\t\t},\n\t\t\"bringtobottom\":{\n\t\t\t\"en\":'Bring to Bottom',\n\t\t\t\"chn\":\"置于底层\"\n\t\t},\n\t\t\"bringforward\":{\n\t\t\t\"en\":\"Bring Forward\",\n\t\t\t\"chn\":\"上移一层\"\n\t\t},\n\t\t\"fixnode\":{\n\t\t\t\"en\":\"Fixed Nodes\",\n\t\t\t\"chn\":\"固定节点\"\n\t\t},\n\t\t\"cancelfix\":{\n\t\t\t\"en\":\"Cancel Fixed\",\n\t\t\t\"chn\":\"取消固定\"\n\t\t},\n\t\t//strings:\"Theme Colors,Standard Colors,Web Colors,Theme Colors,Back to Palette,History,No history yet.\"\n\t\t\"themecolor\":{\n\t\t\t\"en\":\"Theme Colors\",\n\t\t\t\"chn\":\"主题颜色\"\n\t\t},\n\t\t\"standardcolor\":{\n\t\t\t\"en\":\"Standard Colors\",\n\t\t\t\"chn\":\"标准颜色\"\n\t\t},\n\t\t\"webcolor\":{\n\t\t\t\"en\":\"Web Colors\",\n\t\t\t\"chn\":\"更多颜色\"\n\t\t},\n\t\t\"backtop\":{\n\t\t\t\"en\":\"Back to Palette\",\n\t\t\t\"chn\":\"返回主题颜色\"\n\t\t},\n\t\t\"history\":{\n\t\t\t\"en\":\"History\",\n\t\t\t\"chn\":\"历史\"\n\t\t},\n\t\t\"nohistory\":{\n\t\t\t\"en\":\"No history yet\",\n\t\t\t\"chn\":\"暂无历史\"\n\t\t},\n\t\t\"week\":{\n\t\t\t\"en\":\"Week\",\n\t\t\t\"chn\":\"最近一周\"\n\t\t},\n\t\t\"Jan\":{\n\t\t\t\"en\":\"January\",\n\t\t\t\"chn\":\"一月\"\n\t\t},\n\t\t\"Feb\":{\n\t\t\t\"en\":\"February\",\n\t\t\t\"chn\":\"二月\"\n\t\t},\n\t\t\"Mar\":{\n\t\t\t\"en\":\"March\",\n\t\t\t\"chn\":\"三月\"\n\t\t},\n\t\t\"Apr\":{\n\t\t\t\"en\":\"April\",\n\t\t\t\"chn\":\"四月\"\n\t\t},\n\t\t\"May\":{\n\t\t\t\"en\":\"May\",\n\t\t\t\"chn\":\"五月\"\n\t\t},\n\t\t\"Jun\":{\n\t\t\t\"en\":\"June\",\n\t\t\t\"chn\":\"六月\"\n\t\t},\n\t\t\"Jul\":{\n\t\t\t\"en\":\"July\",\n\t\t\t\"chn\":\"七月\"\n\t\t},\n\t\t\"Aug\":{\n\t\t\t\"en\":\"August\",\n\t\t\t\"chn\":\"八月\"\n\t\t},\n\t\t\"Sep\":{\n\t\t\t\"en\":\"September\",\n\t\t\t\"chn\":\"九月\"\n\t\t},\n\t\t\"Oct\":{\n\t\t\t\"en\":\"October\",\n\t\t\t\"chn\":\"十月\"\n\t\t},\n\t\t\"Nov\":{\n\t\t\t\"en\":\"November\",\n\t\t\t\"chn\":\"十一月\"\n\t\t},\n\t\t\"Dec\":{\n\t\t\t\"en\":\"December\",\n\t\t\t\"chn\":\"十二月\"\n\t\t},\n\t\t\"insertimg\":{\n\t\t\t\"en\":\"Insert Pictures\",\n\t\t\t\"chn\":\"插入图片\"\n\t\t},\n\t\t\"imglist\":{\n\t\t\t\"en\":\"Pictures list\",\n\t\t\t\"chn\":\"图片列表\"\n\t\t},\n\t\t\"uploadimg\":{\n\t\t\t\"en\":\"Upload Picture\",\n\t\t\t\"chn\":\"上传图片\"\n\t\t},\n\t\t\"katong\":{\n\t\t\t\"en\":\"Cartoon Picture\",\n\t\t\t\"chn\":\"卡通图片\"\n\t\t},\n\t\t\"numbericon\":{\n\t\t\t\"en\":\"Number Icons\",\n\t\t\t\"chn\":\"数字图片\"\n\t\t},\n\t\t\"qipao\":{\n\t\t\t\"en\":\"Bubble\",\n\t\t\t\"chn\":\"气泡\"\n\t\t},\n\t\t\"custompic\":{\n\t\t\t\"en\":\"Custom Picture\",\n\t\t\t\"chn\":\"自定义图片\"\n\t\t},\n\t\t\"picture\":{\n\t\t\t\"en\":\"Picture\",\n\t\t\t\"chn\":\"图片\"\n\t\t},\n\t\t\"cancel\":{\n\t\t\t\"en\":\"Cancel\",\n\t\t\t\"chn\":\"取消\"\n\t\t},\n\t\t\"ok\":{\n\t\t\t\"en\":\"Ok\",\n\t\t\t\"chn\":\"确定\"\n\t\t},\n\t\t\"previewimg\":{\n\t\t\t\"en\":\"Preview Pictures\",\n\t\t\t\"chn\":\"预览图片\"\n\t\t},\n\t\t\"copyimg\":{\n\t\t\t\"en\":\"Copy Picture\",\n\t\t\t\"chn\":\"复制图片\"\n\t\t},\n\t\t\"copyimgsucces\":{\n\t\t\t\"en\":\"Already Copy Picture Into Clipboard\",\n\t\t\t\"chn\":\"成功复制图片到粘贴板\"\n\t\t},\n\t\t\"dragtoupload\":{\n\t\t\t\"en\":\"Drag to Upload Picture\",\n\t\t\t\"chn\":\"拖拽到此处上传\"\n\t\t},\n\t\t\"linkaddress\":{\n\t\t\t\"en\":\"Link Address\",\n\t\t\t\"chn\":\"链接地址\"\n\t\t},\n\t\t\"insertremark\":{\n\t\t\t\"en\":\"Insert Comment\",\n\t\t\t\"chn\":\"插入备注\"\n\t\t},\n\t\t\"insertlink\":{\n\t\t\t'en':\"Insert Link\",\n\t\t\t\"chn\":\"插入链接\"\n\t\t},\n\t\t\"copy\":{\n\t\t\t\"en\":\"copy\",\n\t\t\t\"chn\":\"复制\"\n\t\t},\n\t\t\"picdin\":{\n\t\t\t\"en\":\"Picture definition\",\n\t\t\t\"chn\":\"图片清晰度\"\n\t\t},\n\t\t\"hsacc\":{\n\t\t\t\"en\":\"Hierarchical Subject\",\n\t\t\t\"chn\":\"天盘层级主题\"\n\t\t},\n\t\t\"mtwtb\":{\n\t\t\t\"en\":\"Bold Border Subject\",\n\t\t\t\"chn\":\"天盘白字粗变主题\"\n\t\t},\n\t\t\"officetheme\":{\n\t\t\t\"en\":\"Office Subject\",\n\t\t\t\"chn\":\"Office主题\"\n\t\t},\n\t\t\"lctheme\":{\n\t\t\t\"en\":\"Light-coloured Subject\",\n\t\t\t\"chn\":\"浅色主题\"\n\t\t},\n\t\t\"web2theme\":{\n\t\t\t\"en\":\"web2.0 Subject\",\n\t\t\t\"chn\":\"Web2.0主题\"\n\t\t},\n\t\t\"metrotheme\":{\n\t\t\t\"en\":\"Metro Subject\",\n\t\t\t\"chn\":\"Metro主题\"\n\t\t},\n\t\t\"retrotheme\":{\n\t\t\t\"en\":\"Retro Subject\",\n\t\t\t\"chn\":\"复古主题\"\n\t\t},\n\t\t\"bustheme\":{\n\t\t\t\"en\":\"Business Subject\",\n\t\t\t\"chn\":\"商业主题\"\n\t\t},\n\t\t\"hiet1\":{\n\t\t\t\"en\":\"Hierachy Subject 1\",\n\t\t\t\"chn\":\"层次主题1\"\n\t\t},\n\t\t\"hiet2\":{\n\t\t\t\"en\":\"Hierachy Subject 2\",\n\t\t\t\"chn\":\"层次主题2\"\n\t\t},\n\t\t\"eayth\":{\n\t\t\t\"en\":\"Earlier Version Subject\",\n\t\t\t\"chn\":\"旧版主题\"\n\t\t},\n\t\t\"blankth\":{\n\t\t\t\"en\":\"Pure-black Subject\",\n\t\t\t\"chn\":\"纯黑色主题\"\n\t\t},\n\t\t\"transthe\":{\n\t\t\t\"en\":\"Transparent Subject\",\n\t\t\t\"chn\":\"透明主题\"\n\t\t},\n\t\t\"randomdipan\":{\n\t\t\t\"en\":\"Random Subject of the DiPan\",\n\t\t\t\"chn\":\"随机地盘主题\"\n\t\t},\n\t\t\"radomcolor1\":{\n\t\t\t\"en\":\"Random Colour 1\",\n\t\t\t\"chn\":\"随机色彩1\"\n\t\t},\n\t\t\"radomcolor2\":{\n\t\t\t\"en\":\"Random Colour 1\",\n\t\t\t\"chn\":\"随机色彩2\"\n\t\t},\n\t\t\"mylocalfile\":{\n\t\t\t\"en\":\"My local file\",\n\t\t\t\"chn\":\"我的本地文件\"\n\t\t},\n\t\t\"ut2c\":{\n\t\t\t\"en\":\"Up to 20 characters\",\n\t\t\t\"chn\":\"最多20个字符\"\n\t\t},\n\t\t\"success\":{\n\t\t\t\"en\":\"Success\",\n\t\t\t\"chn\":\"成功\"\n\t\t},\n\t\t\"danger\":{\n\t\t\t\"en\":\"Fail\",\n\t\t\t\"chn\":\"失败\"\n\t\t},\n\t\t\"info\":{\n\t\t\t\"en\":\"Info\",\n\t\t\t\"chn\":\"提示\"\n\t\t},\n\t\t\"strf\":{\n\t\t\t\"en\":\"Save the file in:Menu->Open->Recently used file\",\n\t\t\t\"chn\":\"文件保存在:菜单->打开->最近使用文件中\"\n\t\t},\n\t\t\"netonffline\":{\n\t\t\t\"en\":\"Network is not connected, commonly used template download failed\",\n\t\t\t\"chn\":\"网络未连接，常用模板下载失败\"\n\t\t},\n\t\t\"cantcheckver\":{\n\t\t\t\"en\":\"The network is not connected, the version of the test failed\",\n\t\t\t\"chn\":\"网络未连接，版本检测失败\"\n\t\t},\n\t\t\"spacebar\":{\n\t\t\t\"en\":\"Space bar\",\n\t\t\t\"chn\":\"空格键\"\n\t\t},\n\t\t\"supportmail\":{\n\t\t\t\"en\":\"Support Mail\",\n\t\t\t\"chn\":\"技术支持邮箱\"\n\t\t},\n\t\t\"updatesuccess\":{\n\t\t\t\"en\":\"Update sucess\",\n\t\t\t\"chn\":\"更新成功\"\n\t\t},\n\t\t\"blankText\":{\n\t\t\t\"en\":\"Blank text\",\n\t\t\t\"chn\":\"空白文本\"\n\t\t},\n\n\t  /**simditor\n\t  \t*\n\t  \t**/\n\t  \t'blockquote': {\n\t  \t\t'en':'Block Quote',\n\t  \t\t'chn':'引用'\n\t  \t},\n\t    'bold': {\n\t    \t'en':'Bold',\n\t    \t'chn':'加粗文字'\n\t    },\n\t    'code': {\n\t    \t'en':'Code',\n\t    \t'chn':'插入代码'\n\t    },\n\t    'color': {\n\t    \t'en':'Text Color',\n\t    \t'chn':'文字颜色'\n\t    },\n\t    'coloredText': {\n\t    \t'en':'Colored Text',\n\t    \t'chn':'彩色文字'\n\t    },\n\t    'hr': {\n\t    \t'en':'Horizontal Line',\n\t    \t'chn':'分隔线'\n\t    },\n\t    'image': {\n\t    \t'en':'Insert Image',\n\t    \t'chn':'插入图片'\n\t    },\n\t    'externalImage': {\n\t    \t'en':'External Image',\n\t    \t'chn':'外链图片'\n\t    },\n\t    'uploadImage': {\n\t    \t'en':'Upload Image',\n\t    \t'chn':'上传图片'\n\t    },\n\t    'uploadFailed': {\n\t    \t'en':'Upload failed',\n\t    \t'chn':'上传失败了'\n\t    },\n\t    'uploadError': {\n\t    \t'en':'Error occurs during upload',\n\t    \t'chn':'上传出错了'\n\t    },\n\t    'imageUrl': {\n\t    \t'en':'Url',\n\t    \t'chn':'图片地址'\n\t    },\n\t    'imageSize': {\n\t    \t'en':'Size',\n\t    \t'chn':'图片尺寸'\n\t    },\n\t    'imageAlt': {\n\t    \t'en':'Alt',\n\t    \t'chn':'图片描述'\n\t    },\n\t    'restoreImageSize': {\n\t    \t'en':'Restore Origin Size',\n\t    \t'chn':'还原图片尺寸'\n\t    },\n\t    'uploading': {\n\t    \t'en':'Uploading',\n\t    \t'chn':'正在上传'\n\t    },\n\t    'indent': {\n\t    \t'en':'Indent',\n\t    \t'chn':'向右缩进'\n\t    },\n\t    'outdent': {\n\t    \t'en':'Outdent',\n\t    \t'chn':'向左缩进'\n\t    },\n\t    'italic': {\n\t    \t'en':'Italic',\n\t    \t'chn':'斜体文字'\n\t    },\n\t    'link': {\n\t    \t'en':'Insert Link',\n\t    \t'chn':'插入链接'\n\t    },\n\t    'linkText': {\n\t    \t'en':'Text',\n\t    \t'chn':'链接文字'\n\t    },\n\t    'linkUrl': {\n\t    \t'en':'Url',\n\t    \t'chn':'链接地址'\n\t    },\n\t    'linkTarget': {\n\t    \t'en':'Target',\n\t    \t'chn':'打开方式'\n\t    },\n\t    'openLinkInCurrentWindow': {\n\t    \t'en':'Open link in current window',\n\t    \t'chn':'在新窗口中打开'\n\t    },\n\t    'openLinkInNewWindow': {\n\t    \t'en':'Open link in new window',\n\t    \t'chn':'在当前窗口中打开'\n\t    },\n\t    'removeLink': {\n\t    \t'en':'Remove Link',\n\t    \t'chn':'移除链接'\n\t    },\n\t    'ol': {\n\t    \t'en':'Ordered List',\n\t    \t'chn':'有序列表'\n\t    },\n\t    'ul': {\n\t    \t'en':'Unordered List',\n\t    \t'chn':'无序列表'\n\t    },\n\t    'strikethrough': {\n\t    \t'en':'Strikethrough',\n\t    \t'chn':'删除线文字'\n\t    },\n\t    'table': {\n\t    \t'en':'Table',\n\t    \t'chn':'表格'\n\t    },\n\t    'deleteRow': {\n\t    \t'en':'Delete Row',\n\t    \t'chn':'删除行'\n\t    },\n\t    'insertRowAbove': {\n\t    \t'en':'Insert Row Above',\n\t    \t'chn':'在上面插入行'\n\t    },\n\t    'insertRowBelow': {\n\t    \t'en':'Insert Row Below',\n\t    \t'chn':'在下面插入行'\n\t    },\n\t    'deleteColumn': {\n\t    \t'en':'Delete Column',\n\t    \t'chn':'删除列'\n\t    },\n\t    'insertColumnLeft': {\n\t    \t'en':'Insert Column Left',\n\t    \t'chn':'在左边插入列'\n\t    },\n\t    'insertColumnRight': {\n\t    \t'en':'Insert Column Right',\n\t    \t'chn':'在右边插入列'\n\t    },\n\t    'deleteTable': {\n\t    \t'en':'Delete Table',\n\t    \t'chn':'删除表格'\n\t    },\n\t    'title': {\n\t    \t'en':'Title',\n\t    \t'chn':'标题'\n\t    },\n\t    'normalText': {\n\t    \t'en':'Text',\n\t    \t'chn':'普通文本'\n\t    },\n\t    'underline': {\n\t    \t'en':'Underline',\n\t    \t'chn':'下划线文字'\n\t    },\n\t    'alignment': {\n\t    \t'en':'Alignment',\n\t    \t'chn':'水平对齐'\n\t    },\n\t    'alignCenter': {\n\t    \t'en':'Align Center',\n\t    \t'chn':'居中'\n\t    },\n\t    'alignLeft': {\n\t    \t'en':'Align Left',\n\t    \t'chn':'居左'\n\t    },\n\t    'alignRight': {\n\t    \t'en':'Align Right',\n\t    \t'chn':'居右'\n\t    },\n\t    'selectLanguage': {\n\t    \t'en':'Select Language',\n\t    \t'chn':'选择程序语言'\n\t    },\n\t    'fontScale': {\n\t    \t'en':'Font Size',\n\t    \t'chn':'字体大小'\n\t    },\n\t    'fontScaleXLarge': {\n\t    \t'en':'X Large Size',\n\t    \t'chn':'超大字体'\n\t    },\n\t    'fontScaleLarge': {\n\t    \t'en':'Large Size',\n\t    \t'chn':'大号字体'\n\t    },\n\t    'fontScaleNormal': {\n\t    \t'en':'Normal Size',\n\t    \t'chn':'正常大小'\n\t    },\n\t    'fontScaleSmall': {\n\t    \t'en':'Small Size',\n\t    \t'chn':'小号字体'\n\t    },\n\t    'fontScaleXSmall': {\n\t    \t'en':'X Small Size',\n\t    \t'chn':'超小字体'\n\t    },\n\t    'savesuccess':{\n\t    \t'en':'Save successful',\n\t    \t'chn':'保存成功'\n\t    },\n\t    'failsuccess':{\n\t    \t'en':'Save failed',\n\t    \t'chn':'保存失败'\n\t    },\n\t\t'layoutmode':{\n\t    \t'en':'Layout Mode',\n\t    \t'chn':'布局方式'\n\t\t},\n\t\t'outequaldivid':{\n\t\t\t'en':'Divided by the last layer',\n\t\t\t'chn':'外圈均分'\n\t\t},\n\t\t'innerequaldivid':{\n\t\t\t'en':'Divided by the first layer',\n\t\t\t'chn':'内圈均分'\n\t\t},\n\t\t'givenlayer':{\n\t\t\t'en':'Designate',\n\t\t\t'chn':'指定层均分'\n\t\t},\n\t\t'textdirection':{\n\t\t\t'en':'Text Direction',\n\t\t\t'chn':'文字方向'\n\t\t},\n\t\t'textrotate':{\n\t\t\t'en':'Rotate',\n\t\t\t'chn':'旋转'\n\t\t},\n\t\t'textoutside':{\n\t\t\t'en':'Toward the outside',\n\t\t\t'chn':'放射'\n\t\t},\n\t\t'upwards':{\n\t\t\t'en':'Upwards',\n\t\t\t'chn':'正向'\n\t\t},\n\t\t'sectorthickness':{\n\t\t\t'en':'Sector thickness',\n\t\t\t'chn':'扇区宽度'\n\t\t},\n\t\t'thicknessrange':{\n\t\t\t'en':'Range 100~300',\n\t\t\t'chn':'范围 100~300'\n\t\t},\n\t\t'currentfile':{\n\t\t\t'en':\"Current File\",\n\t\t\t'chn':'编辑中'\n\t\t},\n\t\t'uploadsuccess':{\n\t\t\t'en':'Upload successful',\n\t\t\t'chn':'上传成功'\n\t\t},\n\t\t'deletenodeinfo':{\n\t\t\t'en':'Are you sure to delete the node and its child nodes?',\n\t\t\t'chn':'删除节点会删除它的所有子节点，确实要删除吗？'\n\t\t},\n\t\t'exporttdp':{\n\t\t\t'en':'Save as .tdp shared file',\n\t\t\t'chn':'另存为.tdp共享文件'\n\t\t},\n\t\t\"hypertype\":{\n\t\t\t\"en\":\"Type\",\n\t\t\t\"chn\":\"链接类型\"\n\t\t},\n\t\t\"url\":{\n\t\t\t\"en\":\"URL\",\n\t\t\t\"chn\":\"网址\"\n\t\t},\n\t\t\"localfile\":{\n\t\t\t\"en\":\"Local file\",\n\t\t\t\"chn\":\"本地文件\"\n\t\t},\n\t\t\"tiandipan\":{\n\t\t\t\"en\":\"Tianpan or Dipan\",\n\t\t\t\"chn\":\"天地盘\"\n\t\t},\n\t\t\"link\":{\n\t\t\t\"en\":\"Hyperlink\",\n\t\t\t\"chn\":\"链接\"\n\t\t},\n\t\toutlineeditor:{\n\t\t\ten: \"Outline Editor\",\n\t\t\tchn: \"大纲编辑\"\n\t\t},\n\t\tmodificationbuttons: {\n\t\t\ten: \"Modification Buttons\",\n\t\t\tchn: \"修改按钮\"\n\t\t},\n\t\tbrowsingbuttons: {\n\t\t\ten: \"Browsing Buttons\",\n\t\t\tchn: \"浏览按钮\"\n\t\t},\n\t\tshow: {\n\t\t\ten: \"Show\",\n\t\t\tchn: \"显示\"\n\t\t},\n\t\thide: {\n\t\t\ten: \"Hide\",\n\t\t\tchn:\"隐藏\"\n\t\t},\n\t\tnewnode: {\n\t\t\ten: \"New Node\",\n\t\t\tchn: \"新节点\"\n\t\t},\n\t\tmoveupnode: {\n\t\t\ten: \"Move up\",\n\t\t\tchn: \"上移节点\"\n\t\t},\n\t\tmovedownnode: {\n\t\t\ten: \"Move down\",\n\t\t\tchn: \"下移节点\"\n\t\t},\n\t\tremovenode: {\n\t\t\ten: \"Remove\",\n\t\t\tchn: \"删除节点\"\n\t\t},\n\t\teditnode: {\n\t\t\ten: \"Edit Node\",\n\t\t\tchn: \"编辑节点\"\n\t\t},\n\t\tprevnode: {\n\t\t\ten: \"Select Previous\",\n\t\t\tchn: \"上一个节点\"\n\t\t},\n\t\tnextnode: {\n\t\t\ten: \"Select Next\",\n\t\t\tchn: \"下一个节点\"\n\t\t},\n\t\texpandnode: {\n\t\t\ten: \"Expand\",\n\t\t\tchn: \"展开节点\"\n\t\t},\n\t\tcollapsenode: {\n\t\t\ten: \"Collapse\",\n\t\t\tchn: \"折叠节点\"\n\t\t},\n\t\texpandall: {\n\t\t\ten: \"Expand All\",\n\t\t\tchn: \"全部展开\"\n\t\t},\n\t\tcollapseall: {\n\t\t\ten: \"Collapse All\",\n\t\t\tchn: \"全部折叠\"\n\t\t},\n\t\tpreview: {\n\t\t\ten: \"Preview\",\n\t\t\tchn: \"预览\"\n\t\t},\n\t\tcancel: {\n\t\t\ten: \"Cancel\",\n\t\t\tchn: \"取消\"\n\t\t},\n\t\tapply: {\n\t\t\ten: \"Apply\",\n\t\t\tchn: \"应用\"\n\t\t},\n\t\t'openpreviewimg':{\n\t\t\t'en':'Preview image is loading',\n\t\t\t'chn':'正在打开预览图片'\n\t\t},\n\t\t'tempnodetips':{\n\t\t\t'en':'This is a temp node',\n\t\t\t'chn':'这是临时节点'\n\t\t},\n\t\tbuildtdp:{\n\t\t\ten:'Build .tdp shared file',\n\t\t\tchn:'生成.tdp文件下载'\n        },\n\t\t'deleteconfirm':{\n\t\t\ten:'Are you sure to clear all the nodes?',\n\t\t\tchn:'确定要清空节点？'\n\t\t},\n\t\t\"selecttargertnode\": {\n\t\t\ten: \"Select Target Node\",\n\t\t\tcn: \"请选择目标节点\"\n\t\t},\n\t\t\"link2web\": {\n\t\t\ten: \"Link to Webpage\",\n\t\t\tcn: \"链接网页\"\n\t\t},\n\t\t\"link2node\": {\n\t\t\ten: \"Link to Node\",\n\t\t\tcn: \"链接节点\"\n\t\t},\n\t\t\"removelink\": {\n\t\t\ten: \"Remove Link\",\n\t\t\tcn: \"移除节点\"\n\t\t},\n\t\t\"addtemp\": {\n\t\t\ten: \"Add Template\",\n\t\t\tcn: \"添加模板\"\n\t\t},\n\t\tbuildtdp:{\n\t\t\ten:'Build .tdp shared file',\n\t\t\tchn:'生成.tdp文件下载'\n        },\n\t\t'deleteconfirm':{\n\t\t\ten:'Are you sure to clear all the nodes?',\n\t\t\tchn:'确定要清空节点？'\n        },\n\t\tsuccess:{\n        \ten:'Success',\n        \tchn:\"成功\"\n        },\n\t\twarning:{\n        \ten:'Warning',\n        \tchn:'警告'\n        },\n\t\terror:{\n        \ten:'Failed',\n        \tchn:'失败'\n\t\t},\n\t\t\t\t\"unsupportfile\": {\n\t\t\ten: \"Unsupported File!\",\n\t\t\tcn: \"不支持该导入文件\"\n\t\t}\n\t}\n\tvar trans = function(key){\n\t\treturn localization[key] ? (localization[key][localStorage.getItem(\"language\")] ? localization[key][localStorage.getItem(\"language\")] :localization[key]['chn']) : key;\n\t};\n\nmodule.exports = {trans:trans};\n\n\n// WEBPACK FOOTER //\n// ./src/assets/localization.js","// 'use strict';\n\nlet typeModules = {};\nconsole.log(\"hardcorelog   aaaaaaaaaaaaaaa\")\ntypeModules['tianpan'] = require(`./diagram/tianpan`)\ntypeModules['dipan'] = require(`./diagram/dipan`)\ntypeModules['jin'] = require(`./diagram/jin`)\ntypeModules['huo'] = require(`./diagram/huo`)\ntypeModules['shui'] = require(`./diagram/shui`)\ntypeModules['yunpan'] = require(`./diagram/yunpan`)\ntypeModules['wheel'] = require(`./diagram/wheel`)\ntypeModules['dspiral'] = require(`./diagram/dspiral`)\n// typeModules['yunpanhome'] = require(`./diagram/yunpanhome`)\n\n\nif(IS_PROD){\n    console.log(\"生产环境屏蔽调试日志\")\n    // console.log   = function(){\n        \n    // }\n}\n// console.error   = function(...messages){\n//     logger.error(`${JSON.stringify(messages)}`)\n// }\n\nclass Trtd {\n\tconstructor(div, config){\n\n\t\ttry{\n            if(config.model){\n                var tmpModel = go.Model.fromJson(config.model);\n                if(tmpModel && tmpModel.modelData && tmpModel.modelData.type){\n                    config.type = tmpModel.modelData.type\n                }\n            }\n        }catch(e){\n            console.error(e)\n        }\n\t\tconsole.log(\"type:\",config.type)\n\t\tvar trtdClass = typeModules[config.type]\n\t\treturn new trtdClass(div, config);\n\t}\n}\n\nTrtd.go = go;\n/*eslint-disable no-undef */\nTrtd.version = TRTD_VERSION\n/*eslint-enable no-undef */\nconsole.info(`Trtd version:${Trtd.version}`)\nwindow.localStorage.setItem(\"HARDCORE_VERSION\",Trtd.version)\nif (typeof window !== 'undefined') {\n\twindow.Trtd = Trtd;\n}\n\n// export default Trtd;\nmodule.exports = Trtd\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","//\n\nvar $ = go.GraphObject.make;\nvar Base = require(\"./base\");\nvar helpers = require(\"../helpers/helpers.gojs\");\n\n// this is a Part.dragComputation function for limiting where a Node may be dragged\nfunction stayInGroup(part, pt, gridpt) {\n  // don't constrain top-level nodes\n  var grp = part.containingGroup;\n  if (grp === null) return pt;\n  // try to stay within the background Shape of the Group\n  var back = grp.resizeObject;\n  if (back === null) return pt;\n  // allow dragging a Node out of a Group if the Shift key is down\n  if (part.diagram.lastInput.shift) return pt;\n  var p1 = back.getDocumentPoint(go.Spot.TopLeft);\n  var p2 = back.getDocumentPoint(go.Spot.BottomRight);\n  var b = part.actualBounds;\n  var loc = part.location;\n  // find the padding inside the group's placeholder that is around the member parts\n  // var m = grp.placeholder.padding;\n  // now limit the location appropriately\n  var x = Math.max(p1.x, Math.min(pt.x, p2.x - b.width - 1)) + (loc.x - b.x);\n  var y = Math.max(p1.y, Math.min(pt.y, p2.y - b.height - 1)) + (loc.y - b.y);\n  return new go.Point(x, y);\n}\n\nclass WaveNodeTemplate extends Base {\n  constructor(options) {\n    super(options);\n    // this.nodeProperties = {}\n  }\n\n  makeGeo(data, shape, options) {\n    // this is much more efficient than calling go.GraphObject.make:\n    var { radiusX = 150, radiusY = 100 } = data;\n    radiusX = shape.part.findObject(\"main\").width / 2;\n    radiusY = shape.part.findObject(\"main\").height / 2;\n    // console.log(\"makeGeo999999999999999999999999999\",radiusX,radiusY)\n    var geo = new go.Geometry().add(\n      new go.PathFigure(0, 0) // start point\n        .add(\n          new go.PathSegment(\n            go.PathSegment.SvgArc,\n            radiusX * 2,\n            0,\n            radiusX,\n            radiusY,\n            0,\n            1,\n            options.clockwiseFlag ? 1 : 0\n          )\n        )\n    );\n    geo.defaultStretch = go.GraphObject.Fill;\n    return geo;\n  }\n\n  makeGeoWave(data, shape, options) {\n    // this is much more efficient than calling go.GraphObject.make:\n    var { radiusX = 150, radiusY = 100 } = data;\n    radiusX = shape.part.findObject(\"main\").width / 2;\n    radiusY = shape.part.findObject(\"main\").height / 2;\n    // console.log(\"makeGeo999999999999999999999999999\",radiusX,radiusY)\n    var seg = new go.PathSegment(\n      go.PathSegment.QuadraticBezier,\n      radiusX * 2,\n      0, //describe the end point\n      radiusX,\n      radiusY * (options.clockwiseFlag ? -1 : 1) // describe the only control point\n      // radiusX*2,0,radiusX, radiusY,0,1,options.clockwiseFlag?1:0\n    );\n\n    if (data.role == \"waveTail\") {\n      seg = new go.PathSegment(\n        go.PathSegment.QuadraticBezier,\n        radiusX,\n        radiusY * (options.clockwiseFlag ? -1 : 1), //describe the end point\n        radiusX / 2,\n        radiusY * (options.clockwiseFlag ? -1 : 1) // describe the only control point\n        // radiusX*2,0,radiusX, radiusY,0,1,options.clockwiseFlag?1:0\n      );\n\n      // seg = new go.PathSegment(go.PathSegment.Bezier,\n      //   radiusX, radiusY*(options.clockwiseFlag?-1:1), //describe the end point\n      //   x1, y1 ,//describe the first control point\n      //   x2, y2, // describe the second control point\n      //   radiusX, radiusY*(options.clockwiseFlag?-1:1), // describe the only control point\n      // // radiusX*2,0,radiusX, radiusY,0,1,options.clockwiseFlag?1:0\n      //     )\n    }\n\n    // seg.endX = radiusX\n    // seg.endY = 0\n    var geo = new go.Geometry().add(\n      new go.PathFigure(0, 0) // start point\n        .add(seg)\n    );\n    geo.defaultStretch = go.GraphObject.None;\n    return geo;\n  }\n\n  getShiHalfEllipseShape() {\n    return $(\n      go.Shape,\n      {\n        name: \"XU\",\n        strokeWidth: 2,\n        stroke: \"#cb1c27\",\n        fill: \"rgba(0,66,0,0)\",\n        // background: \"yellow\",\n        stretch: go.GraphObject.Uniform,\n        alignment: go.Spot.Bottom,\n        alignmentFocus: go.Spot.Bottom\n        // row:1, column:0,margin:0\n      },\n      // new go.Binding(\"alignment\",\"\",function(data, shape){\n      //   if(data.flip){\n      //     return go.Spot.Top\n      //   }\n      //   return go.Spot.Bottom\n      // }),\n      // new go.Binding(\"alignmentFocus\",\"\",function(data, shape){\n      //   if(data.flip){\n      //     return go.Spot.Top\n      //   }\n      //   return go.Spot.Bottom\n      // }),\n      new go.Binding(\"geometry\", \"\", (data, shape) => {\n        var clockwiseFlag = 0;\n        if (data.order % 2 == 0) {\n          clockwiseFlag = 1;\n        }\n        if (data.flip) {\n          // clockwiseFlag = 1;\n        }\n        // console.log(`data.oliveType: ${data.oliveType}`)\n        if (data.oliveType == \"Ellipse\") {\n          // console.log(``)\n          return this.makeGeo(data, shape, { clockwiseFlag: clockwiseFlag });\n        }\n        return this.makeGeoWave(data, shape, { clockwiseFlag: clockwiseFlag });\n      }),\n      new go.Binding(\"stroke\", \"shiStroke\").makeTwoWay(),\n      new go.Binding(\"strokeWidth\", \"shiStrokeWidth\").makeTwoWay(),\n      // new go.Binding(\"strokeDashArray\", \"shiStrokeDashArray\").makeTwoWay(),\n      new go.Binding(\"strokeDashArray\", \"shiStrokeDashArray\", function(v) {\n        return JSON.parse(v);\n      }).makeTwoWay(function(v) {\n        return JSON.stringify(v);\n      }),\n      new go.Binding(\"desiredSize\", \"desiredSize\", function(v) {\n        var size = new go.Size(v.width, v.height / 2);\n        // console.log(\"v:\",v)\n        return size;\n      }).ofObject(\"main\")\n    );\n  }\n\n  getXuHalfEllipseShape() {\n    return $(\n      go.Shape,\n      {\n        name: \"SHI\",\n        strokeWidth: 2,\n        stroke: \"#0e399d\",\n        fill: \"rgba(0,66,0,0)\",\n        // background: \"gray\",\n        stretch: go.GraphObject.Uniform,\n        alignment: go.Spot.Bottom,\n        strokeDashArray: [10, 5],\n        alignmentFocus: go.Spot.Bottom\n        // row:1, column:0,margin:0\n      },\n      // new go.Binding(\"alignment\",\"\",function(data, shape){\n      //   if(data.flip){\n      //     return go.Spot.Top\n      //   }\n      //   return go.Spot.Bottom\n      // }),\n      // new go.Binding(\"alignmentFocus\",\"\",function(data, shape){\n      //   if(data.flip){\n      //     return go.Spot.Top\n      //   }\n      //   return go.Spot.Bottom\n      // }),\n      new go.Binding(\"geometry\", \"\", (data, shape) => {\n        var clockwiseFlag = 1;\n        if (data.order % 2 == 0) {\n          clockwiseFlag = 0;\n        }\n        // if(data.flip){\n        //   clockwiseFlag = 0;\n        // }\n        // console.log(`data.oliveType1: ${data.oliveType}`)\n        if (data.oliveType == \"Ellipse\") {\n          // console.log(`data.oliveType2: ${data.oliveType}`)\n          return this.makeGeo(data, shape, { clockwiseFlag: clockwiseFlag });\n        }\n        // console.log(`data.oliveType3: ${data.oliveType}`)\n        return this.makeGeoWave(data, shape, { clockwiseFlag: clockwiseFlag });\n      }),\n      new go.Binding(\"stroke\", \"xuStroke\").makeTwoWay(),\n      new go.Binding(\"strokeWidth\", \"xuStrokeWidth\").makeTwoWay(),\n      // new go.Binding(\"strokeDashArray\", \"xuStrokeDashArray\").makeTwoWay(),\n      new go.Binding(\"strokeDashArray\", \"xuStrokeDashArray\", function(v) {\n        return JSON.parse(v);\n      }).makeTwoWay(function(v) {\n        return JSON.stringify(v);\n      }),\n      new go.Binding(\"desiredSize\", \"desiredSize\", function(v) {\n        var size = new go.Size(v.width, v.height / 2);\n        // console.log(\"v:\",v)\n        return size;\n      }).ofObject(\"main\")\n    );\n  }\n\n  getTailShiShape() {\n    return $(\n      go.Shape,\n      {\n        name: \"XU\",\n        strokeWidth: 2,\n        stroke: \"#cb1c27\",\n        fill: \"rgba(0,66,0,0)\",\n        // background: \"yellow\",\n        stretch: go.GraphObject.None,\n        alignment: go.Spot.Bottom,\n        alignmentFocus: go.Spot.Bottom\n        // row:1, column:0,margin:0\n      },\n      // new go.Binding(\"alignment\",\"\",function(data, shape){\n      //   if(data.flip){\n      //     return go.Spot.Top\n      //   }\n      //   return go.Spot.Bottom\n      // }),\n      // new go.Binding(\"alignmentFocus\",\"\",function(data, shape){\n      //   if(data.flip){\n      //     return go.Spot.Top\n      //   }\n      //   return go.Spot.Bottom\n      // }),\n      new go.Binding(\"geometry\", \"\", (data, shape) => {\n        var clockwiseFlag = 0;\n        if (data.order % 2 == 0) {\n          clockwiseFlag = 1;\n        }\n        if (data.flip) {\n          // clockwiseFlag = 1;\n        }\n\n        return this.makeGeoWave(data, shape, { clockwiseFlag: !clockwiseFlag });\n      }),\n      new go.Binding(\"stroke\", \"shiStroke\").makeTwoWay(),\n\n      new go.Binding(\"desiredSize\", \"desiredSize\", function(v) {\n        var size = new go.Size(v.width, v.height / 2);\n        // console.log(\"v:\",v)\n        return size;\n      }).ofObject(\"main\")\n    );\n  }\n\n  getTailXuShape() {\n    return $(\n      go.Shape,\n      {\n        name: \"TailXu\",\n        strokeWidth: 2,\n        stroke: \"#0e399d\",\n        fill: \"rgba(0,66,0,0)\",\n        // background: \"gray\",\n        stretch: go.GraphObject.None,\n        alignment: go.Spot.Bottom,\n        strokeDashArray: [10, 5],\n        alignmentFocus: go.Spot.Bottom\n        // row:1, column:0,margin:0\n      },\n      // new go.Binding(\"alignment\",\"\",function(data, shape){\n      //   if(data.flip){\n      //     return go.Spot.Top\n      //   }\n      //   return go.Spot.Bottom\n      // }),\n      // new go.Binding(\"alignmentFocus\",\"\",function(data, shape){\n      //   if(data.flip){\n      //     return go.Spot.Top\n      //   }\n      //   return go.Spot.Bottom\n      // }),\n      new go.Binding(\"geometry\", \"\", (data, shape) => {\n        var clockwiseFlag = 1;\n        if (data.order % 2 == 0) {\n          clockwiseFlag = 0;\n        }\n        // if(data.flip){\n        //   clockwiseFlag = 0;\n        // }\n        return this.makeGeoWave(data, shape, { clockwiseFlag: !clockwiseFlag });\n      }),\n      new go.Binding(\"desiredSize\", \"desiredSize\", function(v) {\n        var size = new go.Size(v.width, v.height / 2);\n        // console.log(\"v:\",v)\n        return size;\n      }).ofObject(\"main\")\n    );\n  }\n\n  getTextBuild() {\n    return $(\n      go.TextBlock,\n      {\n        name: \"TEXT\",\n        alignment: new go.Spot(0.5, 0.4),\n        font: \"18px 'Microsoft YaHei'\",\n        editable: false,\n        // flip:go.GraphObject.FlipHorizontal,\n        //margin: 3, editable: true,\n        // background: \"gray\",\n        angle: 0,\n        stroke: \"black\",\n        isMultiline: true,\n        textEdited: function(textBlock, oldv, newv) {\n          // if(textBlock.part.containingGroup.data.textAngle == \"horizontal\"){\n          var centerText = textBlock.part.diagram.model.findNodeDataForKey(\n            textBlock.part.data.centerText\n          );\n          if (centerText) {\n            console.log(\"centerTextcenterTextcenterTextcenterText\");\n            textBlock.part.diagram.model.startTransaction(\"text\");\n            textBlock.part.diagram.model.setDataProperty(\n              centerText,\n              \"text\",\n              newv\n            );\n            textBlock.part.diagram.model.commitTransaction(\"text\");\n          }\n          //   return;\n          // }\n          setTimeout(function() {\n            console.log(\"textEditedtextEditedtextEdited\", textBlock.lineCount);\n            if (!textBlock.text) return;\n            if (textBlock.text && textBlock.text.trim() == \"\") return;\n            if (textBlock.lineCount % 2 != 0) {\n              if (newv[newv.length - 1] == \"\\n\") {\n                textBlock.text = newv.substring(0, newv.length - 1);\n                return;\n              }\n              textBlock.text = newv + \"\\n\";\n            }\n          }, 100);\n\n          var enterCount = 0;\n          textBlock.part.containingGroup.layout.isValidLayout = false;\n          // for(var i=0;i<newv.length;i++){\n\n          // }\n          // textBlock.part.updateTargetBindings()\n\n          // if(textBlock.lineCount %2 != 0){\n          //   if(newv[newv.length-1] == \"\\n\"){\n          //     textBlock.text = newv.substring(0, newv.length-1)\n          //     return;\n          //   }\n          //   textBlock.text = newv+\"\\n\"\n          // }\n        },\n        overflow: go.TextBlock.OverflowClip,\n        wrap: go.TextBlock.WrapDesiredSize,\n        textAlign: \"center\",\n        spacingAbove: 4,\n        spacingBelow: 4,\n        portId: \"TEXT\",\n        stretch: go.GraphObject.Uniform\n      },\n      new go.Binding(\"visible\", \"textVisible\").makeTwoWay(),\n      new go.Binding(\"alignment\", \"\", function(v, textBlock) {\n        // console.log('textBlock', textBlock.lineCount)\n        // if(textBlock.lineCount%2 == 0){\n        //   return new go.Spot(0.5,0.5)\n        // }\n        return new go.Spot(0.5, 0.5);\n      }),\n      new go.Binding(\"textAlign\", \"textAlign\", function(v) {\n        // return ['start', 'center', 'end'].indexOf(v)>-1 ? v : \"center\";\n        return v;\n      }).makeTwoWay(),\n      new go.Binding(\"spacingAbove\", \"spacingline\", function(v) {\n        return helpers.tdTransToNum(v, 4);\n      }).makeTwoWay(),\n      new go.Binding(\"spacingBelow\", \"spacingline\", function(v) {\n        return helpers.tdTransToNum(v, 4);\n      }).makeTwoWay(),\n      new go.Binding(\"width\", \"width\", function(v) {\n        return v - 30;\n      }).ofObject(\"main\"),\n      // new go.Binding(\"height\", \"height\", function (v) {\n      //   return v;\n      // }).ofObject(\"SHAPE\"),\n      new go.Binding(\"text\", \"text\", function(text, d) {\n        // console.log(\"d.lineCount,d.lineCountd.lineCount\",text,d.lineCount)\n        // setTimeout(function(){\n        //   if(d && d.lineCount!=null && d.lineCount%2 != 0){\n        //     if(text && text[text.length-1] != \"\\n\"){\n        //       d.text+=\"\\n\"\n        //     }\n        //   }\n        // },100)\n        // setTimeout(function(){\n        //   try{\n        //     console.log(\"check overflow\")\n        //     if(!d.text) return;\n        //     if(d.text && d.text.trim() == \"\") return;\n        //     if(d.lineCount %2 != 0){\n        //       if(d.text[d.text.length-1] == \"\\n\"){\n        //         d.text = d.text.substring(0, d.text.length-1)\n        //         return;\n        //       }\n        //       d.text = d.text+\"\\n\"\n        //     }\n        //     // if(d && d.lineCount!=null && d.lineCount%2 != 0){\n        //     //   if(d.text && d.text[d.text.length-1] != \"\\n\"){\n        //     //     d.text+=\"\\n\"\n        //     //   }\n        //     // }\n        //   }catch(e){\n        //     console.error(e)\n        //   }\n        // },100)\n        return text;\n        // console.log(\"sdfsdfsdfsdfsdfdsfdsfsd\")\n        console.log(text, \":\", d.lineCount);\n        if (d.lineCount % 2 != 0) {\n          return text + \"\\n\";\n        } else {\n          return text;\n        }\n      }).makeTwoWay(function(text, d) {\n        console.log(\"text write write\", d.lineCount);\n        return text;\n        if (d.lineCount % 2 != 0) {\n          return text + \"\\n\";\n        } else {\n          return text;\n        }\n      }),\n      new go.Binding(\"stroke\", \"textStroke\").makeTwoWay(),\n      new go.Binding(\"font\", \"font\").makeTwoWay()\n    );\n  }\n\n  getNodeSelectionAdornmentTemplate() {\n    return $(\n      go.Adornment,\n      \"Spot\",\n      {\n        // isShadowed: true,\n      },\n      $(\n        go.Panel,\n        \"Auto\",\n        $(\n          go.Shape,\n          {\n            isPanelMain: true,\n            fill: null,\n            stroke: \"dodgerblue\",\n            strokeWidth: 3\n          }\n          // new go.Binding(\"fill\",\"\",function(e,obj){\n          //   var radBrush = $(go.Brush, \"Radial\", { 0: \"rgba(248,248,242,0)\", 1: 'RGB(255,242,0)' });\n          //   return radBrush;\n          // })\n          //\n        ),\n        $(go.Placeholder) // this represents the selected Node\n      ),\n\n      // ),\n      // the button to create a \"next\" node, at the top-right corner\n      $(\n        \"CircleButton\",\n        {\n          name: \"AddChild\",\n          toolTip: $(\n            go.Adornment,\n            \"Auto\",\n            $(go.Shape, { fill: \"#FFFFCC\" }),\n            $(\n              go.TextBlock,\n              { textAlign: \"center\", margin: new go.Margin(8, 4, 4, 4) }, // the tooltip shows the result of calling nodeInfo(data)\n              new go.Binding(\"text\", \"\", function(d) {\n                return \"增加橄榄\";\n              })\n            )\n          ),\n          alignment: go.Spot.Right,\n          alignmentFocus: go.Spot.Left,\n          width: 50,\n          height: 50,\n          click: function(e) {\n            e.diagram.__trtd.addOlive();\n          } // this function is defined below\n        },\n        $(go.Shape, \"PlusLine\", {\n          stroke: \"#770077\",\n          desiredSize: new go.Size(25, 25)\n        })\n      ),\n      $(\n        \"CircleButton\",\n        {\n          name: \"RemoveChild\",\n          toolTip: $(\n            go.Adornment,\n            \"Auto\",\n            $(go.Shape, { fill: \"#FFFFCC\" }),\n            $(\n              go.TextBlock,\n              { textAlign: \"center\", margin: new go.Margin(8, 4, 4, 4) }, // the tooltip shows the result of calling nodeInfo(data)\n              new go.Binding(\"text\", \"\", function(d) {\n                return \"删除橄榄\";\n              })\n            )\n          ),\n          alignment: go.Spot.Left,\n          alignmentFocus: go.Spot.Right,\n          width: 50,\n          height: 50,\n          click: function(e) {\n            e.diagram.__trtd.deleteSelection();\n          } // this function is defined below\n        },\n        $(go.Shape, \"MinusLine\", {\n          stroke: \"#770077\",\n          desiredSize: new go.Size(25, 25)\n        })\n      ),\n      $(\n        \"Button\",\n        {\n          name: \"AddLevel\",\n          toolTip: $(\n            go.Adornment,\n            \"Auto\",\n            $(go.Shape, { fill: \"#FFFFCC\" }),\n            $(\n              go.TextBlock,\n              { textAlign: \"center\", margin: new go.Margin(8, 4, 4, 4) }, // the tooltip shows the result of calling nodeInfo(data)\n              new go.Binding(\"text\", \"\", function(d) {\n                return \"增加同级节点\";\n              })\n            )\n          ),\n          alignment: new go.Spot(1, 0.5, 15, 0),\n          width: 30,\n          height: 30,\n          click: function(e) {\n            e.diagram.__trtd.addOlive();\n          } // this function is defined below\n        },\n        $(go.Shape, \"PlusLine\", {\n          stroke: \"#227700\",\n          desiredSize: new go.Size(15, 15)\n        }),\n        new go.Binding(\"visible\", \"level\", function(level) {\n          return level != 0; // hidden this button if current node is root node\n        })\n      )\n      // $(go.Panel, \"Auto\", {        // 放大镜\n      //         name: \"ButtonIcon1\",\n      //         alignment: new go.Spot(0, 1, 5, -5),\n      //         //alignment: go.Spot.BottomLeft,\n      //         //alignmentFocus: go.Spot.BottomLeft,\n      //         width: 60,\n      //         height: 60,\n      //         isActionable: true,\n      //         click: expandCollapse // this function is defined below\n      //     },\n\n      //     $(go.Shape, \"Circle\", {\n      //         fill: \"rgba(1,1,1,0)\",\n      //         strokeWidth: 0,\n      //         stroke: \"green\",\n      //         width: 50,\n      //         height: 50\n      //     }),\n      //     $(go.Shape, {\n      //             '_para1': true,\n      //             name: \"ButtonIcon\",\n      //             fill: \"red\",\n      //             strokeWidth: 2,\n      //             stroke: \"#767678\",\n      //             geometryString: icons[\"zoomout\"], // default value for isTreeExpanded is true\n      //             desiredSize: new go.Size(30, 30)\n      //         },\n      //         new go.Binding(\"geometryString\", \"\", function(d, button) {\n      //             // console.log('dddddd:', d);\n      //             // console.log('button:', button);\n      //             // var myDiagram = d.diagram;\n      //             // var node = myDiagram.selection.first();\n      //             // if (node[\"_controlExpand\"]) {\n      //             //     return icons[\"zoomout\"];\n      //             // } else {\n      //             //     return icons[\"zoomin\"];\n      //             // }\n      //             return icons[\"zoomin\"];\n      //         })\n      //     )\n      // )\n    );\n  }\n\n  nodeResizeAdornmentTemplate() {\n    return $(\n      go.Adornment,\n      \"Spot\",\n      $(go.Placeholder), // takes size and position of adorned object\n      // $(go.Shape, \"Circle\", // left resize handle\n      //     {\n      //         alignment: go.Spot.TopLeft,\n      //         alignmentFocus: go.Spot.BottomRight,\n      //         cursor: \"col-resize\",\n      //         desiredSize: new go.Size(30, 30),\n      //         fill: \"lightblue\",\n      //         stroke: \"dodgerblue\"\n      //     }),\n      $(\n        go.Shape,\n        \"Circle\", // right resize handle\n        {\n          alignment: go.Spot.BottomRight,\n          alignmentFocus: go.Spot.TopLeft,\n          cursor: \"col-resize\",\n          desiredSize: new go.Size(30, 30),\n          fill: \"lightblue\",\n          stroke: \"dodgerblue\"\n        }\n      )\n    );\n  }\n\n  getNodeTemplate() {\n    var diagram = this.diagram;\n    var that = this;\n    return $(\n      go.Node,\n      \"Spot\",\n      {\n        // isClipping: true,\n        __trtdNode: that,\n        layerName: \"overflow\",\n        zOrder: 5,\n        // copyable: false,\n        // dragComputation: stayInGroup,\n        movable: true,\n        resizable: false,\n        // locationObjectName: \"main\",\n        resizeObjectName: \"main\",\n        selectionObjectName: \"main\",\n        rotatable: false,\n        toolTip: that.getTooTip(),\n        resizeAdornmentTemplate: that.nodeResizeAdornmentTemplate(),\n        layoutConditions:\n          ~go.Part.LayoutStandard &\n          go.Part.LayoutRemoved &\n          go.Part.LayoutAdded &\n          go.Part.LayoutNodeSized,\n        locationSpot: go.Spot.LeftCenter,\n        \n        // toolTip:  // define a tooltip for each node that displays the color as text\n        // $(go.Adornment, \"Spot\",\n        //   $(go.TextBlock, { margin: 4 },\n        //     new go.Binding(\"text\", \"\", function(data,p){\n        //       // console.log(\"tooltip:\",p,data)\n        //       var tips = [\"双击编辑文字\",\"尝试按方向键快捷移动到下一个对象\",\"按回车键增加橄榄\"]\n        //       var isPhone = helpers.checkPhone()\n        //       if(isPhone){\n        //         return \"\"\n        //       }\n        //       var elt = Math.floor(tips.length * Math.random())\n        //       return tips[elt]\n        //     })\n        //   )\n        // ),  // end of Adornment\n        click: (e, node) => {\n          console.log(node.data);\n          if (!node.containingGroup) return;\n          var it = node.containingGroup.findSubGraphParts().iterator;\n          while (it.next()) {\n            var n = it.value;\n            if (\n              n.data.category == \"autoText\" &&\n              (n.data.role == \"xuText\" || n.data.role == \"shiText\")\n            ) {\n              if (n.data.order == node.data.order) {\n                // locateNode = n;\n                if (n.data.text == \"\" || n.data.text.trim() == \"\") {\n                  n.findObject(\"textBorder\").visible = true;\n                }\n                //   n.areaBackground = \"mediumslateblue\"\n              } else {\n                n.findObject(\"textBorder\").visible = false;\n              }\n            }\n          }\n        },\n        mouseOver: function(e, node) {\n          // if(node.data.hyperlink){\n          //   var textObj = node.findObject('TEXT');\n          //   textObj.isUnderline = true;\n          // }\n          if (!node.containingGroup) return;\n          // var it = node.containingGroup.findSubGraphParts().iterator;\n          // while (it.next()) {\n          //     var n = it.value;\n          //     if(n.data.category == \"autoText\"){\n          //         if(n.data.order == node.data.order){\n          //             // locateNode = n;\n          //             if(n.data.text == \"\" || n.data.text.trim() == \"\"){\n          //               n.findObject(\"textBorder\").visible = true;\n          //             }\n          //           //   n.areaBackground = \"mediumslateblue\"\n          //         }\n          //     }\n          // }\n\n          var shiText = node.diagram.findNodeForKey(node.data.shiText);\n          if (shiText) {\n            shiText.findObject(\"textBorder\").visible = true;\n          }\n          var xuText = node.diagram.findNodeForKey(node.data.xuText);\n          if (xuText) {\n            xuText.findObject(\"textBorder\").visible = true;\n          }\n          var centerText = node.diagram.findNodeForKey(node.data.centerText);\n          if (centerText) {\n            centerText.layerName = \"Background\";\n          }\n\n          // diagram.__trtd.showNodeRemarkTips(e, node);\n        },\n        contextMenu: $(go.Adornment),\n\n        mouseDragEnter: function(e, obj) {\n          var node = obj.part;\n          var selnode = e.diagram.selection.first();\n\n          // 常变\n          if (\n            selnode.data.category != \"wave\" &&\n            !(\n              selnode.data.category == \"picGroup\" &&\n              selnode.data.role == \"cbian\"\n            )\n          ) {\n            return;\n          }\n          var centerText = node.diagram.findNodeForKey(node.data.centerText);\n          if (centerText) {\n            centerText.layerName = \"Background\";\n          }\n          //var sat = node.selectionAdornmentTemplate;\n          //var adorn = sat.copy();\n          //adorn.adornedObject = node;\n          //node.addAdornment(\"dragEnter\", adorn);\n\n          //if (!mayWorkFor(selnode, node)) return;\n          var shape = node.findObject(\"main\");\n          if (shape) {\n            shape._prevFill = shape.fill; // remember the original brush\n            shape.fill = \"RGBA(146,208,80,0.5)\";\n          }\n        },\n        mouseDragLeave: function(e, obj) {\n          var node = obj.part;\n          var shape = node.findObject(\"main\");\n          if (shape && shape._prevFill) {\n            shape.fill = shape._prevFill; // restore the original brush\n          }\n          var centerText = node.diagram.findNodeForKey(node.data.centerText);\n          if (centerText) {\n            if (!helpers.checkPhone()) {\n              centerText.layerName = \"Foreground\";\n            }\n          }\n          //node.removeAdornment(\"dragEnter\");\n        },\n        mouseDrop: function(e, obj) {\n          var node = obj.part;\n          console.log(\"mouseDropmouseDropmouseDropmouseDrop\");\n          var selnode = e.diagram.selection.first();\n          if (!selnode) return;\n          // 常变\n          if (\n            selnode.data.category == \"picGroup\" &&\n            selnode.data.role == \"cbian\"\n          ) {\n            var it = selnode.findSubGraphParts().iterator;\n            var deleteObjs = [];\n            var cbian = {};\n            while (it.next()) {\n              var n = it.value;\n              if (n.data.category == \"autoText\") {\n                if (n.data.locationSpot == \"0 0 0 0\") {\n                  cbian.shiText = n.data.text;\n                }\n                if (n.data.locationSpot == \"0 0.5 0 0\") {\n                  cbian.centerText = n.data.text;\n                }\n                if (n.data.locationSpot == \"0 1 0 0\") {\n                  cbian.xuText = n.data.text;\n                }\n              }\n              deleteObjs.push(n.data);\n            }\n            e.diagram.startTransaction(\"mouseDrop\");\n            // 删除总结图\n            e.diagram.model.removeNodeDataCollection(deleteObjs);\n            var backupSelnode = JSON.parse(JSON.stringify(selnode.data));\n            e.diagram.model.removeNodeData(selnode.data);\n\n            // 添加新橄榄\n            e.diagram.__trtd.addOlive(node, cbian);\n            e.diagram.commitTransaction(\"mouseDrop\");\n            return;\n          }\n\n          if (selnode.data.category != \"wave\") {\n            return;\n          }\n          if (!node) {\n            // node.containingGroup.layout.isValidLayout = false\n            return;\n          }\n          if (selnode.data.group != obj.data.group) {\n            return;\n          }\n          e.diagram.startTransaction(\"mouseDrop\");\n          selnode.__oldOrder = selnode.data.order;\n          e.diagram.model.setDataProperty(\n            selnode.data,\n            \"order\",\n            node.data.order + 0.5\n          );\n          var xuText = e.diagram.findNodeForKey(selnode.data.xuText);\n          var shiText = e.diagram.findNodeForKey(selnode.data.shiText);\n          // shiText.__oldOrder = shiText.data.order\n          // xuText.__oldOrder = xuText.data.order\n          e.diagram.model.setDataProperty(\n            shiText,\n            \"order\",\n            node.data.order + 0.5\n          );\n          e.diagram.model.setDataProperty(\n            xuText,\n            \"order\",\n            node.data.order + 0.5\n          );\n          // node.containingGroup.layout.isValidLayout = false\n          e.diagram.commitTransaction(\"mouseDrop\");\n          return;\n          if (node.data.isparent) {\n            var child = e.diagram.findNodeForKey(node.data.isparent);\n            while (child.data.next) {\n              child = e.diagram.findNodeForKey(child.data.next);\n            }\n            if (child.data.key == selnode.data.key) {\n              //最后一个子节点拖放到父节点上时，不做任何操作\n              return;\n            }\n            e.diagram.__trtd.setNodeAsSibling(selnode, child);\n          } else {\n            e.diagram.__trtd.setNodeAsChildren(selnode, node);\n          }\n        },\n        mouseLeave: function(e, node) {\n          if (!node.containingGroup) return;\n          var it = node.containingGroup.findSubGraphParts().iterator;\n          while (it.next()) {\n            var n = it.value;\n            if (n.data.category == \"autoText\") {\n              // if(n.data.order == node.data.order+1){\n              //     locateNode = n;\n              // }\n              n.findObject(\"textBorder\").visible = false;\n              // n.areaBackground = null\n            }\n          }\n          try {\n            var centerText = e.diagram.findNodeForKey(node.data.centerText);\n            if (centerText) {\n              centerText.layerName = \"Foreground\";\n            }\n          } catch (e) {\n            console.error(\"wave node template error:\", e);\n          }\n        },\n        selectionAdornmentTemplate: this.getNodeSelectionAdornmentTemplate(),\n        doubleClick: function(e, node) {\n          if (!node) return;\n          if (!node.containingGroup) return;\n          if (\n            node.containingGroup.data.textAngle == \"horizontal\" &&\n            node.containingGroup.data.centerTextAngle == \"independent\"\n          ) {\n            // 如果文字方向为正向，且中线文字为正向\n            node.findObject(\"TEXT\").visible = true;\n            var centerText = node.diagram.findNodeForKey(node.data.centerText);\n            if (centerText) {\n              centerText.visible = false;\n            }\n          }\n          setTimeout(() => {\n            e.diagram.__trtd.selectText(e, node);\n          }, 100);\n        }\n      },\n      this.binding,\n      $(\n        go.Shape,\n        \"Rectangle\",\n        {\n          name: \"main\",\n          // layerName: \"overflow\",\n          fill: \"rgba(0,0,0,0)\",\n          stroke: null,\n          width: 300,\n        \n          height: 150\n        },\n        new go.Binding(\"areaBackground\", \"isHighlighted\", function(h, shape) {\n          // node.areaBackground = \"RGB(107,208,137)\"\n          if (h) return \"RGBA(146,208,80,0.5)\";\n          return null;\n          var c = shape.part.data.color;\n          return c ? c : \"white\";\n        }).ofObject(), // binding source is Node.isHighlighted\n        new go.Binding(\"fill\", \"fill\").makeTwoWay(),\n        // new go.Binding(\"fill\", \"fill\").makeTwoWay(),\n        new go.Binding(\"desiredSize\", \"desiredSize\", function(v, d) {\n          // console.log(\"vd m\", v, d )\n          // if(!v) return d.part.findObject(\"SHAPE\").measuredBounds.size;\n          return go.Size.parse(v);\n        }).makeTwoWay(function(v) {\n          return go.Size.stringify(v);\n        })\n      ),\n      // $(go.Panel, \"Spot\",{\n      //   // isClipping: true,\n      //   background: \"green\",\n      //   position: new go.Point(0,0),\n      //   alignment: go.Spot.Center,\n      //   alignmentFocus: go.Spot.Center,\n      // },\n      // $(go.Shape, \"Rectangle\",{\n      //   alignment: go.Spot.Center,\n      //   alignmentFocus: go.Spot.Center,\n      // },\n      // new go.Binding(\"desiredSize\", \"desiredSize\", function(v) {\n      //     var size = new go.Size(v.width, v.height)\n      //     // console.log(\"v:\",v)\n      //     return size\n      //     }).ofObject(\"main\"),\n      // ),\n      this.getShiHalfEllipseShape(),\n      this.getXuHalfEllipseShape(),\n      // $(go.Adornment,\n      // { locationSpot: go.Spot.Top },\n      // $(go.Shape, \"BpmnActivityLoop\",\n      //   { width: 12, height: 12, cursor: \"pointer\",\n      //     background: \"transparent\", stroke: \"dodgerblue\", strokeWidth: 2 })\n      // ),\n      // ),\n\n      // $(go.Panel,\"Spot\",{\n      //   stretch: go.GraphObject.Uniform,\n      //   background:\"gray\",\n      //   // locationSpot: go.Spot.LeftCenter,\n      //   alignment: go.Spot.Right,\n      //   // strokeDashArray: [10, 5],\n      //   alignmentFocus: go.Spot.Left,\n      // },\n      //   this.getTailXuShape(),\n      //   this.getTailShiShape(),\n      // ),\n\n      // this.getUpHalfEllipseShape(),\n      this.getTextBuild(),\n      $(\n        go.Shape,\n        {\n          geometryString: \"M540.5696 556.81024a81.8176 81.8176 0 0 1-53.0432-19.47648l-225.4848-191.52896a81.92 81.92 0 1 1 106.0864-124.86656l172.4416 146.47296 172.4416-146.47296a81.92 81.92 0 0 1 106.0864 124.86656l-225.4848 191.52896a81.7152 81.7152 0 0 1-53.0432 19.47648z m53.06368 246.23104l225.44384-191.52896a81.92 81.92 0 1 0-106.0864-124.84608l-172.40064 146.47296-172.48256-146.47296a81.92 81.92 0 1 0-106.04544 124.86656l225.52576 191.52896a81.7152 81.7152 0 0 0 53.00224 19.47648c18.88256 0 37.76512-6.49216 53.0432-19.49696z\",\n            // \"M16 0c-8.837 0-16 7.163-16 16s7.163 16 16 16 16-7.163 16-16-7.163-16-16-16zM16 29c-7.18 0-13-5.82-13-13s5.82-13 13-13 13 5.82 13 13-5.82 13-13 13zM12 8c-1.105 0-2 0.895-2 2s0.895 2 2 2h5.172l-8.586 8.586c-0.781 0.781-0.781 2.047 0 2.829 0.39 0.39 0.902 0.586 1.414 0.586s1.024-0.195 1.414-0.586l8.586-8.586v5.172c0 1.105 0.895 2 2 2s2-0.895 2-2v-12h-12z\",\n          visible: false,\n          name: \"figure\",\n          cursor: \"pointer\",\n          alignment: go.Spot.TopRight,\n          alignmentFocus: go.Spot.TopRight,\n          width: 14,\n          height: 14,\n          fill: \"green\",\n          toolTip: $(\n            \"ToolTip\",\n            $(\n              go.Panel,\n              \"Vertical\",\n              $(\n                go.Picture,\n                new go.Binding(\"source\", \"src\", function(s) {\n                  return \"images/\" + s + \".png\";\n                })\n              ),\n              $(go.TextBlock, {text:\"进入子盘\", margin: 3 })\n            )\n          ),\n          click: function(e) {\n            console.log(\"click figure\", e);\n            var node = e.targetObject.part;\n            e.diagram.__trtd.openFigure({\n              figure: node.data.figure,\n              title: node.data.text,\n              key: node.data.key,\n              node: node\n            });\n          }\n        },\n        // new go.Binding(\"geometry\", \"geo\", function(){\n\n        // })),\n        new go.Binding(\"visible\", \"figure\", function(v) {\n          console.log(\"----------------------\");\n          if (v) {\n            return true;\n          } else {\n            return false;\n          }\n        })\n      )\n    );\n  }\n}\n\nmodule.exports = WaveNodeTemplate;\n// export default WaveNodeTemplate\n\n\n\n// WEBPACK FOOTER //\n// ./src/nodeTemplate/waveNodeTemplate.js","var $ = go.GraphObject.make;\r\nvar Base = require('./base')\r\nvar helpers = require('../helpers/helpers.gojs')\r\nvar waveGroupLayout = require(\"../layout/waveGroupLayout\")\r\n\r\nclass WaveNodeTemplate extends Base {\r\n    constructor(options){\r\n        super(options)\r\n        // this.nodeProperties = {}\r\n        \r\n    }\r\n    \r\n    nodeResizeAdornmentTemplate () {\r\n        return $(go.Adornment, \"Spot\",\r\n            $(go.Placeholder), // takes size and position of adorned object\r\n            // $(go.Shape, \"Circle\", // left resize handle\r\n            //     {\r\n            //         alignment: go.Spot.TopLeft,\r\n            //         alignmentFocus: go.Spot.BottomRight,\r\n            //         cursor: \"col-resize\",\r\n            //         desiredSize: new go.Size(30, 30),\r\n            //         fill: \"lightblue\",\r\n            //         stroke: \"dodgerblue\"\r\n            //     }),\r\n            $(go.Shape, \"Circle\", // right resize handle\r\n                {\r\n                    alignment: go.Spot.BottomRight,\r\n                    alignmentFocus: go.Spot.TopLeft,\r\n                    cursor: \"col-resize\",\r\n                    desiredSize: new go.Size(30, 30),\r\n                    fill: \"lightblue\",\r\n                    stroke: \"dodgerblue\"\r\n                })\r\n        )\r\n    }\r\n\r\n    getNodeTemplate(){\r\n      var that = this\r\n      return $(go.Group, \"Spot\",\r\n      { selectionObjectName: \"PH\",\r\n        layerName: \"default\",\r\n        locationObjectName: \"PH\",\r\n        resizeObjectName:\"PH\",\r\n        // rotatable: false\r\n        resizable: true,\r\n        locationSpot: go.Spot.LeftCenter,\r\n        \r\n        // rotationSpot: go.Spot.LeftCenter,\r\n        alignment: go.Spot.Left,\r\n        alignmentFocus: go.Spot.Left,\r\n        // rotateObject:\"PH\",\r\n        click: (e, node)=>{\r\n          console.log(node.data)\r\n          var it = node.findSubGraphParts().iterator;\r\n          while (it.next()) {\r\n              var n = it.value;\r\n              if(n.data.category == \"autoText\"){\r\n                  n.findObject(\"textBorder\").visible = false;\r\n              }\r\n          }\r\n        },\r\n        selectionAdornmentTemplate: this.getNodeSelectionAdornmentTemplate(),\r\n        resizeAdornmentTemplate: that.nodeResizeAdornmentTemplate(),\r\n        mouseOver: function(e, node) {\r\n            console.log(\"group.......................\")\r\n            // if(node.data.hyperlink){\r\n            //   var textObj = node.findObject('TEXT');\r\n            //   textObj.isUnderline = true;\r\n            // }\r\n            // if(!node) return;\r\n            var it = node.findSubGraphParts().iterator;\r\n            while (it.next()) {\r\n                var n = it.value;\r\n                if(n.data.category == \"autoText\"&& (node.data.role == \"xuText\" || node.data.role == \"shiText\" )){\r\n                    // if(n.data.order == node.data.order){\r\n                        // locateNode = n;\r\n                        if(n.data.text == \"\"|| n.data.text.trim() == \"\"){\r\n                          n.findObject(\"textBorder\").visible = true;\r\n                        }\r\n                      //   n.areaBackground = \"mediumslateblue\"\r\n                    // }\r\n                }\r\n            }\r\n            // diagram.__trtd.showNodeRemarkTips(e, node);\r\n        },\r\n        mouseLeave: function(e, node) {\r\n          // if(!node) return;\r\n          var it = node.findSubGraphParts().iterator;\r\n          while (it.next()) {\r\n              var n = it.value;\r\n              if(n.data.category == \"autoText\"){\r\n                  // if(n.data.order == node.data.order+1){\r\n                  //     locateNode = n;\r\n                  // }\r\n                  n.findObject(\"textBorder\").visible = false;\r\n                  // n.areaBackground = null\r\n              }\r\n          }\r\n        },\r\n        rotatable: true,\r\n        contextMenu: $(go.Adornment),\r\n        // resizable: true,\r\n        // layoutConditions: go.Part.LayoutStandard,\r\n        layoutConditions: go.Part.LayoutStandard & go.Part.LayoutRemoved & go.Part.LayoutAdded & go.Part.LayoutNodeSized,\r\n        layout: new waveGroupLayout()\r\n        // layout: $(go.GridLayout,{\r\n        //   spacing: new go.Size(0,0),\r\n        //   cellSize: go.Size.parse(300,150),\r\n        //   arrangement:go.GridLayout.LeftToRight,\r\n        //   alignment: go.GridLayout.Location,\r\n        //   comparer:function(pa, pb) {\r\n        //     var da = pa.data;\r\n        //     var db = pb.data;\r\n        //     if (da.order < db.order) return -1;\r\n        //     if (da.order > db.order) return 1;\r\n        //     return 0;\r\n        //   }\r\n        // }) \r\n      },\r\n      new go.Binding(\"angle\", \"angle\").makeTwoWay(function(v,data){\r\n\r\n        return v;\r\n      }),\r\n      // new go.Binding(\"copyable\", \"copyable\").makeTwoWay(),\r\n      new go.Binding(\"isShadowed\", \"isShadowed\").makeTwoWay(),\r\n      new go.Binding(\"selectable\", \"selectable\").makeTwoWay(),\r\n      new go.Binding(\"movable\", \"movable\").makeTwoWay(),\r\n      new go.Binding(\"deletable\", \"deletable\").makeTwoWay(),\r\n        $(go.Shape,  // using a Shape instead of a Placeholder\r\n          { name: \"PH\",\r\n          figure:\"Rectangle\",\r\n          // rotationSpot: go.Spot.LeftCenter,\r\n          // spot1: new go.Spot(0.01, 0.01),\r\n          // spot2: new go.Spot(0.99, 0.99),\r\n            // width: 600,\r\n            // height:300,\r\n            alignment: new go.Spot(0,0.5),\r\n            // locationSpot: go.Spot.LeftCenter,\r\n            stroke:\"#9aa8b6\" ,\r\n            strokeWidth: 0,\r\n            minSize: new go.Size(300,70),\r\n            maxSize: new go.Size(NaN,400),\r\n            fill: \"rgba(88,0,0,0)\" },\r\n          new go.Binding(\"desiredSize\", \"desiredSize\", function(v,data){\r\n            return go.Size.parse(v)\r\n          }).makeTwoWay(go.Size.stringify)\r\n        ),\r\n        new go.Binding(\"location\", \"loc\", go.Point.parse).makeTwoWay(go.Point.stringify),\r\n        // $(go.Placeholder,    // represents the area of all member parts,\r\n        //   { padding: 0}\r\n        // ),  // with some extra padding around them\r\n\r\n        // $(go.TextBlock,  // group title\r\n        //   { font: \"Bold 12pt Sans-Serif\" },\r\n        //   new go.Binding(\"text\", \"key\")\r\n        // )\r\n      )\r\n    }\r\n}\r\n\r\nmodule.exports = WaveNodeTemplate\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/nodeTemplate/waveGroupNodeTemplate.js","'use script'\r\nvar $ = go.GraphObject.make;\r\nvar Base = require('./base')\r\nvar helpers = require('../helpers/helpers.gojs')\r\nvar axisGroupLayout = require(\"../layout/axisGroupLayout\")\r\n\r\nclass AxisNodeTemplate extends Base {\r\n    constructor(options){\r\n        super(options)\r\n        // this.nodeProperties = {}\r\n        \r\n    }\r\n    \r\n    addFreeText(e, node){\r\n      console.log(\"eeeeeeeeeee\",e)\r\n      var data = {\"text\":\"自由文本\",\r\n      \"deletable\":true, \r\n      \"role\":\"freeText\",\r\n      \"fill\":\"black\", \r\n      \"iconVisible\":false, \r\n      \"locationSpot\":\"0.5 0.5 0 0\", \r\n      \"textAlign\":\"center\", \r\n      \"category\":\"autoText\", \r\n      \"loc\": go.Point.stringify(e.documentPoint), \r\n      \"movable\":true, \"group\":node.data.key\r\n     }\r\n     this.diagram.startTransaction(\"addFreeText\")\r\n     this.diagram.model.addNodeData(data);\r\n     this.diagram.commitTransaction(\"addFreeText\")\r\n    }\r\n\r\n    getNodeTemplate(){\r\n      var that = this\r\n      return $(go.Group, \"Auto\",\r\n      { selectionObjectName: \"PH\",\r\n      layerName: \"Background\",\r\n        locationObjectName: \"PH\",\r\n        locationSpot: go.Spot.BottomLeft ,\r\n        // rotationSpot: go.Spot.LeftCenter,\r\n        rotatable: false,\r\n        alignment: go.Spot.Left,\r\n        alignmentFocus: go.Spot.Left,\r\n        // rotateObject:\"PH\",\r\n        click: (e, node)=>{\r\n          console.log(node.data)\r\n          var it = node.findSubGraphParts().iterator;\r\n          while (it.next()) {\r\n              var n = it.value;\r\n              if(n.data.category == \"autoText\"){\r\n                  n.findObject(\"textBorder\").visible = false;\r\n              }\r\n          }\r\n          return;\r\n          if(node.isSelected) return;\r\n          var it = node.findSubGraphParts().iterator;\r\n          var n;\r\n          while (it.next()) {\r\n              n = it.value;\r\n              if(n.data.role == \"labelGroup\"){\r\n                  n.__trtdNode.switchBorder(n, true)\r\n                  break;\r\n              }\r\n          }\r\n          if(n){\r\n            setTimeout(function(){\r\n              n.__trtdNode.switchBorder(n, false)\r\n            },3000)\r\n          }\r\n        },\r\n        doubleClick: function (e, node){\r\n          that.addFreeText(e, node)\r\n        },\r\n        mouseOver: function(e, node) {\r\n          // if(node.data.hyperlink){\r\n          //   var textObj = node.findObject('TEXT');\r\n          //   textObj.isUnderline = true;\r\n          // }\r\n          // if(!node.containingGroup) return;\r\n          return;\r\n          if(that.diagram.selection.count >0) return;\r\n\r\n          var it = node.findSubGraphParts().iterator;\r\n          var n;\r\n          while (it.next()) {\r\n              n = it.value;\r\n              if(n.data.role == \"labelGroup\"){\r\n                  // n.__trtdNode.switchBorder(n, true)\r\n                  break;\r\n              }\r\n          }\r\n          // 给显示隐藏一个缓冲，以显得不那么突兀\r\n          if(n){\r\n            setTimeout(function(){\r\n              if(that.diagram.selection.count >0) return;\r\n              n.__trtdNode.switchBorder(n, true)\r\n              if(that.diagram.selection.count <=0) return;\r\n              setTimeout(function(){\r\n                n.__trtdNode.switchBorder(n, false)\r\n              },3000)\r\n            },100)\r\n          }\r\n          // diagram.__trtd.showNodeRemarkTips(e, node);\r\n      },\r\n      contextMenu: $(go.Adornment),\r\n      mouseLeave: function(e, node) {\r\n        // if(!node.containingGroup) return;\r\n        var it = node.findSubGraphParts().iterator;\r\n        while (it.next()) {\r\n            var n = it.value;\r\n            if(n.data.role == \"labelGroup\"){\r\n                // n.__trtdNode.switchBorder(n, false)\r\n                break;\r\n            }\r\n        }\r\n        // if(n){\r\n        //   setTimeout(function(){\r\n        //     n.__trtdNode.switchBorder(n, false)\r\n        //   },3000)\r\n        // }\r\n      },\r\n        // rotatable: true,\r\n        // resizable: true,\r\n        // layoutConditions: go.Part.LayoutStandard,\r\n        layoutConditions: go.Part.LayoutStandard & go.Part.LayoutRemoved & go.Part.LayoutAdded & go.Part.LayoutNodeSized,\r\n        layout: new axisGroupLayout()\r\n        // layout: $(go.GridLayout,{\r\n        //   spacing: new go.Size(0,0),\r\n        //   cellSize: go.Size.parse(300,150),\r\n        //   arrangement:go.GridLayout.LeftToRight,\r\n        //   alignment: go.GridLayout.Location,\r\n        //   comparer:function(pa, pb) {\r\n        //     var da = pa.data;\r\n        //     var db = pb.data;\r\n        //     if (da.order < db.order) return -1;\r\n        //     if (da.order > db.order) return 1;\r\n        //     return 0;\r\n        //   }\r\n        // }) \r\n      },\r\n      new go.Binding(\"location\", \"loc\", go.Point.parse).makeTwoWay(go.Point.stringify),\r\n      new go.Binding(\"angle\", \"angle\").makeTwoWay(function(v,data){\r\n\r\n        return v;\r\n      }),\r\n      // new go.Binding(\"desiredSize\", \"desiredSize\", go.Size.parse).makeTwoWay(go.Size.stringify),\r\n      new go.Binding(\"copyable\", \"copyable\").makeTwoWay(),\r\n        $(go.Shape,  // using a Shape instead of a Placeholder\r\n          { name: \"PH\",\r\n          figure:\"Rectangle\",\r\n          // rotationSpot: go.Spot.LeftCenter,\r\n          // spot1: new go.Spot(0.01, 0.01),\r\n          // spot2: new go.Spot(0.99, 0.99),\r\n            // width: 600,\r\n            // height:300,\r\n            stroke:\"yellow\" ,\r\n            strokeWidth:0,\r\n            fill: \"rgba(0,0,0,0)\" },\r\n          // new go.Binding(\"desiredSize\", \"desiredSize\", function(v,data){\r\n          //   return go.Size.parse(v)\r\n          //   console.log('1111111111111111111111')\r\n          //   // for(var i=0;i<)\r\n          //   var model = data.part.diagram.model;\r\n          //   var group = data.part.data;\r\n          //   var maxWidth = 0;\r\n          //   var maxHeight = 0;\r\n          //   for(var i = 0;i<model.nodeDataArray.length;i++){\r\n          //     if(group.key != model.nodeDataArray[i].group){\r\n          //       continue;\r\n          //     }\r\n          //     if(model.nodeDataArray[i].desiredSize){\r\n          //       console.log(model.nodeDataArray[i].desiredSize)\r\n          //       var size = go.Size.parse(model.nodeDataArray[i].desiredSize)\r\n          //       if(size.width > maxWidth){\r\n          //         maxWidth = size.width;\r\n          //       }\r\n          //       if(size.height > maxHeight){\r\n          //         maxHeight = size.height;\r\n          //       }\r\n          //     }\r\n          //   }\r\n          //   // var group = that.diagram.findNodeForKey(data.part.data.key)\r\n          //   // var git = group.memberParts;\r\n          //   // var maxWidth = 0;\r\n          //   // var maxHeight = 0;\r\n          //   // while (git.next()) {\r\n          //   //   var item = git.value;\r\n          //   //   console.log(\"item:\",item)\r\n          //   //   if(item.naturalBounds.width > maxWidth){\r\n          //   //     maxWidth = item.naturalBounds.width;\r\n          //   //   }\r\n          //   //   if(item.naturalBounds.height > maxHeight){\r\n          //   //     maxHeight = item.naturalBounds.height;\r\n          //   //   }\r\n          //   //   console.log(`maxHeight:${maxHeight},maxWidth:${maxWidth}`)\r\n      \r\n          //   // }           \r\n          //   return go.Size.parse(`${maxWidth+100} ${maxHeight}`)         \r\n          //   // group.diagram.model.setDataProperty(group.data, \"desiredSize\", `${maxWidth+100} ${maxHeight}`) \r\n          // }).makeTwoWay(go.Size.stringify)\r\n        ),\r\n        \r\n        // $(go.Placeholder,    // represents the area of all member parts,\r\n        //   { padding: 0}\r\n        // ),  // with some extra padding around them\r\n\r\n        // $(go.TextBlock,  // group title\r\n        //   { font: \"Bold 12pt Sans-Serif\" },\r\n        //   new go.Binding(\"text\", \"key\")\r\n        // )\r\n      )\r\n    }\r\n}\r\n\r\nmodule.exports = AxisNodeTemplate\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/nodeTemplate/axisGroupNodeTemplate.js","    // define a custom grid layout that makes sure the length of each lane is the same\r\n    // and that each lane is broad enough to hold its subgraph\r\n    function AxisGroupLayout() {\r\n        go.Layout.call(this);\r\n        // go.GridLayout.call(this);\r\n        // this.cellSize = new go.Size(1, 1);\r\n        // this.wrappingColumn = Infinity;\r\n        // this.wrappingWidth = Infinity;\r\n        // this.spacing = new go.Size(0, 0);\r\n        // this.alignment = go.GridLayout.Position;\r\n      }\r\n      go.Diagram.inherit(AxisGroupLayout, go.Layout);\r\n  \r\n      function computeNewRotateLoc(rotateCenter,currentLoc, angle){\r\n          if(rotateCenter.equals(currentLoc)) return currentLoc\r\n        // 计算选择中心点到（0,0）点的偏移\r\n        var offset = new go.Point(0,0).subtract(rotateCenter.copy())\r\n        // 将原来的点偏移到相对0,0点的位置\r\n        var nodeOrigin = currentLoc.copy().offset(offset.x, offset.y)\r\n        var newNodeOrigin = nodeOrigin.rotate(angle)\r\n        var newNodeLoc = newNodeOrigin.copy().offset(-offset.x, -offset.y)\r\n        return newNodeLoc\r\n        // console.log(\"newNodeLoc\", newNodeLoc)\r\n      }\r\n      AxisGroupLayout.prototype.doLayout = function(coll) {\r\n          console.log(\"AxisGroupLayout.doLayout\")\r\n        var diagram = this.diagram;\r\n        diagram.startTransaction(\"AxisGroupLayout\")\r\n          // COLL might be a Diagram or a Group or some Iterable<Part>\r\n         \r\n        var it = this.collectParts(coll).iterator;\r\n        var collection = []\r\n        var dataCollection =[]\r\n        var group = this.group\r\n        // group.location = new go.Point(0,0)\r\n        var maxWidth = 0;\r\n        var maxHeight = 0;\r\n        var centerLine, axisX, axisY,axisXText, axisYText, themeText, labelText1,labelText2,labelText3,labelGroup,waveGroup\r\n        var shiTextColl = []\r\n        var xuTextColl = []\r\n        var oliveWidth\r\n        var oliveHeight\r\n        while (it.next()) {\r\n            var node = it.value;\r\n                // var item = git.value;\r\n            //   console.log(\"item:\",item)\r\n\r\n            dataCollection.push(node.data)\r\n            if(node.data.category == \"wave\"){\r\n                collection.push(node)\r\n            }\r\n            if(!(node instanceof go.Node)){\r\n              continue;\r\n            }\r\n            // 处理文本节点的位置和定位位置\r\n            // if(node.data.category == \"text\"){\r\n              if(node.data.role == \"axisYText\"){\r\n                axisYText = node;\r\n              }\r\n              if(node.data.role == \"axisXText\"){\r\n                axisXText = node;\r\n              }\r\n              if(node.data.role == \"themeText\"){\r\n                themeText = node;\r\n              }\r\n              if(node.data.role == \"shiText\"){\r\n                shiTextColl.push(node)\r\n              }\r\n              if(node.data.role == \"xuText\"){\r\n                xuTextColl.push(node)\r\n              }\r\n            // }\r\n            // 处理label文本节点的位置和定位位置\r\n            // if(node.data.category == \"iconText\"){\r\n              if(node.data.role == \"labelText1\"){\r\n                labelText1 = node;\r\n              }\r\n              if(node.data.role == \"labelText2\"){\r\n                labelText2 = node;\r\n              }\r\n              if(node.data.role == \"labelText3\"){\r\n                labelText3 = node;\r\n              }\r\n              if(node.data.role == \"labelGroup\"){\r\n                labelGroup = node;\r\n              }\r\n            // }\r\n\r\n              if(node.naturalBounds.width > maxWidth){\r\n                maxWidth = node.naturalBounds.width;\r\n              }\r\n              if(node.naturalBounds.height > maxHeight){\r\n                maxHeight = node.naturalBounds.height;\r\n              }\r\n            \r\n            \r\n            if (node.data.category == \"line\") {\r\n                if(node.data.role == \"centerLine\"){\r\n                  centerLine = node;\r\n                }\r\n            }\r\n            if (node.data.group == group.key) {\r\n            // position the node . . .\r\n                if(node.data.category == \"line\"){\r\n                    if(node.data.role == \"axisX\") {\r\n                      node.angle = 0;\r\n                      axisX = node\r\n                    };\r\n                    if(node.data.role == \"axisY\") {\r\n                      axisY = node\r\n                      node.angle = 270;\r\n                    }\r\n                    node.location = group.location.copy().offset(0,0)\r\n                    // node.angle = 270\r\n                }\r\n                if(node.data.category == \"waveGroup\"){\r\n                    waveGroup = node;\r\n                    // node.angle = group.angle\r\n                    oliveWidth = node.data.oliveWidth\r\n                    oliveHeight = node.data.oliveHeight\r\n                    node.location = group.location.copy().offset(0,0)\r\n                    // node.layout.isOngoing = true;\r\n                    // node.layout.isValidLayout = false;\r\n                    // collection.push(node)\r\n                }\r\n\r\n            }\r\n        }\r\n        console.log(`maxHeight:${maxHeight},maxWidth:${maxWidth}`)\r\n        // line.width = 2000\r\n        // line.height = 4\r\n        if(axisY) {\r\n          axisY.angle = 270;\r\n        }\r\n        if(axisX) {\r\n          axisX.angle = 0\r\n        }\r\n        if(waveGroup){\r\n          // var x1 = centerLine.width * Math.cos(Math.abs(360-centerLine.angle%360) / 180 * Math.PI)\r\n          console.log(`waveGroup.width:${waveGroup.width}`)\r\n          var x1 = waveGroup.resizeObject.width * Math.cos(Math.abs(360-waveGroup.angle%360) / 180 * Math.PI)\r\n          var y1 = 10\r\n          var x2 = waveGroup.resizeObject.width * Math.sin(Math.abs(360-waveGroup.angle%360)/ 180 * Math.PI)\r\n          var y2 = 10\r\n          // axisX.desiredSize = new go.Size(x1, y1)\r\n          // axisY.desiredSize = new go.Size(x2, y2)\r\n          this.diagram.model.setDataProperty(axisX.data, \"desiredSize\",`${x1} ${y1}`)\r\n          this.diagram.model.setDataProperty(axisY.data, \"desiredSize\",`${x2} ${y2}`)\r\n          // this.diagram.model.setDataProperty(group.data, \"desiredSize\",`${x1} ${x2}`)\r\n\r\n          group.width = x1\r\n          group.height = x2\r\n          var shiStroke = waveGroup.data.shiStroke\r\n          var xuStroke = waveGroup.data.xuStroke\r\n          var centerStroke = waveGroup.data.centerStroke || \"#3f5369\"\r\n          if(axisXText){\r\n            axisXText.location = group.location.copy().offset(x1, 0)\r\n            axisXText.locationSpot = go.Spot.Top\r\n          }\r\n          if(axisYText){\r\n            axisYText.location = group.location.copy().offset(-10, -x2)\r\n            axisYText.locationSpot = go.Spot.Right\r\n          }\r\n          // this.diagram.model.setDataProperty(axisY.data, \"desiredSize\",axisY.width)\r\n        }\r\n\r\n \r\n        if(themeText){\r\n          // themeText.location = group.location.copy().offset(0, 0)\r\n          // themeText.locationSpot = new go.Spot(0.7,0,0,0)\r\n        }\r\n        // if(labelText1){\r\n        //   labelText1.location = group.location.copy().offset(0, -x2).offset(40,10)\r\n        // }\r\n        // if(labelText2){\r\n        //   labelText2.location = group.location.copy().offset(0, -x2).offset(40,80)\r\n        // }\r\n        // if(labelText3){\r\n        //   labelText3.location = group.location.copy().offset(0, -x2).offset(40,150)\r\n        // }\r\n        if(labelGroup){\r\n          var itl = labelGroup.findSubGraphParts().iterator;\r\n          while (itl.next()) {\r\n            var n = itl.value;\r\n            if(n.data.role == \"labelText1\"){\r\n              labelText1 = n\r\n            }\r\n            if(n.data.role == \"labelText2\"){\r\n              labelText2 = n\r\n            }\r\n            if(n.data.role == \"labelText3\"){\r\n              labelText3 = n\r\n            }\r\n          }\r\n          if(waveGroup){\r\n            waveGroup.labelText1 = labelText1\r\n            waveGroup.labelText2 = labelText2\r\n            waveGroup.labelText3 = labelText3\r\n          }\r\n          // var tmp1 = group.location.copy().offset(0, -x2).offset(30,0)\r\n          // labelGroup.location = tmp1\r\n          // labelGroup.diagram.model.setDataProperty(labelGroup.data,\"loc\",go.Point.stringify(tmp1))\r\n          // setTimeout(()=>{\r\n          //   diagram.startTransaction(\"labelGroup\");\r\n          //   labelGroup.layout.isOngoing = true;\r\n          //   labelGroup.layout.isValidLayout = false;\r\n          //   diagram.commitTransaction(\"labelGroup\");\r\n          // },350)\r\n          // labelGroup.location = group.location.copy().offset(0, -x2).offset(40,10)\r\n        }\r\n        if(shiStroke && labelText1){\r\n          this.diagram.model.setDataProperty(labelText1.data, \"fill\",shiStroke)\r\n        }\r\n        if(xuStroke && labelText2){\r\n          this.diagram.model.setDataProperty(labelText2.data, \"fill\",xuStroke)\r\n        }\r\n        if(centerStroke && labelText3){\r\n          this.diagram.model.setDataProperty(labelText3.data, \"fill\",centerStroke)\r\n        }\r\n        // collection.sort(function(a,b){\r\n        //     return a.data.order > b.data.order\r\n        // })\r\n        // shiTextColl.sort(function(a,b){\r\n        //     return a.data.order > b.data.order\r\n        // })\r\n        // xuTextColl.sort(function(a,b){\r\n        //     return a.data.order > b.data.order\r\n        // })\r\n        // for(var i=0;i<xuTextColl.length;i++){\r\n        //   xuTextColl[i].location = computeNewRotateLoc(collection[i].location, collection[i].location.copy().offset(collection[i].width/2,collection[i].height/2),collection[i].angle)\r\n        // }\r\n        // collection.forEach(function(obj){\r\n        //     obj.location = group.location.copy().offset(300*(obj.data.order-1),0)\r\n        //     // obj.location = new go.Point(300*(obj.data.order-1),0)\r\n        //     // obj.\r\n        //     // var group = a.findNodeDataForKey(m.group)\r\n        //     obj.location = computeNewRotateLoc(group.location, obj.location, obj.angle)\r\n        // })\r\n        go.Layout.prototype.doLayout.call(this, coll);\r\n        diagram.commitTransaction(\"AxisGroupLayout\");\r\n        // diagram.updateAllTargetBindings()\r\n        return;\r\n        // return;\r\n        // var diagram = this.diagram;\r\n        if (diagram === null) return;\r\n        diagram.startTransaction(\"PoolLayout\");\r\n        // make sure all of the Group Shapes are big enough\r\n        // var minsize = computeMinPoolSize();\r\n        // diagram.findTopLevelGroups().each(function(lane) {\r\n        //   if (!(lane instanceof go.Group)) return;\r\n        //   var shape = lane.selectionObject;\r\n        //   if (shape !== null) {  // change the desiredSize to be big enough in both directions\r\n        //     var sz = computeLaneSize(lane);\r\n        //     shape.width = (!isNaN(shape.width)) ? Math.max(shape.width, sz.width) : sz.width;\r\n        //     shape.height = (isNaN(shape.height) ? minsize.height : Math.max(shape.height, minsize.height));\r\n        //     var cell = lane.resizeCellSize;\r\n        //     if (!isNaN(shape.width) && !isNaN(cell.width) && cell.width > 0) shape.width = Math.ceil(shape.width / cell.width) * cell.width;\r\n        //     if (!isNaN(shape.height) && !isNaN(cell.height) && cell.height > 0) shape.height = Math.ceil(shape.height / cell.height) * cell.height;\r\n        //   }\r\n        // });\r\n        // now do all of the usual stuff, according to whatever properties have been set on this GridLayout\r\n        go.GridLayout.prototype.doLayout.call(this, coll);\r\n        diagram.commitTransaction(\"PoolLayout\");\r\n      };\r\n      // end PoolLayout class\r\n\r\n      module.exports = AxisGroupLayout\n\n\n// WEBPACK FOOTER //\n// ./src/layout/axisGroupLayout.js","var $ = go.GraphObject.make;\r\nvar Base = require('./base')\r\nvar helpers = require('../helpers/helpers.gojs')\r\n  \r\nclass IconTextTemplate extends Base {\r\n    constructor(options){\r\n        super(options)\r\n        // this.nodeProperties = {}\r\n        \r\n    }\r\n\r\n    makeGeo(data, shape, options) {\r\n      // this is much more efficient than calling go.GraphObject.make:\r\n      var {radiusX=150,radiusY=100} = data\r\n      var geo =  new go.Geometry()\r\n        .add(new go.PathFigure(0, 0)  // start point\r\n          .add(new go.PathSegment(go.PathSegment.SvgArc,\r\n          radiusX*2,0,radiusX, radiusY,0,1,options.clockwiseFlag?1:0\r\n              )\r\n            )\r\n          )\r\n          geo.defaultStretch = go.GraphObject.Fill;\r\n          return geo;\r\n    }\r\n\r\n    getShiHalfEllipseShape(){\r\n      return $(go.Shape, {name:\"XU\", stroke: \"red\", fill:\"rgba(0,66,0,0)\",\r\n        // background: \"yellow\",\r\n        stretch: go.GraphObject.Uniform,\r\n        alignment: go.Spot.Bottom,\r\n        alignmentFocus: go.Spot.Bottom,\r\n        // row:1, column:0,margin:0\r\n      },\r\n        // new go.Binding(\"alignment\",\"\",function(data, shape){\r\n        //   if(data.flip){\r\n        //     return go.Spot.Top\r\n        //   }\r\n        //   return go.Spot.Bottom\r\n        // }),\r\n        // new go.Binding(\"alignmentFocus\",\"\",function(data, shape){\r\n        //   if(data.flip){\r\n        //     return go.Spot.Top\r\n        //   }\r\n        //   return go.Spot.Bottom\r\n        // }),\r\n          new go.Binding(\"geometry\", \"\", (data, shape)=>{\r\n            var clockwiseFlag = 0;\r\n            if(data.order%2 == 0){\r\n              data.flip = true;\r\n            }\r\n            if(data.flip){\r\n              clockwiseFlag = 1;\r\n            }\r\n            return this.makeGeo(data, shape, {clockwiseFlag:clockwiseFlag})\r\n          }),\r\n          new go.Binding(\"desiredSize\", \"desiredSize\", function(v) {\r\n                var size = new go.Size(v.width, v.height/2)\r\n                // console.log(\"v:\",v)\r\n                return size\r\n            }).ofObject(\"main\")\r\n        )\r\n    }\r\n    getXuHalfEllipseShape(){\r\n      return $(go.Shape, {name:\"SHI\", stroke: \"blue\", fill:\"rgba(0,66,0,0)\",\r\n        // background: \"gray\",\r\n        stretch: go.GraphObject.Uniform,\r\n        alignment: go.Spot.Bottom,\r\n        strokeDashArray: [5, 5],\r\n        alignmentFocus: go.Spot.Bottom,\r\n        // row:1, column:0,margin:0\r\n      },\r\n          // new go.Binding(\"alignment\",\"\",function(data, shape){\r\n          //   if(data.flip){\r\n          //     return go.Spot.Top\r\n          //   }\r\n          //   return go.Spot.Bottom\r\n          // }),\r\n          // new go.Binding(\"alignmentFocus\",\"\",function(data, shape){\r\n          //   if(data.flip){\r\n          //     return go.Spot.Top\r\n          //   }\r\n          //   return go.Spot.Bottom\r\n          // }),\r\n          new go.Binding(\"geometry\", \"\", (data, shape)=>{\r\n            var clockwiseFlag = 1;\r\n            if(data.order%2 == 0){\r\n              data.flip = true;\r\n            }\r\n            if(data.flip){\r\n              clockwiseFlag = 0;\r\n            }\r\n            return this.makeGeo(data, shape, {clockwiseFlag:clockwiseFlag})\r\n          }),\r\n          new go.Binding(\"desiredSize\", \"desiredSize\", function(v) {\r\n                var size = new go.Size(v.width, v.height/2)\r\n                // console.log(\"v:\",v)\r\n                return size\r\n            }).ofObject(\"main\")\r\n        )\r\n    }\r\n    getTextBuild(){\r\n      return $(go.TextBlock, {\r\n              name: \"TEXT\",\r\n              alignment: new go.Spot(0.5, 0.4),\r\n              font: \"bold 18px 幼圆\",\r\n              editable: true,\r\n              // flip:go.GraphObject.FlipHorizontal,\r\n              //margin: 3, editable: true,\r\n              \r\n              stroke: \"black\",\r\n              isMultiline: true,\r\n              overflow: go.TextBlock.OverflowClip,\r\n              wrap: go.TextBlock.WrapDesiredSize,\r\n              textAlign: \"center\",\r\n              spacingAbove: 4,\r\n              spacingBelow: 4,\r\n              portId: \"TEXT\",\r\n              stretch: go.GraphObject.Uniform\r\n          },\r\n          new go.Binding(\"textAlign\", \"textAlign\", function(v) {\r\n              return ['start', 'center', 'end'].indexOf(v)>-1 ? v : \"center\";\r\n          }).makeTwoWay(),\r\n          new go.Binding(\"spacingAbove\", \"spacingline\", function(v) {\r\n              return helpers.tdTransToNum(v, 4);\r\n          }).makeTwoWay(),\r\n          new go.Binding(\"spacingBelow\", \"spacingline\", function(v) {\r\n              return helpers.tdTransToNum(v, 4);\r\n          }).makeTwoWay(),\r\n          new go.Binding(\"width\", \"width\", function(v) {\r\n              return v-30;\r\n          }).ofObject(\"main\"),\r\n          // new go.Binding(\"height\", \"height\", function (v) {\r\n          //   return v;\r\n          // }).ofObject(\"SHAPE\"),\r\n          new go.Binding(\"text\", \"text\").makeTwoWay(),\r\n          new go.Binding(\"stroke\", \"textStroke\").makeTwoWay(),\r\n          new go.Binding(\"font\", \"font\").makeTwoWay()\r\n      )\r\n    }\r\n    getNodeTemplate(){\r\n      return $(go.Node,\"Spot\",{\r\n        locationObjectName: \"TEXT\",\r\n        movable: true,\r\n        resizable: true,\r\n        resizeObjectName: \"TEXT\",\r\n        selectionObjectName:\"TEXT\",\r\n        // rotatable: false,\r\n        layoutConditions: go.Part.LayoutStandard & go.Part.LayoutRemoved & go.Part.LayoutAdded & go.Part.LayoutNodeSized,\r\n        locationSpot: go.Spot.LeftCenter,\r\n        click: (e, node)=>{\r\n          console.log(node.data)\r\n        },\r\n        doubleClick: function (e, node){\r\n          e.diagram.__trtd.selectText(e, node)\r\n        },\r\n        resizeAdornmentTemplate:  // specify what resize handles there are and how they look\r\n        $(go.Adornment, \"Spot\",\r\n          $(go.Placeholder),  // takes size and position of adorned object\r\n          // $(go.Shape, \"Circle\",  // left resize handle\r\n          //   { alignment: go.Spot.Left, cursor: \"col-resize\",\r\n          //     desiredSize: new go.Size(9, 9), fill: \"lightblue\", stroke: \"dodgerblue\" }),\r\n          $(go.Shape, \"Circle\",  // right resize handle\r\n            { alignment: go.Spot.Right, cursor: \"col-resize\",\r\n              desiredSize: new go.Size(9, 9), fill: \"lightblue\", stroke: \"dodgerblue\" }),\r\n          // $(go.TextBlock, // show the width as text\r\n          //   { alignment: go.Spot.Top, alignmentFocus: new go.Spot(0.5, 1, 0, -2),\r\n          //     stroke: \"dodgerblue\" },\r\n          //   new go.Binding(\"text\", \"adornedObject\",\r\n          //                  function(shp) { return shp.naturalBounds.width.toFixed(0); })\r\n          //       .ofObject())\r\n        ),\r\n      },\r\n      new go.Binding(\"movable\", \"movable\").makeTwoWay(),\r\n      new go.Binding(\"deletable\", \"deletable\").makeTwoWay(),\r\n      // $(go.TextBlock,{\r\n      //   name:\"label\",\r\n      //   // height:30,\r\n        \r\n      //   alignment: go.Spot.Center,\r\n      //   verticalAlignment: go.Spot.Center,\r\n      //   // isMultiline: false,\r\n      //   overflow: go.TextBlock.OverflowEllipsis,\r\n      //   // overflow: go.TextBlock.OverflowClip,\r\n      //   // wrap: go.TextBlock.WrapDesiredSize,\r\n      //   wrap: go.TextBlock.wrap,\r\n      //   stretch: go.GraphObject.Fill,\r\n      //   maxLines: 1,\r\n      //   stroke: \"black\",\r\n      //   editable: true,\r\n      //   textAlign: \"start\",\r\n      //   font: \"18px 'Microsoft YaHei'\"\r\n      // },\r\n      // new go.Binding(\"text\", \"label\").makeTwoWay(),\r\n      // ),\r\n      $(go.TextBlock,{\r\n        name:\"TEXT\",\r\n        width:200, height:30,\r\n        maxSize: new go.Size(NaN, 70),\r\n        minSize: new go.Size(NaN, 70),\r\n        alignment: go.Spot.Center,\r\n        verticalAlignment: go.Spot.Center,\r\n        isMultiline: false,\r\n        overflow: go.TextBlock.OverflowEllipsis,\r\n        // overflow: go.TextBlock.OverflowClip,\r\n        // wrap: go.TextBlock.WrapDesiredSize,\r\n        // wrap: go.TextBlock.wrap,\r\n        stretch: go.GraphObject.Fill,\r\n        maxLines: 5,\r\n        stroke: \"black\",\r\n        editable: true,\r\n        textAlign: \"start\",\r\n        font: \"18px 'Microsoft YaHei'\"\r\n      },\r\n      new go.Binding(\"text\", \"text\").makeTwoWay(),\r\n      new go.Binding(\"width\", \"width\", function(v) {\r\n          //alert(v);\r\n          return v;\r\n      }).makeTwoWay(function(v) {\r\n          return v;\r\n      }),\r\n      new go.Binding(\"height\", \"height\", function(v) {\r\n          //alert(v);\r\n          return v;\r\n      }).makeTwoWay(function(v) {\r\n          return v;\r\n      }),\r\n      ),\r\n      $(go.Panel,\"Vertical\",\r\n        {alignment: go.Spot.Left,\r\n        alignmentFocus: go.Spot.Right,\r\n        },\r\n        $(go.Shape,{\r\n          name:\"ICON\",\r\n          width:16,\r\n          height:16,\r\n          click: function(e){\r\n            console.log(\"icon click\")\r\n          },\r\n          figure:\"Diamond\",\r\n          fill:\"red\",\r\n          strokeWidth:0,\r\n          margin: 3\r\n        },\r\n\r\n        new go.Binding(\"location\", \"loc\", go.Point.parse).makeTwoWay(go.Point.stringify),\r\n        new go.Binding(\"figure\", \"figure\").makeTwoWay(),\r\n        new go.Binding(\"fill\", \"fill\", function(v, obj) {\r\n          return v\r\n      }).makeTwoWay(),\r\n        new go.Binding(\"height\", \"height\", function(v) {\r\n            if(!v) v=30\r\n            return v*2/3;\r\n        }).ofObject(\"label\"),\r\n        new go.Binding(\"width\", \"height\", function(v) {\r\n          if(!v) v=30\r\n            return v*2/3;\r\n        }).ofObject(\"label\"),\r\n        ),\r\n      )\r\n      \r\n      // this.binding,\r\n      // $(go.Shape, \"Ellipse\",\r\n      // { name:\"main\",fill: \"lightgreen\", stroke: null, width: 300, height: 150 },\r\n      //   new go.Binding(\"desiredSize\", \"desiredSize\", function(v, d) {\r\n      //       // console.log(\"vd m\", v, d )\r\n      //       // if(!v) return d.part.findObject(\"SHAPE\").measuredBounds.size;\r\n      //       return go.Size.parse(v)\r\n      //   }).makeTwoWay(function(v) {\r\n      //       return go.Size.stringify(v)\r\n      //   }),\r\n      // ),\r\n      // this.getShiHalfEllipseShape(),\r\n      // this.getXuHalfEllipseShape(),\r\n\r\n      // // this.getUpHalfEllipseShape(),\r\n      // this.getTextBuild()\r\n      )\r\n    }\r\n}\r\n\r\nmodule.exports = IconTextTemplate\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/nodeTemplate/iconTextNodeTemplate.js","var $ = go.GraphObject.make;\nvar Base = require(\"./base\");\nvar helpers = require(\"../helpers/helpers.gojs\");\n\nclass AutoTextTemplate extends Base {\n  constructor(options) {\n    super(options);\n    // this.nodeProperties = {}\n  }\n\n\n\n  dealFireText(e, part) {\n    console.log(\"click fire button\");\n    // return\n    var diagram = e.diagram;\n    var node = diagram.selection.first();\n    var it = node.containingGroup.findSubGraphParts().iterator;\n    var centerNode;\n    while (it.next()) {\n      var n = it.value;\n      if (n.data.subRole == \"themeText\") {\n        centerNode = n;\n        // break;\n      }\n    }\n    // diagram.commandHandler.scrollToPart(centerNode);\n    function checkSameRadius(n, centerNode, node) {\n      if (n.data.dimKey == null) return false;\n      var maxRadius = Math.max(\n        Math.abs(node.data.orderX - centerNode.data.orderX),\n        Math.abs(node.data.orderY - centerNode.data.orderY)\n      );\n      if (\n        Math.abs(n.data.orderX - centerNode.data.orderX) == maxRadius ||\n        Math.abs(n.data.orderY - centerNode.data.orderY) == maxRadius\n      ) {\n        return true;\n      } else {\n        return false;\n      }\n      var r1 =\n        (n.data.orderX - centerNode.data.orderX) *\n          (n.data.orderX - centerNode.data.orderX) +\n        (n.data.orderY - centerNode.data.orderY) *\n          (n.data.orderY - centerNode.data.orderY);\n      var r2 =\n        (node.data.orderX - centerNode.data.orderX) *\n          (node.data.orderX - centerNode.data.orderX) +\n        (node.data.orderY - centerNode.data.orderY) *\n          (node.data.orderY - centerNode.data.orderY);\n      return r1 == r2;\n    }\n    var radius = Math.max(node.data.orderX, node.data.orderY);\n    radius = Math.abs(radius - centerNode.data.orderX);\n    // if(radius < 5) return;\n    it.reset();\n    while (it.next()) {\n      var n = it.value;\n\n      if (!checkSameRadius(n, centerNode, node)) {\n        //   centerNode= n;\n        // n.opacity = 0.1\n        // break;\n      } else {\n        var obj = n.findObject(\"TEXT\");\n        // obj.__font = obj.font;\n        // obj.font = \"30px 'Microsoft YaHei'\";\n        // n.findObject(\"TEXT\").font = \"40px 'Microsoft YaHei'\";\n      }\n    }\n    //   node.data.role == \"centerText\"\n    //   diagram.scrollToRect(node.naturalBounds)\n    var group = node.containingGroup;\n    var width = group.data.gridWidth;\n    radius = 10;\n    var rect = new go.Rect(\n      new go.Point(\n        centerNode.position.x - width * (radius + 1),\n        centerNode.position.y - width * (radius + 1)\n      ),\n      new go.Size(width * (radius + 1) * 2, width * (radius + 1) * 2)\n    );\n    // var rect = new go.Rect(go.Point.parse(\"1803.1413612565443 1348.6910994764396\"), new go.Size(700,700))\n    diagram.animationManager.isEnabled = false;\n    diagram.zoomToRect(rect);\n    diagram.centerRect(centerNode.actualBounds);\n    diagram.animationManager.isEnabled = true;\n    if (e.diagram.__trtd.dealFireTextCallback) {\n      e.diagram.__trtd.dealFireTextCallback(e, node);\n    }\n  }\n\n  getNodeSelectionAdornmentTemplate() {\n    var that = this;\n    return $(\n      go.Adornment,\n      \"Spot\",\n      {\n        // isShadowed: true,\n        isActionable: true\n      },\n      $(\n        go.Panel,\n        \"Auto\",\n        $(\n          go.Shape,\n          \"Rectangle\",\n          {\n            isPanelMain: true,\n            fill: null,\n            stroke: \"dodgerblue\",\n            strokeWidth: 3\n          }\n          // new go.Binding(\"fill\",\"\",function(e,obj){\n          //   var radBrush = $(go.Brush, \"Radial\", { 0: \"rgba(248,248,242,0)\", 1: 'RGB(255,242,0)' });\n          //   return radBrush;\n          // })\n          //\n        ),\n        $(go.Placeholder) // this represents the selected Node\n      ),\n\n      // ),\n      // the button to create a \"next\" node, at the top-right corner\n      //   $(\n      //     \"CircleButton\",\n      //     {\n      //       name: \"fireButton\",\n      //       visible: false,\n      //       toolTip: $(\n      //         \"ToolTip\",\n      //         $(\n      //           go.Panel,\n      //           \"Vertical\",\n\n      //           $(go.TextBlock, { text: \"碰撞火花\", margin: 3 })\n      //         )\n      //       ),\n      //     //   toolTip: $(\n      //     //     go.Adornment,\n      //     //     \"Auto\",\n      //     //     // $(go.Shape, { fill: \"#FFFFCC\" }),\n      //     //     $(\n      //     //       go.TextBlock,\n      //     //       { textAlign: \"center\", margin: new go.Margin(8, 4, 4, 4) }, // the tooltip shows the result of calling nodeInfo(data)\n      //     //       new go.Binding(\"text\", \"\", function(d) {\n      //     //         return \"碰撞火花\";\n      //     //       })\n      //     //     )\n      //     //   ),\n\n      //       alignment: new go.Spot(1, 0, 20, -20),\n      //       //   alignmentFocus: go.Spot.Left,\n      //       width: 50,\n      //       height: 50,\n      //       click: function(e) {\n      //         e.diagram.__trtd.addOlive();\n      //       } // this function is defined below\n      //     },\n      //     new go.Binding(\"visible\", \"\", function(v, obj){\n      //         console.log(\"showfireButton\", v, obj);\n      //         var node = obj.part;\n      //         // if(node.data.subRole == \"coreText\") return true;\n      //         return false;\n      //     }),\n      //     // $(go.Shape, \"FireHazard\", {\n      //     $(go.Shape, {\n      //       geometryString:\n      //         \"M854.35904 613.09952v44.52864c-0.6656 2.16576-1.46944 4.33152-1.92 6.54336-4.55168 23.53664-7.1168 47.68768-13.9776 70.528-20.36224 67.39968-58.5216 123.57632-112.01024 169.43616-41.25184 35.39968-87.68512 60.9024-140.75904 73.45152-17.44896 4.13696-35.34336 6.57408-53.0432 9.79968h-44.51328c-2.16576-0.6656-4.3776-1.67424-6.59456-1.8176-46.99136-2.93376-91.52512-15.16544-133.2992-36.51072-78.96576-40.22272-135.93088-100.11136-161.9456-186.27072-5.53984-18.41664-7.85408-37.71392-11.69408-56.62208v-42.48064c1.67424-10.4448 3.1232-20.97664 5.0944-31.41632 8.41728-45.58848 28.67712-85.9648 55.51104-123.22816 25.30304-35.072 52.18304-69.04832 76.1856-105.0112 25.94816-39.0144 38.5024-82.31936 31.13984-129.80224-1.44896-9.37984-2.80576-18.75968-4.22912-28.08832 0.95744-0.24576 1.92-0.44032 2.87744-0.7168 57.92256 60.70784 67.3536 135.2192 59.07968 215.74144 2.11456-2.26304 3.8912-3.84 5.24288-5.66272 49.16224-66.48832 70.28224-139.93984 54.25152-222.208-10.1888-52.33664-32.22016-99.3792-68.67456-138.496-15.83104-16.93696-34.97984-30.79168-52.6336-46.08h18.21696c1.50528 0.6144 2.90816 1.67424 4.4288 1.8176 32.0512 2.75968 62.1568 12.65152 90.83904 26.56256 65.59744 31.75424 118.77376 78.69952 163.25632 135.95648 65.3824 84.26496 107.88864 177.73056 116.31104 285.35296 3.2256 41.08288-0.96256 81.01376-11.91424 120.40192-4.13696 14.91456-9.96864 29.3376-15.3088 44.8768 21.21728-9.0368 37.34016-22.84544 49.79712-40.74496 37.1456-53.48864 47.53408-113.13664 39.1168-179.08224 2.73408 3.1744 4.13696 4.4288 5.08928 6.00576 22.3744 35.34848 39.1168 73.0624 47.85664 114.04288 3.47136 16.22016 5.49376 32.8192 8.22272 49.19296m-349.952-78.42816c-0.82944 0.5888-1.7408 1.19808-2.60096 1.792-1.16224 16.24576-2.0224 32.52224-3.59936 48.768-2.31424 24.78592-8.2432 48.6912-19.84 70.91712-14.17728 27.22816-37.88288 44.16-64.1536 57.63072-28.32896 14.6176-46.17216 35.49696-48.4864 68.4544-2.41664 33.8944 7.77728 62.37696 35.10272 83.20512 25.6 19.49696 55.50592 25.85088 87.21408 24.79104 50.60608-1.64864 88.32512-25.7024 103.43424-76.35968 10.85952-36.36224 9.088-72.97024 1.82784-109.568-9.92768-50.176-28.09344-96.94208-59.1872-137.92256-8.7296-11.45344-19.7632-21.17632-29.70624-31.70816\",\n      //       stroke: \"red\",\n      //       fill: \"red\",\n      //       desiredSize: new go.Size(25, 25)\n      //     })\n      //   ),\n\n      // $(go.Panel, \"Auto\", {        // 放大镜\n      //         name: \"ButtonIcon1\",\n      //         alignment: new go.Spot(0, 1, 5, -5),\n      //         //alignment: go.Spot.BottomLeft,\n      //         //alignmentFocus: go.Spot.BottomLeft,\n      //         width: 60,\n      //         height: 60,\n      //         isActionable: true,\n      //         click: expandCollapse // this function is defined below\n      //     },\n\n      //     $(go.Shape, \"Circle\", {\n      //         fill: \"rgba(1,1,1,0)\",\n      //         strokeWidth: 0,\n      //         stroke: \"green\",\n      //         width: 50,\n      //         height: 50\n      //     }),\n      $(\n        go.Panel,\n        \"Auto\",\n        {\n          // 放大镜\n          name: \"ButtonIcon1\",\n          visible: false,\n          //   alignment: new go.Spot(0, 1, 5, -5),\n          alignment: new go.Spot(1, 0, 20, -20),\n          //alignment: go.Spot.BottomLeft,\n          //alignmentFocus: go.Spot.BottomLeft,\n          width: 60,\n          height: 60,\n          isActionable: true,\n          toolTip: $(\n            \"ToolTip\",\n            $(\n              go.Panel,\n              \"Vertical\",\n              $(\n                go.Picture,\n                new go.Binding(\"source\", \"src\", function(s) {\n                  return \"images/\" + s + \".png\";\n                })\n              ),\n              $(go.TextBlock, { text: \"碰撞火花\", margin: 3 })\n            )\n          ),\n          cursor: \"pointer\",\n          click: function(e, part) {\n            //    if()\n\n            that.dealFireText(e, part);\n            // diagram.commandHandler.scrollToPart(centerNode)\n          } // this function is defined below\n        },\n        new go.Binding(\"visible\", \"\", function(e, obj) {\n          if (obj.part.data.subRole == \"coreText\") {\n            return true;\n          }\n          return false;\n        }),\n        $(go.Shape, \"Circle\", {\n          fill: \"rgba(1,1,1,0)\",\n          strokeWidth: 0,\n          stroke: \"green\",\n          width: 50,\n          height: 60\n        }),\n        $(\n          go.Shape,\n          {\n            //   _para1: true,\n\n            name: \"FireButton\",\n            fill: \"red\",\n            width: 30,\n            height: 40,\n            strokeWidth: 2,\n            stroke: \"red\"\n            //   geometryString: icons[\"zoomout\"], // default value for isTreeExpanded is true\n            //   desiredSize: new go.Size(30, 30),\n          },\n          new go.Binding(\"geometryString\", \"\", function(d, button) {\n            // console.log('dddddd:', d);\n            // console.log('button:', button);\n            // var myDiagram = d.diagram;\n            // var node = myDiagram.selection.first();\n            // if (node[\"_controlExpand\"]) {\n            //     return icons[\"zoomout\"];\n            // } else {\n            //     return icons[\"zoomin\"];\n            // }\n            return \"M854.35904 613.09952v44.52864c-0.6656 2.16576-1.46944 4.33152-1.92 6.54336-4.55168 23.53664-7.1168 47.68768-13.9776 70.528-20.36224 67.39968-58.5216 123.57632-112.01024 169.43616-41.25184 35.39968-87.68512 60.9024-140.75904 73.45152-17.44896 4.13696-35.34336 6.57408-53.0432 9.79968h-44.51328c-2.16576-0.6656-4.3776-1.67424-6.59456-1.8176-46.99136-2.93376-91.52512-15.16544-133.2992-36.51072-78.96576-40.22272-135.93088-100.11136-161.9456-186.27072-5.53984-18.41664-7.85408-37.71392-11.69408-56.62208v-42.48064c1.67424-10.4448 3.1232-20.97664 5.0944-31.41632 8.41728-45.58848 28.67712-85.9648 55.51104-123.22816 25.30304-35.072 52.18304-69.04832 76.1856-105.0112 25.94816-39.0144 38.5024-82.31936 31.13984-129.80224-1.44896-9.37984-2.80576-18.75968-4.22912-28.08832 0.95744-0.24576 1.92-0.44032 2.87744-0.7168 57.92256 60.70784 67.3536 135.2192 59.07968 215.74144 2.11456-2.26304 3.8912-3.84 5.24288-5.66272 49.16224-66.48832 70.28224-139.93984 54.25152-222.208-10.1888-52.33664-32.22016-99.3792-68.67456-138.496-15.83104-16.93696-34.97984-30.79168-52.6336-46.08h18.21696c1.50528 0.6144 2.90816 1.67424 4.4288 1.8176 32.0512 2.75968 62.1568 12.65152 90.83904 26.56256 65.59744 31.75424 118.77376 78.69952 163.25632 135.95648 65.3824 84.26496 107.88864 177.73056 116.31104 285.35296 3.2256 41.08288-0.96256 81.01376-11.91424 120.40192-4.13696 14.91456-9.96864 29.3376-15.3088 44.8768 21.21728-9.0368 37.34016-22.84544 49.79712-40.74496 37.1456-53.48864 47.53408-113.13664 39.1168-179.08224 2.73408 3.1744 4.13696 4.4288 5.08928 6.00576 22.3744 35.34848 39.1168 73.0624 47.85664 114.04288 3.47136 16.22016 5.49376 32.8192 8.22272 49.19296m-349.952-78.42816c-0.82944 0.5888-1.7408 1.19808-2.60096 1.792-1.16224 16.24576-2.0224 32.52224-3.59936 48.768-2.31424 24.78592-8.2432 48.6912-19.84 70.91712-14.17728 27.22816-37.88288 44.16-64.1536 57.63072-28.32896 14.6176-46.17216 35.49696-48.4864 68.4544-2.41664 33.8944 7.77728 62.37696 35.10272 83.20512 25.6 19.49696 55.50592 25.85088 87.21408 24.79104 50.60608-1.64864 88.32512-25.7024 103.43424-76.35968 10.85952-36.36224 9.088-72.97024 1.82784-109.568-9.92768-50.176-28.09344-96.94208-59.1872-137.92256-8.7296-11.45344-19.7632-21.17632-29.70624-31.70816\";\n          })\n        )\n      )\n      // )\n    );\n  }\n  clearBorder(node) {\n    if (node.data.showBorder) {\n      // if(node.data.text == \"\"){\n      node.findObject(\"textBorder\").visible = false;\n      // }\n    }\n  }\n\n  makeGeo(data, shape, options) {\n    // this is much more efficient than calling go.GraphObject.make:\n    var { radiusX = 150, radiusY = 100 } = data;\n    var geo = new go.Geometry().add(\n      new go.PathFigure(0, 0) // start point\n        .add(\n          new go.PathSegment(\n            go.PathSegment.SvgArc,\n            radiusX * 2,\n            0,\n            radiusX,\n            radiusY,\n            0,\n            1,\n            options.clockwiseFlag ? 1 : 0\n          )\n        )\n    );\n    geo.defaultStretch = go.GraphObject.Fill;\n    return geo;\n  }\n  getNodeTemplate() {\n    var properties = {\n      figure: \"Rectangle\",\n      fill: \"rgba(0,0,0,0)\",\n      strokeWidth: 1,\n      stroke: \"rgba(0,0,0,0)\",\n      fontSize: 15,\n      font: \"sans-serif\"\n    };\n    var that = this;\n    var diagram = this.diagram;\n    return $(\n      go.Node,\n      \"Spot\",\n      {\n        _controlExpand: true,\n        __trtdNode: that,\n        layerName: \"Foreground\",\n        zOrder: 10,\n        movable: true,\n        //   copyable: false,\n        visible: true,\n        locationSpot: go.Spot.Center,\n        resizeCellSize: new go.Size(10, 10),\n        toolTip: that.getTooTip(),\n        //   locationObjectName: \"textBorder\",\n        //   selectionObjectName: \"textBorder\",\n        resizable: true,\n        //   selectable: false,\n        //   clickable: false,\n        // resizeObjectName: \"SHAPE\", // user can resize the Shape\n        rotatable: false,\n        location: new go.Point(0, 0),\n        //rotateObjectName: \"SHAPE\",  // rotate the Shape without rotating the label\n        // doubleClick: selectText,\n        toMaxLinks: 1,\n        mouseDrop: function(e, obj) {\n          var node = obj.part;\n          var selnode = e.diagram.selection.first();\n\n          // 常变\n          if (\n            selnode.data.category == \"picGroup\" &&\n            selnode.data.role == \"cbian\" &&\n            node.data.role == \"centerText\"\n          ) {\n            var oliveNode = e.diagram.findNodeForKey(node.data.olive);\n            if (!oliveNode) return;\n            var it = selnode.findSubGraphParts().iterator;\n            var deleteObjs = [];\n            var cbian = {};\n            while (it.next()) {\n              var n = it.value;\n              if (n.data.category == \"autoText\") {\n                if (n.data.locationSpot == \"0 0 0 0\") {\n                  cbian.shiText = n.data.text;\n                }\n                if (n.data.locationSpot == \"0 0.5 0 0\") {\n                  cbian.centerText = n.data.text;\n                }\n                if (n.data.locationSpot == \"0 1 0 0\") {\n                  cbian.xuText = n.data.text;\n                }\n              }\n              deleteObjs.push(n.data);\n            }\n            e.diagram.startTransaction(\"mouseDrop\");\n            // 删除总结图\n            e.diagram.model.removeNodeDataCollection(deleteObjs);\n            var backupSelnode = JSON.parse(JSON.stringify(selnode.data));\n            e.diagram.model.removeNodeData(selnode.data);\n\n            // 添加新橄榄\n            e.diagram.__trtd.addOlive(oliveNode, cbian);\n            e.diagram.commitTransaction(\"mouseDrop\");\n            return;\n          }\n\n          // 互换要点文字,只有云盘里的文字可以互换\n          if (\n            (selnode.data.subRole == \"coreText\" &&\n              node.data.subRole == \"coreText\") ||\n            (selnode.data.subRole == \"yunpanText\" &&\n              node.data.subRole == \"yunpanText\")\n          ) {\n            e.diagram.model.startTransaction(\"coreTextExchange\");\n            var selOrderX = selnode.data.orderX;\n            var selOrderY = selnode.data.orderY;\n            var selDimKey = selnode.data.dimKey;\n            e.diagram.model.setDataProperty(\n              selnode.data,\n              \"orderX\",\n              node.data.orderX\n            );\n            e.diagram.model.setDataProperty(\n              selnode.data,\n              \"orderY\",\n              node.data.orderY\n            );\n            e.diagram.model.setDataProperty(\n              selnode.data,\n              \"dimKey\",\n              node.data.dimKey\n            );\n            e.diagram.model.setDataProperty(node.data, \"orderX\", selOrderX);\n            e.diagram.model.setDataProperty(node.data, \"orderY\", selOrderY);\n            e.diagram.model.setDataProperty(node.data, \"dimKey\", selDimKey);\n            e.diagram.model.commitTransaction(\"coreTextExchange\");\n          }\n\n          // 云盘互换维度\n          if (\n            selnode.data.subRole == \"dimText\" &&\n            node.data.subRole == \"dimText\" &&\n            selnode.data.category == node.data.category\n          ) {\n            if (selnode.data.group != node.data.group) return;\n            if (!selnode.containingGroup) return;\n            if (selnode.containingGroup.data.category != \"yunpanGroup\") return;\n            if (\n              !(\n                selnode.data.dimX == node.data.dimX ||\n                selnode.data.dimY == node.data.dimY\n              )\n            ) {\n              return;\n            }\n\n            e.diagram.model.startTransaction(\"dimTextExchange\");\n            var selOrderX = selnode.data.dimX;\n            var selOrderY = selnode.data.dimY;\n            var it = node.containingGroup.findSubGraphParts().iterator;\n            var nodeCoreTexts = [];\n            var selnodeCoreTexts = [];\n            var yunnodeCoreTexts = [];\n            var yunselnodeCoreTexts = [];\n            var normDim = \"X\";\n            if (selnode.data.dimX == 0) {\n              normDim = \"Y\";\n            }\n            var selOrder = selnode.data[\"dim\" + normDim];\n            var nodeOrder = node.data[\"dim\" + normDim];\n            while (it.next()) {\n              var n = it.value;\n              if (n.data.subRole == \"yunpanText\") {\n                if (n.data[\"order\" + normDim] == nodeOrder) {\n                  yunnodeCoreTexts.push(n);\n                }\n                if (n.data[\"order\" + normDim] == selOrder) {\n                  yunselnodeCoreTexts.push(n);\n                }\n              }\n            }\n            var tmpX, tmpY;\n            for (var i = 0; i < yunnodeCoreTexts.length; i++) {\n              e.diagram.model.setDataProperty(\n                yunnodeCoreTexts[i].data,\n                \"order\" + normDim,\n                selOrder\n              );\n            }\n            for (var i = 0; i < yunselnodeCoreTexts.length; i++) {\n              e.diagram.model.setDataProperty(\n                yunselnodeCoreTexts[i].data,\n                \"order\" + normDim,\n                nodeOrder\n              );\n            }\n            e.diagram.model.setDataProperty(\n              selnode.data,\n              \"dim\" + normDim,\n              nodeOrder\n            );\n            e.diagram.model.setDataProperty(\n              node.data,\n              \"dim\" + normDim,\n              selOrder\n            );\n            // e.diagram.model.setDataProperty(\n            //   node.data,\n            //   \"rho\" + normDim,\n            //   selOrder\n            // );\n            e.diagram.model.commitTransaction(\"dimTextExchange\");\n            return;\n          }\n\n          // 互换维度\n          if (\n            selnode.data.subRole == \"dimText\" &&\n            node.data.subRole == \"dimText\"\n          ) {\n            e.diagram.model.startTransaction(\"dimTextExchange\");\n            var selOrderX = selnode.data.dimX;\n            var selOrderY = selnode.data.dimY;\n            var it = node.containingGroup.findSubGraphParts().iterator;\n            var nodeCoreTexts = [];\n            var selnodeCoreTexts = [];\n            var yunnodeCoreTexts = [];\n            var yunselnodeCoreTexts = [];\n            var normDim = \"X\";\n            if (selnode.data.dimX == 0) {\n              normDim = \"Y\";\n            }\n            while (it.next()) {\n              var n = it.value;\n              if (n.data.dimKey == node.data.key) {\n                nodeCoreTexts.push(n);\n              }\n              if (n.data.dimKey == selnode.data.key) {\n                selnodeCoreTexts.push(n);\n              }\n              if (n.data.subRole == \"yunpanText\") {\n                if (n.data[\"order\" + normDim] == node.data[\"order\" + normDim]) {\n                  yunnodeCoreTexts.push(n);\n                }\n                if (\n                  n.data[\"order\" + normDim] == selnode.data[\"order\" + normDim]\n                ) {\n                  yunselnodeCoreTexts.push(n);\n                }\n              }\n            }\n            console.log(\n              \"selnodeCoreTextsselnodeCoreTextsselnodeCoreTexts\",\n              selnodeCoreTexts.length\n            );\n            var centerOrderX =\n              (node.containingGroup.__yunPointsX.length + 1) / 2;\n            var centerOrderY =\n              (node.containingGroup.__yunPointsY.length + 1) / 2;\n\n            if (selnode.data.dimX > centerOrderX) {\n              selnodeCoreTexts.sort(function(a, b) {\n                return a.data.orderX - b.data.orderX;\n              });\n            }\n            if (selnode.data.dimX == centerOrderX) {\n              if (selnode.data.dimY > centerOrderY) {\n                selnodeCoreTexts.sort(function(a, b) {\n                  return a.data.orderY - b.data.orderY;\n                });\n              } else {\n                selnodeCoreTexts.sort(function(a, b) {\n                  return b.data.orderY - a.data.orderY;\n                });\n              }\n            }\n            if (selnode.data.dimX < centerOrderX) {\n              selnodeCoreTexts.sort(function(a, b) {\n                return b.data.orderX - a.data.orderX;\n              });\n            }\n\n            if (node.data.dimX > centerOrderX) {\n              nodeCoreTexts.sort(function(a, b) {\n                return a.data.orderX - b.data.orderX;\n              });\n            }\n            if (node.data.dimX == centerOrderX) {\n              if (node.data.dimY > centerOrderY) {\n                nodeCoreTexts.sort(function(a, b) {\n                  return a.data.orderY - b.data.orderY;\n                });\n              } else {\n                nodeCoreTexts.sort(function(a, b) {\n                  return b.data.orderY - a.data.orderY;\n                });\n              }\n            }\n            if (node.data.dimX < centerOrderX) {\n              nodeCoreTexts.sort(function(a, b) {\n                return b.data.orderX - a.data.orderX;\n              });\n            }\n\n            var tmpX, tmpY;\n            for (var i = 0; i < selnodeCoreTexts.length; i++) {\n              tmpX = selnodeCoreTexts[i].data.orderX;\n              tmpY = selnodeCoreTexts[i].data.orderY;\n              e.diagram.model.setDataProperty(\n                selnodeCoreTexts[i].data,\n                \"orderX\",\n                nodeCoreTexts[i].data.orderX\n              );\n              e.diagram.model.setDataProperty(\n                selnodeCoreTexts[i].data,\n                \"orderY\",\n                nodeCoreTexts[i].data.orderY\n              );\n              e.diagram.model.setDataProperty(\n                nodeCoreTexts[i].data,\n                \"orderX\",\n                tmpX\n              );\n              e.diagram.model.setDataProperty(\n                nodeCoreTexts[i].data,\n                \"orderY\",\n                tmpY\n              );\n            }\n            e.diagram.model.setDataProperty(\n              selnode.data,\n              \"dimX\",\n              node.data.dimX\n            );\n            e.diagram.model.setDataProperty(\n              selnode.data,\n              \"dimY\",\n              node.data.dimY\n            );\n            e.diagram.model.setDataProperty(node.data, \"dimX\", selOrderX);\n            e.diagram.model.setDataProperty(node.data, \"dimY\", selOrderY);\n            e.diagram.model.commitTransaction(\"dimTextExchange\");\n          }\n\n          if (selnode.data.category != \"wave\") {\n            return;\n          }\n          if (node.data.role != \"centerText\") {\n            return;\n          }\n          if (!node) {\n            // node.containingGroup.layout.isValidLayout = false\n            return;\n          }\n          if (selnode.data.group != obj.data.group) {\n            return;\n          }\n          e.diagram.startTransaction(\"mouseDrop\");\n          selnode.__oldOrder = selnode.data.order;\n          e.diagram.model.setDataProperty(\n            selnode.data,\n            \"order\",\n            node.data.order + 0.5\n          );\n          var xuText = e.diagram.model.findNodeDataForKey(selnode.data.xuText);\n          var shiText = e.diagram.model.findNodeDataForKey(\n            selnode.data.shiText\n          );\n          e.diagram.model.setDataProperty(\n            shiText,\n            \"order\",\n            node.data.order + 0.5\n          );\n          e.diagram.model.setDataProperty(\n            xuText,\n            \"order\",\n            node.data.order + 0.5\n          );\n          // node.containingGroup.layout.isValidLayout = false\n          e.diagram.commitTransaction(\"mouseDrop\");\n        },\n        mouseDragEnter: function(e, obj) {\n          var node = obj.part;\n          var selnode = e.diagram.selection.first();\n          if (!selnode) return;\n          if (\n            (selnode.data.subRole == \"coreText\" &&\n              node.data.subRole == \"coreText\") ||\n            (selnode.data.subRole == \"yunpanText\" &&\n              node.data.subRole == \"yunpanText\")\n          ) {\n            selnode.areaBackground = null;\n            node.areaBackground = \"RGB(107,208,137)\";\n          }\n          if (\n            selnode.data.subRole == \"dimText\" &&\n            node.data.subRole == \"dimText\"\n          ) {\n            selnode.areaBackground = null;\n            node.areaBackground = \"RGB(107,208,137)\";\n          }\n\n          if (node.data.role == \"centerText\") {\n            node.layerName = \"Background\";\n          }\n          // if (!(selnode instanceof go.Node)  || selnode.data.role != \"freeText\"  || selnode.category != \"autoText\" ||selnode.data.subRole != \"coreText\") {\n          //     return;\n          // }\n\n          // //var sat = node.selectionAdornmentTemplate;\n          // //var adorn = sat.copy();\n          // //adorn.adornedObject = node;\n          // //node.addAdornment(\"dragEnter\", adorn);\n\n          // //if (!mayWorkFor(selnode, node)) return;\n          // var shape = node.findObject(\"SHAPE\");\n          // if (shape) {\n          //     shape._prevFill = shape.fill; // remember the original brush\n          //     shape.fill = \"darkred\";\n          // }\n        },\n        mouseDragLeave: function(e, obj) {\n          var node = obj.part;\n          var selnode = e.diagram.selection.first();\n          // var shape = node.findObject(\"SHAPE\");\n          if (\n            (selnode.data.subRole == \"coreText\" &&\n              node.data.subRole == \"coreText\") ||\n            (selnode.data.subRole == \"yunpanText\" &&\n              node.data.subRole == \"yunpanText\")\n          ) {\n            node.areaBackground = null;\n          }\n          if (\n            selnode.data.subRole == \"dimText\" &&\n            node.data.subRole == \"dimText\"\n          ) {\n            node.areaBackground = null;\n          }\n          if (node.data.role == \"centerText\") {\n            node.layerName = \"Foreground\";\n          }\n          //node.removeAdornment(\"dragEnter\");\n        },\n        selectionChanged: node => {\n          console.log(\"selectionChanged\", node);\n\n          if (\n            node.data.category != \"autoText\" ||\n            node.data.orderX == null ||\n            node.data.orderY == null ||\n            node.data.role != \"freeText\" ||\n            (node.data.subRole != \"coreText\" &&\n              node.data.subRole != \"yunpanText\")\n          ) {\n            return;\n          }\n\n          if (\n            !node.containingGroup ||\n            (node.containingGroup.data.category != \"yunGroup\" &&\n              node.containingGroup.data.category != \"yunpanGroup\")\n          ) {\n            return;\n          }\n\n          if (node.containingGroup.data.beginSpark != \"line\") {\n            return;\n          }\n          if (\n            node.containingGroup.__yunPointsX &&\n            node.containingGroup.__yunPointsY\n          ) {\n            var centerOrderX =\n              (node.containingGroup.__yunPointsX.length + 1) / 2;\n            var centerOrderY =\n              (node.containingGroup.__yunPointsY.length + 1) / 2;\n            if (\n              node.data.orderX == centerOrderX &&\n              node.data.orderY == centerOrderY\n            ) {\n              // 中心文字不参与变色\n              return;\n            }\n            var orderX = node.data.orderX,\n              orderY = node.data.orderY;\n            if (orderX == centerOrderX) {\n              orderX = orderY;\n            }\n            if (orderY == centerOrderY) {\n              orderY = orderX;\n            }\n            var shapeStrokes = node.containingGroup.data.shapeStrokes;\n            var showShape = node.containingGroup.data.showShape; // 是否显示矩形\n            if (node.isSelected) {\n              if (node.containingGroup.data.snapType == \"between\") {\n                var diff =\n                  Math.max(\n                    Math.abs(node.data.orderX - centerOrderX),\n                    Math.abs(node.data.orderY - centerOrderY)\n                  ) + 1;\n              } else {\n                var diff = Math.max(\n                  Math.abs(node.data.orderX - centerOrderX),\n                  Math.abs(node.data.orderY - centerOrderY)\n                );\n              }\n              console.log(\"diff:\", diff, node.data.orderX, node.data.orderY);\n              var it = node.containingGroup.findSubGraphParts().iterator;\n\n              console.log(\"showShape\", showShape);\n              // var beginSpark = node.containingGroup.data.beginSpark; // 是否显示矩形\n              var shape = null;\n              while (it.next()) {\n                var n = it.value;\n                if (\n                  n.data.category == \"autoText\" &&\n                  n.data.orderX != null &&\n                  n.data.orderY != null &&\n                  n.data.role == \"freeText\"\n                ) {\n                  n.findObject(\"textBorder\").visible = false;\n                  // if((Math.abs(n.data.orderX-centerOrderX) == Math.abs(orderX-centerOrderX)\n                  //     || Math.abs(n.data.orderX-centerOrderY) == Math.abs(orderY-centerOrderY))\n                  // && !(Math.abs(n.data.orderX-centerOrderY) < Math.abs(orderY-centerOrderY)\n                  //     && Math.abs(n.data.orderX-centerOrderX) < Math.abs(orderX-centerOrderX))){\n                  //     n.areaBackground = \"red\"\n                  // }\n\n                  if (\n                    (Math.abs(n.data.orderX - centerOrderX) ==\n                      Math.abs(orderX - centerOrderX) &&\n                      Math.abs(n.data.orderY - centerOrderY) <=\n                        Math.abs(orderY - centerOrderY)) ||\n                    (Math.abs(n.data.orderX - centerOrderX) <=\n                      Math.abs(orderX - centerOrderX) &&\n                      Math.abs(n.data.orderY - centerOrderY) ==\n                        Math.abs(orderY - centerOrderY))\n                  ) {\n                    // n.findObject(\"place\").visible = true;\n                    // n.__backupFont = n.findObject(\"TEXT\").font\n                    // n.findObject(\"TEXT\").font = \"40px 'Microsoft YaHei'\";\n                    // n.__backupMaxSize = n.maxSize\n                    // n.maxSize = new go.Size(200,200)\n                    n.areaBackground = \"white\";\n                    n.zOrder = 999;\n                  }\n                }\n                if (n.data.category == \"shape\" && n.data.role == \"background\") {\n                  var obj = n.findObject(\"SHAPE\");\n                  // console.log(\"dfsdfsdfsdf\", obj)\n                  if (n.data.gridWidth == diff * 2) {\n                    shape = obj;\n                    // if(showShape){\n                    // n.visible = true\n                    // }\n                    if (!obj.__prestroke) {\n                      obj.__prestroke = obj.stroke;\n                      obj.stroke = \"rgba(255,0,0,0.5)\";\n                    }\n                  } else {\n                    if (obj.__prestroke) {\n                      obj.stroke = obj.__prestroke;\n                      delete obj.__prestroke;\n                    }\n                  }\n                }\n              }\n              if (!shape) {\n                if (node.containingGroup.data.snapType == \"between\") {\n                  var gridWidth = diff * 2;\n                } else {\n                  var gridWidth = diff * 2;\n                }\n                console.log(\"addShape\");\n                node.diagram.model.startTransaction(\"addShape\");\n                var shapeData = {\n                  deletable: true,\n                  role: \"background\",\n                  category: \"shape\",\n                  // \"loc\":\"-1532.0268216255727 9.121091688849674\",\n                  loc: go.Point.stringify(\n                    new go.Point(\n                      node.containingGroup.__yunPointsX[centerOrderX - 1],\n                      node.containingGroup.__yunPointsY[centerOrderY - 1]\n                    )\n                  ),\n                  movable: true,\n                  group: -19,\n                  key: helpers.guid(),\n                  orderX: 10,\n                  orderY: 10,\n                  gridWidth: gridWidth,\n                  stroke: shapeStrokes[diff - 1],\n                  visible: true,\n                  strokeDashArray: \"[0,0]\",\n                  strokeWidth: 3\n                  //   \"desiredSize\":\"1263 1263\"\n                };\n                node.diagram.model.addNodeData(shapeData);\n                node.diagram.model.commitTransaction(\"addShape\");\n                setTimeout(() => {\n                  var nod = node.diagram.findNodeForKey(shapeData.key);\n                  console.log(\"add shape add shape\");\n                  if (nod) {\n                    // nod.visible = true\n                    var obj = nod.findObject(\"SHAPE\");\n                    if (!obj.__prestroke) {\n                      obj.__prestroke = obj.stroke;\n                      obj.stroke = \"rgba(255,0,0,0.5)\";\n                    }\n                  }\n                }, 100);\n              }\n            } else {\n              var it = node.containingGroup.findSubGraphParts().iterator;\n              while (it.next()) {\n                var n = it.value;\n                n.opacity = 1;\n                // var textObj = n.findObject(\"TEXT\");\n                // if(textObj && textObj.__font){\n                //     textObj.font = textObj.__font;\n                //     delete textObj.__font\n                // }\n                // obj.__font = obj.font;\n                // obj.font = \"40px 'Microsoft YaHei'\";\n                if (\n                  n.data.category == \"autoText\" &&\n                  n.data.orderX != null &&\n                  n.data.orderY != null &&\n                  n.data.role == \"freeText\"\n                ) {\n                  // n.findObject(\"textBorder\").visible = false;\n                  // if((n.data.orderX == orderX || n.data.orderY == orderY)\n                  // && !(n.data.orderX < orderX && n.data.orderY <orderY )){\n                  //     n.areaBackground = \"red\"\n                  // }\n\n                  if (\n                    (Math.abs(n.data.orderX - centerOrderX) ==\n                      Math.abs(orderX - centerOrderX) &&\n                      Math.abs(n.data.orderY - centerOrderY) <=\n                        Math.abs(orderY - centerOrderY)) ||\n                    (Math.abs(n.data.orderX - centerOrderX) <=\n                      Math.abs(orderX - centerOrderX) &&\n                      Math.abs(n.data.orderY - centerOrderY) ==\n                        Math.abs(orderY - centerOrderY))\n                  ) {\n                    // n.findObject(\"textBorder\").visible = true;\n                    // n.findObject(\"place\").visible = false;\n                    // n.__backupMaxSize = n.maxSize\n                    // n.maxSize = n.__backupMaxSize\n                    // n.findObject(\"TEXT\").font = n.__backupFont\n                    // n.findObject(\"TEXT\").font = \"40px 'Microsoft YaHei'\";\n                    n.areaBackground = null;\n                    n.zOrder = NaN;\n                  }\n                }\n                if (n.data.category == \"shape\" && n.data.role == \"background\") {\n                  var obj = n.findObject(\"SHAPE\");\n                  // console.log(\"dfsdfsdfsdf\", obj)\n                  if (!showShape) {\n                    // n.visible = false\n                    obj.stroke = \"rgba(255,0,0,0)\";\n                  }\n                  if (n.data.gridWidth == diff * 2) {\n                    if (!obj.__prestroke) {\n                      obj.__prestroke = obj.stroke;\n                      obj.stroke = \"rgba(255,0,0,0.7)\";\n                    }\n                  } else {\n                    if (obj.__prestroke) {\n                      obj.stroke = obj.__prestroke;\n                      delete obj.__prestroke;\n                    }\n                  }\n                }\n              }\n            }\n          }\n        },\n        click: (e, node) => {\n          console.log(node.data);\n          // if(node.data.group && node.containingGroup.data.category == \"picGroup\"){\n          //     var it = node.containingGroup.findSubGraphParts().iterator;\n          //     var basePoint;\n          //     while(it.next()){\n          //         var n = it.value;\n          //         if(n.data.role == \"theme\"){\n          //             basePoint = n;\n          //             break;\n          //         }\n          //     }\n          //     if(basePoint){\n          //         console.log(`cbian ${node.data.role} offset: `, node.location.copy().subtract(basePoint.location))\n          //     }\n          // }\n          // if(node.data.role == \"centerText\"){\n          //     var waveNode = node.diagram.findNodeForKey(node.data.olive)\n          //     node.layerName = \"Background\"\n          //     if(waveNode){\n          //         node.diagram.select(waveNode)\n          //     }\n          // }\n          // e.diagram.model.startTransaction(\"click\")\n          // e.diagram.model.setDataProperty(node.data, \"dimKey\", -124)\n          // e.diagram.model.setDataProperty(node.data,\"dimKey\", -73)\n          // e.diagram.model.setDataProperty(node.data,\"dimKey\", -141)\n          // e.diagram.model.setDataProperty(node.data,\"dimKey\", -74)\n\n          // e.diagram.model.setDataProperty(node.data, \"dimKey\", -124)\n          // e.diagram.model.setDataProperty(node.data,\"dimKey\", -141)\n          // e.diagram.model.setDataProperty(node.data,\"dimKey\", -158)\n          // e.diagram.model.setDataProperty(node.data,\"dimKey\", -176)\n          // e.diagram.model.setDataProperty(node.data,\"dimKey\", -73)\n          // e.diagram.model.setDataProperty(node.data,\"dimKey\", -74)\n          // e.diagram.model.setDataProperty(node.data,\"dimKey\", -175)\n          // e.diagram.model.setDataProperty(node.data,\"dimKey\", -177)\n          // node.data.dimKey = -124\n          // node.data.dimKey = -141\n          // node.data.dimKey = -158\n          // node.data.dimKey = -176\n          // node.data.dimKey = -73\n          // node.data.dimKey = -74\n          // node.data.dimKey = -175\n          // node.data.dimKey = -177\n\n          // e.diagram.model.commitTransaction(\"click\")\n        },\n        //   rotateAdornmentTemplate:  // specify appearance of rotation handle\n        //   $(go.Adornment,\n        //     { locationSpot: go.Spot.Center },\n        //     $(go.Shape, \"BpmnActivityLoop\",\n        //       { width: 12, height: 12, cursor: \"pointer\",\n        //         background: \"transparent\", stroke: \"dodgerblue\", strokeWidth: 2 })\n        //     ),\n        mouseOver: function(e, node) {\n          // if(node.data.hyperlink){\n          //   var textObj = node.findObject('TEXT');\n          //   textObj.isUnderline = true;\n          // }\n          // console.log(\"mouseOvermouseOvermouseOver\")\n\n          if (node.data.text == \"\") {\n            node.findObject(\"textBorder\").visible = true;\n          }\n\n          if (node.data.showBorder) {\n            if (\n              node.data.text == \"\" &&\n              (node.data.role == \"xuText\" || node.data.role == \"shiText\")\n            ) {\n              node.findObject(\"textBorder\").visible = true;\n            }\n          }\n          if (node.data.role == \"centerText\") {\n            node.layerName = \"Background\";\n            // node.diagram.model.startTransaction(\"centerText\")\n            // node.diagram.model.setDataProperty(node.data,\"layerName\", \"Background\")\n            // node.diagram.model.commitTransaction(\"centerText\")\n          }\n          //   node.areaBackground = \"mediumslateblue\"\n          // }\n\n          // if(!node.containingGroup) return;\n          // var it = node.containingGroup.findSubGraphParts().iterator;\n          // while (it.next()) {\n          //     var n = it.value;\n          //     if(n.data.category == \"autoText\"){\n          //         if(n.data.order == node.data.order){\n          //             // locateNode = n;\n          //             n.areaBackground = \"mediumslateblue\"\n          //         }\n          //     }\n          // }\n          // diagram.__trtd.showNodeRemarkTips(e, node);\n        },\n        mouseLeave: function(e, node) {\n          //   if(node.data.text == \"\"){\n          // if(node.data.showBorder){\n          // if(node.data.text == \"\"){\n          node.findObject(\"textBorder\").visible = false;\n          // }\n          // }\n          if (node.data.role == \"centerText\") {\n            node.layerName = \"Foreground\";\n            // node.diagram.model.startTransaction(\"centerText\")\n            // node.diagram.model.setDataProperty(node.data,\"layerName\", \"Foreground\")\n            // node.diagram.model.commitTransaction(\"centerText\")\n          }\n          // node.areaBackground = null\n          //   }\n        },\n        //   layoutConditions: go.Part.LayoutStandard,\n        layoutConditions:\n          go.Part.LayoutStandard &\n          go.Part.LayoutRemoved &\n          go.Part.LayoutAdded &\n          ~go.Part.LayoutNodeSized,\n        //layoutConditions:~go.Part.LayoutAdded,\n        // fromLinkable: true, toLinkable: true,\n        alignment: go.Spot.Center,\n        alignmentFocus: go.Spot.Center,\n        contextMenu: $(go.Adornment),\n        // specify what resize handles there are and how they look\n        resizeAdornmentTemplate: $(\n          go.Adornment,\n          \"Spot\",\n          $(go.Placeholder), // takes size and position of adorned object\n          $(\n            go.Shape,\n            \"Circle\", // left resize handle\n            {\n              alignment: go.Spot.Left,\n              cursor: \"col-resize\",\n              desiredSize: new go.Size(9, 9),\n              fill: \"lightblue\",\n              stroke: \"dodgerblue\"\n            }\n          ),\n          $(\n            go.Shape,\n            \"Circle\", // right resize handle\n            {\n              alignment: go.Spot.Right,\n              cursor: \"col-resize\",\n              desiredSize: new go.Size(9, 9),\n              fill: \"lightblue\",\n              stroke: \"dodgerblue\"\n            }\n          ),\n          $(\n            go.Shape,\n            \"Circle\", // right resize handle\n            {\n              alignment: go.Spot.Top,\n              cursor: \"col-resize\",\n              desiredSize: new go.Size(9, 9),\n              fill: \"lightblue\",\n              stroke: \"dodgerblue\"\n            }\n          ),\n          $(\n            go.Shape,\n            \"Circle\", // right resize handle\n            {\n              alignment: go.Spot.Bottom,\n              cursor: \"col-resize\",\n              desiredSize: new go.Size(9, 9),\n              fill: \"lightblue\",\n              stroke: \"dodgerblue\"\n            }\n          )\n          // $(go.TextBlock, // show the width as text\n          //   { alignment: go.Spot.Top, alignmentFocus: new go.Spot(0.5, 1, 0, -2),\n          //     stroke: \"dodgerblue\" },\n          //   new go.Binding(\"text\", \"adornedObject\",\n          //                  function(shp) { return shp.naturalBounds.width.toFixed(0); })\n          //       .ofObject())\n        ),\n        doubleClick: function(e, node) {\n          if(e.diagram.__trtd.textDoubleClick){\n            return e.diagram.__trtd.textDoubleClick(e, node)\n          }\n          e.diagram.__trtd.selectText(e, node);\n        },\n\n        selectionAdornmentTemplate: this.getNodeSelectionAdornmentTemplate()\n      },\n      new go.Binding(\"locationSpot\", \"locationSpot\", function(v) {\n        return go.Spot.parse(v);\n      }).makeTwoWay(function(v) {\n        return go.Spot.stringify(v);\n      }),\n      new go.Binding(\"visible\", \"visible\").makeTwoWay(),\n      new go.Binding(\"deletable\", \"deletable\").makeTwoWay(),\n      new go.Binding(\"movable\", \"movable\").makeTwoWay(),\n      new go.Binding(\"rotatable\", \"rotatable\").makeTwoWay(),\n      new go.Binding(\"location\", \"loc\", go.Point.parse).makeTwoWay(\n        go.Point.stringify\n      ),\n      new go.Binding(\"isShadowed\", \"isShadowed\").makeTwoWay(),\n      new go.Binding(\"angle\", \"angle\").makeTwoWay(),\n      new go.Binding(\"selectable\", \"selectable\").makeTwoWay(),\n      new go.Binding(\"copyable\", \"copyable\").makeTwoWay(),\n      new go.Binding(\"layerName\", \"layerName\", function(v, d) {\n        return v ? v : \"\";\n      }),\n      $(\n        go.TextBlock,\n        {\n          name: \"TEXT\",\n          alignment: new go.Spot(0, 0),\n          font: \"18px 'Microsoft YaHei'\",\n          editable: false,\n          //   areaBackground:\"gray\",\n          //margin: 3, editable: true,\n          //   background:\"yellow\",\n          stroke: \"black\",\n          isMultiline: true,\n          // overflow: go.TextBlock.OverflowEllipsis,\n          wrap: go.TextBlock.WrapDesiredSize,\n          textAlign: \"start\",\n          verticalAlignment: go.Spot.Center,\n          spacingAbove: 1,\n          spacingBelow: 1,\n          portId: \"TEXT\",\n          margin: 5,\n          maxSize: new go.Size(300, NaN),\n          minSize: new go.Size(50, 10),\n          stretch: go.GraphObject.UniformToFill,\n          textEdited: function(textBlock, oldv, newv) {\n            // // if(textBlock.part.containingGroup.data.textAngle == \"horizontal\"){\n            //   var centerText = textBlock.part.diagram.model.findNodeDataForKey(textBlock.part.data.centerText)\n            //   if(centerText){\n            //     console.log(\"centerTextcenterTextcenterTextcenterText\")\n            var part = textBlock.part;\n            if (\n              newv.trim() == \"\" &&\n              (part.data.role == \"shiText\" || part.data.role == \"xuText\")\n            ) {\n              textBlock.part.diagram.model.startTransaction(\"text\");\n              textBlock.part.diagram.model.setDataProperty(\n                textBlock.part.data,\n                \"nloc\",\n                null\n              );\n              textBlock.part.diagram.model.commitTransaction(\"text\");\n            }\n            //   }\n            // //   return;\n            // // }\n            // setTimeout(function(){\n            //   console.log(\"textEditedtextEditedtextEdited\",textBlock.lineCount)\n            //   if(!textBlock.text) return;\n            //   if(textBlock.text && textBlock.text.trim() == \"\") return;\n            //   if(textBlock.lineCount %2 != 0){\n            //     if(newv[newv.length-1] == \"\\n\"){\n            //       textBlock.text = newv.substring(0, newv.length-1)\n            //       return;\n            //     }\n            //     textBlock.text = newv+\"\\n\"\n            //   }\n            // },100)\n\n            // var enterCount = 0;\n            if (\n              textBlock.part.data.role &&\n              textBlock.part.data.role.indexOf(\"labelText\") > -1\n            ) {\n              textBlock.part.containingGroup.layout.isValidLayout = false;\n            }\n            // for(var i=0;i<newv.length;i++){\n\n            // }\n            // textBlock.part.updateTargetBindings()\n\n            // if(textBlock.lineCount %2 != 0){\n            //   if(newv[newv.length-1] == \"\\n\"){\n            //     textBlock.text = newv.substring(0, newv.length-1)\n            //     return;\n            //   }\n            //   textBlock.text = newv+\"\\n\"\n            // }\n          }\n        },\n        new go.Binding(\"areaBackground\", \"isHighlighted\", function(h, shape) {\n          // node.areaBackground = \"RGB(107,208,137)\"\n          if (h) return \"RGBA(146,208,80,0.5)\";\n          return null;\n          var c = shape.part.data.color;\n          return c ? c : \"white\";\n        }).ofObject(), // binding source is Node.isHighlighted\n        new go.Binding(\"background\", \"background\", function(v) {\n          return v;\n        }).makeTwoWay(),\n        new go.Binding(\"areaBackground\", \"areaBackground\", function(v) {\n          return v;\n        }).makeTwoWay(),\n        new go.Binding(\"textAlign\", \"textAlign\", function(v) {\n          return v;\n        }).makeTwoWay(),\n        new go.Binding(\"spacingAbove\", \"spacingline\", function(v) {\n          return helpers.tdTransToNum(v, 4);\n        }).makeTwoWay(),\n        new go.Binding(\"spacingBelow\", \"spacingline\", function(v) {\n          return helpers.tdTransToNum(v, 4);\n        }).makeTwoWay(),\n        new go.Binding(\"maxSize\", \"\", function(data, d, m) {\n          // console.log(\"maxSize\",v,m,d)\n          var width = 1000;\n          var height = NaN;\n          if (data.width) {\n            width = parseInt(data.width);\n          }\n          if (data.height) {\n            height = parseInt(data.height);\n          }\n\n          return new go.Size(width, height);\n        }),\n        new go.Binding(\"minSize\", \"minSize\", function(v) {\n          // console.log(\"maxSize\",v,m,d)\n\n          return go.Size.parse(v);\n        }),\n        // new go.Binding(\"width\", \"width\", function(v) {\n        //     return v;\n        // }).makeTwoWay(),\n        // new go.Binding(\"height\", \"height\", function(v) {\n        //     return v;\n        // }).makeTwoWay(),\n        // new go.Binding(\"height\", \"height\", function (v) {\n        //   return v;\n        // }).ofObject(\"SHAPE\"),\n        new go.Binding(\"text\", \"text\").makeTwoWay(),\n        new go.Binding(\"stroke\", \"textStroke\").makeTwoWay(),\n        new go.Binding(\"font\", \"font\").makeTwoWay() \n      ),\n      $(\n        go.Panel,\n        \"Vertical\",\n        { alignment: go.Spot.Left, alignmentFocus: go.Spot.Right },\n        $(\n          go.Shape,\n          {\n            name: \"ICON\",\n            width: 16,\n            height: 16,\n            visible: false,\n            click: function(e) {\n              console.log(\"icon click\");\n            },\n            figure: \"Circle\",\n            fill: \"red\",\n            strokeWidth: 0,\n            margin: 3\n          },\n\n          new go.Binding(\"location\", \"loc\", go.Point.parse).makeTwoWay(\n            go.Point.stringify\n          ),\n          new go.Binding(\"figure\", \"figure\").makeTwoWay(),\n          new go.Binding(\"visible\", \"iconVisible\").makeTwoWay(),\n          new go.Binding(\"fill\", \"fill\", function(v, obj) {\n            return v;\n          }).makeTwoWay()\n        )\n      ),\n      $(\n        go.Shape,\n        \"Rectangle\",\n        {\n          name: \"textBorder\",\n          stroke: \"green\",\n          strokeWidth: 3,\n          strokeDashArray: [10, 5],\n          visible: false,\n          fill: \"transparent\",\n          alignment: go.Spot.Center,\n          // alignmentFocus: go.Spot.Right,\n          width: 100,\n          height: 270\n        },\n        new go.Binding(\"stroke\", \"textStroke\"),\n        new go.Binding(\"desiredSize\", \"\", function(v, d) {\n          // console.log(\"vvvvvvvvvvvvv,\",v,d)\n          if (!helpers.checkPhone()) {\n            // return new go.Size(Math.max(d.part.naturalBounds.width,100)-3, Math.max(d.part.naturalBounds.height,100)-3);\n            return new go.Size(\n              d.part.naturalBounds.width - 3,\n              d.part.naturalBounds.height - 3\n            );\n          }\n          var olive = d.part.diagram.findNodeForKey(d.part.data.olive);\n          return new go.Size(\n            olive.naturalBounds.width - 3,\n            olive.naturalBounds.height\n          );\n          // return new go.Size(d.part.actualBounds.width-3, d.part.actualBounds.height-3);\n        })\n      ),\n      $(\n        go.Shape,\n        \"Circle\",\n        {\n          name: \"place\",\n          stroke: \"red\",\n          strokeWidth: 1,\n          strokeDashArray: null,\n          visible: false,\n          fill: \"transparent\",\n          alignment: go.Spot.Center,\n          // alignmentFocus: go.Spot.Right,\n          width: 50,\n          height: 50\n        },\n        new go.Binding(\"stroke\", \"placeStroke\")\n      ),\n      $(\n        go.Shape,\n        {\n          geometryString:\n            \"M540.5696 556.81024a81.8176 81.8176 0 0 1-53.0432-19.47648l-225.4848-191.52896a81.92 81.92 0 1 1 106.0864-124.86656l172.4416 146.47296 172.4416-146.47296a81.92 81.92 0 0 1 106.0864 124.86656l-225.4848 191.52896a81.7152 81.7152 0 0 1-53.0432 19.47648z m53.06368 246.23104l225.44384-191.52896a81.92 81.92 0 1 0-106.0864-124.84608l-172.40064 146.47296-172.48256-146.47296a81.92 81.92 0 1 0-106.04544 124.86656l225.52576 191.52896a81.7152 81.7152 0 0 0 53.00224 19.47648c18.88256 0 37.76512-6.49216 53.0432-19.49696z\",\n          // \"M16 0c-8.837 0-16 7.163-16 16s7.163 16 16 16 16-7.163 16-16-7.163-16-16-16zM16 29c-7.18 0-13-5.82-13-13s5.82-13 13-13 13 5.82 13 13-5.82 13-13 13zM12 8c-1.105 0-2 0.895-2 2s0.895 2 2 2h5.172l-8.586 8.586c-0.781 0.781-0.781 2.047 0 2.829 0.39 0.39 0.902 0.586 1.414 0.586s1.024-0.195 1.414-0.586l8.586-8.586v5.172c0 1.105 0.895 2 2 2s2-0.895 2-2v-12h-12z\",\n          visible: false,\n          name: \"figure\",\n          cursor: \"pointer\",\n          alignment: new go.Spot(1, 0, 5, -5),\n          alignmentFocus: go.Spot.RightCenter,\n          width: 14,\n          height: 14,\n          fill: \"green\",\n          toolTip: $(\n            \"ToolTip\",\n            $(\n              go.Panel,\n              \"Vertical\",\n              $(\n                go.Picture,\n                new go.Binding(\"source\", \"src\", function(s) {\n                  return \"images/\" + s + \".png\";\n                })\n              ),\n              $(go.TextBlock, { text: \"进入子盘\", margin: 3 })\n            )\n          ),\n          click: function(e) {\n            console.log(\"click figure\", e);\n            var node = e.targetObject.part;\n            e.diagram.__trtd.openFigure({\n              figure: node.data.figure,\n              title: node.data.text,\n              key: node.data.key,\n              node: node\n            });\n          }\n        },\n        // new go.Binding(\"geometry\", \"geo\", function(){\n\n        // })),\n        new go.Binding(\"visible\", \"figure\", function(v) {\n          console.log(\"----------------------\");\n          if (v) {\n            return true;\n          } else {\n            return false;\n          }\n        })\n      )\n    );\n  }\n}\n\nmodule.exports = AutoTextTemplate;\n\n\n\n// WEBPACK FOOTER //\n// ./src/nodeTemplate/autoTextNodeTemplate.js","var $ = go.GraphObject.make;\r\nvar Base = require('./base')\r\nvar helpers = require('../helpers/helpers.gojs')\r\n// var labelGroupLayout = require(\"../layout/labelGroupLayout\")\r\n\r\nclass LabelGroupNodeTemplate extends Base {\r\n    constructor(options){\r\n        super(options)\r\n        // this.nodeProperties = {}\r\n        \r\n    }\r\n    \r\n    switchBorder(group,flag){\r\n      // group.diagram.startTransaction()\r\n      // group.findObject(\"groupBorder\").opacity = flag?1:0;\r\n      group.findObject(\"groupBorder\").opacity = flag?1:0;\r\n      // group.diagram.commitTransaction()\r\n    }\r\n\r\n    hiddenAllText(group){\r\n      // console.log(\"hiddenAllTexthiddenAllTexthiddenAllText\")\r\n      group.diagram.startTransaction()\r\n      var it = group.findSubGraphParts().iterator;\r\n      var oldStatus = null;\r\n      while (it.next()) {\r\n          var n = it.value;\r\n          if(oldStatus==null){\r\n            oldStatus = n.visible;\r\n          }\r\n          if(n.data.category == \"autoText\"){\r\n             group.diagram.model.setDataProperty(n.data,\"visible\", !oldStatus)\r\n          }\r\n      }\r\n      group.diagram.commitTransaction()\r\n    }\r\n\r\n    addLabelText(e, node){\r\n      \r\n      var data = {\"text\":\"说明：内容\",\r\n       \"deletable\":true, \r\n       \"fill\":\"black\", \r\n       \"iconVisible\":true, \r\n       \"locationSpot\":\"0 0 0 0\", \r\n       \"textAlign\":\"start\", \r\n       \"category\":\"autoText\", \r\n       \"loc\": `${node.location.x+30} ${node.location.y}`, \r\n       \"movable\":false, \"group\":node.data.key\r\n      }\r\n      this.diagram.startTransaction(\"addLabelText\")\r\n      this.diagram.model.addNodeData(data);\r\n      this.diagram.commitTransaction(\"addLabelText\")\r\n    }\r\n\r\n    getNodeTemplate(){\r\n      var that = this\r\n      return $(go.Group, \"Spot\",\r\n      { \r\n        __trtdNode: that,\r\n        // copyable: false,\r\n        // selectionObjectName: \"groupBorder\",\r\n        layerName: \"default\",\r\n        locationObjectName: \"groupBorder\",\r\n        zOrder: 5,\r\n        // margin:30,\r\n        // padding:30,\r\n        background:\"rgba(0,0,0,0)\",\r\n        rotatable: false,\r\n        minSize: new go.Size(200,100),\r\n        locationSpot: go.Spot.Center,\r\n        toolTip:  // define a tooltip for each node that displays the color as text\r\n        $(\"ToolTip\",\r\n          $(go.TextBlock, { margin: 4 },\r\n            new go.Binding(\"text\", \"\", function(data,p){\r\n              // console.log(\"tooltip:\",p,data)\r\n              return \"双击显示/隐藏\"\r\n            })\r\n          )\r\n        ),  // end of Adornment\r\n        // rotationSpot: go.Spot.LeftCenter,\r\n        // alignment: go.Spot.Left,\r\n        // alignmentFocus: go.Spot.Left,\r\n        // rotateObject:\"PH\",\r\n        click: (e, node)=>{\r\n          console.log(node.data)\r\n        },\r\n        selectable: true,\r\n        // selectionAdornmentTemplate: this.getNodeSelectionAdornmentTemplate(),\r\n        doubleClick: function (e, node){\r\n            // that.addLabelText(e, node)\r\n            that.hiddenAllText(node)\r\n            that.switchBorder(node, false)\r\n            // that.diagram.clearSelection();\r\n        },\r\n        // rotatable: true,\r\n        mouseOver: function(e, node) {\r\n          // console.log(\"211111\")\r\n          // if(node.data.hyperlink){\r\n          //   var textObj = node.findObject('TEXT');\r\n          //   textObj.isUnderline = true;\r\n          // }\r\n          // if(node.data.text == \"\"){\r\n            // if(group.findObject(\"groupBorder\").visible){\r\n              that.switchBorder(node, true)\r\n            // }\r\n            // node.background = \"rgba(125,125,125,0.01)\"\r\n          // }\r\n\r\n          if(!node.containingGroup) return;\r\n          var it = node.containingGroup.findSubGraphParts().iterator;\r\n          node.diagram.startTransaction()\r\n          while (it.next()) {\r\n              var n = it.value;\r\n              if(n.data.category == \"autoText\"){\r\n                  if(n.data.role && n.data.role.indexOf(\"labelText\")>-1){\r\n                      // locateNode = n;\r\n                      n.diagram.model.setDataProperty(n.data, \"minSize\", \"120 30\")\r\n                      // n.areaBackground = \"mediumslateblue\"\r\n                  }\r\n              }\r\n          }\r\n          node.diagram.commitTransaction()\r\n          // diagram.__trtd.showNodeRemarkTips(e, node);\r\n          },\r\n      mouseLeave: function(e, node) {\r\n        // if(node.data.text == \"\"){\r\n          // node.background = \"rgba(0,0,0,0)\"\r\n          that.switchBorder(node, false)\r\n        // }\r\n      },\r\n        // resizable: true,\r\n        // layoutConditions: go.Part.LayoutStandard,\r\n        layoutConditions: go.Part.LayoutStandard & go.Part.LayoutRemoved & go.Part.LayoutAdded & go.Part.LayoutNodeSized,\r\n        // layout: new waveGroupLayout()\r\n        layout: $(go.GridLayout,{\r\n          isInitial: false,\r\n          isOngoing: false,\r\n          spacing: new go.Size(0,0),\r\n          cellSize: go.Size.parse(300,150),\r\n          arrangement:go.GridLayout.LeftToRight,\r\n          wrappingColumn:1,\r\n          isRealtime: false,\r\n          alignment: go.GridLayout.Location,\r\n          // comparer:function(pa, pb) {\r\n          //   var da = pa.data;\r\n          //   var db = pb.data;\r\n          //   if (da.order < db.order) return -1;\r\n          //   if (da.order > db.order) return 1;\r\n          //   return 0;\r\n          // }\r\n        }) \r\n      },\r\n      new go.Binding(\"location\", \"loc\", go.Point.parse).makeTwoWay(go.Point.stringify),\r\n      new go.Binding(\"angle\", \"angle\").makeTwoWay(function(v,data){\r\n\r\n        return v;\r\n      }),\r\n      new go.Binding(\"isShadowed\", \"isShadowed\").makeTwoWay(),\r\n      new go.Binding(\"copyable\", \"copyable\").makeTwoWay(),\r\n      new go.Binding(\"movable\", \"movable\").makeTwoWay(),\r\n      new go.Binding(\"deletable\", \"deletable\").makeTwoWay(),\r\n\r\n      $(go.Placeholder,    // represents the area of all member parts,\r\n        { padding: 30,\r\n          alignment: go.Spot.Center,\r\n          // stroke: \"blue\",\r\n          // strokeWidth: 2,\r\n          name:\"placeholder\",\r\n        }\r\n      ),  // with some extra padding around them\r\n        // $(go.Shape,  // using a Shape instead of a Placeholder\r\n        //   { name: \"PH\",\r\n        //   figure:\"Rectangle\",\r\n        //   // rotationSpot: go.Spot.LeftCenter,\r\n        //   // spot1: new go.Spot(0.01, 0.01),\r\n        //   // spot2: new go.Spot(0.99, 0.99),\r\n        //   // areaBackground: \"red\",\r\n        //     // width: 600,\r\n        //     // height:300,\r\n        //     stroke:\"blue\" ,\r\n        //     strokeWidth: 2,\r\n        //     fill: \"rgba(0,0,0,0)\" \r\n        //   },\r\n        // ),\r\n\r\n        // new go.Binding(\"width\", \"width\").ofObject(\"\")\r\n        $(go.Shape,\"Rectangle\",{\r\n          name: \"groupBorder\",\r\n          stroke: \"green\",\r\n          strokeWidth: 3,\r\n          strokeDashArray: [10, 5],\r\n          visible:true,\r\n          opacity: 0,\r\n          // margin:30,\r\n          fill:null,\r\n          alignment: go.Spot.Center,\r\n          alignmentFocus: go.Spot.Center,\r\n          // width:200,\r\n          // height:150, \r\n      },\r\n      // new go.Binding(\"width\",\"width\").ofObject(\"placeholder\"),\r\n      // new go.Binding(\"height\",\"height\").ofObject(\"placeholder\"),\r\n      new go.Binding(\"desiredSize\",\"\", function(v,d){\r\n          // console.log(\"vvvvvvvvvvvvv,\",v,d)\r\n          // if(d.part.placeholder.measuredBounds.width < 200){\r\n          //   return new go.Size(200,200)\r\n          // }\r\n          // var width = Math.max(d.part.placeholder.measuredBounds.width, 200)\r\n          // var height = Math.max(d.part.placeholder.measuredBounds.height, 200)\r\n          return new go.Size(d.part.measuredBounds.width-3, d.part.measuredBounds.height-3);\r\n          // return d.part.placeholder.actualBounds;\r\n      }).ofObject(\"\")\r\n    )\r\n\r\n        // $(go.TextBlock,  // group title\r\n        //   { font: \"Bold 12pt Sans-Serif\" },\r\n        //   new go.Binding(\"text\", \"key\")\r\n        // )\r\n      )\r\n    }\r\n}\r\n\r\nmodule.exports = LabelGroupNodeTemplate\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/nodeTemplate/labelGroupNodeTemplate.js","\r\n\r\nvar $ = go.GraphObject.make;\r\nvar Base = require('./base')\r\nvar helpers = require('../helpers/helpers.gojs')\r\n  \r\n\r\nclass PicNodeTemplate extends Base {\r\n    constructor(options){\r\n        super(options)\r\n        // this.nodeProperties = {}\r\n        \r\n    }\r\n\r\n  \r\n\r\n    getNodeSelectionAdornmentTemplate(){\r\n      return  $(go.Adornment, \"Spot\",\r\n                $(go.Panel, \"Auto\",\r\n                    $(go.Shape, { fill: null, stroke: \"dodgerblue\", strokeWidth: 1 }),\r\n                    $(go.Placeholder) // this represents the selected Node\r\n\r\n                ),\r\n                //$(\"TreeExpanderButton\",\r\n                $(go.Panel, \"Vertical\", {\r\n                        name: \"ButtonIcon1\",\r\n                        alignment: new go.Spot(0, 1, -20, 20),\r\n                        alignmentFocus: go.Spot.Center,\r\n                        width: 60,\r\n                        height: 60,\r\n                        isActionable: true,\r\n                        // click: interactions.expandCollapse // this function is defined below\r\n                    },\r\n\r\n                    $(go.Shape, \"Circle\", {\r\n                        fill: \"rgba(1,1,1,0)\",\r\n                        strokeWidth: 0,\r\n                        stroke: \"green\",\r\n                        width: 50,\r\n                        height: 50\r\n                    })\r\n\r\n                )\r\n            ); // end Adornment;\r\n    }\r\n\r\n    nodeResizeAdornmentTemplate () {\r\n      return $(go.Adornment, \"Spot\",\r\n          $(go.Placeholder), // takes size and position of adorned object\r\n          $(go.Shape, \"Circle\", // left resize handle\r\n              {\r\n                  alignment: go.Spot.TopLeft,\r\n                  alignmentFocus: go.Spot.BottomRight,\r\n                  cursor: \"col-resize\",\r\n                  desiredSize: new go.Size(30, 30),\r\n                  fill: \"lightblue\",\r\n                  stroke: \"dodgerblue\"\r\n              }),\r\n          $(go.Shape, \"Circle\", // right resize handle\r\n              {\r\n                  alignment: go.Spot.BottomRight,\r\n                  alignmentFocus: go.Spot.TopLeft,\r\n                  cursor: \"col-resize\",\r\n                  desiredSize: new go.Size(30, 30),\r\n                  fill: \"lightblue\",\r\n                  stroke: \"dodgerblue\"\r\n              })\r\n      )\r\n  }\r\n\r\n    getNodeTemplate(){\r\n      var diagram = this.diagram\r\n      var that = this;\r\n      return $(go.Node, \"Spot\", {\r\n        name: \"NODE\",\r\n        \"_controlExpand\": true,\r\n        layerName: \"Background\",\r\n        locationSpot: go.Spot.BottomLeft,\r\n        resizeCellSize: new go.Size(10, 10),\r\n        locationObjectName: \"SHAPE\",\r\n        resizable: true,\r\n        resizeObjectName: \"SHAPE\", // user can resize the Shape\r\n        rotatable: true,\r\n        rotateObjectName: \"SHAPE\", // rotate the Shape without rotating the label\r\n        doubleClick: function (e, node) {\r\n            // interactions.selectText(e, node)\r\n            console.log(node.data)\r\n            if(node.diagram.__trtd.nodeDoubleClickListener){\r\n                node.diagram.__trtd.nodeDoubleClickListener(node)\r\n            }\r\n            \r\n        },\r\n        click: function(e, node) {\r\n            console.log(node.data)\r\n            if(node.diagram.__trtd.nodeClickListener){\r\n                node.diagram.__trtd.nodeClickListener(node)\r\n            }\r\n            // showNodeToolBar(e,node);\r\n        },\r\n        selectable: true,\r\n        movable: true,\r\n        angle: 0,\r\n        //toMaxLinks: 1,\r\n        layoutConditions: go.Part.LayoutStandard,\r\n        //layoutConditions:~go.Part.LayoutAdded,\r\n        // fromLinkable: true, toLinkable: true,\r\n        alignment: go.Spot.Center,\r\n        alignmentFocus: go.Spot.Center,\r\n        resizeAdornmentTemplate: that.nodeResizeAdornmentTemplate(),\r\n        //rotateAdornmentTemplate: nodeRotateAdornmentTemplate,\r\n        contextMenu: diagram.__trtd.nodeContextMenu,\r\n        selectionAdornmentTemplate: that.getNodeSelectionAdornmentTemplate(),\r\n        contextMenu: $(go.Adornment),\r\n      },\r\n        new go.Binding(\"location\", \"loc\", go.Point.parse).makeTwoWay(go.Point.stringify),\r\n        new go.Binding(\"isShadowed\", \"isShadowed\").makeTwoWay(),\r\n        new go.Binding(\"selectable\", \"selectable\").makeTwoWay(),\r\n        new go.Binding(\"movable\", \"movable\").makeTwoWay(),\r\n        new go.Binding(\"resizable\", \"resizable\").makeTwoWay(),\r\n        new go.Binding(\"deletable\", \"deletable\").makeTwoWay(),\r\n        new go.Binding(\"layerName\", \"layerName\", function(v, d) {\r\n            return v ? v : \"\";\r\n        }).makeTwoWay(function(v) {\r\n            return v;\r\n        }),\r\n        // $(go.TextBlock, // the text label\r\n        //     new go.Binding(\"text\", \"text\")),\r\n        $(go.Picture, // the icon showing the logo\r\n            // You should set the desiredSize (or width and height)\r\n            // whenever you know what size the Picture should be.\r\n   \r\n            { name: \"SHAPE\" ,\r\n            width: 400,\r\n            height:400,\r\n        }, {\r\n                successFunction: function(pict, evt) {\r\n                    if ((!pict.width || !pict.height) && (!pict.part.data.width || !pict.part.data.height)) {\r\n                        pict.width = pict.element.width;\r\n                        pict.height = pict.element.height;\r\n                    }\r\n                }\r\n            }, {\r\n                sourceCrossOrigin: function(pict) {\r\n                    return \"\";\r\n                }\r\n            },\r\n            new go.Binding(\"source\", \"picture\", function(v){\r\n                    \r\n                return v+\"?\"+Date.now()\r\n\r\n            }).makeTwoWay(function(v){\r\n                if(v){\r\n                    v = v.replace(/\\?.*$/g,\"\")\r\n                    return v\r\n                }else{\r\n                    return \"\"\r\n                }\r\n            }),\r\n            new go.Binding(\"width\", \"width\", function(v, d) {\r\n                return v;\r\n            }).makeTwoWay(function(v) {\r\n                return v;\r\n            }),\r\n            new go.Binding(\"height\", \"height\", function(v, d) {\r\n                return v;\r\n            }).makeTwoWay(function(v) {\r\n                return v;\r\n            }),\r\n            new go.Binding(\"angle\", \"angle\").makeTwoWay(),\r\n            new go.Binding(\"opacity\", \"opacity\", function(v, d) {\r\n                return v ? parseFloat(v) : 1;\r\n            }).makeTwoWay(function(v) {\r\n                return v;\r\n            })\r\n        )\r\n      )\r\n    }\r\n}\r\n\r\nmodule.exports = PicNodeTemplate\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/nodeTemplate/picNodeTemplate.js","var $ = go.GraphObject.make;\r\nvar Base = require(\"./base\");\r\nvar helpers = require(\"../helpers/helpers.gojs\");\r\n\r\nclass PicGroupNodeTemplate extends Base {\r\n  constructor(options) {\r\n    super(options);\r\n    // this.nodeProperties = {}\r\n    var offsetBig = {\r\n      cbianText1: \"490.19843547330686 -207.92899577343746\",\r\n      cbianText2: \"179.32782881269065 -477.3356656420584\",\r\n      cbianText3: \"373.5304832720494 -373.95951083813827\",\r\n      axisXText: \"530 8\",\r\n      axisYText: \"-15 -517\"\r\n    };\r\n    var offsetSmall = {\r\n      cbianText1: \"131.233937586588 -72\",\r\n      cbianText2: \"46.592920782221995 -128.5569669100272\",\r\n      cbianText3: \"99.53048327204942 -103.06601717798208\",\r\n      axisXText: \"147 3\",\r\n      axisYText: \"-3 -147\"\r\n    };\r\n    this.cbianThemes = [\r\n      {\r\n        name: \"cbian1\",\r\n        type: \"small\",\r\n        textStrokes: [\"#0e399d\", \"#cb1c27\", \"#FFC000\"],\r\n        picture: \"https://static.365trtd.com/system/cbian/cbian.png\",\r\n        offsets: offsetSmall,\r\n        size: [150, 150],\r\n        pictureBig: \"https://static.365trtd.com/system/cbian/cbian1_big.png\",\r\n        offsetsBig: offsetBig,\r\n        sizeBig: [500, 500]\r\n      },\r\n      {\r\n        name: \"cbian_red\",\r\n        type: \"small\",\r\n        textStrokes: [\"red\", \"red\", \"red\"],\r\n        picture: \"https://static.365trtd.com/system/cbian/cbian_red.png\",\r\n        offsets: offsetSmall,\r\n        size: [150, 150],\r\n        pictureBig: \"https://static.365trtd.com/system/cbian/cbian_big_red.png\",\r\n        offsetsBig: offsetBig,\r\n        sizeBig: [500, 500]\r\n      },\r\n      {\r\n        name: \"cbian_blue\",\r\n        type: \"small\",\r\n        textStrokes: [\"blue\", \"blue\", \"blue\"],\r\n        picture: \"https://static.365trtd.com/system/cbian/cbian_blue.png\",\r\n        offsets: offsetSmall,\r\n        size: [150, 150],\r\n        pictureBig:\r\n          \"https://static.365trtd.com/system/cbian/cbian_big_blue.png\",\r\n        offsetsBig: offsetBig,\r\n        sizeBig: [500, 500]\r\n      },\r\n      {\r\n        name: \"cbian_green\",\r\n        type: \"small\",\r\n        textStrokes: [\"green\", \"green\", \"green\"],\r\n        picture: \"https://static.365trtd.com/system/cbian/cbian_green.png\",\r\n        offsets: offsetSmall,\r\n        size: [150, 150],\r\n        pictureBig:\r\n          \"https://static.365trtd.com/system/cbian/cbian_big_green.png\",\r\n        offsetsBig: offsetBig,\r\n        sizeBig: [500, 500]\r\n      }\r\n      // {\r\n      //   name: \"cbian1_big\",\r\n      //   type: \"big\",\r\n      //   textStrokes: [\"#0e399d\", \"#cb1c27\", \"#FFC000\"],\r\n      //   picture: \"https://static.365trtd.com/system/cbian/cbian1_big.png\",\r\n      //   offsets: offsetBig,\r\n      //   size:[500,500]\r\n      // }\r\n    ];\r\n  }\r\n\r\n  changeCbianSize(node, cbianType) {\r\n    if (!node) return;\r\n    if (!cbianType) return;\r\n    var cbianThemes = this.cbianThemes;\r\n    var cbianName = node.data.cbianName || \"cbian1\";\r\n    // var smallThemes = cbianThemes.filter((o)=>o.type == \"small\")\r\n    // var bigThemes = cbianThemes.filter((o)=>o.type == \"big\")\r\n    // var cbianName = node.data.cbianName || \"cbian1\";\r\n    var index = null,\r\n      theme = null;\r\n    for (var i = 0, len = cbianThemes.length; i < len; i++) {\r\n      if (cbianThemes[i].name == cbianName) {\r\n        index = i;\r\n        theme = cbianThemes[i];\r\n        break;\r\n      }\r\n    }\r\n    // var curTheme = cbianThemes[index];\r\n    // if(curTheme.type == \"small\"){\r\n\r\n    // }\r\n    if (index == null) {\r\n      return;\r\n    }\r\n    // var nextIndex = (index + 1) % cbianThemes.length;\r\n    var baseNode, cbianText1, cbianText2, cbianText3, axisXText, axisYText, pic;\r\n    if (theme) {\r\n      // var theme = cbianThemes[nextIndex];\r\n      var it = node.findSubGraphParts().iterator;\r\n      while (it.next()) {\r\n        var n = it.value;\r\n        if (n.data.role == \"theme\") {\r\n          baseNode = n;\r\n        }\r\n        if (n.data.role == \"cbianText1\") {\r\n          cbianText1 = n;\r\n        }\r\n        if (n.data.role == \"cbianText2\") {\r\n          cbianText2 = n;\r\n        }\r\n        if (n.data.role == \"cbianText3\") {\r\n          cbianText3 = n;\r\n        }\r\n        if (n.data.role == \"axisXText\") {\r\n          axisXText = n;\r\n        }\r\n        if (n.data.role == \"axisYText\") {\r\n          axisYText = n;\r\n        }\r\n        if (n.data.category == \"pic\") {\r\n          pic = n;\r\n        }\r\n      }\r\n    }\r\n    var diagram = node.diagram;\r\n    if (!baseNode) {\r\n      return;\r\n    }\r\n    var propertyPicture = \"picture\";\r\n    var propertySize = \"size\";\r\n    var propertyoffset = \"offsets\";\r\n    // var propertyPicture = \"picture\"\r\n    if (cbianType == \"big\") {\r\n      propertyPicture = \"pictureBig\";\r\n      propertySize = \"sizeBig\";\r\n      propertyoffset = \"offsetsBig\";\r\n    }\r\n    diagram.model.startTransaction();\r\n\r\n    diagram.model.setDataProperty(pic.data, \"picture\", theme[propertyPicture]);\r\n    diagram.model.setDataProperty(pic.data, \"width\", theme[propertySize][0]);\r\n    diagram.model.setDataProperty(pic.data, \"height\", theme[propertySize][1]);\r\n    diagram.model.setDataProperty(node.data, \"cbianType\", cbianType);\r\n    diagram.model.setDataProperty(node.data, \"cbianName\", cbianName);\r\n    window.localStorage.setItem(\"cbianName\", JSON.stringify(theme));\r\n\r\n    var nodeNameList = [\r\n      \"cbianText1\",\r\n      \"cbianText2\",\r\n      \"cbianText3\",\r\n      \"axisXText\",\r\n      \"axisYText\"\r\n    ];\r\n    for (var i = 0; i < nodeNameList.length; i++) {\r\n      var nodeName = nodeNameList[i];\r\n      var tmpPoint, tmpNode;\r\n      tmpNode = eval(nodeName);\r\n      tmpPoint = theme[propertyoffset][nodeName];\r\n      if (cbianText1 && tmpPoint) {\r\n        tmpPoint = go.Point.parse(tmpPoint);\r\n        diagram.model.setDataProperty(\r\n          tmpNode.data,\r\n          \"loc\",\r\n          go.Point.stringify(\r\n            baseNode.location.copy().offset(tmpPoint.x, tmpPoint.y)\r\n          )\r\n        );\r\n      }\r\n    }\r\n    diagram.model.commitTransaction();\r\n  }\r\n\r\n  changeCbianName(node, cbianName) {\r\n    if (!node) return;\r\n    if (!cbianName) return;\r\n    var cbianThemes = this.cbianThemes;\r\n\r\n    // var smallThemes = cbianThemes.filter((o)=>o.type == \"small\")\r\n    // var bigThemes = cbianThemes.filter((o)=>o.type == \"big\")\r\n    // var cbianName = node.data.cbianName || \"cbian1\";\r\n    var index = null,\r\n      theme = null;\r\n    for (var i = 0, len = cbianThemes.length; i < len; i++) {\r\n      if (cbianThemes[i].name == cbianName) {\r\n        index = i;\r\n        theme = cbianThemes[i];\r\n        break;\r\n      }\r\n    }\r\n    // var curTheme = cbianThemes[index];\r\n    // if(curTheme.type == \"small\"){\r\n\r\n    // }\r\n    if (index == null) {\r\n      return;\r\n    }\r\n    // var nextIndex = (index + 1) % cbianThemes.length;\r\n    var baseNode, cbianText1, cbianText2, cbianText3, axisXText, axisYText, pic;\r\n    if (theme) {\r\n      // var theme = cbianThemes[nextIndex];\r\n      var it = node.findSubGraphParts().iterator;\r\n      while (it.next()) {\r\n        var n = it.value;\r\n        if (n.data.role == \"theme\") {\r\n          baseNode = n;\r\n        }\r\n        if (n.data.role == \"cbianText1\") {\r\n          cbianText1 = n;\r\n        }\r\n        if (n.data.role == \"cbianText2\") {\r\n          cbianText2 = n;\r\n        }\r\n        if (n.data.role == \"cbianText3\") {\r\n          cbianText3 = n;\r\n        }\r\n        if (n.data.role == \"axisXText\") {\r\n          axisXText = n;\r\n        }\r\n        if (n.data.role == \"axisYText\") {\r\n          axisYText = n;\r\n        }\r\n        if (n.data.category == \"pic\") {\r\n          pic = n;\r\n        }\r\n      }\r\n    }\r\n    var diagram = node.diagram;\r\n    if (!baseNode) {\r\n      return;\r\n    }\r\n    var propertyPicture = \"picture\";\r\n    if (node.data.cbianType == \"big\") {\r\n      propertyPicture = \"pictureBig\";\r\n    }\r\n    diagram.model.startTransaction();\r\n\r\n    diagram.model.setDataProperty(pic.data, \"picture\", theme[propertyPicture]);\r\n    diagram.model.setDataProperty(node.data, \"cbianName\", cbianName);\r\n    window.localStorage.setItem(\"cbianName\", JSON.stringify(theme));\r\n    // window.localStorage.setItem(\"cbianType\",theme.type)\r\n    // console.log(\"cbian theme\")\r\n    if (cbianText1) {\r\n      diagram.model.setDataProperty(\r\n        cbianText1.data,\r\n        \"textStroke\",\r\n        theme.textStrokes[0]\r\n      );\r\n    }\r\n    if (cbianText2) {\r\n      diagram.model.setDataProperty(\r\n        cbianText2.data,\r\n        \"textStroke\",\r\n        theme.textStrokes[1]\r\n      );\r\n    }\r\n    if (cbianText3) {\r\n      diagram.model.setDataProperty(\r\n        cbianText3.data,\r\n        \"textStroke\",\r\n        theme.textStrokes[2]\r\n      );\r\n    }\r\n    diagram.model.commitTransaction();\r\n  }\r\n\r\n  getNodeSelectionAdornmentTemplate() {\r\n    return $(\r\n      go.Adornment,\r\n      \"Spot\",\r\n      $(\r\n        go.Panel,\r\n        \"Auto\",\r\n        $(go.Shape, { fill: null, stroke: \"dodgerblue\", strokeWidth: 1 }),\r\n        $(go.Placeholder) // this represents the selected Node\r\n      ),\r\n      //$(\"TreeExpanderButton\",\r\n      $(\r\n        go.Panel,\r\n        \"Vertical\",\r\n        {\r\n          name: \"ButtonIcon1\",\r\n          alignment: new go.Spot(0, 1, -20, 20),\r\n          alignmentFocus: go.Spot.Center,\r\n          width: 60,\r\n          height: 60,\r\n          isActionable: true\r\n          // click: interactions.expandCollapse // this function is defined below\r\n        },\r\n\r\n        $(go.Shape, \"Circle\", {\r\n          fill: \"rgba(1,1,1,0)\",\r\n          strokeWidth: 0,\r\n          stroke: \"green\",\r\n          width: 50,\r\n          height: 50\r\n        })\r\n      )\r\n    ); // end Adornment;\r\n  }\r\n\r\n  nodeResizeAdornmentTemplate() {\r\n    return $(\r\n      go.Adornment,\r\n      \"Spot\",\r\n      $(go.Placeholder), // takes size and position of adorned object\r\n      $(\r\n        go.Shape,\r\n        \"Circle\", // left resize handle\r\n        {\r\n          alignment: go.Spot.TopLeft,\r\n          alignmentFocus: go.Spot.BottomRight,\r\n          cursor: \"col-resize\",\r\n          desiredSize: new go.Size(30, 30),\r\n          fill: \"lightblue\",\r\n          stroke: \"dodgerblue\"\r\n        }\r\n      ),\r\n      $(\r\n        go.Shape,\r\n        \"Circle\", // right resize handle\r\n        {\r\n          alignment: go.Spot.BottomRight,\r\n          alignmentFocus: go.Spot.TopLeft,\r\n          cursor: \"col-resize\",\r\n          desiredSize: new go.Size(30, 30),\r\n          fill: \"lightblue\",\r\n          stroke: \"dodgerblue\"\r\n        }\r\n      )\r\n    );\r\n  }\r\n\r\n  addFreeText(e, node) {\r\n    console.log(\"eeeeeeeeeee\", e);\r\n    this.changeCbianThemeColor(e, node);\r\n    return;\r\n    var data = {\r\n      text: \"总结文本\",\r\n      deletable: true,\r\n      fill: \"black\",\r\n      iconVisible: false,\r\n      locationSpot: \"0 0.5 0 0\",\r\n      textAlign: \"left\",\r\n      category: \"autoText\",\r\n      loc: go.Point.stringify(e.documentPoint),\r\n      movable: true,\r\n      group: node.data.key\r\n    };\r\n    this.diagram.startTransaction(\"addFreeText\");\r\n    this.diagram.model.addNodeData(data);\r\n    this.diagram.commitTransaction(\"addFreeText\");\r\n  }\r\n\r\n  getNodeTemplate() {\r\n    var diagram = this.diagram;\r\n    var that = this;\r\n    return $(\r\n      go.Group,\r\n      \"Auto\",\r\n      {\r\n        __trtdNode: that,\r\n        // selectionObjectName: \"groupBorder\",\r\n        layerName: \"default\",\r\n        locationObjectName: \"placeholder\",\r\n        zOrder: 5,\r\n        // margin:30,\r\n        // padding:30,\r\n        background: \"rgba(0,0,0,0)\",\r\n        rotatable: false,\r\n        // minSize: new go.Size(200,100),\r\n        locationSpot: go.Spot.BottomLeft,\r\n        click: (e, node) => {\r\n          console.log(node.data);\r\n        },\r\n        layout: $(go.Layout),\r\n        doubleClick: function(e, node) {\r\n          // that.addLabelText(e, node)\r\n          var index = 0;\r\n          for (var i = 0; i < that.cbianThemes.length; i++) {\r\n            if (that.cbianThemes[i].name == node.data.cbianName) {\r\n              index = i;\r\n              break;\r\n            }\r\n          }\r\n          var nextIndex = (index + 1) % that.cbianThemes.length;\r\n          that.changeCbianName(node, that.cbianThemes[nextIndex].name);\r\n          // that.addFreeText(e, node);\r\n        },\r\n        contextMenu: $(go.Adornment),\r\n        layoutConditions:\r\n          go.Part.LayoutStandard &\r\n          go.Part.LayoutRemoved &\r\n          go.Part.LayoutAdded &\r\n          go.Part.LayoutNodeSized\r\n      },\r\n      new go.Binding(\"location\", \"loc\", function(v) {\r\n        // console.log(\"go.Point.parsego.Point.parsego.Point.parse\")\r\n        return go.Point.parse(v);\r\n      }).makeTwoWay(go.Point.stringify),\r\n      new go.Binding(\"angle\", \"angle\").makeTwoWay(function(v, data) {\r\n        return v;\r\n      }),\r\n      new go.Binding(\"isShadowed\", \"isShadowed\").makeTwoWay(),\r\n      new go.Binding(\"selectable\", \"selectable\").makeTwoWay(),\r\n      new go.Binding(\"movable\", \"movable\").makeTwoWay(),\r\n      new go.Binding(\"deletable\", \"deletable\").makeTwoWay(),\r\n      new go.Binding(\"layerName\", \"layerName\").makeTwoWay(),\r\n\r\n      $(\r\n        go.Placeholder, // represents the area of all member parts,\r\n        { padding: 30, alignment: go.Spot.Center, name: \"placeholder\" }\r\n      ) // with some extra padding around them\r\n    );\r\n  }\r\n}\r\n\r\nmodule.exports = PicGroupNodeTemplate;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/nodeTemplate/picGroupNodeTemplate.js","var $ = go.GraphObject.make;\r\nvar Base = require('./base')\r\nvar helpers = require('../helpers/helpers.gojs')\r\nvar yunGroupLayout = require(\"../layout/yunGroupLayout\")\r\n\r\nclass YunNodeTemplate extends Base {\r\n    constructor(options){\r\n        super(options)\r\n        // this.nodeProperties = {}\r\n        this.defaultTextFont = \"20px 'Microsoft YaHei'\"\r\n        \r\n    }\r\n    \r\n\r\n    snapToGrid(data, node){\r\n\r\n      if(data.subRole == \"coreText\" || data.subRole == \"themeText\"){\r\n        return;\r\n      }\r\n      var p = go.Point.parse(data.loc)\r\n      if(node.__yunPointsX && node.__yunPointsY ){\r\n        if(p.x >= node.__yunPointsX[0] && p.x <= node.__yunPointsX[node.__yunPointsX.length-1] \r\n          && p.y >= node.__yunPointsY[node.__yunPointsY.length-1] && p.y <= node.__yunPointsY[0] ){\r\n            // 在画布格子范围内的位置才对齐网格\r\n            var minX=20000,minY=20000,tmp,orderX,orderY;\r\n            for(var i=0;i<node.__yunPointsX.length;i++){\r\n              tmp = Math.abs(p.x - node.__yunPointsX[i])\r\n              if(tmp< minX){\r\n                minX = tmp;\r\n                orderX = i+1;\r\n              }\r\n            }\r\n            for(var i=0;i<node.__yunPointsY.length;i++){\r\n              tmp = Math.abs(p.y - node.__yunPointsY[i])\r\n              if(tmp< minY){\r\n                minY = tmp;\r\n                orderY = i+1;\r\n              }\r\n            }\r\n\r\n            if(orderX!=null && orderY!=null){\r\n              // var x = node.__yunPointsX[orderX-1]\r\n              // var y = node.__yunPointsX[orderY-1]\r\n              // x = -1300\r\n              // y = -1300\r\n              // data.loc = \"-1688.105387366997 -121.19730986224602\"\r\n              data.orderX = orderX\r\n              data.orderY = orderY\r\n            }\r\n          }else{\r\n            delete data.orderX\r\n            delete data.orderY\r\n          }\r\n     }\r\n    }\r\n\r\n    addFreeText(e, node){\r\n      console.log(\"addFreeTextaddFreeText begin\",e)\r\n      var gridWidth = node.data.gridWidth\r\n      var p = e.documentPoint\r\n      var that = this;\r\n      var data = {\"text\":\"灵感\",\r\n      \"deletable\":true, \r\n      \"role\":\"freeText\",\r\n      \"fill\":\"black\", \r\n      \"iconVisible\":false, \r\n      \"locationSpot\":\"0.5 0.5 0 0\", \r\n      \"minSize\":`30 30`,\r\n      // \"width\":`${gridWidth-10}`,\r\n      font: that.defaultTextFont,\r\n      \"textAlign\":\"center\", \r\n      \"category\":\"autoText\", \r\n      \"loc\": go.Point.stringify(p), \r\n      \"movable\":true, \"group\":node.data.key\r\n     }\r\n    //  console.log()\r\n     \r\n\r\n      this.snapToGrid(data, node)\r\n     this.diagram.startTransaction(\"addFreeText\")\r\n     this.diagram.model.addNodeData(data);\r\n     this.diagram.commitTransaction(\"addFreeText\")\r\n     node.layout.isValidLayout = false\r\n     console.log(\"addFreeTextaddFreeText end\",e)\r\n    }\r\n\r\n    getNodeTemplate(){\r\n      var that = this\r\n      return $(go.Group, \"Auto\",\r\n      { selectionObjectName: \"PH\",\r\n      __trtdNode: that,\r\n      layerName: \"default\",\r\n      padding: 0,\r\n      margin: 0,\r\n      copyable: true,\r\n      zOrder: 15,\r\n        locationObjectName: \"PH\",\r\n        locationSpot: new go.Spot(0,1,0,-0),\r\n        // rotationSpot: go.Spot.LeftCenter,\r\n        rotatable: false,\r\n        alignment: go.Spot.Left,\r\n        alignmentFocus: go.Spot.Left,\r\n        // rotateObject:\"PH\",\r\n        click: (e, node)=>{\r\n          console.log(node.data)\r\n          var it = node.findSubGraphParts().iterator;\r\n          while (it.next()) {\r\n              var n = it.value;\r\n              if(n.data.category == \"autoText\"){\r\n                  n.findObject(\"textBorder\").visible = false;\r\n              }\r\n          }\r\n          node.layout.isValidLayout = false\r\n          return;\r\n          if(node.isSelected) return;\r\n          var it = node.findSubGraphParts().iterator;\r\n          var n;\r\n          while (it.next()) {\r\n              n = it.value;\r\n              if(n.data.role == \"labelGroup\"){\r\n                  n.__trtdNode.switchBorder(n, true)\r\n                  break;\r\n              }\r\n          }\r\n          if(n){\r\n            setTimeout(function(){\r\n              n.__trtdNode.switchBorder(n, false)\r\n            },3000)\r\n          }\r\n        },\r\n        doubleClick: function (e, node){\r\n          // that.addFreeText(e, node)\r\n        },\r\n        mouseOver: function(e, node) {\r\n          // if(node.data.hyperlink){\r\n          //   var textObj = node.findObject('TEXT');\r\n          //   textObj.isUnderline = true;\r\n          // }\r\n          // if(!node.containingGroup) return;\r\n          return;\r\n          // diagram.__trtd.showNodeRemarkTips(e, node);\r\n      },\r\n      contextMenu: $(go.Adornment),\r\n      mouseLeave: function(e, node) {\r\n        // if(!node.containingGroup) return;\r\n        var it = node.findSubGraphParts().iterator;\r\n        while (it.next()) {\r\n            var n = it.value;\r\n            if(n.data.role == \"labelGroup\"){\r\n                // n.__trtdNode.switchBorder(n, false)\r\n                break;\r\n            }\r\n        }\r\n        // if(n){\r\n        //   setTimeout(function(){\r\n        //     n.__trtdNode.switchBorder(n, false)\r\n        //   },3000)\r\n        // }\r\n      },\r\n        // rotatable: true,\r\n        // resizable: true,\r\n        // layoutConditions: go.Part.LayoutStandard,\r\n        layoutConditions: go.Part.LayoutStandard & go.Part.LayoutRemoved & go.Part.LayoutAdded & go.Part.LayoutNodeSized,\r\n        layout: new yunGroupLayout()\r\n        // layout: $(go.GridLayout,{\r\n        //   spacing: new go.Size(0,0),\r\n        //   cellSize: go.Size.parse(300,150),\r\n        //   arrangement:go.GridLayout.LeftToRight,\r\n        //   alignment: go.GridLayout.Location,\r\n        //   comparer:function(pa, pb) {\r\n        //     var da = pa.data;\r\n        //     var db = pb.data;\r\n        //     if (da.order < db.order) return -1;\r\n        //     if (da.order > db.order) return 1;\r\n        //     return 0;\r\n        //   }\r\n        // }) \r\n      },\r\n      new go.Binding(\"deletable\", \"deletable\").makeTwoWay(function(v,data){\r\n        return v;\r\n      }),\r\n      new go.Binding(\"copyable\", \"copyable\").makeTwoWay(),\r\n      new go.Binding(\"angle\", \"angle\").makeTwoWay(function(v,data){\r\n        return v;\r\n      }),\r\n      new go.Binding(\"zOrder\", \"zOrder\").makeTwoWay(function(v,data){\r\n        return v;\r\n      }),\r\n      new go.Binding(\"locationSpot\", \"\", function(data){\r\n        // console.log(\"data:\",data)\r\n        return new go.Spot(0,1,data.gridWidth,-data.gridHeight)\r\n      }),\r\n        \r\n        $(go.Shape,  // using a Shape instead of a Placeholder\r\n          { name: \"PH\",\r\n          figure:\"Rectangle\",\r\n          // rotationSpot: go.Spot.LeftCenter,\r\n          // spot1: new go.Spot(0.01, 0.01),\r\n          // spot2: new go.Spot(0.99, 0.99),\r\n            // width: 600,\r\n            // height:300,\r\n            stroke:\"yellow\" ,\r\n            strokeWidth:0,\r\n            fill: \"rgba(0,0,255,0.0)\" },\r\n          // new go.Binding(\"desiredSize\", \"desiredSize\", function(v,data){\r\n          //   return go.Size.parse(v)\r\n          //   console.log('1111111111111111111111')\r\n          //   // for(var i=0;i<)\r\n          //   var model = data.part.diagram.model;\r\n          //   var group = data.part.data;\r\n          //   var maxWidth = 0;\r\n          //   var maxHeight = 0;\r\n          //   for(var i = 0;i<model.nodeDataArray.length;i++){\r\n          //     if(group.key != model.nodeDataArray[i].group){\r\n          //       continue;\r\n          //     }\r\n          //     if(model.nodeDataArray[i].desiredSize){\r\n          //       console.log(model.nodeDataArray[i].desiredSize)\r\n          //       var size = go.Size.parse(model.nodeDataArray[i].desiredSize)\r\n          //       if(size.width > maxWidth){\r\n          //         maxWidth = size.width;\r\n          //       }\r\n          //       if(size.height > maxHeight){\r\n          //         maxHeight = size.height;\r\n          //       }\r\n          //     }\r\n          //   }\r\n          //   // var group = that.diagram.findNodeForKey(data.part.data.key)\r\n          //   // var git = group.memberParts;\r\n          //   // var maxWidth = 0;\r\n          //   // var maxHeight = 0;\r\n          //   // while (git.next()) {\r\n          //   //   var item = git.value;\r\n          //   //   console.log(\"item:\",item)\r\n          //   //   if(item.naturalBounds.width > maxWidth){\r\n          //   //     maxWidth = item.naturalBounds.width;\r\n          //   //   }\r\n          //   //   if(item.naturalBounds.height > maxHeight){\r\n          //   //     maxHeight = item.naturalBounds.height;\r\n          //   //   }\r\n          //   //   console.log(`maxHeight:${maxHeight},maxWidth:${maxWidth}`)\r\n      \r\n          //   // }           \r\n          //   return go.Size.parse(`${maxWidth+100} ${maxHeight}`)         \r\n          //   // group.diagram.model.setDataProperty(group.data, \"desiredSize\", `${maxWidth+100} ${maxHeight}`) \r\n          // }).makeTwoWay(go.Size.stringify)\r\n        ),\r\n        new go.Binding(\"location\", \"loc\", go.Point.parse).makeTwoWay(go.Point.stringify),\r\n        // $(go.Placeholder,    // represents the area of all member parts,\r\n        //   { padding: 0}\r\n        // ),  // with some extra padding around them\r\n\r\n        // $(go.TextBlock,  // group title\r\n        //   { font: \"Bold 12pt Sans-Serif\" },\r\n        //   new go.Binding(\"text\", \"key\")\r\n        // )\r\n      )\r\n    }\r\n}\r\n\r\nmodule.exports = YunNodeTemplate\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/nodeTemplate/yunGroupNodeTemplate.js","// define a custom grid layout that makes sure the length of each lane is the same\r\n// and that each lane is broad enough to hold its subgraph\r\nfunction YunGroupLayout() {\r\n  go.Layout.call(this);\r\n  // go.GridLayout.call(this);\r\n  // this.cellSize = new go.Size(1, 1);\r\n  // this.wrappingColumn = Infinity;\r\n  // this.wrappingWidth = Infinity;\r\n  // this.spacing = new go.Size(0, 0);\r\n  // this.alignment = go.GridLayout.Position;\r\n}\r\ngo.Diagram.inherit(YunGroupLayout, go.Layout);\r\n\r\nfunction computeNewRotateLoc(rotateCenter, currentLoc, angle) {\r\n  if (rotateCenter.equals(currentLoc)) return currentLoc;\r\n  // 计算选择中心点到（0,0）点的偏移\r\n  var offset = new go.Point(0, 0).subtract(rotateCenter.copy());\r\n  // 将原来的点偏移到相对0,0点的位置\r\n  var nodeOrigin = currentLoc.copy().offset(offset.x, offset.y);\r\n  var newNodeOrigin = nodeOrigin.rotate(angle);\r\n  var newNodeLoc = newNodeOrigin.copy().offset(-offset.x, -offset.y);\r\n  return newNodeLoc;\r\n  // console.log(\"newNodeLoc\", newNodeLoc)\r\n}\r\nYunGroupLayout.prototype.doLayout = function(coll) {\r\n  console.log(\"YunGroupLayout.doLayout\");\r\n  var diagram = this.diagram;\r\n  diagram.startTransaction(\"YunGroupLayout\");\r\n  // COLL might be a Diagram or a Group or some Iterable<Part>\r\n\r\n  var it = this.collectParts(coll).iterator;\r\n  var collection = [];\r\n  var dataCollection = [];\r\n  var group = this.group;\r\n  var gridWidth = group.data.gridWidth;\r\n  var gridHeight = group.data.gridHeight;\r\n  // group.location = new go.Point(0,0)\r\n  var maxWidth = 0;\r\n  var maxHeight = 0;\r\n  var centerLine,\r\n    axisX,\r\n    axisY,\r\n    axisXText,\r\n    axisYText,\r\n    themeText,\r\n    labelText1,\r\n    labelText2,\r\n    labelText3,\r\n    labelGroup,\r\n    waveGroup;\r\n  var shiTextColl = [];\r\n  var xuTextColl = [];\r\n  var verticalLines = [];\r\n  var horizontalLines = [];\r\n  var freelLines = [];\r\n  var allLines = [];\r\n  var freeTexts = [];\r\n  var shapeNodes = [];\r\n  var snapType = group.data.snapType || \"grid\";\r\n  var showShape = group.data.showShape; // 是否显示矩形\r\n  var beginSpark = group.data.beginSpark; // 是否开始火花\r\n  var shapeStrokes = group.data.shapeStrokes; // 是否开始火花\r\n  var oliveWidth;\r\n  var oliveHeight;\r\n  while (it.next()) {\r\n    var node = it.value;\r\n    // var item = git.value;\r\n    //   console.log(\"item:\",item)\r\n\r\n    dataCollection.push(node.data);\r\n    if (node.data.category == \"wave\") {\r\n      collection.push(node);\r\n    }\r\n    if (!(node instanceof go.Node)) {\r\n      continue;\r\n    }\r\n\r\n    if (node.data.role == \"background\") {\r\n      shapeNodes.push(node);\r\n    }\r\n    // 处理文本节点的位置和定位位置\r\n    // if(node.data.category == \"text\"){\r\n    if (node.data.role == \"axisYText\") {\r\n      axisYText = node;\r\n    }\r\n    if (node.data.role == \"axisXText\") {\r\n      axisXText = node;\r\n    }\r\n    if (node.data.role == \"themeText\") {\r\n      themeText = node;\r\n    }\r\n    if (node.data.role == \"shiText\") {\r\n      shiTextColl.push(node);\r\n    }\r\n    if (node.data.role == \"xuText\") {\r\n      xuTextColl.push(node);\r\n    }\r\n    // }\r\n    // 处理label文本节点的位置和定位位置\r\n    // if(node.data.category == \"iconText\"){\r\n    if (node.data.role == \"labelText1\") {\r\n      labelText1 = node;\r\n    }\r\n    if (node.data.role == \"labelText2\") {\r\n      labelText2 = node;\r\n    }\r\n    if (node.data.role == \"labelText3\") {\r\n      labelText3 = node;\r\n    }\r\n    if (node.data.role == \"labelGroup\") {\r\n      labelGroup = node;\r\n    }\r\n    // }\r\n\r\n    if (node.naturalBounds.width > maxWidth) {\r\n      maxWidth = node.naturalBounds.width;\r\n    }\r\n    if (node.naturalBounds.height > maxHeight) {\r\n      maxHeight = node.naturalBounds.height;\r\n    }\r\n\r\n    if (node.data.role == \"freeText\") {\r\n      freeTexts.push(node);\r\n    }\r\n    if (node.data.category == \"line\") {\r\n      allLines.push(node);\r\n      if (node.data.role == \"verticalLine\") {\r\n        verticalLines.push(node);\r\n      }\r\n      if (node.data.role == \"horizontalLine\") {\r\n        horizontalLines.push(node);\r\n      }\r\n      if (node.data.role == \"freelLine\") {\r\n        freelLines.push(node);\r\n      }\r\n    }\r\n    if (node.data.group == group.key) {\r\n      // position the node . . .\r\n      if (node.data.category == \"line\") {\r\n        if (node.data.role == \"axisX\") {\r\n          node.angle = 0;\r\n          axisX = node;\r\n          node.location = group.location.copy().offset(0, 0);\r\n        }\r\n        if (node.data.role == \"axisY\") {\r\n          axisY = node;\r\n          node.angle = 270;\r\n          node.location = group.location.copy().offset(0, 0);\r\n        }\r\n        // node.angle = 270\r\n      }\r\n      // if(node.data.category == \"waveGroup\"){\r\n      //     waveGroup = node;\r\n      //     // node.angle = group.angle\r\n      //     oliveWidth = node.data.oliveWidth\r\n      //     oliveHeight = node.data.oliveHeight\r\n      //     node.location = group.location.copy().offset(0,0)\r\n      //     // node.layout.isOngoing = true;\r\n      //     // node.layout.isValidLayout = false;\r\n      //     // collection.push(node)\r\n      // }\r\n    }\r\n  }\r\n  console.log(`maxHeight:${maxHeight},maxWidth:${maxWidth}`);\r\n\r\n  verticalLines.sort(function(a, b) {\r\n    return a.data.order - b.data.order;\r\n  });\r\n  horizontalLines.sort(function(a, b) {\r\n    return a.data.order - b.data.order;\r\n  });\r\n  freelLines.sort(function(a, b) {\r\n    return a.data.order - b.data.order;\r\n  });\r\n\r\n  if (snapType == \"between\") {\r\n    var x1 = verticalLines.length * gridWidth + gridWidth;\r\n    var x2 = horizontalLines.length * gridHeight + gridHeight;\r\n  } else {\r\n    var x1 = verticalLines.length * gridWidth;\r\n    var x2 = horizontalLines.length * gridHeight;\r\n  }\r\n\r\n  var allPointsX = [];\r\n  var allPointsY = [];\r\n  var centerOrderX = (horizontalLines.length + 1) / 2;\r\n  var centerOrderY = (verticalLines.length + 1) / 2;\r\n  allLines.forEach(function(obj, index) {\r\n    // obj.diagram.model.setDataProperty(obj.data, \"strokeWidth\",1)\r\n    // obj.diagram.model.setDataProperty(obj.data, \"stroke\",\"rgba(0,0,0,0.3)\")\r\n    if (obj.data.role == \"axisX\" || obj.data.role == \"axisY\") return;\r\n    // if(obj.data.subRole == \"dim\"){\r\n    //   obj.diagram.model.setDataProperty(obj.data, \"strokeDashArray\",\"[0, 0]\")\r\n    //   obj.diagram.model.setDataProperty(obj.data, \"strokeWidth\",3)\r\n    //   obj.diagram.model.setDataProperty(obj.data, \"stroke\",\"RGBA(164, 177, 198, 1)\")\r\n    // }else{\r\n    //   obj.diagram.model.setDataProperty(obj.data, \"strokeDashArray\",\"[15, 10]\")\r\n    //   obj.diagram.model.setDataProperty(obj.data, \"strokeWidth\",1)\r\n    //   obj.diagram.model.setDataProperty(obj.data, \"stroke\",\"rgba(0,0,0,0.3)\")\r\n    // }\r\n  });\r\n\r\n  verticalLines.forEach(function(obj, index) {\r\n    var newOrder = index + 1;\r\n    obj.diagram.model.setDataProperty(obj.data, \"order\", newOrder);\r\n    obj.location = group.location.copy().offset(gridWidth * newOrder, 0);\r\n    obj.angle = 270;\r\n    obj.diagram.model.setDataProperty(obj.data, \"desiredSize\", `${x2 + 20} 10`);\r\n    // obj.diagram.model.setDataProperty(obj.data, \"showArrow\",false)\r\n    // obj.diagram.model.setDataProperty(obj.data, \"selectable\",false)\r\n    if (snapType == \"between\") {\r\n      if (newOrder < centerOrderX) {\r\n        allPointsX.push(obj.location.x - gridWidth / 2);\r\n      }\r\n      if (newOrder == centerOrderX) {\r\n        allPointsX.push(obj.location.x);\r\n      }\r\n      if (newOrder > centerOrderX) {\r\n        allPointsX.push(obj.location.x + gridWidth / 2);\r\n      }\r\n    } else {\r\n      allPointsX.push(obj.location.x);\r\n    }\r\n\r\n    // obj.diagram.model.setDataProperty(obj.data, \"strokeWidth\",1)\r\n    // obj.diagram.model.setDataProperty(obj.data, \"stroke\",\"rgba(0,0,0,0.3)\")\r\n    // obj.diagram.model.setDataProperty(obj.data, \"strokeDashArray\",\"[10, 5]\")\r\n  });\r\n  horizontalLines.forEach(function(obj, index) {\r\n    var newOrder = index + 1;\r\n    obj.diagram.model.setDataProperty(obj.data, \"order\", newOrder);\r\n    obj.location = group.location.copy().offset(0, -gridHeight * newOrder);\r\n    obj.angle = 0;\r\n    obj.diagram.model.setDataProperty(obj.data, \"desiredSize\", `${x1 + 20} 10`);\r\n    // obj.diagram.model.setDataProperty(obj.data, \"showArrow\",false)\r\n    // obj.diagram.model.setDataProperty(obj.data, \"selectable\",false)\r\n    if (snapType == \"between\") {\r\n      if (newOrder < centerOrderY) {\r\n        allPointsY.push(obj.location.y + gridHeight / 2);\r\n      }\r\n      if (newOrder == centerOrderY) {\r\n        allPointsY.push(obj.location.y);\r\n      }\r\n      if (newOrder > centerOrderY) {\r\n        allPointsY.push(obj.location.y - gridHeight / 2);\r\n      }\r\n    } else {\r\n      allPointsY.push(obj.location.y);\r\n    }\r\n    // obj.diagram.model.setDataProperty(obj.data, \"strokeWidth\",1)\r\n    // obj.diagram.model.setDataProperty(obj.data, \"stroke\",\"rgba(0,0,0,0.3)\")\r\n    // obj.diagram.model.setDataProperty(obj.data, \"strokeDashArray\",\"[10, 5]\")\r\n  });\r\n  // allPointsX.unshift(allPointsX[0]-gridWidth)\r\n  // allPointsX.push(allPointsX[allPointsX.length-1]+gridWidth)\r\n  // allPointsY.unshift(allPointsY[0]-gridLength)\r\n  // allPointsY.push(allPointsY[allPointsY.length-1]+gridLength)\r\n  this.group.__yunPointsX = allPointsX;\r\n  this.group.__yunPointsY = allPointsY;\r\n  freelLines.forEach(function(obj, index) {\r\n    // var newOrder = index+1;\r\n    // obj.diagram.model.setDataProperty(obj.data,\"order\", newOrder)\r\n    // obj.location = new go.Point(allPointsX[9], allPointsY[9])\r\n    // obj.angle = 315;\r\n    // obj.diagram.model.setDataProperty(obj.data, \"desiredSize\",`${gridWidth*20-5} 10`)\r\n    // obj.diagram.model.setDataProperty(obj.data, \"showArrow\",false)\r\n    // obj.diagram.model.setDataProperty(obj.data, \"selectable\",true)\r\n    // obj.diagram.model.setDataProperty(obj.data, \"strokeWidth\",1)\r\n    // obj.diagram.model.setDataProperty(obj.data, \"zOrder\",10)\r\n    // obj.diagram.model.setDataProperty(obj.data, \"showArrow\",true)\r\n    // obj.diagram.model.setDataProperty(obj.data, \"showBeginArrow\",true)\r\n    // obj.diagram.model.setDataProperty(obj.data, \"showEndArrow\",true)\r\n    // obj.diagram.model.setDataProperty(obj.data, \"locationSpot\",`0.5 0.5 0 0`)\r\n    // obj.diagram.model.setDataProperty(obj.data, \"stroke\",\"rgba(0,0,0,0.3)\")\r\n    // obj.diagram.model.setDataProperty(obj.data, \"strokeDashArray\",\"[5, 5]\")\r\n    // obj.diagram.model.setDataProperty(obj.data, \"selectable\",false)\r\n  });\r\n\r\n  shapeNodes.forEach(function(obj, index) {\r\n    obj.diagram.model.setDataProperty(obj.data, \"visible\", true);\r\n    if (!showShape) {\r\n      obj.diagram.model.setDataProperty(obj.data, \"stroke\", \"rgba(255,0,0,0)\");\r\n    } else {\r\n      try {\r\n        obj.diagram.model.setDataProperty(\r\n          obj.data,\r\n          \"stroke\",\r\n          shapeStrokes[obj.data.gridWidth / 2 - 1]\r\n        );\r\n      } catch (e) {\r\n        console.log(e);\r\n      }\r\n    }\r\n    if (obj.data.desiredSize) {\r\n      return;\r\n    }\r\n    obj.data.orderX = centerOrderX;\r\n    obj.data.orderY = centerOrderY;\r\n    obj.location = new go.Point(\r\n      allPointsX[obj.data.orderX - 1],\r\n      allPointsY[obj.data.orderY - 1]\r\n    );\r\n    var shapeWidth = obj.data.gridWidth || 2;\r\n    if (snapType == \"between\") {\r\n      var desiredSize = new go.Size(\r\n        gridWidth * (shapeWidth - 1),\r\n        gridHeight * (shapeWidth - 1)\r\n      );\r\n      obj.diagram.model.setDataProperty(obj.data, \"strokeWidth\", gridWidth);\r\n    } else {\r\n      var desiredSize = new go.Size(\r\n        gridWidth * shapeWidth + 3,\r\n        gridHeight * shapeWidth + 3\r\n      );\r\n      obj.diagram.model.setDataProperty(obj.data, \"strokeWidth\", 3);\r\n    }\r\n    // obj.desiredSize = desiredSize;\r\n    obj.diagram.model.setDataProperty(\r\n      obj.data,\r\n      \"desiredSize\",\r\n      go.Size.stringify(desiredSize)\r\n    );\r\n    // obj.diagram.model.setDataProperty(obj.data, \"visible\",true)\r\n    obj.diagram.model.setDataProperty(obj.data, \"strokeDashArray\", \"[0,0]\");\r\n  });\r\n\r\n  // var dist = Math.max(gridHeight,gridWidth)\r\n  freeTexts.forEach(function(obj, index) {\r\n    // var newOrder = index+1;\r\n    // obj.diagram.model.setDataProperty(obj.data,\"order\", newOrder)\r\n    // obj.location = group.location.copy()\r\n    // obj.angle = 315;\r\n    // obj.diagram.model.setDataProperty(obj.data, \"desiredSize\",`${x1+20} 10`)\r\n    // obj.diagram.model.setDataProperty(obj.data, \"minSize\",`60 50`)\r\n    // obj.diagram.model.setDataProperty(obj.data, \"width\",`${gridWidth-10}`)\r\n    // obj.diagram.model.setDataProperty(obj.data, \"height\",`${gridHeight-10}`)\r\n    // obj.diagram.model.setDataProperty(obj.data, \"width\",`${gridWidth*3}`)\r\n    // delete obj.data.width\r\n    // obj.diagram.model.setDataProperty(obj.data, \"textAlign\",`center`)\r\n    // obj.diagram.model.setDataProperty(obj.data, \"locationSpot\",`0.5 0.5 0 0`)\r\n    // obj.diagram.model.setDataProperty(obj.data, \"strokeDashArray\",\"[10, 5]\")\r\n    // obj.diagram.model.setDataProperty(obj.data, \"font\", group.__trtdNode.defaultTextFont)\r\n\r\n    // if(node.__yunPointsY && node.__yunPointsX){\r\n    //       for(var i=0;i<allPointsX.length;i++){\r\n    //         if(obj)\r\n    //       }\r\n    //    }\r\n    // if(obj.data.text.indexOf(\"自由文本\") >-1){\r\n    //   console.log(\"ddd\",obj.data.text)\r\n    //   var order = obj.data.text.replace(\"自由文本\",\"\").split(\",\")\r\n    //   if(order.length == 2){\r\n    //     obj.data.orderX = order[0]\r\n    //     obj.data.orderY = order[1]\r\n    //     obj.location = new go.Point(allPointsX[obj.data.orderX-1], allPointsY[obj.data.orderY-1])\r\n    //   }\r\n    // }\r\n\r\n    // if(obj.data.text.length == 1){\r\n    //   if(obj.data.subRole == null){\r\n    //     obj.diagram.model.setDataProperty(obj.data, \"subRole\",\"coreText\")\r\n    //     obj.diagram.model.setDataProperty(obj.data, \"deletable\", false)\r\n    //   }\r\n    // }\r\n\r\n    // if(obj.data.text.indexOf(\"维度\") >-1){\r\n    //   console.log(\"ddd\",obj.data.text)\r\n    //   // var order = obj.data.text.replace(\"维度\",\"\").split(\",\")\r\n    //   obj.diagram.model.setDataProperty(obj.data, \"subRole\",\"dimText\")\r\n    //   // obj.diagram.model.setDataProperty(obj.data, \"dimKey\", null)\r\n    //   delete obj.data.dimKey\r\n    //   obj.diagram.model.setDataProperty(obj.data, \"deletable\", false)\r\n    //   // obj.diagram.model.setDataProperty(obj.data, \"width\", null)\r\n    //   // obj.diagram.model.setDataProperty(obj.data, \"height\", null)\r\n    // }\r\n    obj.areaBackground = null;\r\n    // obj.diagram.model.setDataProperty(obj.data, \"height\", null)\r\n    // obj.diagram.model.setDataProperty(obj.data, \"width\", null)\r\n    // obj.findObject(\"place\").visible = false;\r\n    // console.log(\"verticalLines.length+1)/2verticalLines.length+1)/2\",(verticalLines.length+1)/2)\r\n    if (group.data.autoSnapText) {\r\n      // 计算普通文字位置\r\n      if (obj.data.orderX && obj.data.orderY) {\r\n        obj.location = new go.Point(\r\n          allPointsX[obj.data.orderX - 1],\r\n          allPointsY[obj.data.orderY - 1]\r\n        );\r\n\r\n        obj.location = new go.Point(\r\n          allPointsX[obj.data.orderX - 1],\r\n          allPointsY[obj.data.orderY - 1]\r\n        );\r\n      }\r\n      // 计算维度文字位置\r\n      if (\r\n        obj.data.subRole == \"dimText\" &&\r\n        obj.data.dimX != null &&\r\n        obj.data.dimY != null\r\n      ) {\r\n        console.log(\"dimText\");\r\n        var dimXLoc, dimYLoc;\r\n        dimXLoc = allPointsX[obj.data.dimX - 1];\r\n        dimYLoc = allPointsY[obj.data.dimY - 1];\r\n        // if (obj.data.rho == null) {\r\n        //   // 计算极坐标角度\r\n        //   if (obj.data.dimX == 0 && obj.data.dimY == 19) {\r\n        //     // fireTexts.dimText1 = n;\r\n        //     obj.diagram.model.setDataProperty(obj.data, \"rho\", 1);\r\n        //   }\r\n        //   if (obj.data.dimX == 10 && obj.data.dimY == 19) {\r\n        //     obj.diagram.model.setDataProperty(obj.data, \"rho\", 2);\r\n        //   }\r\n        //   if (obj.data.dimX == 19 && obj.data.dimY == 19) {\r\n        //     obj.diagram.model.setDataProperty(obj.data, \"rho\", 3);\r\n        //   }\r\n        //   if (obj.data.dimX == 19 && obj.data.dimY == 10) {\r\n        //     obj.diagram.model.setDataProperty(obj.data, \"rho\", 4);\r\n        //   }\r\n        //   if (obj.data.dimX == 19 && obj.data.dimY == 19) {\r\n        //     obj.diagram.model.setDataProperty(obj.data, \"rho\", 5);\r\n        //   }\r\n        //   if (obj.data.dimX == 10 && obj.data.dimY == 0) {\r\n        //     obj.diagram.model.setDataProperty(obj.data, \"rho\", 6);\r\n        //   }\r\n        //   if (obj.data.dimX == 0 && obj.data.dimY == 0) {\r\n        //     obj.diagram.model.setDataProperty(obj.data, \"rho\", 7);\r\n        //   }\r\n        //   if (obj.data.dimX == 0 && obj.data.dimY == 10) {\r\n        //     obj.diagram.model.setDataProperty(obj.data, \"rho\", 8);\r\n        //   }\r\n        // }\r\n\r\n        if (obj.data.dimX >= allPointsX.length) {\r\n          dimXLoc = allPointsX[allPointsX.length - 1] + gridWidth;\r\n          // if(snapType != \"between\"){\r\n          //   dimXLoc += gridWidth/3\r\n          // }\r\n        }\r\n        if (obj.data.dimY >= allPointsY.length) {\r\n          dimYLoc = allPointsY[allPointsY.length - 1] - gridHeight;\r\n          // if(snapType != \"between\"){\r\n          //   dimYLoc -= gridHeight/3\r\n          // }\r\n        }\r\n        if (obj.data.dimX <= 0) {\r\n          dimXLoc = allPointsX[0] - gridWidth;\r\n          if (snapType != \"between\" && obj.data.dimY < allPointsY.length) {\r\n            dimXLoc -= gridWidth / 2;\r\n          }\r\n        }\r\n        if (obj.data.dimY <= 0) {\r\n          dimYLoc = allPointsY[0] + gridHeight;\r\n          if (snapType != \"between\" && obj.data.dimX < allPointsX.length) {\r\n            dimYLoc += gridHeight / 2;\r\n          }\r\n        }\r\n        obj.location = new go.Point(dimXLoc, dimYLoc);\r\n      }\r\n    }\r\n    if (\r\n      (obj.data.subRole != \"themeText\" && obj.data.orderY == centerOrderY) ||\r\n      obj.data.dimY == centerOrderY\r\n    ) {\r\n      // console.log(\"Ddddddd\")\r\n      obj.diagram.model.setDataProperty(obj.data, \"width\", gridWidth - 10);\r\n      // delete obj.data.height\r\n      obj.diagram.model.setDataProperty(obj.data, \"height\", null);\r\n    }\r\n    if (\r\n      (obj.data.subRole != \"themeText\" && obj.data.orderX == centerOrderX) ||\r\n      obj.data.dimX == centerOrderX\r\n    ) {\r\n      // console.log(\"Ddddddd\")\r\n      obj.diagram.model.setDataProperty(obj.data, \"height\", gridHeight - 10);\r\n      obj.diagram.model.setDataProperty(obj.data, \"width\", null);\r\n      // delete obj.data.width\r\n    }\r\n\r\n    if (\r\n      Math.abs(obj.data.orderX - centerOrderX) == 1 &&\r\n      Math.abs(obj.data.orderY - centerOrderY) == 1\r\n    ) {\r\n      // 中心节点\r\n      if (snapType != \"between\") {\r\n        obj.diagram.model.setDataProperty(obj.data, \"width\", gridWidth - 10);\r\n        obj.diagram.model.setDataProperty(obj.data, \"height\", gridHeight - 10);\r\n      }\r\n    }\r\n\r\n    if (obj.data.subRole == \"coreText\") {\r\n      var maxRadius = Math.max(\r\n        Math.abs(obj.data.orderX - centerOrderX),\r\n        Math.abs(obj.data.orderY - centerOrderY)\r\n      );\r\n      obj.diagram.model.setDataProperty(obj.data, \"theta\", maxRadius);\r\n    }\r\n\r\n    if (\r\n      Math.abs(obj.data.orderX - centerOrderX) == 0 &&\r\n      Math.abs(obj.data.orderY - centerOrderY) == 0\r\n    ) {\r\n      // 中心节点\r\n      // obj.diagram.model.setDataProperty(obj.data, \"textStroke\",`red`)\r\n      // obj.diagram.model.setDataProperty(obj.data, \"deletable\", false)\r\n      // obj.diagram.model.setDataProperty(obj.data, \"subRole\", \"themeText\")\r\n      // obj.diagram.model.setDataProperty(obj.data, \"height\",`${gridHeight-10}`)\r\n      // if(snapType == \"between\"){\r\n      //   obj.diagram.model.setDataProperty(obj.data, \"width\",gridWidth+gridWidth-10)\r\n      //   obj.diagram.model.setDataProperty(obj.data, \"height\",gridHeight+gridHeight-10)\r\n      // }else{\r\n      //   obj.diagram.model.setDataProperty(obj.data, \"width\",gridWidth-10)\r\n      //   obj.diagram.model.setDataProperty(obj.data, \"height\",gridHeight-10)\r\n      // }\r\n    }\r\n    // else{\r\n    //   // var list = verticalLines[0].layer.findObjectsNear(obj.location, dist)\r\n    //   // console.log(\"list\",list)\r\n    //   var x=obj.location.x,y=obj.location.y, xi,yi;\r\n    //     for(var i=0;i<allPointsX.length;i++){\r\n    //       if(x<allPointsX[i]){\r\n    //         x = allPointsX[i]\r\n    //         xi = i\r\n    //         break;\r\n    //       }\r\n    //     }\r\n    //     for(var i=0;i<allPointsY.length;i++){\r\n    //       if(y<=allPointsY[i]){\r\n    //         y = allPointsY[i]\r\n    //         yi = i;\r\n    //         break;\r\n    //       }\r\n    //     }\r\n\r\n    //     if(x != -9000 && y != 9000){\r\n    //       obj.location = new go.Point(x, y)\r\n    //       obj.data.orderX = xi + 1;\r\n    //       obj.data.orderY = yi + 1;\r\n    //     }\r\n    //     console.log(\"sdfdsfsd\")\r\n    // }\r\n\r\n    // obj.diagram.model.setDataProperty(obj.data, \"selectable\",false)\r\n  });\r\n\r\n  if (axisXText) {\r\n    // axisXText.location = group.location.copy().offset(x1+30, 0)\r\n    // axisXText.locationSpot = go.Spot.Top\r\n  }\r\n  if (axisYText) {\r\n    // axisYText.location = group.location.copy().offset(-10, -(x2+30))\r\n    // axisYText.locationSpot = go.Spot.Right\r\n  }\r\n  if (axisY) {\r\n    axisY.angle = 270;\r\n    this.diagram.model.setDataProperty(\r\n      axisY.data,\r\n      \"desiredSize\",\r\n      `${x2 + 30} 10`\r\n    );\r\n  }\r\n  if (axisX) {\r\n    axisX.angle = 0;\r\n    this.diagram.model.setDataProperty(\r\n      axisX.data,\r\n      \"desiredSize\",\r\n      `${x1 + 30} 10`\r\n    );\r\n  }\r\n  // line.width = 2000\r\n  // line.height = 4\r\n  group.width = x1 + gridWidth * 2;\r\n  group.height = x2 + gridHeight * 2;\r\n  // group.location = group.location.copy().offset(-gridWidth, gridHeight)\r\n  // this.diagram.model.setDataProperty(group.data, \"loc\",go.Point.stringify(group.location.copy().offset(-gridWidth, gridHeight)))\r\n  go.Layout.prototype.doLayout.call(this, coll);\r\n  diagram.commitTransaction(\"YunGroupLayout\");\r\n  // diagram.updateAllTargetBindings()\r\n  return;\r\n  // return;\r\n  // var diagram = this.diagram;\r\n  if (diagram === null) return;\r\n  diagram.startTransaction(\"PoolLayout\");\r\n  // make sure all of the Group Shapes are big enough\r\n  // var minsize = computeMinPoolSize();\r\n  // diagram.findTopLevelGroups().each(function(lane) {\r\n  //   if (!(lane instanceof go.Group)) return;\r\n  //   var shape = lane.selectionObject;\r\n  //   if (shape !== null) {  // change the desiredSize to be big enough in both directions\r\n  //     var sz = computeLaneSize(lane);\r\n  //     shape.width = (!isNaN(shape.width)) ? Math.max(shape.width, sz.width) : sz.width;\r\n  //     shape.height = (isNaN(shape.height) ? minsize.height : Math.max(shape.height, minsize.height));\r\n  //     var cell = lane.resizeCellSize;\r\n  //     if (!isNaN(shape.width) && !isNaN(cell.width) && cell.width > 0) shape.width = Math.ceil(shape.width / cell.width) * cell.width;\r\n  //     if (!isNaN(shape.height) && !isNaN(cell.height) && cell.height > 0) shape.height = Math.ceil(shape.height / cell.height) * cell.height;\r\n  //   }\r\n  // });\r\n  // now do all of the usual stuff, according to whatever properties have been set on this GridLayout\r\n  go.GridLayout.prototype.doLayout.call(this, coll);\r\n  diagram.commitTransaction(\"PoolLayout\");\r\n};\r\n// end PoolLayout class\r\n\r\nmodule.exports = YunGroupLayout;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/layout/yunGroupLayout.js","var $ = go.GraphObject.make;\r\nvar Base = require('./base')\r\nvar helpers = require('../helpers/helpers.gojs')\r\nvar yunGroupLayout = require(\"../layout/yunpanGroupLayout\")\r\n\r\nclass YunNodeTemplate extends Base {\r\n    constructor(options){\r\n        super(options)\r\n        // this.nodeProperties = {}\r\n        this.defaultTextFont = \"20px 'Microsoft YaHei'\"\r\n        \r\n    }\r\n    \r\n\r\n    snapToGrid(data, node){\r\n\r\n      if(data.subRole == \"coreText\" || data.subRole == \"themeText\"){\r\n        return;\r\n      }\r\n      var p = go.Point.parse(data.loc)\r\n      if(node.__yunPointsX && node.__yunPointsY ){\r\n        if(p.x >= node.__yunPointsX[0] && p.x <= node.__yunPointsX[node.__yunPointsX.length-1] \r\n          && p.y >= node.__yunPointsY[node.__yunPointsY.length-1] && p.y <= node.__yunPointsY[0] ){\r\n            // 在画布格子范围内的位置才对齐网格\r\n            var minX=20000,minY=20000,tmp,orderX,orderY;\r\n            for(var i=0;i<node.__yunPointsX.length;i++){\r\n              tmp = Math.abs(p.x - node.__yunPointsX[i])\r\n              if(tmp< minX){\r\n                minX = tmp;\r\n                orderX = i+1;\r\n              }\r\n            }\r\n            for(var i=0;i<node.__yunPointsY.length;i++){\r\n              tmp = Math.abs(p.y - node.__yunPointsY[i])\r\n              if(tmp< minY){\r\n                minY = tmp;\r\n                orderY = i+1;\r\n              }\r\n            }\r\n\r\n            if(orderX!=null && orderY!=null){\r\n              // var x = node.__yunPointsX[orderX-1]\r\n              // var y = node.__yunPointsX[orderY-1]\r\n              // x = -1300\r\n              // y = -1300\r\n              // data.loc = \"-1688.105387366997 -121.19730986224602\"\r\n              data.orderX = orderX\r\n              data.orderY = orderY\r\n            }\r\n          }else{\r\n            delete data.orderX\r\n            delete data.orderY\r\n          }\r\n     }\r\n    }\r\n\r\n    addFreeText(e, node){\r\n      console.log(\"addFreeTextaddFreeText begin\",e)\r\n      var gridWidth = node.data.gridWidth\r\n      var p = e.documentPoint\r\n      var that = this;\r\n      var data = {\"text\":\"节点\",\r\n      \"deletable\":true, \r\n      \"role\":\"freeText\",\r\n      \"fill\":\"black\", \r\n      \"iconVisible\":false, \r\n      \"locationSpot\":\"0.5 0.5 0 0\", \r\n      \"minSize\":`30 30`,\r\n      \"subRole\":\"yunpanText\",\r\n\r\n      // \"width\":`${gridWidth-10}`,\r\n      font: that.defaultTextFont,\r\n      \"textAlign\":\"center\", \r\n      \"category\":\"autoText\", \r\n      \"loc\": go.Point.stringify(p), \r\n      \"movable\":true, \"group\":node.data.key\r\n     }\r\n    //  console.log()\r\n     \r\n\r\n      this.snapToGrid(data, node)\r\n     this.diagram.startTransaction(\"addFreeText\")\r\n     this.diagram.model.addNodeData(data);\r\n     this.diagram.commitTransaction(\"addFreeText\")\r\n     node.layout.isValidLayout = false\r\n     console.log(\"addFreeTextaddFreeText end\",e)\r\n    }\r\n    addFreeShapeText(e, node){\r\n      console.log(\"addFreeTextaddFreeText begin\",e)\r\n      var gridWidth = node.data.gridWidth\r\n      var p = e.documentPoint\r\n      var that = this;\r\n      var data = {\"text\":\"节点\",\r\n      \"deletable\":true, \r\n      \"role\":\"freeText\",\r\n      \"fill\":\"#F2F2F2\", \r\n      \"iconVisible\":false, \r\n      \"locationSpot\":\"0.5 0.5 0 0\", \r\n      \"minSize\":`30 30`,\r\n      \"subRole\":\"yunpanText\",\r\n      desiredSize: go.Size.stringify(new go.Size(gridWidth-10,gridWidth-10)),\r\n      // \"width\":`${gridWidth-10}`,\r\n      font: that.defaultTextFont,\r\n      \"textAlign\":\"center\", \r\n      \"category\":\"shapeText\", \r\n      \"loc\": go.Point.stringify(p), \r\n      \"movable\":true, \"group\":node.data.key\r\n     }\r\n    //  console.log()\r\n     \r\n\r\n      this.snapToGrid(data, node)\r\n     this.diagram.startTransaction(\"addFreeText\")\r\n     this.diagram.model.addNodeData(data);\r\n     this.diagram.commitTransaction(\"addFreeText\")\r\n     node.layout.isValidLayout = false\r\n     console.log(\"addFreeTextaddFreeText end\",e)\r\n    }\r\n\r\n    getNodeTemplate(){\r\n      var that = this\r\n      return $(go.Group, \"Auto\",\r\n      { selectionObjectName: \"PH\",\r\n      __trtdNode: that,\r\n      layerName: \"default\",\r\n      padding: 0,\r\n      margin: 0,\r\n      copyable: false,\r\n      zOrder: 15,\r\n        locationObjectName: \"PH\",\r\n        locationSpot: new go.Spot(0,1,0,-0),\r\n        // rotationSpot: go.Spot.LeftCenter,\r\n        rotatable: false,\r\n        alignment: go.Spot.Left,\r\n        alignmentFocus: go.Spot.Left,\r\n        // rotateObject:\"PH\",\r\n        click: (e, node)=>{\r\n          console.log(node.data)\r\n          var it = node.findSubGraphParts().iterator;\r\n          while (it.next()) {\r\n              var n = it.value;\r\n              if(n.data.category == \"autoText\"){\r\n                  n.findObject(\"textBorder\").visible = false;\r\n              }\r\n          }\r\n          node.layout.isValidLayout = false\r\n          return;\r\n          if(node.isSelected) return;\r\n          var it = node.findSubGraphParts().iterator;\r\n          var n;\r\n          while (it.next()) {\r\n              n = it.value;\r\n              if(n.data.role == \"labelGroup\"){\r\n                  n.__trtdNode.switchBorder(n, true)\r\n                  break;\r\n              }\r\n          }\r\n          if(n){\r\n            setTimeout(function(){\r\n              n.__trtdNode.switchBorder(n, false)\r\n            },3000)\r\n          }\r\n        },\r\n        doubleClick: function (e, node){\r\n          that.addFreeShapeText(e, node)\r\n        },\r\n        mouseOver: function(e, node) {\r\n          // if(node.data.hyperlink){\r\n          //   var textObj = node.findObject('TEXT');\r\n          //   textObj.isUnderline = true;\r\n          // }\r\n          // if(!node.containingGroup) return;\r\n          return;\r\n          // diagram.__trtd.showNodeRemarkTips(e, node);\r\n      },\r\n      contextMenu: $(go.Adornment),\r\n      mouseLeave: function(e, node) {\r\n        // if(!node.containingGroup) return;\r\n        var it = node.findSubGraphParts().iterator;\r\n        while (it.next()) {\r\n            var n = it.value;\r\n            if(n.data.role == \"labelGroup\"){\r\n                // n.__trtdNode.switchBorder(n, false)\r\n                break;\r\n            }\r\n        }\r\n        // if(n){\r\n        //   setTimeout(function(){\r\n        //     n.__trtdNode.switchBorder(n, false)\r\n        //   },3000)\r\n        // }\r\n      },\r\n        // rotatable: true,\r\n        // resizable: true,\r\n        // layoutConditions: go.Part.LayoutStandard,\r\n        layoutConditions: go.Part.LayoutStandard & go.Part.LayoutRemoved & go.Part.LayoutAdded & go.Part.LayoutNodeSized,\r\n        layout: new yunGroupLayout()\r\n        // layout: $(go.GridLayout,{\r\n        //   spacing: new go.Size(0,0),\r\n        //   cellSize: go.Size.parse(300,150),\r\n        //   arrangement:go.GridLayout.LeftToRight,\r\n        //   alignment: go.GridLayout.Location,\r\n        //   comparer:function(pa, pb) {\r\n        //     var da = pa.data;\r\n        //     var db = pb.data;\r\n        //     if (da.order < db.order) return -1;\r\n        //     if (da.order > db.order) return 1;\r\n        //     return 0;\r\n        //   }\r\n        // }) \r\n      },\r\n      new go.Binding(\"deletable\", \"deletable\").makeTwoWay(function(v,data){\r\n        return v;\r\n      }),\r\n      new go.Binding(\"copyable\", \"copyable\").makeTwoWay(),\r\n      new go.Binding(\"angle\", \"angle\").makeTwoWay(function(v,data){\r\n        return v;\r\n      }),\r\n      new go.Binding(\"zOrder\", \"zOrder\").makeTwoWay(function(v,data){\r\n        return v;\r\n      }),\r\n      new go.Binding(\"locationSpot\", \"\", function(data){\r\n        // console.log(\"data:\",data)\r\n        return new go.Spot(0,1,data.gridWidth,-data.gridHeight)\r\n      }),\r\n        \r\n        $(go.Shape,  // using a Shape instead of a Placeholder\r\n          { name: \"PH\",\r\n          figure:\"Rectangle\",\r\n          // rotationSpot: go.Spot.LeftCenter,\r\n          // spot1: new go.Spot(0.01, 0.01),\r\n          // spot2: new go.Spot(0.99, 0.99),\r\n            // width: 600,\r\n            // height:300,\r\n            stroke:\"yellow\" ,\r\n            strokeWidth:0,\r\n            fill: \"rgba(0,0,255,0.0)\" },\r\n          // new go.Binding(\"desiredSize\", \"desiredSize\", function(v,data){\r\n          //   return go.Size.parse(v)\r\n          //   console.log('1111111111111111111111')\r\n          //   // for(var i=0;i<)\r\n          //   var model = data.part.diagram.model;\r\n          //   var group = data.part.data;\r\n          //   var maxWidth = 0;\r\n          //   var maxHeight = 0;\r\n          //   for(var i = 0;i<model.nodeDataArray.length;i++){\r\n          //     if(group.key != model.nodeDataArray[i].group){\r\n          //       continue;\r\n          //     }\r\n          //     if(model.nodeDataArray[i].desiredSize){\r\n          //       console.log(model.nodeDataArray[i].desiredSize)\r\n          //       var size = go.Size.parse(model.nodeDataArray[i].desiredSize)\r\n          //       if(size.width > maxWidth){\r\n          //         maxWidth = size.width;\r\n          //       }\r\n          //       if(size.height > maxHeight){\r\n          //         maxHeight = size.height;\r\n          //       }\r\n          //     }\r\n          //   }\r\n          //   // var group = that.diagram.findNodeForKey(data.part.data.key)\r\n          //   // var git = group.memberParts;\r\n          //   // var maxWidth = 0;\r\n          //   // var maxHeight = 0;\r\n          //   // while (git.next()) {\r\n          //   //   var item = git.value;\r\n          //   //   console.log(\"item:\",item)\r\n          //   //   if(item.naturalBounds.width > maxWidth){\r\n          //   //     maxWidth = item.naturalBounds.width;\r\n          //   //   }\r\n          //   //   if(item.naturalBounds.height > maxHeight){\r\n          //   //     maxHeight = item.naturalBounds.height;\r\n          //   //   }\r\n          //   //   console.log(`maxHeight:${maxHeight},maxWidth:${maxWidth}`)\r\n      \r\n          //   // }           \r\n          //   return go.Size.parse(`${maxWidth+100} ${maxHeight}`)         \r\n          //   // group.diagram.model.setDataProperty(group.data, \"desiredSize\", `${maxWidth+100} ${maxHeight}`) \r\n          // }).makeTwoWay(go.Size.stringify)\r\n        ),\r\n        new go.Binding(\"location\", \"loc\", go.Point.parse).makeTwoWay(go.Point.stringify),\r\n        // $(go.Placeholder,    // represents the area of all member parts,\r\n        //   { padding: 0}\r\n        // ),  // with some extra padding around them\r\n\r\n        // $(go.TextBlock,  // group title\r\n        //   { font: \"Bold 12pt Sans-Serif\" },\r\n        //   new go.Binding(\"text\", \"key\")\r\n        // )\r\n      )\r\n    }\r\n}\r\n\r\nmodule.exports = YunNodeTemplate\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/nodeTemplate/yunpanGroupNodeTemplate.js","    // define a custom grid layout that makes sure the length of each lane is the same\r\n    // and that each lane is broad enough to hold its subgraph\r\n    function YunGroupLayout() {\r\n        go.Layout.call(this);\r\n        // go.GridLayout.call(this);\r\n        // this.cellSize = new go.Size(1, 1);\r\n        // this.wrappingColumn = Infinity;\r\n        // this.wrappingWidth = Infinity;\r\n        // this.spacing = new go.Size(0, 0);\r\n        // this.alignment = go.GridLayout.Position;\r\n      }\r\n      go.Diagram.inherit(YunGroupLayout, go.Layout);\r\n  \r\n      function computeNewRotateLoc(rotateCenter,currentLoc, angle){\r\n          if(rotateCenter.equals(currentLoc)) return currentLoc\r\n        // 计算选择中心点到（0,0）点的偏移\r\n        var offset = new go.Point(0,0).subtract(rotateCenter.copy())\r\n        // 将原来的点偏移到相对0,0点的位置\r\n        var nodeOrigin = currentLoc.copy().offset(offset.x, offset.y)\r\n        var newNodeOrigin = nodeOrigin.rotate(angle)\r\n        var newNodeLoc = newNodeOrigin.copy().offset(-offset.x, -offset.y)\r\n        return newNodeLoc\r\n        // console.log(\"newNodeLoc\", newNodeLoc)\r\n      }\r\n      YunGroupLayout.prototype.doLayout = function(coll) {\r\n          console.log(\"YunGroupLayout.doLayout\")\r\n        var diagram = this.diagram;\r\n        diagram.startTransaction(\"YunGroupLayout\")\r\n          // COLL might be a Diagram or a Group or some Iterable<Part>\r\n         \r\n        var it = this.collectParts(coll).iterator;\r\n        var collection = []\r\n        var dataCollection =[]\r\n        var group = this.group\r\n        var gridWidth = group.data.gridWidth\r\n        var gridHeight = group.data.gridHeight\r\n        // group.location = new go.Point(0,0)\r\n        var maxWidth = 0;\r\n        var maxHeight = 0;\r\n        var centerLine, axisX, axisY,axisXText, axisYText, themeText, labelText1,labelText2,labelText3,labelGroup,waveGroup\r\n        var shiTextColl = []\r\n        var xuTextColl = []\r\n        var verticalLines = []\r\n        var horizontalLines = []\r\n        var freelLines = []\r\n        var allLines = []\r\n        var freeTexts = []\r\n        var shapeNodes = []\r\n        var horizontalDim = []\r\n        var verticalDim = []\r\n        var snapType = group.data.snapType || \"grid\"\r\n        var showShape = group.data.showShape; // 是否显示矩形\r\n        var beginSpark = group.data.beginSpark; // 是否开始火花\r\n        var shapeStrokes = group.data.shapeStrokes; // 是否开始火花\r\n        var oliveWidth\r\n        var oliveHeight\r\n        while (it.next()) {\r\n            var node = it.value;\r\n                // var item = git.value;\r\n            //   console.log(\"item:\",item)\r\n\r\n            dataCollection.push(node.data)\r\n            if(node.data.category == \"wave\"){\r\n                collection.push(node)\r\n            }\r\n            if(!(node instanceof go.Node)){\r\n              continue;\r\n            }\r\n            \r\n            if(node.data.dimX == 0 && node.data.subRole == \"dimText\"){\r\n              verticalDim.push(node)\r\n            }\r\n            if(node.data.dimY == 0 && node.data.subRole == \"dimText\"){\r\n              horizontalDim.push(node)\r\n            }\r\n            if(node.data.role == \"background\"){\r\n              shapeNodes.push(node)\r\n            }\r\n            // 处理文本节点的位置和定位位置\r\n            // if(node.data.category == \"text\"){\r\n              if(node.data.role == \"axisYText\"){\r\n                axisYText = node;\r\n              }\r\n              if(node.data.role == \"axisXText\"){\r\n                axisXText = node;\r\n              }\r\n              if(node.data.role == \"themeText\"){\r\n                themeText = node;\r\n              }\r\n              if(node.data.role == \"shiText\"){\r\n                shiTextColl.push(node)\r\n              }\r\n              if(node.data.role == \"xuText\"){\r\n                xuTextColl.push(node)\r\n              }\r\n            // }\r\n            // 处理label文本节点的位置和定位位置\r\n            // if(node.data.category == \"iconText\"){\r\n              if(node.data.role == \"labelText1\"){\r\n                labelText1 = node;\r\n              }\r\n              if(node.data.role == \"labelText2\"){\r\n                labelText2 = node;\r\n              }\r\n              if(node.data.role == \"labelText3\"){\r\n                labelText3 = node;\r\n              }\r\n              if(node.data.role == \"labelGroup\"){\r\n                labelGroup = node;\r\n              }\r\n            // }\r\n\r\n              if(node.naturalBounds.width > maxWidth){\r\n                maxWidth = node.naturalBounds.width;\r\n              }\r\n              if(node.naturalBounds.height > maxHeight){\r\n                maxHeight = node.naturalBounds.height;\r\n              }\r\n            \r\n            \r\n              if(node.data.role == \"freeText\"){\r\n                freeTexts.push(node);\r\n              }\r\n            if (node.data.category == \"line\") {\r\n\r\n                allLines.push(node)\r\n                if(node.data.role == \"verticalLine\"){\r\n                  verticalLines.push(node);\r\n                }\r\n                if(node.data.role == \"horizontalLine\"){\r\n                  horizontalLines.push(node);\r\n                }\r\n                if(node.data.role == \"freelLine\"){\r\n                  freelLines.push(node);\r\n                }\r\n            }\r\n            if (node.data.group == group.key) {\r\n            // position the node . . .\r\n                if(node.data.category == \"line\"){\r\n                    if(node.data.role == \"axisX\") {\r\n                      node.angle = 0;\r\n                      axisX = node\r\n                      node.location = group.location.copy().offset(0,0)\r\n                    };\r\n                    if(node.data.role == \"axisY\") {\r\n                      axisY = node\r\n                      node.angle = 270;\r\n                      node.location = group.location.copy().offset(0,0)\r\n                    }\r\n                    // node.angle = 270\r\n                }\r\n                // if(node.data.category == \"waveGroup\"){\r\n                //     waveGroup = node;\r\n                //     // node.angle = group.angle\r\n                //     oliveWidth = node.data.oliveWidth\r\n                //     oliveHeight = node.data.oliveHeight\r\n                //     node.location = group.location.copy().offset(0,0)\r\n                //     // node.layout.isOngoing = true;\r\n                //     // node.layout.isValidLayout = false;\r\n                //     // collection.push(node)\r\n                // }\r\n\r\n            }\r\n        }\r\n        console.log(`maxHeight:${maxHeight},maxWidth:${maxWidth}`)\r\n\r\n\r\n\r\n        verticalLines.sort(function(a,b){\r\n            return a.data.order - b.data.order\r\n        })\r\n        horizontalLines.sort(function(a,b){\r\n            return a.data.order - b.data.order\r\n        })\r\n        freelLines.sort(function(a,b){\r\n          return a.data.order - b.data.order\r\n        })\r\n        // verticalDim.sort(function(a,b){\r\n        //     return a.data.dimY - b.data.dimY\r\n        // })\r\n        // horizontalDim.sort(function(a,b){\r\n        //     return a.data.dimX - b.data.dimX\r\n        // })\r\n        // horizontalLines.forEach(function(obj,index){\r\n        //   var newOrder = index+1;\r\n        //   obj.diagram.model.setDataProperty(obj.data,\"dimX\", newOrder)\r\n        // })\r\n        // verticalDim.forEach(function(obj,index){\r\n        //   var newOrder = index+1;\r\n        //   obj.diagram.model.setDataProperty(obj.data,\"dimY\", newOrder)\r\n        // })\r\n        if(snapType == \"between\"){\r\n          var x1 = verticalLines.length*gridWidth+gridWidth\r\n          var x2 = horizontalLines.length*gridHeight+gridHeight\r\n        }else{\r\n          var x1 = verticalLines.length*gridWidth\r\n          var x2 = horizontalLines.length*gridHeight\r\n        }\r\n\r\n        var allPointsX = [];\r\n        var allPointsY = [];\r\n        var centerOrderX = (horizontalLines.length+1)/2\r\n        var centerOrderY = (verticalLines.length+1)/2\r\n        allLines.forEach(function(obj, index){\r\n          // obj.diagram.model.setDataProperty(obj.data, \"strokeWidth\",1)\r\n          \r\n          // obj.diagram.model.setDataProperty(obj.data, \"stroke\",\"rgba(0,0,0,0.3)\")\r\n          if( obj.data.role == \"axisX\" ||  obj.data.role == \"axisY\") return;\r\n          // if(obj.data.subRole == \"dim\"){\r\n          //   obj.diagram.model.setDataProperty(obj.data, \"strokeDashArray\",\"[0, 0]\")\r\n          //   obj.diagram.model.setDataProperty(obj.data, \"strokeWidth\",3)\r\n          //   obj.diagram.model.setDataProperty(obj.data, \"stroke\",\"RGBA(164, 177, 198, 1)\")\r\n          // }else{\r\n          //   obj.diagram.model.setDataProperty(obj.data, \"strokeDashArray\",\"[15, 10]\")\r\n          //   obj.diagram.model.setDataProperty(obj.data, \"strokeWidth\",1)\r\n          //   obj.diagram.model.setDataProperty(obj.data, \"stroke\",\"rgba(0,0,0,0.3)\")\r\n          // }\r\n        })\r\n\r\n        verticalLines.forEach(function(obj,index){\r\n          var newOrder = index+1;\r\n          obj.diagram.model.setDataProperty(obj.data,\"order\", newOrder)\r\n          obj.location = group.location.copy().offset(gridWidth*(newOrder),0)\r\n          obj.angle = 270;\r\n          obj.diagram.model.setDataProperty(obj.data, \"deletable\", true)\r\n          obj.diagram.model.setDataProperty(obj.data, \"desiredSize\",`${x2+20} 10`)\r\n          // obj.diagram.model.setDataProperty(obj.data, \"showArrow\",false)\r\n          // obj.diagram.model.setDataProperty(obj.data, \"selectable\",false)\r\n          if(snapType == \"between\"){\r\n            if(newOrder < centerOrderX){\r\n              allPointsX.push(obj.location.x-gridWidth/2)\r\n            }\r\n            if(newOrder == centerOrderX){\r\n              allPointsX.push(obj.location.x)\r\n            }\r\n            if(newOrder > centerOrderX){\r\n              allPointsX.push(obj.location.x+gridWidth/2)\r\n            }\r\n          }else{\r\n            allPointsX.push(obj.location.x)\r\n          }\r\n\r\n\r\n          // obj.diagram.model.setDataProperty(obj.data, \"strokeWidth\",1)\r\n          // obj.diagram.model.setDataProperty(obj.data, \"stroke\",\"rgba(0,0,0,0.3)\")\r\n          // obj.diagram.model.setDataProperty(obj.data, \"strokeDashArray\",\"[10, 5]\")\r\n        })\r\n        horizontalLines.forEach(function(obj,index){\r\n          var newOrder = index+1;\r\n          obj.diagram.model.setDataProperty(obj.data,\"order\", newOrder)\r\n          obj.diagram.model.setDataProperty(obj.data, \"deletable\", true)\r\n          obj.location = group.location.copy().offset(0,-gridHeight*(newOrder))\r\n          obj.angle = 0;\r\n          obj.diagram.model.setDataProperty(obj.data, \"desiredSize\",`${x1+20} 10`)\r\n          // obj.diagram.model.setDataProperty(obj.data, \"showArrow\",false)\r\n          // obj.diagram.model.setDataProperty(obj.data, \"selectable\",false)\r\n          if(snapType == \"between\"){\r\n            if(newOrder < centerOrderY){\r\n              allPointsY.push(obj.location.y+gridHeight/2)\r\n            }\r\n            if(newOrder == centerOrderY){\r\n              allPointsY.push(obj.location.y)\r\n            }\r\n            if(newOrder > centerOrderY){\r\n              allPointsY.push(obj.location.y-gridHeight/2)\r\n            }\r\n          }else{\r\n              allPointsY.push(obj.location.y)\r\n          }\r\n          // obj.diagram.model.setDataProperty(obj.data, \"strokeWidth\",1)\r\n          // obj.diagram.model.setDataProperty(obj.data, \"stroke\",\"rgba(0,0,0,0.3)\")\r\n          // obj.diagram.model.setDataProperty(obj.data, \"strokeDashArray\",\"[10, 5]\")\r\n        })\r\n        // allPointsX.unshift(allPointsX[0]-gridWidth)\r\n        // allPointsX.push(allPointsX[allPointsX.length-1]+gridWidth)\r\n        // allPointsY.unshift(allPointsY[0]-gridLength)\r\n        // allPointsY.push(allPointsY[allPointsY.length-1]+gridLength)\r\n        this.group.__yunPointsX = allPointsX\r\n        this.group.__yunPointsY = allPointsY\r\n        freelLines.forEach(function(obj,index){\r\n          // var newOrder = index+1;\r\n          // obj.diagram.model.setDataProperty(obj.data,\"order\", newOrder)\r\n          // obj.location = new go.Point(allPointsX[9], allPointsY[9])\r\n          // obj.angle = 315;\r\n          // obj.diagram.model.setDataProperty(obj.data, \"desiredSize\",`${gridWidth*20-5} 10`)\r\n          // obj.diagram.model.setDataProperty(obj.data, \"showArrow\",false)\r\n          // obj.diagram.model.setDataProperty(obj.data, \"selectable\",true)\r\n          // obj.diagram.model.setDataProperty(obj.data, \"strokeWidth\",1)\r\n          // obj.diagram.model.setDataProperty(obj.data, \"zOrder\",10)\r\n          // obj.diagram.model.setDataProperty(obj.data, \"showArrow\",true)\r\n          // obj.diagram.model.setDataProperty(obj.data, \"showBeginArrow\",true)\r\n          // obj.diagram.model.setDataProperty(obj.data, \"showEndArrow\",true)\r\n          // obj.diagram.model.setDataProperty(obj.data, \"locationSpot\",`0.5 0.5 0 0`)\r\n          // obj.diagram.model.setDataProperty(obj.data, \"stroke\",\"rgba(0,0,0,0.3)\")\r\n          // obj.diagram.model.setDataProperty(obj.data, \"strokeDashArray\",\"[5, 5]\")\r\n          // obj.diagram.model.setDataProperty(obj.data, \"selectable\",false)\r\n        })\r\n\r\n\r\n\r\n        // shapeNodes.forEach(function(obj,index){\r\n        //   obj.diagram.model.setDataProperty(obj.data, \"visible\",true)\r\n        //   if(!showShape){\r\n        //     obj.diagram.model.setDataProperty(obj.data, \"stroke\", \"rgba(255,0,0,0)\")\r\n        //   }else{\r\n        //     try{\r\n        //       obj.diagram.model.setDataProperty(obj.data, \"stroke\", shapeStrokes[obj.data.gridWidth/2-1])\r\n        //     }catch(e){\r\n        //       console.log(e)\r\n        //     }\r\n        //   }\r\n        //     if(obj.data.desiredSize){\r\n        //       return;\r\n        //     }\r\n        //     obj.data.orderX = centerOrderX\r\n        //     obj.data.orderY = centerOrderY\r\n        //     obj.location = new go.Point(allPointsX[obj.data.orderX-1], allPointsY[obj.data.orderY-1])\r\n        //     var shapeWidth = obj.data.gridWidth||2;\r\n        //     if(snapType == \"between\"){\r\n        //       var desiredSize = new go.Size(gridWidth*(shapeWidth-1), gridHeight*(shapeWidth-1))\r\n        //       obj.diagram.model.setDataProperty(obj.data, \"strokeWidth\", gridWidth)\r\n        //     }else{\r\n        //       var desiredSize = new go.Size(gridWidth*shapeWidth+3, gridHeight*shapeWidth+3)\r\n        //       obj.diagram.model.setDataProperty(obj.data, \"strokeWidth\", 3)\r\n        //     }\r\n        //     // obj.desiredSize = desiredSize;\r\n        //     obj.diagram.model.setDataProperty(obj.data, \"desiredSize\",go.Size.stringify(desiredSize))\r\n        //     // obj.diagram.model.setDataProperty(obj.data, \"visible\",true)\r\n        //     obj.diagram.model.setDataProperty(obj.data, \"strokeDashArray\",\"[0,0]\")\r\n            \r\n        // })\r\n\r\n        // var dist = Math.max(gridHeight,gridWidth)\r\n        freeTexts.forEach(function(obj,index){\r\n          // var newOrder = index+1;\r\n          // obj.diagram.model.setDataProperty(obj.data,\"order\", newOrder)\r\n          // obj.location = group.location.copy()\r\n          // obj.angle = 315;\r\n          // obj.diagram.model.setDataProperty(obj.data, \"desiredSize\",`${x1+20} 10`)\r\n          // obj.diagram.model.setDataProperty(obj.data, \"minSize\",`60 50`)\r\n          // obj.diagram.model.setDataProperty(obj.data, \"width\",`${gridWidth-10}`)\r\n          // obj.diagram.model.setDataProperty(obj.data, \"height\",`${gridHeight-10}`)\r\n          // obj.diagram.model.setDataProperty(obj.data, \"width\",`${gridWidth*3}`)\r\n          // delete obj.data.width\r\n          // obj.diagram.model.setDataProperty(obj.data, \"textAlign\",`center`)\r\n          // obj.diagram.model.setDataProperty(obj.data, \"locationSpot\",`0.5 0.5 0 0`)\r\n          // obj.diagram.model.setDataProperty(obj.data, \"strokeDashArray\",\"[10, 5]\")\r\n          // obj.diagram.model.setDataProperty(obj.data, \"font\", group.__trtdNode.defaultTextFont)\r\n\r\n      // if(node.__yunPointsY && node.__yunPointsX){\r\n      //       for(var i=0;i<allPointsX.length;i++){\r\n      //         if(obj)\r\n      //       }\r\n      //    }\r\n      // if(obj.data.text.indexOf(\"自由文本\") >-1){\r\n      //   console.log(\"ddd\",obj.data.text)\r\n      //   var order = obj.data.text.replace(\"自由文本\",\"\").split(\",\")\r\n      //   if(order.length == 2){\r\n      //     obj.data.orderX = order[0]\r\n      //     obj.data.orderY = order[1]\r\n      //     obj.location = new go.Point(allPointsX[obj.data.orderX-1], allPointsY[obj.data.orderY-1])\r\n      //   }\r\n      // }\r\n\r\n        // if(obj.data.text.length == 1){\r\n        //   if(obj.data.subRole == null){\r\n        //     obj.diagram.model.setDataProperty(obj.data, \"subRole\",\"coreText\")\r\n        //     obj.diagram.model.setDataProperty(obj.data, \"deletable\", false)\r\n        //   }\r\n        // }\r\n\r\n        // if(obj.data.text.indexOf(\"维度\") >-1){\r\n        //   console.log(\"ddd\",obj.data.text)\r\n        //   // var order = obj.data.text.replace(\"维度\",\"\").split(\",\")\r\n        //   obj.diagram.model.setDataProperty(obj.data, \"subRole\",\"dimText\")\r\n        //   // obj.diagram.model.setDataProperty(obj.data, \"dimKey\", null)\r\n        //   delete obj.data.dimKey\r\n        //   obj.diagram.model.setDataProperty(obj.data, \"deletable\", false)\r\n        //   // obj.diagram.model.setDataProperty(obj.data, \"width\", null)\r\n        //   // obj.diagram.model.setDataProperty(obj.data, \"height\", null)\r\n        // }\r\n          obj.areaBackground = null\r\n          // obj.diagram.model.setDataProperty(obj.data, \"height\", null)\r\n          // obj.diagram.model.setDataProperty(obj.data, \"width\", null)\r\n          // obj.findObject(\"place\").visible = false;\r\n          // console.log(\"verticalLines.length+1)/2verticalLines.length+1)/2\",(verticalLines.length+1)/2)\r\n          if(group.data.autoSnapText){\r\n            // 计算普通文字位置\r\n            if(obj.data.orderX && obj.data.orderY){\r\n              obj.location = new go.Point(allPointsX[obj.data.orderX-1], allPointsY[obj.data.orderY-1])\r\n              \r\n              obj.location = new go.Point(allPointsX[obj.data.orderX-1], allPointsY[obj.data.orderY-1])\r\n            }\r\n            // 计算维度文字位置\r\n            if(obj.data.subRole == \"dimText\" && obj.data.dimX!=null && obj.data.dimY!=null){\r\n              console.log(\"dimText\")\r\n              obj.diagram.model.setDataProperty(obj.data, \"deletable\", true)\r\n              var dimXLoc, dimYLoc;\r\n              dimXLoc = allPointsX[obj.data.dimX-1]\r\n              dimYLoc = allPointsY[obj.data.dimY-1]\r\n\r\n              // if(obj.data.dimX > allPointsX.length+1){\r\n              //   dimXLoc = allPointsX[allPointsX.length-1]+gridWidth\r\n              //   // if(snapType != \"between\"){\r\n              //   //   dimXLoc += gridWidth/3\r\n              //   // }\r\n              // }\r\n              // if(obj.data.dimY > allPointsY.length+1){\r\n              //   dimYLoc = allPointsY[allPointsY.length-1]-gridHeight\r\n              //   // if(snapType != \"between\"){\r\n              //   //   dimYLoc -= gridHeight/3\r\n              //   // }\r\n              // }\r\n              if(obj.data.dimX <= 0){\r\n                dimXLoc = allPointsX[0]-gridWidth/2-10\r\n                if(snapType != \"between\"&& obj.data.dimY <= allPointsY.length){\r\n                  dimXLoc -= gridWidth/2\r\n                }\r\n              }\r\n              if(obj.data.dimY <= 0){\r\n                dimYLoc = allPointsY[0]+gridHeight/2\r\n                if(snapType != \"between\" && obj.data.dimX <= allPointsX.length){\r\n                  dimYLoc += gridHeight/2\r\n                }\r\n              }\r\n              obj.location = new go.Point(dimXLoc, dimYLoc)\r\n            }\r\n          }\r\n          // if(obj.data.orderY == centerOrderY||obj.data.dimY == centerOrderY){\r\n          //   // console.log(\"Ddddddd\")\r\n          //   obj.diagram.model.setDataProperty(obj.data, \"width\",`${gridWidth-10}`)\r\n          //   // delete obj.data.height\r\n          //   obj.diagram.model.setDataProperty(obj.data, \"height\", null)\r\n          // }\r\n          // if(obj.data.orderX == centerOrderX || obj.data.dimX == centerOrderX ){\r\n          //   // console.log(\"Ddddddd\")\r\n          //   obj.diagram.model.setDataProperty(obj.data, \"height\",`${gridHeight-10}`)\r\n          //   obj.diagram.model.setDataProperty(obj.data, \"width\", null)\r\n          //   // delete obj.data.width\r\n          // }\r\n\r\n          // if(Math.abs(obj.data.orderX-centerOrderX) <= 1 && Math.abs(obj.data.orderY-centerOrderY) <= 1){\r\n          //   // 中心节点\r\n          //   if(snapType != \"between\"){\r\n          //     obj.diagram.model.setDataProperty(obj.data, \"width\",`${gridWidth-10}`)\r\n          //     obj.diagram.model.setDataProperty(obj.data, \"height\",`${gridHeight-10}`)\r\n          //   }\r\n          // }\r\n\r\n          // if(Math.abs(obj.data.orderX-centerOrderX) == 0 && Math.abs(obj.data.orderY-centerOrderY) == 0){\r\n          //   // 中心节点\r\n          //   // obj.diagram.model.setDataProperty(obj.data, \"textStroke\",`red`)\r\n          //   // obj.diagram.model.setDataProperty(obj.data, \"deletable\", false)\r\n          //   // obj.diagram.model.setDataProperty(obj.data, \"subRole\", \"themeText\")\r\n          //   // obj.diagram.model.setDataProperty(obj.data, \"height\",`${gridHeight-10}`)\r\n          //   if(snapType == \"between\"){\r\n          //     obj.diagram.model.setDataProperty(obj.data, \"width\",`${gridWidth+gridWidth-10}`)\r\n          //     obj.diagram.model.setDataProperty(obj.data, \"height\",`${gridHeight+gridHeight-10}`)\r\n          //   }else{\r\n          //     obj.diagram.model.setDataProperty(obj.data, \"width\",`${gridWidth-10}`)\r\n          //     obj.diagram.model.setDataProperty(obj.data, \"height\",`${gridHeight-10}`)\r\n          //   }\r\n          // }\r\n          // else{\r\n          //   // var list = verticalLines[0].layer.findObjectsNear(obj.location, dist)\r\n          //   // console.log(\"list\",list)\r\n          //   var x=obj.location.x,y=obj.location.y, xi,yi;\r\n          //     for(var i=0;i<allPointsX.length;i++){\r\n          //       if(x<allPointsX[i]){\r\n          //         x = allPointsX[i]\r\n          //         xi = i\r\n          //         break;\r\n          //       }\r\n          //     }\r\n          //     for(var i=0;i<allPointsY.length;i++){\r\n          //       if(y<=allPointsY[i]){\r\n          //         y = allPointsY[i]\r\n          //         yi = i;\r\n          //         break;\r\n          //       }\r\n          //     }\r\n\r\n          //     if(x != -9000 && y != 9000){\r\n          //       obj.location = new go.Point(x, y)\r\n          //       obj.data.orderX = xi + 1;\r\n          //       obj.data.orderY = yi + 1;\r\n          //     }\r\n          //     console.log(\"sdfdsfsd\")\r\n          // }\r\n\r\n          // obj.diagram.model.setDataProperty(obj.data, \"selectable\",false)\r\n        })\r\n\r\n        if(axisXText){\r\n          axisXText.location = group.location.copy().offset(x1+50, 0)\r\n          axisXText.locationSpot = go.Spot.Left\r\n        }\r\n        if(axisYText){\r\n          axisYText.location = group.location.copy().offset(0, -(x2+50))\r\n          axisYText.locationSpot = go.Spot.Bottom\r\n        }\r\n        if(axisY) {\r\n          axisY.angle = 270;\r\n          this.diagram.model.setDataProperty(axisY.data, \"desiredSize\",`${x2+30} 10`)\r\n        }\r\n        if(axisX) {\r\n          axisX.angle = 0\r\n          this.diagram.model.setDataProperty(axisX.data, \"desiredSize\",`${x1+30} 10`)\r\n        }\r\n        // line.width = 2000\r\n        // line.height = 4\r\n        group.width = x1+gridWidth*2\r\n        group.height = x2+gridHeight*2\r\n        // group.location = group.location.copy().offset(-gridWidth, gridHeight)\r\n        // this.diagram.model.setDataProperty(group.data, \"loc\",go.Point.stringify(group.location.copy().offset(-gridWidth, gridHeight)))\r\n        go.Layout.prototype.doLayout.call(this, coll);\r\n        diagram.commitTransaction(\"YunGroupLayout\");\r\n        // diagram.updateAllTargetBindings()\r\n        return;\r\n        // return;\r\n        // var diagram = this.diagram;\r\n        if (diagram === null) return;\r\n        diagram.startTransaction(\"PoolLayout\");\r\n        // make sure all of the Group Shapes are big enough\r\n        // var minsize = computeMinPoolSize();\r\n        // diagram.findTopLevelGroups().each(function(lane) {\r\n        //   if (!(lane instanceof go.Group)) return;\r\n        //   var shape = lane.selectionObject;\r\n        //   if (shape !== null) {  // change the desiredSize to be big enough in both directions\r\n        //     var sz = computeLaneSize(lane);\r\n        //     shape.width = (!isNaN(shape.width)) ? Math.max(shape.width, sz.width) : sz.width;\r\n        //     shape.height = (isNaN(shape.height) ? minsize.height : Math.max(shape.height, minsize.height));\r\n        //     var cell = lane.resizeCellSize;\r\n        //     if (!isNaN(shape.width) && !isNaN(cell.width) && cell.width > 0) shape.width = Math.ceil(shape.width / cell.width) * cell.width;\r\n        //     if (!isNaN(shape.height) && !isNaN(cell.height) && cell.height > 0) shape.height = Math.ceil(shape.height / cell.height) * cell.height;\r\n        //   }\r\n        // });\r\n        // now do all of the usual stuff, according to whatever properties have been set on this GridLayout\r\n        go.GridLayout.prototype.doLayout.call(this, coll);\r\n        diagram.commitTransaction(\"PoolLayout\");\r\n      };\r\n      // end PoolLayout class\r\n\r\n      module.exports = YunGroupLayout\n\n\n// WEBPACK FOOTER //\n// ./src/layout/yunpanGroupLayout.js","\r\n\r\nvar $ = go.GraphObject.make;\r\nvar Base = require('./base')\r\nvar helpers = require('../helpers/helpers.gojs')\r\n  \r\n\r\nclass shapeNodeTemplate extends Base {\r\n    constructor(options){\r\n        super(options)\r\n        // this.nodeProperties = {}\r\n        \r\n    }\r\n\r\n  \r\n\r\n    getNodeSelectionAdornmentTemplate(){\r\n      return  $(go.Adornment, \"Spot\",\r\n                $(go.Panel, \"Auto\",\r\n                    $(go.Shape, { fill: null, stroke: \"dodgerblue\", strokeWidth: 1 }),\r\n                    $(go.Placeholder) // this represents the selected Node\r\n\r\n                ),\r\n                //$(\"TreeExpanderButton\",\r\n                $(go.Panel, \"Vertical\", {\r\n                        name: \"ButtonIcon1\",\r\n                        alignment: new go.Spot(0, 1, -20, 20),\r\n                        alignmentFocus: go.Spot.Center,\r\n                        width: 60,\r\n                        height: 60,\r\n                        isActionable: true,\r\n                        // click: interactions.expandCollapse // this function is defined below\r\n                    },\r\n\r\n                    $(go.Shape, \"Circle\", {\r\n                        fill: \"rgba(1,1,1,0)\",\r\n                        strokeWidth: 0,\r\n                        stroke: \"green\",\r\n                        width: 50,\r\n                        height: 50\r\n                    })\r\n\r\n                )\r\n            ); // end Adornment;\r\n    }\r\n\r\n    nodeResizeAdornmentTemplate () {\r\n      return $(go.Adornment, \"Spot\",\r\n          $(go.Placeholder), // takes size and position of adorned object\r\n          $(go.Shape, \"Circle\", // left resize handle\r\n              {\r\n                  alignment: go.Spot.TopLeft,\r\n                  alignmentFocus: go.Spot.BottomRight,\r\n                  cursor: \"col-resize\",\r\n                  desiredSize: new go.Size(30, 30),\r\n                  fill: \"lightblue\",\r\n                  stroke: \"dodgerblue\"\r\n              }),\r\n          $(go.Shape, \"Circle\", // right resize handle\r\n              {\r\n                  alignment: go.Spot.BottomRight,\r\n                  alignmentFocus: go.Spot.TopLeft,\r\n                  cursor: \"col-resize\",\r\n                  desiredSize: new go.Size(30, 30),\r\n                  fill: \"lightblue\",\r\n                  stroke: \"dodgerblue\"\r\n              })\r\n      )\r\n  }\r\n\r\n    getNodeTemplate(){\r\n      var diagram = this.diagram\r\n      var that = this;\r\n      return $(go.Node, \"Spot\", {\r\n        name: \"NODE\",\r\n        \"_controlExpand\": true,\r\n        layerName: \"default\",\r\n        zOrder: 13,\r\n        locationSpot: go.Spot.Center,\r\n        resizeCellSize: new go.Size(10, 10),\r\n        locationObjectName: \"SHAPE\",\r\n        resizable: true,\r\n        resizeObjectName: \"SHAPE\", // user can resize the Shape\r\n        rotatable: true,\r\n        rotateObjectName: \"SHAPE\", // rotate the Shape without rotating the label\r\n        doubleClick: function (e, node) {\r\n            // interactions.selectText(e, node)\r\n            console.log(node.data)\r\n            if(node.diagram.__trtd.nodeDoubleClickListener){\r\n                node.diagram.__trtd.nodeDoubleClickListener(node)\r\n            }\r\n            \r\n        },\r\n        click: function(e, node) {\r\n            console.log(node.data)\r\n            if(node.diagram.__trtd.nodeClickListener){\r\n                node.diagram.__trtd.nodeClickListener(node)\r\n            }\r\n            // showNodeToolBar(e,node);\r\n        },\r\n        selectable: true,\r\n        movable: true,\r\n        angle: 0,\r\n        //toMaxLinks: 1,\r\n        layoutConditions: go.Part.LayoutStandard,\r\n        //layoutConditions:~go.Part.LayoutAdded,\r\n        // fromLinkable: true, toLinkable: true,\r\n        alignment: go.Spot.Center,\r\n        alignmentFocus: go.Spot.Center,\r\n        resizeAdornmentTemplate: that.nodeResizeAdornmentTemplate(),\r\n        //rotateAdornmentTemplate: nodeRotateAdornmentTemplate,\r\n        contextMenu: diagram.__trtd.nodeContextMenu,\r\n        selectionAdornmentTemplate: that.getNodeSelectionAdornmentTemplate(),\r\n        contextMenu: $(go.Adornment),\r\n      },\r\n        new go.Binding(\"location\", \"loc\", go.Point.parse).makeTwoWay(go.Point.stringify),\r\n        new go.Binding(\"isShadowed\", \"isShadowed\").makeTwoWay(),\r\n        new go.Binding(\"selectable\", \"selectable\").makeTwoWay(),\r\n        new go.Binding(\"movable\", \"movable\").makeTwoWay(),\r\n        new go.Binding(\"resizable\", \"resizable\").makeTwoWay(),\r\n        new go.Binding(\"deletable\", \"deletable\").makeTwoWay(),\r\n        new go.Binding(\"visible\", \"visible\"),\r\n        new go.Binding(\"zOrder\", \"zOrder\"),\r\n        new go.Binding(\"layerName\", \"layerName\", function(v, d) {\r\n            return v ? v : \"\";\r\n        }).makeTwoWay(function(v) {\r\n            return v;\r\n        }),\r\n        $(go.Shape, {\r\n            strokeDashArray: null,\r\n            // strokeDashOffset:10,\r\n            // padding: -1,\r\n            margin: 0,\r\n            name: \"SHAPE\",\r\n            figure: \"Rectangle\",\r\n            fill: \"rgba(0,0,0,0)\",\r\n            // fromLinkable: true,\r\n            // toLinkable: true,\r\n            // cursor: \"pointer\",\r\n            minSize: new go.Size(50, 50),\r\n            strokeWidth: 3,\r\n            stroke: \"RGBA(255,0,0,0.2)\",\r\n            portId: \"\"\r\n\r\n        },\r\n        new go.Binding(\"fill\", \"fill\").makeTwoWay(),\r\n        new go.Binding(\"strokeWidth\", \"strokeWidth\").makeTwoWay(),\r\n        new go.Binding(\"figure\", \"figure\").makeTwoWay(),\r\n        new go.Binding(\"stroke\", \"stroke\").makeTwoWay(),\r\n        new go.Binding(\"desiredSize\", \"desiredSize\", function(v) {\r\n            var size = new go.Size.parse(v)\r\n            return size;\r\n        }).makeTwoWay(function(v) {\r\n            return go.Size.stringify(v)\r\n        }),\r\n        new go.Binding(\"strokeDashArray\", \"strokeDashArray\", function(v) {\r\n            return JSON.parse(v)\r\n        }).makeTwoWay(function(v) {\r\n            return JSON.stringify(v)\r\n        }),\r\n        ),\r\n      )\r\n    }\r\n}\r\n\r\nmodule.exports = shapeNodeTemplate\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/nodeTemplate/shapeNodeTemplate.js","var $ = go.GraphObject.make;\r\nvar Base = require('./base')\r\nvar helpers = require('../helpers/helpers.gojs')\r\n  \r\nclass AutoTextTemplate extends Base {\r\n    constructor(options){\r\n        super(options)\r\n        // this.nodeProperties = {}\r\n        \r\n    }\r\n\r\n    clearBorder(node){\r\n        if(node.data.showBorder){\r\n            // if(node.data.text == \"\"){\r\n                node.findObject(\"textBorder\").visible = false;\r\n            // }\r\n        }\r\n    }\r\n\r\n    makeGeo(data, shape, options) {\r\n      // this is much more efficient than calling go.GraphObject.make:\r\n      var {radiusX=150,radiusY=100} = data\r\n      var geo =  new go.Geometry()\r\n        .add(new go.PathFigure(0, 0)  // start point\r\n          .add(new go.PathSegment(go.PathSegment.SvgArc,\r\n          radiusX*2,0,radiusX, radiusY,0,1,options.clockwiseFlag?1:0\r\n              )\r\n            )\r\n          )\r\n          geo.defaultStretch = go.GraphObject.Fill;\r\n          return geo;\r\n    }\r\n    getNodeTemplate(){\r\n       var properties = {\r\n          figure: \"Rectangle\",\r\n          fill: \"rgba(0,0,0,0)\",\r\n          strokeWidth: 1,\r\n          stroke: \"rgba(0,0,0,0)\",\r\n          fontSize: 15,\r\n          font: \"sans-serif\"\r\n      };\r\n      var that = this\r\n      var diagram = this.diagram\r\n      return $(go.Node, \"Spot\", {\r\n              \"_controlExpand\": true,\r\n              __trtdNode: that,\r\n              layerName: \"Foreground\",\r\n              zOrder: 15,\r\n              movable: true,\r\n              isShadowed :true,\r\n     \r\n            //   shadowBlur : null,\r\n              shadowColor :\"#57617a\",\r\n              shadowOffset:new go.Point(0,0),\r\n            //   copyable: false,\r\n              visible: true,\r\n              locationSpot: go.Spot.Center,\r\n              resizeCellSize: new go.Size(10, 10),\r\n            //   locationObjectName: \"textBorder\",\r\n              selectionObjectName: \"SHAPE\",\r\n              resizable: true,\r\n            //   selectable: false,\r\n            //   clickable: false,\r\n              resizeObjectName: \"SHAPE\", // user can resize the Shape\r\n              rotatable: false,\r\n              location: new go.Point(0, 0),\r\n              //rotateObjectName: \"SHAPE\",  // rotate the Shape without rotating the label\r\n              // doubleClick: selectText,\r\n              toMaxLinks: 1,\r\n              mouseDrop: function(e, obj) {\r\n                var node = obj.part;\r\n                var selnode = e.diagram.selection.first();\r\n\r\n                   // 常变\r\n                   if(selnode.data.category == \"picGroup\" && selnode.data.role == \"cbian\" && node.data.role == \"centerText\"){\r\n                       var oliveNode = e.diagram.findNodeForKey(node.data.olive)\r\n                       if(!oliveNode) return;\r\n                    var it = selnode.findSubGraphParts().iterator;\r\n                    var deleteObjs = []\r\n                    var cbian = {}\r\n                    while (it.next()) {\r\n                        var n = it.value;\r\n                        if(n.data.category == \"autoText\"){\r\n                        if(n.data.locationSpot == \"0 0 0 0\"){\r\n                            cbian.shiText = n.data.text;\r\n                        }\r\n                        if(n.data.locationSpot == \"0 0.5 0 0\"){\r\n                            cbian.centerText = n.data.text;\r\n                        }\r\n                        if(n.data.locationSpot == \"0 1 0 0\"){\r\n                            cbian.xuText = n.data.text;\r\n                        }\r\n                        }\r\n                        deleteObjs.push(n.data)\r\n                    }\r\n                    e.diagram.startTransaction(\"mouseDrop\")\r\n                    // 删除总结图\r\n                    e.diagram.model.removeNodeDataCollection(deleteObjs)\r\n                    var backupSelnode = JSON.parse(JSON.stringify(selnode.data))\r\n                    e.diagram.model.removeNodeData(selnode.data)\r\n        \r\n                    // 添加新橄榄\r\n                    e.diagram.__trtd.addOlive(oliveNode, cbian)\r\n                    e.diagram.commitTransaction(\"mouseDrop\")\r\n                    return;\r\n                }\r\n\r\n            \r\n\r\n                // 互换要点文字,只有云盘里的文字可以互换\r\n                if(selnode.data.subRole == \"coreText\" && node.data.subRole == \"coreText\" || \r\n                    selnode.data.subRole == \"yunpanText\" && node.data.subRole == \"yunpanText\"){\r\n                    e.diagram.model.startTransaction(\"coreTextExchange\")\r\n                    var selOrderX = selnode.data.orderX\r\n                    var selOrderY = selnode.data.orderY\r\n                    var selDimKey = selnode.data.dimKey\r\n                    e.diagram.model.setDataProperty(selnode.data, \"orderX\", node.data.orderX)\r\n                    e.diagram.model.setDataProperty(selnode.data, \"orderY\", node.data.orderY)\r\n                    e.diagram.model.setDataProperty(selnode.data, \"dimKey\", node.data.dimKey)\r\n                    e.diagram.model.setDataProperty(node.data, \"orderX\", selOrderX)\r\n                    e.diagram.model.setDataProperty(node.data, \"orderY\", selOrderY)\r\n                    e.diagram.model.setDataProperty(node.data, \"dimKey\", selDimKey)\r\n                    e.diagram.model.commitTransaction(\"coreTextExchange\")\r\n                }\r\n\r\n                // 云盘互换维度\r\n                if(selnode.data.subRole == \"dimText\" && node.data.subRole == \"dimText\" && \r\n                    selnode.data.category == node.data.category){\r\n                        if(selnode.data.group!= node.data.group) return;\r\n                        if(!selnode.containingGroup) return;\r\n                        if(selnode.containingGroup.data.category != \"yunpanGroup\") return;\r\n                        if(!(selnode.data.dimX == node.data.dimX  || selnode.data.dimY == node.data.dimY )){\r\n                            return;\r\n                        }\r\n\r\n                        e.diagram.model.startTransaction(\"dimTextExchange\")\r\n                        var selOrderX = selnode.data.dimX\r\n                        var selOrderY = selnode.data.dimY\r\n                        var it = node.containingGroup.findSubGraphParts().iterator;\r\n                        var nodeCoreTexts = []\r\n                        var selnodeCoreTexts = []\r\n                        var yunnodeCoreTexts = []\r\n                        var yunselnodeCoreTexts = []\r\n                        var normDim = \"X\"\r\n                        if(selnode.data.dimX == 0){\r\n                            normDim  = \"Y\"\r\n                        }\r\n                        var selOrder = selnode.data[\"dim\"+normDim]\r\n                        var nodeOrder = node.data[\"dim\"+normDim]\r\n                        while (it.next()) {\r\n                            var n = it.value;\r\n                            if(n.data.subRole == \"yunpanText\"){\r\n                                if(n.data[\"order\"+normDim] == nodeOrder){\r\n                                    yunnodeCoreTexts.push(n)\r\n                                }\r\n                                if(n.data[\"order\"+normDim] == selOrder){\r\n                                    yunselnodeCoreTexts.push(n)\r\n                                }\r\n                            }\r\n                        }\r\n                        var tmpX,tmpY;\r\n                        for(var i=0;i<yunnodeCoreTexts.length;i++){\r\n                            e.diagram.model.setDataProperty(yunnodeCoreTexts[i].data, \"order\"+normDim, selOrder)\r\n                        }\r\n                        for(var i=0;i<yunselnodeCoreTexts.length;i++){\r\n                            e.diagram.model.setDataProperty(yunselnodeCoreTexts[i].data, \"order\"+normDim, nodeOrder)\r\n                        }\r\n                        e.diagram.model.setDataProperty(selnode.data, \"dim\"+normDim, nodeOrder)\r\n                        e.diagram.model.setDataProperty(node.data, \"dim\"+normDim, selOrder)\r\n                        e.diagram.model.commitTransaction(\"dimTextExchange\")\r\n                    return;\r\n                    }\r\n\r\n                // 互换维度\r\n                if(selnode.data.subRole == \"dimText\" && node.data.subRole == \"dimText\"){\r\n                    e.diagram.model.startTransaction(\"dimTextExchange\")\r\n                    var selOrderX = selnode.data.dimX\r\n                    var selOrderY = selnode.data.dimY\r\n                    var it = node.containingGroup.findSubGraphParts().iterator;\r\n                    var nodeCoreTexts = []\r\n                    var selnodeCoreTexts = []\r\n                    var yunnodeCoreTexts = []\r\n                    var yunselnodeCoreTexts = []\r\n                    var normDim = \"X\"\r\n                    if(selnode.data.dimX == 0){\r\n                        normDim  = \"Y\"\r\n                    }\r\n                    while (it.next()) {\r\n                        var n = it.value;\r\n                        if(n.data.dimKey == node.data.key){\r\n                            nodeCoreTexts.push(n)\r\n                        }\r\n                        if(n.data.dimKey == selnode.data.key){\r\n                            selnodeCoreTexts.push(n)\r\n                        }\r\n                        if(n.data.subRole == \"yunpanText\"){\r\n                            if(n.data[\"order\"+normDim] == node.data[\"order\"+normDim]){\r\n                                yunnodeCoreTexts.push(n)\r\n                            }\r\n                            if(n.data[\"order\"+normDim] == selnode.data[\"order\"+normDim]){\r\n                                yunselnodeCoreTexts.push(n)\r\n                            }\r\n                        }\r\n                    }\r\n                    console.log(\"selnodeCoreTextsselnodeCoreTextsselnodeCoreTexts\",selnodeCoreTexts.length)\r\n                    var centerOrderX = (node.containingGroup.__yunPointsX.length+1)/2\r\n                    var centerOrderY = (node.containingGroup.__yunPointsY.length+1)/2\r\n\r\n                    if(selnode.data.dimX > centerOrderX){\r\n                        selnodeCoreTexts.sort(function(a,b){\r\n                            return a.data.orderX - b.data.orderX\r\n                        })\r\n                    }\r\n                    if(selnode.data.dimX == centerOrderX){\r\n                        if(selnode.data.dimY > centerOrderY){\r\n                            selnodeCoreTexts.sort(function(a,b){\r\n                                return a.data.orderY - b.data.orderY\r\n                            })\r\n                        }else{\r\n                            selnodeCoreTexts.sort(function(a,b){\r\n                                return b.data.orderY -a.data.orderY\r\n                            })\r\n                        }\r\n                    }\r\n                    if(selnode.data.dimX < centerOrderX){\r\n                        selnodeCoreTexts.sort(function(a,b){\r\n                            return  b.data.orderX - a.data.orderX\r\n                        })\r\n                    }\r\n\r\n                    if(node.data.dimX > centerOrderX){\r\n                        nodeCoreTexts.sort(function(a,b){\r\n                            return a.data.orderX - b.data.orderX\r\n                        })\r\n                    }\r\n                    if(node.data.dimX == centerOrderX){\r\n                        if(node.data.dimY > centerOrderY){\r\n                            nodeCoreTexts.sort(function(a,b){\r\n                                return a.data.orderY - b.data.orderY\r\n                            })\r\n                        }else{\r\n                            nodeCoreTexts.sort(function(a,b){\r\n                                return b.data.orderY -a.data.orderY\r\n                            })\r\n                        }\r\n                    }\r\n                    if(node.data.dimX < centerOrderX){\r\n                        nodeCoreTexts.sort(function(a,b){\r\n                            return  b.data.orderX - a.data.orderX\r\n                        })\r\n                    }\r\n\r\n                    var tmpX,tmpY;\r\n                    for(var i=0;i<selnodeCoreTexts.length;i++){\r\n                        tmpX = selnodeCoreTexts[i].data.orderX;\r\n                        tmpY = selnodeCoreTexts[i].data.orderY;\r\n                        e.diagram.model.setDataProperty(selnodeCoreTexts[i].data, \"orderX\", nodeCoreTexts[i].data.orderX)\r\n                        e.diagram.model.setDataProperty(selnodeCoreTexts[i].data, \"orderY\", nodeCoreTexts[i].data.orderY)\r\n                        e.diagram.model.setDataProperty(nodeCoreTexts[i].data, \"orderX\", tmpX)\r\n                        e.diagram.model.setDataProperty(nodeCoreTexts[i].data, \"orderY\", tmpY)\r\n                    }\r\n                    e.diagram.model.setDataProperty(selnode.data, \"dimX\", node.data.dimX)\r\n                    e.diagram.model.setDataProperty(selnode.data, \"dimY\", node.data.dimY)\r\n                    e.diagram.model.setDataProperty(node.data, \"dimX\", selOrderX)\r\n                    e.diagram.model.setDataProperty(node.data, \"dimY\", selOrderY)\r\n                    e.diagram.model.commitTransaction(\"dimTextExchange\")\r\n                }\r\n\r\n\r\n                \r\n\r\n                if (selnode.data.category != \"wave\") {\r\n                    return;\r\n                }\r\n                if(node.data.role != \"centerText\"){\r\n                    return;\r\n                }\r\n                if(!node){\r\n                  // node.containingGroup.layout.isValidLayout = false\r\n                  return;\r\n                }\r\n                if(selnode.data.group != obj.data.group){\r\n                  return;\r\n                }\r\n                e.diagram.startTransaction(\"mouseDrop\")\r\n                selnode.__oldOrder = selnode.data.order\r\n                e.diagram.model.setDataProperty(selnode.data, \"order\",node.data.order+0.5)\r\n                var xuText = e.diagram.model.findNodeDataForKey(selnode.data.xuText)\r\n                var shiText = e.diagram.model.findNodeDataForKey(selnode.data.shiText)\r\n                e.diagram.model.setDataProperty(shiText, \"order\",node.data.order+0.5)\r\n                e.diagram.model.setDataProperty(xuText, \"order\",node.data.order+0.5)\r\n                // node.containingGroup.layout.isValidLayout = false\r\n                e.diagram.commitTransaction(\"mouseDrop\")\r\n              },\r\n              mouseDragEnter: function(e, obj) {\r\n                var node = obj.part;\r\n                var selnode = e.diagram.selection.first();\r\n                if(!selnode) return;\r\n                if(selnode.data.subRole == \"coreText\" && node.data.subRole == \"coreText\" || \r\n                selnode.data.subRole == \"yunpanText\" && node.data.subRole == \"yunpanText\"){\r\n                    selnode.areaBackground = null\r\n                    node.areaBackground = \"RGB(107,208,137)\"\r\n                }\r\n                if(selnode.data.subRole == \"dimText\" && node.data.subRole == \"dimText\"){\r\n                    selnode.areaBackground = null\r\n                    node.areaBackground = \"RGB(107,208,137)\"\r\n                }\r\n\r\n                if(node.data.role == \"centerText\"){\r\n                    node.layerName = \"Background\"\r\n                }\r\n                // if (!(selnode instanceof go.Node)  || selnode.data.role != \"freeText\"  || selnode.category != \"autoText\" ||selnode.data.subRole != \"coreText\") {\r\n                //     return;\r\n                // }\r\n\r\n\r\n\r\n                // //var sat = node.selectionAdornmentTemplate;\r\n                // //var adorn = sat.copy();\r\n                // //adorn.adornedObject = node;\r\n                // //node.addAdornment(\"dragEnter\", adorn);\r\n    \r\n                // //if (!mayWorkFor(selnode, node)) return;\r\n                // var shape = node.findObject(\"SHAPE\");\r\n                // if (shape) {\r\n                //     shape._prevFill = shape.fill; // remember the original brush\r\n                //     shape.fill = \"darkred\";\r\n                // }\r\n    \r\n            },\r\n            mouseDragLeave: function(e, obj) {\r\n                var node = obj.part;\r\n                var selnode = e.diagram.selection.first();\r\n                // var shape = node.findObject(\"SHAPE\");\r\n                if(selnode.data.subRole == \"coreText\" && node.data.subRole == \"coreText\"|| \r\n                selnode.data.subRole == \"yunpanText\" && node.data.subRole == \"yunpanText\"){\r\n                    node.areaBackground = null\r\n                }\r\n                if(selnode.data.subRole == \"dimText\" && node.data.subRole == \"dimText\"){\r\n                    node.areaBackground = null\r\n                }\r\n                if(node.data.role == \"centerText\"){\r\n                    node.layerName = \"Foreground\"\r\n                }\r\n                //node.removeAdornment(\"dragEnter\");\r\n            },\r\n              selectionChanged: (node)=>{\r\n                console.log(\"selectionChanged\",node)\r\n\r\n                if(node.data.category != \"autoText\" || node.data.orderX ==null \r\n                || node.data.orderY ==null || node.data.role != \"freeText\" || node.data.subRole !=\"coreText\"|| node.data.subRole !=\"yunpanText\"){\r\n                    return;\r\n                }\r\n\r\n                if( !node.containingGroup || node.containingGroup.data.category != \"yunGroup\" || node.containingGroup.data.category != \"yunpanGroup\"){\r\n                    return;\r\n                }\r\n\r\n                if(node.containingGroup.data.beginSpark != \"line\"){\r\n                    return;\r\n                }\r\n                if(node.containingGroup.__yunPointsX && node.containingGroup.__yunPointsY){\r\n                    var centerOrderX = (node.containingGroup.__yunPointsX.length+1)/2\r\n                    var centerOrderY = (node.containingGroup.__yunPointsY.length+1)/2\r\n                    if(node.data.orderX == centerOrderX && node.data.orderY == centerOrderY){\r\n                        // 中心文字不参与变色\r\n                        return;\r\n                    }\r\n                    var orderX = node.data.orderX, orderY=node.data.orderY\r\n                    if(orderX == centerOrderX){\r\n                        orderX = orderY\r\n                    }\r\n                    if(orderY == centerOrderY){\r\n                        orderY = orderX\r\n                    }\r\n                    var shapeStrokes = node.containingGroup.data.shapeStrokes\r\n                    var showShape = node.containingGroup.data.showShape; // 是否显示矩形\r\n                    if(node.isSelected){\r\n                        if(node.containingGroup.data.snapType == \"between\"){\r\n                            var diff = Math.max(Math.abs(node.data.orderX - centerOrderX), Math.abs(node.data.orderY - centerOrderY))+1\r\n                        }else{\r\n                            var diff = Math.max(Math.abs(node.data.orderX - centerOrderX), Math.abs(node.data.orderY - centerOrderY))\r\n                        }\r\n                        console.log(\"diff:\",diff,node.data.orderX,node.data.orderY)\r\n                        var it = node.containingGroup.findSubGraphParts().iterator;\r\n\r\n                        console.log(\"showShape\",showShape)\r\n                        // var beginSpark = node.containingGroup.data.beginSpark; // 是否显示矩形\r\n                        var shape = null;\r\n                        while (it.next()) {\r\n                            var n = it.value;\r\n                            if(n.data.category == \"autoText\" && n.data.orderX !=null \r\n                            && n.data.orderY !=null && n.data.role == \"freeText\" ){\r\n                                n.findObject(\"textBorder\").visible = false;\r\n                                // if((Math.abs(n.data.orderX-centerOrderX) == Math.abs(orderX-centerOrderX) \r\n                                //     || Math.abs(n.data.orderX-centerOrderY) == Math.abs(orderY-centerOrderY)) \r\n                                // && !(Math.abs(n.data.orderX-centerOrderY) < Math.abs(orderY-centerOrderY) \r\n                                //     && Math.abs(n.data.orderX-centerOrderX) < Math.abs(orderX-centerOrderX))){\r\n                                //     n.areaBackground = \"red\"\r\n                                // }\r\n\r\n                                if(Math.abs(n.data.orderX-centerOrderX) == Math.abs(orderX-centerOrderX)\r\n                                && Math.abs(n.data.orderY-centerOrderY) <= Math.abs(orderY-centerOrderY)\r\n                                ||Math.abs(n.data.orderX-centerOrderX) <= Math.abs(orderX-centerOrderX)\r\n                                && Math.abs(n.data.orderY-centerOrderY) == Math.abs(orderY-centerOrderY)){\r\n                                    // n.findObject(\"place\").visible = true;\r\n                                    n.areaBackground = \"white\"\r\n                                    n.zOrder = 999\r\n                                }\r\n\r\n                            }\r\n                            if(n.data.category == \"shape\" && n.data.role == \"background\"){\r\n                                var obj = n.findObject(\"SHAPE\")\r\n                                // console.log(\"dfsdfsdfsdf\", obj)\r\n                                if(n.data.gridWidth == diff*2){\r\n                                    shape = obj;\r\n                                    // if(showShape){\r\n                                        // n.visible = true\r\n                                    // }\r\n                                    if(!obj.__prestroke){\r\n                                        obj.__prestroke = obj.stroke\r\n                                        obj.stroke = \"rgba(255,0,0,0.5)\"\r\n                                    }\r\n                                }else{\r\n                                    if(obj.__prestroke){\r\n                                        obj.stroke = obj.__prestroke\r\n                                        delete obj.__prestroke\r\n                                    }\r\n                                }\r\n                            }\r\n\r\n                        }\r\n                        if(!shape){\r\n                            if(node.containingGroup.data.snapType == \"between\"){\r\n                                var gridWidth = diff*2;\r\n                            }else{\r\n                                var gridWidth = diff*2\r\n                            }\r\n                            console.log(\"addShape\")\r\n                            node.diagram.model.startTransaction(\"addShape\");\r\n                            var shapeData = {\"deletable\":true, \r\n                            \"role\":\"background\", \r\n                            \"category\":\"shape\", \r\n                            // \"loc\":\"-1532.0268216255727 9.121091688849674\", \r\n                            \"loc\":go.Point.stringify(new go.Point(node.containingGroup.__yunPointsX[centerOrderX-1],node.containingGroup.__yunPointsY[centerOrderY-1])), \r\n                            \"movable\":true, \r\n                            \"group\":-19, \r\n                            \"key\": helpers.guid(), \r\n                            \"orderX\":10, \r\n                            \"orderY\":10, \r\n                            \"gridWidth\":gridWidth, \r\n                            \"stroke\":shapeStrokes[diff-1],\r\n                             \"visible\":true, \"strokeDashArray\":\"[0,0]\", \"strokeWidth\":3,\r\n                            //   \"desiredSize\":\"1263 1263\"\r\n                            };\r\n                             node.diagram.model.addNodeData(shapeData)\r\n                            node.diagram.model.commitTransaction(\"addShape\");\r\n                            setTimeout(()=>{\r\n                                var nod = node.diagram.findNodeForKey(shapeData.key)\r\n                                console.log(\"add shape add shape\")\r\n                                if(nod){\r\n                                    // nod.visible = true\r\n                                    var obj = nod.findObject(\"SHAPE\")\r\n                                    if(!obj.__prestroke){\r\n                                        obj.__prestroke = obj.stroke\r\n                                        obj.stroke = \"rgba(255,0,0,0.5)\"\r\n                                    }\r\n                                }\r\n                            },100)\r\n                        }\r\n                    }else{\r\n                        var it = node.containingGroup.findSubGraphParts().iterator;\r\n                        while (it.next()) {\r\n                            var n = it.value;\r\n                            if(n.data.category == \"autoText\" && n.data.orderX !=null \r\n                            && n.data.orderY !=null && n.data.role == \"freeText\" ){\r\n                                // n.findObject(\"textBorder\").visible = false;\r\n                                // if((n.data.orderX == orderX || n.data.orderY == orderY) \r\n                                // && !(n.data.orderX < orderX && n.data.orderY <orderY )){\r\n                                //     n.areaBackground = \"red\"\r\n                                // }\r\n\r\n                                if(Math.abs(n.data.orderX-centerOrderX) == Math.abs(orderX-centerOrderX)\r\n                                && Math.abs(n.data.orderY-centerOrderY) <= Math.abs(orderY-centerOrderY)\r\n                                ||Math.abs(n.data.orderX-centerOrderX) <= Math.abs(orderX-centerOrderX)\r\n                                && Math.abs(n.data.orderY-centerOrderY) == Math.abs(orderY-centerOrderY)){\r\n                                    // n.findObject(\"textBorder\").visible = true;\r\n                                    // n.findObject(\"place\").visible = false;\r\n                                    n.areaBackground = null\r\n                                    n.zOrder = NaN\r\n                                }\r\n\r\n                            }\r\n                            if(n.data.category == \"shape\" && n.data.role == \"background\"){\r\n                                var obj = n.findObject(\"SHAPE\")\r\n                                // console.log(\"dfsdfsdfsdf\", obj)\r\n                                if(!showShape){\r\n                                    // n.visible = false\r\n                                    obj.stroke = \"rgba(255,0,0,0)\"\r\n                                }\r\n                                if(n.data.gridWidth == diff*2){\r\n                                    if(!obj.__prestroke){\r\n                                        obj.__prestroke = obj.stroke\r\n                                        obj.stroke = \"rgba(255,0,0,0.7)\"\r\n\r\n                                    }\r\n                                }else{\r\n                                    \r\n                                    if(obj.__prestroke){\r\n                                        obj.stroke = obj.__prestroke\r\n                                        delete obj.__prestroke\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                }\r\n\r\n              },\r\n              click: (e, node)=>{\r\n                console.log(node.data)\r\n\r\n                // if(node.data.role == \"centerText\"){\r\n                //     var waveNode = node.diagram.findNodeForKey(node.data.olive)\r\n                //     node.layerName = \"Background\"\r\n                //     if(waveNode){\r\n                //         node.diagram.select(waveNode)\r\n                //     }\r\n                // }\r\n                // e.diagram.model.startTransaction(\"click\")\r\n                // e.diagram.model.setDataProperty(node.data, \"dimKey\", -124)\r\n                // e.diagram.model.setDataProperty(node.data,\"dimKey\", -73)\r\n                // e.diagram.model.setDataProperty(node.data,\"dimKey\", -141)\r\n                // e.diagram.model.setDataProperty(node.data,\"dimKey\", -74)\r\n\r\n\r\n\r\n\r\n                // e.diagram.model.setDataProperty(node.data, \"dimKey\", -124)\r\n                // e.diagram.model.setDataProperty(node.data,\"dimKey\", -141)\r\n                // e.diagram.model.setDataProperty(node.data,\"dimKey\", -158)\r\n                // e.diagram.model.setDataProperty(node.data,\"dimKey\", -176)\r\n                // e.diagram.model.setDataProperty(node.data,\"dimKey\", -73)\r\n                // e.diagram.model.setDataProperty(node.data,\"dimKey\", -74)\r\n                // e.diagram.model.setDataProperty(node.data,\"dimKey\", -175)\r\n                // e.diagram.model.setDataProperty(node.data,\"dimKey\", -177)\r\n                // node.data.dimKey = -124\r\n                // node.data.dimKey = -141\r\n                // node.data.dimKey = -158\r\n                // node.data.dimKey = -176\r\n                // node.data.dimKey = -73\r\n                // node.data.dimKey = -74\r\n                // node.data.dimKey = -175\r\n                // node.data.dimKey = -177\r\n                \r\n                // e.diagram.model.commitTransaction(\"click\")\r\n\r\n              },\r\n            //   rotateAdornmentTemplate:  // specify appearance of rotation handle\r\n            //   $(go.Adornment,\r\n            //     { locationSpot: go.Spot.Center },\r\n            //     $(go.Shape, \"BpmnActivityLoop\",\r\n            //       { width: 12, height: 12, cursor: \"pointer\",\r\n            //         background: \"transparent\", stroke: \"dodgerblue\", strokeWidth: 2 })\r\n            //     ),\r\n              mouseOver: function(e, node) {\r\n                // if(node.data.hyperlink){\r\n                //   var textObj = node.findObject('TEXT');\r\n                //   textObj.isUnderline = true;\r\n                // }\r\n                // console.log(\"mouseOvermouseOvermouseOver\")\r\n                if(node.data.showBorder){\r\n                    if(node.data.text == \"\" && (node.data.role == \"xuText\" || node.data.role == \"shiText\" )){\r\n                        node.findObject(\"textBorder\").visible = true;\r\n                    }\r\n                }\r\n                if(node.data.role == \"centerText\"){\r\n                    node.layerName = \"Background\"\r\n                    // node.diagram.model.startTransaction(\"centerText\")\r\n                    // node.diagram.model.setDataProperty(node.data,\"layerName\", \"Background\")\r\n                    // node.diagram.model.commitTransaction(\"centerText\")\r\n                }\r\n                //   node.areaBackground = \"mediumslateblue\"\r\n                // }\r\n\r\n                // if(!node.containingGroup) return;\r\n                // var it = node.containingGroup.findSubGraphParts().iterator;\r\n                // while (it.next()) {\r\n                //     var n = it.value;\r\n                //     if(n.data.category == \"autoText\"){\r\n                //         if(n.data.order == node.data.order){\r\n                //             // locateNode = n;\r\n                //             n.areaBackground = \"mediumslateblue\"\r\n                //         }\r\n                //     }\r\n                // }\r\n                // diagram.__trtd.showNodeRemarkTips(e, node);\r\n                },\r\n            mouseLeave: function(e, node) {\r\n            //   if(node.data.text == \"\"){\r\n                if(node.data.showBorder){\r\n                    // if(node.data.text == \"\"){\r\n                        node.findObject(\"textBorder\").visible = false;\r\n                    // }\r\n                }\r\n                if(node.data.role == \"centerText\"){\r\n                    node.layerName = \"Foreground\"\r\n                    // node.diagram.model.startTransaction(\"centerText\")\r\n                    // node.diagram.model.setDataProperty(node.data,\"layerName\", \"Foreground\")\r\n                    // node.diagram.model.commitTransaction(\"centerText\")\r\n                }\r\n                // node.areaBackground = null\r\n            //   }\r\n            },\r\n            //   layoutConditions: go.Part.LayoutStandard,\r\n              layoutConditions: go.Part.LayoutStandard & go.Part.LayoutRemoved & go.Part.LayoutAdded & ~go.Part.LayoutNodeSized,\r\n              //layoutConditions:~go.Part.LayoutAdded,\r\n              // fromLinkable: true, toLinkable: true,\r\n              alignment: go.Spot.Center,\r\n              alignmentFocus: go.Spot.Center,\r\n              contextMenu: $(go.Adornment),\r\n              resizeAdornmentTemplate:  // specify what resize handles there are and how they look\r\n              $(go.Adornment, \"Spot\",\r\n                $(go.Placeholder),  // takes size and position of adorned object\r\n            //     $(go.Shape, \"Circle\",  // left resize handle\r\n            //       { alignment: go.Spot.Left, cursor: \"col-resize\",\r\n            //         desiredSize: new go.Size(9, 9), fill: \"lightblue\", stroke: \"dodgerblue\" }),\r\n            //     $(go.Shape, \"Circle\",  // right resize handle\r\n            //       { alignment: go.Spot.Right, cursor: \"col-resize\",\r\n            //         desiredSize: new go.Size(9, 9), fill: \"lightblue\", stroke: \"dodgerblue\" }),\r\n            //   $(go.Shape, \"Circle\",  // right resize handle\r\n            //   { alignment: go.Spot.Top, cursor: \"col-resize\",\r\n            //   desiredSize: new go.Size(9, 9), fill: \"lightblue\", stroke: \"dodgerblue\" }),\r\n              $(go.Shape, \"Circle\",  // right resize handle\r\n              { alignment: go.Spot.BottomRight, cursor: \"col-resize\",\r\n              desiredSize: new go.Size(15, 15), fill: \"lightblue\", stroke: \"dodgerblue\" }),\r\n                // $(go.TextBlock, // show the width as text\r\n                //   { alignment: go.Spot.Top, alignmentFocus: new go.Spot(0.5, 1, 0, -2),\r\n                //     stroke: \"dodgerblue\" },\r\n                //   new go.Binding(\"text\", \"adornedObject\",\r\n                //                  function(shp) { return shp.naturalBounds.width.toFixed(0); })\r\n                //       .ofObject())\r\n              ),\r\n              doubleClick: function (e, node){\r\n                  e.diagram.__trtd.selectText(e, node)\r\n              }\r\n\r\n              // selectionAdornmentTemplate: nodeSelectionAdornmentTemplate,\r\n          },\r\n          new go.Binding(\"locationSpot\", \"locationSpot\", function(v){\r\n              return go.Spot.parse(v)\r\n          }).makeTwoWay(function(v){\r\n              return go.Spot.stringify(v)\r\n          }),\r\n          new go.Binding(\"type\", \"type\", function(v){\r\n              return go.Panel[v]\r\n          }),\r\n          new go.Binding(\"visible\", \"visible\").makeTwoWay(),\r\n          new go.Binding(\"deletable\", \"deletable\").makeTwoWay(),\r\n          new go.Binding(\"movable\", \"movable\").makeTwoWay(),\r\n          new go.Binding(\"rotatable\", \"rotatable\").makeTwoWay(),\r\n          new go.Binding(\"location\", \"loc\", go.Point.parse).makeTwoWay(go.Point.stringify),\r\n          new go.Binding(\"isShadowed\", \"isShadowed\").makeTwoWay(),\r\n          new go.Binding(\"angle\", \"angle\").makeTwoWay(),\r\n          new go.Binding(\"selectable\", \"selectable\").makeTwoWay(),\r\n          new go.Binding(\"copyable\", \"copyable\").makeTwoWay(),\r\n          new go.Binding(\"layerName\", \"layerName\", function(v, d) {\r\n              return v ? v : \"\";\r\n          }),\r\n          $(go.Shape, {\r\n            strokeDashArray: null,\r\n            opacity:0.7,\r\n            stretch: go.GraphObject.UniformToFill,\r\n            // locationSpot: go.Spot.Center,  // the location is the center of the Shape\r\n            // strokeDashOffset:10,\r\n            name: \"SHAPE\",\r\n            figure: \"Circle\",\r\n            fill: \"rgba(0,255,0,1)\",\r\n            fromLinkable: false,\r\n            toLinkable: false,\r\n            width:100,\r\n            height:100,\r\n            cursor: \"pointer\",\r\n            minSize: new go.Size(50, 50),\r\n            // maxSize: new go.Size(100, 100),\r\n            strokeWidth: 1,\r\n            stroke: \"black\",\r\n            portId: \"\"\r\n\r\n        },\r\n        new go.Binding(\"strokeDashArray\", \"shiStrokeDashArray\", function(v) {\r\n            return JSON.parse(v)\r\n        }).makeTwoWay(function(v) {\r\n            return JSON.stringify(v)\r\n        }),\r\n        new go.Binding(\"fill\", \"fill\", function(v, obj) {\r\n            return v instanceof go.Brush ? v.color : v;\r\n        }).makeTwoWay(),\r\n        // new go.Binding(\"fill\", \"isSelected\", function(s, obj) { return s ? \"red\" : obj.part.data.color; }).ofObject()),\r\n        new go.Binding(\"desiredSize\", \"desiredSize\", function(v, d) {\r\n            // console.log(\"vd m\", v, d )\r\n            // if(!v) return d.part.findObject(\"SHAPE\").measuredBounds.size;\r\n            return go.Size.parse(v)\r\n        }).makeTwoWay(function(v) {\r\n            console.log(\"sizesizesizesize\")\r\n            // var size = new go.Size(v.width, v.height)\r\n            return go.Size.stringify(v)\r\n        }),\r\n        new go.Binding(\"stroke\", \"stroke\", function(v) {\r\n            return v instanceof go.Brush ? v.stroke : v;\r\n        }).makeTwoWay(),\r\n\r\n        new go.Binding(\"strokeWidth\", \"strokeWidth\", function(d) {\r\n            return d;\r\n        }).makeTwoWay(function(d) {\r\n            return d;\r\n        }),\r\n        new go.Binding(\"figure\", \"figure\").makeTwoWay(), \r\n        new go.Binding(\"opacity\", \"opacity\").makeTwoWay(), \r\n        // {\r\n        //     figure: properties.figure,\r\n        //     fill: properties.fill,\r\n        //     strokeWidth: properties.strokeWidth,\r\n        //     stroke: properties.stroke\r\n        // }\r\n    ),\r\n    $(\r\n        go.Shape,\r\n        {\r\n          geometryString: \"M540.5696 556.81024a81.8176 81.8176 0 0 1-53.0432-19.47648l-225.4848-191.52896a81.92 81.92 0 1 1 106.0864-124.86656l172.4416 146.47296 172.4416-146.47296a81.92 81.92 0 0 1 106.0864 124.86656l-225.4848 191.52896a81.7152 81.7152 0 0 1-53.0432 19.47648z m53.06368 246.23104l225.44384-191.52896a81.92 81.92 0 1 0-106.0864-124.84608l-172.40064 146.47296-172.48256-146.47296a81.92 81.92 0 1 0-106.04544 124.86656l225.52576 191.52896a81.7152 81.7152 0 0 0 53.00224 19.47648c18.88256 0 37.76512-6.49216 53.0432-19.49696z\",\r\n            // \"M16 0c-8.837 0-16 7.163-16 16s7.163 16 16 16 16-7.163 16-16-7.163-16-16-16zM16 29c-7.18 0-13-5.82-13-13s5.82-13 13-13 13 5.82 13 13-5.82 13-13 13zM12 8c-1.105 0-2 0.895-2 2s0.895 2 2 2h5.172l-8.586 8.586c-0.781 0.781-0.781 2.047 0 2.829 0.39 0.39 0.902 0.586 1.414 0.586s1.024-0.195 1.414-0.586l8.586-8.586v5.172c0 1.105 0.895 2 2 2s2-0.895 2-2v-12h-12z\",\r\n          visible: false,\r\n          name: \"figure\",\r\n          cursor: \"pointer\",\r\n          alignment: go.Spot.TopRight,\r\n          alignmentFocus: go.Spot.TopRight,\r\n          width: 14,\r\n          height: 14,\r\n          fill: \"green\",\r\n          toolTip: $(\r\n            \"ToolTip\",\r\n            $(\r\n              go.Panel,\r\n              \"Vertical\",\r\n              $(\r\n                go.Picture,\r\n                new go.Binding(\"source\", \"src\", function(s) {\r\n                  return \"images/\" + s + \".png\";\r\n                })\r\n              ),\r\n              $(go.TextBlock, {text:\"进入子盘\", margin: 3 })\r\n            )\r\n          ),\r\n          click: function(e) {\r\n            console.log(\"click figure\", e);\r\n            var node = e.targetObject.part;\r\n            e.diagram.__trtd.openFigure({\r\n              figure: node.data.figure,\r\n              title: node.data.text,\r\n              key: node.data.key,\r\n              node: node\r\n            });\r\n          }\r\n        },\r\n        // new go.Binding(\"geometry\", \"geo\", function(){\r\n\r\n        // })),\r\n        new go.Binding(\"visible\", \"figure\", function(v) {\r\n          console.log(\"----------------------\");\r\n          if (v) {\r\n            return true;\r\n          } else {\r\n            return false;\r\n          }\r\n        })\r\n      ),\r\n    // $(go.Shape, {\r\n    //         name: \"SHAPE_Back\",\r\n    //         figure: \"Rectangle\",\r\n    //         fill: \"rgba(128,128,128,0)\",\r\n    //         fromLinkable: true,\r\n    //         toLinkable: true,\r\n    //         strokeWidth: 0\r\n    //     },\r\n    //     new go.Binding(\"desiredSize\", \"width\", function(v) {\r\n    //         var va = (v / 2) * Math.sqrt(2);\r\n    //         return new go.Size(va - 3, va - 3);\r\n    //     }).ofObject(\"SHAPE\")\r\n    // ),\r\n          $(go.TextBlock, {\r\n                  name: \"TEXT\",\r\n                  alignment: new go.Spot(0.5, 0.5),\r\n                  font: \"18px 'Microsoft YaHei'\",\r\n                  editable: false,\r\n                //   areaBackground:\"gray\",\r\n                  //margin: 3, editable: true,\r\n                //   background:\"yellow\",\r\n                  stroke: \"black\",\r\n                  isMultiline: true,\r\n                  overflow: go.TextBlock.OverflowClip,\r\n                  wrap: go.TextBlock.WrapDesiredSize,\r\n                  textAlign: \"center\",\r\n                  verticalAlignment: go.Spot.Center,\r\n                  spacingAbove: 4,\r\n                  spacingBelow: 4,\r\n                  portId: \"TEXT\",\r\n                  margin:0,\r\n                  maxSize:new go.Size(600,NaN),\r\n                  minSize: new go.Size(10,10),\r\n                  stretch: go.GraphObject.UniformToFill,\r\n                  textEdited: function(textBlock,oldv,newv){\r\n\r\n                    // // if(textBlock.part.containingGroup.data.textAngle == \"horizontal\"){\r\n                    //   var centerText = textBlock.part.diagram.model.findNodeDataForKey(textBlock.part.data.centerText)\r\n                    //   if(centerText){\r\n                    //     console.log(\"centerTextcenterTextcenterTextcenterText\")\r\n                    var part = textBlock.part\r\n                    if(newv.trim() == \"\" &&(part.data.role == \"shiText\" || part.data.role == \"xuText\")){\r\n                        textBlock.part.diagram.model.startTransaction(\"text\")\r\n                        textBlock.part.diagram.model.setDataProperty(textBlock.part.data,\"nloc\", null)\r\n                        textBlock.part.diagram.model.commitTransaction(\"text\")\r\n                    }\r\n                    //   }\r\n                    // //   return;\r\n                    // // }\r\n                    // setTimeout(function(){\r\n                    //   console.log(\"textEditedtextEditedtextEdited\",textBlock.lineCount)\r\n                    //   if(!textBlock.text) return;\r\n                    //   if(textBlock.text && textBlock.text.trim() == \"\") return;\r\n                    //   if(textBlock.lineCount %2 != 0){\r\n                    //     if(newv[newv.length-1] == \"\\n\"){\r\n                    //       textBlock.text = newv.substring(0, newv.length-1)\r\n                    //       return;\r\n                    //     }\r\n                    //     textBlock.text = newv+\"\\n\"\r\n                    //   }\r\n                    // },100)\r\n                    \r\n                    // var enterCount = 0;\r\n                    if(textBlock.part.data.role && textBlock.part.data.role.indexOf(\"labelText\") > -1 ){\r\n                        textBlock.part.containingGroup.layout.isValidLayout = false\r\n                    }\r\n                    // for(var i=0;i<newv.length;i++){\r\n                      \r\n                    // }\r\n                    // textBlock.part.updateTargetBindings()\r\n    \r\n                    // if(textBlock.lineCount %2 != 0){\r\n                    //   if(newv[newv.length-1] == \"\\n\"){\r\n                    //     textBlock.text = newv.substring(0, newv.length-1)\r\n                    //     return;\r\n                    //   }\r\n                    //   textBlock.text = newv+\"\\n\"\r\n                    // }\r\n                  },\r\n              },\r\n              new go.Binding(\"background\", \"background\", function(v) {\r\n                  return v;\r\n              }).makeTwoWay(),\r\n              new go.Binding(\"areaBackground\", \"areaBackground\", function(v) {\r\n                  return v;\r\n              }).makeTwoWay(),\r\n              new go.Binding(\"textAlign\", \"textAlign\", function(v) {\r\n                  return v;\r\n              }).makeTwoWay(),\r\n              new go.Binding(\"spacingAbove\", \"spacingline\", function(v) {\r\n                  return helpers.tdTransToNum(v, 4);\r\n              }).makeTwoWay(),\r\n              new go.Binding(\"spacingBelow\", \"spacingline\", function(v) {\r\n                  return helpers.tdTransToNum(v, 4);\r\n              }).makeTwoWay(),\r\n              new go.Binding(\"maxSize\",\"\",function(data,d,m){\r\n                  // console.log(\"maxSize\",v,m,d)\r\n                  var width = NaN\r\n                  var height = NaN\r\n                  if(data.width){\r\n                      width = data.width\r\n                  }\r\n                  if(data.height){\r\n                      height = data.height\r\n                  }\r\n\r\n                  return new go.Size(width,height)\r\n              }),\r\n              new go.Binding(\"minSize\",\"minSize\",function(v){\r\n                  // console.log(\"maxSize\",v,m,d)\r\n\r\n                  return go.Size.parse(v)\r\n              }),\r\n              // new go.Binding(\"width\", \"width\", function(v) {\r\n              //     return v;\r\n              // }).makeTwoWay(),\r\n              // new go.Binding(\"height\", \"height\", function(v) {\r\n              //     return v;\r\n              // }).makeTwoWay(),\r\n              // new go.Binding(\"height\", \"height\", function (v) {\r\n              //   return v;\r\n              // }).ofObject(\"SHAPE\"),\r\n              new go.Binding(\"text\", \"text\").makeTwoWay(),\r\n              new go.Binding(\"stroke\", \"textStroke\").makeTwoWay(),\r\n              new go.Binding(\"font\", \"font\").makeTwoWay()\r\n          ),\r\n        //   $(go.Panel,\"Vertical\",\r\n        //     {alignment: go.Spot.Left,\r\n        //     alignmentFocus: go.Spot.Right,\r\n        //     },\r\n        //     $(go.Shape,{\r\n        //         name:\"ICON\",\r\n        //         width:16,\r\n        //         height:16,\r\n        //         visible: false,\r\n        //         click: function(e){\r\n        //             console.log(\"icon click\")\r\n        //         },\r\n        //         figure:\"Circle\",\r\n        //         fill:\"red\",\r\n        //         strokeWidth:0,\r\n        //         margin: 3\r\n        //     },\r\n    \r\n        //     // new go.Binding(\"location\", \"loc\", go.Point.parse).makeTwoWay(go.Point.stringify),\r\n        //     new go.Binding(\"figure\", \"figure\").makeTwoWay(),\r\n        //     new go.Binding(\"visible\", \"iconVisible\").makeTwoWay(),\r\n        //     new go.Binding(\"fill\", \"fill\", function(v, obj) {\r\n        //         return v\r\n        //     }).makeTwoWay()\r\n        //     )\r\n        // ),\r\n    //     $(go.Shape,\"Rectangle\",{\r\n    //         name: \"textBorder\",\r\n    //         stroke: \"green\",\r\n    //         strokeWidth: 3,\r\n    //         strokeDashArray: [10, 5],\r\n    //         visible:false,\r\n    //         fill:\"transparent\",\r\n    //         alignment: go.Spot.Center,\r\n    //         // alignmentFocus: go.Spot.Right,\r\n    //         width:100,\r\n    //         height:270, \r\n    //     },\r\n    //     new go.Binding(\"stroke\",\"textStroke\"),\r\n    //     new go.Binding(\"desiredSize\",\"\", function(v,d){\r\n    //         // console.log(\"vvvvvvvvvvvvv,\",v,d)\r\n    //         if(!helpers.checkPhone()){\r\n    //             // return new go.Size(Math.max(d.part.naturalBounds.width,100)-3, Math.max(d.part.naturalBounds.height,100)-3);\r\n    //             return new go.Size(d.part.naturalBounds.width-3, d.part.naturalBounds.height-3);\r\n    //         }\r\n    //         var olive = d.part.diagram.findNodeForKey(d.part.data.olive)\r\n    //         return new go.Size(olive.naturalBounds.width-3, olive.naturalBounds.height);\r\n    //         // return new go.Size(d.part.actualBounds.width-3, d.part.actualBounds.height-3);\r\n    //     })\r\n    // ),\r\n        // $(go.Shape,\"Circle\",{\r\n        //     name: \"place\",\r\n        //     stroke: \"red\",\r\n        //     strokeWidth: 1,\r\n        //     strokeDashArray: null,\r\n        //     visible:false,\r\n        //     fill:\"transparent\",\r\n        //     alignment: go.Spot.Center,\r\n        //     // alignmentFocus: go.Spot.Right,\r\n        //     width:50,\r\n        //     height:50, \r\n        // },\r\n        // new go.Binding(\"stroke\",\"placeStroke\"),\r\n        // )\r\n      )\r\n    }\r\n}\r\n\r\nmodule.exports = AutoTextTemplate\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/nodeTemplate/shapeTextNodeTemplate.js","/**\r\n * 天盘连接线的布局\r\n */\r\n'use strict';\r\n\r\n// import * as go from 'gojs';\r\n\r\n// let menus = require('../templates/menu');\r\nvar $ = go.GraphObject.make;\r\n\r\nfunction SmoothLink() {\r\n    go.Link.call(this);\r\n}\r\n\r\nfunction computeOffset(newR, newStartAngle) {\r\n    //console.log(\"newStartAngle:\"+newStartAngle);\r\n    var ctl2, dy, dx; //需要调整\r\n    if (newStartAngle >= 0 && newStartAngle <= 90) {\r\n        dy = newR * Math.sin(newStartAngle * Math.PI / 180);\r\n        dx = newR * Math.cos(newStartAngle * Math.PI / 180);\r\n        return [dx, dy];\r\n    } else if (newStartAngle > 90 && newStartAngle <= 180) {\r\n        dy = newR * Math.sin((180 - newStartAngle) * Math.PI / 180);\r\n        dx = newR * Math.cos((180 - newStartAngle) * Math.PI / 180);\r\n        return [-dx, dy];\r\n    } else if (newStartAngle > 180 && newStartAngle <= 270) {\r\n        dy = newR * Math.sin((newStartAngle - 180) * Math.PI / 180);\r\n        dx = newR * Math.cos((newStartAngle - 180) * Math.PI / 180);\r\n        return [-dx, -dy];\r\n    } else if (newStartAngle > 270 && newStartAngle <= 360) {\r\n        dy = newR * Math.sin((360 - newStartAngle) * Math.PI / 180);\r\n        dx = newR * Math.cos((360 - newStartAngle) * Math.PI / 180);\r\n        return [dx, -dy];\r\n    }\r\n}\r\n\r\n// var tdCurrentTheme = menus.tdCurrentTheme;\r\n// 根据根节点与两个节点的位置计算出圆心在AB中垂线与 过根节点且平行于AB的射线的交点 D\r\nfunction computeNewCenter(O, A, B) {\r\n    var C = new go.Point((A.x + B.x) / 2, (A.y + B.y) / 2); //AB的中点\r\n    if (O.equals(A)) {\r\n        var locD = C.copy();\r\n        var r = Math.sqrt(C.distanceSquaredPoint(A));\r\n        var direction = (A.directionPoint(B) + 90) % 360;\r\n        var distance = r * 0.15;\r\n        var offset = computeOffset(distance, direction);\r\n        locD.offset(offset[0], offset[1]); //圆心坐标\r\n        r = Math.sqrt(locD.distanceSquaredPoint(A));\r\n        return [r, locD.x, locD.y];\r\n    }\r\n    var OC = Math.sqrt(O.distanceSquaredPoint(C));\r\n    var directionOC = O.directionPoint(C);\r\n    var directionFlagOD = O.distanceSquaredPoint(B) < O.distanceSquaredPoint(A);\r\n    if (directionFlagOD) {\r\n        var directionOD = B.directionPoint(A); //OD平行于AB\r\n    } else {\r\n        var directionOD = A.directionPoint(B); //OD平行于AB\r\n    }\r\n\r\n    var angleDOC = Math.abs(directionOC - directionOD);\r\n    if (angleDOC > 90 && angleDOC < 180) {\r\n        angleDOC = 180 - angleDOC;\r\n    } else if (angleDOC >= 180) {\r\n        angleDOC = 360 - angleDOC; //角doc是润角\r\n    }\r\n    // if(O.distanceSquaredPoint(B) > O.distanceSquaredPoint(A)){\r\n    //   directionOD = B.directionPoint(A);\r\n    // }\r\n    var OD = OC * Math.cos(angleDOC * Math.PI / 180);\r\n    var offset = computeOffset(OD, directionOD);\r\n    var locD = O.copy();\r\n    locD.offset(offset[0], offset[1]); //圆心坐标\r\n    var r = Math.sqrt(locD.distanceSquaredPoint(A));\r\n    return [r, locD.x, locD.y];\r\n    // return locD;\r\n}\r\n\r\ngo.Diagram.inherit(SmoothLink, go.Link);\r\n\r\nSmoothLink.prototype.makeGeometry = function() {\r\n    // get the Geometry created by the standard behavior\r\n    var geo = go.Link.prototype.makeGeometry.call(this);\r\n    if (geo.type !== go.Geometry.Path || geo.figures.length === 0) return geo;\r\n    return geo;\r\n};\r\n\r\n/** @override */\r\nSmoothLink.prototype.computePoints = function() {\r\n\r\n    var myDiagram = this.diagram;\r\n\r\n    var nodes = [];\r\n    if (this.fromNode == null || this.toNode == null) return true;\r\n    if (this.fromNode.location.equals(this.toNode.location)) {\r\n        return false;\r\n    }\r\n    var start = this.fromNode.location.copy();\r\n    var end = this.toNode.location.copy();\r\n\r\n    if (!start.isReal() || !end.isReal()) {\r\n        return true;\r\n    }\r\n    var A = start;\r\n    var B = end;\r\n    var O = myDiagram.findNodeForKey(this.toNode.data.parent);\r\n    if (!O) return true;\r\n    O = O.location;\r\n    var cent = computeNewCenter(O, A, B);\r\n\r\n\r\n\r\n    var centInfo = cent;\r\n    var centorPoint = new go.Point(centInfo[1], centInfo[2]);\r\n\r\n    this.micenter = centorPoint;\r\n    var rcenter = centInfo[0];\r\n    var rstart = this.fromNode.actualBounds.width / 2;\r\n    var rend = this.toNode.actualBounds.width / 2;\r\n    var center2mid = (2 * rcenter * rcenter - rstart * rstart) / (2 * rcenter); //大圆到大圆与开始节点交点中点的距离，然后求出夹角\r\n    var af = Math.acos(center2mid / rcenter) * 180 / Math.PI;\r\n\r\n    var geo = new go.Geometry(go.Geometry.Line);\r\n    geo.startX = centorPoint.x;\r\n    geo.startY = centorPoint.y;\r\n    geo.endX = this.fromNode.location.x;\r\n    geo.endY = this.fromNode.location.y;\r\n    if(!af){\r\n        af = 0;\r\n    }\r\n    geo.rotate(af, centorPoint.x, centorPoint.y); //相对圆心旋转，顺时针\r\n    var start2 = new go.Point(geo.endX, geo.endY);\r\n    // var start2 = new go.Point(this.fromNode.location.x, this.fromNode.location.y);\r\n\r\n    center2mid = (2 * rcenter * rcenter - rend * rend) / (2 * rcenter); //大圆到大圆与开始节点交点中点的距离，然后求出夹角\r\n    af = Math.acos(center2mid / rcenter) * 180 / Math.PI;\r\n    geo.endX = this.toNode.location.x;\r\n    geo.endY = this.toNode.location.y;\r\n    if(!af){\r\n        af = 0;\r\n    }\r\n    geo.rotate(-af, centorPoint.x, centorPoint.y); //相对圆心旋转,逆时针\r\n    var end2 = new go.Point(geo.endX, geo.endY);\r\n\r\n    //console.log(Math.abs(centorPoint.directionPoint(start2) - centorPoint.directionPoint(end2)));\r\n    //var result = computeControlPoint(start,midPoint,end,centInfo);\r\n    var result = computeControlPoint(start2, null, end2, centInfo);\r\n\r\n    var ctl1 = result[0];\r\n    var ctl2 = result[1];\r\n\r\n    this.clearPoints();\r\n    if (isNaN(start2.x) || isNaN(start2.y)) {\r\n        start2 = this.fromNode.location.copy();\r\n    }\r\n    if (isNaN(end2.x) || isNaN(end2.y)) {\r\n        end2 = this.toNode.location.copy();\r\n    }\r\n    //start1.rotate();\r\n    this.points.add(start2);\r\n    this.points.add(result[0]);\r\n    this.points.add(result[1]);\r\n    this.points.add(end2);\r\n\r\n    var oust = \"\";\r\n    return true;\r\n};\r\n\r\n\r\nfunction computeControlPoint(p1, p2, p3) {\r\n\r\n    var result;\r\n    result = arguments[3] ? arguments[3] : triangleCircle(p1, p2, p3);\r\n    var radius = result[0];\r\n    var cent = new go.Point(result[1], result[2]);\r\n\r\n    //起始节点的弧度\r\n    var sweep = Math.abs(cent.directionPoint(p1) - cent.directionPoint(p3));\r\n    sweep = sweep > 180 ? 360 - sweep : sweep;\r\n    //console.log(\"sweep:\"+sweep);\r\n    var newR = radius / Math.cos(sweep / 3 * Math.PI / 180);\r\n    var geo = new go.Geometry(go.Geometry.Line);\r\n    geo.startX = cent.x;\r\n    geo.startY = cent.y;\r\n    geo.endX = p1.x;\r\n    geo.endY = p1.y;\r\n    geo.rotate(sweep / 3, cent.x, cent.y); //相对圆心旋转3分之1弧度\r\n    var newStartAngle = cent.direction(geo.endX, geo.endY);\r\n    var ctl1;\r\n    result = computeOffset(newR, newStartAngle);\r\n    ctl1 = cent.copy().offset(result[0], result[1]);\r\n\r\n    geo.rotate(sweep / 3, cent.x, cent.y); //相对圆心旋转3分之1弧度\r\n    newStartAngle = cent.direction(geo.endX, geo.endY);\r\n\r\n    var ctl2; //需要调整\r\n    result = computeOffset(newR, newStartAngle);\r\n    ctl2 = cent.copy().offset(result[0], result[1]);\r\n\r\n    return [ctl1, ctl2];\r\n}\r\n\r\n\r\nfunction createTianpanLink(diagram) {\r\n    return $(SmoothLink, {\r\n            curve: go.Link.Bezier,\r\n            layerName: \"\",\r\n            isTreeLink: true,\r\n            //curve: go.Link.Bezier,\r\n            curviness: 30,\r\n            //smoothness:1,\r\n            adjusting: go.Link.Stretch,\r\n            relinkableFrom: true,\r\n            relinkableTo: true,\r\n            reshapable: true,\r\n            layoutConditions: go.Part.LayoutStandard & ~go.Part.LayoutNodeSized,\r\n            mouseDragEnter: function(e, obj) {\r\n                var link = obj.part;\r\n                var shape = link.findObject(\"SHAPE\");\r\n                shape._preStoke = shape.stroke;\r\n                shape.stroke = \"darkred\";\r\n                shape._preStrokeWidth = shape.strokeWidth;\r\n                shape.strokeWidth = 5;\r\n            },\r\n            mouseDragLeave: function(e, obj) {\r\n                var link = obj.part;\r\n                var shape = link.findObject(\"SHAPE\");\r\n                shape.stroke = shape._preStoke;\r\n                shape.strokeWidth = shape._preStrokeWidth;\r\n            },\r\n            mouseDrop: function(e, obj) {\r\n                var link = obj.part;\r\n                var draggedNode = e.diagram.selection.first();\r\n                if (!draggedNode instanceof go.Node) {\r\n                    return;\r\n                }\r\n                if (!draggedNode instanceof go.Group) {\r\n                    return;\r\n                }\r\n                if (draggedNode.data.key == 1) {\r\n                    return;\r\n                }\r\n                var fromNode = link.fromNode,\r\n                    toNode = link.toNode;\r\n                //disconnectFromTreeStructure(draggedNode);\r\n                if (toNode.data.parent == fromNode.data.key) {\r\n                    e.diagram.__trtd.setNodeAsChildren(draggedNode, fromNode);\r\n                } else {\r\n                    e.diagram.__trtd.setNodeAsSibling(draggedNode, fromNode);\r\n                }\r\n            }\r\n        }, // negate curviness if not clockwise\r\n        $(go.Shape, {\r\n                name: \"SHAPE\",\r\n                stroke: \"#767678\",\r\n                strokeWidth: 3\r\n            },\r\n            new go.Binding(\"strokeWidth\", \"strokeWidth\").makeTwoWay(),\r\n            new go.Binding(\"stroke\", \"color\").makeTwoWay(),\r\n            new go.Binding(\"strokeDashArray\", \"strokeDashArray\", function(v) {\r\n                try {\r\n                    var val = [parseInt(v.split(\" \")[0]), parseInt(v.split(\" \")[1])];\r\n                } catch (e) {\r\n                    var val = null;\r\n                }\r\n                return val;\r\n            }).makeTwoWay(function(v) {\r\n                return v[0] + \" \" + v[1];\r\n            }) //保留，设置边线样式\r\n\r\n        ),\r\n        $(go.Shape, {\r\n                name: \"Arrow\",\r\n                toArrow: \"Triangle\",\r\n                stroke: \"#767678\",\r\n                strokeWidth: 3\r\n            },\r\n            new go.Binding(\"strokeWidth\", \"strokeWidth\"),\r\n            new go.Binding(\"fill\", \"color\"),\r\n            new go.Binding(\"stroke\", \"color\"),\r\n            new go.Binding(\"toArrow\", \"toArrow\")\r\n        ),\r\n        new go.Binding(\"curviness\", \"curviness\").makeTwoWay(),\r\n        new go.Binding(\"points\").makeTwoWay()\r\n\r\n    );\r\n}\r\n\r\n\r\nmodule.exports = createTianpanLink\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/linkTemplate/createTianpanLink.js","// require('./core/core.controller')(Trtd);\r\n// import * as go from 'gojs';\r\nvar helpers = require('../helpers/helpers.gojs')\r\nlet lang = require('../assets/localization');\r\nvar createPictureSingleNodeTemplate = require('../nodeTemplate/createPictureSingleNodeTemplate')\r\n// var createPictureNodeTemplate = require('../nodeTemplate/createPictureNodeTemplate')\r\nvar TRTD_BASE = require('./trtd').Trtd\r\n\r\nvar $ = go.GraphObject.make;\r\n\r\nclass Trtd extends TRTD_BASE {\r\n\tconstructor(div, config){\r\n       \r\n        super(div, config)\r\n\t\tthis.config = config;\r\n\t\tthis.modelChangedListener = config.modelChangedListener;\r\n\t\tthis.type = config.type;\r\n\t\tthis.diagram = {};\r\n        this.model = config.model;\r\n        // this.tpid = config.tpid;\r\n        this.readOnly = false;// 控制是否只读\r\n        if(config.readOnly != null){\r\n            this.readOnly = config.readOnly\r\n        }\r\n        this.initDiagramBase(div, config); // 基类初始化diagram\r\n\t\t// 初始化diagram\r\n        this.diagram = this.initDiagram(div, config);\r\n        // this.diagram.__trtd = this;\r\n\t\tthis.initListener();\r\n\t\t// Then you will need to construct a Model (usually a GraphLinksModel) for the Diagram, initialize its data by setting its Model.nodeDataArray and other properties, and then set the diagram's model.\r\n        if(this.model){\r\n            this.initModel();\r\n        }\r\n\t}\r\n/**\r\n * method 初始化diagram\r\n * @param {*} div \r\n * @param {*} config \r\n */\r\n\tinitDiagram(div, config){\r\n        var myDiagram = this.diagram;\r\n        \r\n        var defaultConfig = {\r\n            // initialAutoScale: go.Diagram.Uniform,\r\n            // initialContentAlignment: go.Spot.Center,\r\n            // initialDocumentSpot: go.Spot.Center,\r\n            // initialViewportSpot: go.Spot.Center,\r\n            \"undoManager.isEnabled\": true,\r\n            // \"toolManager.hoverDelay\": 100,\r\n            // \"toolManager.mouseWheelBehavior\": go.ToolManager.WheelZoom,\r\n            // maxScale: 5.0,\r\n            // minScale: 0.05,\r\n            allowMove: true,\r\n            // allowDrop: true,\r\n            // hasVerticalScrollbar: false,\r\n            // hasHorizontalScrollbar: false,\r\n            // \"draggingTool.isCopyEnabled\": false,\r\n            // BackgroundSingleClicked: function(e) {\r\n            // \tcloseToolbarWindow();\r\n            // },\r\n            \"animationManager.isEnabled\": false,\r\n            // scrollMode: go.Diagram.InfiniteScroll,\r\n            // validCycle: go.Diagram.CycleDestinationTree,\r\n            // scrollMargin: 50,\r\n            // \"ModelChanged\": function(e){\r\n            //     that.saveModel(e)\r\n            // },\r\n            // \"TextEdited\": onTextChanged,\r\n        };\r\n        var diagramConfig = Object.assign(defaultConfig, config.diagramConfig);\r\n        this.diagram.setProperties(diagramConfig);\r\n       \r\n        \r\n        this.addNodeTemplate();\r\n        // this.customMenu();\r\n        // this.addDiagramContextMenu();\r\n        // this.addLinkTemplate();\r\n        // this.addGroupTemplate();\r\n        return myDiagram\r\n    }\r\n    getTdData(){\r\n        return this.diagram.model.toJson()\r\n    }\r\n    // 以下两个方法控制菜单显示\r\n    getDefaultCustomMenuDivStr(){\r\n        return `\r\n        <ul>\r\n            <li trtd_action=\"addFollowerGround\"><a class=\"i18n\" data-lang=\"insertsl\">增加同级节点</a></li>\r\n            <li trtd_action=\"addNewCircle\"><a class=\"i18n\" data-lang=\"icn\">增加子节点</a></li>\r\n            <li trtd_action=\"apiDeleteSelection\"><a class=\"i18n\" data-lang=\"remove\">删除</a></li>\r\n        </ul>\r\n        `\r\n    }\r\n    getShowContextMenus(node){\r\n        if(node){\r\n            return \"addFollowerGround,\" + \"addNewCircle,\"+\"apiDeleteSelection\";\r\n        }else{\r\n            return \"none\"\r\n        }\r\n    }\r\n\r\n    addTextNode(message){\r\n        console.log('eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee:');\r\n        var myDiagram = this.diagram;\r\n        myDiagram.startTransaction();\r\n        var text = { text: message||lang.trans('blankText'), category: 'text' };\r\n        text.loc = go.Point.stringify(myDiagram.lastInput.documentPoint);\r\n        myDiagram.model.addNodeData(text);\r\n        myDiagram.commitTransaction()\r\n    }\r\n\r\n\r\n    /**\r\n     * method 初始化model\r\n     */\r\n\tinitModel(model){\r\n        if(model){\r\n            this.model = model;\r\n        }\r\n        console.log('initModel')\r\n        var tmpModel = go.Model.fromJson(this.model);\r\n        if(tmpModel.modelData.currentType == 'dipan'){\r\n            tmpModel.nodeDataArray = tmpModel.nodeDataArray.filter((d)=>{\r\n                if(!d.isGroup){\r\n                    delete d.group\r\n                    return true;\r\n                }\r\n            })\r\n            // tmpModel.nodeDataArray = \r\n            tmpModel.linkDataArray=[]\r\n        }\r\n\r\n        this.diagram.layout.isInitial = false;\r\n        //randomUrl(tmpModel);\r\n        tmpModel.modelData.type = this.type\r\n        // tmpModel.modelData.version = Trtd.version\r\n        this.diagram.model = tmpModel;\r\n        // configModel(myDiagram.model);\r\n        this.groundLayout(this.diagram);\r\n        this.diagram.updateAllTargetBindings();\r\n    }\r\n    loadModel(model){\r\n       \r\n        this.initModel(model)\r\n    }\r\n    /**\r\n     * method: 初始化监听方法\r\n     */\r\n\tinitListener(){\r\n\t\tconsole.log('initListener')\r\n    }\r\n    /**\r\n     * 添加节点模板\r\n     */\r\n\r\n   \r\n    addNodeTemplate(){\r\n\r\n        var that = this;\r\n        var myDiagram = this.diagram\r\n      \r\n        var globalProperties = this.tdGetModelData(null, myDiagram.model,myDiagram); //获取所有全局属性到一个对象中,从localstorage中\r\n        //var layerThickness = myDiagram.model.modelData.layerThickness;\r\n        var layerThickness = parseInt(globalProperties['layerThickness']);\r\n        console.log(layerThickness)\r\n        \r\n        var tdDipanTextAngle = globalProperties['tdDipanTextAngle'];\r\n        console.log(tdDipanTextAngle)\r\n        myDiagram.nodeTemplateMap.add(\"dipan\", this.createDipanTemplate(layerThickness,tdDipanTextAngle));\r\n        myDiagram.nodeTemplateMap.add(\"Root\", this.getDipanRootTemplate(layerThickness));\r\n        myDiagram.nodeTemplateMap.add(\"3\", createPictureSingleNodeTemplate(this.diagram));\r\n        // myDiagram.nodeTemplateMap.add(\"4\", createPictureNodeTemplate(this.diagram));\r\n        // myDiagram.nodeTemplateMap.add(\"text\", this.createTextNodeTemplate());\r\n        \r\n    }\r\n\r\n    \r\n    createTextNodeTemplate () {\r\n    var properties = {\r\n        figure: \"Rectangle\",\r\n        fill: \"rgba(0,0,0,0)\",\r\n        strokeWidth: 1,\r\n        stroke: \"rgba(0,0,0,0)\",\r\n        fontSize: 15,\r\n        font: \"sans-serif\"\r\n    };\r\n    return $(go.Node, \"Spot\", {\r\n            \"_controlExpand\": true,\r\n            layerName: \"Foreground\",\r\n            locationSpot: go.Spot.Center,\r\n            resizeCellSize: new go.Size(10, 10),\r\n            locationObjectName: \"SHAPE\",\r\n            resizable: true,\r\n            resizeObjectName: \"SHAPE\", // user can resize the Shape\r\n            rotatable: true,\r\n            location: new go.Point(0, 0),\r\n            //rotateObjectName: \"SHAPE\",  // rotate the Shape without rotating the label\r\n            // doubleClick: selectText,\r\n            toMaxLinks: 1,\r\n            layoutConditions: go.Part.LayoutStandard,\r\n            //layoutConditions:~go.Part.LayoutAdded,\r\n            // fromLinkable: true, toLinkable: true,\r\n            alignment: go.Spot.Center,\r\n            alignmentFocus: go.Spot.Center,\r\n            contextMenu: this.getNodeContextMenu\r\n            // selectionAdornmentTemplate: nodeSelectionAdornmentTemplate,\r\n        },\r\n        new go.Binding(\"location\", \"loc\", go.Point.parse).makeTwoWay(go.Point.stringify),\r\n        new go.Binding(\"isShadowed\", \"isShadowed\").makeTwoWay(),\r\n        new go.Binding(\"angle\", \"angle\").makeTwoWay(),\r\n        new go.Binding(\"selectable\", \"selectable\").makeTwoWay(),\r\n        new go.Binding(\"layerName\", \"layerName\", function(v, d) {\r\n            return v ? v : \"\";\r\n        }).makeTwoWay(function(v) {\r\n            return v;\r\n        }),\r\n        $(go.Shape, {\r\n                strokeDashArray: null,\r\n                // strokeDashOffset:10,\r\n                name: \"SHAPE\",\r\n                figure: \"Rectangle\",\r\n                fill: \"rgba(0,0,0,0)\",\r\n                fromLinkable: true,\r\n                toLinkable: true,\r\n                cursor: \"pointer\",\r\n                minSize: new go.Size(50, 50),\r\n                strokeWidth: 2,\r\n                stroke: \"rgba(0,0,0,0)\",\r\n                portId: \"\",\r\n                width:150\r\n            },\r\n            new go.Binding(\"strokeDashArray\", \"strokeDashArray\", function(v) {\r\n                return [v.split()[0], v.split()[1]];\r\n            }).makeTwoWay(function(v) {\r\n                return v[0] + \" \" + v[1];\r\n            }), //保留，设置边线样式\r\n            new go.Binding(\"fill\", \"fill\", function(v, obj) {\r\n                return v instanceof go.Brush ? v.color : v;\r\n            }).makeTwoWay(),\r\n            // new go.Binding(\"fill\", \"isSelected\", function(s, obj) { return s ? \"red\" : obj.part.data.color; }).ofObject()),\r\n            new go.Binding(\"width\", \"width\", function(v) {\r\n                //alert(v);\r\n                return v;\r\n            }).makeTwoWay(function(v) {\r\n                return v;\r\n            }),\r\n            new go.Binding(\"height\", \"height\", function(v) {\r\n                //alert(v);\r\n                return v;\r\n            }).makeTwoWay(function(v) {\r\n                return v;\r\n            }),\r\n            new go.Binding(\"stroke\", \"stroke\", function(v) {\r\n                return v instanceof go.Brush ? v.stroke : v;\r\n            }).makeTwoWay(),\r\n            new go.Binding(\"strokeWidth\", \"strokeWidth\", function(d) {\r\n                return d;\r\n            }).makeTwoWay(function(d) {\r\n                return d;\r\n            }),\r\n            new go.Binding(\"figure\", \"figure\").makeTwoWay(), {\r\n                figure: properties.figure,\r\n                fill: properties.fill,\r\n                strokeWidth: properties.strokeWidth,\r\n                stroke: properties.stroke\r\n            }\r\n        ),\r\n        $(go.Shape, {\r\n                name: \"SHAPE_Back\",\r\n                figure: \"Rectangle\",\r\n                fill: \"rgba(0,0,0,0)\",\r\n                // fromLinkable: true,\r\n                // toLinkable: true,\r\n                strokeWidth: 0\r\n            },\r\n            new go.Binding(\"width\", \"width\", function(v) {\r\n                return v;\r\n            }).ofObject(\"SHAPE\"),\r\n            new go.Binding(\"height\", \"height\", function(v) {\r\n                return v;\r\n            }).ofObject(\"SHAPE\")\r\n        ),\r\n        $(go.TextBlock, {\r\n                name: \"TEXT\",\r\n                alignment: new go.Spot(0.5, 0.5),\r\n                font: \"bold \" + 22 + \"px 幼圆\",\r\n                editable: true,\r\n                //margin: 3, editable: true,\r\n                stroke: \"black\",\r\n                isMultiline: true,\r\n                overflow: go.TextBlock.OverflowClip,\r\n                wrap: go.TextBlock.WrapDesiredSize,\r\n                textAlign: \"center\",\r\n                spacingAbove: 4,\r\n                spacingBelow: 4,\r\n                portId: \"TEXT\",\r\n                stretch: go.GraphObject.Fill\r\n            },\r\n            new go.Binding(\"textAlign\", \"textAlign\", function(v) {\r\n                return _.contains(['start', 'center', 'end'], v) ? v : \"center\";\r\n            }).makeTwoWay(),\r\n            new go.Binding(\"spacingAbove\", \"spacingline\", function(v) {\r\n                return helpers.tdTransToNum(v, 4);\r\n            }).makeTwoWay(),\r\n            new go.Binding(\"spacingBelow\", \"spacingline\", function(v) {\r\n                return helpers.tdTransToNum(v, 4);\r\n            }).makeTwoWay(),\r\n            new go.Binding(\"width\", \"width\", function(v) {\r\n                return v;\r\n            }).ofObject(\"SHAPE\"),\r\n            // new go.Binding(\"height\", \"height\", function (v) {\r\n            //   return v;\r\n            // }).ofObject(\"SHAPE\"),\r\n            new go.Binding(\"text\", \"text\").makeTwoWay(),\r\n            new go.Binding(\"stroke\", \"textStroke\").makeTwoWay(),\r\n            new go.Binding(\"font\", \"font\").makeTwoWay()\r\n        )\r\n    );\r\n}\r\n\r\n    /**\r\n     * method 地盘模板\r\n     * @param {*} layerThickness \r\n     * @param {*} tdDipanTextAngle \r\n     */\r\n    createDipanTemplate (layerThickness, tdDipanTextAngle) {\r\n        console.log(layerThickness)\r\n        if (layerThickness == null) {\r\n            var layerThickness = 100;\r\n        }\r\n\r\n        if (tdDipanTextAngle == null) {\r\n            var tdDipanTextAngle = \"zhengli\";\r\n        }\r\n        var that = this;\r\n        var $ = go.GraphObject.make;\r\n        return $(go.Node, \"Spot\", {\r\n                locationSpot: go.Spot.Center, // Node.location is the center of the TextBlock\r\n                locationObjectName: \"MAIN\",\r\n                selectionObjectName: \"SHAPE\",\r\n                click: function(e, node) {\r\n                    console.log(node.data)\r\n                    if(that.readOnly){\r\n                        if(node.diagram.__trtd.nodeClickListener){\r\n                            node.diagram.__trtd.nodeClickListener(node);\r\n                        }\r\n                    }\r\n                \r\n                },\r\n                contextMenu: this.getNodeContextMenu,\r\n                movable: false,\r\n                doubleClick: function(e){\r\n                    console.log(\"that.readOnlythat.readOnly\",that.readOnly)\r\n                    if(that.readOnly){\r\n                        return;\r\n                    }\r\n\r\n                    var myDiagram = e.diagram;\r\n                    var node = myDiagram.selection.first();\r\n                    // if(node.data.istemp) return;\r\n                    if (!node) return;\r\n                    // removeNodeRemarkTips();\r\n                    var tb = myDiagram.selection.first().findObject('TEXT');\r\n                    if (tb) myDiagram.commandHandler.editTextBlock(tb);\r\n                    helpers.simulateEnterWithAlt(e);\r\n                    changeTemp2normal(myDiagram)\r\n                },\r\n                selectionAdorned:!that.readOnly,\r\n                selectionAdornmentTemplate: \r\n                     $(go.Adornment, \"Spot\",\r\n                        $(go.Panel, \"Auto\",\r\n                            $(go.Shape, { fill: 'rgba(255,232,211,0.1)', stroke: \"blue\", strokeWidth: 2 }),\r\n                            $(go.Placeholder) // this represents the selected Node\r\n                        ),\r\n                        // the button to create a \"next\" node, at the top-right corner\r\n                        $(\"Button\", {\r\n                                alignment: go.Spot.RightCenter,\r\n                                alignmentFocus: go.Spot.Bottom,\r\n                                width: 30,\r\n                                height: 30,\r\n                \r\n                                click: (e) => {\r\n                                    console.log(e.diagram.selection.first().data)\r\n                                    console.log(e.diagram.selection.first().data.parent)\r\n                                    var node = e.diagram.selection.first();\r\n                                    if(node.data.parent){\r\n                                        var parentNode = node.diagram.findNodeForKey(node.data.parent);\r\n                                        if(parentNode.data.istemp){\r\n                                            return\r\n                                        }\r\n                                    }\r\n                                    that.addNewCircle(e) // this function is defined below\r\n                                } \r\n                                \r\n                            },\r\n                            $(go.Shape, \"PlusLine\", { desiredSize: new go.Size(15, 15) })\r\n                        ),\r\n                        // end button\r\n                        $(\"Button\", {\r\n                                alignment: go.Spot.BottomCenter,\r\n                                width: 30,\r\n                                height: 30,\r\n                                //visible:function(d){\r\n                                //    return !isUndefined(d.istemp)&&d.istemp?false:true;\r\n                                //},\r\n                                click: function(e) {\r\n                                    console.log(e)\r\n                                    console.log(e.diagram.selection.first().data)\r\n                                    //判断临时节点\r\n                                    if(e.diagram.selection.first().data.istemp){\r\n                                        return\r\n                                    }\r\n                                    \r\n                                    that.addFollowerGround(e);\r\n                                    } // this function is defined below\r\n                                    \r\n                            },\r\n                            $(go.Shape, \"PlusLine\", { desiredSize: new go.Size(15, 15) })\r\n                        ) \r\n                        //备注\r\n                    ),\r\n                mouseOver: function(e, node) {\r\n                },\r\n                mouseLeave: function(e, node) {\r\n                    //removeNodeRemarkTips();\r\n                },\r\n                mouseDragEnter: function(e, node, prev) {\r\n                    return;\r\n                },\r\n                mouseDragLeave: function(e, node, next) {\r\n                    return;\r\n                },\r\n                mouseDrop: function(e, node) {\r\n                    return;\r\n                }\r\n            },\r\n            new go.Binding(\"angle\", \"dangle\"),\r\n            new go.Binding(\"location\", \"loc\", go.Point.parse).makeTwoWay(go.Point.stringify),\r\n            new go.Binding(\"selectionAdorned\", \"selectionAdorned\", function(v, d) {\r\n                console.log(v)\r\n                return v ? v : \"\";\r\n            }).makeTwoWay(function(v) {\r\n                return v;\r\n            }),\r\n            $(go.Shape, {\r\n                    figure: \"Rectangle\",\r\n                    name: \"MAIN\",\r\n                    fill: \"rgba(255,255,0,0)\", // default value, but also data-bound\r\n                    strokeWidth: 0,\r\n                    stroke: \"red\",\r\n                    height: 1\r\n                },\r\n                new go.Binding('width', 'layerThickness', function(data) {\r\n                    return parseInt(data || 100);\r\n                })\r\n            ),\r\n            $(go.Shape, {\r\n                    name: \"SHAPE\",\r\n                    fill: \"lightgray\", // default value, but also data-bound\r\n                    strokeWidth: 2,\r\n                    margin: 5,\r\n                    stroke: \"green\",\r\n                    alignment: go.Spot.Right,\r\n                    alignmentFocus: go.Spot.Right,\r\n                    portId: \"\" // so links will go to the shape, not the whole node\r\n                },\r\n                new go.Binding(\"geometry\", \"\", function(data) {\r\n                return makeAnnularWedge(data);\r\n                }),\r\n                new go.Binding(\"fill\", \"fill\", function(v) {\r\n                    return v instanceof go.Brush ? v.color : v;\r\n                }).makeTwoWay(),\r\n                new go.Binding(\"stroke\", \"stroke\", function(v) {\r\n                    return v instanceof go.Brush ? v.stroke : v;\r\n                }).makeTwoWay(),\r\n                new go.Binding(\"strokeWidth\", \"strokeWidth\", function(d) {\r\n                    return d;\r\n                }).makeTwoWay(function(d) {\r\n                    return d;\r\n                })\r\n            ),\r\n            $(go.Shape, {\r\n                    figure: \"Rectangle\",\r\n                    name: \"LOCATE\",\r\n                    fill: \"rgba(0,255,0,0)\", // default value, but also data-bound\r\n                    strokeWidth: 0,\r\n                    stroke: \"green\",\r\n                    height: 20,\r\n                    alignment: go.Spot.Right,\r\n                    alignmentFocus: go.Spot.Right\r\n                },\r\n                new go.Binding('width', 'layerThickness', function(data) {\r\n                    return parseInt(data || 100);\r\n                })\r\n            ),\r\n            $(go.TextBlock, {\r\n                    name: \"TEXT\",\r\n                    isMultiline: true,\r\n                    click: function(e, node) {\r\n                \r\n                    },\r\n                    textAlign: \"center\",\r\n                    editable: false,\r\n                    wrap: go.TextBlock.WrapDesiredSize,\r\n                    overflow: go.TextBlock.OverflowClip,\r\n                    spacingAbove: 4,\r\n                    spacingBelow: 4,\r\n                    font: \"bold 15px 幼圆\"\r\n                },\r\n                new go.Binding(\"text\").makeTwoWay(),\r\n                new go.Binding(\"textAlign\", \"textAlign\", function(v) {\r\n                    return _.contains(['start', 'center', 'end'], v) ? v : \"center\";\r\n                }).makeTwoWay(),\r\n                new go.Binding(\"spacingAbove\", \"spacingline\", function(v) {\r\n                    return helpers.tdTransToNum(v, 4);\r\n                }).makeTwoWay(),\r\n                new go.Binding(\"spacingBelow\", \"spacingline\", function(v) {\r\n                    return helpers.tdTransToNum(v, 4);\r\n                }).makeTwoWay(),\r\n                new go.Binding(\"stroke\", \"textStroke\").makeTwoWay(),\r\n                new go.Binding(\"font\", \"font\").makeTwoWay(),\r\n                new go.Binding(\"width\", \"\", function(data, obj) {\r\n                    var tdDipanTextAngle = data.tdDipanTextAngle || 'xuanzhuan';\r\n                    var layerThickness = parseInt(data.layerThickness || 100);\r\n                    var maxWidth = data.sweep / 180 * data.dradius * Math.PI * 0.7;\r\n                    if (tdDipanTextAngle == 'fangshe') {\r\n                        return maxWidth;\r\n                    }\r\n                    if (tdDipanTextAngle == 'zhengli') {\r\n                        return layerThickness * 0.7;\r\n                    }\r\n                    if (tdDipanTextAngle == 'xuanzhuan') {\r\n                        return layerThickness * 0.7;\r\n                    }\r\n                }),\r\n\r\n                new go.Binding(\"angle\", \"textAngle\").makeTwoWay(),\r\n                new go.Binding('alignment', 'tdDipanTextAngle', function(data) {\r\n                    var tdDipanTextAngle = data || 'xuanzhuan';\r\n                    var alignment = go.Spot.Center;\r\n                    switch (tdDipanTextAngle) {\r\n                        case 'xuanzhuan':\r\n                            alignment = go.Spot.Center;\r\n                            break;\r\n                        case 'fangshe':\r\n                            alignment = go.Spot.Left;\r\n                            break;\r\n                        case 'zhengli':\r\n                            alignment = go.Spot.Center;\r\n                            break;\r\n                    }\r\n                    return alignment;\r\n                }),\r\n                new go.Binding('alignmentFocus', 'tdDipanTextAngle', function(data) {\r\n                    var tdDipanTextAngle = data || 'xuanzhuan';\r\n                    var alignmentFocus = go.Spot.Center;\r\n                    switch (tdDipanTextAngle) {\r\n                        case 'xuanzhuan':\r\n                            alignmentFocus = go.Spot.Center;\r\n                            break;\r\n                        case 'fangshe':\r\n                            alignmentFocus = go.Spot.Left;\r\n                            break;\r\n                        case 'zhengli':\r\n                            alignmentFocus = go.Spot.Center;\r\n                            break;\r\n                    }\r\n                    return alignmentFocus;\r\n                })\r\n            \r\n            )\r\n        );\r\n\r\n\r\n \r\n    }\r\n\r\n    getDipanRootTemplate(layerThickness){\r\n        var that = this;\r\n        return $(go.Node, \"Auto\", {\r\n            locationSpot: go.Spot.Center,\r\n            selectionAdorned: true,\r\n            movable: false,\r\n            \r\n            click: function(e, node) {\r\n                //showNodeToolBar(e, node);\r\n                //showTempToolBar(e, node);\r\n                console.log(node.data)\r\n                if(that.readOnly){\r\n                    if(node.diagram.__trtd.nodeClickListener){\r\n                        node.diagram.__trtd.nodeClickListener(node);\r\n                    }\r\n                }\r\n                \r\n            },\r\n            doubleClick: function(e){\r\n                if(that.readOnly){\r\n                    return;\r\n                }\r\n                var myDiagram = e.diagram;\r\n                var node = myDiagram.selection.first();\r\n                if (!node) return;\r\n                // removeNodeRemarkTips();\r\n                var tb = myDiagram.selection.first().findObject('TEXT');\r\n                if (tb) myDiagram.commandHandler.editTextBlock(tb);\r\n                helpers.simulateEnterWithAlt(e);\r\n            },\r\n         \r\n            mouseOver: function(e, node) {\r\n                //showNodeRemarkTips(e, node);\r\n             \r\n            },\r\n            mouseLeave: function(e, node) {\r\n                //removeNodeRemarkTips();\r\n                //removeNodeToolBar();\r\n            },\r\n            selectionAdorned:!that.readOnly,\r\n            selectionAdornmentTemplate: $(go.Adornment, \"Spot\",\r\n                        $(go.Panel, \"Auto\",\r\n                            $(go.Shape, { fill: 'rgba(255,232,211,0.1)', stroke: \"blue\", strokeWidth: 2 }),\r\n                            $(go.Placeholder) // this represents the selected Node\r\n                        ),\r\n                        // the button to create a \"next\" node, at the top-right corner\r\n                        $(\"Button\", {\r\n                                alignment: go.Spot.RightCenter,\r\n                                alignmentFocus: go.Spot.Bottom,\r\n                                width: 30,\r\n                                height: 30,\r\n                \r\n                                click: (e) => {\r\n                                    console.log(e.diagram.selection.first().data)\r\n                                    console.log(e.diagram.selection.first().data.parent)\r\n                                    var node = e.diagram.selection.first();\r\n                                    if(node.data.parent){\r\n                                        var parentNode = node.diagram.findNodeForKey(node.data.parent);\r\n                                        if(parentNode.data.istemp){\r\n                                            return\r\n                                        }\r\n                                    }\r\n                                    this.addNewCircle(e) // this function is defined below\r\n                                } \r\n                                \r\n                            },\r\n                            $(go.Shape, \"PlusLine\", { desiredSize: new go.Size(15, 15) })\r\n                        ),\r\n                        //备注\r\n                \r\n                    ),\r\n            // contextMenu: $(go.Adornment, \"Vertical\",\r\n            //     $(\"ContextMenuButton\",\r\n            //         $(go.TextBlock, \"更换地盘背景\"), {\r\n            //             click: function(e, obj) {\r\n            //                 var backImage = tdDipanBackgroundImages[Math.floor(Math.random() * tdDipanBackgroundImages.length)];\r\n            //                 setSourceOfPicture(backImage, 1); //更换主题时，如果是保留颜色，则刷新背景图片\r\n            //             }\r\n            //         }),\r\n            //     $(\"ContextMenuButton\",\r\n            //         $(go.TextBlock, \"移除地盘背景\"), {\r\n            //             click: function(e, obj) {\r\n            //                 var backnodeData = null;\r\n            //                 var rootKey = obj.part.data.key;\r\n            //                 myDiagram.model.nodeDataArray.forEach(function(d) {\r\n            //                     if (d.rootKey == rootKey && d.category == '3') {\r\n            //                         backnodeData = d;\r\n            //                         return;\r\n            //                     }\r\n            //                 })\r\n            //                 if (backnodeData) {\r\n            //                     myDiagram.model.startTransaction();\r\n            //                     myDiagram.model.removeNodeData(backnodeData);\r\n            //                     myDiagram.model.commitTransaction();\r\n            //                 }\r\n            //             }\r\n            //         })\r\n            // ),\r\n            \r\n        \r\n            location: new go.Point(0, 0)\r\n        },\r\n        new go.Binding(\"width\", \"layerThickness\", function(v) {\r\n            return v ? v * 2 : 100 * 2;\r\n        }),\r\n        new go.Binding(\"height\", \"layerThickness\", function(v) {\r\n            return v ? v * 2 : 100 * 2;\r\n        }),\r\n        $(go.Shape, \"Circle\", {\r\n                name: \"SHAPE\",\r\n                fill: \"#FFBFBF\",\r\n                strokeWidth: 0,\r\n                // width: 100,\r\n                // height: 100,\r\n                spot1: go.Spot.TopLeft,\r\n                spot2: go.Spot.BottomRight\r\n            },\r\n            new go.Binding(\"fill\", \"fill\", function(v) {\r\n                return v instanceof go.Brush ? v.color : v;\r\n            }).makeTwoWay(),\r\n            new go.Binding(\"stroke\", \"stroke\", function(v) {\r\n                return v instanceof go.Brush ? v.stroke : v;\r\n            }).makeTwoWay(),\r\n        \r\n            new go.Binding(\"strokeWidth\", \"strokeWidth\", function(d) {\r\n                return d;\r\n            }).makeTwoWay(function(d) {\r\n                return d;\r\n            })\r\n        ),\r\n        $(go.TextBlock, {\r\n                name: \"TEXT\",\r\n                font: \"bold 23px 幼圆\",\r\n                textAlign: \"center\",\r\n                editable: false,\r\n                spacingAbove: 4,\r\n                isMultiline: true,\r\n                \r\n                spacingBelow: 4\r\n            },\r\n            new go.Binding(\"textAlign\", \"textAlign\", function(v) {\r\n                return _.contains(['start', 'center', 'end'], v) ? v : \"center\";\r\n            }).makeTwoWay(),\r\n            new go.Binding(\"spacingAbove\", \"spacingline\", function(v) {\r\n                return helpers.tdTransToNum(v, 4);\r\n            }).makeTwoWay(),\r\n            new go.Binding(\"spacingBelow\", \"spacingline\", function(v) {\r\n                return helpers.tdTransToNum(v, 4);\r\n            }).makeTwoWay(),\r\n            new go.Binding(\"text\").makeTwoWay(),\r\n            new go.Binding(\"stroke\", \"textStroke\").makeTwoWay(),\r\n            new go.Binding(\"width\", \"width\").makeTwoWay(),\r\n            new go.Binding(\"font\", \"font\").makeTwoWay(),\r\n            new go.Binding(\"angle\", \"textAngle\").makeTwoWay()\r\n        )\r\n        );\r\n        }\r\n\r\n    tdGetModelData1(name,model,myDiagram1) { //获取盘的model.modelData中的全局属性 \r\n        var defaultVal = {\r\n            currentType: 'dipan',\r\n            currentThemeID: 0,\r\n            layerThickness: 100,\r\n            splitLayer: 1,\r\n            layout: 'inner',\r\n            tdDipanTextAngle: 'xuanzhuan'\r\n        };\r\n        return Object.assign(defaultVal,model.modelData)\r\n    }\r\n    tdGetModelData(name,model) { //获取盘的model.modelData中的全局属性 \r\n        // if(myDiagram1){\r\n        //     myDiagram = myDiagram1\r\n        // }\r\n        var myDiagram = this.diagram\r\n        var  model = myDiagram.model\r\n        var defaultVal = {\r\n            currentType: 'tianpan',\r\n            currentThemeID: 0,\r\n            layerThickness: 100,\r\n            splitLayer: 1,\r\n            layout: 'inner',\r\n            tdDipanTextAngle: 'xuanzhuan'\r\n        };\r\n        console.log(\"getRootNodeData1111111111111111111111\")\r\n        var root = getRootNodeData(model);\r\n        if (typeof(name) != 'undefined' && name != null) { //返回指定的属性值\r\n            if (root) {\r\n                return root[name] || model.modelData[name] || defaultVal[name]\r\n            } else {\r\n                return model.modelData[name] || defaultVal[name];\r\n            }\r\n        }\r\n        //返回所有属性值\r\n        if (root) {\r\n            for (var key in defaultVal) {\r\n                if (root[key]) {\r\n                    defaultVal[key] = root[key];\r\n                } else {\r\n                    if (model.modelData && model.modelData[key]) {\r\n                        defaultVal[key] = model.modelData[key];\r\n                    }\r\n                }\r\n            }\r\n        } else {\r\n            for (var key in defaultVal) {\r\n                if (model.modelData && model.modelData[key]) {\r\n                    defaultVal[key] = model.modelData[key];\r\n                }\r\n            }\r\n        }\r\n        return defaultVal;\r\n    }\r\n    deleteSelection () {\r\n        // console.log(\"====================deleteSelection 优化\")\r\n        var myDiagram = this.diagram;\r\n        var node = myDiagram.selection.first();\r\n        console.log(`删除节点 ${JSON.stringify(node.data)}`)\r\n        console.log(node.data)\r\n        var cmd = myDiagram.commandHandler;\r\n        // if (node instanceof go.Group) {\r\n        //     return;\r\n        // }\r\n        var locateNode = null;\r\n    \r\n        if (!node || node.data.istemp) {\r\n            return;\r\n        }\r\n        if (node.data.key == 1 || node.data.key == 'g_1' || node.data.key == 'Root') {\r\n            //删除根节点触发清空节点\r\n            //clearAllNodesGround();\r\n             \r\n            return;\r\n        }\r\n    \r\n        myDiagram.model.startTransaction('all');\r\n        myDiagram.model.startTransaction('level1');\r\n    \r\n        // myDiagram.model.startTransaction(\"sub\");\r\n        myDiagram.model.setDataProperty(node.data, \"istemp\", true); //防止节点呗删除访问属性失败\r\n        // console.log(myDiagram.model.nodeDataArray)\r\n        this.deleteNode(node,myDiagram);\r\n        //removeOneNode(node); //zyy\r\n        \r\n        // console.log(myDiagram.model.nodeDataArray)\r\n        // myDiagram.model.commitTransaction(\"sub\");\r\n    \r\n        //统一删除节点\r\n        var maxCircle = this.getMaxCircle(myDiagram);\r\n        //找到所有要删除的节点\r\n        var nodes = [];\r\n        myDiagram.model.nodeDataArray.forEach(function(n) {\r\n            if (n.level > maxCircle) {//zyy 增加n.group!==\"g_1\"\r\n                nodes.push(n);\r\n            }\r\n        });\r\n        // myDiagram.model.startTransaction(\"deleteTempNode\");\r\n        //删除所有只有临时节点的层级\r\n        myDiagram.model.removeNodeDataCollection(nodes);\r\n        //删除最外圈节点的isparent属性\r\n        myDiagram.model.nodeDataArray.forEach(function(n) {\r\n            if (n.level == maxCircle && n.isparent != null) {\r\n                // delete n.isparent;\r\n                myDiagram.model.setDataProperty(n, 'isparent', null);\r\n            }\r\n        });\r\n        myDiagram.model.removeNodeData(node.data);\r\n        // go.CommandHandler.prototype.deleteSelection.call(cmd);\r\n        myDiagram.model.commitTransaction('level1');\r\n        this.groundLayout(myDiagram);\r\n        //changeTheme(myDiagram.model.modelData.currentThemeID, true);zyy\r\n      \r\n        myDiagram.model.commitTransaction('all');\r\n        var locateNode = null;\r\n        var tempArray = [\"next\",\"prev\",\"parent\"]\r\n        for(var i=0;i<tempArray.length;i++){\r\n            if(node.data[tempArray[i]]){\r\n                locateNode = myDiagram.findNodeForKey(node.data[tempArray[i]])\r\n                break;\r\n            }\r\n        }\r\n        // if(node.data.category === 'dipan'){\r\n            if (locateNode) {\r\n                // console.log('5612 locateNode................' +  locateNode)\r\n                // console.dir(locateNode)\r\n                //选中单个节点 bug问题：外圈都是临时节点的时候，无法选中 \r\n                myDiagram.select(locateNode);\r\n            } \r\n            \r\n        // }\r\n    }\r\n\r\n    deleteNode(node) {\r\n        console.log('删除节点 deleteNode')\r\n        console.log(node.data.key)\r\n        console.log(node.data)\r\n        var myDiagram  = this.diagram\r\n        var mainNode = null;\r\n            var preNode = node.data.prev ? myDiagram.findNodeForKey(node.data.prev) : null;\r\n            var nextNode = node.data.next ? myDiagram.findNodeForKey(node.data.next) : null;\r\n            var parentNode = node.data.parent ? myDiagram.findNodeForKey(node.data.parent) : null;\r\n    \r\n            // try {\r\n                // 如果有子节点，则删除所有子节点\r\n                if (node.data.isparent) {\r\n                    var firstNode = myDiagram.findNodeForKey(node.data.isparent)\r\n                    var nodes = []\r\n                    helpers.tdTravelTdpData(firstNode.data, myDiagram.model, nodes, function(data){\r\n                        return data\r\n                    })\r\n                    myDiagram.model.removeNodeDataCollection(nodes);\r\n    \r\n                    var maxCircles = this.getMaxCircle(myDiagram)\r\n                }\r\n                // 父节点存在的情况下\r\n                if (parentNode != null) {\r\n                    //当前节点为第一个子节点\r\n                    if (parentNode.data.isparent == node.data.key) {\r\n                        //如果当前节点是最后一个子节点\r\n                        if (nextNode == null) {\r\n                            myDiagram.model.setDataProperty(parentNode.data, \"isparent\", undefined);\r\n                        } else {\r\n                            myDiagram.model.setDataProperty(parentNode.data, \"isparent\", nextNode.data.key);\r\n                            myDiagram.model.setDataProperty(nextNode.data, \"prev\", undefined);\r\n                        }\r\n                    } else {\r\n                        myDiagram.model.setDataProperty(preNode.data, \"next\", nextNode == null ? null : nextNode.data.key);\r\n                        if (nextNode != null) {\r\n                            myDiagram.model.setDataProperty(nextNode.data, \"prev\", preNode.data.key);\r\n                        }\r\n                    }\r\n                }\r\n    \r\n                if(myDiagram.model.modelData.currentType == 'dipan'){\r\n                    // 删除的只剩下root节点时对root节点做处理\r\n                    var totalCount = 0;\r\n                    for(var i=0;i<myDiagram.model.nodeDataArray.length;i++){\r\n                        if(!myDiagram.model.nodeDataArray[i].istemp && !myDiagram.model.nodeDataArray[i].isGroup){\r\n                            totalCount++;\r\n                        }\r\n                        if(totalCount>1) break;\r\n                    }\r\n                    if(totalCount <= 1){  \r\n                        console.log(\"删除的只剩下root节点时对root节点做处理\")\r\n                        var dipanRoot = myDiagram.model.findNodeDataForKey(1);\r\n                        delete dipanRoot.group\r\n                    }\r\n                }\r\n            // } catch (ex) {\r\n            //     console.log(ex.message);\r\n            // }\r\n    \r\n        // }\r\n        myDiagram.isModified = true;\r\n    \r\n    \r\n    }\r\n\r\n    getMaxCircle() {\r\n        var myDiagram = this.diagram\r\n        var maxCircle = 0;\r\n        let nodeArr = [];\r\n        let nodeLevelArr = [];\r\n        let maxNodeArr = [];\r\n        let arr = [];\r\n        myDiagram.model.nodeDataArray.forEach(function(d) {\r\n            if(!d.istemp&&!d.isGroup){\r\n                nodeArr.push(d)\r\n                if(d.level){\r\n                    nodeLevelArr.push(d.level)\r\n                }\r\n            }else{\r\n                arr.push(d)\r\n            }\r\n        });\r\n        let max = Math.max.apply(null, nodeLevelArr);\r\n        // console.log(max)\r\n        nodeArr.forEach(function(node){\r\n            if(node.level === max){\r\n                maxNodeArr.push(node)\r\n            }\r\n        })\r\n        if(max ===-Infinity&&maxNodeArr.length === 0){\r\n            console.log(\"11111111111111\")\r\n            maxCircle = 0\r\n        }else if(max !== -Infinity&&maxNodeArr.length === 0){\r\n           maxCircle = max -1;\r\n        }else if(maxNodeArr.length > 0){\r\n           maxCircle = max;\r\n        }\r\n        // console.log(\"maxCircle\")\r\n        // console.log(maxCircle)\r\n        return maxCircle\r\n    }\r\n\r\n    addNewCircle(e) {\r\n        let myDiagram = this.diagram\r\n        var maxCircles = this.getMaxCircle()\r\n        var node = myDiagram.selection.first();\r\n        console.log(node.data)\r\n        if (!node) return;\r\n        if (node.data.isparent && myDiagram.findNodeForKey(node.data.isparent) && !myDiagram.findNodeForKey(node.data.isparent).visible) {\r\n            return;\r\n        }\r\n        myDiagram.model.startTransaction(\"addNewCircle\");\r\n        if (\"istemp\" in node.data && node.data.istemp) {\r\n            changeTemp2normal(myDiagram);\r\n            if (node.data.text == \"\") {\r\n               myDiagram.model.setDataProperty(node.data, \"text\", lang.trans('dce'));\r\n               //myDiagram.model.setDataProperty(node.data, \"text\", node.data.key)\r\n            }\r\n        }\r\n    \r\n        var firstnodeData = null;\r\n        if (node.data.isparent) {\r\n            firstnodeData = myDiagram.model.findNodeDataForKey(node.data.isparent);\r\n        }\r\n        if (firstnodeData != null && firstnodeData.istemp) {\r\n            myDiagram.model.setDataProperty(firstnodeData, \"istemp\", false);\r\n            myDiagram.model.setDataProperty(firstnodeData, \"text\", lang.trans('dce'));\r\n            //myDiagram.model.setDataProperty(node.data, \"text\", node.data.key)\r\n        } else {\r\n            var follower = this.addChildNodeData(node);\r\n            if (follower.level > maxCircles) {\r\n                maxCircles = follower.level;\r\n            }\r\n    \r\n            this.groundLayout(myDiagram);\r\n        }\r\n        myDiagram.model.commitTransaction(\"addNewCircle\");\r\n    }\r\n    \r\n     //modify nodeDataArray\r\n     addChildNodeData(node) {\r\n        // 去掉连线和group\r\n        console.log(\"===================================addChildNodeData:去掉连线和group、主题\")\r\n        var isautolayout = window.localStorage.getItem('isautolayout') == null ? true : window.localStorage.getItem('isautolayout') == 'true';\r\n        // var isautoselect =  window.localStorage.getItem('isautoselect') == null?true:window.localStorage.getItem('isautoselect') == 'true';\r\n        var myDiagram = node.diagram;\r\n        var result = arguments[1] ? arguments[1] : null;\r\n        var currentType = 'dipan'\r\n        //myDiagram.startTransaction();\r\n        var nextkey = (myDiagram.model.nodeDataArray.length + 1).toString();\r\n        //var follower = {key: nextkey, text: nextkey};\r\n        var follower = { key: nextkey, text: lang.trans('dce') };\r\n        //if (result != null) {\r\n        myDiagram.model.makeNodeDataKeyUnique(follower);\r\n        nextkey = follower.key;\r\n        var firstNode = null;\r\n        follower.level = node.data.level + 1;\r\n        follower.parent = node.data.key;\r\n        follower.prev = undefined;\r\n    \r\n        //如果已经有子节点\r\n        if (node.data.isparent) {\r\n            firstNode = myDiagram.model.findNodeDataForKey(node.data.isparent)\r\n            if(firstNode){\r\n                follower.next = firstNode.key;\r\n                myDiagram.model.setDataProperty(firstNode, \"prev\", follower.key);\r\n            }\r\n        }\r\n    \r\n        if (result != null) {\r\n            //只是用来填充的节点\r\n            follower.istemp = true;\r\n            follower.text = \"\";\r\n        }\r\n    \r\n        var sectotLayerThickNess  = myDiagram.model.modelData.layerThickness\r\n        console.log(\" myDiagram.model\", myDiagram.model);\r\n        // follower.fill = colorMap[follower.level % 5];\r\n        follower.dangle = node.data.dangle;\r\n        follower.dradius = node.data.dradius;\r\n        follower.sweep = node.data.sweep;\r\n        // zyy follower.loc = node.data.loc;\r\n        follower.layerThickness = sectotLayerThickNess || 100;\r\n        follower.tdDipanTextAngle = node.data.tdDipanTextAngle || 'xuanzhuan';\r\n        if (node.data.level != 0) {\r\n            follower.category = node.data.category;\r\n        }\r\n        if (node.data.category == \"Root\") {\r\n            follower.category = \"dipan\";\r\n        }\r\n    \r\n    \r\n        follower.strokeWidth = node.data.strokeWidth;\r\n        if (node.data.figure) {\r\n            follower.figure = node.data.figure;\r\n        }\r\n    \r\n        if (node.data.picture) {\r\n            follower.picture = node.data.picture;\r\n        }\r\n    \r\n        if (node.data.width) {\r\n            follower.width = node.data.width;\r\n        }\r\n        if (node.data.height) {\r\n            follower.height = node.data.height;\r\n        }\r\n        follower = applyTheme2Node(follower,myDiagram);\r\n        follower.font = node.data.font;\r\n        follower.textStroke = node.findObject(\"TEXT\").stroke;\r\n        myDiagram.model.setDataProperty(node.data, \"isparent\", nextkey);\r\n        follower.newAdd = true;\r\n        myDiagram.model.addNodeData(follower,myDiagram);\r\n        myDiagram.isModified = true;\r\n        return follower;\r\n    }\r\n    \r\n    addFollowerGround(e) {\r\n        let myDiagram = this.diagram;\r\n        if (myDiagram.selection.count == 0) return;\r\n        var node = myDiagram.selection.first();\r\n        if (node.data.key == 1) {\r\n            return;\r\n        }\r\n        if (!node) return;\r\n        var diagram = node.diagram;\r\n        // var isautolayout = window.localStorage.getItem('isautolayout') == null?true:window.localStorage.getItem('isautolayout') == 'true';\r\n        // var isautoselect =  window.localStorage.getItem('isautoselect') == null?true:window.localStorage.getItem('isautoselect') == 'true';\r\n        if (node === null || !(node instanceof go.Node) || node instanceof go.Group) return;\r\n        // root node is not allowed to add follower\r\n        // if (node.findLinksInto().count == 0) return;\r\n        myDiagram.model.startTransaction('all');\r\n        if (\"istemp\" in node.data && node.data.istemp) {\r\n            changeTemp2normal(myDiagram);\r\n            if (node.data.text == \"\") {\r\n                myDiagram.model.setDataProperty(node.data, \"text\", \"\");\r\n            }\r\n        }\r\n        // if(!isautolayout){\r\n        //   ControlAutoLayout(false);\r\n        // }else{\r\n        //   ControlAutoLayout(true);\r\n        // }\r\n        //myDiagram.model.startTransaction('addnode');\r\n        myDiagram.startTransaction('sub1');\r\n        var follower = this.addLevelNodeData(node);\r\n        myDiagram.commitTransaction('sub1');\r\n        this.groundLayout(myDiagram);\r\n        //changeTheme(myDiagram.model.modelData.currentThemeID, true);zyy颜色\r\n        myDiagram.model.commitTransaction('all');\r\n        var newnode = diagram.findNodeForData(follower);\r\n        if (newnode) {\r\n            // myDiagram.centerRect(newnode.actualBounds);\r\n            diagram.select(newnode);\r\n        }\r\n    \r\n    \r\n    }\r\n    \r\n    addLevelNodeData(node) {\r\n        console.log(\"======================去掉天盘\")\r\n        var isautolayout = window.localStorage.getItem('isautolayout') == null ? true : window.localStorage.getItem('isautolayout') == 'true';\r\n        // var isautoselect =  window.localStorage.getItem('isautoselect') == null?true:window.localStorage.getItem('isautoselect') == 'true';\r\n        var myDiagram = this.diagram;\r\n        var currentType = 'dipan';\r\n        var toKey = node.data.next;\r\n        //delete the next link\r\n    \r\n        var nextkey = (myDiagram.model.nodeDataArray.length + 1).toString();\r\n        //var follower = {key: nextkey, text: nextkey, color: \"yellow\"};\r\n    \r\n        var follower = { key: nextkey, text: lang.trans(\"dce\"), color: \"yellow\" };\r\n        myDiagram.model.makeNodeDataKeyUnique(follower);\r\n        nextkey = follower.key;\r\n        var nextnode = null;\r\n        if(toKey){\r\n            var nextnode = myDiagram.model.findNodeDataForKey(toKey);\r\n        }\r\n        myDiagram.model.startTransaction();\r\n    \r\n        follower = applyTheme2Node(follower, myDiagram);\r\n        //delete the next link\r\n        var deleteLink = null;\r\n    \r\n        //if has next node\r\n        if (nextnode != null) {\r\n            follower.next = nextnode.key;\r\n            myDiagram.model.setDataProperty(nextnode, \"prev\", follower.key);\r\n        }\r\n        follower.level = node.data.level;\r\n        follower.radius = node.data.radius;\r\n        follower.fill = node.data.fill;\r\n        //follower.fill =go.Brush.randomColor(128, 240);\r\n        follower.dangle = node.data.dangle;\r\n        follower.dradius = node.data.dradius;\r\n        // zyy follower.loc = node.data.loc;\r\n        follower.sweep = node.data.sweep;\r\n        follower.layerThickness = node.data.layerThickness || 100;\r\n        follower.tdDipanTextAngle = node.data.tdDipanTextAngle || 'xuanzhuan';\r\n    \r\n        follower.parent = node.data.parent;\r\n        follower.prev = node.data.key;\r\n        follower.strokeWidth = node.data.strokeWidth;\r\n        follower.stroke = node.data.stroke;\r\n        follower.font = node.data.font;\r\n        //follower.font = node.data.font;\r\n        follower.textStroke = node.findObject(\"TEXT\").stroke;\r\n        if (node.data.figure) {\r\n            follower.figure = node.data.figure;\r\n        }\r\n        follower.loc = node.data.loc;\r\n        if (node.data.width) {\r\n            follower.width = node.data.width;\r\n        }\r\n        if (node.data.height) {\r\n            follower.height = node.data.height;\r\n        }\r\n        follower.category = node.data.category;\r\n        follower.newAdd = true;\r\n        // add a new node\r\n        myDiagram.model.addNodeData(follower);\r\n        myDiagram.model.setDataProperty(node.data, \"next\", nextkey);\r\n    \r\n        myDiagram.model.commitTransaction();\r\n        myDiagram.isModified = true;\r\n        return follower;\r\n    }\r\n\r\n    moveWithinNodes(direction) {\r\n        var myDiagram = this.diagram;\r\n        var node = myDiagram.selection.first();\r\n        if(!node){\r\n            return;\r\n        }\r\n        if (!node) {\r\n            myDiagram.select(myDiagram.findNodeForKey(1));\r\n            return;\r\n        }\r\n        switch (direction) {\r\n            case 'left':\r\n                if (node.data.prev) {\r\n                    var prevNode = myDiagram.findNodeForKey(node.data.prev);\r\n                    if (prevNode) {\r\n                        myDiagram.select(prevNode);\r\n                    }\r\n                }\r\n                break;\r\n            case 'up':\r\n                if (node.data.parent) {\r\n                    var prevNode = myDiagram.findNodeForKey(node.data.parent);\r\n                    if (prevNode) {\r\n                        myDiagram.select(prevNode);\r\n                    }\r\n                }\r\n                break;\r\n            case 'right':\r\n                if (node.data.next) {\r\n                    var prevNode = myDiagram.findNodeForKey(node.data.next);\r\n                    if (prevNode) {\r\n                        myDiagram.select(prevNode);\r\n                    }\r\n                }\r\n                break;\r\n            case 'down':\r\n                if (node.data.isparent) {\r\n                    var prevNode = myDiagram.findNodeForKey(node.data.isparent);\r\n                    if (prevNode) {\r\n                        myDiagram.select(prevNode);\r\n                    }\r\n                }\r\n                break;\r\n        }\r\n    }\r\n\r\n    selectText(e) {\r\n        var myDiagram = this.diagram\r\n        var node = myDiagram.selection.first();\r\n        if (!node) return;\r\n        // removeNodeRemarkTips();\r\n        var tb = myDiagram.selection.first().findObject('TEXT');\r\n        if (tb) myDiagram.commandHandler.editTextBlock(tb);\r\n        helpers.simulateEnterWithAlt(e);\r\n    }\r\n\r\n    // 地盘布局\r\n    groundLayout(myDiagram) {\r\n        // var dipaninteractions = require('./dipan');\r\n        // var addChildNodeData = this.addChildNodeData\r\n        var myDiagram = this.diagram\r\n        var root = myDiagram.findNodeForKey(1);\r\n        var that = this;\r\n        if (!root) {\r\n            return;\r\n        }\r\n        root.location = new go.Point(0, 0);\r\n        var diagram = root.diagram;\r\n        if (diagram === null) return;\r\n        // make this Node the root\r\n        root.data.category = \"Root\";\r\n        // determine new distances from this new root node\r\n        //    var results = findDistances(somenode);\r\n        //    radialLayout(root);\r\n        var layout = getTdLayout(myDiagram);\r\n        if (layout == 'out') {\r\n            var maxCircles = this.getMaxCircle(myDiagram);\r\n    \r\n            var model = myDiagram.model;\r\n            helpers.tdTravelTdpData(root.data, model, [], function(d) {\r\n                if (d.level < maxCircles && typeof(d.isparent) == 'undefined') {\r\n                    var followerNode = myDiagram.findNodeForKey(d.key);\r\n                    that.addChildNodeData(followerNode, \"temp\");\r\n                }\r\n            });\r\n            changeLayout();\r\n        } else if (layout == 'inner') {\r\n            radialLayout(root,myDiagram);\r\n            // myDiagram.model.modelData.splitLayer = 1\r\n            // splitLayer = 1\r\n            // splitRadlayout(null, myDiagram.model, splitLayer);\r\n        } else {\r\n            splitLayer = myDiagram.model.modelData.splitLayer ? myDiagram.model.modelData.splitLayer : splitLayer;\r\n            splitRadlayout(null, myDiagram.model, splitLayer);\r\n        }\r\n        // setSourceOfPicture(null, 1); //重新计算背景图片宽高\r\n\r\n        function radialLayout(root,myDiagram) {\r\n            root.diagram.startTransaction(\"radial layout\");\r\n            // sort all results into Arrays of Nodes with the same distance\r\n            var nodes = {};\r\n            var maxlayer = 0;\r\n            // var globalProperties = tdGetModelData(null, myDiagram.model); //获取所有全局属性到一个对象中\r\n            // var layerThickness = parseInt(root.data.layerThickness || 100);\r\n            var layerThickness = myDiagram.model.modelData.layerThickness || 100;\r\n            var tdDipanTextAngle = root.data.tdDipanTextAngle || \"xuanzhuan\";\r\n        \r\n            root.diagram.model.setDataProperty(root.data, \"dangle\", 0);\r\n            root.diagram.model.setDataProperty(root.data, \"sweep\", 360);\r\n            root.diagram.model.setDataProperty(root.data, \"dradius\", 0);\r\n        \r\n        \r\n            myDiagram.nodes.each(function(n) {\r\n                n.data._laid = false;\r\n            });\r\n        \r\n            // now recursively position nodes, starting with the root\r\n            root.location = new go.Point(0, 0);\r\n            maxCircles = that.getMaxCircle(myDiagram);\r\n            radlay1(root, 1, 90, 360, layerThickness, tdDipanTextAngle,myDiagram);\r\n            root.diagram.commitTransaction(\"radial layout\");\r\n        }\r\n\r\n        function radlay1(node, layer, angle, sweep, layerThickness, tdDipanTextAngle,myDiagram) {\r\n            // var dipaninteractions = require('./dipan');\r\n            var addChildNodeData = that.addChildNodeData\r\n            try {\r\n                var nodes = getAllChilds(node);\r\n            } catch (e) {\r\n                console.error(e);\r\n            }\r\n            var parentKey = node.data.key;\r\n        \r\n            if (node.data.category >= 3) {\r\n                return;\r\n            }\r\n            // var globalProperties = tdGetModelData(null, myDiagram.model);   //获取所有全局属性到一个对象中\r\n            // var layerThickness = parseInt(globalProperties['layerThickness']);\r\n            // var tdDipanTextAngle = globalProperties['tdDipanTextAngle'];\r\n        \r\n            var found = nodes.length;\r\n            //if (found === 0) return;\r\n            if (found === 0 && node.data.level >= maxCircles) return;\r\n            if (found === 0) {\r\n                var newdata = that.addChildNodeData(node, \"temp\");\r\n        \r\n                var newnode = myDiagram.findNodeForData(newdata);\r\n                nodes.push(newnode);\r\n                //node.diagram.model.setDataProperty(newdata, \"istemp\", true);\r\n                found++;\r\n            }\r\n            var rootNode = myDiagram.model.findNodeDataForKey(1);\r\n            var rootRadius = parseInt(rootNode.layerThickness);\r\n            var radius = rootRadius + (layer - 1) * layerThickness;\r\n            var separator = sweep / found;\r\n            var start = angle - sweep / 2 + separator / 2;\r\n            for (var i = 0; i < found; i++) {\r\n                var n = nodes[i];\r\n                var a = start + i * separator;\r\n                var p = new go.Point(radius + layerThickness / 2, 0);\r\n                if (n.data._laid) {\r\n                    radlay1(n, layer + 1, n.data.dangle, n.data.sweep, layerThickness, tdDipanTextAngle,myDiagram);\r\n                    continue;\r\n                }\r\n                p.rotate(a);\r\n                // n.location = p;\r\n                n.diagram.model.setDataProperty(n.data, \"loc\", go.Point.stringify(p));\r\n                n.data._laid = true;\r\n                n.diagram.model.setDataProperty(n.data, \"dangle\", a);\r\n                n.diagram.model.setDataProperty(n.data, \"sweep\", separator);\r\n                n.diagram.model.setDataProperty(n.data, \"dradius\", radius);\r\n                n.diagram.model.setDataProperty(n.data, \"layerThickness\", layerThickness);\r\n                \r\n                // make sure text is never upside down\r\n                var label = n.findObject(\"TEXT\");\r\n                if (label !== null) {\r\n                    label.angle = ((a > 90 && a < 270 || a < -90) ? 180 : 0);\r\n                    //n.diagram.model.setDataProperty(n.data, \"textAngle\", label.angle);\r\n                    if (tdDipanTextAngle == 'xuanzhuan') { //文字方向旋转\r\n                        n.diagram.model.setDataProperty(n.data, \"textAngle\", label.angle);\r\n                    }\r\n                    if (tdDipanTextAngle == 'fangshe') { //文字方向旋转\r\n                        n.diagram.model.setDataProperty(n.data, \"textAngle\", 90);\r\n                    }\r\n                    if (tdDipanTextAngle == 'zhengli') { //文字方向正向\r\n                        n.diagram.model.setDataProperty(n.data, \"textAngle\", -a);\r\n                    }\r\n                    // console.log(\"text:\"+n.data.text+\",textangle:\"+n.data.textAngle+\";nodeAngle=\"+a  );\r\n                }\r\n                if (n.data.key == \"1\") {\r\n                    n.diagram.model.setDataProperty(n.data, \"textAngle\", 0);\r\n                }\r\n                radlay1(n, layer + 1, a, sweep / found, layerThickness, tdDipanTextAngle,myDiagram);\r\n            }\r\n        }\r\n\r\n        function getTdLayout(myDiagram) {\r\n            return myDiagram.model.modelData.layout ? myDiagram.model.modelData.layout : 'inner';\r\n        }\r\n\r\n        function getAllChilds(parentNode) {\r\n            try {\r\n                if (!parentNode.data.isparent) {\r\n                    return [];\r\n                }\r\n                var nodes = [],\r\n                    tmpDataObj;\r\n                if (!parentNode.data.isparent) return [];\r\n                var firstNode = parentNode.diagram.findNodeForKey(parentNode.data.isparent);\r\n                tmpDataObj = firstNode;\r\n                if (tmpDataObj) {\r\n                    nodes.push(firstNode);\r\n                    while (tmpDataObj.data.next) {\r\n                        tmpDataObj = parentNode.diagram.findNodeForKey(tmpDataObj.data.next);\r\n                        if (!tmpDataObj) break;\r\n                        nodes.push(tmpDataObj);\r\n                    }\r\n                }\r\n                return nodes;\r\n            } catch (e) {\r\n                console.error(e);\r\n            }\r\n        }\r\n        \r\n       // 外圈均分布局\r\n        function splitRadlayout(nodeData, model) {\r\n            if (nodeData == null) {\r\n                nodeData = model.findNodeDataForKey(1);\r\n            }\r\n            var rootNode = model.findNodeDataForKey(1);\r\n            var rootRadius = parseInt(rootNode.layerThickness);\r\n            console.log(\"rootRadius\", rootRadius);\r\n            model.nodeDataArray.forEach(function(d) {\r\n                d._laid = false;\r\n            });\r\n            // var globalProperties = tdGetModelData(null, myDiagram.model); //获取所有全局属性到一个对象中\r\n            // var root = getSubGraphRoot(nodeData, myDiagram);\r\n            // var layerThickness = parseInt(nodeData.layerThickness || 100);\r\n            var layerThickness = myDiagram.model.modelData.layerThickness;\r\n\r\n            var tdDipanTextAngle = nodeData.tdDipanTextAngle || \"xuanzhuan\";\r\n            var maxCircle = arguments[2] ? arguments[2] : getMaxCircle(myDiagram);\r\n            var result = getNumOfLevelChild(nodeData, model, maxCircle);\r\n            var childNum = result.count;\r\n            if (childNum <= 0) return;\r\n            var sweepUnit = 360.0 / childNum;\r\n            //setLevelSectionIndex(nodeData, model);\r\n\r\n            var length = model.nodeDataArray.length;\r\n\r\n            var collector = [];\r\n            if (nodeData.isparent) {\r\n                var firstChild = model.findNodeDataForKey(nodeData.isparent);\r\n            } else {\r\n                return;\r\n            }\r\n\r\n            helpers.tdTravelTdpData(firstChild, model, collector, function(d) {\r\n                return d;\r\n            });\r\n            var tmpArray;\r\n\r\n            for (var level = 1; level <= maxCircle; level++) {\r\n                tmpArray = _.filter(collector, function(item) {\r\n                    return (!item.isGroup && item.level == level);\r\n                });\r\n                var angle = 0;\r\n                var start = 0;\r\n                var radius = rootRadius + (level - 1) * layerThickness;\r\n                for (var index = 0; index < tmpArray.length; index++) {\r\n                    var data = tmpArray[index];\r\n                    data._laid = true;\r\n                    if (data.key == \"1\") {\r\n                        model.setDataProperty(n.data, \"textAngle\", 0);\r\n                        continue;\r\n                    }\r\n                    result = getNumOfLevelChild(data, model, maxCircle);\r\n                    childNum = result.count;\r\n                    if (childNum < 0) {\r\n                        continue;\r\n                    }\r\n                    if (childNum == 0) {\r\n                        var separator = sweepUnit;\r\n                    } else {\r\n                        var separator = childNum * sweepUnit;\r\n                    }\r\n                    if (index == 0) {\r\n                        start = -90;\r\n                    }\r\n\r\n                    angle = start + separator / 2;\r\n                    start += separator;\r\n                    var a = angle;\r\n                    var p = new go.Point(radius + layerThickness / 2, 0);\r\n                    // console.log('layerThickness', layerThickness, 'radius:', radius)\r\n                    p.rotate(a);\r\n                    // n.location = p;\r\n                    model.setDataProperty(data, \"loc\", go.Point.stringify(p));\r\n                    model.setDataProperty(data, \"dangle\", a);\r\n                    model.setDataProperty(data, \"sweep\", separator);\r\n                    model.setDataProperty(data, \"dradius\", radius);\r\n                    model.setDataProperty(data, \"layerThickness\", layerThickness);\r\n                    \r\n                    // make sure text is never upside down\r\n                    // var label = myDiagram.findNodeForKey(nodeData.key).findObject(\"TEXT\");\r\n                    //if (label !== null) {\r\n                    //label.angle = ((a > 90 && a < 270 || a < -90) ? 180 : 0);\r\n                    var tmpAngle = ((a > 90 && a < 270 || a < -90) ? 180 : 0);\r\n                    //if(a>80 && a < 100){\r\n                    //    label.angle = -a;\r\n                    //}\r\n                    if (tdDipanTextAngle == 'xuanzhuan') { //文字方向旋转\r\n                        model.setDataProperty(data, \"textAngle\", tmpAngle);\r\n                    }\r\n                    if (tdDipanTextAngle == 'fangshe') { //文字方向旋转\r\n                        var tmpAngle = (a > 0 && a < 180 || a < -180) ? 180 : 0;\r\n                        model.setDataProperty(data, \"textAngle\", 90);\r\n\r\n                        // label.width = 100;\r\n                    }\r\n                    //}\r\n                    if (tdDipanTextAngle == 'zhengli') { //文字方向正向\r\n                        model.setDataProperty(data, \"textAngle\", -a);\r\n                    }\r\n\r\n                }\r\n\r\n            }\r\n\r\n            // 指定层均分会调用内圈均分的函数\r\n            console.log()\r\n            if (maxCircle < this.getMaxCircle(myDiagram)) {\r\n                radlay1(myDiagram.findNodeForKey(1), 1, 90, 360, layerThickness, tdDipanTextAngle);\r\n            }\r\n        }\r\n \r\n        //获取node指定层子节点的个数,isAll是否是所有子孙\r\n        function getNumOfLevelChild(nodeData, model, level, isAll) {\r\n            var result = { count: 0, list: [] },\r\n                flag = false;\r\n            try {\r\n                if (nodeData.key == 1) {\r\n                    model.nodeDataArray.forEach(function(d) {\r\n                        if (isAll) {\r\n                            flag = d.level >= level\r\n                        } else {\r\n                            flag = d.level == level\r\n                        }\r\n                        if (!_.has(d, 'isGroup') && flag) {\r\n                            result.count += 1;\r\n                            result.list.push(d);\r\n                        }\r\n                    })\r\n                } else {\r\n                    //var result = 0;\r\n                    if (nodeData.isparent) {\r\n                        var firstChild = model.findNodeDataForKey(nodeData.isparent);\r\n                    } else {\r\n                        return result;\r\n                    }\r\n                    helpers.tdTravelTdpData(firstChild, model, [], function(d) {\r\n                        if (isAll) {\r\n                            flag = d.level >= level\r\n                        } else {\r\n                            flag = d.level == level\r\n                        }\r\n                        if (!_.has(d, 'isGroup') && flag) {\r\n                            result.count += 1;\r\n                            result.list.push(d);\r\n                        }\r\n                    });\r\n                }\r\n            } catch (e) {\r\n\r\n\r\n                console.log(e);\r\n                return { count: 0, list: [] };\r\n            }\r\n\r\n            return result;\r\n        }\r\n\r\n    }\r\n\r\n    //快捷键\r\n    dokeyDownFnq (diagram) {\r\n        var myDiagram = this.diagram;\r\n        var e = myDiagram.lastInput;\r\n        var cmd = myDiagram.commandHandler;\r\n        var node = myDiagram.selection.first();\r\n\r\n        // if (e.event.altKey) {\r\n        //     if (e.key == \"Q\") {\r\n        //         autoLayoutAll();\r\n        //         return;\r\n        //     } else if (e.key == \"R\") {\r\n        //         centerNode();\r\n        //         return;\r\n        //     } else if (e.key == \"C\") {\r\n        //         centerCurrentNode();\r\n        //         return;\r\n        //     } else if (e.key == \"A\") {\r\n        //         zoomToFit();\r\n        //         return;\r\n        //     }\r\n        // }\r\n        if (e.event.keyCode >= 65 && e.event.keyCode <= 90 && !e.event.altKey && !e.event.ctrlKey && !e.event.shiftKey) {\r\n            // e.bubbles = true;\r\n            e.bubbles = false;\r\n            this.selectText(e, diagram);\r\n            return true;\r\n        }\r\n\r\n        if (e.event.keyCode === 13) { // could also check for e.control or e.shift\r\n            if (node && node.data.category == 'Root' ) {\r\n                this.addFollowerGround();\r\n            } else if(node && node.data.category == 'dipan'){\r\n                this.addFollowerGround();\r\n            }\r\n\r\n        } else if (e.event.keyCode === 9) { // could also check for e.control or e.shift\r\n            if (node && node.data.category == 'Root') {\r\n\r\n                this.addNewCircle();\r\n            } else if(node && node.data.category == 'dipan'){\r\n                this.addNewCircle();\r\n            }\r\n        } else if (e.key === \"t\") { // could also check for e.control or e.shift\r\n            if (cmd.canCollapseSubGraph()) {\r\n                cmd.collapseSubGraph();\r\n            } else if (cmd.canExpandSubGraph()) {\r\n                cmd.expandSubGraph();\r\n            }\r\n        } else if (e.key == \"Del\") {\r\n            if (myDiagram.selection.count == 0) {\r\n                return;\r\n            }\r\n            e.diagram.commandHandler.deleteSelection();\r\n        } else if (e.event.keyCode == 113) { //F2,覆盖地盘默认行为\r\n            this.selectText();\r\n        } else if (e.event.keyCode == 37) { //左\r\n            this.moveWithinNodes('left');\r\n        } else if (e.event.keyCode == 38) { //上\r\n            this.moveWithinNodes('up');\r\n        } else if (e.event.keyCode == 39) { //右\r\n            this.moveWithinNodes('right');\r\n        } else if (e.event.keyCode == 40) { //下\r\n            this.moveWithinNodes('down');\r\n        } else {\r\n            // call base method with no arguments\r\n            go.CommandHandler.prototype.doKeyDown.call(cmd);\r\n        }\r\n        e.bubbles = false; //阻止事件冒泡到dom\r\n    }\r\n    \r\n    // 生成base64图片\r\n    downloadImage() {\r\n        var myDiagram = this.diagram;\r\n        var imgdata = myDiagram.makeImageData({\r\n            scale: 1.0,\r\n            background: \"#ffffff\",\r\n            type: \"image/png\",\r\n            maxSize: new go.Size(9000, 9000)\r\n        });\r\n\r\n        return imgdata;\r\n    }\r\n}\r\n\r\n//临时扇区转换为正式扇区\r\nfunction changeTemp2normal(myDiagram) {\r\n\r\n    var node = myDiagram.selection.first();\r\n    if (node.data.istemp) {\r\n        myDiagram.model.startTransaction();\r\n        var tmpNode = myDiagram.findNodeForKey(node.data.parent);\r\n        myDiagram.model.setDataProperty(node.data, \"istemp\", undefined);\r\n        var lastNode = null; //记录这一级扇区\r\n        while (tmpNode) {\r\n            if (tmpNode.data.istemp) {\r\n                myDiagram.model.setDataProperty(tmpNode.data, \"istemp\", undefined);\r\n                myDiagram.model.setDataProperty(tmpNode.data, \"text\", \"双击编辑内容\");\r\n                lastNode = tmpNode;\r\n            } else {\r\n                if (lastNode) {\r\n                    myDiagram.model.setDataProperty(tmpNode.data, \"isparent\", lastNode.data.key);\r\n                }\r\n                break;\r\n            }\r\n            tmpNode = myDiagram.findNodeForKey(tmpNode.data.parent);\r\n        }\r\n        myDiagram.model.commitTransaction();\r\n        myDiagram.isModified = true;\r\n    }\r\n}\r\n\r\n\r\nfunction computeEffectiveCollection(parts) {\r\n    var coll = new go.Set();\r\n    var node = parts.first();\r\n    if (node) {\r\n        helpers.travelParts(node, function(p) {\r\n            coll.add(p);\r\n        })\r\n    } else {\r\n        coll.addAll(parts);\r\n    }\r\n    var tool = this;\r\n\r\n    return go.DraggingTool.prototype.computeEffectiveCollection.call(this, coll);\r\n};\r\n\r\nfunction applyTheme2Node(follower, myDiagram) {\r\n    var tdCurrentTheme = myDiagram.__trtd.tdCurrentTheme\r\n    // follower.strokeWidth = tdCurrentTheme.borderWidth;\r\n    // follower.stroke = tdCurrentTheme.borderColor;\r\n    myDiagram.model.setDataProperty(follower, 'strokeWidth', tdCurrentTheme.borderWidth);\r\n    myDiagram.model.setDataProperty(follower, 'stroke', tdCurrentTheme.borderColor);\r\n    if (tdCurrentTheme.colorRange == null) {\r\n        // follower.fill = randomColor({luminosity: 'light', count: 1})[0];\r\n        myDiagram.model.setDataProperty(follower, 'fill', randomColor({ luminosity: 'light', count: 1 })[0]);\r\n    } else if (tdCurrentTheme.colorRange instanceof Array) {\r\n        var tmpColor = \"white\";\r\n        if (follower.level >= tdCurrentTheme.colorRange.length) {\r\n            tmpColor = tdCurrentTheme.colorRange[follower.level % tdCurrentTheme.colorRange.length];\r\n        } else {\r\n            tmpColor = tdCurrentTheme.colorRange[follower.level];\r\n        }\r\n        // follower.fill = tmpColor;\r\n        myDiagram.model.setDataProperty(follower, 'fill', tmpColor);\r\n    } else if (tdCurrentTheme.colorRange == \"random\") {\r\n        //层级颜色一样的随机色\r\n        if (follower.prev) {\r\n            var preNode = myDiagram.findNodeForKey(follower.prev);\r\n            if (preNode) {\r\n                // follower.fill = preNode.data.fill;\r\n                myDiagram.model.setDataProperty(follower, 'fill', preNode.data.fill);\r\n            } else {\r\n                // follower.fill = randomColor({luminosity: 'light', count: 1})[0];\r\n                myDiagram.model.setDataProperty(follower, 'fill', randomColor({ luminosity: 'light', count: 1 })[0]);\r\n            }\r\n\r\n        } else {\r\n            // follower.fill = randomColor({luminosity: 'light', count: 1})[0];\r\n            myDiagram.model.setDataProperty(follower, 'fill', randomColor({ luminosity: 'light', count: 1 })[0]);\r\n        }\r\n    } else {\r\n        // follower.fill = \"rgba(0,0,0,0)\";\r\n        if (tdCurrentTheme.colorRange == \"white\") {\r\n            myDiagram.model.setDataProperty(follower, 'fill', \"white\");\r\n        } else {\r\n            myDiagram.model.setDataProperty(follower, 'fill', \"rgba(0,0,0,0)\");\r\n        }\r\n\r\n    }\r\n    return follower;\r\n}\r\n\r\n//生成地盘的figure形状\r\nfunction makeAnnularWedge(data, layerThickness) {\r\n    var sweep = data.sweep ? data.sweep : 360;\r\n    var layerThickness = data.layerThickness || 100;\r\n    var radius = data.dradius ? data.dradius : 100;\r\n    var p = new go.Point(radius + layerThickness, 0).rotate(-sweep / 2);\r\n    var q = new go.Point(radius, 0).rotate(sweep / 2);\r\n    var geo = new go.Geometry()\r\n        .add(new go.PathFigure(p.x, p.y)\r\n            .add(new go.PathSegment(go.PathSegment.Arc, -sweep / 2, sweep, 0, 0, radius + layerThickness, radius + layerThickness))\r\n            .add(new go.PathSegment(go.PathSegment.Line, q.x, q.y))\r\n            .add(new go.PathSegment(go.PathSegment.Arc, sweep / 2, -sweep, 0, 0, radius, radius).close()));\r\n    geo.normalize();\r\n    return geo;\r\n}\r\n\r\nfunction getRootNodeData(model) {\r\n    var root = null;\r\n    root = model.nodeDataArray.find((o)=>{\r\n        if(!o.isGroup && o.category == \"Root\" && o.level == 0){\r\n            return true;\r\n        }\r\n    })\r\n\r\n    return root;\r\n}\r\n\r\n\r\n\r\n\r\n\r\n// function cxcommand (obj, val) {\r\n//     var diagram = obj.diagram;\r\n//     var myDiagram = obj.diagram;\r\n//     if (!(diagram.currentTool instanceof go.ContextMenuTool)) return;\r\n//     switch (val) {\r\n//         // case \"Paste\": diagram.commandHandler.pasteSelection(diagram.lastInput.documentPoint); break;\r\n//         case \"addChildNodeMenu\":\r\n//             tdAddChildNode(obj);\r\n//             break;\r\n//         case \"addLevelNodeMenu\":\r\n//             tdAddLevelNode(obj);\r\n//             break;\r\n//         case \"changeDipanBgMenu\":\r\n//             changeDipanBackgroundImg();\r\n//             break;\r\n//         case \"removeDipanBgMenu\":\r\n//             removeDipanBackgroundImg(obj);\r\n//             break;\r\n//         case \"deleteNodeMenu\":\r\n//             myDiagram.toolManager.textEditingTool.doCancel();\r\n//             myDiagram.commandHandler.deleteSelection();\r\n//             break;\r\n//         case \"addNodePictureMenu\":\r\n//             // jQuery(\"#insertimage\").modal('show');\r\n//             // document.getElementById('insertimage').modal('show');\r\n//             break; //特殊处理\r\n//         case \"removeNodePictureMenu\":\r\n//             removeNodePicture(obj);\r\n//             break;\r\n//         case \"clearNodeTextMenu\":\r\n//             var node = myDiagram.selection.first();\r\n//             if (node) {\r\n//                 myDiagram.startTransaction();\r\n//                 myDiagram.model.setDataProperty(node.data, \"text\", \"\");\r\n//                 myDiagram.commitTransaction();\r\n//             };\r\n//             break;\r\n//         case \"locateRootNodeMenu\":\r\n//             centerNode(obj);\r\n//             break;\r\n//         case \"showAllNodesMenu\":\r\n//             zoomToFit(obj);\r\n//             break;\r\n//         case \"removeOutCycleMenu\":\r\n//             removeOutCycle(obj);\r\n//             break;\r\n//         case \"centerPictureMenu\":\r\n//             centerPicture(obj);\r\n//             break;\r\n//         case \"equalWidthHeightPictureMenu\":\r\n//             equalWidthHeightPicture(obj);\r\n//             break;\r\n//         case \"bringToTopMenu\":\r\n//             bringToLayer(\"Foreground\", obj);\r\n//             break;\r\n//         case \"bringToBackgroundMenu\":\r\n//             bringToLayer(\"Background\", obj);\r\n//             break;\r\n//         case \"bringUpMenu\":\r\n//             bringToLayer(null, obj);\r\n//             break;\r\n//         case \"layoutGroupMenu\":\r\n//             autoLayoutAll(true, obj);\r\n//             break;\r\n\r\n//         case \"insertTextMenu\":\r\n//             insertTextNode(obj);\r\n//             break;\r\n//         case \"duplicateNode\":\r\n//             duplicateNode(obj);\r\n//             break; // 复制节点\r\n//         case \"insertTianpanMenu\":\r\n//             myDiagram.toolManager.clickCreatingTool.insertPart(myDiagram.lastInput.documentPoint);\r\n//             break;\r\n//         //固定节点\r\n//         case \"fixPictureMenu\":   \r\n//         case \"activePictureMenu\":\r\n//             //var node = myDiagram.findPartAt(myDiagram.lastInput.documentPoint, false);\r\n//             var node = myDiagram.selection.first();\r\n//             myDiagram.startTransaction();\r\n//             myDiagram.model.setDataProperty(node.data, \"selectable\", node.data.selectable != undefined ? (!node.data.selectable) : false);\r\n//             myDiagram.commitTransaction();\r\n//             break;\r\n//         case \"orderChildNode\":\r\n//             orderChildNode(obj);\r\n//             break;\r\n//         case \"clearOrderChildNode\":\r\n//             clearOrderChildNode(obj);\r\n//             break;\r\n//         case \"delYunpanAxis\":\r\n//             yunpan.yunpandel(obj);\r\n//             break;\r\n//         case \"addYunpanAxis\":\r\n//             var node = myDiagram.selection.first();\r\n//             if(node.data.loc.split(\" \")[1] === \"0\"&&node.data.category!==\"x\"){\r\n//                 yunpan.addy(obj)\r\n//             }else if(node.data.loc.split(\" \")[0] === \"0\"&&node.data.category!==\"y\"){\r\n//                 yunpan.addx(obj)\r\n//             }; \r\n//             break;\r\n//         case \"addLevelDipanNode\":\r\n//             if(myDiagram.selection.first().data.istemp){\r\n//                 return\r\n//             }\r\n//             obj.addFollowerGround();\r\n//             break;\r\n//         case \"addChildDipanNode\":\r\n//             var node = myDiagram.selection.first();\r\n//                 if(node.data.parent){\r\n//                     var parentNode = node.diagram.findNodeForKey(node.data.parent);\r\n//                     if(parentNode.data.istemp){\r\n//                         return\r\n//                     }\r\n//                 }\r\n//             obj.addNewCircle(obj);\r\n//             break;\r\n//         case \"deleteDipanNode\":\r\n//         // myDiagram.commandHandler.deleteSelection();\r\n//         obj.deleteSelection();\r\n//         break;\r\n//     }\r\n//     diagram.currentTool.stopTool();\r\n// }\r\n\r\n\r\n// 清除节点的关系属性，比如父节点索引，子节点索引等\r\nfunction clearRelProperty(data) {\r\n    data.level = 0;\r\n    delete data.prev;\r\n    delete data.isparent;\r\n    delete data.next;\r\n    delete data.group;\r\n    delete data.parent;\r\n    return data;\r\n}\r\n\r\n// 复制单个节点\r\nfunction duplicateNode(obj) {\r\n    var myDiagram = obj.diagram;\r\n    var node = myDiagram.selection.first();\r\n    if (!node) return;\r\n    myDiagram.startTransaction();\r\n    var newData = myDiagram.model.copyNodeData(node.data);\r\n    var location = node.location.copy();\r\n    location.offset(50, -50);\r\n    newData.loc = go.Point.stringify(location);\r\n    newData.level = 0;\r\n    newData = clearRelProperty(newData);\r\n    myDiagram.model.addNodeData(newData);\r\n    myDiagram.commitTransaction();\r\n}\r\n\r\nTrtd.go = go;\r\n\r\n// if (typeof window !== 'undefined') {\r\n// \tif(window.Trtd){\r\n//         window.Trtd.dipan = Trtd;\r\n//     } else{\r\n//         window.Trtd = {\r\n//             dipan: Trtd\r\n//         }\r\n//     }\r\n// }\r\n\r\n// export default Trtd;\r\nmodule.exports = Trtd;\n\n\n// WEBPACK FOOTER //\n// ./src/diagram/dipan.js","\r\nvar Trtd_tianpan = require('./tianpan')\r\nvar createNodeTemplate = require('../nodeTemplate/createNodeTemplate')\r\nvar createPictureSingleNodeTemplate = require('../nodeTemplate/createPictureSingleNodeTemplate')\r\nvar createPictureNodeTemplate = require('../nodeTemplate/createPictureNodeTemplate')\r\nvar createTextNodeTemplate = require('../nodeTemplate/createTextNodeTemplate')\r\nvar createNodeSvgTemplate = require('../nodeTemplate/createNodeSvgTemplate')\r\n\r\n\r\nclass Trtd extends Trtd_tianpan {\r\n    constructor(div, config){\r\n        super(div, config)\r\n\t\t// this.config = config;\r\n\t\t// this.modelChangedListener = config.modelChangedListener;\r\n\t\t// this.type = config.type;\r\n\t\t// this.diagram = {};\r\n        // this.model = config.model;\r\n        // this.tpid = config.tpid||Date.now();\r\n        // this.InitialFontSize = 18\r\n        // this.tdCurrentTheme = {\r\n        //     id: 6,\r\n        //     borderWidth: 2,\r\n        //     borderColor: \"black\",\r\n        //     groupColor: \"rgba(0,0,0,0)\",\r\n        //     groupStroke: \"rgba(0,0,0,0)\",\r\n        //     groupStrokeWidth: 0,\r\n        //     themeName: \"黑白\",\r\n        //     linkColor: \"black\",\r\n        //     colorRange: \"white\"\r\n        // }\r\n\t\t// // 初始化diagram\r\n\t\t// this.initDiagram(div, config);\r\n\t\t// this.initListener();\r\n\t\t// // Then you will need to construct a Model (usually a GraphLinksModel) for the Diagram, initialize its data by setting its Model.nodeDataArray and other properties, and then set the diagram's model.\r\n        // if(this.model){\r\n        //     this.initModel();\r\n        // }\r\n    }\r\n\r\n     /**\r\n     * 添加节点模板\r\n     */\r\n    addNodeTemplate(){\r\n\r\n\r\n        // myDiagram.nodeTemplateMap.add(\"dipan\", this.createDipanTemplate(layerThickness,tdDipanTextAngle));\r\n        // myDiagram.nodeTemplateMap.add(\"Root\", this.getDipanRootTemplate(layerThickness));\r\n        // myDiagram.nodeTemplateMap.add(\"text\", );\r\n        var myDiagram = this.diagram\r\n        myDiagram.nodeTemplateMap.add(\"0\", createNodeTemplate(this.diagram));\r\n        myDiagram.nodeTemplateMap.add(\"1\", createNodeTemplate(this.diagram));\r\n        myDiagram.nodeTemplateMap.add(\"2\", createNodeTemplate(this.diagram));\r\n        myDiagram.nodeTemplateMap.add(\"3\", createPictureSingleNodeTemplate(this.diagram));\r\n        myDiagram.nodeTemplateMap.add(\"4\", createPictureNodeTemplate(this.diagram));\r\n        myDiagram.nodeTemplateMap.add(\"text\", createTextNodeTemplate(this.diagram));\r\n        myDiagram.nodeTemplateMap.add(\"\", createNodeTemplate(this.diagram));\r\n\r\n        myDiagram.nodeTemplateMap.add(\"8\",createNodeSvgTemplate(this.diagram));\r\n\r\n        \r\n    }\r\n}\r\n\r\n// export default Trtd;\r\nmodule.exports = Trtd;\n\n\n// WEBPACK FOOTER //\n// ./src/diagram/jin.js","\r\nvar Trtd_tianpan = require('./tianpan')\r\nvar createNodeTemplate = require('../nodeTemplate/createNodeTemplate')\r\nvar createPictureSingleNodeTemplate = require('../nodeTemplate/createPictureSingleNodeTemplate')\r\nvar createPictureNodeTemplate = require('../nodeTemplate/createPictureNodeTemplate')\r\nvar createTextNodeTemplate = require('../nodeTemplate/createTextNodeTemplate')\r\nvar createNodeSvgTemplate = require('../nodeTemplate/createNodeSvgTemplate')\r\n\r\n\r\nclass Trtd extends Trtd_tianpan {\r\n    constructor(div, config){\r\n        super(div, config)\r\n\t\t// this.config = config;\r\n\t\t// this.modelChangedListener = config.modelChangedListener;\r\n\t\t// this.type = config.type;\r\n\t\t// this.diagram = {};\r\n        // this.model = config.model;\r\n        // this.tpid = config.tpid||Date.now();\r\n        // this.InitialFontSize = 18\r\n        // this.tdCurrentTheme = {\r\n        //     id: 6,\r\n        //     borderWidth: 2,\r\n        //     borderColor: \"black\",\r\n        //     groupColor: \"rgba(0,0,0,0)\",\r\n        //     groupStroke: \"rgba(0,0,0,0)\",\r\n        //     groupStrokeWidth: 0,\r\n        //     themeName: \"黑白\",\r\n        //     linkColor: \"black\",\r\n        //     colorRange: \"white\"\r\n        // }\r\n\t\t// // 初始化diagram\r\n\t\t// this.initDiagram(div, config);\r\n\t\t// this.initListener();\r\n\t\t// // Then you will need to construct a Model (usually a GraphLinksModel) for the Diagram, initialize its data by setting its Model.nodeDataArray and other properties, and then set the diagram's model.\r\n        // if(this.model){\r\n        //     this.initModel();\r\n        // }\r\n    }\r\n\r\n     /**\r\n     * 添加节点模板\r\n     */\r\n    addNodeTemplate(){\r\n\r\n        // myDiagram.nodeTemplateMap.add(\"dipan\", this.createDipanTemplate(layerThickness,tdDipanTextAngle));\r\n        // myDiagram.nodeTemplateMap.add(\"Root\", this.getDipanRootTemplate(layerThickness));\r\n        // myDiagram.nodeTemplateMap.add(\"text\", );\r\n        var myDiagram = this.diagram\r\n        myDiagram.nodeTemplateMap.add(\"0\", createNodeTemplate(this.diagram));\r\n        myDiagram.nodeTemplateMap.add(\"1\", createNodeTemplate(this.diagram));\r\n        myDiagram.nodeTemplateMap.add(\"2\", createNodeTemplate(this.diagram));\r\n        myDiagram.nodeTemplateMap.add(\"3\", createPictureSingleNodeTemplate(this.diagram));\r\n        myDiagram.nodeTemplateMap.add(\"4\", createPictureNodeTemplate(this.diagram));\r\n        myDiagram.nodeTemplateMap.add(\"text\", createTextNodeTemplate(this.diagram));\r\n        myDiagram.nodeTemplateMap.add(\"\", createNodeTemplate(this.diagram));\r\n\r\n        myDiagram.nodeTemplateMap.add(\"8\",createNodeSvgTemplate(this.diagram));\r\n\r\n        \r\n    }\r\n}\r\n\r\n// export default Trtd;\r\nmodule.exports = Trtd;\n\n\n// WEBPACK FOOTER //\n// ./src/diagram/huo.js","\r\nvar Trtd_tianpan = require('./tianpan')\r\nvar createNodeTemplate = require('../nodeTemplate/createNodeTemplate')\r\nvar createPictureSingleNodeTemplate = require('../nodeTemplate/createPictureSingleNodeTemplate')\r\nvar createPictureNodeTemplate = require('../nodeTemplate/createPictureNodeTemplate')\r\nvar createTextNodeTemplate = require('../nodeTemplate/createTextNodeTemplate')\r\nvar createNodeSvgTemplate = require('../nodeTemplate/createNodeSvgTemplate')\r\n\r\n\r\nclass Trtd extends Trtd_tianpan {\r\n    constructor(div, config){\r\n        super(div, config)\r\n\t\t// this.config = config;\r\n\t\t// this.modelChangedListener = config.modelChangedListener;\r\n\t\t// this.type = config.type;\r\n\t\t// this.diagram = {};\r\n        // this.model = config.model;\r\n        // this.tpid = config.tpid||Date.now();\r\n        // this.InitialFontSize = 18\r\n        // this.tdCurrentTheme = {\r\n        //     id: 6,\r\n        //     borderWidth: 2,\r\n        //     borderColor: \"black\",\r\n        //     groupColor: \"rgba(0,0,0,0)\",\r\n        //     groupStroke: \"rgba(0,0,0,0)\",\r\n        //     groupStrokeWidth: 0,\r\n        //     themeName: \"黑白\",\r\n        //     linkColor: \"black\",\r\n        //     colorRange: \"white\"\r\n        // }\r\n\t\t// // 初始化diagram\r\n\t\t// this.initDiagram(div, config);\r\n\t\t// this.initListener();\r\n\t\t// // Then you will need to construct a Model (usually a GraphLinksModel) for the Diagram, initialize its data by setting its Model.nodeDataArray and other properties, and then set the diagram's model.\r\n        // if(this.model){\r\n        //     this.initModel();\r\n        // }\r\n    }\r\n\r\n     /**\r\n     * 添加节点模板\r\n     */\r\n    addNodeTemplate(){\r\n        var myDiagram = this.diagram\r\n\r\n        myDiagram.nodeTemplateMap.add(\"0\", createNodeTemplate(this.diagram));\r\n        myDiagram.nodeTemplateMap.add(\"1\", createNodeTemplate(this.diagram));\r\n        myDiagram.nodeTemplateMap.add(\"2\", createNodeTemplate(this.diagram));\r\n        myDiagram.nodeTemplateMap.add(\"3\", createPictureSingleNodeTemplate(this.diagram));\r\n        myDiagram.nodeTemplateMap.add(\"4\", createPictureNodeTemplate(this.diagram));\r\n        myDiagram.nodeTemplateMap.add(\"text\", createTextNodeTemplate(this.diagram));\r\n        myDiagram.nodeTemplateMap.add(\"\", createNodeTemplate(this.diagram));\r\n\r\n        myDiagram.nodeTemplateMap.add(\"8\",createNodeSvgTemplate(this.diagram));\r\n\r\n        \r\n    }\r\n}\r\n\r\n\r\n// export default Trtd;\r\nmodule.exports = Trtd;\n\n\n// WEBPACK FOOTER //\n// ./src/diagram/shui.js","\r\nvar Trtd_tianpan = require('./tianpan')\r\nvar $ = go.GraphObject.make;\r\n\r\n// var createNodeTemplate = require('../nodeTemplate/createNodeTemplate')\r\nvar createPictureSingleNodeTemplate = require('../nodeTemplate/createPictureSingleNodeTemplate')\r\nvar createPictureNodeTemplate = require('../nodeTemplate/createPictureNodeTemplate')\r\nvar createTextNodeTemplate = require('../nodeTemplate/createTextNodeTemplate')\r\nvar createNodeSvgTemplate = require('../nodeTemplate/createNodeSvgTemplate')\r\n\r\n\r\nclass Trtd extends Trtd_tianpan {\r\n    constructor(div, config){\r\n        super(div, config)\r\n        this.initDiagramYun(div, config)\r\n\t\t// this.config = config;\r\n\t\t// this.modelChangedListener = config.modelChangedListener;\r\n\t\t// this.type = config.type;\r\n\t\t// this.diagram = {};\r\n        // this.model = config.model;\r\n        // this.tpid = config.tpid||Date.now();\r\n        // this.InitialFontSize = 18\r\n        // this.tdCurrentTheme = {\r\n        //     id: 6,\r\n        //     borderWidth: 2,\r\n        //     borderColor: \"black\",\r\n        //     groupColor: \"rgba(0,0,0,0)\",\r\n        //     groupStroke: \"rgba(0,0,0,0)\",\r\n        //     groupStrokeWidth: 0,\r\n        //     themeName: \"黑白\",\r\n        //     linkColor: \"black\",\r\n        //     colorRange: \"white\"\r\n        // }\r\n\t\t// // 初始化diagram\r\n\t\t// this.initDiagram(div, config);\r\n\t\t// this.initListener();\r\n\t\t// // Then you will need to construct a Model (usually a GraphLinksModel) for the Diagram, initialize its data by setting its Model.nodeDataArray and other properties, and then set the diagram's model.\r\n        // if(this.model){\r\n        //     this.initModel();\r\n        // }\r\n    }\r\n\r\n    initDiagramYun(div, config){\r\n        // this.diagram.contextMenu = ()=>{\r\n        //     var that = this\r\n        //     return getYunpanNodeContextMenu;\r\n        // },\r\n        var myDiagram = this.diagram;\r\n        var defaultConfig = {\r\n            contextMenu:this.getYunpanNodeContextMenu,\r\n            \"animationManager.isEnabled\": false,\r\n        }\r\n        this.diagram.commandHandler.doKeyDown = ()=>{\r\n            var that = this\r\n            return yunpanDokeyDownFn(that);\r\n        }\r\n        var diagramConfig = Object.assign(defaultConfig, config.diagramConfig);\r\n        this.diagram.setProperties(diagramConfig);\r\n        this.addNodeTemplate();\r\n        return myDiagram\r\n    }\r\n     /**\r\n     * 添加节点模板\r\n     */\r\n    addNodeTemplate(){\r\n\r\n        var that = this;\r\n        var myDiagram = this.diagram\r\n        myDiagram.nodeTemplateMap.add(\"yunpanx\",createNodeTemplatex(that));\r\n        myDiagram.nodeTemplateMap.add(\"yunpany\",createNodeTemplatey(that));\r\n        myDiagram.nodeTemplateMap.add(\"y\",yTemplate(that));\r\n        myDiagram.nodeTemplateMap.add(\"x\",yTemplate(that));\r\n        myDiagram.nodeTemplateMap.add(\"ytext\",tTemplate());\r\n        myDiagram.nodeTemplateMap.add(\"xtext\",tTemplate());\r\n        myDiagram.nodeTemplateMap.add(\"LogicXor\",LogicXor(that));\r\n        myDiagram.nodeTemplateMap.add(\"addtextTemplate\",addtextTemplate());\r\n\r\n        \r\n    }\r\n}\r\n\r\n// 返回云盘(轴)\r\nfunction createNodeTemplatex (that) {\r\n    return $(go.Node, \"Vertical\",\r\n        {\r\n            movable:false,\r\n            //allowMove:false,\r\n            //selectable:false,\r\n            locationSpot: go.Spot.Bottom,\r\n            location: new go.Point(0,0),\r\n            //locationObjectName: \"LINE\",\r\n            angle: 90,\r\n            click: function(e, node) {\r\n                console.log(node.data)\r\n            \r\n                //  yunpanmune(e, node)\r\n                \r\n            },\r\n            //selectionAdorned:false,//取消选择的默认边框\r\n            selectionAdornmentTemplate: function() {\r\n                var $ = go.GraphObject.make;\r\n              \r\n                    return $(go.Adornment, \"Spot\",\r\n                        $(go.Panel, \"Auto\",\r\n                            \r\n                            $(go.Shape, {\r\n                                figure: \"Linev\", \r\n                                // fill: 'rgba(255,0,120,0.2)', \r\n                                fill:\"blue\",\r\n                                stroke: \"blue\", \r\n                                strokeWidth: 2,\r\n                                \r\n                            },\r\n                            ),\r\n                            $(go.Shape,\r\n                            { \r\n                                // geometry: go.Geometry.parse(\"m 8,0 l -8,4 8,4 0,-1 -6,-3 6,-3 0,-1 z\", false).rotate(90),\r\n                                geometry: go.Geometry.parse(\"M584.641736 896S299.62889 148.827862 0-128c0 0 413.707108 34.128461 584.641736 212.37111 0 0 163.261205-185.842992 584.641735-212.37111 0 0-486.056523 686.369398-584.641735 1024z\", true).rotate(180).scale(0.0117,0.0117),\r\n                                fill: \"blue\",\r\n                                stroke: \"blue\",\r\n                                strokeWidth: 0,\r\n                                alignment: new go.Spot(0.5, 0, 0, 0)\r\n                            }\r\n                            ),\r\n                            \r\n                            $(go.Placeholder) // this represents the selected Node\r\n\r\n                        ),\r\n\r\n                    );\r\n              \r\n                \r\n        \r\n            }(),\r\n        \r\n            //  contextMenu: function(e,node){\r\n            //     var diagram = node.diagram;\r\n            //     console.log(\"node.data\",node)\r\n            //     console.log(\"node.datanode.datanode.datanode.data\")\r\n            //     interactions.nodeContextMenu\r\n            //     //diagram.model.setDataProperty(node.data, \"stroke\",\"blue\");  \r\n            // },\r\n            contextMenu:getYunpanNodeContextMenu,\r\n\r\n            \r\n            mouseEnter:function(e,node){\r\n                var diagram = node.diagram\r\n                //diagram.model.setDataProperty(node.data, \"stroke\",\"blue\");  \r\n            },\r\n            mouseLeave:function(e,node){\r\n                //console.log(node.data)\r\n                var diagram = e.diagram\r\n                //diagram.model.setDataProperty(node.data, \"stroke\",\"#8799c4\");\r\n            },\r\n        },\r\n        new go.Binding(\"angle\", \"angle\").makeTwoWay(),\r\n        new go.Binding(\"location\", \"loc\",go.Point.parse).makeTwoWay(go.Point.stringify),\r\n        new go.Binding(\"selectable\", \"selectable\").makeTwoWay(),\r\n        // 箭头  \r\n        $(go.Shape, \r\n        { \r\n            // shape: \"BackwardV\",\r\n            // \"m 8,0 l -8,4 8,4 0,-1 -6,-3 6,-3 0,-1 z\"\r\n            // figure: \"Backward\",\r\n            geometry: go.Geometry.parse(\"M584.641736 896S299.62889 148.827862 0-128c0 0 413.707108 34.128461 584.641736 212.37111 0 0 163.261205-185.842992 584.641735-212.37111 0 0-486.056523 686.369398-584.641735 1024z\", true).rotate(180).scale(0.0117,0.0117),\r\n            fill: \"rgb(135,153,196)\",\r\n            stroke: \"#8799c4\",\r\n            strokeWidth: 0,\r\n            strokeDashArray: [0, 0],\r\n        },\r\n        new go.Binding(\"stroke\", \"stroke\").makeTwoWay(),\r\n        new go.Binding(\"fill\", \"stroke\").makeTwoWay(),\r\n        ),\r\n        // 坐标 \r\n        $(go.Shape,{ \r\n            name: 'LINE',\r\n            figure: \"Linev\",\r\n            //geometryString:geometryString,\r\n            //geometry: Y_geometry,\r\n            //fill: \"#8799c4\",\r\n            stroke: \"#8799c4\",\r\n            strokeWidth:2,\r\n        \r\n            strokeDashArray: [4, 2],\r\n            // position: new go.Point(0, 0)\r\n            // desiredSize: new go.Size(10, 100)\r\n        },\r\n        //new go.Binding(\"fill\", \"fill\").makeTwoWay(),\r\n        new go.Binding(\"stroke\", \"stroke\").makeTwoWay(),\r\n        new go.Binding(\"strokeDashArray\", \"strokeDashArray\").makeTwoWay(),\r\n        new go.Binding(\"geometryString\", \"geometryString\").makeTwoWay(),\r\n        new go.Binding(\"strokeWidth\", \"strokeWidth\").makeTwoWay(),\r\n        // new go.Binding(\"stroke\", \"isSelected\", function(sel,node) {\r\n        //     console.log(\"2333\")\r\n        //     if (sel) return \"red\"; else return \"stroke\";\r\n            \r\n        // }).ofObject(\"\")\r\n        new go.Binding(\"stroke\", \"stroke\", function(v) {\r\n                return v instanceof go.Brush ? v.stroke : v;\r\n            }).makeTwoWay()\r\n        ),\r\n        \r\n    )\r\n\r\n    \r\n}\r\nfunction createNodeTemplatey (that) {\r\n    return $(go.Node, \"Vertical\",\r\n        {\r\n            movable:false,\r\n            //allowMove:false,\r\n            //selectable:false,\r\n            locationSpot: go.Spot.Bottom,\r\n            location: new go.Point(0,0),\r\n            //locationObjectName: \"LINE\",\r\n            // angle: 0,\r\n            click: function(e, node) {\r\n                console.log(node.data)\r\n            \r\n                //  yunpanmune(e, node)\r\n                \r\n            },\r\n            //selectionAdorned:false,//取消选择的默认边框\r\n            selectionAdornmentTemplate: function() {\r\n                var $ = go.GraphObject.make;\r\n              \r\n                    return $(go.Adornment, \"Spot\",\r\n                        $(go.Panel, \"Auto\",\r\n                            \r\n                            $(go.Shape, {\r\n                                figure: \"Linev\", \r\n                                fill: 'rgba(255,0,120,0.2)', \r\n                                stroke: \"blue\", \r\n                                strokeWidth: 2, \r\n                            },\r\n                            ),\r\n                            $(go.Shape,\r\n                            { \r\n                                // geometry: go.Geometry.parse(\"m 8,0 l -8,4 8,4 0,-1 -6,-3 6,-3 0,-1 z\", false).rotate(90),\r\n                                geometry: go.Geometry.parse(\"M584.641736 896S299.62889 148.827862 0-128c0 0 413.707108 34.128461 584.641736 212.37111 0 0 163.261205-185.842992 584.641735-212.37111 0 0-486.056523 686.369398-584.641735 1024z\", true).rotate(180).scale(0.0117,0.0117),\r\n                                fill: \"blue\",\r\n                                stroke: \"blue\",\r\n                                strokeWidth: 0,\r\n                                alignment: new go.Spot(0.5, 0, 0, 0)\r\n                            }\r\n                            ),\r\n                            $(go.Placeholder) // this represents the selected Node\r\n                        ),\r\n                    );\r\n            }(),\r\n        \r\n            //  contextMenu: function(e,node){\r\n            //     var diagram = node.diagram;\r\n            //     console.log(\"node.data\",node)\r\n            //     console.log(\"node.datanode.datanode.datanode.data\")\r\n            //     interactions.nodeContextMenu\r\n            //     //diagram.model.setDataProperty(node.data, \"stroke\",\"blue\");  \r\n            // },\r\n            contextMenu:getYunpanNodeContextMenu,\r\n            mouseEnter:function(e,node){\r\n                var diagram = node.diagram\r\n                //diagram.model.setDataProperty(node.data, \"stroke\",\"blue\");  \r\n            },\r\n            mouseLeave:function(e,node){\r\n                //console.log(node.data)\r\n                var diagram = e.diagram\r\n                //diagram.model.setDataProperty(node.data, \"stroke\",\"#8799c4\");\r\n            },\r\n        },\r\n        new go.Binding(\"location\", \"loc\",go.Point.parse).makeTwoWay(go.Point.stringify),\r\n        new go.Binding(\"selectable\", \"selectable\").makeTwoWay(),\r\n        // 箭头  \r\n        $(go.Shape, \r\n        {\r\n            geometry: go.Geometry.parse(\"M584.641736 896S299.62889 148.827862 0-128c0 0 413.707108 34.128461 584.641736 212.37111 0 0 163.261205-185.842992 584.641735-212.37111 0 0-486.056523 686.369398-584.641735 1024z\", true).rotate(180).scale(0.0117,0.0117),\r\n            fill: \"rgb(135,153,196)\",\r\n            stroke: \"#8799c4\",\r\n            strokeWidth: 0,\r\n            strokeDashArray: [0, 0],\r\n        },\r\n        new go.Binding(\"stroke\", \"stroke\").makeTwoWay(),\r\n        new go.Binding(\"fill\", \"stroke\").makeTwoWay(),\r\n        ),\r\n        // 坐标 \r\n        $(go.Shape,{ \r\n            name: 'LINE',\r\n            figure: \"Linev\",\r\n            stroke: \"#8799c4\",\r\n            strokeWidth:2,\r\n            strokeDashArray: [4, 2],\r\n        },\r\n        new go.Binding(\"stroke\", \"stroke\").makeTwoWay(),\r\n        new go.Binding(\"strokeDashArray\", \"strokeDashArray\").makeTwoWay(),\r\n        new go.Binding(\"geometryString\", \"geometryString\").makeTwoWay(),\r\n        new go.Binding(\"strokeWidth\", \"strokeWidth\").makeTwoWay(),\r\n        new go.Binding(\"stroke\", \"stroke\", function(v) {\r\n                return v instanceof go.Brush ? v.stroke : v;\r\n            }).makeTwoWay()\r\n        ),\r\n        \r\n    )\r\n\r\n    \r\n}\r\n\r\n\r\n\r\n\r\n// 返回云盘(xy坐标轴)\r\nfunction yTemplate(that){\r\n    var $ = go.GraphObject.make;\r\n    return $(go.Node, \"Vertical\",\r\n    {\r\n        movable:false,\r\n        locationSpot: go.Spot.Bottom,\r\n        location: new go.Point(0,0),\r\n        //locationObjectName: \"LINE\",\r\n        angle: 0,\r\n        //selectionAdorned:false,//取消选择的默认边框\r\n        //desiredSize: new go.Size(400, 800),\r\n        click: function(e, node) {\r\n            console.log(node.data) \r\n        },\r\n        //点击\r\n        selectionAdornmentTemplate: function() {\r\n            var $ = go.GraphObject.make;\r\n                return $(go.Adornment, \"Spot\",\r\n                    $(go.Panel, \"Auto\",\r\n                        $(go.Shape, {\r\n                            figure: \"Linev\", \r\n                            // fill: 'rgba(255,0,120,0.2)', \r\n                            fill: \"blue\",\r\n                            stroke: \"blue\", \r\n                            strokeWidth: 2,\r\n                        },\r\n                        ),\r\n                        $(go.Shape,\r\n                        { \r\n                            geometry: go.Geometry.parse(\"M584.641736 896S299.62889 148.827862 0-128c0 0 413.707108 34.128461 584.641736 212.37111 0 0 163.261205-185.842992 584.641735-212.37111 0 0-486.056523 686.369398-584.641735 1024z\", true).rotate(180).scale(0.0117,0.0117),\r\n                            // fill: 'rgba(255,0,120,0.2)', \r\n                            fill: \"blue\",\r\n                            stroke: \"blue\",\r\n                            strokeWidth: 2,\r\n                            alignment: new go.Spot(0.5, 0, 0, 0)\r\n                        }\r\n                        ),\r\n                        \r\n                        $(go.Placeholder) // this represents the selected Node\r\n\r\n                    ),\r\n\r\n                );\r\n        }(),\r\n        // contextClick:function(e, node) {\r\n        //     addaxis(e, node)\r\n        // },\r\n        mouseHover:function(e,node){   \r\n            // that.showNodeRemarkTips(e, node);\r\n        },\r\n        mouseEnter:function(e,node){\r\n            var diagram = node.diagram\r\n            diagram.model.setDataProperty(node.data, \"stroke\",\"blue\");\r\n            diagram.model.setDataProperty(node.data, \"fill\",\"blue\")   \r\n  \r\n        },\r\n        mouseLeave:function(e,node){\r\n            //console.log(node.data)\r\n            var diagram = node.diagram\r\n         \r\n                that.removeNodeRemarkTips(); \r\n            \r\n                diagram.model.setDataProperty(node.data, \"stroke\",\"#8799c4\");\r\n                diagram.model.setDataProperty(node.data, \"fill\",\"#8799c4\");\r\n            //removeNodeRemarkTips()   \r\n        }, \r\n    },\r\n    new go.Binding(\"angle\", \"angle\").makeTwoWay(),\r\n    new go.Binding(\"location\", \"loc\",go.Point.parse).makeTwoWay(go.Point.stringify),\r\n    // 箭头  \r\n    $(go.Shape, \r\n    { \r\n        // shape: \"BackwardV\",\r\n        // \"m 8,0 l -8,4 8,4 0,-1 -6,-3 6,-3 0,-1 z\"\r\n        //figure: \"BackwardV\",\r\n        geometry: go.Geometry.parse(\"M584.641736 896S299.62889 148.827862 0-128c0 0 413.707108 34.128461 584.641736 212.37111 0 0 163.261205-185.842992 584.641735-212.37111 0 0-486.056523 686.369398-584.641735 1024z\", true).rotate(180).scale(0.0117,0.0117),\r\n        fill: \"#8799c4\",\r\n        stroke: \"#8799c4\",\r\n        // strokeWidth: 0,\r\n        // strokeDashArray: [0, 0],\r\n        // position: new go.Point(-6, -1)\r\n    },\r\n    new go.Binding(\"fill\", \"fill\").makeTwoWay(),\r\n    new go.Binding(\"stroke\", \"stroke\").makeTwoWay(),\r\n    new go.Binding(\"strokeWidth\", \"strokeWidth\").makeTwoWay(),\r\n    ),\r\n    // 坐标 \r\n    $(go.Shape,{ \r\n        name: 'LINE',\r\n        //geometry: Y_geometry,\r\n        width:0,\r\n        height:1000,\r\n        fill: \"#8799c4\",\r\n        stroke: \"#8799c4\",\r\n        strokeWidth: 2,\r\n       \r\n        //strokeDashArray: [4, 2],\r\n        // position: new go.Point(0, 0)\r\n        // desiredSize: new go.Size(10, 100)\r\n    },\r\n    new go.Binding(\"height\", \"height\").makeTwoWay(),\r\n    new go.Binding(\"fill\", \"fill\").makeTwoWay(),\r\n    new go.Binding(\"stroke\", \"stroke\").makeTwoWay(),\r\n    new go.Binding(\"strokeDashArray\", \"strokeDashArray\").makeTwoWay(),\r\n    new go.Binding(\"strokeWidth\", \"strokeWidth\").makeTwoWay(),\r\n    ),\r\n    \r\n   \r\n    )\r\n}\r\n\r\n\r\n//返回云盘文本\r\nfunction tTemplate(){\r\n    var $ = go.GraphObject.make;\r\n    return $(go.Node, \"Vertical\",\r\n    {\r\n        movable:false,\r\n        //locationSpot:locationSpot,\r\n        //locationSpot: go.Spot.Right,\r\n        selectionAdorned:false,//取消选择的默认边框\r\n        click: function(e, node) {\r\n            // showNodeToolBar(e,node);\r\n            console.log(node.data)\r\n        },\r\n       \r\n    },\r\n    //(\"locationSpot\", \"locationSpot\",node.data.group > 0 ? \"go.Spot.Right\":\"go.Spot.Top\").makeTwoWay(),\r\n    //new go.Binding(\"locationSpot\", \"locationSpot\",function(v,node)),\r\n    new go.Binding(\"location\", \"loc\",go.Point.parse).makeTwoWay(go.Point.stringify),\r\n    new go.Binding(\"locationSpot\", \"dir\", function(d) { return spotConverter(d, false); }),\r\n    $(go.Panel, \"Vertical\",\r\n    //{ width: 100, defaultStretch: go.GraphObject.None },\r\n    $(go.TextBlock, {\r\n            name: \"TEXT\",\r\n            alignment: new go.Spot(0, 1),\r\n            // font: \"bold 14px arial,\",\r\n            font: \"14px 微软雅黑\",\r\n            width:70,\r\n            // height:40,\r\n            //maxLines:7,\r\n            // spacingAbove: 4,\r\n            // spacingBelow: 4,\r\n            // editable :false,//禁止编辑\r\n            wrap: go.TextBlock.WrapDesiredSize,\r\n            // margin:5,\r\n            textAlign: \"center\",\r\n            // verticalAlignment :\"left\",\r\n            editable: true,\r\n            isMultiline: false,//单行\r\n            // margin: 10, \r\n            margin: 0, \r\n            stroke: \"black\",\r\n            isMultiline: true,\r\n            //overflow: go.TextBlock.OverflowClip,\r\n            //wrap: go.TextBlock.WrapDesiredSize,\r\n            alignment: go.Spot.Right,\r\n            portId: \"TEXT\",\r\n            stretch: go.GraphObject.Fill,\r\n            //background:\"green\"\r\n            // DoubleClick : false\r\n            \r\n        },\r\n        new go.Binding(\"text\", \"text\").makeTwoWay(),\r\n        new go.Binding(\"stroke\", \"textStroke\").makeTwoWay(),\r\n        new go.Binding(\"font\", \"font\").makeTwoWay(),\r\n        new go.Binding(\"margin\", \"margin\").makeTwoWay()\r\n        )\r\n    )\r\n    )}\r\n \r\n\r\nfunction spotConverter(dir, from) {\r\n    if (dir === \"right\") {\r\n    return  go.Spot.Right;\r\n    } else if(dir === \"top\") {\r\n    return (go.Spot.Top);\r\n    }\r\n}\r\n\r\n//返回云盘增加文本\r\nfunction addtextTemplate() {\r\n    var $ = go.GraphObject.make;\r\n    var properties = {\r\n        figure: \"Rectangle\",\r\n        fill: \"rgba(0,0,0,0)\",\r\n        strokeWidth: 1,\r\n        stroke: \"rgba(0,0,0,0)\",\r\n        fontSize: 15,\r\n        font: \"sans-serif\"\r\n    };\r\n\r\n    return $(go.Node, \"Spot\", {\r\n            \"_controlExpand\": true,\r\n            layerName: \"Foreground\",\r\n            locationSpot: go.Spot.Center,\r\n            resizeCellSize: new go.Size(10, 10),\r\n            locationObjectName: \"SHAPE\",\r\n            resizable: true,\r\n            resizeObjectName: \"SHAPE\", // user can resize the Shape\r\n            rotatable: true,\r\n            location: new go.Point(0, 0),\r\n            toMaxLinks: 1,\r\n            click: function(e, node) {\r\n                console.log(node.data)\r\n                // showNodeToolBar(e,node);\r\n            },\r\n            layoutConditions: go.Part.LayoutStandard,\r\n            alignment: go.Spot.Center,\r\n            alignmentFocus: go.Spot.Center\r\n        },\r\n        new go.Binding(\"location\", \"loc\", go.Point.parse).makeTwoWay(go.Point.stringify),\r\n        new go.Binding(\"isShadowed\", \"isShadowed\").makeTwoWay(),\r\n        new go.Binding(\"angle\", \"angle\").makeTwoWay(),\r\n        new go.Binding(\"selectable\", \"selectable\").makeTwoWay(),\r\n        new go.Binding(\"layerName\", \"layerName\", function(v, d) {\r\n            return v ? v : \"\";\r\n        }).makeTwoWay(function(v) {\r\n            return v;\r\n        }),\r\n        $(go.Shape, {\r\n                strokeDashArray: null,\r\n                // strokeDashOffset:10,\r\n                name: \"SHAPE\",\r\n                figure: \"Rectangle\",\r\n                fill: \"rgba(0,0,0,0)\",\r\n                fromLinkable: true,\r\n                toLinkable: true,\r\n                cursor: \"pointer\",\r\n                minSize: new go.Size(50, 50),\r\n                strokeWidth: 2,\r\n                stroke: \"rgba(0,0,0,0)\",\r\n                portId: \"\"\r\n            },\r\n            new go.Binding(\"strokeDashArray\", \"strokeDashArray\", function(v) {\r\n                return [v.split()[0], v.split()[1]];\r\n            }).makeTwoWay(function(v) {\r\n                return v[0] + \" \" + v[1];\r\n            }), //保留，设置边线样式\r\n            new go.Binding(\"fill\", \"fill\", function(v, obj) {\r\n                return v instanceof go.Brush ? v.color : v;\r\n            }).makeTwoWay(),\r\n            // new go.Binding(\"fill\", \"isSelected\", function(s, obj) { return s ? \"red\" : obj.part.data.color; }).ofObject()),\r\n            new go.Binding(\"width\", \"width\", function(v) {\r\n                //alert(v);\r\n                return v;\r\n            }).makeTwoWay(function(v) {\r\n                return v;\r\n            }),\r\n            new go.Binding(\"height\", \"height\", function(v) {\r\n                //alert(v);\r\n                return v;\r\n            }).makeTwoWay(function(v) {\r\n                return v;\r\n            }),\r\n            new go.Binding(\"stroke\", \"stroke\", function(v) {\r\n                return v instanceof go.Brush ? v.stroke : v;\r\n            }).makeTwoWay(),\r\n            new go.Binding(\"strokeWidth\", \"strokeWidth\", function(d) {\r\n                return d;\r\n            }).makeTwoWay(function(d) {\r\n                return d;\r\n            }),\r\n            new go.Binding(\"figure\", \"figure\").makeTwoWay(), {\r\n                figure: properties.figure,\r\n                fill: properties.fill,\r\n                strokeWidth: properties.strokeWidth,\r\n                stroke: properties.stroke\r\n            }\r\n        ),\r\n        $(go.Shape, {\r\n                name: \"SHAPE_Back\",\r\n                figure: \"Rectangle\",\r\n                fill: \"rgba(0,0,0,0)\",\r\n                // fromLinkable: true,\r\n                // toLinkable: true,\r\n                strokeWidth: 0\r\n            },\r\n            new go.Binding(\"width\", \"width\", function(v) {\r\n                return v;\r\n            }).ofObject(\"SHAPE\"),\r\n            new go.Binding(\"height\", \"height\", function(v) {\r\n                return v;\r\n            }).ofObject(\"SHAPE\")\r\n        ),\r\n        $(go.TextBlock, {\r\n                name: \"TEXT\",\r\n                alignment: new go.Spot(0.5, 0.5),\r\n                font: \"bold \" + 18 + \"px 幼圆\",\r\n                editable: true,\r\n                //margin: 3, editable: true,\r\n                stroke: \"black\",\r\n                isMultiline: true,\r\n                overflow: go.TextBlock.OverflowClip,\r\n                wrap: go.TextBlock.WrapDesiredSize,\r\n                textAlign: \"center\",\r\n                spacingAbove: 4,\r\n                spacingBelow: 4,\r\n                portId: \"TEXT\",\r\n                stretch: go.GraphObject.Fill\r\n            },\r\n            new go.Binding(\"textAlign\", \"textAlign\", function(v) {\r\n                return _.contains(['start', 'center', 'end'], v) ? v : \"center\";\r\n            }).makeTwoWay(),\r\n            new go.Binding(\"spacingAbove\", \"spacingline\", function(v) {\r\n                return tdTransToNum(v, 4);\r\n            }).makeTwoWay(),\r\n            new go.Binding(\"spacingBelow\", \"spacingline\", function(v) {\r\n                return tdTransToNum(v, 4);\r\n            }).makeTwoWay(),\r\n            new go.Binding(\"width\", \"width\", function(v) {\r\n                return v;\r\n            }).ofObject(\"SHAPE\"),\r\n            // new go.Binding(\"height\", \"height\", function (v) {\r\n            //   return v;\r\n            // }).ofObject(\"SHAPE\"),\r\n            new go.Binding(\"text\", \"text\").makeTwoWay(),\r\n            new go.Binding(\"stroke\", \"textStroke\").makeTwoWay(),\r\n            new go.Binding(\"font\", \"font\").makeTwoWay()\r\n        )\r\n    );\r\n}\r\n\r\n\r\n\r\n//提示框\r\n  var shapeShowblur = null;\r\n  var circleStroke = null;\r\n\r\n  function showToolTip(obj, diagram) {\r\n    var box = document.getElementById(\"infoBoxHolder\");\r\n    var contextMenu= document.getElementsByClassName(\"context-menu\")[0];\r\n    //  console.log(contextMenu)  \r\n    \r\n    if (obj !== null) {\r\n      var node = obj.part;\r\n      var e = diagram.lastInput;\r\n      var circle = node.findObject(\"CIRCLE\");\r\n      var shape= node.findObject(\"SHAPE\"); \r\n    //   console.log(circle)\r\n    if(circle !== null) circle.stroke = \"#57617a\";\r\n    if(shape !== null)  shape.shadowBlur = 10;\r\n\r\n    if (shapeShowblur !== null && shapeShowblur !== shape) {\r\n        \r\n        shapeShowblur.shadowBlur = 0;\r\n        shapeShowblur = shape;\r\n  \r\n        if(box&&(contextMenu.style.display === \"\"||contextMenu.style.display === \"none\")){\r\n            box.style.display = \"block\";\r\n        }\r\n    } else{\r\n        \r\n        shapeShowblur = shape;\r\n    }\r\n\r\n      \r\n      \r\n      if (circleStroke !== null && circleStroke !== circle) \r\n      circleStroke.stroke = null;\r\n      circleStroke = circle;\r\n        if(box&&(contextMenu.style.display === \"\"||contextMenu.style.display === \"none\")){\r\n            box.style.display = \"block\";\r\n        }\r\n    } else {\r\n      if (circleStroke !== null) \r\n      circleStroke.stroke = null;\r\n      circleStroke = null;\r\n    //   document.getElementById(\"infoBox\").innerHTML = \"\";\r\n     \r\n      \r\n    }\r\n\r\n    \r\n  }\r\n    \r\n\r\n  \r\n\r\n\r\n\r\n\r\n\r\n// myDiagram.nodeTemplate =\r\n// $(go.Node,\r\n//   $(go.Shape, \"Circle\",\r\n//     {\r\n//       desiredSize: new go.Size(28, 28),\r\n//       fill: radBrush, strokeWidth: 0, stroke: null\r\n//     }), // no outline\r\n//   {\r\n//     locationSpot: go.Spot.Center,\r\n//     click: showArrowInfo,  // defined below\r\n//     toolTip:  // define a tooltip for each link that displays its information\r\n//         $(\"ToolTip\",\r\n//           $(go.TextBlock, { margin: 4 },\r\n//             new go.Binding(\"text\", \"\", infoString).ofObject())\r\n//         )\r\n//   }\r\n// );\r\n\r\n//返回云盘图标\r\nfunction LogicXor(that){\r\n    var $ = go.GraphObject.make;\r\n    return $(go.Node, \"Vertical\",\r\n        {\r\n            movable:false,\r\n            locationSpot: go.Spot.Top,\r\n            location: new go.Point(860,5),\r\n            mouseHover:function(e,node){\r\n                that.showNodeRemarkTips(e, node);\r\n            },\r\n            mouseLeave:function(e,node){\r\n                that.removeNodeRemarkTips();    \r\n            },\r\n            click:function(e,node){\r\n             \r\n                console.log(node.data)\r\n                console.log(Number(node.data.loc.split(' ')[1])>0)\r\n                if(Number(node.data.loc.split(' ')[1])>0){\r\n                    addy(e)\r\n                }else{\r\n                    addx(e)\r\n                }\r\n            }\r\n        },     \r\n        new go.Binding(\"location\", \"loc\",go.Point.parse).makeTwoWay(go.Point.stringify),\r\n        $(go.Shape, {\r\n            figure: \"LogicXor\", \r\n            stroke: \"#8799c4\", \r\n            width:30,\r\n            strokeWidth: 2,\r\n            \r\n        },\r\n        )\r\n\r\n    )\r\n}\r\n\r\nfunction yunpanDokeyDownFn (that) {\r\n    // console.log('myDiagram:', diagram);\r\n    // var myDiagram = diagram.diagram;\r\n    // var e = myDiagram.lastInput;\r\n    // var cmd = myDiagram.commandHandler;\r\n    // var node = myDiagram.selection.first();\r\n    var diagram = that.diagram\r\n    // var that = this;\r\n    var myDiagram = that.diagram;\r\n    var e = myDiagram.lastInput;\r\n    var node = myDiagram.selection.first();\r\n    var cmd = myDiagram.commandHandler;\r\n    if (e.key === \"Del\"|| e.event.keyCode === 8) { \r\n        // console.log(myDiagram.model.nodeDataArray)\r\n        console.log(\"0\",myDiagram.model.nodeDataArray)\r\n        del(e)    \r\n    }\r\n\r\n    if(e.event.ctrlKey){\r\n        //增加y轴\r\n        if (e.event.keyCode === 89) {\r\n            if((node&&node.data.category!== \"addtextTemplate\")||(!node)){\r\n                addy(e);\r\n            }\r\n        }\r\n        //增加x轴\r\n        if (e.event.keyCode === 88) {\r\n            \r\n            if((node&&node.data.category!== \"addtextTemplate\")||(!node)){\r\n                addx(e);\r\n            }\r\n        }\r\n        e.bubbles = false; \r\n        }\r\n\r\n    }\r\n\r\n\r\nfunction getYunpanNodeContextMenu() {\r\n\r\n    return $(go.Adornment, \"Vertical\",\r\n        $(\"ContextMenuButton\",\r\n            $(go.TextBlock, \"删除 DEl\"), {\r\n                click: function(e,node) {\r\n                    del(e);\r\n                }\r\n            }),\r\n        $(\"ContextMenuButton\",\r\n            $(go.TextBlock, \"增加 CTRL+X/Y\"), {\r\n                click: function(e, node) {\r\n                    if(node.data.loc.split(\" \")[1] === \"0\"&&node.data.category!==\"x\"){\r\n                        addy(e)\r\n                    }else if(node.data.loc.split(\" \")[0] === \"0\"&&node.data.category!==\"y\"){\r\n                        addx(e)\r\n                    }; \r\n                }\r\n            })\r\n        \r\n    );\r\n}\r\n//云盘增加y轴节点\r\nfunction addy(e){\r\n    let myDiagram = e.diagram;\r\n    let node = myDiagram.selection.first();\r\n    let nodeDataArray = myDiagram.model.nodeDataArray;\r\n    console.log(nodeDataArray)\r\n    let yl = 0;\r\n    let stroke =\"#8799c4\";\r\n    let strokeDashArray=[4, 2];\r\n    let loc = 0;\r\n    let locy = '';\r\n    let height = 260 ;\r\n    nodeDataArray.forEach(function(data){\r\n        \r\n        if(data.category === \"y\"){\r\n            yl = data.height - 10  \r\n        }\r\n        \r\n        if(data.category===\"x\"){\r\n        //console.log(data)\r\n        height = data.height +200\r\n        myDiagram.model.startTransaction(\"addheight\");\r\n        myDiagram.model.setDataProperty(data, \"height\",height);\r\n        myDiagram.model.commitTransaction(\"addheight\");\r\n        }\r\n        if(data.category === 'LogicXor'){\r\n            let locL = +data.loc.split(' ')[0]\r\n            if(locL>0){\r\n                let loclc = (locL + 200) + \" 5\" \r\n                myDiagram.model.startTransaction();\r\n                myDiagram.model.setDataProperty(data, \"loc\",loclc);\r\n                myDiagram.model.commitTransaction();\r\n            }\r\n            \r\n        }\r\n    })\r\n    nodeDataArray.forEach(function(data){\r\n        if(data.loc.split(' ')[0] === '0'&&data.category!== \"addtextTemplate\"){\r\n            let l = height - 10;\r\n            let geometryStringx = \"M 0 0 L 0 \"+ l;\r\n            myDiagram.model.startTransaction(\"changel\");\r\n            myDiagram.model.setDataProperty(data, \"geometryString\",geometryStringx);\r\n            myDiagram.model.commitTransaction(\"changel\");\r\n        }\r\n    })\r\n    let geometryString= \"M 0 0 L 0 \"+yl\r\n    \r\n    if(node && (node.data.category === 'y'||node.data.loc.split(' ')[0] !== '0')&&node.data.category !== 'x'&&node.data.category !== 'LogicXor'&&node.data.category!== \"addtextTemplate\"){\r\n        //if()\r\n        console.log(node.data)\r\n        loc = +node.data.loc.split(' ')[0] + 200;\r\n        locy = loc + \" 0\"\r\n\r\n        //移动位置\r\n        nodeDataArray.forEach(function(data){\r\n            console.log(loc)\r\n            if(data.category !== 'LogicXor'&&data.category!== \"addtextTemplate\"){\r\n                let loco = +data.loc.split(' ')[0]\r\n                if(loco >= loc){\r\n                    loco = loco+200;\r\n                    var locy = loco + \" 0\"\r\n                    myDiagram.model.startTransaction(\"changeloc\");\r\n                    myDiagram.model.setDataProperty(data, \"loc\",locy);\r\n                    myDiagram.model.commitTransaction(\"changeloc\");\r\n                }\r\n            }\r\n            \r\n    })\r\n        \r\n    }else {\r\n        let arr =[]\r\n        nodeDataArray.forEach(function(data){\r\n            if(data.loc.split(' ')[0] !== '0'&&data.category !== 'LogicXor'&&data.category!== \"addtextTemplate\"){\r\n                arr.push(+data.loc.split(' ')[0])\r\n            }\r\n        })\r\n        if(arr.length === 0){\r\n            // geometryString = \"M 0 0 L 0 200\";\r\n            locy = \"200 0\"\r\n        }else{\r\n            var max= Math.max.apply(null,arr)+200 ;\r\n            locy = max + \" 0\" \r\n        }\r\n    }\r\n    \r\n    \r\n\r\n    let newy = {key:guid(),category: \"yunpany\",stroke:stroke,geometryString:geometryString,strokeDashArray:strokeDashArray,loc: locy };\r\n    let newytext = {key:guid(),category: \"xtext\",margin:10,\"textStroke\":\"#666666\",text:\"维度\"+locy.split(' ')[0]/200,loc: locy,dir: \"top\" };\r\n    myDiagram.model.startTransaction(\"addy\");\r\n    myDiagram.model.addNodeData(newy);\r\n    myDiagram.model.addNodeData(newytext);\r\n    myDiagram.model.commitTransaction(\"addy\");\r\n\r\n        \r\n}\r\n\r\n//云盘增加x轴节点\r\nfunction addx(e){\r\n    let myDiagram = e.diagram;\r\n    let node = myDiagram.selection.first();\r\n    let nodeDataArray = myDiagram.model.nodeDataArray;\r\n    let xl = 0;\r\n    let stroke =\"#8799c4\";\r\n    let strokeDashArray=[4, 2];\r\n    let loc = 0;\r\n    let locy = '';\r\n    let height = 260 ;\r\n    nodeDataArray.forEach(function(data){\r\n        \r\n        if(data.category === \"x\"){\r\n            xl = data.height - 10  \r\n        }\r\n        if(data.category===\"y\"){\r\n        //console.log(data)\r\n        height = data.height +200\r\n        myDiagram.model.startTransaction(\"addheight\");\r\n        myDiagram.model.setDataProperty(data, \"height\",height);\r\n        myDiagram.model.commitTransaction(\"addheight\");\r\n        }\r\n        if(data.category === 'LogicXor'){\r\n            let locL = +data.loc.split(' ')[1]\r\n            if(locL < 0){\r\n                let loclc =\"-20 \"+(locL - 200)\r\n                myDiagram.model.startTransaction();\r\n                myDiagram.model.setDataProperty(data, \"loc\",loclc);\r\n                myDiagram.model.commitTransaction();\r\n            }\r\n            \r\n        }\r\n    })\r\n    nodeDataArray.forEach(function(data){\r\n        if(data.loc.split(' ')[1] === '0'&&data.category!== \"addtextTemplate\"){\r\n            let l = height - 10;\r\n            let geometryStringx = \"M 0 0 L 0 \"+ l;\r\n            myDiagram.model.startTransaction(\"changel\");\r\n            myDiagram.model.setDataProperty(data, \"geometryString\",geometryStringx);\r\n            myDiagram.model.commitTransaction(\"changel\");\r\n        }\r\n    })\r\n    let geometryString= \"M 0 0 L 0 \"+xl\r\n    \r\n    if(node && (node.data.category === 'x'||node.data.loc.split(' ')[1] !== '0')&&node.data.category !== 'y'&&node.data.category !== 'LogicXor'&&node.data.category!== \"addtextTemplate\"){\r\n        //if()\r\n        console.log(node.data)\r\n        loc = +node.data.loc.split(' ')[1] - 200;\r\n        locy = \"0 \"+loc;\r\n\r\n        //移动位置\r\n        nodeDataArray.forEach(function(data){\r\n            console.log(loc)\r\n            if(data.category !== 'LogicXor'&&data.category!== \"addtextTemplate\"){\r\n                let loco = +data.loc.split(' ')[1]\r\n                if(loco <= loc){\r\n                    loco = loco-200;\r\n                    var locy = \"0 \"+loco\r\n                    myDiagram.model.startTransaction(\"changeloc\");\r\n                    myDiagram.model.setDataProperty(data, \"loc\",locy);\r\n                    myDiagram.model.commitTransaction(\"changeloc\");\r\n                }\r\n            }else{\r\n\r\n            }\r\n            \r\n    })\r\n        \r\n    }else {\r\n        let arr =[]\r\n        nodeDataArray.forEach(function(data){\r\n            if(data.loc.split(' ')[1] !== '0'&&data.category !== 'LogicXor'&&data.category!== \"addtextTemplate\"){\r\n                arr.push(+data.loc.split(' ')[1])\r\n            }\r\n        })\r\n        if(arr.length === 0){\r\n            // geometryString = \"M 0 0 L 0 200\";\r\n            locy = \"0 -200\"\r\n        }else{\r\n            var min= Math.min.apply(null,arr)-200 ;\r\n            locy = \"0 \"+min; \r\n        }\r\n    }\r\n    \r\n\r\n    let newx = {key:guid(),category: \"yunpanx\",stroke:stroke,geometryString:geometryString,strokeDashArray:strokeDashArray,loc: locy };\r\n    let newxtext = {key:guid(),category: \"ytext\",text:\"维度\"+Math.abs(+locy.split(' ')[1]/200),\"textStroke\":\"#666666\",loc: locy,dir: \"right\" };\r\n    myDiagram.model.startTransaction(\"addx\");\r\n    myDiagram.model.addNodeData(newx);\r\n    myDiagram.model.addNodeData(newxtext);\r\n    myDiagram.model.commitTransaction(\"addx\");\r\n\r\n\r\n}\r\n\r\n\r\n//云盘删除节点\r\nfunction del(e){\r\n    let myDiagram = e.diagram;\r\n    let node = myDiagram.selection.first();\r\n    console.log(\"1\",myDiagram.model.nodeDataArray)\r\n    //text和轴\r\n    if (node) {\r\n        console.log(\"11111111111111111111111\")\r\n        //非xy的坐标轴\r\n        console.log(node.data)\r\n        //判断点击y子轴\r\n        if(node.data.category === \"yunpany\"){\r\n           \r\n            let loc = node.data.loc\r\n            let locx = +node.data.loc.split(' ')[0]\r\n            console.log(locx)\r\n            myDiagram.model.nodeDataArray.forEach(function(data){\r\n\r\n                //如果不加判断，点击轴删除，只会删除轴，不会删除坐标\r\n                // debugger\r\n                // if(data.category===\"yunpany\"&&data.loc === loc){\r\n                //     myDiagram.model.startTransaction(\"deletAxis\");\r\n                //     //删除轴\r\n                //     myDiagram.model.removeNodeData(node.data);\r\n                //     myDiagram.model.removeNodeData(data);\r\n                //     myDiagram.model.commitTransaction(\"deletAxis\");\r\n                // }else\r\n                 if(data.category===\"xtext\"&&data.loc === loc){\r\n                    console.log(\"data\",data)\r\n                    myDiagram.model.startTransaction(\"delettext\");\r\n                    //删除轴\r\n                    myDiagram.model.removeNodeData(node.data);\r\n                    //删除text\r\n                    myDiagram.model.removeNodeData(data);\r\n                    \r\n                    myDiagram.model.commitTransaction(\"delettext\");\r\n                }\r\n        \r\n            })\r\n            //改变其他轴长度及坐标\r\n            console.log(\"2\",myDiagram.model.nodeDataArray)\r\n            changelen(locx,myDiagram)\r\n            \r\n        //x\r\n        }else if(node.data.category === \"yunpanx\"){\r\n            console.log(\"x\")\r\n            let loc = node.data.loc\r\n            let locx = +node.data.loc.split(' ')[1]\r\n            myDiagram.model.nodeDataArray.forEach(function(data){\r\n                // if(data.category===\"ytext\"&&data.loc === loc){\r\n                //     myDiagram.model.startTransaction(\"delettext\");\r\n                //     myDiagram.model.removeNodeData(data);\r\n                //     myDiagram.model.removeNodeData(node.data);\r\n                //     myDiagram.model.commitTransaction(\"delettext\");\r\n                // }else \r\n                if(data.category===\"ytext\"&&data.loc === loc){\r\n                    myDiagram.model.startTransaction(\"delettext\");\r\n                    myDiagram.model.removeNodeData(data);\r\n                    myDiagram.model.removeNodeData(node.data);\r\n                    myDiagram.model.commitTransaction(\"delettext\");\r\n                }\r\n                \r\n            \r\n            })\r\n            \r\n            changelenx(locx,myDiagram)\r\n            \r\n        }else if(node.data.category!==\"ytext\"&&node.data.category!==\"xtext\"&&node.data.category!==\"LogicXor\"&&node.data.category!==\"x\"&&node.data.category!==\"y\" ){\r\n            myDiagram.model.startTransaction();\r\n            myDiagram.model.removeNodeData(node.data);\r\n            myDiagram.model.commitTransaction();\r\n        }      \r\n        \r\n    }\r\n\r\n}\r\n\r\n//改变x轴长度\r\n\r\nfunction changelen(locx,myDiagram){\r\n    console.log(\"3\",myDiagram.model.nodeDataArray)\r\n    myDiagram.model.nodeDataArray.forEach(function(data){\r\n                                \r\n        //Math.abs(key)\r\n        let datalocx = +data.loc.split(' ')[0]\r\n        console.log(data.loc)\r\n        console.log(datalocx)\r\n        //改变位置\r\n        if(datalocx > locx){\r\n            if(data.category===\"yunpany\"||data.category===\"xtext\"){\r\n                let l = datalocx-200\r\n                let loc = l+\" 0\"\r\n                console.log(loc)\r\n                myDiagram.model.startTransaction(\"changea\");\r\n                myDiagram.model.setDataProperty(data, \"loc\",loc);\r\n                myDiagram.model.commitTransaction(\"changea\");\r\n            }\r\n            \r\n        }\r\n        //改变长度\r\n     \r\n            console.log(data)\r\n            if(data.category===\"x\"){\r\n                let height = data.height -200\r\n                myDiagram.model.startTransaction(\"cheight\");\r\n                myDiagram.model.setDataProperty(data, \"height\",height);\r\n                myDiagram.model.commitTransaction(\"cheight\");\r\n            }else if(data.category===\"yunpanx\"){\r\n                let gs = NaN\r\n                let l = (data.geometryString||\"\").split(' ')\r\n                console.log(l)\r\n                if(l[5]){\r\n                    gs = +l[5] - 200;\r\n                }else{\r\n                    gs = +l[3] - 200;\r\n                }\r\n                console.log(gs)\r\n                let gs2 = gs + \"\";\r\n                let gs3 = \"M 0 0  L 0 \"+gs2;\r\n                myDiagram.model.startTransaction(\"changea\");\r\n                myDiagram.model.setDataProperty(data, \"geometryString\",gs3);\r\n                myDiagram.model.commitTransaction(\"changea\");\r\n            }\r\n        \r\n        if(data.category === 'LogicXor'){\r\n            let locL = +data.loc.split(' ')[0]\r\n            if(locL > 0){\r\n                let loclc =(locL - 200) +\" 5\"\r\n                myDiagram.model.startTransaction();\r\n                myDiagram.model.setDataProperty(data, \"loc\",loclc);\r\n                myDiagram.model.commitTransaction();\r\n            }\r\n        }\r\n    })\r\n}\r\n\r\nfunction changelenx(locx,myDiagram){\r\n    console.log(myDiagram.model.nodeDataArray)\r\n    myDiagram.model.nodeDataArray.forEach(function(data){\r\n\r\n    let datalocx = +data.loc.split(' ')[1]\r\n    // console.log(data.loc)\r\n    // console.log(datalocx)\r\n    //改变位置\r\n    if(datalocx < locx){\r\n        if(data.category===\"yunpanx\"||data.category===\"ytext\"){\r\n            let l = datalocx+200\r\n            let loc = \"0 \"+l\r\n            console.log(\"节点\",data)\r\n            console.log(\"改变位置\",loc)\r\n            myDiagram.model.startTransaction(\"changea\");\r\n            myDiagram.model.setDataProperty(data, \"loc\",loc);\r\n            myDiagram.model.commitTransaction(\"changea\");\r\n        }\r\n        \r\n        \r\n    }\r\n    //改变长度\r\n    if(data.category===\"y\"){\r\n        let height = data.height -200\r\n        console.log(\"节点\",data)\r\n        console.log(\"改变坐标轴长度没有angle\",height)\r\n        myDiagram.model.startTransaction(\"cheight\");\r\n        myDiagram.model.setDataProperty(data, \"height\",height);\r\n        myDiagram.model.commitTransaction(\"cheight\");\r\n    }else if(data.category===\"yunpany\"){\r\n        let gs = NaN\r\n        let l = (data.geometryString||\"\").split(' ')\r\n        if(l[5]){\r\n            gs = +l[5] - 200;\r\n        }else{\r\n            gs = +l[3] - 200;\r\n        }\r\n        // console.log(gs)\r\n        let gs2 = gs + \"\";\r\n        let gs3 = \"M 0 0  L 0 \"+gs2;\r\n        console.log(\"节点\",data)\r\n        console.log(\"改变y轴长度没有angle\",gs3)\r\n        myDiagram.model.startTransaction(\"changea\");\r\n        myDiagram.model.setDataProperty(data, \"geometryString\",gs3);\r\n        myDiagram.model.commitTransaction(\"changea\");\r\n    }   \r\n\r\n    if(data.category === 'LogicXor'){\r\n            let locL = +data.loc.split(' ')[1]\r\n            if(locL < 0){\r\n                let loclc =\"-20 \"+(locL + 200) \r\n                myDiagram.model.startTransaction();\r\n                myDiagram.model.setDataProperty(data, \"loc\",loclc);\r\n                myDiagram.model.commitTransaction();\r\n            }\r\n        }\r\n    })\r\n}\r\nfunction guid() {\r\n    function S4() {\r\n        return (((1+Math.random())*0x10000)|0).toString(16).substring(1);\r\n    }\r\nreturn (S4()+S4()+\"-\"+S4()+\"-\"+S4()+\"-\"+S4()+\"-\"+S4()+S4()+S4());\r\n}\r\n\r\n// export default Trtd;\r\nmodule.exports = Trtd;\n\n\n// WEBPACK FOOTER //\n// ./src/diagram/yunpan.js","\r\nvar Trtd_tianpan = require('./tianpan')\r\nvar createNodeTemplate = require('../nodeTemplate/createNodeTemplate')\r\nvar createPictureSingleNodeTemplate = require('../nodeTemplate/createPictureSingleNodeTemplate')\r\nvar createPictureNodeTemplate = require('../nodeTemplate/createPictureNodeTemplate')\r\nvar createTextNodeTemplate = require('../nodeTemplate/createTextNodeTemplate')\r\nvar createNodeSvgTemplate = require('../nodeTemplate/createNodeSvgTemplate')\r\n\r\n\r\nclass Trtd extends Trtd_tianpan {\r\n    constructor(div, config){\r\n        super(div, config)\r\n\t\t// this.config = config;\r\n\t\t// this.modelChangedListener = config.modelChangedListener;\r\n\t\t// this.type = config.type;\r\n\t\t// this.diagram = {};\r\n        // this.model = config.model;\r\n        // this.tpid = config.tpid||Date.now();\r\n        // this.InitialFontSize = 18\r\n        // this.tdCurrentTheme = {\r\n        //     id: 6,\r\n        //     borderWidth: 2,\r\n        //     borderColor: \"black\",\r\n        //     groupColor: \"rgba(0,0,0,0)\",\r\n        //     groupStroke: \"rgba(0,0,0,0)\",\r\n        //     groupStrokeWidth: 0,\r\n        //     themeName: \"黑白\",\r\n        //     linkColor: \"black\",\r\n        //     colorRange: \"white\"\r\n        // }\r\n\t\t// // 初始化diagram\r\n\t\t// this.initDiagram(div, config);\r\n\t\t// this.initListener();\r\n\t\t// // Then you will need to construct a Model (usually a GraphLinksModel) for the Diagram, initialize its data by setting its Model.nodeDataArray and other properties, and then set the diagram's model.\r\n        // if(this.model){\r\n        //     this.initModel();\r\n        // }\r\n    }\r\n\r\n     /**\r\n     * 添加节点模板\r\n     */\r\n    addNodeTemplate(){\r\n\r\n        var that = this;\r\n        var myDiagram = this.diagram\r\n\r\n        // myDiagram.nodeTemplateMap.add(\"dipan\", this.createDipanTemplate(layerThickness,tdDipanTextAngle));\r\n        // myDiagram.nodeTemplateMap.add(\"Root\", this.getDipanRootTemplate(layerThickness));\r\n        // myDiagram.nodeTemplateMap.add(\"text\", );\r\n\r\n        myDiagram.nodeTemplateMap.add(\"0\", createNodeTemplate(this.diagram));\r\n        myDiagram.nodeTemplateMap.add(\"1\", createNodeTemplate(this.diagram));\r\n        myDiagram.nodeTemplateMap.add(\"2\", createNodeTemplate(this.diagram));\r\n        myDiagram.nodeTemplateMap.add(\"3\", createPictureSingleNodeTemplate(this.diagram));\r\n        myDiagram.nodeTemplateMap.add(\"4\", createPictureNodeTemplate(this.diagram));\r\n        myDiagram.nodeTemplateMap.add(\"text\", createTextNodeTemplate(this.diagram));\r\n        myDiagram.nodeTemplateMap.add(\"\", createNodeTemplate(this.diagram));\r\n\r\n        myDiagram.nodeTemplateMap.add(\"8\",createNodeSvgTemplate(this.diagram));\r\n\r\n        \r\n    }\r\n}\r\n\r\n// export default Trtd;\r\nmodule.exports = Trtd;\n\n\n// WEBPACK FOOTER //\n// ./src/diagram/wheel.js","\nvar Trtd_tianpan = require('./tianpan')\nvar createNodeTemplate = require('../nodeTemplate/createNodeTemplate')\nvar createPictureSingleNodeTemplate = require('../nodeTemplate/createPictureSingleNodeTemplate')\nvar createPictureNodeTemplate = require('../nodeTemplate/createPictureNodeTemplate')\nvar createTextNodeTemplate = require('../nodeTemplate/createTextNodeTemplate')\nvar createNodeSvgTemplate = require('../nodeTemplate/createNodeSvgTemplate')\nvar createArcNodeTemplate = require('../nodeTemplate/createArcNodeTemplate')\nvar createLineNodeTemplate = require('../nodeTemplate/createLineNodeTemplate')\nvar createWaveNodeTemplate = require('../nodeTemplate/createWaveNodeTemplate')\nvar nodeTemplateFactory = require('../nodeTemplate/factory')\nvar $ = go.GraphObject.make;\nvar GroupRotatingTool = require('../tools/GroupRotatingTool')\nvar helpers = require('../helpers/helpers.gojs')\nvar layoutWaveGroup = require(\"../layout/waveGroupLayout\").layoutWaveGroup;\nvar adjustTextAngle = require(\"../layout/waveGroupLayout\").adjustTextAngle;\n\n\nfunction computeNewRotateLoc(rotateCenter,currentLoc, angle){\n    if(rotateCenter.equals(currentLoc)) return currentLoc\n  // 计算选择中心点到（0,0）点的偏移\n  var offset = new go.Point(0,0).subtract(rotateCenter.copy())\n  // 将原来的点偏移到相对0,0点的位置\n  var nodeOrigin = currentLoc.copy().offset(offset.x, offset.y)\n  var newNodeOrigin = nodeOrigin.rotate(angle)\n  var newNodeLoc = newNodeOrigin.copy().offset(-offset.x, -offset.y)\n  return newNodeLoc\n  // console.log(\"newNodeLoc\", newNodeLoc)\n}\n\nrequire(\"../tools/textEditor\")\nclass Trtd extends Trtd_tianpan {\n    constructor(div, config){\n        super(div, config)\n        var that = this;\n        var diagramConfig = {\n            layout: $(go.Layout),\n            initialContentAlignment: go.Spot.Center,\n            initialAutoScale: go.Diagram.Uniform,\n            initialDocumentSpot: go.Spot.Center,\n            initialViewportSpot: go.Spot.Center,\n            rotatingTool: new GroupRotatingTool(),\n            PartResized: (e) =>{\n                console.log(\"PartResizedPartResizedPartResizedPartResized\")\n                var node = e.subject.part\n                if(!node) return;\n                // return;\n                if(node.data.category == \"waveGroup\"){\n                    console.log(\"PartResizedPartResized\")\n                    // wave 的宽高限制\n                    var maxWidth = 400;\n                    var maxHeight = 400;\n                    var oliveWidth, oliveHeight;\n                    var it = node.findSubGraphParts().iterator;\n                    var waveCount = 0\n                    var lastWave;\n                    while(it.next()){\n                        var n = it.value;\n                        if(n.data.category == \"wave\"){\n                            waveCount+=1;\n                            lastWave = n;\n                        }\n                    }\n                    console.log(\"actualBoundsactualBoundsactualBoundsactualBounds\")\n                    var nodeSize = node.resizeObject.actualBounds;\n                    var waveSize = lastWave.resizeObject.naturalBounds\n                    // oliveWidth = (nodeSize.width-100)/waveCount\n                    oliveWidth = (nodeSize.width-0)*5/3/waveCount\n                    oliveWidth = (nodeSize.width-0)*3/(waveCount*3+2)\n                    if(oliveWidth<100){\n                        oliveWidth=100\n                    }\n                    // oliveWidth = waveSize.width*waveCount + waveSize.width*2/3\n                    // oliveWidth = waveSize.width\n                    if( oliveWidth > maxWidth){\n                        oliveWidth = maxWidth;\n                        // nodeSize.width = maxWidth*waveCount+100;\n                    }\n                    oliveHeight = nodeSize.height;\n                    if( oliveHeight > maxHeight){\n                        oliveHeight = maxHeight;\n                        // nodeSize.height  = maxWidth;\n                    }\n                    if( oliveHeight > oliveWidth){\n                        oliveHeight = oliveWidth;\n                        // nodeSize.height  = maxWidth;\n                    }\n                    node.diagram.startTransaction()\n                    // node.diagram.model.setDataProperty(node.data, \"desiredSize\",`${nodeSize.width} ${nodeSize.height}`)\n                    node.diagram.model.setDataProperty(node.data, \"oliveHeight\", oliveHeight)\n                    node.diagram.model.setDataProperty(node.data, \"oliveWidth\", oliveWidth)\n                                 //     e.subject.part.layout.isOngoing = true;\n                    //     e.subject.part.layout.isValidLayout = false;\n                    var it = e.subject.part.findSubGraphParts().iterator;\n                    layoutWaveGroup(it,node.diagram,e.subject.part)\n                    // node.diagram.updateAllTargetBindings()\n                    it.reset()\n                    while(it.next()){\n                        it.value.updateTargetBindings()\n                    }\n                    \n                    node.diagram.commitTransaction()\n                    setTimeout(()=>{\n                        e.subject.part.layout.isOngoing = true;\n                        e.subject.part.layout.isValidLayout = false;\n                    },100)\n                }else if(node.data.category === \"autoText\"){\n                    console.log(\"e.subject.width resize\")\n                    if(e.subject.width <= 50){\n                        e.subject.width = 50\n                    }\n                    if(e.subject.height <= 50){\n                        e.subject.height =50\n                    }\n                    e.diagram.startTransaction(\"resize\");\n                    e.diagram.model.setDataProperty(node.data, \"width\", e.subject.width);\n                    e.diagram.model.setDataProperty(node.data, \"nwidth\", true);\n                    e.diagram.model.setDataProperty(node.data, \"height\", e.subject.height);\n                    e.diagram.model.setDataProperty(node.data, \"nheight\", true);\n                    e.diagram.commitTransaction(\"resize\");\n                }\n            },\n            SelectionMoved: (e)=>{\n                // console.log(\"SelectionMovedSelectionMoved\",e.subject)\n                // if (!e.isTransactionFinished) {\n                //     return;\n                // }\n                try{\n                    var selnode = e.subject.first()\n                    if(!selnode) return;\n                    if(selnode.data.category == \"wave\"){\n                        if(selnode.containingGroup){\n                            selnode.containingGroup.layout.isValidLayout = false;\n                        }\n                    }\n                    if(selnode.data.category == \"autoText\"){\n                        if((selnode.data.role == \"shiText\" || selnode.data.role == \"xuText\")){\n                            selnode.diagram.startTransaction()\n                            console.log(\"SelectionMovedSelectionMovedSelectionMoved\")\n                            if(!selnode.__location){\n                                var obj = selnode.diagram.findNodeForKey(selnode.data.olive)\n                                var group = selnode.containingGroup\n                                if(obj){\n                                    var loc = group.location.copy().offset(group.data.oliveWidth*(obj.data.order-1),0)\n                                    selnode.__location = loc.copy().offset(obj.naturalBounds.width/2, 0)\n                                    selnode.__location = computeNewRotateLoc(group.location, selnode.__location, obj.angle)\n                                }\n                            }\n                            if(selnode.__location){\n                                console.log(\"selnode.__locationselnode.__locationselnode.__location\")\n                                if(selnode.data.order %2 == 0){\n                                    selnode.__offset = selnode.__location.copy().subtract(selnode.location)\n                                }else{\n                                    selnode.__offset = selnode.__location.copy().subtract(selnode.location)\n                                }\n                                delete selnode.__oldOrder\n                            }\n                            delete selnode.__oldLocation\n                            if(selnode.data.text.trim() != \"\"){\n                                selnode.data.nloc = true;\n                                selnode.diagram.model.setDataProperty(selnode.data, \"nloc\", true)\n                            }\n                            selnode.diagram.commitTransaction()\n                        }\n                        if(selnode.containingGroup && (selnode.containingGroup.data.category == \"yunGroup\"||selnode.containingGroup.data.category == \"yunpanGroup\")){\n                            selnode.containingGroup.__trtdNode.snapToGrid(selnode.data, selnode.containingGroup)\n                            // selnode.containingGroup.layout.isOngoing = true;\n                            selnode.containingGroup.layout.isValidLayout = false;\n                        }\n                    }\n                    if(selnode.data.category == \"shapeText\"){\n                        if(selnode.containingGroup && (selnode.containingGroup.data.category == \"yunpanGroup\")){\n                            selnode.containingGroup.__trtdNode.snapToGrid(selnode.data, selnode.containingGroup)\n                            // selnode.containingGroup.layout.isOngoing = true;\n                            selnode.containingGroup.layout.isValidLayout = false;\n                        }\n                    }\n                }catch(err){\n                    console.log(err)\n                }\n                // if(e.subject)\n            },\n            // \"toolManager.hoverDelay\": 600,\n            // \"toolManager.toolTipDuration\": 3000,\n            click: function(e) {\n                // closeToolbarWindow();\n                // removeNodeToolBar();\n                console.log(\"eeeeeeee:\",e)\n                that.clearAllTextBorder()\n                localStorage.setItem(\"TRTD_documentPoint\",go.Point.stringify(e.documentPoint))\n            },\n        }\n        this.diagram.setProperties(diagramConfig);\n        \n        this.diagram.commandHandler.doKeyDown = (e)=>{\n            this.dokeyDownFn(e)\n            // var cmd = this.diagram.commandHandler;\n            // go.CommandHandler.prototype.doKeyDown.call(cmd);\n        }\n        this.diagram.commandHandler.canCopySelection = function(){\n            // this.dokeyDownFn(e)\n            console.log(\"canCopySelectioncanCopySelection\")\n            var node = that.diagram.selection.first()\n            if(node){\n                if(node.data.category == \"axisGroup\" || node.data.category == \"yunGroup\"){\n                    return true;\n                }else{\n                    return false;\n                }\n            }\n            var cmd = this.diagram.commandHandler;\n            return go.CommandHandler.prototype.canCopySelection.call(cmd);\n        }\n        this.diagram.commandHandler.pasteFromClipboard = function(e, obj){\n            var coll = go.CommandHandler.prototype.pasteFromClipboard.call(this);\n            \n            // this.diagram.moveParts(coll, this._lastPasteOffset);\n            // this._lastPasteOffset.add(this.pasteOffset);\n            var it = coll.iterator;\n            var shiTextColl = []\n            var xuTextColl = []\n            var waveColl = []\n            var centerTextColl = []\n            var waveGroup = null\n            var yunGroup = null;\n            while(it.next()){\n                var n = it.value;\n                if(n.data.role == \"shiText\"){\n                    shiTextColl.push(n)\n                    continue;\n                }\n                if(n.data.role == \"xuText\"){\n                    xuTextColl.push(n)\n                    continue;\n                }\n                if(n.data.role == \"centerText\"){\n                    centerTextColl.push(n)\n                    continue;\n                }\n                if(n.data.category == \"wave\" && n.data.role != \"waveTail\"){\n                    waveColl.push(n)\n                    continue;\n                }\n                if(n.data.category == \"waveGroup\"){\n                    waveGroup = n;\n                }\n            }\n            if(!waveGroup){\n                // coll.clear()\n                // coll.removeAll()\n                coll = new go.Set(go.Part)\n                return coll;\n            }\n\n            waveColl = waveColl.sort(function(a,b){\n                // console.log(`Number(a.data.order)${Number(a.data.order)} > Number(b.data.order) ${Number(b.data.order)}`,Number(a.data.order) > Number(b.data.order))\n                return Number(a.data.order) - Number(b.data.order)\n            })\n            shiTextColl.sort(function(a,b){\n                return Number(a.data.order) - Number(b.data.order)\n            })\n            xuTextColl.sort(function(a,b){\n                return Number(a.data.order) - Number(b.data.order)\n            })\n            centerTextColl.sort(function(a,b){\n                return Number(a.data.order) - Number(b.data.order)\n            })\n\n            waveColl.forEach(function(obj,index){\n                obj.data.shiText = shiTextColl[index].data.key\n                obj.data.xuText = xuTextColl[index].data.key\n                obj.data.centerText = centerTextColl[index].data.key\n                shiTextColl[index].data.olive = obj.data.key\n                xuTextColl[index].data.olive = obj.data.key\n            })\n            console.log(\"pasteFromClipboardpasteFromClipboard\")\n            return coll;\n            // var cmd = this.diagram.commandHandler;\n            // go.CommandHandler.prototype.doKeyDown.call(cmd);\n        }\n        this.diagram.commandHandler.deleteSelection = ()=>{\n         \n            return this.deleteSelection();\n        }\n        this.diagram.toolManager.resizingTool.computeReshape = function() { \n            if(this.adornedObject.part.data.category == \"shapeText\"){\n                return false\n            }\n            go.TextEditingTool.prototype.doCancel.call(this);\n\n        }\n        this.diagram.toolManager.textEditingTool.doCancel = function(){\n            // var textEditor = this.diagram.currentTextEditor;\n            // console.log(\"textEditor。。。。\")\n            var tool = this;\n            try{\n                if(this.textBlock){\n                    var node = this.textBlock.part;\n                }\n            }catch(e){\n                console.log(e)\n            }\n            setTimeout(()=>{\n                try{\n                    if(node && node.data.category == \"wave\"){\n                        if(node.containingGroup && node.containingGroup.data.textAngle == \"horizontal\" && node.containingGroup.data.centerTextAngle == \"independent\"){\n                            // 如果文字方向为正向，且中线文字为正向\n                            node.findObject(\"TEXT\").visible = false;\n                            var centerText = node.diagram.findNodeForKey(node.data.centerText)\n                            if(centerText){\n                              centerText.visible = true;\n                            }\n                          }\n                    }\n                }catch(e){\n                    console.info(e)\n                }\n            },100)\n            // var cmd = this.diagram.commandHandler;\n            // this.doCancel()\n            // go.CommandHandler.prototype.deleteSelection.call(cmd);\n            go.TextEditingTool.prototype.doCancel.call(tool);\n        }\n\n        this.diagram.toolManager.resizingTool.computeReshape = function() { \n            // 保持图片宽高比\n            if(this.adornedObject.part.data.category == \"pic\"){\n                return false; \n            }    \n            return true\n        }\n\n        if( window.TextEditor){\n            console.log(\"TextEditorTextEditorTextEditorTextEditorTextEditorTextEditorTextEditorTextEditorTextEditor\")\n            this.diagram.toolManager.textEditingTool.defaultTextEditor = window.TextEditor;\n        }\n        this.diagram.toolManager.clickCreatingTool.archetypeNodeData = {\n            category: \"autoText\",\n            \"font\":\"18px 'Microsoft YaHei'\",\n            text: \"空白文本\",\n            level: 0\n        };\n\n        this.diagram.groupTemplateMap.add(\"waveGroup1\",     $(go.Group, \"Spot\",\n        { selectionObjectName: \"SHAPE\" },\n        { locationObjectName: \"SHAPE\", locationSpot: go.Spot.Center },\n        new go.Binding(\"location\", \"loc\", go.Point.parse).makeTwoWay(go.Point.stringify),\n        { rotatable: true },\n        new go.Binding(\"angle\",\"angle\",function(v,m,a){\n            console.log(\"vvvvvvvvvvvvvvvvvvv:\",v,\" m:\",m,\" a:\",a)\n            // m.diagram.startTransaction()\n            // for(var i=0;i<m.diagram.model.nodeDataArray.length-1;i++){\n            //     if(m.diagram.model.nodeDataArray[i].group == m.key){\n            //         m.diagram.model.setDataProperty(m.diagram.model.nodeDataArray[i], \"angle\", v)\n            //     }\n            // }\n            // // var group = a.findNodeDataForKey(m.group)\n            // // a.setDataProperty(group, \"angle\", v)\n            // m.diagram.commitTransaction()\n            return v;\n        }).makeTwoWay(function(v,m,a){\n            console.log(\"v:\",v,\" m:\",m,\" a:\",a)\n            // a.startTransaction()\n            // for(var i=0;i<a.nodeDataArray.length-1;i++){\n            //     if(a.nodeDataArray[i].group == m.key){\n            //         a.setDataProperty(a.nodeDataArray[i], \"angle\", v)\n            //     }\n            // }\n            // // var group = a.findNodeDataForKey(m.group)\n            // // a.setDataProperty(group, \"angle\", v)\n            // a.commitTransaction()\n            return v;\n        }),\n        { resizable: true, resizeObjectName: \"SHAPE\" },\n        $(go.Panel, \"Vertical\",\n          $(go.TextBlock, { font: \"bold 12pt sans-serif\" },\n            new go.Binding(\"text\", \"key\")),\n          $(go.Shape, { name: \"SHAPE\", fill: \"transparent\" },\n            new go.Binding(\"desiredSize\", \"desiredSize\", go.Size.parse).makeTwoWay(go.Size.stringify))\n        )\n      ))\n\t\t// this.config = config;\n\t\t// this.modelChangedListener = config.modelChangedListener;\n\t\t// this.type = config.type;\n\t\t// this.diagram = {};\n        // this.model = config.model;\n        // this.tpid = config.tpid||Date.now();\n        // this.InitialFontSize = 18\n        // this.tdCurrentTheme = {\n        //     id: 6,\n        //     borderWidth: 2,\n        //     borderColor: \"black\",\n        //     groupColor: \"rgba(0,0,0,0)\",\n        //     groupStroke: \"rgba(0,0,0,0)\",\n        //     groupStrokeWidth: 0,\n        //     themeName: \"黑白\",\n        //     linkColor: \"black\",\n        //     colorRange: \"white\"\n        // }\n\t\t// // 初始化diagram\n\t\t// this.initDiagram(div, config);\n\t\t// this.initListener();\n\t\t// // Then you will need to construct a Model (usually a GraphLinksModel) for the Diagram, initialize its data by setting its Model.nodeDataArray and other properties, and then set the diagram's model.\n        // if(this.model){\n        //     this.initModel();\n        // }\n    }\n\n     /**\n     * 添加节点模板\n     */\n    addNodeTemplate(){\n\n        // myDiagram.nodeTemplateMap.add(\"dipan\", this.createDipanTemplate(layerThickness,tdDipanTextAngle));\n        // myDiagram.nodeTemplateMap.add(\"Root\", this.getDipanRootTemplate(layerThickness));\n        // myDiagram.nodeTemplateMap.add(\"text\", );\n        var myDiagram = this.diagram\n        myDiagram.nodeTemplateMap.add(\"0\", createNodeTemplate(this.diagram));\n        myDiagram.nodeTemplateMap.add(\"1\", createNodeTemplate(this.diagram));\n        myDiagram.nodeTemplateMap.add(\"2\", createNodeTemplate(this.diagram));\n        myDiagram.nodeTemplateMap.add(\"3\", createPictureSingleNodeTemplate(this.diagram));\n        myDiagram.nodeTemplateMap.add(\"4\", createPictureNodeTemplate(this.diagram));\n        myDiagram.nodeTemplateMap.add(\"text\", createTextNodeTemplate(this.diagram));\n        myDiagram.nodeTemplateMap.add(\"\", createNodeTemplate(this.diagram));\n\n        myDiagram.nodeTemplateMap.add(\"8\",createNodeSvgTemplate(this.diagram));\n        myDiagram.nodeTemplateMap.add(\"9\", createArcNodeTemplate(this.diagram));\n        myDiagram.nodeTemplateMap.add(\"line\", createLineNodeTemplate(this.diagram));\n        // myDiagram.nodeTemplateMap.add(\"wave\", createWaveNodeTemplate(this.diagram));\n        // var sampleNode = nodeTemplateFactory(\"sample\")\n        myDiagram.nodeTemplateMap.add(\"wave\", nodeTemplateFactory(\"wave\",{diagram:myDiagram}).getNodeTemplate());\n        // myDiagram.nodeTemplateMap.add(\"waveTail\", nodeTemplateFactory(\"waveTail\",{diagram:myDiagram}).getNodeTemplate());\n        myDiagram.nodeTemplateMap.add(\"iconText\", nodeTemplateFactory(\"iconText\",{diagram:myDiagram}).getNodeTemplate());\n        // myDiagram.nodeTemplateMap.add(\"cbian\",  nodeTemplateFactory(\"cbian\",{diagram:this.diagram}).getNodeTemplate())\n        myDiagram.nodeTemplateMap.add(\"pic\",  nodeTemplateFactory(\"pic\",{diagram:this.diagram}).getNodeTemplate())\n        myDiagram.nodeTemplateMap.add(\"shape\",  nodeTemplateFactory(\"shape\",{diagram:this.diagram}).getNodeTemplate())\n        myDiagram.nodeTemplateMap.add(\"autoText\", nodeTemplateFactory(\"autoText\",{diagram:myDiagram}).getNodeTemplate());\n        myDiagram.nodeTemplateMap.add(\"shapeText\", nodeTemplateFactory(\"shapeText\",{diagram:myDiagram}).getNodeTemplate());\n        myDiagram.groupTemplateMap.add(\"labelGroup\", nodeTemplateFactory(\"labelGroup\",{diagram:myDiagram}).getNodeTemplate());\n        myDiagram.groupTemplateMap.add(\"picGroup\", nodeTemplateFactory(\"picGroup\",{diagram:myDiagram}).getNodeTemplate());\n        myDiagram.groupTemplateMap.add(\"waveGroup\",  nodeTemplateFactory(\"waveGroup\",{diagram:this.diagram}).getNodeTemplate())\n        myDiagram.groupTemplateMap.add(\"axisGroup\",  nodeTemplateFactory(\"axisGroup\",{diagram:this.diagram}).getNodeTemplate())\n        myDiagram.groupTemplateMap.add(\"yunGroup\",  nodeTemplateFactory(\"yunGroup\",{diagram:this.diagram}).getNodeTemplate())\n        myDiagram.groupTemplateMap.add(\"yunpanGroup\",  nodeTemplateFactory(\"yunpanGroup\",{diagram:this.diagram}).getNodeTemplate())\n        \n    }\n\n    deleteSelection(node){\n        var cmd = this.diagram.commandHandler;\n        if(!node){\n            node = this.diagram.selection.first()\n        }\n        var locateNode = null;\n        var shiText,xuText,centerText;\n        if(!node) return;\n        if(!node.canDelete()) return;\n        if(node.data.category == \"yunGroup\" && !node.data.deletable){   \n            return\n        }\n        this.diagram.startTransaction(\"deleteSelection1\");\n        var count = 0;\n        if(node){\n            if(node.data.category == \"axisGroup\"){\n                var it = node.findSubGraphParts().iterator;\n                while (it.next()) {\n                    var n = it.value;\n                    this.diagram.model.removeNodeData(n.data)\n                }\n                this.diagram.model.removeNodeData(node.data)\n            }\n            if(node.data.category == \"wave\" && node.containingGroup){\n                var it = node.containingGroup.findSubGraphParts().iterator;\n                while (it.next()) {\n                    var n = it.value;\n                    if(n.data.category == \"wave\" && n.data.role != \"waveTail\"){\n                        if(n.data.order == node.data.order+1){\n                            locateNode = n;\n                        }\n                        count++;\n                    }\n                    if(n.data.role == \"shiText\" && n.data.order == node.data.order){\n                        shiText = n;\n                    }\n                    if(n.data.role == \"xuText\" && n.data.order == node.data.order){\n                        xuText = n;\n                    }\n                    if(n.data.role == \"centerText\" && n.data.order == node.data.order){\n                        centerText = n;\n                    }\n\n                }\n                if(count<=1){\n                    this.diagram.commitTransaction(\"deleteSelection1\");\n                    return;\n                }\n                node.containingGroup.layout.isOngoing = true;\n                node.containingGroup.layout.isValidLayout = false;\n                if(node.containingGroup.containingGroup){\n                    node.containingGroup.containingGroup.layout.isOngoing = true;\n                    node.containingGroup.containingGroup.layout.isValidLayout = false; \n                }\n            }\n            // 云盘 维度删除\n            if(node.data.category == \"autoText\" &&  node.data.subRole == \"dimText\" && node.containingGroup && node.containingGroup.data.category == \"yunpanGroup\"){\n                var it = node.containingGroup.findSubGraphParts().iterator;\n                var deleteNodes = []\n                var deleteLines = []\n                var normDim = \"X\",unnormDim = \"Y\", lineRole = \"verticalLine\"\n                if(node.data.dimX == 0){\n                    normDim = \"Y\"\n                    unnormDim = \"X\"\n                    lineRole = \"horizontalLine\"\n                }\n                while (it.next()) {\n                    var n = it.value;\n                    if(n.data.subRole == \"dimText\" && n.data[\"dim\"+unnormDim] == 0){\n                        // if(n.data.order == node.data.order+1){\n                        //     locateNode = n;\n                        // }\n                        count++;\n                    }\n                    if(n.data.subRole == \"yunpanText\" && n.data[\"order\"+normDim] == node.data[\"dim\"+normDim]){\n                        deleteNodes.push(n.data)\n                    }\n                    if(n.data.category == \"line\"  && n.data.role == lineRole\n                    && n.data[\"order\"]  == node.data[\"dim\"+normDim]\n                    ){\n                        deleteLines.push(n.data)\n                    }\n                    // if(n.data.role == \"xuText\" && n.data.order == node.data.order){\n                    //     xuText = n;\n                    // }\n                    // if(n.data.role == \"centerText\" && n.data.order == node.data.order){\n                    //     centerText = n;\n                    // }\n\n                }\n                \n                if(count<=1){\n                    this.diagram.commitTransaction(\"deleteSelection1\");\n                    return;\n                }\n\n                it.reset()\n                while (it.next()) {\n                    var n = it.value;\n                    if(n.data.subRole == \"dimText\" && n.data[\"dim\"+unnormDim] == 0 && n.data[\"dim\"+normDim] > node.data[\"dim\"+normDim]){\n                        // if(n.data.order == node.data.order+1){\n                        //     locateNode = n;\n                        // }\n                        n.diagram.model.setDataProperty(n.data, \"dim\"+normDim, n.data[\"dim\"+normDim] - 1)\n                        // count++;\n                    }\n                    if(n.data.subRole == \"yunpanText\" && n.data[\"order\"+normDim] > node.data[\"dim\"+normDim]){\n                        n.diagram.model.setDataProperty(n.data, \"order\"+normDim, n.data[\"order\"+normDim] - 1)\n                    }\n                    if(n.data.category == \"line\"  && n.data.role == lineRole\n                    && n.data[\"order\"]  > node.data[\"dim\"+normDim]\n                    ){\n                        n.diagram.model.setDataProperty(n.data, \"order\", n.data[\"order\"] - 1)\n                    }\n                    // if(n.data.role == \"xuText\" && n.data.order == node.data.order){\n                    //     xuText = n;\n                    // }\n                    // if(n.data.role == \"centerText\" && n.data.order == node.data.order){\n                    //     centerText = n;\n                    // }\n\n                }\n\n                node.diagram.model.removeNodeDataCollection(deleteLines)\n                node.diagram.model.removeNodeDataCollection(deleteNodes)\n                node.containingGroup.layout.isOngoing = true;\n                node.containingGroup.layout.isValidLayout = false;\n                // if(node.containingGroup.containingGroup){\n                //     node.containingGroup.containingGroup.layout.isOngoing = true;\n                //     node.containingGroup.containingGroup.layout.isValidLayout = false; \n                // }\n            }\n\n\n        }\n        //myDiagram.currentTool.doCancel();\n        //go.CommandHandler.prototype.redo.call(cmd);\n        // myDiagram.clearSelection();\n        if(xuText){\n            this.diagram.model.removeNodeData(xuText.data)\n        }\n        if(shiText){\n            this.diagram.model.removeNodeData(shiText.data)\n        }\n        if(centerText){\n            this.diagram.model.removeNodeData(centerText.data)\n        }\n        go.CommandHandler.prototype.deleteSelection.call(cmd);\n\n        \n\n        this.diagram.commitTransaction(\"deleteSelection1\");\n        // this.layoutAllGroup()\n        // setTimeout(()=>{\n        //     // this.diagram.updateAllTargetBindings()\n        //     this.diagram.layoutDiagram(true)\n        // },500)\n        if (locateNode) {\n            this.diagram.select(locateNode);\n        }\n    }\n\n\n    layoutLabelGroup(){\n        console.log(\"layoutLabelGroup\")\n        setTimeout(()=>{\n            var it = this.diagram.nodes.iterator;\n            while (it.next()) {\n                var n = it.value;\n                if(n.data.category == \"labelGroup\"){\n                    n.layout.isOngoing = true;\n                    n.layout.isValidLayout = false;\n                }\n            }\n        },200)\n    }\n    // 复制拓扑\n    copyWaveGroup(){\n        var diagram = this.diagram\n        var cmd = this.diagram.commandHandler;\n        cmd.copySelection()\n        cmd.pasteSelection()\n        return;\n    }\n\n    layoutAllGroup(){\n        console.log(\"layoutAllGroup\")\n        var it = this.diagram.nodes.iterator;\n        while (it.next()) {\n            var n = it.value;\n            if(n.data.isGroup == true){\n                n.layout.isOngoing = true;\n                n.layout.isValidLayout = false;\n            }\n        }\n    }\n    exportAsSubFigure(){\n        var diagram = this.diagram\n        var node = diagram.selection.first()\n        if(!node) return;\n        if(!node.data.isGroup) return;\n        var it = node.findSubGraphParts().iterator;\n        var groupData = [node.data]\n        var theme = null;\n        while(it.next()){\n            var n = it.value;\n            groupData.push(n.data)\n            if(n.data.role == \"themeText\"){\n                theme = n\n            }\n        }\n        var model = JSON.parse(diagram.model.toJson())\n        model.nodeDataArray = groupData;\n        if(this.exportAsSubFigureCallback){\n            this.exportAsSubFigureCallback({\n                node: node,\n                model: model,\n                theme: theme\n            })\n        }\n    }\n\n    // 拆分橄榄\n    splitOlive2Half(){\n        var diagram = this.diagram\n        var node = diagram.selection.first()\n        if(!node) return;\n        if(node.data.category != \"wave\"){\n            return;\n        }\n        if(node.data.order ==1) return;\n        if(!node.containingGroup){\n            return;\n        }\n        this.diagram.startTransaction(\"splitOlive2Half\")\n        node.containingGroup.layout.isOngoing = true;\n        node.containingGroup.layout.isValidLayout = false;\n        var axisData = this.addAxisGroup({emptyAxis: true})\n        if(!axisData) {\n            this.diagram.commitTransaction(\"splitOlive2Half\")\n            return;\n        }\n        var waveGroup;\n        for(var i=0;i<axisData.length;i++){\n            if(axisData[i].category == \"waveGroup\"){\n                waveGroup = axisData[i]\n                break;\n            }\n        }\n        if(!waveGroup) {\n            this.diagram.commitTransaction(\"splitOlive2Half\")\n            return;\n        };\n        var curOrder = node.data.order\n        var it = node.containingGroup.findSubGraphParts().iterator;\n        var splitOlive = []\n        while (it.next()) {\n            var n = it.value;\n            if(n.data.category == \"wave\" && n.data.order >= curOrder && n.data.role != \"waveTail\"){\n                splitOlive.push(n)\n            }\n        }\n        for(var i=0;i<splitOlive.length;i++){\n            this.diagram.model.setDataProperty(splitOlive[i].data, \"group\", waveGroup.key)\n            var shiText = this.diagram.model.findNodeDataForKey(splitOlive[i].data.shiText)\n            var centerText = this.diagram.model.findNodeDataForKey(splitOlive[i].data.centerText)\n            var xuText = this.diagram.model.findNodeDataForKey(splitOlive[i].data.xuText)\n            if(shiText){\n                this.diagram.model.setDataProperty(shiText, \"group\", waveGroup.key)\n            }\n            if(centerText){\n                this.diagram.model.setDataProperty(centerText, \"group\", waveGroup.key)\n            }\n            if(xuText){\n                this.diagram.model.setDataProperty(xuText, \"group\", waveGroup.key)\n            }\n        }\n \n        this.diagram.commitTransaction(\"splitOlive2Half\")\n    }\n\n    // 分离常变\n    splitOlive2Cbian(){\n        var diagram = this.diagram\n        var node = diagram.selection.first()\n        if(!node) return;\n        if(node.data.category != \"wave\"){\n           return;\n        }\n\n        this.diagram.startTransaction(\"splitOlive2Cbian\")\n        // 删除橄榄\n        var shiText = this.diagram.model.findNodeDataForKey(node.data.shiText)\n        var centerText = this.diagram.model.findNodeDataForKey(node.data.centerText)\n        var xuText = this.diagram.model.findNodeDataForKey(node.data.xuText)\n        var cbian = {\n            shiText: shiText.text,\n            centerText: centerText.text,\n            xuText: xuText.text,\n            basePoint:node.location.copy().offset(0,-300),\n            group: node.data.group\n        }\n        this.deleteSelection(node)\n        // 添加常变\n        this.addCbian(cbian)\n        this.diagram.commitTransaction(\"splitOlive2Cbian\")\n    }\n\n    // 增加常变\n    addCbian(cbian){\n        console.log(\"addCbian\")\n        var diagram = this.diagram\n        var node = diagram.selection.first();\n        var group = null\n        if(node && node.data.category == \"axisGroup\"){\n            group=node.data.key;\n        }\n        var e = diagram.lastInput\n        diagram.startTransaction(\"addCbian\")\n        var groupKey = helpers.guid()\n        \n        if(cbian && cbian.basePoint){\n            var basePoint = cbian.basePoint\n        }else{\n            var basePoint = e.documentPoint\n        }\n        var groupData = {\"category\":\"picGroup\", \n         \"role\":\"cbian\", \"isGroup\":true, \"level\":0, \n        \"key\":groupKey, \"loc\":go.Point.stringify(basePoint), \"deletable\":true}\n        if(group){\n            groupData.group = group\n        }\n        if(cbian && cbian.group){\n            groupData.group = cbian.group\n        }\n        var picData = { \"group\":groupKey, \"text\":\"\", cbianName:\"cbian1\",\n        \"resizable\":false, \"category\":\"pic\", \n        \"loc\":go.Point.stringify(basePoint),\n        \"picture\":\"https://static.365trtd.com/system/cbian/cbian.png\", \"width\":150, \"height\":150}\n        // \"picture\":\"https://static.365trtd.com/system/cbian/cbian.png\", \"width\":150, \"height\":150}\n       \n        var themeData = {\"text\":\"总结\",\"role\":\"theme\", \"deletable\":false,  \"fill\":\"black\", \"iconVisible\":false, \n        \"locationSpot\":\"1 0 0 0\", \"textAlign\":\"center\", \"category\":\"autoText\", \n        \"loc\":go.Point.stringify(basePoint.copy().offset(3,-3)), \n        \"movable\":true, \"group\":groupKey}\n        var timeData = {\"text\":\"时间\",\"role\":\"axisXText\", \"deletable\":false,  \"fill\":\"black\", \"iconVisible\":false, \n        \"locationSpot\":\"1 0 0 0\", \"textAlign\":\"center\", \"category\":\"autoText\", \n        \"loc\":go.Point.stringify(basePoint.copy().offset(150, 0)), \n        \"movable\":true, \"group\":groupKey}\n        var energeData = {\"text\":\"能量\",\"role\":\"axisYText\", \"deletable\":false, \"fill\":\"black\", \"iconVisible\":false, \n        \"locationSpot\":\"1 0 0 0\", \"textAlign\":\"center\", \"category\":\"autoText\", \n        \"loc\":go.Point.stringify(basePoint.copy().offset(0, -150)), \n        \"movable\":true, \"group\":groupKey}\n        var text1Data = {\"text\":\"总结1\",\"role\":\"cbianText1\", \"deletable\":false,\"font\":\"normal bold 18px 'Microsoft YaHei'\", \"textStroke\":\"#0e399d\", \"iconVisible\":false, \n        \"locationSpot\":\"0 0 0 0\", \"textAlign\":\"left\", \"category\":\"autoText\", \n        \"loc\":go.Point.stringify(basePoint.copy().offset(155*Math.cos(30*Math.PI/180), -150*Math.sin(30*Math.PI/180))), \n        \"movable\":true, \"group\":groupKey}\n        var text2Data = {\"text\":\"总结3\", \"role\":\"cbianText3\",\"deletable\":false, \"font\":\"normal bold 18px 'Microsoft YaHei'\", \"textStroke\":\"rgba(252, 172, 0, 1)\", \"iconVisible\":false, \n        \"locationSpot\":\"0 0.5 0 0\", \"textAlign\":\"left\", \"category\":\"autoText\", \n        \"loc\":go.Point.stringify(basePoint.copy().offset(145*Math.cos(45*Math.PI/180), -150*Math.sin(45*Math.PI/180))), \n        \"movable\":true, \"group\":groupKey}\n        var text3Data = {\"text\":\"总结2\",\"role\":\"cbianText2\",\"font\":\"normal bold 18px 'Microsoft YaHei'\", \"deletable\":false, \"textStroke\":\"#cb1c27\", \"iconVisible\":false, \n        \"locationSpot\":\"0 1 0 0\", \"textAlign\":\"left\", \"category\":\"autoText\", \n        \"loc\":go.Point.stringify(basePoint.copy().offset(145*Math.cos(70*Math.PI/180), -140*Math.sin(70*Math.PI/180))), \n        \"movable\":true, \"group\":groupKey}\n\n        var cbianName = localStorage.getItem(\"cbianName\");\n        if(cbianName){\n            try{\n                var theme = JSON.parse(cbianName);\n                picData.picture = theme[\"picture\"]\n                picData.width = theme['size'][0]\n                picData.height = theme['size'][1]\n                picData.cbianName = theme['name']\n                text1Data.textStroke = theme[\"textStrokes\"][0]\n                text3Data.textStroke = theme[\"textStrokes\"][1]\n                text2Data.textStroke = theme[\"textStrokes\"][2]\n            }catch(e){\n                console.error(e)\n            }\n        }\n        if(cbian){\n            text1Data.text = cbian.shiText;\n            text2Data.text = cbian.centerText;\n            text3Data.text = cbian.xuText;\n        }\n        diagram.model.addNodeData(text1Data)\n        diagram.model.addNodeData(text2Data)\n        diagram.model.addNodeData(text3Data)\n        diagram.model.addNodeData(themeData)\n        diagram.model.addNodeData(timeData)\n        diagram.model.addNodeData(energeData)\n        diagram.model.addNodeData(picData)\n        diagram.model.addNodeData(groupData)\n        \n    //     {\"text\":\"自由文本\",\n    //     \"deletable\":true, \n    //     \"role\":\"freeText\",\n    //     \"fill\":\"black\", \n    //     \"iconVisible\":false, \n    //     \"locationSpot\":\"0.5 0.5 0 0\", \n    //     \"textAlign\":\"center\", \n    //     \"category\":\"autoText\", \n    //     \"loc\": go.Point.stringify(e.documentPoint), \n    //     \"movable\":true, \"group\":node.data.key\n    //    }\n\n        diagram.commitTransaction(\"addCbian\")\n    }\n    adjustTextAngle(...obj){\n        adjustTextAngle(obj)\n    }\n    // 增加橄榄\n    addOlive(node, cbian){\n        console.log(\"addOliveaddOlive\")\n        var diagram = this.diagram\n        if(!node){\n            node = diagram.selection.first();\n        }\n        if(!node) return;\n        var count = 0\n        var labelGroup;\n        var it = node.containingGroup.findSubGraphParts().iterator;\n        var oliveWidth = node.containingGroup.data.oliveWidth;\n        while (it.next()) {\n            var n = it.value;\n            if(n.data.category == \"wave\"){\n                count++;\n            }\n        }\n        var maxOlive = 50;\n        if(node.containingGroup.data.maxOlive != null){\n            maxOlive = node.containingGroup.data.maxOlive\n        }\n        if(count>maxOlive){\n            return;\n        }\n        var curShiText = this.diagram.findNodeForKey(node.data.shiText)\n        var curXuText = this.diagram.findNodeForKey(node.data.xuText)\n        diagram.startTransaction(\"dspiral\")\n        var order = 1000;\n        if(node.data.order != null){\n            order = Number(node.data.order)+0.5;\n        }\n\n        var data = JSON.parse(JSON.stringify(node.data))\n        Object.assign(data, {\n            \"key\": helpers.guid(), \n            \"order\": order,\n            \"text\":\"\",\n        })\n        if(cbian){\n            data.text = cbian.centerText\n        }\n        delete data.centerText\n        delete data.__gohashid\n        delete data.hyperlink\n        delete data.figure\n        delete data.remark\n        // var data =  {\"category\":\"wave\", \n        //     \"text\":\"\", \n        //     \"level\":0, \"key\": helpers.guid(), \n        //     \"group\":node.data.group, \n        //     \"loc\":node.data.loc,\n        //     \"desiredSize\":node.data.desiredSize, \n        //     \"order\": order,\n        //     \"font\": node.data.font,\n        //     \"textStroke\": node.data.textStroke,\n        //     \"textAlign\": node.data.textAlign,\n        //     \"spacingline\": node.data.spacingline,\n        // }\n        var shiText = JSON.parse(JSON.stringify(curShiText.data))\n        delete shiText.__gohashid\n        // delete shiText.textAlign\n        delete shiText.hyperlink\n        delete shiText.figure\n        delete shiText.remark\n        delete shiText.nloc\n        Object.assign(shiText, {\n            \"key\": helpers.guid(), \n            \"order\": order,\n            \"olive\": data.key,\n            \"text\":\"\",\n        })\n        if(cbian){\n            shiText.text = cbian.shiText\n        }\n        // var shiText = {\n        // \"text\":\"\",\n        // \"minSize\":`${oliveWidth-30} 30`,\n        // \"deletable\":false,\n        //  \"font\":curShiText.data.font || \"18px 'Microsoft YaHei'\", \n        // //  \"textStroke\": curShiText.textStroke,\n        //  \"textAlign\": curShiText.data.textAlign,\n        //  \"spacingline\": curShiText.data.spacingline,\n        //  \"category\":\"autoText\", \n        //  \"key\": helpers.guid(), \"width\":300, \n        //  \"role\":\"shiText\", \"level\":0, \"group\": node.data.group, \n        //  \"order\": order,\n        //  \"olive\": data.key,\n        // }\n        var xuText = JSON.parse(JSON.stringify(curXuText.data))\n        delete xuText.__gohashid\n        // delete xuText.textAlign\n        delete xuText.hyperlink\n        delete xuText.figure\n        delete xuText.remark\n        delete xuText.nloc\n        Object.assign(xuText, {\n            \"key\": helpers.guid(), \n            \"order\": order,\n            \"olive\": data.key,\n            \"text\":\"\",\n        })\n        if(cbian){\n            xuText.text = cbian.xuText\n        }\n        // var xuText = {\n        // \"text\":\"\",\n        // \"minSize\":`${oliveWidth-30} 30`,\n        // \"deletable\":false,\n        //  \"font\": curXuText.data.font || \"18px 'Microsoft YaHei'\", \n        //  \"textAlign\": curXuText.data.textAlign,\n        //  \"spacingline\": curXuText.data.spacingline,\n        //  \"category\":\"autoText\", \n        //  \"key\": helpers.guid(), \"width\":300, \n        //  \"role\":\"xuText\", \"level\":0, \"group\": node.data.group, \n        //  \"order\": order,\n        //  \"olive\": data.key\n        // }\n        data.shiText = shiText.key\n        data.xuText = xuText.key\n\n\n        console.log(\"orderorderorderorder:\",order)\n        if(node.containingGroup){\n            node.containingGroup.layout.isOngoing = true;\n            // node.containingGroup.layout.isInit = true;\n            node.containingGroup.layout.isValidLayout = false;\n            if(node.containingGroup.containingGroup){\n                node.containingGroup.containingGroup.layout.isOngoing = true;\n                node.containingGroup.containingGroup.layout.isValidLayout = false; \n            }\n        }\n        data.isNew = true\n        diagram.model.addNodeData(data);\n        diagram.model.addNodeData(shiText);\n        diagram.model.addNodeData(xuText);\n        //diagram.model.setDataProperty(node.containingGroup,\"width\",300)\n        // diagram.model.setDataProperty(node.containingGroup,\"width\",300)\n        diagram.commitTransaction(\"dspiral\")\n        // this.diagram.updateAllTargetBindings()\n        // setTimeout(()=>{\n        //     // this.diagram.updateAllTargetBindings()\n        //     // this.diagram.layoutDiagram(true)\n        //     node.containingGroup.layout.isOngoing = true;\n        //     // node.containingGroup.layout.isInit = true;\n        //     node.containingGroup.layout.isValidLayout = false;\n        //     if(node.containingGroup.containingGroup){\n        //         node.containingGroup.containingGroup.layout.isOngoing = true;\n        //         node.containingGroup.containingGroup.layout.isValidLayout = false; \n        //     }\n        // },500)\n        // this.layoutAllGroup()\n    }\n\n\n    getAxisGroupData(options){\n        var e = this.diagram.lastInput\n        // diagram.startTransaction(\"addCbian\")\n        // var groupKey = helpers.guid()\n        \n        var basePoint = e.documentPoint\n        var baseLoc = go.Point.stringify(basePoint)\n  var axisGroupKey = helpers.guid()\n  var labelGroupKey = helpers.guid()\n  var waveGroupKey = helpers.guid()\n  var olive1Key = helpers.guid()\n  var olive2Key = helpers.guid()\n  var olive3Key = helpers.guid()\n  var olive4Key = helpers.guid()\n  var olive1ShiTextKey = helpers.guid()\n  var olive1XuTextKey = helpers.guid()\n  var olive2ShiTextKey = helpers.guid()\n  var olive2XuTextKey = helpers.guid()\n  var olive3ShiTextKey = helpers.guid()\n  var olive3XuTextKey = helpers.guid()\n  var olive4ShiTextKey = helpers.guid()\n  var olive4XuTextKey = helpers.guid()\n  var olive1CenterTextKey = helpers.guid()\n  var olive2CenterTextKey = helpers.guid()\n  var olive3CenterTextKey = helpers.guid()\n  var olive4CenterTextKey = helpers.guid()\n\n  var temp = [\n  {\"category\":\"labelGroup\", \"group\":axisGroupKey, \"role\":\"labelGroup\", \"isGroup\":true, \"level\":0, \"key\":labelGroupKey, \"loc\":go.Point.stringify(basePoint.copy().offset(30,700)), \"deletable\":false, \"selectable\":false},\n{\"category\":\"waveGroup\",\"maxOlive\":15, \"deletable\":false, \"haveTail\":true, \"oliveType\":\"Wave\", \"shiStroke\":\"#0e399d\", \"xuStroke\":\"#cb1c27\", \"centerStroke\":\"rgba(9, 166, 9, 1)\", \"oliveWidth\":150, \"oliveHeight\":120, \"isGroup\":true, \"level\":0, \"key\":waveGroupKey, \"loc\":baseLoc, \"angle\":330.08938180947, \"group\":axisGroupKey, \"movable\":false, \"desiredSize\":\"700 120\", \"textAngle\":\"horizontal\", \"centerTextAngle\":\"independent\", \"centerTextMode\":\"independent\"},\n{\"category\":\"axisGroup\", \"isGroup\":true, \"level\":0, \"key\":axisGroupKey, \"loc\":baseLoc, \"angle\":0, \"desiredSize\":\"300 150\"},\n{\"category\":\"line\", \"level\":0, \"key\":-11, \"loc\":baseLoc, \"desiredSize\":\"700 1\", \"width\":1400, \"height\":1, \"group\":waveGroupKey, \"angle\":330.08938180947, \"role\":\"centerLine\", \"selectable\":false, \"stroke\":\"rgba(9, 166, 9, 1)\"},\n{\"category\":\"line\", \"level\":0, \"key\":-8, \"loc\":\"-91.91674008334496 -140.02427812707117\", \"desiredSize\":\"606.7630471788291 10\", \"width\":1400, \"height\":1, \"angle\":0, \"group\":axisGroupKey, \"role\":\"axisX\", \"selectable\":false, \"stroke\":\"#0e399d\"},\n{\"category\":\"line\", \"level\":0, \"key\":-7, \"loc\":\"-91.91674008334496 -140.02427812707117\", \"desiredSize\":\"349.05387059630493 10\", \"width\":1400, \"height\":1, \"angle\":270, \"group\":axisGroupKey, \"role\":\"axisY\", \"selectable\":false, \"stroke\":\"#cb1c27\"},\n{\"text\":\"能量\", \"deletable\":false, \"font\":\"24px 'Microsoft YaHei'\", \"category\":\"autoText\", \"loc\":\"-101.91674008334496 -489.0781487233761\", \"key\":-12, \"role\":\"axisYText\", \"locationSpot\":\"1 0.5 0 0\", \"group\":axisGroupKey, \"movable\":true},\n{\"text\":\"主题\", \"role\":\"themeText\", \"deletable\":false, \"font\":\"24px 'Microsoft YaHei'\", \"category\":\"autoText\", \"loc\":go.Point.stringify(basePoint.copy().offset(-30,0)), \"key\":-13, \"level\":0, \"group\":axisGroupKey, \"locationSpot\":\"0.5 0 0 0\", \"movable\":true, \"width\":300},\n{\"text\":\"时间\", \"deletable\":false, \"font\":\"24px 'Microsoft YaHei'\", \"category\":\"autoText\", \"loc\":\"514.8463070954841 -140.02427812707117\", \"key\":-14, \"role\":\"axisXText\", \"group\":axisGroupKey, \"locationSpot\":\"0.5 0 0 0\"},\n{\"text\":\"实线：\", \"deletable\":false, \"fill\":\"#cb1c27\", \"iconVisible\":true, \"locationSpot\":\"0 0 0 0\", \"textAlign\":\"start\", \"category\":\"autoText\", \"loc\":go.Point.stringify(basePoint.copy().offset(30,-350)), \"role\":\"labelText1\", \"movable\":true, \"group\":labelGroupKey, \"visible\":true, \"minSize\":\"120 30\"},\n{\"text\":\"虚线：\", \"deletable\":false, \"fill\":\"#0e399d\", \"iconVisible\":true, \"locationSpot\":\"0 0 0 0\", \"textAlign\":\"start\", \"category\":\"autoText\", \"loc\":go.Point.stringify(basePoint.copy().offset(30,-310)), \"role\":\"labelText2\", \"movable\":true, \"group\":labelGroupKey, \"visible\":true, \"minSize\":\"120 30\"},\n{\"text\":\"中线：\", \"deletable\":false, \"fill\":\"#3f5369\", \"iconVisible\":true, \"locationSpot\":\"0 0 0 0\", \"textAlign\":\"start\", \"category\":\"autoText\", \"loc\":go.Point.stringify(basePoint.copy().offset(30,-270)), \"role\":\"labelText3\", \"movable\":true, \"group\":labelGroupKey, \"visible\":true, \"minSize\":\"120 30\"},\n\n{\"category\":\"wave\", \"text\":\"\", \"role\":\"waveTail\", \"deletable\":false, \"selectable\":false, \"level\":0, \"key\":\"2d6ff2f1-0966-36bf-4e85-f5775ca0652b\", \"group\":waveGroupKey, \"loc\":\"710.0826118675676 -829.1890319396903\", \"desiredSize\":\"75 120\", \"order\":999, \"oliveType\":\"Wave\", \"angle\":330.08938180947, \"textAlign\":\"center\", \"shiStroke\":\"#0e399d\", \"xuStroke\":\"#cb1c27\", \"centerText\":\"df53d882-fe51-d78e-d8e3-8d9681578cb8\", \"textVisible\":false, \"isNew\":null},\n    ]\n    if(!options){\n        temp = temp.concat([\n            {\"category\":\"wave\", \"text\":\"1\\n\", \"level\":0, \"key\":olive1Key, \"group\":waveGroupKey, \"desiredSize\":\"150 120\", \"order\":1, \"shiText\":olive1ShiTextKey, \"xuText\":olive1XuTextKey, \"angle\":330.08938180947, \"loc\":\"-91.91674008334496 -140.02427812707123\", \"oliveType\":\"Ellipse\", \"textAlign\":\"center\", \"shiStroke\":\"#cb1c27\", \"xuStroke\":\"#0e399d\", \"centerText\":olive1CenterTextKey, \"textVisible\":false},\n            {\"deletable\":false, \"text\":\"\", \"font\":\"18px 'Microsoft YaHei'\", \"category\":\"autoText\", \"key\":olive1ShiTextKey, \"width\":150, \"role\":\"shiText\", \"level\":0, \"group\":waveGroupKey, \"order\":1, \"olive\":olive1Key, \"loc\":\"4.128618140465704 -125.47989214278559\", \"locationSpot\":\"0 0 0 0\", \"textStroke\":\"#cb1c27\", \"showBorder\":true, \"angle\":0, \"minSize\":\"120 30\", \"textAlign\":\"start\"},\n            {\"deletable\":false, \"text\":\"\", \"font\":\"18px 'Microsoft YaHei'\", \"category\":\"autoText\", \"key\":olive1XuTextKey, \"width\":150, \"role\":\"xuText\", \"level\":0, \"group\":waveGroupKey, \"order\":1, \"olive\":olive1Key, \"loc\":\"-56.2078366340385 -230.36321886941172\", \"locationSpot\":\"1 1 0 0\", \"textStroke\":\"#0e399d\", \"showBorder\":true, \"angle\":0, \"minSize\":\"120 30\", \"textAlign\":\"start\"},\n            {\"category\":\"wave\", \"text\":\"3\\n\", \"level\":0, \"key\":olive2Key, \"group\":waveGroupKey, \"desiredSize\":\"150 120\", \"order\":3, \"shiText\":olive2ShiTextKey, \"xuText\":olive2XuTextKey, \"angle\":330.08938180947, \"loc\":\"168.12456585043884 -289.61879409691636\", \"oliveType\":\"Ellipse\", \"textAlign\":\"center\", \"shiStroke\":\"#cb1c27\", \"xuStroke\":\"#0e399d\", \"centerText\":olive2CenterTextKey, \"textVisible\":false},\n            {\"deletable\":false, \"text\":\"\", \"font\":\"18px 'Microsoft YaHei'\", \"category\":\"autoText\", \"key\":olive2ShiTextKey, \"width\":150, \"role\":\"shiText\", \"level\":0, \"group\":waveGroupKey, \"order\":3, \"olive\":olive2Key, \"loc\":\"264.16992407424954 -275.07440811263075\", \"locationSpot\":\"0 0 0 0\", \"textStroke\":\"#cb1c27\", \"showBorder\":true, \"angle\":0, \"minSize\":\"120 30\", \"textAlign\":\"start\"},\n            {\"deletable\":false, \"text\":\"\", \"font\":\"18px 'Microsoft YaHei'\", \"category\":\"autoText\", \"key\":olive2XuTextKey, \"width\":150, \"role\":\"xuText\", \"level\":0, \"group\":waveGroupKey, \"order\":3, \"olive\":olive2Key, \"loc\":\"203.83346929974533 -379.9577348392569\", \"locationSpot\":\"1 1 0 0\", \"textStroke\":\"#0e399d\", \"showBorder\":true, \"angle\":0, \"minSize\":\"120 30\", \"textAlign\":\"start\"},\n            {\"category\":\"wave\", \"text\":\"2\\n\", \"level\":0, \"key\":olive3Key, \"group\":waveGroupKey, \"desiredSize\":\"150 120\", \"order\":2, \"shiText\":olive3ShiTextKey, \"xuText\":olive3XuTextKey, \"angle\":330.08938180947, \"loc\":\"38.10391288354694 -214.8215361119938\", \"oliveType\":\"Ellipse\", \"textAlign\":\"center\", \"shiStroke\":\"#cb1c27\", \"xuStroke\":\"#0e399d\", \"centerText\":olive3CenterTextKey, \"textVisible\":false},\n            {\"deletable\":false, \"text\":\"\", \"font\":\"18px 'Microsoft YaHei'\", \"category\":\"autoText\", \"key\":olive3ShiTextKey, \"width\":150, \"role\":\"shiText\", \"level\":0, \"group\":waveGroupKey, \"order\":2, \"olive\":olive3Key, \"loc\":\"73.8128163328534 -305.1604768543343\", \"locationSpot\":\"1 1 0 0\", \"textStroke\":\"#cb1c27\", \"showBorder\":true, \"angle\":0, \"minSize\":\"120 30\", \"textAlign\":\"start\"},\n            {\"deletable\":false, \"text\":\"\", \"font\":\"18px 'Microsoft YaHei'\", \"category\":\"autoText\", \"key\":olive3XuTextKey, \"width\":150, \"role\":\"xuText\", \"level\":0, \"group\":waveGroupKey, \"order\":2, \"olive\":olive3Key, \"loc\":\"134.1492711073576 -200.27715012770815\", \"locationSpot\":\"0 0 0 0\", \"textStroke\":\"#0e399d\", \"showBorder\":true, \"angle\":0, \"minSize\":\"120 30\", \"textAlign\":\"start\"},\n            {\"category\":\"wave\", \"text\":\"4\\n\", \"level\":0, \"key\":olive4Key, \"group\":waveGroupKey, \"desiredSize\":\"150 120\", \"order\":4, \"shiText\":olive4ShiTextKey, \"xuText\":olive4XuTextKey, \"angle\":330.08938180947, \"loc\":\"298.1452188173308 -364.41605208183887\", \"oliveType\":\"Ellipse\", \"textAlign\":\"center\", \"shiStroke\":\"#cb1c27\", \"xuStroke\":\"#0e399d\", \"centerText\":olive4CenterTextKey, \"textVisible\":false},\n            {\"deletable\":false, \"text\":\"\", \"font\":\"18px 'Microsoft YaHei'\", \"category\":\"autoText\", \"key\":olive4ShiTextKey, \"width\":150, \"role\":\"shiText\", \"level\":0, \"group\":waveGroupKey, \"order\":4, \"olive\":olive4Key, \"loc\":\"333.8541222666372 -454.7549928241794\", \"locationSpot\":\"1 1 0 0\", \"textStroke\":\"#cb1c27\", \"showBorder\":true, \"angle\":0, \"minSize\":\"120 30\", \"textAlign\":\"start\"},\n            {\"deletable\":false, \"text\":\"\", \"font\":\"18px 'Microsoft YaHei'\", \"category\":\"autoText\", \"key\":olive4XuTextKey, \"width\":150, \"role\":\"xuText\", \"level\":0, \"group\":waveGroupKey, \"order\":4, \"olive\":olive4Key, \"loc\":\"394.1905770411414 -349.87166609755326\", \"locationSpot\":\"0 0 0 0\", \"textStroke\":\"#0e399d\", \"showBorder\":true, \"angle\":0, \"minSize\":\"120 30\", \"textAlign\":\"start\"},\n            {\"text\":\"1\\n\", \"minSize\":\"120 30\", \"deletable\":false, \"textAlign\":\"center\", \"font\":\"18px 'Microsoft YaHei'\", \"category\":\"autoText\", \"key\":olive1CenterTextKey, \"width\":120, \"role\":\"centerText\", \"level\":0, \"group\":waveGroupKey, \"order\":1, \"visible\":true, \"layerName\":\"Foreground\", \"locationSpot\":\"0.5 0.5 0 0\", \"selectable\":false, \"olive\":olive1Key, \"loc\":\"-26.039609246786398 -177.92155550609866\", \"angle\":0},\n            {\"text\":\"2\\n\", \"minSize\":\"120 30\", \"deletable\":false, \"textAlign\":\"center\", \"font\":\"18px 'Microsoft YaHei'\", \"category\":\"autoText\", \"key\":olive3CenterTextKey, \"width\":120, \"role\":\"centerText\", \"level\":0, \"group\":waveGroupKey, \"order\":2, \"visible\":true, \"layerName\":\"Foreground\", \"locationSpot\":\"0.5 0.5 0 0\", \"selectable\":false, \"olive\":olive3Key, \"loc\":\"103.9810437201055 -252.71881349102122\", \"angle\":0},\n            {\"text\":\"3\\n\", \"minSize\":\"120 30\", \"deletable\":false, \"textAlign\":\"center\", \"font\":\"18px 'Microsoft YaHei'\", \"category\":\"autoText\", \"key\":olive2CenterTextKey, \"width\":120, \"role\":\"centerText\", \"level\":0, \"group\":waveGroupKey, \"order\":3, \"visible\":true, \"layerName\":\"Foreground\", \"locationSpot\":\"0.5 0.5 0 0\", \"selectable\":false, \"olive\":olive2Key, \"loc\":\"234.00169668699743 -327.5160714759438\", \"angle\":0},\n            {\"text\":\"4\\n\", \"minSize\":\"120 30\", \"deletable\":false, \"textAlign\":\"center\", \"font\":\"18px 'Microsoft YaHei'\", \"category\":\"autoText\", \"key\":olive4CenterTextKey, \"width\":120, \"role\":\"centerText\", \"level\":0, \"group\":waveGroupKey, \"order\":4, \"visible\":true, \"layerName\":\"Foreground\", \"locationSpot\":\"0.5 0.5 0 0\", \"selectable\":false, \"olive\":olive4Key, \"loc\":\"364.0223496538893 -402.3133294608663\", \"angle\":0},\n        ])\n    }\n  return temp\n    }\n    \n\n    // 增加拓扑\n    addAxisGroup(options){\n        console.log(\"addOliveaddOlive\")\n        var diagram = this.diagram\n        var axisGroupCount = 0;\n        for(var i=0;i<diagram.model.nodeDataArray.length;i++){\n            if(diagram.model.nodeDataArray[i].category == \"axisGroup\"){\n                axisGroupCount += 1;\n            }\n        }\n        // 最多插入13个拓扑\n        if(axisGroupCount > 13){\n            return;\n        }\n        var axisData = this.getAxisGroupData(options)\n        if(!axisData) return;\n        diagram.startTransaction(\"dspiral\")\n        for(var i=0;i<axisData.length;i++){\n            diagram.model.addNodeData(axisData[i]);\n        }\n       \n        //diagram.model.setDataProperty(node.containingGroup,\"width\",300)\n        // diagram.model.setDataProperty(node.containingGroup,\"width\",300)\n        diagram.commitTransaction(\"dspiral\")\n        return axisData\n        // this.diagram.updateAllTargetBindings()\n        // setTimeout(()=>{\n        //     // this.diagram.updateAllTargetBindings()\n        //     this.diagram.layoutDiagram(true)\n        // },500)\n        // this.layoutAllGroup()\n    }\n    // 选择文本节点\n    selectText(e) {\n        // console.log(\"selectTextselectTextselectText\")\n        var myDiagram = this.diagram\n        var node = myDiagram.selection.first();\n        if (!node) return;\n        // removeNodeRemarkTips();\n        // console.log(\"selectTExt\")\n\n        var tb = myDiagram.selection.first().findObject('TEXT');\n        if (tb) myDiagram.commandHandler.editTextBlock(tb);\n        // try{\n        //     var tmp;\n        //     if(node.containingGroup && node.containingGroup.data.category == \"waveGroup\"){\n        //         if(node.data.role == \"shiText\"){\n        //             if(node.containingGroup.labelText1 && node.data.text.trim() == \"\"){\n        //                 // node.data.text = node.containingGroup.labelText1.data.text\n        //                 tmp = node.containingGroup.labelText1.data.text.replace(\"实线：\",\"\")\n        //                 if(tmp != \"\"){\n        //                     myDiagram.currentTool.currentTextEditor.mainElement.value = tmp+\"：\"\n        //                 }\n        //             }\n        //         }\n        //         if(node.data.role == \"xuText\"){\n        //             if(node.containingGroup.labelText2 && node.data.text.trim() == \"\"){\n        //                 // node.data.text = node.containingGroup.labelText1.data.text\n        //                 tmp = node.containingGroup.labelText2.data.text.replace(\"虚线：\",\"\")\n        //                 if(tmp != \"\"){\n        //                     myDiagram.currentTool.currentTextEditor.mainElement.value = tmp+\"：\"\n        //                 }\n        //             }\n        //         }\n        //         if(node.data.category == \"wave\" || node.data.role == \"centerText\"){\n        //             if(node.containingGroup.labelText3 && node.data.text.trim() == \"\"){\n        //                 // node.data.text = node.containingGroup.labelText1.data.text\n        //                 tmp = node.containingGroup.labelText3.data.text.replace(\"中线：\",\"\")\n        //                 if(tmp != \"\"){\n        //                     myDiagram.currentTool.currentTextEditor.mainElement.value = tmp+\"：\"\n        //                 }\n        //             }\n        //         }\n        //     }\n        // }catch(e){\n        //     console.log(\"selectText:error:\",e)\n        // }\n        // 手机上支持换行，电脑上需要ctl+Enter键换行\n        if(!helpers.checkPhone()){\n            helpers.simulateEnterWithAlt(e);\n        }else{\n            var val = myDiagram.currentTool.currentTextEditor.mainElement.value\n            myDiagram.currentTool.currentTextEditor.mainElement.selectionStart = val.length; \n            myDiagram.currentTool.currentTextEditor.mainElement.selectionEnd = val.length; \n        }\n    }\n\n    clearAllTextBorder(){\n        var it = this.diagram.nodes.iterator;\n        while (it.next()) {\n            var n = it.value;\n            if(n.data.category == \"autoText\"){\n                  n.findObject(\"textBorder\").visible = false;\n            }\n        }\n    }\n\n    triggerShowFireText(){\n        var e = this.diagram.lastInput;\n        var node = this.diagram.selection.first()\n        if(!node) return;\n        node.__trtdNode.dealFireText(e)\n    }\n    \n    // 获取火花矩阵某一圈的文字\n    apiGetFireText(theta){\n        var fireTexts = {}\n        var node = this.diagram.selection.first()\n        // var group = node.containingGroup;\n       \n        if(!node) return fireTexts\n        if(node.containingGroup && node.containingGroup.data.category == \"yunGroup\"){\n            var group = node.containingGroup;\n            var it;\n            if(theta){\n                 it = group.findSubGraphParts().iterator;\n                while(it.next()){\n                    if(it.value.data.theta == theta){\n                        node = it.value;\n                        break;\n                    }\n                }\n                it.reset();\n            }\n            var x = Math.max(Math.abs(node.data.orderX - 10), Math.abs(node.data.orderY -10))\n             it = group.findSubGraphParts().iterator;\n            while(it.next()){\n                var n = it.value;\n                if(n.data.dimX == (0) && n.data.dimY == (19)){\n                    fireTexts.dimText1 = n;\n                }\n                if(n.data.dimX == (10) && n.data.dimY == (19)){\n                    fireTexts.dimText2 = n;\n                }\n                if(n.data.dimX == (19) && n.data.dimY == (19)){\n                    fireTexts.dimText3 = n;\n                }\n                if(n.data.dimX == (19) && n.data.dimY == (10)){\n                    fireTexts.dimText4 = n;\n                }\n                if(n.data.dimX == (19) && n.data.dimY == (19)){\n                    fireTexts.dimText5 = n;\n                }\n                if(n.data.dimX == (10) && n.data.dimY == (0)){\n                    fireTexts.dimText6 = n;\n                }\n                if(n.data.dimX == (0) && n.data.dimY == (0)){\n                    fireTexts.dimText7 = n;\n                }\n                if(n.data.dimX == (0) && n.data.dimY == (10)){\n                    fireTexts.dimText8 = n;\n                }\n                if(n.data.orderX == (10-x) && n.data.orderY == (10+x)){\n                    fireTexts.text1 = n;\n                }\n \n                if(n.data.orderX == (10) && n.data.orderY == (10+x)){\n                    fireTexts.text2 = n;\n                }\n                if(n.data.orderX == (10+x) && n.data.orderY == (10+x)){\n                    fireTexts.text3 = n;\n                }\n                if(n.data.orderX == (10+x) && n.data.orderY == (10)){\n                    fireTexts.text4 = n;\n                }\n                if(n.data.orderX == (10+x) && n.data.orderY == (10-x)){\n                    fireTexts.text5 = n;\n                }\n                if(n.data.orderX == (10) && n.data.orderY == (10-x)){\n                    fireTexts.text6 = n;\n                }\n                if(n.data.orderX == (10-x) && n.data.orderY == (10-x)){\n                    fireTexts.text7 = n;\n                }\n                if(n.data.orderX == (10-x) && n.data.orderY == (10)){\n                    fireTexts.text8 = n;\n                }\n                if(n.data.subRole == \"themeText\"){\n                    fireTexts.themeText = n;\n                }\n\n            }\n            fireTexts.radius = x;\n            return fireTexts\n        }\n        return fireTexts\n    }\n\n    apiSwitchWaveTail(){\n        console.log(\"apiSwitchWaveTailapiSwitchWaveTail\")\n        var node = this.diagram.selection.first()\n        if(!node) return\n        this.diagram.startTransaction()\n        // this.diagram.model.setDataProperty(node.data, \"oliveType\", \"Ellipse\")\n        // this.diagram.model.setDataProperty(node.data, \"haveTail\", false)\n        var it = node.findSubGraphParts().iterator;\n        var waveTail= null; // 查找是否存在尾巴\n        var lastNode = null;\n        var loc;\n        while(it.next()){\n            var n = it.value;\n            lastNode = n;\n            if(n.data.role == \"waveTail\"){\n                waveTail = n;\n                break;\n            }\n        }\n        if(lastNode){\n            loc = lastNode.data.loc\n        }else{\n            loc = node.data.loc\n        }\n        if(waveTail){\n            this.diagram.model.removeNodeData(waveTail.data);\n            this.diagram.model.setDataProperty(node.data, \"haveTail\", false)\n        }else{\n            this.diagram.model.setDataProperty(node.data, \"haveTail\", true)\n            var tailOlive = {\"category\":\"wave\", \n                \"text\":\"\", \n                \"role\":\"waveTail\",\n                deletable:false,\n                \"selectable\": false,\n                \"deletable\": false,\n                \"level\":0, \"key\": helpers.guid(), \n                \"group\":node.data.key, \n                \"loc\": loc,\n                \"desiredSize\": `${node.data.oliveWidth} ${node.data.oliveHeight}`, \n                \"order\": 2000,\n            }\n            this.diagram.model.addNodeData(tailOlive)\n        }\n        node.layout.isOngoing = true;\n        node.layout.isValidLayout = false;\n        this.diagram.commitTransaction()\n    }\n\n    //切换为橄榄形状\n    apiSwitchToEllipse(){\n        console.log(\"apiSwitchToEllipse\")\n        var node = this.diagram.selection.first()\n        if(!node) return\n        this.diagram.startTransaction()\n        this.diagram.model.setDataProperty(node.data, \"oliveType\", \"Ellipse\")\n        // this.diagram.model.setDataProperty(node.data, \"haveTail\", false)\n        var it = node.findSubGraphParts().iterator;\n        var waveTail= null; // 查找是否存在尾巴\n\n        while(it.next()){\n            var n = it.value;\n            if(n.data.role == \"waveTail\"){\n                waveTail = n;\n                break;\n            }\n        }\n\n        if(waveTail){\n            this.diagram.model.removeNodeData(waveTail.data);\n        }\n        node.layout.isOngoing = true;\n        node.layout.isValidLayout = false;\n        if(node.containingGroup){\n            node.containingGroup.layout.isOngoing = true;\n            node.containingGroup.layout.isValidLayout = false;\n        }\n        this.diagram.commitTransaction()\n    }\n\n\n    \n    // 切换为螺旋形状\n    apiSwitchToWave(){\n        var node = this.diagram.selection.first()\n        if(!node) return\n        this.diagram.startTransaction(\"apiSwitchToWave\")\n        this.diagram.model.setDataProperty(node.data, \"oliveType\", \"Wave\")\n        // this.diagram.model.setDataProperty(node.data, \"haveTail\", true)\n        var it = node.findSubGraphParts().iterator;\n        var waveTail= null; // 查找是否存在尾巴\n        var lastNode = null;\n        var haveTail = node.data.haveTail\n        var loc;\n        while(it.next()){\n            var n = it.value;\n            lastNode = n;\n            if(n.data.role == \"waveTail\"){\n                waveTail = n;\n                break;\n            }\n        }\n        if(lastNode){\n            loc = lastNode.data.loc\n        }else{\n            loc = node.data.loc\n        }\n        if(!waveTail && haveTail == true){\n            var tailOlive = {\"category\":\"wave\", \n                \"text\":\"\", \n                \"role\":\"waveTail\",\n                deletable:false,\n                \"selectable\": false,\n                \"deletable\": false,\n                \"level\":0, \"key\": helpers.guid(), \n                \"group\":node.data.key, \n                \"loc\": loc,\n                \"desiredSize\": `${node.data.oliveWidth} ${node.data.oliveHeight}`, \n                \"order\": 2000,\n            }\n            this.diagram.model.addNodeData(tailOlive)\n        }\n        node.layout.isOngoing = true;\n        node.layout.isValidLayout = false;\n        if(node.containingGroup){\n            node.containingGroup.layout.isOngoing = true;\n            node.containingGroup.layout.isValidLayout = false;\n        }\n        this.diagram.commitTransaction(\"apiSwitchToWave\")\n    }\n\n    // 切换文字方向\n    apiSwitchTextAngle(textAngle){\n        var node = this.diagram.selection.first()\n        if(!node) return\n        var mapObj = {\n            \"horizontal\":\"vertical\",\n            \"vertical\":\"horizontal\",\n        }\n        console.log(\"apiSwitchTextAngle\")\n        \n        node.diagram.startTransaction(\"apiSwitchTextAngle\")\n        if(textAngle && [\"horizontal\",\"vertical\"].indexOf(textAngle) > -1){\n            node.diagram.model.setDataProperty(node.data, \"textAngle\", textAngle)\n            node.data.textAngle = textAngle\n        }else{\n           textAngle = mapObj[node.data.textAngle] || \"horizontal\"\n           node.diagram.model.setDataProperty(node.data, \"textAngle\", textAngle)\n            node.data.textAngle = textAngle\n            // }\n        }\n        // var angle = node.angle\n        // this.diagram.model.setDataProperty(node.data, \"angle\", angle+1)\n        // this.diagram.model.setDataProperty(node.data, \"angle\", angle)\n        // node.layout.isInit = true;\n        // setTimeout(()=>{\n            node.layout.isOngoing = true;\n            node.layout.isValidLayout = false;\n        // })\n        node.diagram.commitTransaction(\"apiSwitchTextAngle\")\n        // this.diagram.startTransaction(\"layout\")\n        // node.layout.isOngoing = true;\n        // node.layout.isValidLayout = false;\n        // this.diagram.commitTransaction(\"layout\")\n        // this.diagram.updateAllTargetBindings()\n        // this.diagram.layoutDiagram(true)\n    }\n\n    // 以下两个方法控制菜单显示\n    getDefaultCustomMenuDivStr(){\n        return `\n        <ul>\n            <li trtd_action=\"exportAsSubFigure\"><a class=\"i18n\" data-lang=\"cancelfix\">创建为子盘</a></li>\n            <li trtd_action=\"drillAnalyze\"><a class=\"i18n\" data-lang=\"cancelfix\">插入子盘</a></li>\n            <li trtd_action=\"addFollower\"><a class=\"i18n\" data-lang=\"insertsl\">插入同级节点</a></li>\n            <li trtd_action=\"startNewSpiral\"><a class=\"i18n\" data-lang=\"icn\">插入子节点</a></li>\n            <li trtd_action=\"apiDuplicateNode\"><a class=\"i18n\" data-lang=\"duplicateNode\">复制节点</a></li>\n            <li trtd_action=\"apiDeleteSelection\"><a class=\"i18n\" data-lang=\"remove\">删除</a></li>\n            <li trtd_action=\"splitOlive2Cbian\"><a class=\"i18n\" data-lang=\"remove\">分离</a></li>\n            <li trtd_action=\"splitOlive2Half\"><a class=\"i18n\" data-lang=\"remove\">拆分</a></li>\n            <li trtd_action=\"orderChildNode\"><a class=\"i18n\" data-lang=\"ordernode\">子节点编号</a></li>\n            <li trtd_action=\"clearOrderChildNode\"><a class=\"i18n\" data-lang=\"clearordernode\">取消子节点编号</a></li>\n            <li trtd_action=\"clearNodeTextMenu\"><a class=\"i18n\" data-lang=\"emptynodetext\">清空节点文本</a></li>\n            <li trtd_action=\"apiInsertTianpanNode\"><a class=\"i18n\" data-lang=\"insertnodetianpan\">插入天盘节点</a></li>\n            <li trtd_action=\"addTextNode\"><a class=\"i18n\" data-lang=\"inserttext\">插入文本</a></li>\n            <li trtd_action=\"locateRootNodeMenu\"><a class=\"i18n\" data-lang=\"locaterootnode\">定位根节点</a></li>\n            <li trtd_action=\"showAllNodesMenu\"><a class=\"i18n\" data-lang=\"displayallnodes\">显示所有节点</a></li>\n            <li trtd_action=\"fixPictureMenu\"><a class=\"i18n\" data-lang=\"fixnode\">固定节点</a></li>\n            <li trtd_action=\"activePictureMenu\"><a class=\"i18n\" data-lang=\"cancelfix\">取消固定</a></li>\n            <li trtd_action=\"apiSwitchToEllipse\"><a class=\"i18n\" data-lang=\"cancelfix\">切换为橄榄形状</a></li>\n            <li trtd_action=\"apiSwitchToWave\"><a class=\"i18n\" data-lang=\"cancelfix\">切换为螺旋形状</a></li>\n            <li trtd_action=\"apiSwitchWaveTail\"><a class=\"i18n\" data-lang=\"cancelfix\">添加/删除尾巴</a></li>\n            <li trtd_action=\"apiSwitchTextAngle\"><a class=\"i18n\" data-lang=\"cancelfix\">切换文字方向</a></li>\n            <li trtd_action=\"addCbian\"><a class=\"i18n\" data-lang=\"cancelfix\">添加总结图</a></li>\n            <li trtd_action=\"addAxisGroup\"><a class=\"i18n\" data-lang=\"cancelfix\">插入拓扑</a></li>\n            <li trtd_action=\"addYunText\"><a class=\"i18n\" data-lang=\"cancelfix\">添加文字</a></li>\n            <li trtd_action=\"showRect\"><a class=\"i18n\" data-lang=\"cancelfix\">显示矩形线</a></li>\n            <li trtd_action=\"hideRect\"><a class=\"i18n\" data-lang=\"cancelfix\">隐藏矩形线</a></li>\n            <li trtd_action=\"offShowRedLine\"><a class=\"i18n\" data-lang=\"cancelfix\">关闭自动显示红线</a></li>\n            <li trtd_action=\"autoShowRedline\"><a class=\"i18n\" data-lang=\"cancelfix\">自动显示自旋红线</a></li>\n            <li trtd_action=\"bringupLayer\"><a class=\"i18n\" data-lang=\"cancelfix\">上移一层</a></li>\n            <li trtd_action=\"bringdownLayer\"><a class=\"i18n\" data-lang=\"cancelfix\">下移一层</a></li>\n            <li trtd_action=\"bringToBackground\"><a class=\"i18n\" data-lang=\"cancelfix\">置于底层</a></li>\n            <li trtd_action=\"bringToForeground\"><a class=\"i18n\" data-lang=\"cancelfix\">置于顶层</a></li>\n            <li trtd_action=\"addDimTtext\"><a class=\"i18n\" data-lang=\"cancelfix\">增加维度</a></li>\n            <li trtd_action=\"switchCbianSize\"><a class=\"i18n\" data-lang=\"cancelfix\">切换大小</a></li>\n            <li trtd_action=\"copyWaveGroup\"><a class=\"i18n\" data-lang=\"cancelfix\">复制</a></li>\n        </ul>\n        `\n    }\n    getShowContextMenus(node){\n        var showIds = null\n        console.log(\"getShowContextMenus\")\n        if(node){\n            // 双螺旋可以添加常变\n            if([\"axisGroup\"].indexOf(node.data.category) > -1){\n                showIds = \"addCbian,apiDeleteSelection,exportAsSubFigure,copyWaveGroup\"\n            }\n            if([\"picGroup\"].indexOf(node.data.category) > -1){\n                showIds = \"apiDeleteSelection,switchCbianSize\"\n            }\n\n            if([\"3\"].indexOf(node.data.category) > -1){\n                showIds = \"bringupLayer,apiDeleteSelection,bringdownLayer,bringToBackground,bringToForeground\"\n            }\n\n            if( [\"wave\"].indexOf(node.data.category) > -1){\n                if(node.data.deletable != null){\n                    if(node.data.deletable){\n                        showIds = \"apiDeleteSelection,splitOlive2Cbian,splitOlive2Half\";\n                    }\n                }else{\n                    if(node.deletable){\n                        showIds = \"apiDeleteSelection,splitOlive2Cbian,splitOlive2Half\";\n                    }\n                }\n            }\n            console.log(\"waveGroupwaveGroup\")\n            if( [\"waveGroup\"].indexOf(node.data.category) > -1){\n                showIds = \"apiSwitchTextAngle,\";\n                if(node.data.oliveType == \"Ellipse\"){\n                    showIds += \"apiSwitchToWave\"\n                }else{\n                    showIds += \"apiSwitchToEllipse,apiSwitchWaveTail\"\n                }\n                \n            }\n            if( [\"yunGroup\"].indexOf(node.data.category) > -1){\n                showIds = \"addYunText,\";\n                if(node.data.showShape){\n                    showIds += \"hideRect\"\n                }else{\n                    showIds += \"showRect\"\n                }\n                if(node.data.beginSpark != \"line\"){\n                    showIds += \",autoShowRedline\"\n                }else{\n                    showIds += \",offShowRedLine\"\n                }\n            }\n            if( [\"autoText\"].indexOf(node.data.category) > -1 && [\"shiText\",\"xuText\"].indexOf(node.data.role) < 0){\n                showIds = \"apiDeleteSelection\";\n            }\n            if(node.data.subRole == \"dimText\" && node.containingGroup.data.category == \"yunpanGroup\"){\n                showIds = \"apiDeleteSelection,addDimTtext\"\n            }\n            if(node.data.category == \"shapeText\"&& node.containingGroup.data.category == \"yunpanGroup\"){\n                showIds = \"apiDeleteSelection\"\n            }\n\n            // 橄榄/文字节点可以拓扑钻取分析\n            if([\"wave\",\"autoText\",\"shapeText\"].indexOf(node.data.category)>-1){\n                if(node.data.text){\n                    showIds += \",drillAnalyze\"\n                }\n            }\n            if([\"autoText\"].indexOf(node.data.category)>-1){\n                // if(node.data.text){\n                    showIds += \",apiDuplicateNode\"\n                // }\n            }\n            \n            // apiDuplicateNode\n            // return \"addFollowerGround,\" + \"addNewCircle,\"+\"apiDeleteSelection\";\n        }else{\n            // return \"addFollowerGround\"\n            console.log(\"show menu ...............\", this.canAddAxisGroup)\n            if(this.canAddAxisGroup){\n                showIds = \"addCbian,addAxisGroup\"\n            }else{\n                showIds = \"addCbian\"\n\n            }\n            \n        }\n\n        return showIds;\n    }\n    \n    addYunText(){\n        var node = this.diagram.selection.first();\n        var myDiagram = this.diagram;\n        if(!node) return;\n        var e = myDiagram.lastInput;\n        node.__trtdNode.addFreeText(e, node)\n    }\n    // 云盘增加维度\n    addDimTtext(){\n        var node = this.diagram.selection.first();\n        var myDiagram = this.diagram;\n        if(!node) return;\n        if(node.data.subRole != \"dimText\") return;\n        var count = 0\n        var it = node.containingGroup.findSubGraphParts().iterator;\n        var deleteNodes = []\n        var deleteLines = []\n        var curLine = null;\n        var normDim = \"X\",unnormDim = \"Y\", lineRole = \"verticalLine\"\n        if(node.data.dimX == 0){\n            normDim = \"Y\"\n            unnormDim = \"X\"\n            lineRole = \"horizontalLine\"\n        }\n        while (it.next()) {\n            var n = it.value;\n            if(n.data.subRole == \"dimText\" && n.data[\"dim\"+unnormDim] == 0){\n                // if(n.data.order == node.data.order+1){\n                //     locateNode = n;\n                // }\n                count++;\n            }\n            if(n.data.subRole == \"yunpanText\" && n.data[\"order\"+normDim] == node.data[\"dim\"+normDim]){\n                deleteNodes.push(n.data)\n            }\n            if(n.data.category == \"line\"  && n.data.role == lineRole\n            && n.data[\"order\"]  == node.data[\"dim\"+normDim]\n            ){\n                curLine = n\n            }\n            // if(n.data.role == \"xuText\" && n.data.order == node.data.order){\n            //     xuText = n;\n            // }\n            // if(n.data.role == \"centerText\" && n.data.order == node.data.order){\n            //     centerText = n;\n            // }\n\n        }\n        \n        if(count>=30){\n           \n            return;\n        }\n        this.diagram.startTransaction(\"addDimTtext\");\n        it.reset()\n        while (it.next()) {\n            var n = it.value;\n            if(n.data.subRole == \"dimText\" && n.data[\"dim\"+unnormDim] == 0 && n.data[\"dim\"+normDim] > node.data[\"dim\"+normDim]){\n                // if(n.data.order == node.data.order+1){\n                //     locateNode = n;\n                // }\n                n.diagram.model.setDataProperty(n.data, \"dim\"+normDim, n.data[\"dim\"+normDim] + 1)\n                // count++;\n            }\n            if(n.data.subRole == \"yunpanText\" && n.data[\"order\"+normDim] > node.data[\"dim\"+normDim]){\n                n.diagram.model.setDataProperty(n.data, \"order\"+normDim, n.data[\"order\"+normDim] + 1)\n            }\n            if(n.data.category == \"line\"  && n.data.role == lineRole\n            && n.data[\"order\"]  > node.data[\"dim\"+normDim]\n            ){\n                n.diagram.model.setDataProperty(n.data, \"order\", n.data[\"order\"] + 1)\n            }\n            // if(n.data.role == \"xuText\" && n.data.order == node.data.order){\n            //     xuText = n;\n            // }\n            // if(n.data.role == \"centerText\" && n.data.order == node.data.order){\n            //     centerText = n;\n            // }\n\n        }\n        var dimTextData = JSON.parse(JSON.stringify(node.data))\n        delete dimTextData.key;\n        delete dimTextData.__gohashid;\n        if(curLine){\n            var lineData = JSON.parse(JSON.stringify(curLine.data))\n            delete lineData.key;\n            delete lineData.__gohashid;\n            lineData[\"order\"] = lineData[\"order\"]+1;\n            node.diagram.model.addNodeData(lineData)\n        }\n        // Object.assign(dimTextData, {\n\n        // })\n        dimTextData[\"dim\"+normDim] = node.data[\"dim\"+normDim]+1;\n        dimTextData.text = \"维度\" + dimTextData[\"dim\"+normDim]\n        node.diagram.model.addNodeData(dimTextData)\n        // node.diagram.model.removeNodeDataCollection(deleteNodes)\n        node.containingGroup.layout.isOngoing = true;\n        node.containingGroup.layout.isValidLayout = false;\n        this.diagram.commitTransaction(\"addDimTtext\");\n    }\n\n    switchCbianSize(){\n        console.log(\"switchCbianSizeswitchCbianSize\")\n        var node = this.diagram.selection.first();\n        if(!node) return;\n        if(node.data.cbianType == \"big\"){\n            node.__trtdNode.changeCbianSize(node,\"small\")\n        }else{\n            node.__trtdNode.changeCbianSize(node,\"big\")\n        }\n    }\n    bringToBackground(){\n        var node = this.diagram.selection.first();\n        var myDiagram = this.diagram;\n        myDiagram.model.startTransaction();\n        myDiagram.model.setDataProperty(node.data, \"layerName\", \"Background\");\n        myDiagram.model.setDataProperty(node.data, \"zOrder\", 1);\n        myDiagram.model.commitTransaction();\n    }\n    bringToForeground(){\n        var node = this.diagram.selection.first();\n        var myDiagram = this.diagram;\n        myDiagram.model.startTransaction();\n        myDiagram.model.setDataProperty(node.data, \"layerName\", \"Foreground\");\n        myDiagram.model.setDataProperty(node.data, \"zOrder\", 999);\n        myDiagram.model.commitTransaction();\n    }\n\n    bringdownLayer(){\n        var node = this.diagram.selection.first();\n        var myDiagram = this.diagram;\n        if(!node) return;\n        var layerName = node.layerName;\n        var toLayerName = layerName\n        var zOrder = node.zOrder;\n        var toZOrder = 1;\n        if(layerName == \"Foreground\"){\n            toLayerName = \"default\"\n        }\n        if(layerName == \"default\"){\n            toLayerName = \"Background\"\n        }\n        if(layerName == \"Background\"){\n            toLayerName = \"Background\"\n        }\n        myDiagram.model.startTransaction();\n        myDiagram.model.setDataProperty(node.data, \"layerName\", toLayerName);\n        myDiagram.model.setDataProperty(node.data, \"zOrder\", toZOrder);\n        myDiagram.model.commitTransaction();\n    }\n    bringupLayer(){\n        var node = this.diagram.selection.first();\n        var myDiagram = this.diagram;\n        if(!node) return;\n        var layerName = node.layerName;\n        var toLayerName = layerName\n        var zOrder = node.zOrder;\n        var toZOrder = 999;\n        if(layerName == \"Background\"){\n            toLayerName = \"default\"\n        }\n        if(layerName == \"default\"){\n            toLayerName = \"Foreground\"\n        }\n        if(layerName == \"Foreground\"){\n            toLayerName = \"Foreground\"\n        }\n        myDiagram.model.startTransaction();\n        myDiagram.model.setDataProperty(node.data, \"layerName\", toLayerName);\n        myDiagram.model.setDataProperty(node.data, \"zOrder\", toZOrder);\n        myDiagram.model.commitTransaction();\n    }\n\n    bringToLayer(layerName, zOrder) {\n\n            var node = myDiagram.selection.first();\n            myDiagram.model.startTransaction();\n            if (node) {\n                if (layerName == null) {\n                    layerName = node.data.layerName ? node.data.layerName : \"\";\n                    var tempData = myDiagram.model.copyNodeData(node.data);\n                    myDiagram.model.removeNodeData(node.data);\n                    myDiagram.model.addNodeData(tempData);\n\n                } else {\n                    myDiagram.model.setDataProperty(node.data, \"layerName\", layerName);\n                }\n            }\n            myDiagram.model.commitTransaction();\n        }\n\n    showRect(){\n        var node = this.diagram.selection.first()\n        console.log(\"show shape\")\n        if(!node) return;\n        if(node.data.category != \"yunGroup\") return;\n        node.diagram.startTransaction(\"showRect\")\n        node.diagram.model.setDataProperty(node.data, \"showShape\", true)\n        var it = node.findSubGraphParts().iterator;\n        while (it.next()) {\n            var n = it.value;\n            if(n.data.role == \"background\"){\n                node.diagram.model.setDataProperty(n.data, \"visible\", true)\n            }\n        }\n        node.layout.isValidLayout = false\n        node.diagram.commitTransaction(\"showRect\")\n    }\n    hideRect(){\n        var node = this.diagram.selection.first()\n        if(!node) return;\n        if(node.data.category != \"yunGroup\") return;\n        node.diagram.startTransaction(\"hideRect\")\n        node.diagram.model.setDataProperty(node.data, \"showShape\", false)\n        var it = node.findSubGraphParts().iterator;\n        while (it.next()) {\n            var n = it.value;\n            if(n.data.role == \"background\"){\n                node.diagram.model.setDataProperty(n.data, \"visible\", true)\n                node.diagram.model.setDataProperty(n.data, \"stroke\", \"rgba(255,0,0,0)\")\n            }\n        }\n        node.diagram.commitTransaction(\"hideRect\")\n    }\n    autoShowRedline(){\n        var node = this.diagram.selection.first()\n        if(!node) return;\n        if(node.data.category != \"yunGroup\") return;\n        node.diagram.startTransaction(\"beginSpark\")\n        node.diagram.model.setDataProperty(node.data, \"beginSpark\", \"line\")\n        node.diagram.commitTransaction(\"beginSpark\")\n    }\n    offShowRedLine(){\n        var node = this.diagram.selection.first()\n        if(!node) return;\n        if(node.data.category != \"yunGroup\") return;\n        node.diagram.startTransaction(\"offShowRedLine\")\n        node.diagram.model.setDataProperty(node.data, \"beginSpark\", undefined)\n        node.diagram.commitTransaction(\"offShowRedLine\")\n    }\n    //快捷键\n    dokeyDownFn (e) {\n        console.log('dspirallllllllllllllllllllllllll:');\n        var diagram = this.diagram\n        var that = this;\n        var myDiagram = this.diagram;\n        var e = myDiagram.lastInput;\n        var cmd = myDiagram.commandHandler;\n        if (e.event.altKey) {\n            if (e.key == \"Q\") {\n                autoLayoutAll();\n                return;\n            } else if (e.key == \"R\") {\n                centerNode();\n                return;\n            } else if (e.key == \"C\") {\n                centerCurrentNode();\n                return;\n            } else if (e.key == \"A\") {\n                zoomToFit();\n                return;\n            }\n        }\n        if (e.event.keyCode >= 65 && e.event.keyCode <= 90 && !e.event.altKey && !e.event.ctrlKey && !e.event.shiftKey) {\n            e.bubbles = false;\n            var node = myDiagram.selection.first()\n            if(!node) return;\n            if(node.data.category == \"wave\" && node.containingGroup && node.containingGroup.data.textAngle == \"horizontal\" && node.containingGroup.data.centerTextAngle == \"independent\"){\n                node.findObject(\"TEXT\").visible = true;\n                var centerText = node.diagram.findNodeForKey(node.data.centerText)\n                if(centerText){\n                  centerText.visible = false;\n                }\n            }\n            setTimeout(()=>{\n                if(this.textDoubleClick){\n                    return this.textDoubleClick(e, node)\n                }\n                this.selectText(e, diagram);\n            },100)\n            return true;\n    \n        }\n        // console.log('catched in dokeydown ' + e.event.keyCode);\n        // console.log('catched in dokeydown ' + e.key);\n        if (e.event.keyCode === 13) { // could also check for e.control or e.shift\n            console.log(\"dspiral add Follower\")\n            var node = myDiagram.selection.first();\n            if (node && node.category == \"wave\") {\n                // this.addFollower(e, true);\n                this.addOlive()\n            }\n        } else if (e.event.keyCode === 9) { // could also check for e.control or e.shift\n            this.addFollower(true);\n        } else if (e.key === \"t\") { // could also check for e.control or e.shift\n            if (cmd.canCollapseSubGraph()) {\n                cmd.collapseSubGraph();\n            } else if (cmd.canExpandSubGraph()) {\n                cmd.expandSubGraph();\n            }\n        } else if (e.key == \"Del\") {\n            e.diagram.commandHandler.deleteSelection();\n        } else if (e.event.keyCode == 113) { //F2,不知道为什么失效了，重新赋予功能\n            // selectText();\n            this.selectText(e, diagram);\n        } else if (e.event.keyCode == 37) { //左\n            this.moveWithinNodes('left', diagram);\n            // go.CommandHandler.prototype.doKeyDown.call(cmd);\n        } else if (e.event.keyCode == 38) { //上\n            this.moveWithinNodes('up', diagram);\n            // go.CommandHandler.prototype.doKeyDown.call(cmd);\n        } else if (e.event.keyCode == 39) { //右\n            this.moveWithinNodes('right', diagram);\n            // go.CommandHandler.prototype.doKeyDown.call(cmd);\n        } else if (e.event.keyCode == 40) { //下\n            this.moveWithinNodes('down', diagram);\n            // go.CommandHandler.prototype.doKeyDown.call(cmd);\n        } else {\n            // call base method with no arguments\n            go.CommandHandler.prototype.doKeyDown.call(cmd);\n        }\n        e.bubbles = false; //阻止事件冒泡到dom\n    }\n\n    findPrevOlive(node){\n        if(node.data.order <= 1){\n            return null;\n        }\n        var prenode = null;\n        var it = node.containingGroup.findSubGraphParts().iterator;\n        while (it.next()) {\n            var n = it.value;\n            if(n.data.category == \"wave\"){\n                if(n.data.order == node.data.order-1){\n                    prenode = n;\n                    break;\n                }\n            }\n        }\n        return prenode;\n    }\n    findNextOlive(node){\n        var nextnode = null;\n        var it = node.containingGroup.findSubGraphParts().iterator;\n        while (it.next()) {\n            var n = it.value;\n            if(n.data.role == \"waveTail\"){\n                continue;\n            }\n            if(node.data.category == \"autoText\"){\n                if(n.data.role == \"shiText\"){\n                    if(n.data.order == node.data.order+1){\n                        nextnode = n;\n                        break;\n                    }\n                }\n            }else{\n                if(n.data.category == \"wave\"){\n                    if(n.data.order == node.data.order+1){\n                        nextnode = n;\n                        break;\n                    }\n                }\n            }\n\n        }\n        return nextnode;\n    }\n\n    findUpOlive(node){\n        var upnode = null;\n        if(node.data.category == \"wave\"){\n            if(node.data.order % 2 != 0){\n                upnode = this.diagram.findNodeForKey(node.data.xuText)\n            }else{\n                upnode = this.diagram.findNodeForKey(node.data.shiText)\n            }\n        }\n        if(node.data.role == \"xuText\"){\n            if(node.data.order % 2 != 0){\n                // upnode = this.diagram.findNodeForKey(node.data.xuText)\n            }else{\n                upnode = this.diagram.findNodeForKey(node.data.olive)\n            }\n        }\n        if(node.data.role == \"shiText\"){\n            if(node.data.order % 2 != 0){\n                upnode = this.diagram.findNodeForKey(node.data.olive)\n            }else{\n                // upnode = this.diagram.findNodeForKey(node.data.olive)\n            }\n        }\n        return upnode;        \n    }\n\n    findDownOlive(node){\n        var downnode = null;\n        if(node.data.category == \"wave\"){\n            if(node.data.order % 2 != 0){\n                downnode = this.diagram.findNodeForKey(node.data.shiText)\n            }else{\n                downnode = this.diagram.findNodeForKey(node.data.xuText)\n            }\n        }\n        if(node.data.role == \"xuText\"){\n            if(node.data.order % 2 != 0){\n                downnode = this.diagram.findNodeForKey(node.data.olive)\n            }else{\n                // downnode = this.diagram.findNodeForKey(node.data.olive)\n            }\n        }\n        if(node.data.role == \"shiText\"){\n            if(node.data.order % 2 != 0){\n                // downnode = this.diagram.findNodeForKey(node.data.olive)\n            }else{\n                downnode = this.diagram.findNodeForKey(node.data.olive)\n            }\n        }\n        return downnode;\n    }\n\n    moveWithinNodes(direction) {\n        var myDiagram = this.diagram;\n        var node = myDiagram.selection.first();\n        if(!node){\n            return;\n        }\n        // 火花矩阵文字\n        if(node.data.category == \"autoText\" && node.data.subRole == \"coreText\"){\n            if(!(node.containingGroup && node.containingGroup.data.category == \"yunGroup\")){\n                return;\n            }\n            var nextNode;\n            var centerOrderX = 30000\n            var centerOrderY = 30000\n            if(node.containingGroup.__yunPointsX && node.containingGroup.__yunPointsY){\n                centerOrderX = (node.containingGroup.__yunPointsX.length+1)/2\n                centerOrderY = (node.containingGroup.__yunPointsY.length+1)/2\n\n            }\n            switch (direction) {\n                case 'left':\n                    if(node.data.orderX == centerOrderX){\n                        return;\n                    } \n                    var it = node.containingGroup.findSubGraphParts().iterator;\n                    while (it.next()) {\n                        var n = it.value;\n                        if(n.data.subRole == \"coreText\" && n.data.dimKey == node.data.dimKey){\n                            if(Number(n.data.orderX) == Number(node.data.orderX)-1){\n                                nextNode = n;\n                                break;\n                            }\n                        }\n                    }\n                    break;\n                case 'up':\n                    if(node.data.orderY == centerOrderY){\n                        return;\n                    } \n                    var it = node.containingGroup.findSubGraphParts().iterator;\n                    while (it.next()) {\n                        var n = it.value;\n                        if(n.data.subRole == \"coreText\" && n.data.dimKey == node.data.dimKey){\n                            if(Number(n.data.orderY) == Number(node.data.orderY)+1){\n                                nextNode = n;\n                                break;\n                            }\n                        }\n                    }\n                    break;\n                case 'right':\n                    if(node.data.orderX == centerOrderX){\n                        return;\n                    } \n                    var it = node.containingGroup.findSubGraphParts().iterator;\n                    while (it.next()) {\n                        var n = it.value;\n                        if(n.data.subRole == \"coreText\" && n.data.dimKey == node.data.dimKey){\n                            if(Number(n.data.orderX) == Number(node.data.orderX)+1){\n                                nextNode = n;\n                                break;\n                            }\n                        }\n                    }\n                    break;\n                case 'down':\n                    if(node.data.orderY == centerOrderY){\n                        return;\n                    } \n                    var it = node.containingGroup.findSubGraphParts().iterator;\n                    while (it.next()) {\n                        var n = it.value;\n                        if(n.data.subRole == \"coreText\" && n.data.dimKey == node.data.dimKey){\n                            if(Number(n.data.orderY) == Number(node.data.orderY)-1){\n                                nextNode = n;\n                                break;\n                            }\n                        }\n                    }\n                    break;\n            }\n            if (nextNode) {\n                myDiagram.select(nextNode);\n            }\n        }\n\n        if(node.data.category == \"wave\" || node.data.role == \"shiText\" || node.data.role == \"xuText\"){\n            switch (direction) {\n                case 'left':\n                    var prevNode = this.findPrevOlive(node)\n                    if (prevNode) {\n                        myDiagram.select(prevNode);\n                    }\n                    break;\n                case 'up':\n                    var upNode = this.findUpOlive(node)\n                    if (upNode) {\n                        myDiagram.select(upNode);\n                    }\n                    break;\n                case 'right':\n                    var nextNode = this.findNextOlive(node)\n                    if (nextNode) {\n                        myDiagram.select(nextNode);\n                    }\n                    break;\n                case 'down':\n                    var downNode = this.findDownOlive(node)\n                    if (downNode) {\n                        myDiagram.select(downNode);\n                    }\n                    break;\n            }\n        }\n    }\n    // 拓扑分析\n    drillAnalyze(){\n        console.log(\"拓扑分析\")\n        var node = this.diagram.selection.first();\n        if(!node) return;\n        // 如果当前节点包含有figure属性\n        if(node.data.figure != null){\n            if(this.openFigure){\n                this.openFigure({\n                    figure: node.data.figure,\n                    title: node.data.text,\n                    key: node.data.key,\n                    node: node\n                })\n            }\n        }else{\n            if(this.createFigure){\n                var figure = this.createFigure({\n                    title: node.data.text||\"未命名拓扑\",\n                    key: node.data.key,\n                    node: node\n                })\n                // if(figure){\n                //     node.data.figure = figure;\n                // }\n            }\n        }\n\n    }\n}\n\n// export default Trtd;\nmodule.exports = Trtd;\n\n\n// WEBPACK FOOTER //\n// ./src/diagram/dspiral.js","var $ = go.GraphObject.make\r\nvar svg = require('../datas/svg.template');\r\n\r\n// 返回svg节点\r\nmodule.exports = function createArcNodeTemplate (diagram) {\r\n    var properties = {\r\n        figure: \"Circle\",\r\n        fill: \"white\",\r\n        strokeWidth: 2,\r\n        stroke: \"black\",\r\n        fontSize: 15,\r\n        font: \"sans-serif\"\r\n    };\r\n    return $(go.Node, \"Spot\",{\r\n                name: \"NODE\",\r\n                \"_controlExpand\": true,\r\n                layerName: \"Background\",\r\n                locationSpot: go.Spot.Center,\r\n                resizeCellSize: new go.Size(10, 10),\r\n                locationObjectName: \"SHAPE\",\r\n                resizable: true,\r\n                resizeObjectName: \"SHAPE\", // user can resize the Shape\r\n                rotatable: true,\r\n                rotateObjectName: \"SHAPE\", // rotate the Shape without rotating the label\r\n                click: function(e, node){\r\n                    // console.log(node.data);\r\n                },\r\n                doubleClick: function (e, node) {\r\n                    doubleClickCreateNodeType(e);\r\n                },\r\n                selectable: true,\r\n                selectionObjectName:\"SHAPE\",\r\n                movable: true,\r\n                angle: 0,\r\n                //toMaxLinks: 1,\r\n                layoutConditions: go.Part.LayoutStandard,\r\n                //layoutConditions:~go.Part.LayoutAdded,\r\n                // fromLinkable: true, toLinkable: true,\r\n                alignment: go.Spot.Center,\r\n                alignmentFocus: go.Spot.Center,\r\n                resizeAdornmentTemplate: diagram.__trtd.nodeResizeAdornmentTemplate(),\r\n                // rotateAdornmentTemplate: nodeRotateAdornmentTemplate,\r\n                contextMenu: $(go.Adornment),\r\n                // contextMenu: $(go.Adornment),\r\n            },\r\n            new go.Binding(\"location\", \"loc\", go.Point.parse).makeTwoWay(go.Point.stringify),\r\n            $(go.Shape, {\r\n                name: \"SHAPE\",\r\n                // geometryString: \"M 0,0 a50,50 0 1,1 100,0\",\r\n                // geometryString: \"M 0 50 L 100 100 L 100 200\",\r\n                fill: \"white\",\r\n                strokeWidth: 3, \r\n                stroke: \"black\",\r\n                minSize: new go.Size(50, 50),\r\n                },\r\n                new go.Binding(\"fill\", \"fill\").makeTwoWay(function(v){\r\n                    return v;\r\n                }),\r\n                new go.Binding(\"stroke\", \"stroke\").makeTwoWay(function(v){\r\n                    return v;\r\n                }),\r\n                new go.Binding(\"strokeWidth\", \"strokeWidth\").makeTwoWay(function(v){\r\n                    return v;\r\n                }),\r\n                new go.Binding(\"desiredSize\", \"desiredSize\", function(v) {\r\n                    // var va = (v / 2) * Math.sqrt(2);\r\n                    // console.log(\"desiredSize\",v)\r\n                    return v\r\n                }).ofObject(\"BACKGROUND\"),\r\n                new go.Binding(\"angle\", \"angle\", function(v) {\r\n                    // var va = (v / 2) * Math.sqrt(2);\r\n                    // console.log(\"desiredSize\",v)\r\n                    return v\r\n                }).ofObject(\"BACKGROUND\"),\r\n                new go.Binding(\"geometryString\", \"geometryString\", function(v) {\r\n                    return v;\r\n                }),\r\n            ),\r\n            $(go.Shape, \"Rectangle\",{\r\n                name: 'BACKGROUND',\r\n                fill: \"rgba(1,1,1,0)\",\r\n                // width: 450,\r\n                // height: 450,\r\n                angle: 0,\r\n                stroke: \"rgba(1,1,1,0)\",\r\n                // minSize: new go.Size(50, 50),\r\n                },\r\n                new go.Binding(\"desiredSize\", \"desiredSize\", function(v, d) {\r\n                    // console.log(\"vd m\", v, d )\r\n                    if(!v) return d.part.findObject(\"SHAPE\").measuredBounds.size;\r\n                    return go.Size.parse(v)\r\n                }).makeTwoWay(function(v) {\r\n                    return go.Size.stringify(v)\r\n                }),\r\n                // new go.Binding(\"angle\", \"angle\").makeTwoWay(function(v){\r\n                //     return v;\r\n                // }),\r\n                // new go.Binding(\"desiredSize\", \"height\", function(v) {\r\n                //     var radius = parseInt(v ? v : 100);\r\n                //     var size = new go.Size(radius, radius);\r\n                //     return size;\r\n                // }).makeTwoWay(function(v) {\r\n                //     return v.height;\r\n                // }),\r\n                // background: \"#555\",\r\n                // stroke: \"red\"}\r\n            ),\r\n    );\r\n}\r\n\r\nfunction doubleClickCreateNodeType(e){\r\n    // console.log('eeeeeeeeeeeeeee:', e);\r\n    var myDiagram = e.diagram;\r\n    myDiagram.startTransaction();\r\n    var text = { text: \"双击编辑文本\", category: 'text' };\r\n    text.loc = go.Point.stringify(myDiagram.lastInput.documentPoint);\r\n    myDiagram.model.addNodeData(text);\r\n    myDiagram.commitTransaction()\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/nodeTemplate/createArcNodeTemplate.js","var $ = go.GraphObject.make\r\nvar svg = require('../datas/svg.template');\r\n\r\n// 返回svg节点\r\nmodule.exports = function createArcNodeTemplate (diagram) {\r\n    var properties = {\r\n        figure: \"Circle\",\r\n        fill: \"white\",\r\n        strokeWidth: 2,\r\n        stroke: \"black\",\r\n        fontSize: 15,\r\n        font: \"sans-serif\"\r\n    };\r\n    return $(go.Node, \"Spot\",{\r\n                name: \"NODE\",\r\n                zOrder: 10,\r\n                layerName: \"default\",\r\n                // isLayoutPositioned: false,\r\n                // defaultStretch: go.GraphObject.Horizontal,\r\n                padding: 0,\r\n                \"_controlExpand\": true,\r\n                // layerName: \"Foreground\",\r\n                locationSpot: go.Spot.LeftCenter,\r\n                resizeCellSize: new go.Size(1, 1),\r\n                locationObjectName: \"SHAPE\",\r\n                resizable: true,\r\n                resizeObjectName: \"SHAPE\", // user can resize the Shape\r\n                rotatable: true,\r\n                mouseDragEnter: function(e, obj) {\r\n                    console.log(\"mouseDragEnter line\")\r\n                },\r\n                mouseDrop: function(e, obj) {\r\n                    var node = obj.part;\r\n                    console.log(\"mouseDropmouseDropmouseDropmouseDrop line\")\r\n                },\r\n                // rotateObjectName: \"SHAPE\", // rotate the Shape without rotating the label\r\n                click: (e, node)=>{\r\n                    console.log(node.data)\r\n                },\r\n                deletable: false,\r\n                doubleClick: function (e, node) {\r\n                    // doubleClickCreateNodeType(e);\r\n                    if(!node.selectable){\r\n                        var part = e.diagram.findObjectAt(e.documentPoint,\r\n                          // Navigation function\r\n                            function(x) { return x.part; },\r\n                            // Because of the navigation function, x will always be a Part.\r\n                            function(x) { return x.canSelect() && x.data.category==\"wave\"; }\r\n                        )\r\n                        if(part){\r\n                            e.diagram.select(part)\r\n                            part.doubleClick(e, part)\r\n                        }\r\n                        // var it = parts.iterator;\r\n                        // while (it.next()) {\r\n                        //   console.log(\"#\" + it.key + \" is \" + it.value);\r\n                        // }\r\n                        \r\n                        console.log(\"partpart...........\",part)\r\n                    }\r\n                },\r\n                selectable: true,\r\n                selectionObjectName:\"SHAPE\",\r\n                movable: true,\r\n                angle: 0,\r\n                //toMaxLinks: 1,\r\n                layoutConditions: go.Part.LayoutStandard,\r\n                //layoutConditions:~go.Part.LayoutAdded,\r\n                // fromLinkable: true, toLinkable: true,\r\n                alignment: go.Spot.Center,\r\n                alignmentFocus: go.Spot.Center,\r\n                resizeAdornmentTemplate: diagram.__trtd.nodeResizeAdornmentTemplate(),\r\n                // rotateAdornmentTemplate: nodeRotateAdornmentTemplate,\r\n                contextMenu: $(go.Adornment),\r\n                // contextMenu: $(go.Adornment),\r\n            },\r\n            new go.Binding(\"zOrder\", \"zOrder\").makeTwoWay(),\r\n            new go.Binding(\"selectable\", \"selectable\").makeTwoWay(),\r\n            new go.Binding(\"locationSpot\", \"locationSpot\", function(v){\r\n                return go.Spot.parse(v)\r\n            }).makeTwoWay(function(v){\r\n                return go.Spot.stringify(v)\r\n            }),\r\n            new go.Binding(\"movable\", \"movable\").makeTwoWay(),\r\n            new go.Binding(\"visible\", \"visible\").makeTwoWay(),\r\n            new go.Binding(\"deletable\", \"deletable\").makeTwoWay(),\r\n            new go.Binding(\"location\", \"loc\", go.Point.parse).makeTwoWay(go.Point.stringify),\r\n            new go.Binding(\"angle\", \"angle\").makeTwoWay(function(v,m,a){\r\n                // console.log(\"wwwwwwwwwwwwwwwww:\",v,\" m:\",m.angle,\" a:\",a)\r\n                return v\r\n                a.startTransaction()\r\n                var group = a.findNodeDataForKey(m.group)\r\n                // a.setDataProperty(group, \"angle\", v)\r\n                for(var i=0;i<a.nodeDataArray.length-1;i++){\r\n                    if(a.nodeDataArray[i].group == group.key && a.nodeDataArray[i].category!=\"line\"){\r\n                        var nodeData = a.nodeDataArray[i]\r\n                        var lineLoc = go.Point.parse(m.loc)\r\n                        var nodeLoc = go.Point.parse(nodeData.loc)\r\n                        console.log('111111111')\r\n                        // distanceSquaredPoint\r\n                        var cp = lineLoc,_rotatePoint = lineLoc // 旋转中心\r\n                        \r\n                        var relativeLocation = nodeLoc.copy().subtract(lineLoc) // 原来的相对位置\r\n                        var newangle = v;\r\n                        var originalAngle = m.angle||0\r\n                        var ang = newangle - originalAngle;  // 直线旋转的角度\r\n                        // var cp = _rotatePoint; \r\n                        var angle = (nodeData.angle||0) + ang; // 橄榄旋转的角度\r\n                        var loc = cp.copy().add(relativeLocation);\r\n                        var dir = cp.directionPoint(loc);\r\n                        var newrad = (ang + dir) * (Math.PI / 180);\r\n                        var centerLocationOffset = lineLoc.copy().subtract(nodeLoc);\r\n                        // var locoffset = centerLocationOffset.copy();\r\n                        // locoffset.rotate(ang);\r\n                        var dist = Math.sqrt(cp.distanceSquaredPoint(loc));\r\n                        var offset = new go.Point(0,0).subtract(cp.copy())\r\n                        var cpOrigin = new go.Point(0,0)\r\n                        var nodeOrigin = nodeLoc.copy().offset(offset.x, offset.y)\r\n                        var newNodeOrigin = nodeOrigin.rotate(ang)\r\n                        var newNodeLoc = newNodeOrigin.copy().offset(-offset.x, -offset.y)\r\n                        console.log(\"newNodeLoc\", newNodeLoc)\r\n                        // var location = new go.Point(cp.x + dist * Math.cos(newrad),\r\n                        //     cp.y + dist * Math.sin(newrad)).subtract(locoffset); \r\n                        a.setDataProperty(nodeData, \"loc\", go.Point.stringify(newNodeLoc))                                   \r\n                        a.setDataProperty(nodeData, \"angle\", v)\r\n                    }\r\n                }\r\n                // var group = a.findNodeDataForKey(m.group)\r\n                a.setDataProperty(group, \"angle\", v)\r\n                a.commitTransaction()\r\n                return v;\r\n            }),\r\n\r\n                $(go.Shape, 'LineH', {\r\n                    name: \"SHAPE\",\r\n                    alignment: go.Spot.Left,alignmentFocus: go.Spot.Left,\r\n                    stretch: go.GraphObject.Horizontal,\r\n                    strokeCap: \"round\",\r\n                    // geometryString: \"M 0,0 a50,50 0 1,1 100,0\",\r\n                    // geometryString: \"M 0 50 L 100 100 L 100 200\",\r\n                    // margin: 10,\r\n                    strokeDashArray: [0, 0],\r\n                    width: 300,\r\n                    height:20,\r\n                    margin:0,\r\n                    fill: \"white\",\r\n                    strokeWidth: 3, \r\n                    stroke: \"black\",\r\n                    minSize: new go.Size(NaN, 10),\r\n                    maxSize: new go.Size(NaN, 20)\r\n                    },\r\n                    // $(go.TextBlock, \"alignment: Left\", { row: 0, column: 0 }),\r\n                    new go.Binding(\"fill\", \"fill\").makeTwoWay(function(v){\r\n                        return v;\r\n                    }),\r\n                    new go.Binding(\"stroke\", \"stroke\").makeTwoWay(function(v){\r\n                        return v;\r\n                    }),\r\n                    new go.Binding(\"strokeDashArray\", \"strokeDashArray\", function(v){\r\n                        return JSON.parse(v)\r\n                    }).makeTwoWay(function(v){\r\n                        return  JSON.stringify(v);\r\n                    }),\r\n                    new go.Binding(\"strokeWidth\", \"strokeWidth\").makeTwoWay(function(v){\r\n                        return v;\r\n                    }),\r\n                    // new go.Binding(\"width\", \"width\").makeTwoWay(),\r\n                    // new go.Binding(\"height\", \"height\").makeTwoWay(),\r\n                    new go.Binding(\"desiredSize\", \"desiredSize\", function(v, d) {\r\n                        // console.log(\"vd m\", v, d )\r\n                        if(!v) return d.part.findObject(\"SHAPE\").measuredBounds.size;\r\n                        return go.Size.parse(v)\r\n                    }).makeTwoWay(function(v) {\r\n                        return go.Size.stringify(v)\r\n                    }),\r\n\r\n                    // new go.Binding(\"geometryString\", \"geometryString\", function(v) {\r\n                    //     return v;\r\n                    // }),\r\n                ),\r\n                $(go.Shape, {\r\n                    name: \"BeginArrow\",\r\n                    visible: false,\r\n                    margin:0,\r\n                    alignment: new go.Spot(0,0.5,10,0),\r\n                     alignmentFocus: go.Spot.Right,\r\n                    geometryString: \"M 0,-4 l -8,4 8,4\",\r\n                    strokeCap: \"round\",\r\n                    // geometryString: \"M 0 50 L 100 100 L 100 200\",\r\n                    fill: \"black\",\r\n                    width:10,\r\n                    height:15,\r\n\r\n                    strokeWidth: 3, \r\n                    stroke: \"black\",\r\n                    // minSize: new go.Size(50, 50),\r\n                    },\r\n                    new go.Binding(\"fill\", \"stroke\",function(v){\r\n                        return v;\r\n                    }),\r\n                    new go.Binding(\"stroke\", \"stroke\").makeTwoWay(function(v){\r\n                        return v;\r\n                    }),\r\n                    new go.Binding(\"strokeWidth\", \"strokeWidth\").makeTwoWay(function(v){\r\n                        return v;\r\n                    }),\r\n                    new go.Binding(\"visible\", \"showBeginArrow\"),\r\n                    // new go.Binding(\"angle\", \"angle\", function(v) {\r\n                    //     // var va = (v / 2) * Math.sqrt(2);\r\n                    //     // console.log(\"desiredSize\",v)\r\n                    //     return v\r\n                    // }).ofObject(\"SHAPE\"),\r\n                    // new go.Binding(\"desiredSize\", \"desiredSize\", function(v) {\r\n                    //     // var va = (v / 2) * Math.sqrt(2);\r\n                    //     // console.log(\"desiredSize\",v)\r\n                    //     return v\r\n                    // }).ofObject(\"BACKGROUND\"),\r\n                    // new go.Binding(\"angle\", \"angle\", function(v) {\r\n                    //     // var va = (v / 2) * Math.sqrt(2);\r\n                    //     // console.log(\"desiredSize\",v)\r\n                    //     return v\r\n                    // }).ofObject(\"BACKGROUND\"),\r\n                    // new go.Binding(\"geometryString\", \"geometryStringArrow\", function(v) {\r\n                    //     return v;\r\n                    // }),\r\n                ),\r\n                $(go.Shape, {\r\n                    name: \"EndArrow\",\r\n                    visible: false,\r\n                    margin:0,\r\n                    alignment: new go.Spot(1,0.5,0,0),\r\n                     alignmentFocus: go.Spot.Right,\r\n                    geometryString: \"M 0,-4 l 8,4 -8,4\",\r\n                    strokeCap: \"round\",\r\n                    // geometryString: \"M 0 50 L 100 100 L 100 200\",\r\n                    fill: \"black\",\r\n                    width:10,\r\n                    height:15,\r\n\r\n                    strokeWidth: 3, \r\n                    stroke: \"black\",\r\n                    // minSize: new go.Size(50, 50),\r\n                    },\r\n                    new go.Binding(\"fill\", \"stroke\",function(v){\r\n                        return v;\r\n                    }),\r\n                    new go.Binding(\"stroke\", \"stroke\").makeTwoWay(function(v){\r\n                        return v;\r\n                    }),\r\n                    new go.Binding(\"strokeWidth\", \"strokeWidth\").makeTwoWay(function(v){\r\n                        return v;\r\n                    }),\r\n                    new go.Binding(\"visible\", \"showEndArrow\"),\r\n                    // new go.Binding(\"angle\", \"angle\", function(v) {\r\n                    //     // var va = (v / 2) * Math.sqrt(2);\r\n                    //     // console.log(\"desiredSize\",v)\r\n                    //     return v\r\n                    // }).ofObject(\"SHAPE\"),\r\n                    // new go.Binding(\"desiredSize\", \"desiredSize\", function(v) {\r\n                    //     // var va = (v / 2) * Math.sqrt(2);\r\n                    //     // console.log(\"desiredSize\",v)\r\n                    //     return v\r\n                    // }).ofObject(\"BACKGROUND\"),\r\n                    // new go.Binding(\"angle\", \"angle\", function(v) {\r\n                    //     // var va = (v / 2) * Math.sqrt(2);\r\n                    //     // console.log(\"desiredSize\",v)\r\n                    //     return v\r\n                    // }).ofObject(\"BACKGROUND\"),\r\n                    // new go.Binding(\"geometryString\", \"geometryStringArrow\", function(v) {\r\n                    //     return v;\r\n                    // }),\r\n                ),\r\n                $(go.Shape, {\r\n                    name: \"Arrow\",\r\n                    visible: true,\r\n                    margin:0,\r\n                    alignment: new go.Spot(1,0.5,5,0),\r\n                     alignmentFocus: go.Spot.Right,\r\n                    geometryString: \"F M 158,-4 l 8,4 -8,4 2,-4 z\",\r\n                    strokeCap: \"round\",\r\n                    // geometryString: \"M 0 50 L 100 100 L 100 200\",\r\n                    fill: \"black\",\r\n                    width:20,\r\n                    height:15,\r\n\r\n                    strokeWidth: 3, \r\n                    stroke: \"black\",\r\n                    // minSize: new go.Size(50, 50),\r\n                    },\r\n                    new go.Binding(\"fill\", \"stroke\",function(v){\r\n                        return v;\r\n                    }),\r\n                    new go.Binding(\"stroke\", \"stroke\").makeTwoWay(function(v){\r\n                        return v;\r\n                    }),\r\n                    new go.Binding(\"strokeWidth\", \"strokeWidth\").makeTwoWay(function(v){\r\n                        return v;\r\n                    }),\r\n                    new go.Binding(\"visible\", \"showArrow\"),\r\n                    // new go.Binding(\"angle\", \"angle\", function(v) {\r\n                    //     // var va = (v / 2) * Math.sqrt(2);\r\n                    //     // console.log(\"desiredSize\",v)\r\n                    //     return v\r\n                    // }).ofObject(\"SHAPE\"),\r\n                    // new go.Binding(\"desiredSize\", \"desiredSize\", function(v) {\r\n                    //     // var va = (v / 2) * Math.sqrt(2);\r\n                    //     // console.log(\"desiredSize\",v)\r\n                    //     return v\r\n                    // }).ofObject(\"BACKGROUND\"),\r\n                    // new go.Binding(\"angle\", \"angle\", function(v) {\r\n                    //     // var va = (v / 2) * Math.sqrt(2);\r\n                    //     // console.log(\"desiredSize\",v)\r\n                    //     return v\r\n                    // }).ofObject(\"BACKGROUND\"),\r\n                    // new go.Binding(\"geometryString\", \"geometryStringArrow\", function(v) {\r\n                    //     return v;\r\n                    // }),\r\n                )\r\n    )\r\n\r\n}\r\n\r\nfunction doubleClickCreateNodeType(e){\r\n    // console.log('eeeeeeeeeeeeeee:', e);\r\n    var myDiagram = e.diagram;\r\n    myDiagram.startTransaction();\r\n    var text = { text: \"双击编辑文本\", category: 'text' };\r\n    text.loc = go.Point.stringify(myDiagram.lastInput.documentPoint);\r\n    myDiagram.model.addNodeData(text);\r\n    myDiagram.commitTransaction()\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/nodeTemplate/createLineNodeTemplate.js","var $ = go.GraphObject.make\r\nvar svg = require('../datas/svg.template');\r\n\r\n\r\nfunction makeWave(tx, ty, curviness, repeat) {\r\n    // if (curviness === 0) {\r\n    //   var geo = new go.Geometry(go.Geometry.Line);\r\n    //   geo.startX = 0;\r\n    //   geo.startY = 0;\r\n    //   geo.endX = tx;\r\n    //   geo.endY = ty;\r\n    //   return geo;\r\n    // }\r\n    if(tx == null) tx = 300;\r\n    if(ty == null) ty = 400;\r\n    if(!repeat) repeat = 1\r\n    var ang = go.Point.direction(0, 0, tx, ty);\r\n    var rad = (ang / 180 * Math.PI) + Math.PI/2;\r\n    var offx = curviness * Math.cos(rad);\r\n    var offy = curviness * Math.sin(rad);\r\n    var geo = new go.Geometry();\r\n    var sx = tx/repeat; var sy = ty/repeat;\r\n    var x = 0; var y = 0;\r\n    var fig = new go.PathFigure(x, y, false);\r\n    for (var i = 0; i < repeat; i++) {\r\n      var odd = (i % 2 === 1);\r\n      fig.add(new go.PathSegment(go.PathSegment.Bezier,\r\n                                  x + sx, y + sy,\r\n                                  x + offx * (odd ? -1 : 1), y + offy * (odd ? -1 : 1),\r\n                                  x + sx + offx * (odd ? -1 : 1), y + sy + offy * (odd ? -1 : 1)));\r\n      x += sx;\r\n      y += sy;\r\n    }\r\n    geo.add(fig);\r\n    return geo;\r\n  }\r\n\r\n  function computeGeo1(data, shape, curviness) {\r\n    // var curviness = 30;\r\n    if(!curviness) curviness = 30;\r\n    // if (shape.stroke === \"red\") curviness = -30;\r\n    // else if (shape.stroke === \"green\") curviness = 0;\r\n    var geo = makeWave(data.x, data.y, curviness, data.repeat);\r\n    var offset = geo.normalize();\r\n    shape.position = new go.Point(-offset.x, -offset.y);\r\n    shape.isGeometryPositioned = true;\r\n    return geo;\r\n  }\r\n\r\n  function computeGeo(data, shape){\r\n    return go.Geometry.parse(\"M 0,80 A100,80 0 1 1 200,80\")\r\n  }\r\n  function computeGeo2(data, shape){\r\n    var geo =  go.Geometry.parse(\"M 0,80 A100,80 0 1 0 200,80\")\r\n    shape.isGeometryPositioned = true\r\n    shape.position = new go.Point(-100, -100)\r\n\r\n    return geo;\r\n  }\r\n\r\n// 返回svg节点\r\nmodule.exports = function createWaveNodeTemplate (diagram) {\r\n    var properties = {\r\n        figure: \"Circle\",\r\n        fill: \"white\",\r\n        strokeWidth: 2,\r\n        stroke: \"black\",\r\n        fontSize: 15,\r\n        font: \"sans-serif\"\r\n    };\r\n    // console.log(\"createWaveNodeTemplatecreateWaveNodeTemplatecreateWaveNodeTemplate\")\r\n    // return $(go.Node,\r\n    //     {\r\n    //         click:()=>{\r\n    //             console.log(\"createWaveNodeTemplate click\")\r\n    //         }            \r\n    //     },\r\n    //     $(go.Shape, { stroke: \"green\" },\r\n    //       new go.Binding(\"geometry\", \"\", computeGeo)),\r\n    //     $(go.Shape, { stroke: \"blue\" },\r\n    //       new go.Binding(\"geometry\", \"\", computeGeo)),\r\n    //     $(go.Shape, { stroke: \"red\", strokeDashArray: [10, 10] },\r\n    //       new go.Binding(\"geometry\", \"\", computeGeo))\r\n    //   );\r\n\r\n    return $(go.Node, \"Spot\",{\r\n                name: \"NODE\",\r\n                \"_controlExpand\": true,\r\n                layerName: \"Background\",\r\n                locationSpot: go.Spot.Center,\r\n                // resizeCellSize: new go.Size(10, 10),\r\n                locationObjectName: \"BACKGROUND\",\r\n                resizable: true,\r\n                resizeObjectName: \"BACKGROUND\", // user can resize the Shape\r\n                rotatable: true,\r\n                rotateObjectName: \"BACKGROUND\", // rotate the Shape without rotating the label\r\n                click: function(e, node){\r\n                    // console.log(node.data);\r\n                },\r\n                doubleClick: function (e, node) {\r\n                    doubleClickCreateNodeType(e);\r\n                },\r\n                selectable: true,\r\n                // selectionObjectName:\"SHAPE\",\r\n                movable: true,\r\n                // width: 200, height: 200,\r\n                angle: 0,\r\n                //toMaxLinks: 1,\r\n                layoutConditions: go.Part.LayoutStandard & go.Part.LayoutNodeSized & go.Part.LayoutAdded & go.Part.LayoutNodeSized,\r\n                //layoutConditions:~go.Part.LayoutAdded,\r\n                // fromLinkable: true, toLinkable: true,\r\n                alignment: go.Spot.Center,\r\n                alignmentFocus: go.Spot.Center,\r\n                resizeAdornmentTemplate: diagram.__trtd.nodeResizeAdornmentTemplate(),\r\n                // rotateAdornmentTemplate: nodeRotateAdornmentTemplate,\r\n                contextMenu: $(go.Adornment),\r\n                // contextMenu: $(go.Adornment),\r\n            },\r\n            new go.Binding(\"location\", \"loc\", go.Point.parse).makeTwoWay(go.Point.stringify),\r\n            $(go.Shape, \"Rectangle\",{\r\n                name: 'BACKGROUND',\r\n                fill: \"rgba(1,1,1,0)\",\r\n                // width: 450,\r\n                // height: 450,\r\n                angle: 0,\r\n                stroke: \"rgba(1,1,1,1)\",\r\n                \r\n                // minSize: new go.Size(50, 50),\r\n                },\r\n                new go.Binding(\"desiredSize\", \"desiredSize\", function(v, d) {\r\n                    // console.log(\"vd m\", v, d )\r\n                    // if(!v) return d.part.findObject(\"SHAPE\").measuredBounds.size;\r\n                    return go.Size.parse(v)\r\n                }).makeTwoWay(function(v) {\r\n                    return go.Size.stringify(v)\r\n                }),\r\n            ),\r\n            // $(go.Shape, { stroke: \"green\" },\r\n            //     new go.Binding(\"geometry\", \"\", computeGeo),\r\n            //     new go.Binding(\"stroke\", \"stroke\").makeTwoWay(function(v){\r\n            //         return v;\r\n            //     }),\r\n            //     new go.Binding(\"strokeWidth\", \"strokeWidth\").makeTwoWay(function(v){\r\n            //         return v;\r\n            //     }),\r\n            // ),M 0 0 A80,60 0 1 0 160,0\r\n            // $(go.Panel, \"Vertical\",{\r\n            //     alignment: go.Spot.Center,\r\n            //     stretch: go.GraphObject.Fill,\r\n            //     },\r\n            //     new go.Binding(\"desiredSize\", \"desiredSize\", function(v) {\r\n            //         return v\r\n            //     }).ofObject(\"BACKGROUND\"),\r\n                $(go.Shape, { \r\n                    name:\"UP\",\r\n                    stroke: \"blue\", \r\n                    // geometryString:\"M 0,80 A100,80 0 1 1 200,80\",\r\n                    position:new go.Point(0, 0),\r\n                    isGeometryPositioned: true,\r\n                    alignment: go.Spot.Center,\r\n                    stretch: go.GraphObject.Fill\r\n                },\r\n                    new go.Binding(\"geometry\", \"\", computeGeo),\r\n                    new go.Binding(\"stroke\", \"stroke1\").makeTwoWay(function(v){\r\n                        return v;\r\n                    }),\r\n                    new go.Binding(\"strokeWidth\", \"strokeWidth\").makeTwoWay(function(v){\r\n                        return v;\r\n                    }),\r\n                    // new go.Binding(\"desiredSize\", \"desiredSize\", function(v, d) {\r\n                    //     // console.log(\"vd m\", v, d )\r\n                    //     // if(!v) return d.part.findObject(\"SHAPE\").measuredBounds.size;\r\n                    //     return go.Size.parse(v)\r\n                    // }).makeTwoWay(function(v) {\r\n                    //     return go.Size.stringify(v)\r\n                    // }),\r\n                ),\r\n                $(go.Shape, { \r\n                    name:\"DOWN\",\r\n                    stroke: \"red\", \r\n                    // geometryString:\"M 0,0 A100,80 0 1 0 200,0\", \r\n                    alignment: go.Spot.Center,\r\n                    strokeDashArray: [10, 10],\r\n                    isGeometryPositioned: true,\r\n                    position:new go.Point(-100, -100),\r\n                    stretch: go.GraphObject.Fill,\r\n                 },\r\n\r\n                    // new go.Binding(\"geometry\", \"\", computeGeo),\r\n                    new go.Binding(\"geometry\", \"\", computeGeo2),\r\n                    new go.Binding(\"stroke\", \"stroke2\").makeTwoWay(function(v){\r\n                        return v;\r\n                    }),\r\n                    new go.Binding(\"strokeWidth\", \"strokeWidth\").makeTwoWay(function(v){\r\n                        return v;\r\n                    })\r\n                ),\r\n\r\n                    // new go.Binding(\"desiredSize\", \"desiredSize\", function(v, d) {\r\n                    //     // console.log(\"vd m\", v, d )\r\n                    //     // if(!v) return d.part.findObject(\"SHAPE\").measuredBounds.size;\r\n                    //     return go.Size.parse(v)\r\n                    // }).makeTwoWay(function(v) {\r\n                    //     return go.Size.stringify(v)\r\n                    // }),\r\n                // )\r\n            \r\n            // $(go.Shape, {\r\n            //     name: \"SHAPE\",\r\n            //     // geometryString: \"M 0,0 a50,50 0 1,1 100,0\",\r\n            //     // geometryString: \"M 0 50 L 100 100 L 100 200\",\r\n            //     fill: \"white\",\r\n            //     strokeWidth: 3, \r\n            //     stroke: \"black\",\r\n            //     minSize: new go.Size(50, 50),\r\n            //     },\r\n            //     new go.Binding(\"fill\", \"fill\").makeTwoWay(function(v){\r\n            //         return v;\r\n            //     }),\r\n            //     new go.Binding(\"stroke\", \"stroke\").makeTwoWay(function(v){\r\n            //         return v;\r\n            //     }),\r\n            //     new go.Binding(\"strokeWidth\", \"strokeWidth\").makeTwoWay(function(v){\r\n            //         return v;\r\n            //     }),\r\n            //     new go.Binding(\"desiredSize\", \"desiredSize\", function(v) {\r\n            //         // var va = (v / 2) * Math.sqrt(2);\r\n            //         // console.log(\"desiredSize\",v)\r\n            //         return v\r\n            //     }).ofObject(\"BACKGROUND\"),\r\n            //     new go.Binding(\"angle\", \"angle\", function(v) {\r\n            //         // var va = (v / 2) * Math.sqrt(2);\r\n            //         // console.log(\"desiredSize\",v)\r\n            //         return v\r\n            //     }).ofObject(\"BACKGROUND\"),\r\n            //     new go.Binding(\"geometryString\", \"geometryString\", function(v) {\r\n            //         return v;\r\n            //     }),\r\n            // ),\r\n            // $(go.Shape, \"Rectangle\",{\r\n            //     name: 'BACKGROUND',\r\n            //     fill: \"rgba(1,1,1,0)\",\r\n            //     // width: 450,\r\n            //     // height: 450,\r\n            //     angle: 0,\r\n            //     stroke: \"rgba(1,1,1,0)\",\r\n            //     // minSize: new go.Size(50, 50),\r\n            //     },\r\n            //     new go.Binding(\"desiredSize\", \"desiredSize\", function(v, d) {\r\n            //         // console.log(\"vd m\", v, d )\r\n            //         if(!v) return d.part.findObject(\"SHAPE\").measuredBounds.size;\r\n            //         return go.Size.parse(v)\r\n            //     }).makeTwoWay(function(v) {\r\n            //         return go.Size.stringify(v)\r\n            //     }),\r\n            //     // new go.Binding(\"angle\", \"angle\").makeTwoWay(function(v){\r\n            //     //     return v;\r\n            //     // }),\r\n            //     // new go.Binding(\"desiredSize\", \"height\", function(v) {\r\n            //     //     var radius = parseInt(v ? v : 100);\r\n            //     //     var size = new go.Size(radius, radius);\r\n            //     //     return size;\r\n            //     // }).makeTwoWay(function(v) {\r\n            //     //     return v.height;\r\n            //     // }),\r\n            //     // background: \"#555\",\r\n            //     // stroke: \"red\"}\r\n            // ),\r\n    );\r\n}\r\n\r\nfunction doubleClickCreateNodeType(e){\r\n    // console.log('eeeeeeeeeeeeeee:', e);\r\n    var myDiagram = e.diagram;\r\n    myDiagram.startTransaction();\r\n    var text = { text: \"双击编辑文本\", category: 'text' };\r\n    text.loc = go.Point.stringify(myDiagram.lastInput.documentPoint);\r\n    myDiagram.model.addNodeData(text);\r\n    myDiagram.commitTransaction()\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/nodeTemplate/createWaveNodeTemplate.js","\"use strict\";\r\nvar $ = go.GraphObject.make;\r\n\r\n/*\r\n*  Copyright (C) 1998-2017 by Northwoods Software Corporation. All Rights Reserved.\r\n*/\r\n\r\n/**\r\n* @constructor\r\n* @class\r\n*/\r\nfunction GroupRotatingTool() {\r\n  go.RotatingTool.call(this);\r\n\r\n  // Internal state\r\n  // ._initialInfo holds references to all selected non-Link Parts and\r\n  // their initial relative points and angles\r\n  this._initialInfo = null;\r\n  this._rotatePoint = new go.Point();\r\n  this.handleAngle = 0\r\n  this.handleArchetype =\r\n    $(go.Panel, \"Auto\",\r\n        $(go.Shape, \"BpmnActivityLoop\", { width: 30, height: 30, stroke: \"green\", fill: \"transparent\" }),\r\n        $(go.Shape, \"Rectangle\", {\r\n            width: 30,\r\n            height: 30,\r\n            stroke: \"green\",\r\n            fill: \"transparent\",\r\n            strokeWidth: 0\r\n        })\r\n    );\r\n}\r\ngo.Diagram.inherit(GroupRotatingTool, go.RotatingTool);\r\n\r\nGroupRotatingTool.prototype.doActivate = function() {\r\n \r\n  go.RotatingTool.prototype.doActivate.call(this);\r\n\r\n  // var group = this.adornedObject.part;\r\n  var group = this.adornedObject.part; \r\n  if (group instanceof go.Group && group.data.category == \"waveGroup\") {\r\n    // if (group.placeholder !== null) throw new Error(\"GroupRotatingTool can't handle Placeholder in Group\");\r\n    // assume rotation about the location point\r\n    this._rotatePoint = group.location;\r\n    // remember initial points for each Part\r\n    var infos = new go.Map(go.Part, MultiplePartInfo);\r\n    var textAngle = group.data.textAngle|| \"vertical\" // \"vertical\"\r\n    this.walkTree(group, infos, textAngle);\r\n    this._initialInfo = infos;\r\n  }\r\n}\r\n\r\nGroupRotatingTool.prototype.walkTree = function(part, infos, textAngle) {\r\n  if (part === null || part instanceof go.Link) return;\r\n\r\n  // 文字方向为横向时\r\n  if(textAngle == \"horizontal\"){\r\n    console.log(\"textAngle\")\r\n    if(part.data.category == \"autoText\") return;\r\n  }\r\n  // saves original relative position and original angle\r\n  var loc = part.locationObject.getDocumentPoint(go.Spot.Center);\r\n  var locoffset = loc.copy().subtract(part.location);\r\n  var relloc = loc.subtract(this._rotatePoint);\r\n  infos.add(part, new MultiplePartInfo(relloc, locoffset, part.rotateObject.angle));\r\n  // recurse into Groups\r\n  if (part instanceof go.Group) {\r\n    var it = part.memberParts.iterator;\r\n    while (it.next()) this.walkTree(it.value, infos,textAngle);\r\n  }\r\n};\r\n\r\nfunction MultiplePartInfo(relativeloc, locoffset, rotationAngle) {\r\n  this.relativeLocation = relativeloc;\r\n  this.centerLocationOffset = locoffset;\r\n  this.rotationAngle = rotationAngle;  // in degrees\r\n}\r\n\r\n/**\r\n* Rotate all members of a selected Group about the rotatePoint.\r\n* @this {GroupRotatingTool}\r\n* @param {number} newangle\r\n*/\r\nGroupRotatingTool.prototype.rotate = function(newangle) {\r\n  console.log(\"newangle\",newangle)\r\n  var group = this.adornedObject.part;\r\n\r\n  if (group instanceof go.Group) {\r\n    if((newangle+360)%360<300|| (newangle+360)%360>340){\r\n        if((newangle+360)%360<300) newangle=300\r\n        if((newangle+360)%360>340) newangle=340\r\n\r\n      console.log('dayu.................')\r\n      // setTimeout(()=>{\r\n        // group.diagram.startTransaction()\r\n        // group.layout.isOngoing = true;\r\n        // group.layout.isValidLayout = false;\r\n        // if(group.containingGroup ){\r\n        //   group.containingGroup.layout.isOngoing = true;\r\n        //   group.containingGroup.layout.isValidLayout = false;\r\n        // }\r\n        // group.diagram.commitTransaction() \r\n\r\n      // },100)\r\n \r\n      // return;\r\n    }\r\n  }\r\n  go.RotatingTool.prototype.rotate.call(this, newangle);\r\n  \r\n\r\n\r\n  if (group instanceof go.Group) {\r\n\r\n    var ang = newangle - this.originalAngle;\r\n    var cp = this._rotatePoint;\r\n    group.diagram.startTransaction()\r\n    var it = this._initialInfo.iterator;\r\n    while (it.next()) {\r\n      var part = it.key;\r\n      if (part instanceof go.Link) return; // only Nodes and simple Parts\r\n      var info = it.value;\r\n\r\n      // part.rotateObject.angle = info.rotationAngle + ang;\r\n      var angle = info.rotationAngle + ang;\r\n\r\n      var loc = cp.copy().add(info.relativeLocation);\r\n      var dir = cp.directionPoint(loc);\r\n      var newrad = (ang + dir) * (Math.PI / 180);\r\n      var locoffset = info.centerLocationOffset.copy();\r\n      locoffset.rotate(ang);\r\n      var dist = Math.sqrt(cp.distanceSquaredPoint(loc));\r\n      // part.location = new go.Point(cp.x + dist * Math.cos(newrad),\r\n      //                              cp.y + dist * Math.sin(newrad)).subtract(locoffset);\r\n      var location = new go.Point(cp.x + dist * Math.cos(newrad),\r\n                                   cp.y + dist * Math.sin(newrad)).subtract(locoffset);                                   \r\n      group.diagram.model.setDataProperty(part.data, \"loc\", go.Point.stringify(location))                                   \r\n      group.diagram.model.setDataProperty(part.data, \"angle\", angle) \r\n      // var git = group.memberParts;\r\n      // console.log(\"item:\",git)\r\n      // var maxWidth = 0;\r\n      // var maxHeight = 0;\r\n      // while (git.next()) {\r\n      //   var item = git.value;\r\n      //   console.log(\"item:\",item)\r\n      //   if(item.naturalBounds.width > maxWidth){\r\n      //     maxWidth = item.naturalBounds.width;\r\n      //   }\r\n      //   if(item.naturalBounds.height > maxHeight){\r\n      //     maxHeight = item.naturalBounds.height;\r\n      //   }\r\n      //   console.log(`maxHeight:${maxHeight},maxWidth:${maxWidth}`)\r\n\r\n      // }                    \r\n      // group.diagram.model.setDataProperty(group.data, \"desiredSize\", `${maxWidth+100} ${maxHeight}`)   \r\n      \r\n      // that.diagram.startTransaction();\r\n      console.log(\"isValidLayoutisValidLayout\")\r\n      // var group = that.diagram.findNodeForKey(data.key)\r\n      group.layout.isOngoing = true;\r\n      group.layout.isValidLayout = false;\r\n      if(group.containingGroup ){\r\n        group.containingGroup.layout.isOngoing = true;\r\n        group.containingGroup.layout.isValidLayout = false;\r\n      }\r\n      // that.diagram.commitTransaction();\r\n      group.diagram.commitTransaction()                          \r\n    }\r\n  }\r\n}\r\n\r\n\r\nmodule.exports = GroupRotatingTool\n\n\n// WEBPACK FOOTER //\n// ./src/tools/GroupRotatingTool.js","// \"use strict\";\n/*\n*  Copyright (C) 1998-2019 by Northwoods Software Corporation. All Rights Reserved.\n*/\n\n// HTML + JavaScript text editor menu, made with HTMLInfo\n// This is a re-implementation of the default text editor\n// This file exposes one instance of HTMLInfo, window.TextEditor\n// See also TextEditor.html\n(function(window) {\n  var textarea = document.createElement('textarea');\n  textarea.id = \"myTextArea\";\n    console.log(\"TextEditorTextEditorTextEditorTextEditorTextEditorTextEditorTextEditorTextEditorTextEditorTextEditorTextEditorTextEditor222222222222\")\n  textarea.addEventListener('input', function(e) {\n    var tool = TextEditor.tool;\n    if (tool.textBlock === null) return;\n    var tempText = tool.measureTemporaryTextBlock(this.value);\n    var scale = this.textScale;\n    this.style.width = 20 + tempText.measuredBounds.width * scale + 'px';\n    this.rows = tempText.lineCount;\n  }, false);\n\n  var observe;\n  if (window.attachEvent) {\n    observe = function (element, handlers) {\n      handlers.forEach(t => {\n        element.attachEvent('on' + t.evt, t.handler);\n      });\n    };\n  } else {\n    observe = function (element, handlers) {\n      handlers.forEach(t => {\n        element.addEventListener(t.evt, t.handler, false);\n      });\n    };\n  }\n\n  function resize() {\n    textarea.style.minHeight = \"40px\";\n    textarea.style.height = 'auto';\n    textarea.style.height = textarea.scrollHeight + 'px';\n  }\n\n  function delayedResize() {\n    setTimeout(resize, 0);\n  }\n\n  observe(textarea, [\n    {\n      evt: \"change\",\n      handler: resize\n    },\n    {\n      evt: \"cut\",\n      handler: delayedResize\n    },\n    {\n      evt: \"paste\",\n      handler: delayedResize\n    },\n    {\n      evt: \"drop\",\n      handler: delayedResize\n    },\n    {\n      evt: \"keydown\",\n      handler: delayedResize\n    }\n  ]);\n\n  textarea.addEventListener('keydown', function(e) {\n    var tool = TextEditor.tool;\n    if (tool.textBlock === null) return;\n    var keynum = e.which;\n    if (keynum === 13) { // Enter\n      if (tool.textBlock.isMultiline === false) e.preventDefault();\n      tool.acceptText(go.TextEditingTool.Enter);\n      return;\n    } else if (keynum === 9) { // Tab\n      tool.acceptText(go.TextEditingTool.Tab);\n      e.preventDefault();\n      return;\n    } else if (keynum === 27) { // Esc\n      tool.doCancel();\n      if (tool.diagram !== null) tool.diagram.doFocus();\n    }\n  }, false);\n\n  // handle focus:\n  textarea.addEventListener('focus', function(e) {\n    var tool = TextEditor.tool;\n    if (!tool || tool.currentTextEditor === null) return;\n\n    if (tool.state === go.TextEditingTool.StateActive) {\n      tool.state = go.TextEditingTool.StateEditing;\n    }\n\n    if (tool.selectsTextOnActivate) {\n      textarea.select();\n      textarea.setSelectionRange(0, 9999);\n    }\n  }, false);\n\n  // Disallow blur.\n  // If the textEditingTool blurs and the text is not valid,\n  // we do not want focus taken off the element just because a user clicked elsewhere.\n  textarea.addEventListener('blur', function(e) {\n    var tool = TextEditor.tool;\n    if (!tool || tool.currentTextEditor === null || tool.state === go.TextEditingTool.StateNone) return;\n\n    textarea.focus();\n\n    if (tool.selectsTextOnActivate) {\n      textarea.select();\n      textarea.setSelectionRange(0, 9999);\n    }\n  }, false);\n\n\n  var TextEditor = new go.HTMLInfo();\n\n  TextEditor.valueFunction = function() { return textarea.value; }\n\n  TextEditor.mainElement = textarea; // to reference it more easily\n\n  // used to be in doActivate\n  TextEditor.show = function(textBlock, diagram, tool) {\n      console.log(\"show.......................\")\n    if (!(textBlock instanceof go.TextBlock)) return;\n\n    TextEditor.tool = tool;  // remember the TextEditingTool for use by listeners\n\n    // This is called during validation, if validation failed:\n    if (tool.state === go.TextEditingTool.StateInvalid) {\n      textarea.style.border = '3px solid red';\n      textarea.focus();\n      return;\n    }\n\n    // This part is called during initalization:\n\n    var loc = textBlock.getDocumentPoint(go.Spot.Center);\n    var pos = diagram.position;\n    var sc = diagram.scale;\n    var textscale = textBlock.getDocumentScale() * sc;\n    if (textscale < tool.minimumEditorScale) textscale = tool.minimumEditorScale;\n    // Add slightly more width/height to stop scrollbars and line wrapping on some browsers\n    // +6 is firefox minimum, otherwise lines will be wrapped improperly\n    var textwidth = (textBlock.naturalBounds.width * textscale) + 6;\n    var textheight = (textBlock.naturalBounds.height * textscale) + 2;\n    var left = (loc.x - pos.x) * sc;\n    var top = (loc.y - pos.y) * sc;\n\n    textarea.value = textBlock.text;\n    // the only way you can mix font and fontSize is if the font inherits and the fontSize overrides\n    // in the future maybe have textarea contained in its own div\n    diagram.div.style['font'] = textBlock.font;\n\n    var paddingsize = 1;\n    textarea.style['position'] = 'absolute';\n    textarea.style['zIndex'] = '100';\n    textarea.style['font'] = 'inherit';\n    textarea.style['fontSize'] = (textscale * 100) + '%';\n    textarea.style['lineHeight'] = 'normal';\n    textarea.style['width'] = (textwidth) + 'px';\n    textarea.style['left'] = ((left - (textwidth / 2) | 0) - paddingsize) + 'px';\n    textarea.style['top'] = ((top - (textheight / 2) | 0) - paddingsize) + 'px';\n    textarea.style['textAlign'] = textBlock.textAlign;\n    textarea.style['margin'] = '0';\n    textarea.style['padding'] = paddingsize + 'px';\n    textarea.style['border'] = '0';\n    textarea.style['outline'] = 'none';\n    textarea.style['whiteSpace'] = 'pre-wrap';\n    textarea.style['overflow'] = 'hidden'; // for proper IE wrap\n    textarea.rows = textBlock.lineCount;\n    textarea.textScale = textscale; // attach a value to the textarea, for convenience\n    textarea.className = 'goTXarea';\n\n    // Show:\n    diagram.div.appendChild(textarea);\n\n    // After adding, focus:\n    textarea.focus();\n    if (tool.selectsTextOnActivate) {\n      textarea.select();\n      textarea.setSelectionRange(0, 9999);\n    }\n\n    resize();\n  };\n\n  TextEditor.hide = function(diagram, tool) {\n    diagram.div.removeChild(textarea);\n    TextEditor.tool = null;  // forget reference to TextEditingTool\n  }\n\n  window.TextEditor = TextEditor;\n})(window);\n\n\n\n// WEBPACK FOOTER //\n// ./src/tools/textEditor.js"],"sourceRoot":""}