{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///./src/layout/SpiralLayout.js","webpack:///./src/diagram/tianpan.js","webpack:///webpack/bootstrap ddcba70be63e353a1bae","webpack:///./src/helpers/helpers.gojs.js","webpack:///./src/nodeTemplate/base.js","webpack:///./src/nodeTemplate/createPictureSingleNodeTemplate.js","webpack:///./src/nodeTemplate/createTextNodeTemplate.js","webpack:///./src/nodeTemplate/createPictureNodeTemplate.js","webpack:///./src/nodeTemplate/createNodeSvgTemplate.js","webpack:///./src/nodeTemplate/createNodeTemplate.js","webpack:///./src/datas/svg.template.js","webpack:///./src/layout/waveGroupLayout.js","webpack:///./src/diagram/trtd.js","webpack:///./src/nodeTemplate/factory.js","webpack:///./src/assets/localization.js","webpack:///./src/main.js","webpack:///./src/nodeTemplate/waveNodeTemplate.js","webpack:///./src/nodeTemplate/waveTailNodeTemplate.js","webpack:///./src/nodeTemplate/waveGroupNodeTemplate.js","webpack:///./src/nodeTemplate/axisGroupNodeTemplate.js","webpack:///./src/layout/axisGroupLayout.js","webpack:///./src/nodeTemplate/iconTextNodeTemplate.js","webpack:///./src/nodeTemplate/autoTextNodeTemplate.js","webpack:///./src/nodeTemplate/labelGroupNodeTemplate.js","webpack:///./src/nodeTemplate/picNodeTemplate.js","webpack:///./src/nodeTemplate/picGroupNodeTemplate.js","webpack:///./src/nodeTemplate/yunGroupNodeTemplate.js","webpack:///./src/layout/yunGroupLayout.js","webpack:///./src/nodeTemplate/yunpanGroupNodeTemplate.js","webpack:///./src/layout/yunpanGroupLayout.js","webpack:///./src/nodeTemplate/shapeNodeTemplate.js","webpack:///./src/nodeTemplate/shapeTextNodeTemplate.js","webpack:///./src/linkTemplate/createTianpanLink.js","webpack:///./src/diagram/dipan.js","webpack:///./src/diagram/jin.js","webpack:///./src/diagram/huo.js","webpack:///./src/diagram/shui.js","webpack:///./src/diagram/yunpan.js","webpack:///./src/diagram/wheel.js","webpack:///./src/diagram/dspiral.js","webpack:///./src/nodeTemplate/createArcNodeTemplate.js","webpack:///./src/nodeTemplate/createLineNodeTemplate.js","webpack:///./src/nodeTemplate/createWaveNodeTemplate.js","webpack:///./src/tools/GroupRotatingTool.js","webpack:///./src/tools/textEditor.js"],"names":["Math","newStartAngle","exports","module","navigator","S4","aElements","document","aEle","i","clear","chart","nodeInfo","str","d","linkInfo","groupInfo","g","adornment","mems","links","part","go","queue","tdTravelTdpDataWidth","dealingNode","collector","childNodeData","model","tdTravelTdpData","nodeData","nextNodeData","window","item","temp","JSON","diff","checkModel","data","nodeDataArray","root","checkDataExists","arguments","defaultVal","result","myDiagram","e","evt","start","end","val","diagram","rootNode","callback","group","stack","node","child","link","nextChild","$","over","x","buttonFillNormal","buttonStrokeNormal","paddingHorizontal","paddingVertical","button","enabledChanged","shape","btn","enabled","cursor","name","figure","spot1","spot2","parameter1","parameter2","stroke","brush","oldskip","NodeBase","options","that","fill","strokeWidth","alignment","font","overflow","wrap","textAlign","spacingAbove","spacingBelow","portId","stretch","Uniform","helpers","v","obj","selnode","layerName","zOrder","locationSpot","resizeCellSize","locationObjectName","resizeObjectName","rotateObjectName","doubleClick","click","angle","layoutConditions","alignmentFocus","resizeAdornmentTemplate","contextMenu","selectionAdornmentTemplate","width","height","isActionable","centerPicture","equalWidthHeightPicture","bringToLayer","successFunction","pict","sourceCrossOrigin","Date","properties","fontSize","location","toMaxLinks","strokeDashArray","minSize","Fill","_","randomColor","luminosity","count","tmpColor","follower","preNode","level","parent","cur","nextNode","parNode","parGroup","tdCurrentTheme","key","childGroup","getRootNodeData","rootLoc","rootPoint","firstChild","firstLoc","relativeFirstLoc","relativeMidLoc","midLoc","offset","computeOffset","curLoc","relativeLoc","depth","nextLoc","relativeNextLoc","prevLoc","relativeLocPrev","lastLoc","dy","newR","dx","arr","SpiralLayout","require","TRTD_BASE","lang","createNodeTemplate","createPictureSingleNodeTemplate","createPictureNodeTemplate","createTextNodeTemplate","createNodeSvgTemplate","createTianpanLink","colorMap","Trtd","config","div","diagramConfig","Object","showIds","message","text","category","tmpModel","contextClick","copyable","layout","radius","isInitial","LayoutAdded","parseInt","size","margin","disconnectFromTreeStructure","newLink","from","to","applyTheme2Link","newGroup","nodeGroup","addGroupForNode","sibling","preLink","parentGroup","cmd","locateNode","tempArray","mainNode","n","nextNodeLink","intoLink","tmpNodeData","oldlink","nodes","mylinks","grandNode","isautolayout","currentType","toKey","nextkey","color","nextnode","nextlink","l","nextLocation","parentNode","linkToFollower","copyLink","tb","ControlAutoLayout","autoLayoutPart","newnode","iskeyboard","firstNode","firstLink","InitialFontSize","direction","prevNode","autoLayoutAll","centerNode","centerCurrentNode","zoomToFit","imgdata","scale","background","type","maxSize","tinycolor","toolTip","desiredSize","first","pushChildKeyToArr","re","interactions","tdTransToNum","va","svg","doubleClickCreateNodeType","selectionObjectName","geometryString","mouseOver","mouseLeave","mouseDragEnter","mouseDragLeave","mouseDrop","column","row","alert","rowSpan","setTimeout","groupTextAngle","shi","textAngle","computeNewRotateLoc","xu","collection","oliveWidth","oliveHeight","shiStroke","xuStroke","centerStroke","oliveType","haveTail","waveTotalSize","shiTextColl","xuTextColl","centerTextColl","it","line","xuStrokeWidth","shiStrokeWidth","shiStrokeDashArray","xuStrokeDashArray","Number","a","b","lastOlive","oldOrder","newOrder","index","loc","centerText","textStroke","initCenterText","objCenterText","adustOliveText","adjustTextAngle","rotateCenter","nodeOrigin","currentLoc","newNodeOrigin","newNodeLoc","WaveGroupLayout","layoutWaveGroup","coll","parts","fromnode","tonode","nodeTemplateFactory","id","borderWidth","borderColor","groupColor","groupStroke","groupStrokeWidth","themeName","linkColor","colorRange","value","source","documentPoint","localStorage","themeText","tmp","newData","imageParas","list","p","groupKey","basePoint","groupData","picData","themeData","timeData","energeData","text1Data","text2Data","text3Data","defaultConfig","initialContentAlignment","initialAutoScale","initialDocumentSpot","initialViewportSpot","padding","maxScale","minScale","scrollMode","scrollMargin","maxSelectionCount","InitialLayoutCompleted","validCycle","ViewportBoundsChanged","forelayer","nodeCopy","doms","info","box","toolTipText","mainbox","contextMeluDom","cxElement","menuList","cxTool","contextmenu","mousePt","showMenus","liL","style","waveNodeTemplate","waveTailNodeTemplate","waveGroupNodeTemplate","axisGroupNodeTemplate","iconTextNodeTemplate","autoTextNodeTemplate","labelGroupNodeTemplate","picNodeTemplate","picGroupNodeTemplate","yunGroupNodeTemplate","yunpanGroupNodeTemplate","shapeNodeTemplate","shapeTextNodeTemplate","nodeTemplateClass","eval","en","chn","cn","trans","localization","typeModules","trtdClass","cos","sin","nodesRectList","rect","_cover","tdSpiralMode","copy","topNodes","findFlag","cw","initialAngle","nodesDealed","distance","edge","vert","childCount","hasGroup","nextedge","nextvert","rad","tmpR","radiusDis","tmpPoint","adjustAngleCount","fromVert","y","point","getInvolutePoint","equaldistance","dangle","angleOld","newPoint","curRect","res","dept","equalSpiral","dia","_do","get","set","Base","WaveNodeTemplate","radiusX","radiusY","geo","seg","Bottom","clockwiseFlag","textEdited","textBlock","newv","shiText","xuText","deleteObjs","cbian","c","title","tips","elt","waveGroupLayout","axisGroupLayout","AxisNodeTemplate","AxisGroupLayout","dataCollection","maxWidth","maxHeight","axisYText","axisXText","labelText1","labelText2","labelText3","labelGroup","centerLine","axisX","axisY","waveGroup","x1","x2","itl","IconTextTemplate","verticalAlignment","maxLines","Right","AutoTextTemplate","oliveNode","selOrderX","selOrderY","selDimKey","nodeCoreTexts","selnodeCoreTexts","yunnodeCoreTexts","yunselnodeCoreTexts","normDim","selOrder","nodeOrder","centerOrderX","centerOrderY","tmpX","tmpY","selectionChanged","orderX","orderY","shapeStrokes","showShape","gridWidth","shapeData","nod","olive","LabelGroupNodeTemplate","flag","oldStatus","spacing","cellSize","arrangement","wrappingColumn","Location","opacity","Center","PicNodeTemplate","PicGroupNodeTemplate","LayoutNodeSized","yunGroupLayout","YunNodeTemplate","minX","minY","YunGroupLayout","gridHeight","verticalLines","horizontalLines","freelLines","allLines","freeTexts","shapeNodes","snapType","beginSpark","allPointsX","allPointsY","shapeWidth","dimXLoc","dimYLoc","horizontalDim","verticalDim","shadowColor","shadowOffset","C","A","B","O","locD","r","OC","directionOC","directionFlagOD","directionOD","angleDOC","OD","cent","sweep","p1","ctl1","ctl2","SmoothLink","centorPoint","centInfo","rcenter","rstart","rend","center2mid","af","start2","end2","computeControlPoint","isNaN","curve","curviness","adjusting","draggedNode","fromNode","toNode","toArrow","tmpNode","lastNode","layerThickness","q","o","globalProperties","tdDipanTextAngle","getNodeContextMenu","changeTemp2normal","selectionAdorned","BottomRight","currentThemeID","splitLayer","maxCircle","totalCount","dipanRoot","nodeArr","nodeLevelArr","maxNodeArr","max","maxCircles","firstnodeData","sectotLayerThickNess","radlay1","found","newdata","rootRadius","layer","separator","label","tmpDataObj","childNum","sweepUnit","length","tmpArray","tmpAngle","followerNode","changeLayout","radialLayout","splitRadlayout","Trtd_tianpan","geometry","mouseEnter","mouseHover","dir","addy","addx","del","yl","locy","locL","loco","newy","newytext","xl","min","newx","newxtext","locx","changelen","changelenx","datalocx","gs","gs2","shapeShowblur","circleStroke","createArcNodeTemplate","createLineNodeTemplate","createWaveNodeTemplate","GroupRotatingTool","rotatingTool","PartResized","waveCount","lastWave","nodeSize","waveSize","SelectionMoved","waveColl","tool","deleteNodes","deleteLines","unnormDim","lineRole","axisData","curOrder","splitOlive","maxOlive","curShiText","curXuText","order","baseLoc","axisGroupKey","labelGroupKey","waveGroupKey","olive1Key","olive2Key","olive3Key","olive4Key","olive1ShiTextKey","olive1XuTextKey","olive2ShiTextKey","olive2XuTextKey","olive3ShiTextKey","olive3XuTextKey","olive4ShiTextKey","olive4XuTextKey","olive1CenterTextKey","olive2CenterTextKey","olive3CenterTextKey","olive4CenterTextKey","axisGroupCount","waveTail","mapObj","curLine","dimTextData","lineData","toLayerName","tempData","prenode","upnode","downnode","upNode","downNode","strokeCap","position","infos","locoffset","relloc","newangle","ang","cp","newrad","dist","textarea","TextEditor","tempText","handlers","element","t","observe","handler","keynum","pos","sc","textscale","textwidth","textheight","left","top","paddingsize","resize"],"mappings":"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","file":"hardcore0.0.11.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"hardcore0.0.11\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"hardcore0.0.11\"] = factory();\n\telse\n\t\troot[\"hardcore0.0.11\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","\r\n/*\r\n*  Copyright (C) 1998-2015 by Northwoods Software Corporation. All Rights Reserved.\r\n*/\r\n\r\n// A custom Layout that lays out a chain of nodes in a spiral\r\n\r\n/**\r\n * @constructor\r\n * @extends Layout\r\n * @class\r\n * This layout assumes the graph is a chain of Nodes,\r\n * {@link #spacing} controls the spacing between nodes.\r\n */\r\n\r\n// 'use strict';\r\n\r\n// import * as go from 'gojs';\r\nvar $ = go.GraphObject.make;\r\nvar tdDebug = false;\r\nvar tdSpacing = 0.7;\r\nvar tdSpiralMode = 'sparse';\r\n\r\nfunction SpiralLayout() {\r\n    go.Layout.call(this);\r\n    this._radius = NaN;\r\n    this._spacing = 10;\r\n    this._clockwise = true;\r\n    this._pointlist = [];\r\n}\r\ngo.Diagram.inherit(SpiralLayout, go.Layout);\r\n\r\n/**\r\n * @ignore\r\n * Copies properties to a cloned Layout.\r\n * @this {SpiralLayout}\r\n * @param {Layout} copy\r\n * @override\r\n */\r\nSpiralLayout.prototype.cloneProtected = function(copy) {\r\n    go.Layout.prototype.cloneProtected.call(this, copy);\r\n\r\n    copy._radius = this._radius;\r\n    copy._spacing = this._spacing;\r\n    copy._clockwise = this._clockwise;\r\n};\r\n\r\n//根据基圆半径和角度参数确定螺旋线上的一个点\r\n//渐开线的参数方程\r\nfunction getInvolutePoint(radius, angle) {\r\n    var cos = Math.cos(angle);\r\n    var sin = Math.sin(angle);\r\n    var x = radius * (cos + angle * sin);\r\n    var y = radius * (sin - angle * cos);\r\n    return new go.Point(x, y);\r\n}\r\n\r\n//检查给定区域是否和nodes内所有节点重叠\r\nfunction checkCoveredWithNodes(rect, nodesRectList) {\r\n    var _cover = false;\r\n\r\n    var it = nodesRectList.iterator;\r\n    while (it.next()) {\r\n\r\n        if (Math.sqrt(rect.point.distanceSquaredPoint(it.value.point)) < (rect.radius + it.value.radius)) {\r\n            //console.log([\" node:\", it.value.node.data.key,'is in the radius ',node.actualBounds.width,' of:',node.data.key].join(\" \"));\r\n            _cover = true;\r\n            break;\r\n        }\r\n    }\r\n    return _cover;\r\n}\r\n\r\n/**\r\n * This method actually positions all of the Nodes, assuming that the ordering of the nodes\r\n * is given by a single link from one node to the next.\r\n * This respects the {@link #spacing} property to affect the layout.\r\n * @this {SpiralLayout}\r\n * @param {Diagram|Group|Iterable} coll the collection of Parts to layout.\r\n */\r\nSpiralLayout.prototype.doLayout = function(coll) {\r\n\r\n\r\n    if (this.network === null) {\r\n        this.network = this.makeNetwork(coll);\r\n    }\r\n    //console.log(\"begin new layout\");\r\n    var root = null;\r\n    var findFlag = false;\r\n    var v;\r\n    // find a root vertex -- one without any incoming edges\r\n    var it = this.network.vertexes.iterator;\r\n    var topNodes = [];\r\n    while (it.next()) {\r\n        //console.log(it.value.node.data.key+\":\"+it.value.node.data.text);\r\n        v = it.value;\r\n        if (!findFlag) {\r\n            if (root === null) root = v; // in case there are only circles\r\n            if (v.sourceEdges.count === 0) {\r\n                root = v;\r\n                findFlag = true;\r\n            }\r\n        } else {\r\n            if (v.sourceEdges.count === 0) {\r\n                topNodes.push(v);\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n\r\n    // couldn't find a root vertex\r\n    if (root === null) {\r\n        this.network = null;\r\n        return;\r\n    }\r\n\r\n    var cw = (this.clockwise ? 1 : -1);\r\n    var rad;\r\n\r\n    var angle = 2.5;\r\n    var isautolayout = window.localStorage.getItem('isautolayout') == null ? true : window.localStorage.getItem('isautolayout') == 'true';\r\n    // now locate each of the following nodes, in order, along a spiral\r\n    var vert;\r\n    var x, y;\r\n    var _pointlist;\r\n    var _do = true;\r\n    var count = 0; //循环计数\r\n    var res;\r\n    var initialAngle = 5;\r\n    var edge, fromVert, dangle, index, dept, dl, nextedge, nextvert,\r\n        nodesDealed = new go.List(),\r\n        curRect, //当前节点的矩形区域\r\n        newPoint,\r\n        dia,\r\n        distance = 150,\r\n        equaldistance;\r\n    if (tdSpiralMode == 'terse') {\r\n        distance = 20;\r\n    }\r\n    if (tdSpiralMode == 'sparse') {\r\n        distance = 150;\r\n    }\r\n    var tmpR; //计算中间值\r\n    edge = root.destinationEdges.first();\r\n    vert = (edge !== null ? edge.toVertex : null);\r\n\r\n    root.node.rad = rad;\r\n    var childCount = 0;\r\n    var hasGroup = false;\r\n    while (vert !== null) {\r\n        childCount++;\r\n        if (vert.node.data['isGroup']) {\r\n            hasGroup = true;\r\n        }\r\n        nextedge = vert.destinationEdges.first();\r\n        nextvert = (nextedge !== null ? nextedge.toVertex : null);\r\n        edge = nextedge;\r\n        //fromVert = vert;\r\n        vert = nextvert;\r\n    }\r\n    edge = root.destinationEdges.first();\r\n    vert = (edge !== null ? edge.toVertex : null);\r\n\r\n    rad = 1;\r\n    var tmpPoint;\r\n    //找到第一个节点和根节点不相交的rad值\r\n    if (vert) {\r\n        tmpR = vert.node.actualBounds.width;\r\n        //var rootRect = new go.Rect(root.node.location.x - root.node.actualBounds.width / 2, root.node.location.y - root.node.actualBounds.height / 2, root.node.actualBounds.width, root.node.actualBounds.height);\r\n        var radiusDis = root.node.actualBounds.width / 2 + vert.node.actualBounds.width / 2;\r\n        while (true) {\r\n            tmpPoint = getInvolutePoint(rad, initialAngle);\r\n            tmpPoint = new go.Point(tmpPoint.x + root.node.location.x, tmpPoint.y + root.node.location.y);\r\n            if ((Math.sqrt(tmpPoint.distanceSquaredPoint(root.node.location))) > (radiusDis + 10)) { //+10 是为了防止第一个子节点和根节点接壤\r\n                break;\r\n            } else {\r\n                rad += 0.1;\r\n            }\r\n        }\r\n    }\r\n    var adjustAngleCount = 0;\r\n\r\n    while (_do) {\r\n\r\n        count++; //计数\r\n        //初始化参数\r\n        angle = initialAngle;\r\n        edge = root.destinationEdges.first();\r\n        //if (edge !== null && edge.link !== null) edge.link.curviness = rad;\r\n        root.node.data.angle = 0;\r\n        if (edge !== null && edge.link !== null) edge.link.curviness = cw * rad;\r\n        var curviness = edge == null ? 20 : edge.link.curviness;\r\n        // now locate each of the following nodes, in order, along a spiral\r\n        vert = (edge !== null ? edge.toVertex : null);\r\n\r\n        fromVert = root;\r\n        index = 0;\r\n        var angleOld; //增加angle时保留的原始值，用于恢复\r\n        x = 0, y = 0;\r\n        //_pointlist = [];\r\n        // _pointlist.push(root.node.data.key + \":(0,0)\");\r\n        if (vert) vert.node.data.angle = angle;\r\n        nodesDealed.clear();\r\n        //nodesDealed.add(new go.Rect(root.node.location.x - root.node.actualBounds.width / 2, root.node.location.y - root.node.actualBounds.height / 2, root.node.actualBounds.width, root.node.actualBounds.height));\r\n        nodesDealed.add({ point: root.node.location, radius: root.node.actualBounds.width / 2 });\r\n\r\n        //等弧长\r\n        //equaldistance = Math.sqrt(getInvolutePoint(rad, 5 * Math.PI / 2).distanceSquaredPoint(getInvolutePoint(rad, 5 * Math.PI / 2 - tdSpacing)));\r\n\r\n        //equaldistance = Math.sqrt(getInvolutePoint(rad, 5 * Math.PI / 2).distanceSquaredPoint(getInvolutePoint(rad, 5 * Math.PI / 2 - tdSpacing)));\r\n        if (tdSpiralMode == 'terse') {\r\n            equaldistance = Math.sqrt(getInvolutePoint(rad, 5).distanceSquaredPoint(getInvolutePoint(rad, 6)));\r\n        } else {\r\n            equaldistance = Math.sqrt(getInvolutePoint(rad, 5 * Math.PI / 2).distanceSquaredPoint(getInvolutePoint(rad, 5 * Math.PI / 2 - tdSpacing)));\r\n        }\r\n        //重新开始布局节点\r\n        while (vert !== null) {\r\n            index++;\r\n            root.node.data.rad = rad;\r\n            //console.log(vert.node.data.key + \":\" + vert.node.data.text);\r\n            // involute spiral\r\n            //循环判断是否有覆盖，如果覆盖增加基圆半径，重新计算下一个位置\r\n            dangle = 0.4;\r\n            angleOld = angle;\r\n            //for(dangle=0.1;dangle<=0.9;dangle+=0.1){\r\n            for (var i = 0; i <= 20; i++) {\r\n                //圆的渐开线参数方程算出下一个节点位置\r\n                newPoint = getInvolutePoint(rad, angle);\r\n                newPoint = new go.Point(newPoint.x + root.node.location.x, newPoint.y + root.node.location.y);\r\n                x = newPoint.x;\r\n                y = newPoint.y;\r\n\r\n                if (vert.node instanceof go.Group && edge.link.toNode !== vert.node) {\r\n                    var offset = edge.link.toNode.location.copy().subtract(vert.node.location);\r\n                    newPoint.x -= offset.x;\r\n                    newPoint.y -= offset.y;\r\n                }\r\n                //tmpR = vert.node.actualBounds.width / 2 * Math.sqrt(2);\r\n                tmpR = vert.node.actualBounds.width / 2;\r\n                //curRect = new go.Rect(newPoint.x - tmpR/ 2, newPoint.y - tmpR / 2, tmpR, tmpR);\r\n                curRect = { point: newPoint, radius: tmpR };\r\n                res = checkCoveredWithNodes(curRect, nodesDealed);\r\n                //res = checkCovered(vert.node, newPoint, this.network.vertexes,nodesDealed);\r\n                //  //检查覆盖\r\n                if (res) {\r\n                    adjustAngleCount++;\r\n                    if (angle >= fromVert.node.data.angle + Math.PI / 2) {\r\n                        angle = fromVert.node.data.angle + Math.PI / 2;\r\n                        break;\r\n                    }\r\n                    //if (angle <= fromVert.node.data.angle + 0.2) {\r\n                    //  angle = fromVert.node.data.angle + 0.2;\r\n                    //}\r\n                    if (tdSpiralMode != 'equidistant') { //等距模式，不自动调节距离\r\n                        angle = fromVert.node.data.angle + (i + 1) * Math.PI / 16; //加的算法\r\n                        //dia = Math.max(equaldistance,vert.node.actualBounds.width / 2+ nextvert.node.actualBounds.width / 2);\r\n                        dept = cw * Math.atan((vert.node.actualBounds.width / 2 + fromVert.node.actualBounds.width / 2 + distance) / Math.sqrt(vert.node.location.distanceSquaredPoint(root.node.location)));\r\n                        if (angle <= fromVert.node.data.angle + dept) { //保证最小间距\r\n                            angle = fromVert.node.data.angle + dept;\r\n                        }\r\n                    } else {\r\n                        break;\r\n                    }\r\n\r\n                } else {\r\n                    break;\r\n                }\r\n\r\n            }\r\n\r\n            //检查覆盖，如果增加angle的方式没有消除覆盖，则增加半径\r\n            if (res) {\r\n                rad += 1; //加的算法\r\n                //angle = angleOld;\r\n                break; //如果有覆盖，则增加基圆半径，保证没有覆盖\r\n                //console.log(\"rad:\"+rad);\r\n            }\r\n\r\n            nextedge = vert.destinationEdges.first();\r\n            nextvert = (nextedge !== null ? nextedge.toVertex : null);\r\n\r\n            vert.centerX = newPoint.x;\r\n            vert.centerY = newPoint.y;\r\n            vert.node.data.angle = angle;\r\n\r\n            edge.link.data.unautoLink = false;\r\n            edge.link.rad = rad;\r\n            edge.link.angle1 = fromVert.node.data.angle;\r\n            edge.link.angle2 = vert.node.data.angle;\r\n\r\n            var equalSpiral = false;\r\n            if ('0512' == '0512') {\r\n                //角度小于一圈，且节点个数小于等于4个时，为了优化线条，节点间距离拉大，节点距离通过angle控制\r\n                //if (childCount <= 6  ) {\r\n                if (tdSpiralMode != 'terse') { //紧凑模式下，不自动调节节点\r\n                    if (childCount <= 6) {\r\n                        if (childCount * 1.3 < 3 * Math.PI / 2 && !hasGroup) {\r\n                            angle += Math.min((3 * Math.PI / 2 / childCount), Math.PI / 2);\r\n                        } else {\r\n                            if (vert.node.data[\"isGroup\"]) {\r\n                                equalSpiral = true;\r\n                            } else {\r\n                                angle += 1.3;\r\n                            }\r\n\r\n                        }\r\n                        //angle += 0.9;\r\n                    } else { //角度大于一圈，时等间距\r\n                        equalSpiral = true;\r\n                    }\r\n                } else {\r\n                    equalSpiral = true;\r\n                }\r\n\r\n                if (equalSpiral) {\r\n                    if (nextvert == null) {\r\n                        dia = equaldistance;\r\n                        dept = cw * Math.atan((dia + distance) / Math.sqrt(newPoint.distanceSquaredPoint(root.node.location))); //why?\r\n                    } else {\r\n                        dia = Math.max(equaldistance, vert.node.actualBounds.width / 2 + nextvert.node.actualBounds.width / 2);\r\n                        dept = cw * Math.atan((dia + distance) / Math.sqrt(newPoint.distanceSquaredPoint(root.node.location))); //why?\r\n                    }\r\n                    angle += dept;\r\n                }\r\n            }\r\n\r\n            tmpR = vert.node.actualBounds.width;\r\n            nodesDealed.add(curRect);\r\n            //nodesDealed.add({point:new go.Point(vert.centerX, vert.centerY), radius:vert.node.actualBounds.width/2});\r\n            edge = nextedge;\r\n            fromVert = vert;\r\n            vert = nextvert;\r\n        }\r\n\r\n        if (vert == null) {\r\n            _do = false;\r\n        }\r\n    }\r\n\r\n    // console.log(root.node.data.key + \":total compute layout times:\" + count);\r\n    this.updateParts();\r\n\r\n    this.network = null;\r\n    if (tdDebug) {\r\n        console.log(\"spiral dolayout end \" + root.node.data.key);\r\n    }\r\n};\r\n\r\nSpiralLayout.prototype.commitLayout = function() {\r\n    this.network.vertexes.each(function(v) {\r\n        v.commit();\r\n    });\r\n    this.network.edges.each(function(v) {\r\n        v.commit();\r\n    });\r\n    if (tdDebug) {\r\n        console.log(\"spiral layout end \");\r\n    }\r\n    //this.invalidateLayout();\r\n};\r\n\r\n/**\r\n * @ignore\r\n * Compute the effective diameter of a Node.\r\n * @this {SpiralLayout}\r\n * @param {LayoutVertex} v\r\n * @return {number}\r\n */\r\nSpiralLayout.prototype.diameter = function(v) {\r\n    if (!v) return 0;\r\n    var b = v.bounds;\r\n    return Math.sqrt(b.width * b.width / 4 + b.height * b.height / 4);\r\n};\r\n\r\n/**\r\n * Gets or sets the radius distance.\r\n * The default value is NaN.\r\n * @name SpiralLayout#radius\r\n * @function.\r\n * @return {number}\r\n */\r\n\r\nObject.defineProperty(SpiralLayout.prototype, \"radius\", {\r\n    get: function() { return this._radius; },\r\n    set: function(val) {\r\n        if (typeof val !== \"number\") throw new Error(\"new value for SpiralLayout.radius must be a number, not: \" + val);\r\n        if (this._radius !== val) {\r\n            this._radius = val;\r\n            this.invalidateLayout();\r\n        }\r\n    }\r\n});\r\n\r\n/**\r\n * Gets or sets the spacing between nodes.\r\n * The default value is 100.\r\n * @name SpiralLayout#spacing\r\n * @function.\r\n * @return {number}\r\n */\r\nObject.defineProperty(SpiralLayout.prototype, \"spacing\", {\r\n    get: function() { return this._spacing; },\r\n    set: function(val) {\r\n        if (typeof val !== \"number\") throw new Error(\"new value for SpiralLayout.spacing must be a number, not: \" + val);\r\n        if (this._spacing !== val) {\r\n            this._spacing = val;\r\n            this.invalidateLayout();\r\n        }\r\n    }\r\n});\r\n\r\nfunction computeOffset(newR, newStartAngle) {\r\n    //console.log(\"newStartAngle:\"+newStartAngle);\r\n    var ctl2, dy, dx; //需要调整\r\n    if (newStartAngle >= 0 && newStartAngle <= 90) {\r\n        dy = newR * Math.sin(newStartAngle * Math.PI / 180);\r\n        dx = newR * Math.cos(newStartAngle * Math.PI / 180);\r\n        return [dx, dy];\r\n    } else if (newStartAngle > 90 && newStartAngle <= 180) {\r\n        dy = newR * Math.sin((180 - newStartAngle) * Math.PI / 180);\r\n        dx = newR * Math.cos((180 - newStartAngle) * Math.PI / 180);\r\n        return [-dx, dy];\r\n    } else if (newStartAngle > 180 && newStartAngle <= 270) {\r\n        dy = newR * Math.sin((newStartAngle - 180) * Math.PI / 180);\r\n        dx = newR * Math.cos((newStartAngle - 180) * Math.PI / 180);\r\n        return [-dx, -dy];\r\n    } else if (newStartAngle > 270 && newStartAngle <= 360) {\r\n        dy = newR * Math.sin((360 - newStartAngle) * Math.PI / 180);\r\n        dx = newR * Math.cos((360 - newStartAngle) * Math.PI / 180);\r\n        return [dx, -dy];\r\n    }\r\n}\r\n\r\nfunction computeControlPoint(p1, p2, p3) {\r\n\r\n    var result;\r\n    result = arguments[3] ? arguments[3] : triangleCircle(p1, p2, p3);\r\n    var radius = result[0];\r\n    var cent = new go.Point(result[1], result[2]);\r\n\r\n    //起始节点的弧度\r\n    var sweep = Math.abs(cent.directionPoint(p1) - cent.directionPoint(p3));\r\n    sweep = sweep > 180 ? 360 - sweep : sweep;\r\n    //console.log(\"sweep:\"+sweep);\r\n    var newR = radius / Math.cos(sweep / 3 * Math.PI / 180);\r\n    var geo = new go.Geometry(go.Geometry.Line);\r\n    geo.startX = cent.x;\r\n    geo.startY = cent.y;\r\n    geo.endX = p1.x;\r\n    geo.endY = p1.y;\r\n    geo.rotate(sweep / 3, cent.x, cent.y); //相对圆心旋转3分之1弧度\r\n    var newStartAngle = cent.direction(geo.endX, geo.endY);\r\n    var ctl1;\r\n    result = computeOffset(newR, newStartAngle);\r\n    ctl1 = cent.copy().offset(result[0], result[1]);\r\n\r\n    geo.rotate(sweep / 3, cent.x, cent.y); //相对圆心旋转3分之1弧度\r\n    newStartAngle = cent.direction(geo.endX, geo.endY);\r\n\r\n    var ctl2; //需要调整\r\n    result = computeOffset(newR, newStartAngle);\r\n    ctl2 = cent.copy().offset(result[0], result[1]);\r\n\r\n    return [ctl1, ctl2];\r\n}\r\n\r\n/**\r\n * Gets or sets whether the spiral should go clockwise or counter-clockwise.\r\n * The default value is true.\r\n * @name SpiralLayout#clockwise\r\n * @function.\r\n * @return {boolean}\r\n */\r\nObject.defineProperty(SpiralLayout.prototype, \"clockwise\", {\r\n    get: function() { return this._clockwise; },\r\n    set: function(val) {\r\n        if (typeof val !== \"boolean\") throw new Error(\"new value for SpiralLayout.clockwise must be a boolean, not: \" + val);\r\n        if (this._clockwise !== val) {\r\n            this._clockwise = val;\r\n            this.invalidateLayout();\r\n        }\r\n    }\r\n});\r\n\r\n/**\r\n 处理：如三点共线，则返回false；否则，返回true，并将计算得到的圆心与半径存放在center和radius众返回。\r\n    */\r\nfunction triangleCircle(p1, p2, p3) {\r\n    //检查三点是否共线\r\n    if (isThreePointsOnOneLine(p1, p2, p3))\r\n        return false;\r\n\r\n    var x1, x2, x3, y1, y2, y3, radius;\r\n\r\n    x1 = p1.x;\r\n    x2 = p2.x;\r\n    x3 = p3.x;\r\n    y1 = p1.y;\r\n    y2 = p2.y;\r\n    y3 = p3.y;\r\n\r\n    //求外接圆半径\r\n    var a = Math.sqrt((x1 - x2) * (x1 - x2) + (y1 - y2) * (y1 - y2));\r\n    var b = Math.sqrt((x1 - x3) * (x1 - x3) + (y1 - y3) * (y1 - y3));\r\n    var c = Math.sqrt((x2 - x3) * (x2 - x3) + (y2 - y3) * (y2 - y3));\r\n    var p = (a + b + c) / 2;\r\n    var S = Math.sqrt(p * (p - a) * (p - b) * (p - c));\r\n    radius = a * b * c / (4 * S);\r\n\r\n    //求外接圆圆心\r\n    var t1 = x1 * x1 + y1 * y1;\r\n    var t2 = x2 * x2 + y2 * y2;\r\n    var t3 = x3 * x3 + y3 * y3;\r\n    var temp = x1 * y2 + x2 * y3 + x3 * y1 - x1 * y3 - x2 * y1 - x3 * y2;\r\n    var x = (t2 * y3 + t1 * y2 + t3 * y1 - t2 * y1 - t3 * y2 - t1 * y3) / temp / 2;\r\n    var y = (t3 * x2 + t2 * x1 + t1 * x3 - t1 * x2 - t2 * x3 - t3 * x1) / temp / 2;\r\n\r\n\r\n    var result = [];\r\n    result = [radius, x, y];\r\n    return result;\r\n}\r\n\r\n/**\r\n 判断3个点是否共线\r\n    */\r\nfunction isThreePointsOnOneLine(p1, p2, p3) {\r\n    return false;\r\n}\r\n\r\n\r\nmodule.exports = SpiralLayout;\n\n\n// WEBPACK FOOTER //\n// ./src/layout/SpiralLayout.js","// require('./core/core.controller')(Trtd);\r\n// import * as go from 'gojs';\r\nvar SpiralLayout = require('../layout/SpiralLayout');\r\nvar helpers = require('../helpers/helpers.gojs')\r\n// var commonFun = require('./commonFun')\r\nvar TRTD_BASE = require('./trtd').Trtd\r\nlet lang = require('../assets/localization');\r\nvar createNodeTemplate = require('../nodeTemplate/createNodeTemplate')\r\nvar createPictureSingleNodeTemplate = require('../nodeTemplate/createPictureSingleNodeTemplate')\r\nvar createPictureNodeTemplate = require('../nodeTemplate/createPictureNodeTemplate')\r\nvar createTextNodeTemplate = require('../nodeTemplate/createTextNodeTemplate')\r\nvar createNodeSvgTemplate = require('../nodeTemplate/createNodeSvgTemplate')\r\n\r\nvar createTianpanLink = require('../linkTemplate/createTianpanLink')\r\n\r\nvar $ = go.GraphObject.make;\r\n\r\nvar colorMap = [\r\n    \"#FFBFBF\",\r\n    \"#E9BFFF\",\r\n    \"#D1FF72\",\r\n    \"#00A2E8\",\r\n    \"#99D9EA\"\r\n];\r\n\r\n\r\nclass Trtd  extends TRTD_BASE {\r\n\tconstructor(div, config){\r\n        super(div, config)\r\n\t\tthis.config = config;\r\n\t\tthis.modelChangedListener = config.modelChangedListener;\r\n\t\tthis.type = config.type;\r\n\t\tthis.diagram = {};\r\n        this.model = config.model;\r\n        this.initDiagramBase(div, config); // 基类初始化diagram\r\n\t\t// 初始化diagram\r\n        this.initDiagram(div, config);\r\n        // this.diagram.__trtd = this;\r\n\t\tthis.initListener();\r\n\t\t// Then you will need to construct a Model (usually a GraphLinksModel) for the Diagram, initialize its data by setting its Model.nodeDataArray and other properties, and then set the diagram's model.\r\n        if(this.model){\r\n            this.initModel();\r\n        }\r\n\t}\r\n/**\r\n * method 初始化diagram\r\n * @param {*} div \r\n * @param {*} config \r\n */\r\n\tinitDiagram(div, config){\r\n        var defaultConfig = {\r\n            // layout: go.GraphObject.make(SpiralLayout, {\r\n            //     isRealtime: false,\r\n            //     radius: NaN,\r\n            //     clockwise: true,\r\n            //     //,spacing:100,\r\n            //     isInitial: true\r\n            // }) \r\n          }\r\n        var diagramConfig = Object.assign(defaultConfig, config.diagramConfig);\r\n        this.diagram.setProperties(diagramConfig);\r\n        this.addNodeTemplate();\r\n        // this.customMenu();\r\n \r\n        this.addLinkTemplate();\r\n        this.addGroupTemplate();\r\n    }\r\n    getTdData(){\r\n        return this.diagram.model.toJson()\r\n    }\r\n    // 以下两个方法控制菜单显示\r\n    getDefaultCustomMenuDivStr(){\r\n        return `\r\n        <ul>\r\n            <li trtd_action=\"addFollower\"><a class=\"i18n\" data-lang=\"insertsl\">插入同级节点</a></li>\r\n            <li trtd_action=\"startNewSpiral\"><a class=\"i18n\" data-lang=\"icn\">插入子节点</a></li>\r\n            <li trtd_action=\"apiDuplicateNode\"><a class=\"i18n\" data-lang=\"duplicateNode\">复制节点</a></li>\r\n            <li trtd_action=\"apiDeleteSelection\"><a class=\"i18n\" data-lang=\"remove\">删除</a></li>\r\n            <li trtd_action=\"orderChildNode\"><a class=\"i18n\" data-lang=\"ordernode\">子节点编号</a></li>\r\n            <li trtd_action=\"clearOrderChildNode\"><a class=\"i18n\" data-lang=\"clearordernode\">取消子节点编号</a></li>\r\n            <li trtd_action=\"clearNodeTextMenu\"><a class=\"i18n\" data-lang=\"emptynodetext\">清空节点文本</a></li>\r\n            <li trtd_action=\"apiInsertTianpanNode\"><a class=\"i18n\" data-lang=\"insertnodetianpan\">插入天盘节点</a></li>\r\n            <li trtd_action=\"addTextNode\"><a class=\"i18n\" data-lang=\"inserttext\">插入文本</a></li>\r\n            <li trtd_action=\"locateRootNodeMenu\"><a class=\"i18n\" data-lang=\"locaterootnode\">定位根节点</a></li>\r\n            <li trtd_action=\"showAllNodesMenu\"><a class=\"i18n\" data-lang=\"displayallnodes\">显示所有节点</a></li>\r\n            <li trtd_action=\"fixPictureMenu\"><a class=\"i18n\" data-lang=\"fixnode\">固定节点</a></li>\r\n            <li trtd_action=\"activePictureMenu\"><a class=\"i18n\" data-lang=\"cancelfix\">取消固定</a></li>\r\n\r\n            <li trtd_action=\"delYunpanAxis\"><a class=\"i18n\" data-lang=\"cancelfix\">删除 CTRL+DEL</a></li>\r\n            <li trtd_action=\"addYunpanAxis\"><a class=\"i18n\" data-lang=\"cancelfix\">增加 CTRL+X/Y</a></li>\r\n        </ul>\r\n        `\r\n    }\r\n    \r\n    getShowContextMenus(node){\r\n        var showIds = \"\"\r\n        if(node){\r\n            if(node.data.category == \"autoText\"){\r\n                return \"apiDeleteSelection\"\r\n            }\r\n            if(node.data.category == \"picGroup\"){\r\n                return \"apiDeleteSelection\"\r\n            }\r\n            if( node.data.category == \"8\"){\r\n                showIds = \"apiDeleteSelection,\";\r\n            }\r\n            if( node.data.category == \"text\"){\r\n                showIds = \"apiDeleteSelection,\" + \"apiDuplicateNode\";\r\n            }\r\n            if( node.data.category == \"3\"){\r\n                showIds = \"apiDeleteSelection,\";\r\n                if(node.selectable){\r\n                    showIds += \",fixPictureMenu\"\r\n                }else{\r\n                    showIds += \",activePictureMenu\"\r\n                }\r\n            }\r\n            if( node.data.category == \"0\" || node.data.category == \"1\" || node.data.category == \"2\" || node.data.category == \"\"){\r\n                showIds = \"apiDeleteSelection,apiDuplicateNode,addFollower,startNewSpiral,orderChildNode,clearOrderChildNode\";\r\n            }\r\n            if(node.data.category == \"yunpanx\"||node.data.category == \"yunpany\"){\r\n                showIds = \"delYunpanAxis,addYunpanAxis\";\r\n            }\r\n            // return \"addFollowerGround,\" + \"addNewCircle,\"+\"apiDeleteSelection\";\r\n        }else{\r\n            // return \"addFollowerGround\"\r\n            showIds = \"addTextNode,apiInsertTianpanNode\"\r\n        }\r\n        return showIds;\r\n    }\r\n\r\n    apiInsertTianpanNode(){\r\n        var myDiagram = this.diagram;\r\n        myDiagram.startTransaction();\r\n        var nodeData = {\r\n            \"key\":helpers.guid(), \"text\":\"双击编辑内容\", \"level\":0,\r\n         \"radius\":100,  \"fill\":\"white\", \"category\":\"0\", \r\n         \"strokeWidth\":2, \"stroke\":\"black\", \"font\":\"bold 18px 幼圆\", \"textStroke\":\"black\", \"newAdd\":true, \"angle\":5}\r\n        // var text = { text: message||lang.trans('blankText'), category: 'text' };\r\n        nodeData.loc = go.Point.stringify(myDiagram.lastInput.documentPoint);\r\n        myDiagram.model.addNodeData(nodeData);\r\n        myDiagram.commitTransaction()\r\n        // this.diagram.toolManager.clickCreatingTool.insertPart(this.diagram.lastInput.documentPoint);\r\n    }\r\n    fixPictureMenu(){\r\n        var myDiagram = this.diagram\r\n        // var node = myDiagram.selection.first();\r\n        var node = myDiagram.findPartAt(myDiagram.lastInput.documentPoint, false);\r\n        myDiagram.startTransaction();\r\n        myDiagram.model.setDataProperty(node.data, \"selectable\", node.data.selectable != undefined ? (!node.data.selectable) : false);\r\n        myDiagram.commitTransaction();\r\n    }\r\n\r\n    activePictureMenu(){\r\n        this.fixPictureMenu()\r\n    }\r\n    addTextNode(message){\r\n        console.log('eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee:');\r\n        var myDiagram = this.diagram;\r\n        myDiagram.startTransaction();\r\n        var text = { text: message||lang.trans('blankText'), category: 'autoText' };\r\n        text.loc = go.Point.stringify(myDiagram.lastInput.documentPoint);\r\n        myDiagram.model.addNodeData(text);\r\n        myDiagram.commitTransaction()\r\n    }\r\n    guid() {\r\n        function S4() {\r\n            return (((1+Math.random())*0x10000)|0).toString(16).substring(1);\r\n        }\r\n    return (S4()+S4()+\"-\"+S4()+\"-\"+S4()+\"-\"+S4()+\"-\"+S4()+S4()+S4());\r\n    }\r\n    \r\n\r\n    /**\r\n     * method 初始化model\r\n     */\r\n\tinitModel(model){\r\n        if(model){\r\n            this.model = model;\r\n        }\r\n        console.log('initModel')\r\n        var tmpModel = go.Model.fromJson(this.model);\r\n        if(tmpModel.modelData.currentType == 'dipan'){\r\n            tmpModel.nodeDataArray = tmpModel.nodeDataArray.filter((d)=>{\r\n                if(!d.isGroup){\r\n                    delete d.group\r\n                    return true;\r\n                }\r\n            })\r\n            // tmpModel.nodeDataArray = \r\n            tmpModel.linkDataArray=[]\r\n        }\r\n        if(!tmpModel.modelData.currentType){\r\n            tmpModel.modelData.currentType = this.type;\r\n        }\r\n        if([\"jin\",\"shui\",\"wheel\",\"huo\"].indexOf(this.type)>-1 ){\r\n            tmpModel.modelData.currentType = \"tianpan\"\r\n        }\r\n        console.log(\" tmpModel.modelData.currentType\")\r\n        this.diagram.layout.isInitial = false;\r\n        //randomUrl(tmpModel);\r\n        tmpModel.modelData.type = this.type\r\n        for(var i = 0;i<tmpModel.nodeDataArray.length;i++){\r\n            if(tmpModel.nodeDataArray[i].category == \"waveGroup\"){\r\n                if(!tmpModel.nodeDataArray[i].centerTextAngle){\r\n                    tmpModel.nodeDataArray[i].centerTextAngle = \"independent\"\r\n                }\r\n                if(!tmpModel.nodeDataArray[i].centerTextMode){\r\n                    tmpModel.nodeDataArray[i].centerTextMode = \"independent\"\r\n                }\r\n                if(!tmpModel.nodeDataArray[i].maxOlive){\r\n                    tmpModel.nodeDataArray[i].maxOlive = 50\r\n                }\r\n            }\r\n            if(tmpModel.nodeDataArray[i].category == \"yunGroup\"){\r\n                if(!tmpModel.nodeDataArray[i].shapeStrokes){\r\n                    tmpModel.nodeDataArray[i].shapeStrokes = [\"RGBA(237,28,36,0.3)\",\"RGBA(255,192,0,0.3)\",\"RGBA(255,255,0,0.3)\",\"RGBA(146,208,80,0.3)\",\"RGBA(192,200,250,0.3)\",\"RGBA(255,178,125,0.3)\",\"RGBA(209,110,210,0.3)\",\"RGBA(248,163,62,0.3)\",\"RGBA(248,161,164,0.3)\",\"RGBA(244,115,120,0.3)\"]\r\n                }\r\n                if(!tmpModel.nodeDataArray[i].beginSpark){\r\n                    tmpModel.nodeDataArray[i].beginSpark = \"line\"\r\n                }\r\n                if(tmpModel.nodeDataArray[i].showShape == null){\r\n                    tmpModel.nodeDataArray[i].showShape = true\r\n                }\r\n            }\r\n            if(tmpModel.nodeDataArray[i].category == \"shape\" && tmpModel.nodeDataArray[i].role == \"background\"){\r\n                tmpModel.nodeDataArray[i].visible = true\r\n            }\r\n            if(tmpModel.nodeDataArray[i].role && tmpModel.nodeDataArray[i].role.indexOf(\"labelText\") > -1 ){\r\n                tmpModel.nodeDataArray[i].movable = true;\r\n            }\r\n            if(tmpModel.nodeDataArray[i].category == \"labelGroup\"){\r\n                tmpModel.nodeDataArray[i].selectable = false\r\n            }\r\n        }\r\n        // tmpModel.modelData.version = Trtd.version\r\n        // console.log(\" tmpModel.modelData.version \",  tmpModel.modelData.version)\r\n        this.diagram.model = tmpModel;\r\n        // this.diagram.model.copyNodeDataFunction = function(object, model) {\r\n        //     console.log(\"copyNodeDataFunctioncopyNodeDataFunctioncopyNodeDataFunction\")\r\n        //     // if (object.isGroup) {\r\n        //     //     return null;\r\n        //     // }\r\n        //     // var outputObj = null;\r\n        //     var outputObj = JSON.parse(JSON.stringify(object))\r\n        //     // outputObj.level = 0;\r\n        //     // outputObj.next = undefined;\r\n        //     // outputObj.group = undefined;\r\n        //     // outputObj.prev = undefined;\r\n        //     // outputObj.isparent = undefined;\r\n        //     // outputObj.parent = undefined;\r\n        //     // outputObj.copiedKey = outputObj.key;\r\n        //     delete outputObj.key;\r\n        //     delete outputObj.__gohashid;\r\n        //     delete outputObj.points;\r\n        //     // if(object.category == \"autoText\" && object.role != \"freeText\"){\r\n        //     //     delete object.dimKey;\r\n        //     //     delete object.role;\r\n        //     //     delete object.subRole;\r\n        //     // }\r\n        //     return object;\r\n        // }\r\n        // configModel(myDiagram.model);\r\n        this.diagram.updateAllTargetBindings();\r\n        // this.diagram.animationManager.isEnabled = true\r\n        // this.saveModel()\r\n    }\r\n    loadModel(model){\r\n        // console.log(model)\r\n        // var node = this.diagram.selection.first()\r\n        // if(node){\r\n        //     this.diagram.commandHandler.scrollToPart(node)\r\n        // }\r\n        this.diagram.animationManager.isEnabled = false\r\n        this.initModel(model)\r\n    }\r\n    // addNodeFile(model){\r\n    //     console.log(model)\r\n    // }\r\n    /**\r\n     * method: 初始化监听方法\r\n     */\r\n\tinitListener(){\r\n\t\tconsole.log('initListener')\r\n    }\r\n\r\n    addGroupTemplate(){\r\n        // return function getGroupTemplate() {\r\n            this.diagram.groupTemplateMap.add(\"\", $(go.Group, \"Auto\", {\r\n                    layerName: \"Background\",\r\n                    selectable: false,\r\n                    pickable: false,\r\n                    locationSpot: go.Spot.Center,\r\n                    ungroupable: true,\r\n                    alignment: go.Spot.Center,\r\n                    click: function(d) {\r\n                        // alert('click group');\r\n                        // d.diagram.clearSelection();\r\n                    },\r\n                    contextClick: function(d) {\r\n                        // alert('click right group');\r\n                    },\r\n                    alignmentFocus: go.Spot.Center,\r\n                    // contextMenu: nodeContextMenu,\r\n                    selectionAdornmentTemplate: $(go.Adornment, \"Spot\",\r\n                        $(go.Panel, \"Auto\",\r\n                            $(go.Shape, 'Circle', { stroke: \"dodgerblue\", strokeWidth: 2, fill: null },\r\n                                new go.Binding(\"width\", \"\", function(v) {\r\n                                    var node = myDiagram.selection.first();\r\n                                    if (node instanceof go.Group) {\r\n                                        return node.actualBounds.width;\r\n                                    }\r\n                                }),\r\n                                new go.Binding(\"height\", \"\", function(v) {\r\n                                    var node = myDiagram.selection.first();\r\n                                    if (node instanceof go.Group) {\r\n                                        return node.actualBounds.height;\r\n                                    }\r\n                                })),\r\n                            //new go.Binding('wit')),\r\n                            $(go.Placeholder)\r\n                        ),\r\n                        $(go.Panel, \"Horizontal\", { alignment: go.Spot.Top, alignmentFocus: go.Spot.Bottom })\r\n                    ),\r\n                    copyable: false\r\n                }, {\r\n                    layout: $(SpiralLayout, {\r\n                        isRealtime: false,\r\n                        radius: NaN,\r\n                        clockwise: true,\r\n                        isInitial: false\r\n                    }),\r\n                    layoutConditions: go.Part.LayoutStandard & ~go.Part.LayoutNodeSized & ~go.Part.LayoutAdded\r\n                },\r\n                new go.Binding(\"location\", \"loc\", go.Point.parse).makeTwoWay(go.Point.stringify),\r\n                $(go.Panel, \"Auto\",\r\n                    $(go.Shape, \"Circle\", {\r\n                            name: \"SHAPE\",\r\n                            fill: \"rgba(212,230,188,0)\",\r\n                            stroke: null,\r\n                            // ,\r\n                            //width:300,\r\n                            //height:300,\r\n                            spot1: new go.Spot(0.01, 0.01),\r\n                            spot2: new go.Spot(0.99, 0.99)\r\n                        },\r\n                        new go.Binding(\"stroke\", \"stroke\", function(v) {\r\n                            return v instanceof go.Brush ? v.stroke : v;\r\n                        }).makeTwoWay(),\r\n                        new go.Binding(\"strokeWidth\", \"strokeWidth\", function(d) {\r\n                            return d;\r\n                        }).makeTwoWay(function(d) {\r\n                            return d;\r\n                        }),\r\n                        new go.Binding(\"figure\", \"figure\").makeTwoWay(),\r\n                        new go.Binding(\"desiredSize\", \"radius\", function(v) {\r\n                            //alert(v);\r\n        \r\n                            var radius = parseInt(v ? v : 100);\r\n                            var size = new go.Size(radius, radius);\r\n                            return size;\r\n                        }).makeTwoWay(function(v) {\r\n                            return v.width;\r\n                        })\r\n                    ),\r\n                    $(go.Placeholder, {\r\n                        // margin: tdSpiralMode == 'terse' ? -10 : 0\r\n                        margin: 0\r\n                    })\r\n                )\r\n            )\r\n        )\r\n    }\r\n    /**\r\n     * 添加节点模板\r\n     */\r\n    addNodeTemplate(){\r\n\r\n        var that = this;\r\n        var myDiagram = this.diagram\r\n        // var globalProperties = this.tdGetModelData(null, myDiagram.model,myDiagram); //获取所有全局属性到一个对象中,从localstorage中\r\n        //var layerThickness = myDiagram.model.modelData.layerThickness;\r\n        // var layerThickness = parseInt(globalProperties['layerThickness']);\r\n        // console.log(layerThickness)\r\n        // var tdDipanTextAngle = globalProperties['tdDipanTextAngle'];\r\n        // console.log(tdDipanTextAngle)\r\n\r\n        // myDiagram.nodeTemplateMap.add(\"dipan\", this.createDipanTemplate(layerThickness,tdDipanTextAngle));\r\n        // myDiagram.nodeTemplateMap.add(\"Root\", this.getDipanRootTemplate(layerThickness));\r\n        // myDiagram.nodeTemplateMap.add(\"text\", );\r\n        this.addNodeTemplateBase()\r\n        myDiagram.nodeTemplateMap.add(\"0\", createNodeTemplate(this.diagram));\r\n        myDiagram.nodeTemplateMap.add(\"1\", createNodeTemplate(this.diagram));\r\n        myDiagram.nodeTemplateMap.add(\"2\", createNodeTemplate(this.diagram));\r\n        myDiagram.nodeTemplateMap.add(\"3\", createPictureSingleNodeTemplate(this.diagram));\r\n        myDiagram.nodeTemplateMap.add(\"4\", createPictureNodeTemplate(this.diagram));\r\n        // myDiagram.nodeTemplateMap.add(\"text\", createTextNodeTemplate(this.diagram));\r\n        myDiagram.nodeTemplateMap.add(\"\", createNodeTemplate(this.diagram));\r\n\r\n        myDiagram.nodeTemplateMap.add(\"8\",createNodeSvgTemplate(this.diagram));\r\n\r\n        \r\n    }\r\n\r\n    addLinkTemplate(){\r\n        this.diagram.linkTemplateMap.add(\"\", createTianpanLink(this.diagram));\r\n        // myDiagram.linkTemplateMap.add(\"\", linkTemplate.getTianpanLink());\r\n    }\r\n\r\n    /***\r\n     * 将node(包括它的后代)设置为parent的第一个孩子. 如果parent是Node的后代，则不操作\r\n     * @param node go.Node Type\r\n     * @param parent go.Node Type\r\n     */\r\n    setNodeAsChildren(node, parent) {\r\n        if (isDescendant(parent, node)) {\r\n            //illegal action\r\n            return;\r\n        }\r\n        if (parent.data.isparent == node.data.key) {\r\n            return;\r\n        }\r\n\r\n        var diagram = node.diagram,\r\n            model = node.diagram.model;\r\n\r\n        model.startTransaction('setNodeAsChildren');\r\n        disconnectFromTreeStructure(node);\r\n\r\n        //add as the child of parent\r\n        if (parent.data.isparent) {\r\n            //if has children\r\n            var firstChild = diagram.findNodeForKey(parent.data.isparent);\r\n            model.setDataProperty(parent.data, 'isparent', node.data.key);\r\n            model.setDataProperty(firstChild.data, 'prev', node.data.key);\r\n            model.setDataProperty(node.data, 'next', firstChild.data.key);\r\n            model.setDataProperty(node.data, 'parent', parent.data.key);\r\n            // model.setDataProperty(node.data, 'fill', firstChild.data.fill);\r\n\r\n            var link = parent.findLinksTo(firstChild).first();\r\n            model.setToKeyForLinkData(link.data, node.data.key);\r\n            var newLink = model.copyLinkData(link.data);\r\n            newLink.from = node.data.key;\r\n            newLink.to = firstChild.data.key;\r\n            model.addLinkData(newLink);\r\n\r\n        } else {\r\n            //if it's a single node which has no children\r\n            model.setDataProperty(parent.data, 'isparent', node.data.key);\r\n            model.setDataProperty(node.data, 'next', null);\r\n            model.setDataProperty(node.data, 'parent', parent.data.key);\r\n            var newLink = { from: parent.data.key, to: node.data.key, level: parent.data.level + 1, isTreeLink: true };\r\n            // if (parent.findLinksInto().first()) {\r\n            //     newLink.strokeWidth = Math.max(1, parent.findLinksInto().first().data.strokeWidth - 0.5);\r\n            // } else {\r\n            //     newLink.strokeWidth = 4;\r\n            // }\r\n\r\n            newLink.strokeWidth = 2;\r\n\r\n            applyTheme2Link(newLink, node);\r\n            model.addLinkData(newLink);\r\n\r\n            var newGroup = {\r\n                isGroup: true,\r\n                group: parent.data.group,\r\n                parent: parent.data.key,\r\n                key: \"g_\" + parent.data.key,\r\n                level: parent.data.level\r\n            }\r\n            model.addNodeData(newGroup);\r\n            model.setDataProperty(parent.data, \"group\", newGroup.key);\r\n        }\r\n\r\n        //update group\r\n        var nodeGroup = node.containingGroup;\r\n        if (nodeGroup && nodeGroup.data.parent == node.data.key) {\r\n            model.setDataProperty(nodeGroup.data, 'group', parent.data.group);\r\n        } else {\r\n            if (node.data.parent == null && node.data.isparent != null) {\r\n                //add group for root node\r\n                addGroupForNode(node, parent.data.group);\r\n            } else {\r\n                model.setDataProperty(node.data, \"group\", parent.data.group);\r\n            }\r\n        }\r\n\r\n        //update level\r\n        var diff = node.data.level - parent.data.level - 1;\r\n        helpers.travelParts(node, function(part) {\r\n            model.setDataProperty(part.data, 'level', part.data.level - diff);\r\n        });\r\n        model.commitTransaction('setNodeAsChildren');\r\n    }\r\n\r\n    /***\r\n     * 将node(包括它的后代)设置为sibling的下一个兄弟\r\n     * @param node  go.Node Type\r\n     * @param sibling go.Node Type\r\n     */\r\n    setNodeAsSibling(node, sibling) {\r\n        if (isDescendant(sibling, node)) {\r\n            //illegal action\r\n            return;\r\n        }\r\n        if (sibling.data.next == node.data.key) {\r\n            return;\r\n        }\r\n    \r\n        var diagram = node.diagram,\r\n            model = node.diagram.model;\r\n    \r\n        model.startTransaction('setNodeAsSibling');\r\n        disconnectFromTreeStructure(node);\r\n    \r\n        //add as next brother of sibling\r\n        if (sibling.data.next != null) {\r\n            var nextNode = diagram.findNodeForKey(sibling.data.next);\r\n            model.setDataProperty(sibling.data, 'next', node.data.key);\r\n            model.setDataProperty(node.data, 'next', nextNode.data.key);\r\n            model.setDataProperty(node.data, 'prev', sibling.data.key);\r\n            model.setDataProperty(nextNode.data, 'prev', node.data.key);\r\n            model.setDataProperty(node.data, 'parent', sibling.data.parent);\r\n            // model.setDataProperty(node.data, 'fill', sibling.data.fill);\r\n    \r\n            var link = sibling.findLinksTo(nextNode).first();\r\n            model.setToKeyForLinkData(link.data, node.data.key);\r\n            var newLink = model.copyLinkData(link.data);\r\n            newLink.from = node.data.key;\r\n            newLink.to = nextNode.data.key;\r\n            model.addLinkData(newLink);\r\n        } else {\r\n            model.setDataProperty(sibling.data, 'next', node.data.key);\r\n            model.setDataProperty(node.data, 'next', null);\r\n            model.setDataProperty(node.data, 'prev', sibling.data.key);\r\n            model.setDataProperty(node.data, 'parent', sibling.data.parent);\r\n            // console.log(\"sibling.data.fill\",sibling.data.fill)\r\n            model.setDataProperty(node.data, 'fill', sibling.data.fill);\r\n    \r\n            var preLink = sibling.findLinksInto().first();\r\n            var newLink = model.copyLinkData(preLink.data);\r\n            newLink.from = sibling.data.key;\r\n            newLink.to = node.data.key;\r\n            model.addLinkData(newLink);\r\n        }\r\n    \r\n        //update level\r\n        var diff = node.data.level - sibling.data.level;\r\n        helpers.travelParts(node, function(part) {\r\n            model.setDataProperty(part.data, 'level', part.data.level - diff);\r\n        });\r\n    \r\n        //update group\r\n        var nodeGroup = node.containingGroup;\r\n        var parent = diagram.findNodeForKey(sibling.data.parent);\r\n        if (nodeGroup && nodeGroup.data.parent == node.data.key) {\r\n            model.setDataProperty(node.containingGroup.data, 'group', parent.data.group);\r\n        } else {\r\n            if (node.data.parent == null && node.data.isparent != null) {\r\n                //add group for root node\r\n                addGroupForNode(node, parent.data.group);\r\n            } else {\r\n                model.setDataProperty(node.data, \"group\", parent.data.group);\r\n            }\r\n        }\r\n        if (parent && parent.containingGroup) {\r\n            var parentGroup = parent.containingGroup;\r\n            if (parentGroup) {\r\n                parentGroup.layout.isOngoing = true;\r\n                parentGroup.layout.isValidLayout = false;\r\n            }\r\n        }\r\n        model.commitTransaction('setNodeAsSibling');\r\n    }\r\n\r\n\r\n    /***\r\n     * 将node(包括它的后代)设置为parent的第一个孩子. 如果parent是Node的后代，则不操作\r\n     * @param node go.Node Type\r\n     * @param parent go.Node Type\r\n     */\r\n    setNodeAsChildren(node, parent) {\r\n        if (isDescendant(parent, node)) {\r\n            //illegal action\r\n            return;\r\n        }\r\n        if (parent.data.isparent == node.data.key) {\r\n            return;\r\n        }\r\n\r\n        var diagram = node.diagram,\r\n            model = node.diagram.model;\r\n\r\n        model.startTransaction('setNodeAsChildren');\r\n        disconnectFromTreeStructure(node);\r\n\r\n        //add as the child of parent\r\n        if (parent.data.isparent) {\r\n            //if has children\r\n            var firstChild = diagram.findNodeForKey(parent.data.isparent);\r\n            model.setDataProperty(parent.data, 'isparent', node.data.key);\r\n            model.setDataProperty(firstChild.data, 'prev', node.data.key);\r\n            model.setDataProperty(node.data, 'next', firstChild.data.key);\r\n            model.setDataProperty(node.data, 'parent', parent.data.key);\r\n            // model.setDataProperty(node.data, 'fill', firstChild.data.fill);\r\n\r\n            var link = parent.findLinksTo(firstChild).first();\r\n            model.setToKeyForLinkData(link.data, node.data.key);\r\n            var newLink = model.copyLinkData(link.data);\r\n            newLink.from = node.data.key;\r\n            newLink.to = firstChild.data.key;\r\n            model.addLinkData(newLink);\r\n\r\n        } else {\r\n            //if it's a single node which has no children\r\n            model.setDataProperty(parent.data, 'isparent', node.data.key);\r\n            model.setDataProperty(node.data, 'next', null);\r\n            model.setDataProperty(node.data, 'parent', parent.data.key);\r\n            var newLink = { from: parent.data.key, to: node.data.key, level: parent.data.level + 1, isTreeLink: true };\r\n            // if (parent.findLinksInto().first()) {\r\n            //     newLink.strokeWidth = Math.max(1, parent.findLinksInto().first().data.strokeWidth - 0.5);\r\n            // } else {\r\n            //     newLink.strokeWidth = 4;\r\n            // }\r\n\r\n            newLink.strokeWidth = 2;\r\n\r\n            applyTheme2Link(newLink, node);\r\n            model.addLinkData(newLink);\r\n\r\n            var newGroup = {\r\n                isGroup: true,\r\n                group: parent.data.group,\r\n                parent: parent.data.key,\r\n                key: \"g_\" + parent.data.key,\r\n                level: parent.data.level\r\n            }\r\n            model.addNodeData(newGroup);\r\n            model.setDataProperty(parent.data, \"group\", newGroup.key);\r\n        }\r\n\r\n        //update group\r\n        var nodeGroup = node.containingGroup;\r\n        if (nodeGroup && nodeGroup.data.parent == node.data.key) {\r\n            model.setDataProperty(nodeGroup.data, 'group', parent.data.group);\r\n        } else {\r\n            if (node.data.parent == null && node.data.isparent != null) {\r\n                //add group for root node\r\n                addGroupForNode(node, parent.data.group);\r\n            } else {\r\n                model.setDataProperty(node.data, \"group\", parent.data.group);\r\n            }\r\n        }\r\n\r\n        //update level\r\n        var diff = node.data.level - parent.data.level - 1;\r\n        helpers.travelParts(node, function(part) {\r\n            model.setDataProperty(part.data, 'level', part.data.level - diff);\r\n        });\r\n        model.commitTransaction('setNodeAsChildren');\r\n    }\r\n\r\n\r\n    // tdGetModelData(name,model) { //获取盘的model.modelData中的全局属性 \r\n    //     // if(myDiagram1){\r\n    //     //     myDiagram = myDiagram1\r\n    //     // }\r\n    //     var myDiagram = this.diagram\r\n    //     var  model = myDiagram.model\r\n    //     var defaultVal = {\r\n    //         currentType: 'tianpan',\r\n    //         currentThemeID: 0,\r\n    //         layerThickness: 100,\r\n    //         splitLayer: 1,\r\n    //         layout: 'inner',\r\n    //         tdDipanTextAngle: 'xuanzhuan'\r\n    //     };\r\n    //     console.log(\"getRootNodeData1111111111111111111111\")\r\n    //     var root = getRootNodeData(model);\r\n    //     if (typeof(name) != 'undefined' && name != null) { //返回指定的属性值\r\n    //         if (root) {\r\n    //             return root[name] || model.modelData[name] || defaultVal[name]\r\n    //         } else {\r\n    //             return model.modelData[name] || defaultVal[name];\r\n    //         }\r\n    //     }\r\n    //     //返回所有属性值\r\n    //     if (root) {\r\n    //         for (var key in defaultVal) {\r\n    //             if (root[key]) {\r\n    //                 defaultVal[key] = root[key];\r\n    //             } else {\r\n    //                 if (model.modelData && model.modelData[key]) {\r\n    //                     defaultVal[key] = model.modelData[key];\r\n    //                 }\r\n    //             }\r\n    //         }\r\n    //     } else {\r\n    //         for (var key in defaultVal) {\r\n    //             if (model.modelData && model.modelData[key]) {\r\n    //                 defaultVal[key] = model.modelData[key];\r\n    //             }\r\n    //         }\r\n    //     }\r\n    //     return defaultVal;\r\n    // }\r\n    deleteSelection (e) {\r\n        var myDiagram = this.diagram;\r\n        var cmd = myDiagram.commandHandler;\r\n        var node = myDiagram.selection.first();\r\n        \r\n        if (!node) {\r\n            return;\r\n        }\r\n        // var nodeCopy = JSON.parse(JSON.stringify(node.data))\r\n        if (node instanceof go.Group) {\r\n            return;\r\n        }\r\n        if (node.data.key == 1 || node.data.key == 'g_1') {\r\n            //root node or root group\r\n            return;\r\n        }\r\n    \r\n        var locateNode = null;\r\n        var tempArray = [\"next\",\"prev\",\"parent\"]\r\n        for(var i=0;i<tempArray.length;i++){\r\n            if(node.data[tempArray[i]]){\r\n                locateNode = myDiagram.findNodeForKey(node.data[tempArray[i]])\r\n                break;\r\n            }\r\n        }\r\n        // if (node.findNodesOutOf().first()) {\r\n        //     locateNode = node.findNodesOutOf().first();\r\n        // } else if (node.findNodesInto().first()) {\r\n        //     locateNode = node.findNodesInto().first();\r\n        // }\r\n    \r\n        myDiagram.startTransaction(\"deleteSelection1\");\r\n        try {\r\n    \r\n            if (node instanceof go.Link) {\r\n                return;\r\n            }\r\n            myDiagram.startTransaction('sub');\r\n            this.deleteNode(node, e);\r\n    \r\n            myDiagram.commitTransaction('sub');\r\n            // myDiagram.model.removeNodeData(node.data);\r\n            go.CommandHandler.prototype.deleteSelection.call(cmd);\r\n    \r\n            // myDiagram.updateAllTargetBindings();\r\n    \r\n        } catch (ex) {\r\n            console.log(ex);\r\n            myDiagram.commitTransaction(\"deleteSelection1\");\r\n        }\r\n        // myDiagram.updateAllTargetBindings();\r\n        myDiagram.commitTransaction(\"deleteSelection1\");\r\n        if (locateNode) {\r\n            myDiagram.select(locateNode);\r\n        }\r\n\r\n    }\r\n    //删除节点\r\n    deleteNode(node, e) {\r\n        console.log(\"deleteNodedeleteNodedeleteNodedeleteNode\")\r\n        var myDiagram = this.diagram;\r\n        var mainNode = null;\r\n        if (node instanceof go.Group) {\r\n            //查找第一个节点\r\n            node.memberParts.each(function(n) {\r\n                if (n.data.isparent) {\r\n                    mainNode = n;\r\n                }\r\n            })\r\n        }\r\n        node = mainNode == null ? node : mainNode;\r\n        if (node instanceof go.Node) {\r\n            var preNode = node.findNodesInto().first() ? node.findNodesInto().first() : null;\r\n            var nextNode = node.data.next ? myDiagram.findNodeForKey(node.data.next) : null;\r\n            if (nextNode) {\r\n                var nextNodeLink = nextNode.findLinksInto().first();\r\n            } else {\r\n                var nextNodeLink = null;\r\n            }\r\n\r\n            var intoLink = node.findLinksInto().first();\r\n            var tmpNodeData = {};\r\n            // _.extendOwn(tmpNodeData, node.data);\r\n            // tmpNodeData = helpers.extend(tmpNodeData, node.data);\r\n            tmpNodeData = JSON.parse(JSON.stringify(node.data));\r\n            var oldlink = node.findLinksInto().first() ? node.findLinksInto().first().data : null;\r\n            var link = {};\r\n            // link = _.extendOwn(link, oldlink);\r\n            // link = helpers.extend(link, oldlink);\r\n            delete oldlink.points;\r\n            link = JSON.parse(JSON.stringify(oldlink))\r\n            delete link.__gohashid;\r\n            delete link.points;\r\n            if (node.data.group) {\r\n                var nodeGroup = myDiagram.findNodeForKey(node.data.group);\r\n                // var nodeGroupData = nodeGroup.data;\r\n            } else {\r\n                var nodeGroup = null;\r\n                var nodeGroupData = null;\r\n            }\r\n\r\n            //如果不是根节点,除了根节点都有一条入边\r\n            // myDiagram.startTransaction(\"changeLinks\");\r\n            try {\r\n                if (node.data.isparent) {\r\n                    var nodes = [],\r\n                        groups = [],\r\n                        mylinks = [];\r\n                    myDiagram.nodes.each(function(n) {\r\n                        if (n.isMemberOf(nodeGroup) && n.data.key != node.data.key) {\r\n                            nodes.push(n.data);\r\n                            if (n.findLinksInto().count > 0) {\r\n                                mylinks.push(n.findLinksInto().first().data);\r\n                            }\r\n\r\n                        }\r\n                    });\r\n\r\n                    if (mainNode) {\r\n                        nodes.push(node.data);\r\n                    }\r\n                    myDiagram.model.removeNodeDataCollection(nodes);\r\n                    myDiagram.model.removeLinkDataCollection(mylinks);\r\n                    myDiagram.model.removeNodeData(nodeGroup.data);\r\n                }\r\n\r\n                if (preNode != null) {\r\n                    ////如果是父节点，则删除所有子孙节点,包括group\r\n\r\n                    //当前节点为第一个子节点\r\n                    if (preNode.data.key == tmpNodeData.parent) {\r\n                        //如果当前节点是最后一个子节点\r\n                        if (nextNode == null) {\r\n\r\n                            var parGroup = myDiagram.findNodeForKey(preNode.data.group);\r\n                            var grandNode = myDiagram.findNodeForKey(preNode.data.parent);\r\n                            if(preNode.data.category!==\"Root\"){//zyy增加判断\r\n                                if (grandNode) {\r\n                                    myDiagram.model.setDataProperty(preNode.data, \"group\", grandNode.data.group);\r\n                                } else {\r\n                                    if(parGroup && parGroup.data.group){\r\n                                        myDiagram.model.setDataProperty(preNode.data, \"group\", parGroup.data.group);\r\n                                    }else{\r\n                                        myDiagram.model.setDataProperty(preNode.data, \"group\", undefined);\r\n                                    }\r\n                                }\r\n                            }\r\n\r\n                            //父节点的isparent属性\r\n                            myDiagram.model.setDataProperty(preNode.data, \"isparent\", undefined);\r\n                            //var parGroup = myDiagram.findNodeForKey(preNode.data.group);\r\n                            if (parGroup) {\r\n                                myDiagram.model.removeNodeData(parGroup.data);\r\n                            }\r\n                        } else {\r\n                            link.from = preNode.data.key;\r\n                            link.to = nextNode.data.key;\r\n                            myDiagram.model.setDataProperty(nextNode.data, \"prev\", undefined);\r\n                            myDiagram.model.addLinkData(link);\r\n                            myDiagram.model.setDataProperty(myDiagram.model.findNodeDataForKey(tmpNodeData.parent), \"isparent\", nextNode.data.key);\r\n\r\n                        }\r\n                    } else {\r\n                        //\r\n                        myDiagram.model.setDataProperty(preNode.data, \"next\", nextNode == null ? null : nextNode.data.key);\r\n\r\n                        if (nextNode != null) {\r\n                            link.from = preNode.data.key;\r\n                            link.to = nextNode.data.key;\r\n                            myDiagram.model.setDataProperty(nextNode.data, \"prev\", preNode.data.key);\r\n                            myDiagram.model.addLinkData(link);\r\n                        }\r\n                    }\r\n\r\n                    //var parLink = node.findLinksInto().first();\r\n                    if (intoLink) {\r\n                        myDiagram.model.removeLinkData(intoLink.data);\r\n                    }\r\n                    if (nextNodeLink) {\r\n                        myDiagram.model.removeLinkData(nextNodeLink.data);\r\n                    }\r\n                }\r\n            } catch (ex) {\r\n                console.log(ex.message);\r\n            }\r\n\r\n        }\r\n        myDiagram.isModified = true;\r\n    }\r\n\r\n    addLevelNodeData(node) {\r\n        var isautolayout = window.localStorage.getItem('isautolayout') == null ? true : window.localStorage.getItem('isautolayout') == 'true';\r\n        // var isautoselect =  window.localStorage.getItem('isautoselect') == null?true:window.localStorage.getItem('isautoselect') == 'true';\r\n        var myDiagram = node.diagram;\r\n        var currentType = 'tianpan';\r\n        var toKey = node.data.next;\r\n        //delete the next link\r\n    \r\n        var nextkey = (myDiagram.model.nodeDataArray.length + 1).toString();\r\n        //var follower = {key: nextkey, text: nextkey, color: \"yellow\"};\r\n    \r\n        var follower = { key: nextkey, text: lang.trans(\"dce\"), color: \"yellow\" };\r\n        myDiagram.model.makeNodeDataKeyUnique(follower);\r\n        nextkey = follower.key;\r\n        var nextnode = null;\r\n        var nextlink = null;\r\n        var group = myDiagram.model.findNodeDataForKey(node.data.parent).group;\r\n        //找到下一个子节点\r\n        node.findNodesOutOf().each(function(n) {\r\n            if (n.data.level == node.data.level) {\r\n                nextnode = n;\r\n            }\r\n        });\r\n    \r\n        var nextlink = null;\r\n        //找到下一条边\r\n        node.findLinksOutOf().each(function(l) {\r\n            if (l.data.level == node.data.level) {\r\n                nextlink = l;\r\n            }\r\n        });\r\n        //ControlAutoLayout(false);\r\n        myDiagram.model.startTransaction();\r\n    \r\n        follower = applyTheme2Node(follower, node);\r\n        //delete the next link\r\n        var deleteLink = null;\r\n    \r\n        //if has next node\r\n        if (nextnode != null) {\r\n            follower.next = nextnode.data.key;\r\n            myDiagram.model.setDataProperty(nextnode.data, \"prev\", follower.key);\r\n        }\r\n    \r\n        if (group) {\r\n            follower.group = group;\r\n        }\r\n    \r\n    \r\n        follower.level = node.data.level;\r\n        if (currentType == \"tianpan\") {\r\n            follower.radius = node.data.radius;\r\n            //follower.fill = colorMap[follower.level % 5];\r\n            follower.fill = node.data.fill;\r\n        } else {\r\n            follower.radius = node.data.radius;\r\n            follower.fill = node.data.fill;\r\n            //follower.fill =go.Brush.randomColor(128, 240);\r\n            follower.dangle = node.data.dangle;\r\n            follower.dradius = node.data.dradius;\r\n            follower.sweep = node.data.sweep;\r\n            follower.layerThickness = node.data.layerThickness || 100;\r\n            follower.tdDipanTextAngle = node.data.tdDipanTextAngle || 'xuanzhuan';\r\n        }\r\n        follower.parent = node.data.parent;\r\n        follower.prev = node.data.key;\r\n        follower.strokeWidth = node.data.strokeWidth;\r\n        follower.stroke = node.data.stroke;\r\n        follower.font = node.data.font;\r\n        //follower.font = node.data.font;\r\n        follower.textStroke = node.findObject(\"TEXT\").stroke;\r\n        if (node.data.figure) {\r\n            follower.figure = node.data.figure;\r\n        }\r\n        follower.loc = node.data.loc;\r\n        if (currentType == 'tianpan') {\r\n    \r\n            var nextLocation = node.location.copy();\r\n            if (node.data.parent) {\r\n                var parentNode = myDiagram.findNodeForKey(node.data.parent);\r\n                if (parentNode) {\r\n                    nextLocation = computeNextLoc(node, parentNode);\r\n                }\r\n            }\r\n            follower.loc = go.Point.stringify(nextLocation);\r\n    \r\n        }\r\n        if (node.data.width) {\r\n            follower.width = node.data.width;\r\n        }\r\n        if (node.data.height) {\r\n            follower.height = node.data.height;\r\n        }\r\n        follower.category = node.data.category;\r\n        follower.newAdd = true;\r\n        // add a new node\r\n        myDiagram.model.addNodeData(follower);\r\n    \r\n        // add a link from the selected node to the new node\r\n        var linkToFollower = { from: node.data.key, to: follower.key };\r\n        linkToFollower.level = node.data.level;\r\n        linkToFollower.color = follower.fill;\r\n        linkToFollower.isTreeLink = true;\r\n        linkToFollower = applyTheme2Link(linkToFollower, node);\r\n    \r\n        // linkToFollower.strokeWidth = node.data.level == 1 ? 4 : Math.max(1, 3 - (linkToFollower.level - 1) * 0.5);\r\n        linkToFollower.strokeWidth = 2;\r\n        if (node.findLinksInto() && node.findLinksInto().first()) {\r\n            linkToFollower.color = node.findLinksInto().first().data.color;\r\n            linkToFollower.strokeWidth = node.findLinksInto().first().data.strokeWidth;\r\n            linkToFollower.toArrow = node.findLinksInto().first().data.toArrow;\r\n            linkToFollower.strokeDashArray = node.findLinksInto().first().data.strokeDashArray;\r\n        } else {\r\n            linkToFollower = applyTheme2Link(linkToFollower, node);\r\n        }\r\n        if (currentType == 'dipan') {\r\n            if (node.data.category == 'Root' || node.data.category == 'dipan') {\r\n                linkToFollower.category = 'dipan';\r\n            }\r\n        }\r\n        myDiagram.model.addLinkData(linkToFollower, node);\r\n    \r\n        myDiagram.model.setDataProperty(node.data, \"next\", nextkey);\r\n        if (nextlink != null) {\r\n            var copyLink = {};\r\n            // _.extendOwn(copyLink, nextlink.data);\r\n            // copyLink = helpers.extend(copyLink, nextlink.data);\r\n            delete nextlink.data.points\r\n            copyLink = JSON.parse(JSON.stringify(nextlink.data));\r\n\r\n            delete copyLink.__gohashid;\r\n            delete copyLink.points;\r\n            copyLink.from = follower.key;\r\n            copyLink.to = nextlink.data.to;\r\n            myDiagram.model.removeLinkData(nextlink.data);\r\n            myDiagram.model.addLinkData(copyLink);\r\n        }\r\n        myDiagram.model.commitTransaction();\r\n        myDiagram.isModified = true;\r\n        return follower;\r\n    }\r\n\r\n    addFollower(e, iskeyboard) {\r\n        if(!e){\r\n            var e = this.diagram.lastInput\r\n        }\r\n        var myDiagram = e.diagram;\r\n        var node = myDiagram.selection.first();\r\n        if (!node) return;\r\n        var diagram = node.diagram;\r\n        // var isautolayout = window.localStorage.getItem('isautolayout') == null ? true : window.localStorage.getItem('isautolayout') == 'true';\r\n        var isautolayout = true\r\n        if (node === null || !(node instanceof go.Node) || node instanceof go.Group) return;\r\n        if (node.findLinksInto().count == 0) return;\r\n        if (myDiagram.toolManager.textEditingTool.isActive) {\r\n            var tb = myDiagram.selection.first().findObject('TEXT');\r\n            tb.text = myDiagram.toolManager.textEditingTool.currentTextEditor.innerText;\r\n            myDiagram.toolManager.textEditingTool.stopTool();\r\n        }\r\n        if (!isautolayout) {\r\n            ControlAutoLayout(e, false);\r\n        } else {\r\n            if (node.data.level >= 3) {\r\n                ControlAutoLayout(e, false);\r\n                autoLayoutPart(node);\r\n            } else {\r\n                ControlAutoLayout(e, true);\r\n            }\r\n        }\r\n    \r\n        myDiagram.model.startTransaction('all');\r\n    \r\n        var follower = this.addLevelNodeData(node);\r\n        myDiagram.model.commitTransaction('all');\r\n    \r\n        if (typeof iskeyboard != 'undefined' && iskeyboard == true) { // check whether is a keyboard trigger the action\r\n            var newnode = diagram.findNodeForData(follower);\r\n            if (newnode) {\r\n                diagram.select(newnode);\r\n            }\r\n    \r\n            //myDiagram.scale = 0.6588944708324703;\r\n            myDiagram.isModified = true;\r\n    \r\n            var tb = myDiagram.selection.first().findObject('TEXT');\r\n            // // console.log(tb)\r\n            if (tb) myDiagram.commandHandler.editTextBlock(tb);\r\n            helpers.simulateEnterWithAlt(e);\r\n        }\r\n    }\r\n\r\n    startNewSpiral(iskeyboard) {\r\n        var myDiagram = this.diagram;\r\n        var e = myDiagram.lastInput;\r\n        var node = myDiagram.selection.first();\r\n        if (!node) return;\r\n        var diagram = node.diagram;\r\n        // var isautolayout = window.localStorage.getItem('isautolayout') == null ? true : window.localStorage.getItem('isautolayout') == 'true';\r\n        var isautolayout = true\r\n        // var isautoselect =  window.localStorage.getItem('isautoselect') == null?true:window.localStorage.getItem('isautoselect') == 'true';\r\n        if (node === null || !(node instanceof go.Node) || node instanceof go.Group) return;\r\n    \r\n        if (node.data.isparent && myDiagram.findNodeForKey(node.data.isparent) && !myDiagram.findNodeForKey(node.data.isparent).visible) {\r\n            return;\r\n        }\r\n        if (!isautolayout) {\r\n            ControlAutoLayout(e, false);\r\n        } else {\r\n            if (node.data.level >= 2) {\r\n                ControlAutoLayout(e, false);\r\n                autoLayoutPart(node);\r\n            } else {\r\n                ControlAutoLayout(e, true);\r\n            }\r\n        }\r\n        myDiagram.startTransaction();\r\n        myDiagram.startTransaction(\"addChildNodeData\");\r\n        var follower = this.addChildNodeData(node);\r\n        // var root = getRootNodeData(node.data, myDiagram.model, 0);\r\n        myDiagram.commitTransaction(\"addChildNodeData\");\r\n        myDiagram.commitTransaction();\r\n    \r\n        // select the new Node\r\n        if (typeof iskeyboard != 'undefined' && iskeyboard == true) {\r\n            var newnode = myDiagram.findNodeForData(follower);\r\n            if (newnode) {\r\n                myDiagram.centerRect(newnode.actualBounds);\r\n            }\r\n    \r\n            diagram.select(newnode); //需要居中\r\n            var tb = myDiagram.selection.first().findObject('TEXT');\r\n            if (tb) myDiagram.commandHandler.editTextBlock(tb);\r\n            helpers.simulateEnterWithAlt(e);\r\n        }\r\n    }\r\n\r\n    \r\n    //modify nodeDataArray\r\n    addChildNodeData(node) {\r\n        console.log(\"===================天盘\")\r\n        var isautolayout = window.localStorage.getItem('isautolayout') == null ? true : window.localStorage.getItem('isautolayout') == 'true';\r\n        // var isautoselect =  window.localStorage.getItem('isautoselect') == null?true:window.localStorage.getItem('isautoselect') == 'true';\r\n        var myDiagram = node.diagram;\r\n        var result = arguments[1] ? arguments[1] : null;\r\n        var currentType = 'tianpan';\r\n        // var nodeRoot = getRootNodeData(node.data, myDiagram.model);\r\n        // if (nodeRoot.category == \"Root\") {\r\n        //     currentType = 'dipan';\r\n        // } else {\r\n        //     currentType = 'tianpan';\r\n        // }\r\n        currentType = 'tianpan';\r\n        //myDiagram.startTransaction();\r\n        var nextkey = (myDiagram.model.nodeDataArray.length + 1).toString();\r\n        //var follower = {key: nextkey, text: nextkey};\r\n        var follower = { key: nextkey, text: lang.trans('dce') };\r\n        //if (result != null) {\r\n        myDiagram.model.makeNodeDataKeyUnique(follower);\r\n        nextkey = follower.key;\r\n        //}\r\n        //找到第一个子节点\r\n        var firstNode = myDiagram.findNodeForKey(node.data.isparent);\r\n        // node.findNodesOutOf().each(function(n) {\r\n        //     if (n.data.level > node.data.level) {\r\n        //         firstNode = n;\r\n        //     }\r\n        // });\r\n\r\n        var firstLink = null;\r\n        //找到第一条子边\r\n        node.findLinksOutOf().each(function(l) {\r\n            if (l.data.level > node.data.level) {\r\n                firstLink = l;\r\n            }\r\n        });\r\n        follower.level = node.data.level + 1;\r\n        follower.parent = node.data.key;\r\n        follower.prev = undefined;\r\n\r\n        //如果已经有子节点\r\n        if (node.data.isparent && firstNode != null) {\r\n\r\n            follower.next = firstNode.data.key;\r\n            myDiagram.model.setDataProperty(firstNode.data, \"prev\", follower.key);\r\n        }\r\n\r\n        if (result != null) {\r\n            //只是用来填充的节点\r\n            follower.istemp = true;\r\n            follower.text = \"\";\r\n        }\r\n\r\n\r\n\r\n        if (node.data.level == 0) {\r\n            follower.radius = Math.max(node.data.radius * 0.75, 100);\r\n        } else {\r\n            if (node.data.radius) {\r\n                follower.radius = Math.max(node.data.radius - 5, 50);\r\n            } else {\r\n                follower.radius = Math.max(InitialFontSize - node.data.level * 10, 50);\r\n            }\r\n\r\n        }\r\n        //如果当前节点属于某个group，根节点和普通主节点通用\r\n        if (firstNode != null) {\r\n            if (node.containingGroup) {\r\n                follower.group = node.containingGroup.data.key;\r\n            }\r\n\r\n        }\r\n        //如果当前节点属于某个group，根节点和普通主节点通用\r\n        // if (firstNode == null && currentType=='tianpan') {\r\n        if (firstNode == null) {\r\n            // add a group; make it a member of the same group as the selected node\r\n            var newGroup = {\r\n                isGroup: true,\r\n                group: node.data.group,\r\n                parent: node.data.key,\r\n                fill: \"rgba(0,0,0,0)\",\r\n                stroke: \"rgba(0,0,0,0)\",\r\n                strokeWidth: 0,\r\n                level: node.data.level\r\n            };\r\n            newGroup = applyTheme2Group(newGroup, node);\r\n            // if (node.data.category == \"dipan\" || node.data.category == \"Root\") {\r\n            //     newGroup.category = \"dipan\";\r\n\r\n\r\n            // }\r\n            myDiagram.model.addNodeData(newGroup);\r\n            //修改主节点的group为新的group\r\n            myDiagram.model.setGroupKeyForNodeData(node.data, newGroup.key);\r\n            follower.group = newGroup.key;\r\n        }\r\n\r\n\r\n        follower.fill = colorMap[follower.level % 5];\r\n        follower.category = node.data.category;\r\n\r\n        follower.loc = go.Point.stringify(computeChildLoc(node));\r\n\r\n\r\n\r\n        // follower.strokeWidth = node.data.strokeWidth;\r\n        follower.strokeWidth = 2;\r\n        if (node.data.figure) {\r\n            follower.figure = node.data.figure;\r\n        }\r\n\r\n        if (node.data.picture) {\r\n            follower.picture = node.data.picture;\r\n        }\r\n\r\n\r\n        if (node.data.width) {\r\n            follower.width = node.data.width;\r\n        }\r\n        if (node.data.height) {\r\n            follower.height = node.data.height;\r\n        }\r\n\r\n        follower = applyTheme2Node(follower, node);\r\n\r\n        follower.font = node.data.font;\r\n        follower.textStroke = node.findObject(\"TEXT\").stroke;\r\n        myDiagram.model.setDataProperty(node.data, \"isparent\", nextkey);\r\n        follower.newAdd = true;\r\n        myDiagram.model.addNodeData(follower);\r\n\r\n\r\n        // add a link from the selected node to the new node\r\n        var linkToFollower = { from: node.data.key, to: follower.key };\r\n\r\n        linkToFollower.level = follower.level;\r\n        //linkToFollower.color = follower.fill;\r\n        linkToFollower.isTreeLink = true;\r\n\r\n\r\n        // linkToFollower.strokeWidth = node.data.level <= 0 ? 4 : Math.max(1, 3 - (linkToFollower.level - 1) * 0.5);\r\n        linkToFollower.strokeWidth = 2;\r\n        var intoLink = null;\r\n        intoLink = node.findLinksInto().first();\r\n        if (firstLink != null) {\r\n            linkToFollower.toArrow = firstLink.data.toArrow;\r\n            linkToFollower.strokeDashArray = firstLink.data.strokeDashArray;\r\n            linkToFollower.color = firstLink.data.color;\r\n            linkToFollower.strokeWidth = 2;\r\n            // if (node.data.level == 0) {\r\n            //     linkToFollower.strokeWidth = 4;\r\n            // } else {\r\n            //     if (node.data.level == 1) {\r\n            //         linkToFollower.strokeWidth = Math.max(1, firstLink.data.strokeWidth - 1);\r\n            //     } else {\r\n            //         linkToFollower.strokeWidth = Math.max(1, firstLink.data.strokeWidth - 0.5);\r\n            //     }\r\n            // }\r\n            //linkToFollower.strokeWidth = node.data.level <= 0 ? 4 : (node.data.level == 1?node.data.strokeWidth -1:node.data.strokeWidth-0.5)  Math.max(1, 3 - (linkToFollower.level - 1) * 0.5));\r\n        } else if (intoLink != null) {\r\n            linkToFollower.toArrow = intoLink.data.toArrow;\r\n            linkToFollower.strokeDashArray = intoLink.data.strokeDashArray;\r\n            linkToFollower.color = intoLink.data.color;\r\n            linkToFollower.strokeWidth = 2;\r\n            // if (node.data.level == 0) {\r\n            //     linkToFollower.strokeWidth = 4;\r\n            // } else {\r\n            //     if (node.data.level == 1) {\r\n            //         linkToFollower.strokeWidth = Math.max(1, intoLink.data.strokeWidth - 1);\r\n            //     } else {\r\n            //         linkToFollower.strokeWidth = Math.max(1, intoLink.data.strokeWidth - 0.5);\r\n            //     }\r\n            // }\r\n        } else {\r\n            linkToFollower = applyTheme2Link(linkToFollower, node);\r\n        }\r\n\r\n        if (node.data.category == \"dipan\" || node.data.category == 'Root') { //处理天盘\r\n            linkToFollower.category = \"dipan\";\r\n        }\r\n\r\n        myDiagram.model.addLinkData(linkToFollower);\r\n        if (firstLink != null) {\r\n            var copyLink = {};\r\n            // _.extendOwn(copyLink, firstLink.data);\r\n            // copyLink = helpers.extend(copyLink, firstLink.data);\r\n            delete firstLink.data.points\r\n            copyLink = JSON.parse(JSON.stringify(firstLink.data))\r\n            delete copyLink.__gohashid;\r\n            delete copyLink.points;\r\n            copyLink.from = follower.key;\r\n            copyLink.to = firstLink.data.to;\r\n            myDiagram.model.removeLinkData(firstLink.data);\r\n            myDiagram.model.addLinkData(copyLink);\r\n            // myDiagram.model.setFromKeyForLinkData(firstLink.data, follower.key);\r\n        }\r\n        if (currentType == 'tianpan') {\r\n            //  if (!isautolayout || !isautoselect) {\r\n            //   ControlAutoLayout(false);\r\n            //   // if(node.data.isparent && myDiagram.findNodeForKey(node.data.isparent) && node.data.group){\r\n            //   //   node = myDiagram.findNodeForKey(node.data.group)\r\n            //   // }\r\n            //   if (node && node.containingGroup) {\r\n            //     node.containingGroup.layout.isOngoing = true;\r\n            //     node.containingGroup.layout.isValidLayout = false;\r\n            //   }else{\r\n            //     node.diagram.layout.isOngoing = true;\r\n            //     node.diagram.layout.isValidLayout = false;\r\n            //   }\r\n            // }\r\n        }\r\n        //myDiagram.commitTransaction(\"new spiral\");\r\n        myDiagram.isModified = true;\r\n        return follower;\r\n    }\r\n\r\n\r\n    moveWithinNodes(direction) {\r\n        var myDiagram = this.diagram;\r\n        var node = myDiagram.selection.first();\r\n        if(!node){\r\n            return;\r\n        }\r\n        if (!node) {\r\n            myDiagram.select(myDiagram.findNodeForKey(1));\r\n            return;\r\n        }\r\n        switch (direction) {\r\n            case 'left':\r\n                if (node.data.prev) {\r\n                    var prevNode = myDiagram.findNodeForKey(node.data.prev);\r\n                    if (prevNode) {\r\n                        myDiagram.select(prevNode);\r\n                    }\r\n                }\r\n                break;\r\n            case 'up':\r\n                if (node.data.parent) {\r\n                    var prevNode = myDiagram.findNodeForKey(node.data.parent);\r\n                    if (prevNode) {\r\n                        myDiagram.select(prevNode);\r\n                    }\r\n                }\r\n                break;\r\n            case 'right':\r\n                if (node.data.next) {\r\n                    var prevNode = myDiagram.findNodeForKey(node.data.next);\r\n                    if (prevNode) {\r\n                        myDiagram.select(prevNode);\r\n                    }\r\n                }\r\n                break;\r\n            case 'down':\r\n                if (node.data.isparent) {\r\n                    var prevNode = myDiagram.findNodeForKey(node.data.isparent);\r\n                    if (prevNode) {\r\n                        myDiagram.select(prevNode);\r\n                    }\r\n                }\r\n                break;\r\n        }\r\n    }\r\n\r\n    selectText(e) {\r\n        var myDiagram = this.diagram\r\n        var node = myDiagram.selection.first();\r\n        if (!node) return;\r\n        // removeNodeRemarkTips();\r\n        var tb = myDiagram.selection.first().findObject('TEXT');\r\n        if (tb) myDiagram.commandHandler.editTextBlock(tb);\r\n        helpers.simulateEnterWithAlt(e);\r\n    }\r\n\r\n    //快捷键\r\n    dokeyDownFn (e) {\r\n        // console.log('myDiagram:', diagram);\r\n        var diagram = this.diagram\r\n        var that = this;\r\n        var myDiagram = this.diagram;\r\n        var e = myDiagram.lastInput;\r\n        var cmd = myDiagram.commandHandler;\r\n        if (e.event.altKey) {\r\n            if (e.key == \"Q\") {\r\n                autoLayoutAll();\r\n                return;\r\n            } else if (e.key == \"R\") {\r\n                centerNode();\r\n                return;\r\n            } else if (e.key == \"C\") {\r\n                centerCurrentNode();\r\n                return;\r\n            } else if (e.key == \"A\") {\r\n                zoomToFit();\r\n                return;\r\n            }\r\n        }\r\n        if (e.event.keyCode >= 65 && e.event.keyCode <= 90 && !e.event.altKey && !e.event.ctrlKey && !e.event.shiftKey) {\r\n            e.bubbles = false;\r\n            this.selectText(e, diagram);\r\n            return true;\r\n    \r\n        }\r\n        // console.log('catched in dokeydown ' + e.event.keyCode);\r\n        // console.log('catched in dokeydown ' + e.key);\r\n        if (e.event.keyCode === 13) { // could also check for e.control or e.shift\r\n            var node = myDiagram.selection.first();\r\n            if (node && node.data.parent) {\r\n                this.addFollower(e, true);\r\n            }\r\n            if (node && !node.data.parent) {\r\n                that.startNewSpiral(true);\r\n            }\r\n        } else if (e.event.keyCode === 9) { // could also check for e.control or e.shift\r\n            that.startNewSpiral(true);\r\n        } else if (e.key === \"t\") { // could also check for e.control or e.shift\r\n            if (cmd.canCollapseSubGraph()) {\r\n                cmd.collapseSubGraph();\r\n            } else if (cmd.canExpandSubGraph()) {\r\n                cmd.expandSubGraph();\r\n            }\r\n        } else if (e.key == \"Del\") {\r\n            e.diagram.commandHandler.deleteSelection();\r\n        } else if (e.event.keyCode == 113) { //F2,不知道为什么失效了，重新赋予功能\r\n            // selectText();\r\n            this.selectText(e, diagram);\r\n        } else if (e.event.keyCode == 37) { //左\r\n            this.moveWithinNodes('left', diagram);\r\n            // go.CommandHandler.prototype.doKeyDown.call(cmd);\r\n        } else if (e.event.keyCode == 38) { //上\r\n            this.moveWithinNodes('up', diagram);\r\n            // go.CommandHandler.prototype.doKeyDown.call(cmd);\r\n        } else if (e.event.keyCode == 39) { //右\r\n            this.moveWithinNodes('right', diagram);\r\n            // go.CommandHandler.prototype.doKeyDown.call(cmd);\r\n        } else if (e.event.keyCode == 40) { //下\r\n            this.moveWithinNodes('down', diagram);\r\n            // go.CommandHandler.prototype.doKeyDown.call(cmd);\r\n        } else {\r\n            // call base method with no arguments\r\n            go.CommandHandler.prototype.doKeyDown.call(cmd);\r\n        }\r\n        e.bubbles = false; //阻止事件冒泡到dom\r\n    }\r\n    \r\n    // 生成base64图片\r\n    downloadImage() {\r\n        var myDiagram = this.diagram;\r\n        var imgdata = myDiagram.makeImageData({\r\n            scale: 1.0,\r\n            background: \"#ffffff\",\r\n            type: \"image/png\",\r\n            maxSize: new go.Size(9000, 9000)\r\n        });\r\n\r\n        return imgdata;\r\n    }\r\n\r\n   \r\n    getNodeSelectionAdornmentTemplate() {\r\n        return $(go.Adornment, \"Spot\",\r\n            $(go.Panel, \"Auto\",\r\n                $(go.Shape, { figure: \"Circle\", fill: 'rgba(255,0,120,0.2)', stroke: \"#767678\", strokeWidth: 12 },\r\n                    new go.Binding(\"stroke\", \"\", function(e, obj) {\r\n                        if (e.stroke) {\r\n                            return tinycolor(e.stroke).saturate().toString()\r\n                        } else {\r\n                            return \"#767678\";\r\n                        }\r\n                    }),\r\n                    // new go.Binding(\"fill\",\"\",function(e,obj){\r\n                    //   var radBrush = $(go.Brush, \"Radial\", { 0: \"rgba(248,248,242,0)\", 1: 'RGB(255,242,0)' });\r\n                    //   return radBrush;\r\n                    // })\r\n                    // ,\r\n                    new go.Binding(\"strokeWidth\", \"\", function(e, obj) {\r\n                        if (e.strokeWidth) {\r\n                            return e.strokeWidth + 5;\r\n                        } else {\r\n                            return 6;\r\n                        }\r\n    \r\n                    }),\r\n                    new go.Binding(\"width\", \"\", function(e, obj) {\r\n                        return e.radius || 150;\r\n                    }),\r\n                    new go.Binding(\"height\", \"\", function(e, obj) {\r\n                        return e.radius || 150;\r\n                    })\r\n                ),\r\n                $(go.Placeholder) // this represents the selected Node\r\n    \r\n            ),\r\n            // the button to create a \"next\" node, at the top-right corner\r\n            $(\"Button\", {\r\n                    name: \"AddChild\",\r\n                    toolTip: $(go.Adornment, \"Auto\",\r\n                        $(go.Shape, { fill: \"#FFFFCC\" }),\r\n                        $(go.TextBlock, { textAlign: 'center', margin: new go.Margin(8, 4, 4, 4) }, // the tooltip shows the result of calling nodeInfo(data)\r\n                            new go.Binding(\"text\", \"\", function(d) {\r\n                                return \"增加子节点\";\r\n                            }))\r\n                    ),\r\n                    alignment: go.Spot.Top,\r\n                    alignmentFocus: go.Spot.Bottom,\r\n                    width: 30,\r\n                    height: 30,\r\n                    click: function (e) {\r\n                        e.diagram.__trtd.startNewSpiral()\r\n                    } // this function is defined below\r\n                },\r\n                $(go.Shape, \"PlusLine\", { stroke: '#770077', desiredSize: new go.Size(15, 15) })\r\n            ),\r\n    \r\n            $(\"Button\", {\r\n                    name: \"AddLevel\",\r\n                    toolTip: $(go.Adornment, \"Auto\",\r\n                        $(go.Shape, { fill: \"#FFFFCC\" }),\r\n                        $(go.TextBlock, { textAlign: 'center', margin: new go.Margin(8, 4, 4, 4) }, // the tooltip shows the result of calling nodeInfo(data)\r\n                            new go.Binding(\"text\", \"\", function(d) {\r\n                                return \"增加同级节点\";\r\n                            }))\r\n                    ),\r\n                    alignment: new go.Spot(1, 0.5, 15, 0),\r\n                    width: 30,\r\n                    height: 30,\r\n                    click: function (e) {\r\n                        e.diagram.__trtd.addFollower(e)\r\n                    } // this function is defined below\r\n                },\r\n                $(go.Shape, \"PlusLine\", { stroke: \"#227700\", desiredSize: new go.Size(15, 15) }),\r\n                new go.Binding(\"visible\", \"level\", function(level) {\r\n                    return level != 0; // hidden this button if current node is root node\r\n    \r\n                })\r\n            ),\r\n            // $(go.Panel, \"Auto\", {        // 放大镜\r\n            //         name: \"ButtonIcon1\",\r\n            //         alignment: new go.Spot(0, 1, 5, -5),\r\n            //         //alignment: go.Spot.BottomLeft,\r\n            //         //alignmentFocus: go.Spot.BottomLeft,\r\n            //         width: 60,\r\n            //         height: 60,\r\n            //         isActionable: true,\r\n            //         click: expandCollapse // this function is defined below\r\n            //     },\r\n    \r\n            //     $(go.Shape, \"Circle\", {\r\n            //         fill: \"rgba(1,1,1,0)\",\r\n            //         strokeWidth: 0,\r\n            //         stroke: \"green\",\r\n            //         width: 50,\r\n            //         height: 50\r\n            //     }),\r\n            //     $(go.Shape, {\r\n            //             '_para1': true,\r\n            //             name: \"ButtonIcon\",\r\n            //             fill: \"red\",\r\n            //             strokeWidth: 2,\r\n            //             stroke: \"#767678\",\r\n            //             geometryString: icons[\"zoomout\"], // default value for isTreeExpanded is true\r\n            //             desiredSize: new go.Size(30, 30)\r\n            //         },\r\n            //         new go.Binding(\"geometryString\", \"\", function(d, button) {\r\n            //             // console.log('dddddd:', d);\r\n            //             // console.log('button:', button);\r\n            //             // var myDiagram = d.diagram;\r\n            //             // var node = myDiagram.selection.first();\r\n            //             // if (node[\"_controlExpand\"]) {\r\n            //             //     return icons[\"zoomout\"];\r\n            //             // } else {\r\n            //             //     return icons[\"zoomin\"];\r\n            //             // }\r\n            //             return icons[\"zoomin\"];\r\n            //         })\r\n            //     )\r\n            // )\r\n        );\r\n    } // end Adornment\r\n\r\n    // 给子节点添加序号\r\n    orderChildNode(obj) {\r\n        var myDiagram = this.diagram;\r\n        var arr = [];\r\n        var node = myDiagram.selection.first();\r\n        console.log(\"node\", node);\r\n        if (node) {\r\n            myDiagram.startTransaction();\r\n            console.log(\"node.data\", node.data);\r\n            if (node.data.isparent) {\r\n                var first = myDiagram.model.findNodeDataForKey(node.data.isparent);\r\n                arr.push(first);\r\n                pushChildKeyToArr(first, arr, this);\r\n\r\n                var re = /^(\\d+\\、+)|(\\d+\\.+)/g;\r\n                for (var i = 0; i < arr.length; i++) {\r\n                    if (re.test(arr[i].text)) {\r\n                        myDiagram.model.setDataProperty(arr[i], \"text\", (arr[i].text).replace(re, (i + 1) + \".\"));\r\n                    } else {\r\n                        if(arr[i].text == ''){\r\n                            myDiagram.model.setDataProperty(arr[i], \"text\", (i + 1));                                \r\n                        }else{\r\n                            myDiagram.model.setDataProperty(arr[i], \"text\", (i + 1) + \".\" + arr[i].text);\r\n                        }\r\n                    }\r\n                }\r\n            } else {\r\n                console.log(\"无子节点！\");\r\n            }\r\n            myDiagram.commitTransaction();\r\n        };\r\n    }\r\n\r\n    clearOrderChildNode(obj) {\r\n        var myDiagram = this.diagram;\r\n        var arr = [];\r\n        var node = myDiagram.selection.first();\r\n        console.log(\"node\", node);\r\n        if (node) {\r\n            myDiagram.startTransaction();\r\n            console.log(\"node.data\", node.data);\r\n            if (node.data.isparent) {\r\n                var first = myDiagram.model.findNodeDataForKey(node.data.isparent);\r\n                arr.push(first);\r\n                pushChildKeyToArr(first, arr, this);\r\n\r\n                var re = /^(\\d+\\、+)|(\\d+\\.+)/g;\r\n                for (var i = 0; i < arr.length; i++) {\r\n                    if (re.test(arr[i].text)) {\r\n                        myDiagram.model.setDataProperty(arr[i], \"text\", (arr[i].text).replace(re, \"\"));\r\n                    }\r\n                }\r\n            } else {\r\n                console.log(\"无子节点！\");\r\n            }\r\n            myDiagram.commitTransaction();\r\n        };\r\n    }\r\n}\r\n\r\n//临时扇区转换为正式扇区\r\nfunction changeTemp2normal(myDiagram) {\r\n\r\n    var node = myDiagram.selection.first();\r\n    if (node.data.istemp) {\r\n        myDiagram.model.startTransaction();\r\n        var tmpNode = myDiagram.findNodeForKey(node.data.parent);\r\n        myDiagram.model.setDataProperty(node.data, \"istemp\", undefined);\r\n        var lastNode = null; //记录这一级扇区\r\n        while (tmpNode) {\r\n            if (tmpNode.data.istemp) {\r\n                myDiagram.model.setDataProperty(tmpNode.data, \"istemp\", undefined);\r\n                myDiagram.model.setDataProperty(tmpNode.data, \"text\", \"双击编辑内容\");\r\n                lastNode = tmpNode;\r\n            } else {\r\n                if (lastNode) {\r\n                    myDiagram.model.setDataProperty(tmpNode.data, \"isparent\", lastNode.data.key);\r\n                }\r\n                break;\r\n            }\r\n            tmpNode = myDiagram.findNodeForKey(tmpNode.data.parent);\r\n        }\r\n        myDiagram.model.commitTransaction();\r\n        myDiagram.isModified = true;\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\nfunction applyTheme2Node(follower,node) {\r\n\r\n    node.diagram.model.setDataProperty(follower, 'strokeWidth', node.diagram.__trtd.tdCurrentTheme.borderWidth);\r\n    node.diagram.model.setDataProperty(follower, 'stroke', node.diagram.__trtd.tdCurrentTheme.borderColor);\r\n    if (node.diagram.__trtd.tdCurrentTheme.colorRange == null) {\r\n        node.diagram.model.setDataProperty(follower, 'fill', randomColor({ luminosity: 'light', count: 1 })[0]);\r\n    } else if (node.diagram.__trtd.tdCurrentTheme.colorRange instanceof Array) {\r\n        var tmpColor = \"white\";\r\n        if (follower.level >= node.diagram.__trtd.tdCurrentTheme.colorRange.length) {\r\n            tmpColor = node.diagram.__trtd.tdCurrentTheme.colorRange[follower.level % node.diagram.__trtd.tdCurrentTheme.colorRange.length];\r\n        } else {\r\n            tmpColor = node.diagram.__trtd.tdCurrentTheme.colorRange[follower.level];\r\n        }\r\n        node.diagram.model.setDataProperty(follower, 'fill', tmpColor);\r\n    } else if (node.diagram.__trtd.tdCurrentTheme.colorRange == \"random\") {\r\n        //层级颜色一样的随机色\r\n        if (follower.prev) {\r\n            var preNode = node.diagram.findNodeForKey(follower.prev);\r\n            if (preNode) {\r\n                node.diagram.model.setDataProperty(follower, 'fill', preNode.data.fill);\r\n            } else {\r\n                node.diagram.model.setDataProperty(follower, 'fill', randomColor({ luminosity: 'light', count: 1 })[0]);\r\n            }\r\n\r\n        } else {\r\n            node.diagram.model.setDataProperty(follower, 'fill', randomColor({ luminosity: 'light', count: 1 })[0]);\r\n        }\r\n    } else {\r\n        if (node.diagram.__trtd.tdCurrentTheme.colorRange == \"white\") {\r\n            node.diagram.model.setDataProperty(follower, 'fill', \"white\");\r\n        } else {\r\n            node.diagram.model.setDataProperty(follower, 'fill', \"rgba(0,0,0,0)\");\r\n        }\r\n\r\n    }\r\n    return follower;\r\n}\r\n\r\n//生成地盘的figure形状\r\nfunction makeAnnularWedge(data, layerThickness) {\r\n    var sweep = data.sweep ? data.sweep : 360;\r\n    var layerThickness = data.layerThickness || 100;\r\n    var radius = data.dradius ? data.dradius : 100;\r\n    var p = new go.Point(radius + layerThickness, 0).rotate(-sweep / 2);\r\n    var q = new go.Point(radius, 0).rotate(sweep / 2);\r\n    var geo = new go.Geometry()\r\n        .add(new go.PathFigure(p.x, p.y)\r\n            .add(new go.PathSegment(go.PathSegment.Arc, -sweep / 2, sweep, 0, 0, radius + layerThickness, radius + layerThickness))\r\n            .add(new go.PathSegment(go.PathSegment.Line, q.x, q.y))\r\n            .add(new go.PathSegment(go.PathSegment.Arc, sweep / 2, -sweep, 0, 0, radius, radius).close()));\r\n    geo.normalize();\r\n    return geo;\r\n}\r\n\r\nfunction getRootNodeData(model,nodeData,level) {\r\n    var parent, root = nodeData;\r\n    if (!level) {\r\n        level = 0;\r\n    }\r\n    while (root.parent) {\r\n        if (root.level == level) {\r\n            break;\r\n        }\r\n        parent = model.findNodeDataForKey(root.parent);\r\n        if (parent) {\r\n            root = parent;\r\n        }\r\n    }\r\n    return root;\r\n}\r\n\r\n\r\nfunction getNodeContextMenu() {\r\n   \r\n\r\n    let style = {\r\n        // width: 120,\r\n        // height: 30,\r\n        // margin: 2,\r\n        // font: \"bold 14px sans-serif\",\r\n        // margin: 3,\r\n    }\r\n\r\n    return $(go.Adornment, \"Vertical\",\r\n        $(\"ContextMenuButton\",\r\n            $(go.TextBlock, \"应用样式到所有同级节点\"), {\r\n                click: function(e, obj) {\r\n                    menus.applyStyle2Level(e, obj);\r\n                }\r\n            }),\r\n        $(\"ContextMenuButton\",\r\n            $(go.TextBlock, \"应用样式到同级节点\"), {\r\n                click: function(e, obj) {\r\n                    menus.applyStyle2CurLevel(e, obj);\r\n                }\r\n            }),\r\n        $(\"ContextMenuButton\",\r\n            $(go.TextBlock, \"应用样式到子节点\"), {\r\n                click: function(e, obj) {\r\n                    menus.applyStyle2ChiLevel(e, obj);\r\n                }\r\n            }),\r\n        $(\"ContextMenuButton\",\r\n            $(go.TextBlock, \"添加\"), {\r\n                click: function(e, obj) {\r\n                    menus.addFollower(e);\r\n                }\r\n            }),\r\n        $(\"ContextMenuButton\",\r\n            $(go.TextBlock, \"添加子节点\"), {\r\n                click: function(e) {\r\n                    menus.startNewSpiral();\r\n                }\r\n            }),\r\n        $(\"ContextMenuButton\",\r\n            $(go.TextBlock, \"定位当前节点\"), style, {\r\n                click: centerCurrentNode\r\n            }),\r\n\r\n        $(\"ContextMenuButton\",\r\n            $(go.TextBlock, \"删除\"), style, {\r\n                click: function(e, obj) {\r\n                    console.log('eeeeeeeeee:', e);\r\n                    e.diagram.commandHandler.deleteSelection();\r\n                }\r\n            }),\r\n        // $(\"ContextMenuButton\",\r\n        //     $(go.TextBlock, \"添加图片\"), style, {\r\n        //         click: function(e, obj) {\r\n        //             insertPicture();\r\n        //         }\r\n        //     }),\r\n        // $(\"ContextMenuButton\",\r\n        //     $(go.TextBlock, \"移除图片\"), style, {\r\n        //         click: function(e, obj) {\r\n        //             removeNodePicture();\r\n        //         }\r\n        //     }),\r\n        $(\"ContextMenuButton\",\r\n            $(go.TextBlock, \"清空文本\"), style, {\r\n                click: function(e, obj) {\r\n                    var myDiagram = e.diagram;\r\n                    var node = myDiagram.selection.first();\r\n                    if (node) {\r\n                        myDiagram.startTransaction();\r\n                        //node.data.text=\"\";\r\n                        myDiagram.model.setDataProperty(node.data, \"text\", \"\");\r\n                        myDiagram.commitTransaction();\r\n                    }\r\n                    //removeNodePicture();\r\n                }\r\n            }),\r\n        $(\"ContextMenuButton\",\r\n            $(go.TextBlock, \"删除 DEL\"), style, {\r\n                click: function(e, obj) {\r\n                    var myDiagram = e.diagram;\r\n                    var node = myDiagram.selection.first();\r\n                    if (node) {\r\n                        yunpan.yunpandel(e)\r\n                    }\r\n                    //removeNodePicture();\r\n                }\r\n            }),\r\n        $(\"ContextMenuButton\",\r\n            $(go.TextBlock, \"增加 CTRL+X/Y\"), style, {\r\n                click: function(e, obj) {\r\n                    var myDiagram = e.diagram;\r\n                    var node = myDiagram.selection.first();\r\n                    if (node) {\r\n                        if(node.data.loc.split(\" \")[1] === \"0\"&&node.data.category!==\"x\"){\r\n                            yunpan.addy(e)\r\n                        }else if(node.data.loc.split(\" \")[0] === \"0\"&&node.data.category!==\"y\"){\r\n                            yunpan.addx(e)\r\n                        }; \r\n                    }\r\n                    //removeNodePicture();\r\n                }\r\n            }),\r\n        $(\"ContextMenuButton\",\r\n            $(go.TextBlock, \"删除 DEL\"), style, {\r\n                click: function(e, obj) {\r\n                    var myDiagram = e.diagram;\r\n                    var node = myDiagram.selection.first();\r\n                    if (node) {\r\n                        yunpan.yunpandel(e)\r\n                    }\r\n                    //removeNodePicture();\r\n                }\r\n            }),\r\n        $(\"ContextMenuButton\",\r\n            $(go.TextBlock, \"增加同级节点\"), style, {\r\n                click: function(e, obj) {\r\n                    var myDiagram = e.diagram;\r\n                    var node = myDiagram.selection.first();\r\n                    if(myDiagram.selection.first().data.istemp){\r\n                        return\r\n                    }\r\n                    dipan.addFollowerGround(e);\r\n                }\r\n            }),\r\n        $(\"ContextMenuButton\",\r\n            $(go.TextBlock, \"增加子节点\"), style, {\r\n                click: function(e, obj) {\r\n                    var myDiagram = e.diagram;\r\n                    var node = myDiagram.selection.first();\r\n                    if(node.data.parent){\r\n                        var parentNode = node.diagram.findNodeForKey(node.data.parent);\r\n                        if(parentNode.data.istemp){\r\n                            return\r\n                        }\r\n                    }\r\n                    dipan.addNewCircle(e);\r\n                }\r\n            }),\r\n        $(\"ContextMenuButton\",\r\n            $(go.TextBlock, \"删除\"), style, {\r\n                click: function(e, obj) {\r\n                    var myDiagram = e.diagram;\r\n                    var node = myDiagram.selection.first();\r\n                    if(node.data.parent){\r\n                        var parentNode = node.diagram.findNodeForKey(node.data.parent);\r\n                        if(parentNode.data.istemp){\r\n                            return\r\n                        }\r\n                    }\r\n                    dipan.addNewCircle(e);\r\n                }\r\n            }),\r\n            $(\"ContextMenuButton\",\r\n            $(go.TextBlock, \"复制副本\"), style, {\r\n                click: function(e, obj) {\r\n                    var myDiagram = e.diagram;\r\n                    var node = myDiagram.selection.first();\r\n                    if(myDiagram.selection.first().data.istemp){\r\n                        return\r\n                    }\r\n                    dipan.addFollowerGround(e);\r\n                }\r\n            }),\r\n        $(\"ContextMenuButton\",\r\n            $(go.TextBlock, \"权限设置\"), style, {\r\n                click: function(e, obj) {\r\n                    var myDiagram = e.diagram;\r\n                    var node = myDiagram.selection.first();\r\n                    if(node.data.parent){\r\n                        var parentNode = node.diagram.findNodeForKey(node.data.parent);\r\n                        if(parentNode.data.istemp){\r\n                            return\r\n                        }\r\n                    }\r\n                    dipan.addNewCircle(e);\r\n                }\r\n            }),\r\n        $(\"ContextMenuButton\",\r\n            $(go.TextBlock, \"删除\"), style, {\r\n                click: function(e, obj) {\r\n                    var myDiagram = e.diagram;\r\n                    var node = myDiagram.selection.first();\r\n                    if(node.data.parent){\r\n                        var parentNode = node.diagram.findNodeForKey(node.data.parent);\r\n                        if(parentNode.data.istemp){\r\n                            return\r\n                        }\r\n                    }\r\n                    dipan.addNewCircle(e);\r\n                }\r\n            })\r\n\r\n    );\r\n}\r\n\r\n\r\n// function cxcommand (obj, val) {\r\n//     var diagram = obj.diagram;\r\n//     var myDiagram = obj.diagram;\r\n//     if (!(diagram.currentTool instanceof go.ContextMenuTool)) return;\r\n//     switch (val) {\r\n//         // case \"Paste\": diagram.commandHandler.pasteSelection(diagram.lastInput.documentPoint); break;\r\n//         case \"addChildNodeMenu\":\r\n//         diagram.__trtd.startNewSpiral();\r\n//             break;\r\n//         case \"addLevelNodeMenu\":\r\n//         diagram.__trtd.addFollower(obj);\r\n//             break;\r\n//         case \"deleteNodeMenu\":\r\n//             myDiagram.toolManager.textEditingTool.doCancel();\r\n//             myDiagram.commandHandler.deleteSelection();\r\n//             break;\r\n//         case \"addNodePictureMenu\":\r\n//             // jQuery(\"#insertimage\").modal('show');\r\n//             // document.getElementById('insertimage').modal('show');\r\n//             break; //特殊处理\r\n//         case \"removeNodePictureMenu\":\r\n//             removeNodePicture(obj);\r\n//             break;\r\n//         case \"clearNodeTextMenu\":\r\n//             var node = myDiagram.selection.first();\r\n//             if (node) {\r\n//                 myDiagram.startTransaction();\r\n//                 myDiagram.model.setDataProperty(node.data, \"text\", \"\");\r\n//                 myDiagram.commitTransaction();\r\n//             };\r\n//             break;\r\n//         case \"locateRootNodeMenu\":\r\n//             centerNode(obj);\r\n//             break;\r\n//         case \"showAllNodesMenu\":\r\n//             zoomToFit(obj);\r\n//             break;\r\n//         case \"removeOutCycleMenu\":\r\n//             removeOutCycle(obj);\r\n//             break;\r\n//         case \"centerPictureMenu\":\r\n//             centerPicture(obj);\r\n//             break;\r\n//         case \"equalWidthHeightPictureMenu\":\r\n//             equalWidthHeightPicture(obj);\r\n//             break;\r\n//         case \"bringToTopMenu\":\r\n//             bringToLayer(\"Foreground\", obj);\r\n//             break;\r\n//         case \"bringToBackgroundMenu\":\r\n//             bringToLayer(\"Background\", obj);\r\n//             break;\r\n//         case \"bringUpMenu\":\r\n//             bringToLayer(null, obj);\r\n//             break;\r\n//         case \"layoutGroupMenu\":\r\n//             autoLayoutAll(true, obj);\r\n//             break;\r\n\r\n//         case \"insertTextMenu\":\r\n//             insertTextNode(obj);\r\n//             break;\r\n//         case \"duplicateNode\":\r\n//             duplicateNode(obj);\r\n//             break; // 复制节点\r\n//         case \"insertTianpanMenu\":\r\n//             myDiagram.toolManager.clickCreatingTool.insertPart(myDiagram.lastInput.documentPoint);\r\n//             break;\r\n//         //固定节点\r\n//         case \"fixPictureMenu\":   \r\n//         case \"activePictureMenu\":\r\n//             var node = myDiagram.findPartAt(myDiagram.lastInput.documentPoint, false);\r\n//             // var node = myDiagram.selection.first();\r\n//             myDiagram.startTransaction();\r\n//             myDiagram.model.setDataProperty(node.data, \"selectable\", node.data.selectable != undefined ? (!node.data.selectable) : false);\r\n//             myDiagram.commitTransaction();\r\n//             break;\r\n//         case \"orderChildNode\":\r\n//             obj.diagram.__trtd.orderChildNode(obj);\r\n//             break;\r\n//         case \"clearOrderChildNode\":\r\n//             obj.diagram.__trtd.clearOrderChildNode(obj);\r\n//             break;\r\n//         case \"delYunpanAxis\":\r\n//             yunpan.yunpandel(obj);\r\n//             break;\r\n//         case \"addYunpanAxis\":\r\n//             var node = myDiagram.selection.first();\r\n//             if(node.data.loc.split(\" \")[1] === \"0\"&&node.data.category!==\"x\"){\r\n//                 yunpan.addy(obj)\r\n//             }else if(node.data.loc.split(\" \")[0] === \"0\"&&node.data.category!==\"y\"){\r\n//                 yunpan.addx(obj)\r\n//             }; \r\n//             break;\r\n//         case \"addLevelDipanNode\":\r\n//             if(myDiagram.selection.first().data.istemp){\r\n//                 return\r\n//             }\r\n//             obj.addFollowerGround();\r\n//             break;\r\n//         case \"addChildDipanNode\":\r\n//             var node = myDiagram.selection.first();\r\n//                 if(node.data.parent){\r\n//                     var parentNode = node.diagram.findNodeForKey(node.data.parent);\r\n//                     if(parentNode.data.istemp){\r\n//                         return\r\n//                     }\r\n//                 }\r\n//             obj.addNewCircle(obj);\r\n//             break;\r\n//         case \"deleteDipanNode\":\r\n//         // myDiagram.commandHandler.deleteSelection();\r\n//         obj.deleteSelection();\r\n//         break;\r\n//     }\r\n//     diagram.currentTool.stopTool();\r\n// }\r\n\r\n\r\n\r\n\r\n\r\n   /***\r\n     * 判断Node descendant是否是node的后代，如果是返回true, 否则返回false\r\n     * @param descendent go.Node type\r\n     * @param node go.Node Type\r\n     */\r\n    function isDescendant(descendant, node) {\r\n        var diagram = node.diagram,\r\n            cur = descendant;\r\n        //此处若出现bug，请告知，谢谢\r\n        while (cur.data.parent && cur.data.parent != node.data.key) {\r\n            cur = diagram.findNodeForKey(cur.data.parent);\r\n        }\r\n\r\n        return (cur.data.parent != null);\r\n    }\r\n\r\n    /***\r\n     * disconnect node (including his descendants) from diagram\r\n     * @param node go.Node type\r\n     */\r\n    function disconnectFromTreeStructure(node) {\r\n        if (node.data.parent == null) {\r\n            //if it's root node\r\n            return;\r\n        }\r\n        var diagram = node.diagram,\r\n            model = node.diagram.model;\r\n        if (node.data.prev) {\r\n            //it's not the first child of it's parent\r\n            var preNode = diagram.findNodeForKey(node.data.prev);\r\n            if (node.data.next) {\r\n                var nextNode = diagram.findNodeForKey(node.data.next);\r\n                model.setDataProperty(preNode.data, \"next\", nextNode.data.key);\r\n                model.setDataProperty(nextNode.data, \"prev\", preNode.data.key);\r\n                var link = preNode.findLinksTo(node).first();\r\n                model.setToKeyForLinkData(link.data, nextNode.data.key);\r\n\r\n                var link = node.findLinksTo(nextNode).first();\r\n                model.removeLinkData(link.data);\r\n            } else {\r\n                model.setDataProperty(preNode.data, \"next\", null);\r\n                var link = preNode.findLinksTo(node).first();\r\n                model.removeLinkData(link.data);\r\n            }\r\n\r\n        } else {\r\n            //it's the first child of it's parent\r\n            var parNode = diagram.findNodeForKey(node.data.parent);\r\n            if (node.data.next) {\r\n                var nextNode = diagram.findNodeForKey(node.data.next);\r\n                model.setDataProperty(parNode.data, \"isparent\", nextNode.data.key);\r\n                model.setDataProperty(nextNode.data, \"prev\", null);\r\n\r\n                var link = parNode.findLinksTo(node).first();\r\n                model.setToKeyForLinkData(link.data, nextNode.data.key);\r\n\r\n                link = node.findLinksTo(nextNode).first();\r\n                model.removeLinkData(link.data);\r\n            } else {\r\n                if (!parNode) {\r\n                    return;\r\n                }\r\n                model.setDataProperty(parNode.data, \"isparent\", null);\r\n                var link = parNode.findLinksTo(node).first();\r\n                if (link) {\r\n                    model.removeLinkData(link.data);\r\n                }\r\n\r\n\r\n                //remove group if parent node have children\r\n                var parGroup = parNode.containingGroup;\r\n                if (parGroup) {\r\n                    model.setDataProperty(parNode.data, 'group', parGroup.data.group);\r\n                    model.removeNodeData(parGroup.data);\r\n                }\r\n\r\n            }\r\n\r\n        }\r\n        model.setDataProperty(node.data, 'parent', null);\r\n        model.setDataProperty(node.data, 'prev', null);\r\n        model.setDataProperty(node.data, 'next', null);\r\n    } //end removing from original tree structure\r\n\r\n    function applyTheme2Link(linkToFollower, node) {\r\n        var myDiagram = node.diagram;\r\n        var tdCurrentTheme = myDiagram.__trtd.tdCurrentTheme\r\n        if (tdCurrentTheme.linkColor != null) {\r\n            // linkToFollower.color = tdCurrentTheme.linkColor;\r\n            myDiagram.model.setDataProperty(linkToFollower, 'color', tdCurrentTheme.linkColor);\r\n        }\r\n    \r\n        return linkToFollower;\r\n    }\r\n    \r\n    /***\r\n     * add group for node\r\n     * @param node go.Node\r\n     * @param parentGroupKey\r\n     */\r\n    function addGroupForNode(node, parentGroupKey) {\r\n        if (node.data.group != null || node.data.isparent == null) {\r\n            return;\r\n        }\r\n        var child = diagram.findNodeForKey(node.data.isparent);\r\n        if (!child) {\r\n            return;\r\n        }\r\n        var diagram = node.diagram;\r\n        var model = diagram.model;\r\n\r\n        var group = { isGroup: true, parent: node.data.key, key: \"g_\" + node.data.key, group: parentGroupKey, level: node.data.level };\r\n        model.addNodeData(group);\r\n        model.setDataProperty(node.data, \"group\", group.key);\r\n\r\n        // set group for his child.\r\n\r\n        var childGroup = child.containingGroup;\r\n        if (childGroup) {\r\n            model.setDataProperty(childGroup.data, \"group\", group.key);\r\n        } else {\r\n            model.setDataProperty(child.data, \"group\", group.key);\r\n        }\r\n        while (child.data.next) {\r\n            child = diagram.findNodeForKey(child.data.next);\r\n            childGroup = child.containingGroup;\r\n            if (childGroup) {\r\n                model.setDataProperty(childGroup.data, \"group\", group.key);\r\n            } else {\r\n                model.setDataProperty(child.data, \"group\", group.key);\r\n            }\r\n        }\r\n    }    \r\n\r\n    function ControlAutoLayout(e, flag) {\r\n        var myDiagram = e.diagram;\r\n        var diagram = e.diagram;\r\n        var node = diagram.selection.first();\r\n        if (node) {\r\n            var root = getRootNodeData( diagram.model, node.data, 0);\r\n            diagram.startTransaction(\"ControlAutoLayout\");\r\n            helpers.tdTravelTdpData(root, diagram.model, [], function(d) {\r\n\r\n                if (diagram.findNodeForKey(d.key).containingGroup && diagram.findNodeForKey(d.key).containingGroup.layout) {\r\n                    diagram.findNodeForKey(d.key).containingGroup.layout.isInitial = flag;\r\n                    diagram.findNodeForKey(d.key).containingGroup.layout.isOngoing = flag;\r\n                }\r\n            })\r\n            if (root.group && diagram.findNodeForKey(root.group)) {\r\n                diagram.findNodeForKey(root.group).layout.isInitial = flag;\r\n                diagram.findNodeForKey(root.group).layout.isOngoing = flag;\r\n            } else {\r\n                diagram.layout.isInitial = flag;\r\n                diagram.layout.isOngoing = flag;\r\n            }\r\n        } else {\r\n            diagram.nodes.each(function(node) {\r\n                if (diagram.findNodeForKey(node.data.key).layout) {\r\n                    diagram.findNodeForKey(node.data.key).layout.isInitial = flag;\r\n                    diagram.findNodeForKey(node.data.key).layout.isOngoing = flag;\r\n                }\r\n            });\r\n            diagram.layout.isInitial = flag;\r\n            diagram.layout.isOngoing = flag;\r\n        }\r\n        diagram.commitTransaction(\"ControlAutoLayout\");\r\n    }    \r\n\r\n//设置局部布局\r\nfunction autoLayoutPart(node) {\r\n    if (!node) return;\r\n    var group = node.containingGroup;\r\n    if (group) {\r\n        group.layout.isInitial = true;\r\n        group.layout.isOngoing = true;\r\n    }\r\n}\r\n\r\nfunction applyTheme2Group(group, node) {\r\n    var tdCurrentTheme = node.diagram.__trtd.tdCurrentTheme\r\n    if (tdCurrentTheme.groupStrokeWidth) {\r\n        node.diagram.model.setDataProperty(group, 'strokeWidth', tdCurrentTheme.groupStrokeWidth);\r\n        // group.strokeWidth = tdCurrentTheme.groupStrokeWidth;\r\n    }\r\n    if (tdCurrentTheme.groupStroke) {\r\n        group.stroke = tdCurrentTheme.groupStroke;\r\n        node.diagram.model.setDataProperty(group, 'stroke', tdCurrentTheme.groupStroke);\r\n    }\r\n    if (tdCurrentTheme.groupColor) {\r\n        group.fill = tdCurrentTheme.groupColor;\r\n        node.diagram.model.setDataProperty(group, 'fill', tdCurrentTheme.groupColor);\r\n    }\r\n    return group;\r\n}\r\n\r\nfunction computeChildLoc(root) {\r\n    if (root.data.isparent) {\r\n        var rootLoc = root.location.copy();\r\n        var rootPoint = new go.Point(0, 0);\r\n        var firstChild = root.diagram.findNodeForKey(root.data.isparent);\r\n        var firstLoc = firstChild.location.copy();\r\n        var relativeFirstLoc = new go.Point(firstLoc.x - rootLoc.x, firstLoc.y - rootLoc.y);\r\n\r\n        var relativeMidLoc = relativeFirstLoc.copy().rotate(-90);\r\n        var midLoc = new go.Point(relativeMidLoc.x + rootLoc.x, relativeMidLoc.y + rootLoc.y);\r\n        return midLoc;\r\n    }\r\n    var rootLoc = root.location.copy();\r\n    var offset = computeOffset(root.actualBounds.width + 100, 225);\r\n    rootLoc.offset(offset[0], offset[1]);\r\n\r\n    return rootLoc;\r\n}\r\n\r\nfunction computeNextLoc(node, root) {\r\n    /* 计算根据中心节点顺时针旋转一定角度得到的下一个节点位置 */\r\n    var rootLoc = root.location.copy();\r\n    var curLoc = node.location.copy();\r\n    var relativeLoc = new go.Point(curLoc.x - rootLoc.x, curLoc.y - rootLoc.y);\r\n    var rootPoint = new go.Point(0, 0);\r\n    var depth = 20;\r\n\r\n    if (node.data.next) { // 如果存在下一个节点，则新节点位于当前节点和下一个节点之间，稍微偏差一点\r\n        var nextNode = node.diagram.findNodeForKey(node.data.next);\r\n        var nextLoc = nextNode.location.copy();\r\n        var relativeNextLoc = new go.Point(nextLoc.x - rootLoc.x, nextLoc.y - rootLoc.y);\r\n\r\n        var relativeMidLoc = new go.Point((relativeLoc.x + relativeNextLoc.x) / 2, (relativeLoc.y + relativeNextLoc.y) / 2);\r\n        var angle = rootPoint.directionPoint(relativeMidLoc) - rootPoint.directionPoint(relativeLoc);\r\n        relativeMidLoc = relativeLoc.rotate(angle);\r\n        var offset = computeOffset(depth, rootPoint.directionPoint(relativeMidLoc));\r\n        relativeMidLoc.offset(offset[0], offset[1]);\r\n        var midLoc = new go.Point(relativeMidLoc.x + rootLoc.x, relativeMidLoc.y + rootLoc.y);\r\n        return midLoc;\r\n    }\r\n\r\n    //角度由前一个节点和当前节点一致\r\n    if (node.data.prev && node.diagram.findNodeForKey(node.data.prev)) {\r\n        var prevLoc = node.diagram.findNodeForKey(node.data.prev).location.copy();\r\n        var relativeLocPrev = new go.Point(prevLoc.x - rootLoc.x, prevLoc.y - rootLoc.y);\r\n        var angle = rootPoint.directionPoint(relativeLoc) - rootPoint.directionPoint(relativeLocPrev);\r\n        console.log('angle:' + angle);\r\n        if (angle > 45) {\r\n            angle = 45;\r\n        }\r\n    } else {\r\n        var angle = 60;\r\n    }\r\n    var lastLoc = relativeLoc.rotate(angle);\r\n    var offset = computeOffset(depth, rootPoint.directionPoint(lastLoc));\r\n    lastLoc.offset(offset[0], offset[1]);\r\n    lastLoc = new go.Point(lastLoc.x + rootLoc.x, lastLoc.y + rootLoc.y);\r\n    return lastLoc;\r\n}\r\n\r\nfunction computeOffset(newR, newStartAngle) {\r\n    //console.log(\"newStartAngle:\"+newStartAngle);\r\n    var ctl2, dy, dx; //需要调整\r\n    if (newStartAngle >= 0 && newStartAngle <= 90) {\r\n        dy = newR * Math.sin(newStartAngle * Math.PI / 180);\r\n        dx = newR * Math.cos(newStartAngle * Math.PI / 180);\r\n        return [dx, dy];\r\n    } else if (newStartAngle > 90 && newStartAngle <= 180) {\r\n        dy = newR * Math.sin((180 - newStartAngle) * Math.PI / 180);\r\n        dx = newR * Math.cos((180 - newStartAngle) * Math.PI / 180);\r\n        return [-dx, dy];\r\n    } else if (newStartAngle > 180 && newStartAngle <= 270) {\r\n        dy = newR * Math.sin((newStartAngle - 180) * Math.PI / 180);\r\n        dx = newR * Math.cos((newStartAngle - 180) * Math.PI / 180);\r\n        return [-dx, -dy];\r\n    } else if (newStartAngle > 270 && newStartAngle <= 360) {\r\n        dy = newR * Math.sin((360 - newStartAngle) * Math.PI / 180);\r\n        dx = newR * Math.cos((360 - newStartAngle) * Math.PI / 180);\r\n        return [dx, -dy];\r\n    }\r\n}\r\n\r\nfunction pushChildKeyToArr(data, arr, node) {\r\n    var myDiagram = node.diagram;\r\n    if (data.next) {\r\n        var obj = myDiagram.model.findNodeDataForKey(data.next);\r\n        arr.push(obj);\r\n        return pushChildKeyToArr(obj, arr, node);\r\n    } else {\r\n        return arr;\r\n    }\r\n}\r\n\r\n\r\nTrtd.go = go;\r\n\r\n// if (typeof window !== 'undefined') {\r\n// \tif(window.Trtd){\r\n//         window.Trtd.dipan = Trtd;\r\n//     } else{\r\n//         window.Trtd = {\r\n//             dipan: Trtd\r\n//         }\r\n//     }\r\n// }\r\n\r\nmodule.exports = Trtd;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/diagram/tianpan.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"http://static.365trtd.com/hardcore/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 13);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap ddcba70be63e353a1bae","// 'use strict';\n\n// var helpers = require('./helpers.core');\n// import buckets from '../assets/buckets.min'\n/**\n * @namespace Chart.helpers.canvas\n */\nvar exports = module.exports = {\n\n\tcheckPhone(){\n\t\t\tif(!navigator) return true;\n\t\t\tif ((navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i))) {\n\t\t\t\t/*window.location.href=\"你的手机版地址\";*/\n\t\t\t\treturn true\n\t\t\t}\n\t\t\telse {\n\t\t\t\t/*window.location.href=\"你的电脑版地址\";    */\n\t\t\t\treturn false\n\t\t\t}\n\t},\n\n\tguid() {\n\t\tfunction S4() {\n\t\t\treturn (((1+Math.random())*0x10000)|0).toString(16).substring(1);\n\t\t}\n\t\treturn (S4()+S4()+\"-\"+S4()+\"-\"+S4()+\"-\"+S4()+\"-\"+S4()+S4()+S4());\n\t},\n\n\tgetElementByAttr(document, tag,attr,value)\n\t{\n\t\tvar aElements=document.getElementsByTagName(tag);\n\t\tvar aEle=[];\n\t\tfor(var i=0;i<aElements.length;i++)\n\t\t{\n\t\t\tif(aElements[i].getAttribute(attr)==value)\n\t\t\t\taEle.push( aElements[i] );\n\t\t}\n\t\treturn aEle;\n\t},\n\t// extend: function(target) {\n\t// \tvar setFn = function(value, key) {\n\t// \t\ttarget[key] = value;\n\t// \t};\n\t// \tfor (var i = 1, ilen = arguments.length; i < ilen; ++i) {\n\t// \t\thelpers.each(arguments[i], setFn);\n\t// \t}\n\t// \treturn target;\n\t// },\n\n\t/**\n\t * Clears the entire canvas associated to the given `chart`.\n\t * @param {Chart} chart - The chart for which to clear the canvas.\n\t */\n\tclear: function(chart) {\n\t\tchart.ctx.clearRect(0, 0, chart.width, chart.height);\n\t},\n\tnodeInfo: function(d) {  // Tooltip info for a node data object\n\t\tvar str = \"Node \" + d.key + \": \" + d.text + \"\\n\";\n\t\tif (d.group)\n\t\t  str += \"member of \" + d.group;\n\t\telse\n\t\t  str += \"top-level node\";\n\t\treturn str;\n\t},\n\tlinkInfo: function(d) {  // Tooltip info for a link data object\n\t\treturn \"Link:\\nfrom \" + d.from + \" to \" + d.to;\n\t},\n\tgroupInfo: function(adornment) {  // takes the tooltip or context menu, not a group node data object\n\t\tvar g = adornment.adornedPart;  // get the Group that the tooltip adorns\n\t\tvar mems = g.memberParts.count;\n\t\tvar links = 0;\n\t\tg.memberParts.each(function(part) {\n\t\t\tif (part instanceof go.Link) links++;\n\t\t});\n\t\treturn \"Group \" + g.data.key + \": \" + g.data.text + \"\\n\" + mems + \" members including \" + links + \" links\";\n\t},\n\tqueue: function(){\n\t\tthis.data = [];\n\t\tthis.enqueue = function(record) {\n\t\t\tthis.data.unshift(record);\n\t\t  }\n\t\tthis.dequeue = function() {\n\t\t\tthis.data.pop();\n\t\t}\n\t},\n\t// buckets: buckets,\n\t\t//遍历天地盘做指定操作,colletor=[] 广度优先\n\t\ttdTravelTdpDataWidth: function(nodeData, model, collector, callback) {\n\t\t\t\n\t\t\tvar queue = new exports.queue(); //队列数据结构，辅助用\n\t\t\tconsole.log(\"queue:\",queue)\n\t\t\tqueue.enqueue(nodeData);\n\n\t\t\tvar dealingNode = null;\n\t\t\twhile (!queue.isEmpty()) {\n\t\t\t\tdealingNode = queue.dequeue();\n\t\t\t\tcollector.push(callback(dealingNode));\n\t\t\t\t//1 处理同级节点\n\t\t\t\tif (dealingNode.isparent) {\n\t\t\t\t\tvar childNodeData = model.findNodeDataForKey(dealingNode.isparent);\n\t\t\t\t\tif (childNodeData) {\n\t\t\t\t\t\tqueue.enqueue(childNodeData);\n\t\t\t\t\t\twhile (childNodeData.next && childNodeData.next != childNodeData.key) { //加入所有子节点\n\t\t\t\t\t\t\tchildNodeData = model.findNodeDataForKey(childNodeData.next);\n\t\t\t\t\t\t\tif (childNodeData) {\n\t\t\t\t\t\t\t\tqueue.enqueue(childNodeData);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t}\n\t\t},\n\n\t\t//遍历天地盘做指定操作,colletor=[]  深度优先\n\t\ttdTravelTdpData: function(nodeData, model, collector, callback) {\n\t\t\tif (nodeData) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\t\tcollector.push(callback(nodeData));\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\tconsole.log(e);\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t} else {\n\t\t\t\t\treturn;\n\t\t\t}\n\t\t\t//1 先处理子节点\n\t\t\tif (nodeData.isparent) {\n\t\t\t\t\tvar childNodeData = model.findNodeDataForKey(nodeData.isparent);\n\t\t\t\t\texports.tdTravelTdpData(childNodeData, model, collector, callback);\n\t\t\t}\n\t\t\t//2 再处理兄弟节点\n\t\t\tif (nodeData.next && nodeData.next != nodeData.key) { //处理异常情况\n\t\t\t\t\tvar nextNodeData = model.findNodeDataForKey(nodeData.next);\n\t\t\t\t\texports.tdTravelTdpData(nextNodeData, model, collector, callback);\n\t\t\t}\n\t\t},\n\t\tdeleteOldData(time){\n\t\t\tvar  temp, diff;\n\t\t\tfor(var item in window.localStorage) {\n\t\t\t\tif(window.localStorage.hasOwnProperty(item)) {\n\t\t\t\t\t// size += window.localStorage.getItem(item).length;\n\t\t\t\t\tif(item.startsWith(\"TDCurrent\")){\n\t\t\t\t\t\ttry{\n\t\t\t\t\t\t\ttemp = JSON.parse(window.localStorage.getItem(item))\n\t\t\t\t\t\t\tdiff =  new Date().getTime() - temp.modelData.updatedAt;\n\t\t\t\t\t\t\tif(diff/1000 > 86400*time){\n\t\t\t\t\t\t\t\tconsole.log(\"delete old data:\"+item)\n\t\t\t\t\t\t\t\twindow.localStorage.removeItem(item)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}catch(e){\n\t\t\t\t\t\t\tconsole.error(e)\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tsaveModelToLocalStorage(tpid, model){\n\t\t\tconsole.log(\"存储model到localStorage，只保留最近三天的\")\n\t\t\tmodel.modelData.updatedAt = new Date().getTime()\n\t\t\tif(!window.localStorage) {\n\t\t\t\tconsole.error('浏览器不支持localStorage');\n\t\t\t\treturn;\n\t\t\t}\t\t\n\t\t\t// 只保留最近一周内的盘\n\t\t\texports.deleteOldData(3)\n\t\t\ttry{\n\t\t\t\twindow.localStorage.setItem(\"TDCurrent\" + tpid, model.toJson());\n\t\t\t}catch(e){\n\t\t\t\texports.deleteOldData(1)\n\t\t\t\t// window.localStorage.clear()\n\t\t\t}\n\t\t},\n\n\t\t// 检查gojs model数据关系是否正确\n\t\tcheckModel: function(model){\n\t\t\tvar nodeDataArray = model.nodeDataArray\n\t\t\tvar root = model.findNodeDataForKey(1)\n\t\t\tvar collectior = []\n\t\t\tfunction checkDataExists(key){\n\t\t\t\tvar data = model.findNodeDataForKey(key)\n\t\t\t\tif(data){\n\t\t\t\t\treturn \"exist\"\n\t\t\t\t}else{\n\t\t\t\t\treturn \"not exist\"\n\t\t\t\t}\n\t\t\t}\n\t\t\texports.tdTravelTdpData(root, model, collectior, function(data){\n\t\t\t\t\n\t\t\t\tvar msg = `check key:${data.key},level:${data.level},parent:${data.parent},`+\n\t\t\t\t`isparent:${data.isparent},prev:${data.prev},next:${data.next}`\n\t\t\t\tif(data.next && checkDataExists(data.next) == \"not exist\"){\n\t\t\t\t\tconsole.error(`data ${data.key} next指向的节点不存在, data: ${msg}`)\n\t\t\t\t}\n\t\t\t\tif(data.isparent && checkDataExists(data.isparent) == \"not exist\"){\n\t\t\t\t\tconsole.error(`data ${data.key} isparent指向的节点不存在, data: ${msg}`)\n\t\t\t\t}\n\t\t\t\tif(data.parent && checkDataExists(data.parent) == \"not exist\"){\n\t\t\t\t\tconsole.error(`data ${data.key} parent指向的节点不存在, data: ${msg}`)\n\t\t\t\t}\n\t\t\t\tif(data.prev && checkDataExists(data.prev) == \"not exist\"){\n\t\t\t\t\tconsole.error(`data ${data.key} prev指向的节点不存在, data: ${msg}`)\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\t// 数值转换\n\t\ttdTransToNum(from, defaultVal) {\n\t\t\tif(arguments.length <= 1){\n\t\t\t\tdefaultVal = 0\n\t\t\t}\n\t\t\tvar result = defaultVal;\n\t\t\ttry {\n\t\t\t\tresult = parseFloat(from);\n\t\t\t\treturn result;\n\t\t\t} catch (e) {\n\t\t\t\treturn result;\n\t\t\t}\n\t\t\t},\t\n\t\tsimulateEnterWithAlt(e) { //模拟alt+Enter键盘,将gojs内置文本编辑窗口中的Alt+Enter 转换为\\n\n\t\t\tvar myDiagram = e.diagram;\n\t\t\tif (myDiagram.currentTool.currentTextEditor) {\n\t\t\t\t// jQuery(myDiagram.currentTool.currentTextEditor).unbind(\"keypress\", myDiagram.currentTool.currentTextEditor);\n\t\t\t\t// jQuery(myDiagram.currentTool.currentTextEditor).keypress(textEditorHandler);\n\t\t\t\tmyDiagram.currentTool.currentTextEditor.mainElement.onkeypress = null;\n\t\t\t\tmyDiagram.currentTool.currentTextEditor.mainElement.onkeypress = textEditorHandler;\n\t\t\t\tvar val = myDiagram.currentTool.currentTextEditor.mainElement.value\n\t\t\t\t// 只在手机端定位到结尾\n\t\t\t\tif(module.exports.checkPhone()){\n\t\t\t\t\tmyDiagram.currentTool.currentTextEditor.mainElement.selectionStart = val.length; \n\t\t\t\t\tmyDiagram.currentTool.currentTextEditor.mainElement.selectionEnd = val.length; \n\t\t\t\t}\n\t\t\t\tfunction textEditorHandler(e) {\n\t\t\t\t\tvar evt = e;\n\t\t\t\t\tconsole.log('textblock catched the key:' + evt);\n\t\t\t\t\tif (evt.which) {\n\t\t\t\t\t\tif (evt.keyCode == 13 && evt.altKey || evt.keyCode == 10 && evt.ctrlKey || evt.keyCode == 13 && evt.shiftKey || evt.keyCode == 10 && evt.shiftKey) {\n\t\t\t\t\t\t\tvar start = this.selectionStart,\n\t\t\t\t\t\t\t\tend = this.selectionEnd,\n\t\t\t\t\t\t\t\tval = this.value;\n\t\t\t\t\t\t\tthis.value = val.slice(0, start) + \"\\n\" + val.slice(end);\n\t\t\t\t\n\t\t\t\t\t\t\t// Move the caret\n\t\t\t\t\t\t\tthis.selectionStart = this.selectionEnd = start + 1;\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\n\t\t\t\t\tif (evt.keyCode == 13 && !evt.altKey) {\n\t\t\t\t\n\t\t\t\t\t\tif (myDiagram.currentTool.isActive) {\n\t\t\t\t\t\t\tmyDiagram.currentTool.acceptText(go.TextEditingTool.LostFocus);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn false; //阻止默认行为\n\t\t\t\t\t}\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t/***\n * travel nodes, group and links\n * @param rootnode go.Node\n * @param callback function(part){}\n */\ntravelParts(rootNode, callback) {\n    var diagram = rootNode.diagram;\n    callback(rootNode);\n    var group = rootNode.containingGroup;\n    if (group && group.data.parent == rootNode.data.key) {\n        callback(group);\n    }\n    var stack = [rootNode];\n    var node, link, child, nextChild;\n    while (stack.length > 0) {\n        node = stack.pop();\n        if (node.data.isparent) {\n            child = diagram.findNodeForKey(node.data.isparent);\n            link = node.findLinksTo(child).first();\n            callback(link);\n            callback(child);\n            group = child.containingGroup;\n            if (group && group.data.parent == child.data.key) {\n                callback(group);\n            }\n            stack.push(child);\n            while (child.data.next) {\n                nextChild = diagram.findNodeForKey(child.data.next);\n                link = child.findLinksTo(nextChild).first();\n                callback(link);\n                callback(nextChild);\n                group = nextChild.containingGroup;\n                if (group && group.data.parent == nextChild.data.key) {\n                    callback(group);\n                }\n                stack.push(nextChild);\n                child = nextChild;\n            }\n        }\n    }\n}\n\n\t\t\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/helpers/helpers.gojs.js","var $ = go.GraphObject.make;\r\nconsole.info(\"gggggggggggggggggggggggg\")\r\ngo.GraphObject.defineBuilder('CircleButton', function (args) {\r\n    // default colors for 'Button' shape\r\n    var buttonFillNormal = '#F5F5F5';\r\n    var buttonStrokeNormal = '#BDBDBD';\r\n    var buttonFillOver = '#E0E0E0';\r\n    var buttonStrokeOver = '#9E9E9E';\r\n    var buttonFillPressed = '#BDBDBD'; // set to null for no button pressed effects\r\n    var buttonStrokePressed = '#9E9E9E';\r\n    var buttonFillDisabled = '#E5E5E5';\r\n  \r\n    // padding inside the ButtonBorder to match sizing from previous versions\r\n    var paddingHorizontal = 2.76142374915397;\r\n    var paddingVertical = 2.761423749153969;\r\n  \r\n    var button = (\r\n      go.GraphObject.make(go.Panel, 'Auto',\r\n        {\r\n          isActionable: true,  // needed so that the ActionTool intercepts mouse events\r\n          enabledChanged: function (btn, enabled) {\r\n            var shape = btn.findObject('ButtonBorder');\r\n            if (shape !== null) {\r\n              shape.fill = enabled ? btn['_buttonFillNormal'] : btn['_buttonFillDisabled'];\r\n            }\r\n          },\r\n          cursor: 'pointer',\r\n          // save these values for the mouseEnter and mouseLeave event handlers\r\n          '_buttonFillNormal': buttonFillNormal,\r\n          '_buttonStrokeNormal': buttonStrokeNormal,\r\n          '_buttonFillOver': buttonFillOver,\r\n          '_buttonStrokeOver': buttonStrokeOver,\r\n          '_buttonFillPressed': buttonFillPressed,\r\n          '_buttonStrokePressed': buttonStrokePressed,\r\n          '_buttonFillDisabled': buttonFillDisabled\r\n        },\r\n        go.GraphObject.make(go.Shape,  // the border\r\n          {\r\n            name: 'ButtonBorder',\r\n            figure: 'Circle',\r\n            spot1: new go.Spot(0, 0, paddingHorizontal, paddingVertical),\r\n            spot2: new go.Spot(1, 1, -paddingHorizontal, -paddingVertical),\r\n            parameter1: 2,\r\n            parameter2: 2,\r\n            fill: buttonFillNormal,\r\n            stroke: buttonStrokeNormal\r\n          }\r\n        )\r\n      )\r\n    );\r\n  \r\n    // There's no GraphObject inside the button shape -- it must be added as part of the button definition.\r\n    // This way the object could be a TextBlock or a Shape or a Picture or arbitrarily complex Panel.\r\n  \r\n    // mouse-over behavior\r\n    button.mouseEnter = function (e, btn, prev) {\r\n      if (!btn.isEnabledObject()) return;\r\n      var shape = btn.findObject('ButtonBorder');  // the border Shape\r\n      if (shape instanceof go.Shape) {\r\n        var brush = btn['_buttonFillOver'];\r\n        btn['_buttonFillNormal'] = shape.fill;\r\n        shape.fill = brush;\r\n        brush = btn['_buttonStrokeOver'];\r\n        btn['_buttonStrokeNormal'] = shape.stroke;\r\n        shape.stroke = brush;\r\n      }\r\n    };\r\n  \r\n    button.mouseLeave = function (e, btn, prev) {\r\n      if (!btn.isEnabledObject()) return;\r\n      var shape = btn.findObject('ButtonBorder');  // the border Shape\r\n      if (shape instanceof go.Shape) {\r\n        shape.fill = btn['_buttonFillNormal'];\r\n        shape.stroke = btn['_buttonStrokeNormal'];\r\n      }\r\n    };\r\n  \r\n    // mousedown/mouseup behavior\r\n    button.actionDown = function (e, btn) {\r\n      if (!btn.isEnabledObject()) return;\r\n      if (btn['_buttonFillPressed'] === null) return;\r\n      if (e.button !== 0) return;\r\n      var shape = btn.findObject('ButtonBorder');  // the border Shape\r\n      if (shape instanceof go.Shape) {\r\n        var diagram = e.diagram;\r\n        var oldskip = diagram.skipsUndoManager;\r\n        diagram.skipsUndoManager = true;\r\n        var brush = btn['_buttonFillPressed'];\r\n        btn['_buttonFillOver'] = shape.fill;\r\n        shape.fill = brush;\r\n        brush = btn['_buttonStrokePressed'];\r\n        btn['_buttonStrokeOver'] = shape.stroke;\r\n        shape.stroke = brush;\r\n        diagram.skipsUndoManager = oldskip;\r\n      }\r\n    };\r\n  \r\n    button.actionUp = function (e, btn) {\r\n      if (!btn.isEnabledObject()) return;\r\n      if (btn['_buttonFillPressed'] === null) return;\r\n      if (e.button !== 0) return;\r\n      var shape = btn.findObject('ButtonBorder');  // the border Shape\r\n      if (shape instanceof go.Shape) {\r\n        var diagram = e.diagram;\r\n        var oldskip = diagram.skipsUndoManager;\r\n        diagram.skipsUndoManager = true;\r\n        if (overButton(e, btn)) {\r\n          shape.fill = btn['_buttonFillOver'];\r\n          shape.stroke = btn['_buttonStrokeOver'];\r\n        } else {\r\n          shape.fill = btn['_buttonFillNormal'];\r\n          shape.stroke = btn['_buttonStrokeNormal'];\r\n        }\r\n        diagram.skipsUndoManager = oldskip;\r\n      }\r\n    };\r\n  \r\n    button.actionCancel = function (e, btn) {\r\n      if (!btn.isEnabledObject()) return;\r\n      if (btn['_buttonFillPressed'] === null) return;\r\n      var shape = btn.findObject('ButtonBorder');  // the border Shape\r\n      if (shape instanceof go.Shape) {\r\n        var diagram = e.diagram;\r\n        var oldskip = diagram.skipsUndoManager;\r\n        diagram.skipsUndoManager = true;\r\n        if (overButton(e, btn)) {\r\n          shape.fill = btn['_buttonFillOver'];\r\n          shape.stroke = btn['_buttonStrokeOver'];\r\n        } else {\r\n          shape.fill = btn['_buttonFillNormal'];\r\n          shape.stroke = btn['_buttonStrokeNormal'];\r\n        }\r\n        diagram.skipsUndoManager = oldskip;\r\n      }\r\n    };\r\n  \r\n    button.actionMove = function (e, btn) {\r\n      if (!btn.isEnabledObject()) return;\r\n      if (btn['_buttonFillPressed'] === null) return;\r\n      var diagram = e.diagram;\r\n      if (diagram.firstInput.button !== 0) return;\r\n      diagram.currentTool.standardMouseOver();\r\n      if (overButton(e, btn)) {\r\n        var shape = btn.findObject('ButtonBorder');\r\n        if (shape instanceof go.Shape) {\r\n          var oldskip = diagram.skipsUndoManager;\r\n          diagram.skipsUndoManager = true;\r\n          var brush = btn['_buttonFillPressed'];\r\n          if (shape.fill !== brush) shape.fill = brush;\r\n          brush = btn['_buttonStrokePressed'];\r\n          if (shape.stroke !== brush) shape.stroke = brush;\r\n          diagram.skipsUndoManager = oldskip;\r\n        }\r\n      }\r\n    };\r\n  \r\n    function overButton(e, btn) {\r\n      var over = e.diagram.findObjectAt(\r\n        e.documentPoint,\r\n        function (x) {\r\n          while (x.panel !== null) {\r\n            if (x.isActionable) return x;\r\n            x = x.panel;\r\n          }\r\n          return x;\r\n        },\r\n        function (x) { return x === btn; }\r\n      );\r\n      return over !== null;\r\n    }\r\n  \r\n    return button;\r\n  });\r\n  \r\nclass NodeBase {\r\n    constructor(options){\r\n        var that = this\r\n        this.diagram = options.diagram\r\n        this.nodeProperties = this.getNodeProperties()\r\n        this.binding = this.getBinding()\r\n        // this.nodeTemplate = this.getNodeTemplate()\r\n    }\r\n\r\n    getNodeProperties(){\r\n        var that = this\r\n        var diagram = this.diagram\r\n        var properties = {\r\n            // type: go.Panel.Auto,\r\n            // \"_controlExpand\": true,\r\n            // layerName: \"default\",\r\n            // locationSpot: go.Spot.Center,\r\n            // resizeCellSize: new go.Size(10, 10),\r\n            // // locationObjectName: \"SHAPE\",\r\n            // resizable: true,\r\n            // // resizeObjectName: \"SHAPE\", // user can resize the Shape\r\n            // rotatable: false,\r\n            // location: new go.Point(0, 0),\r\n            // click: that.click,\r\n            // //rotateObjectName: \"SHAPE\",  // rotate the Shape without rotating the label\r\n            // doubleClick: that.doubleClick,\r\n            // toMaxLinks: 1,\r\n            // layoutConditions: go.Part.LayoutStandard,\r\n            // //layoutConditions:~go.Part.LayoutAdded,\r\n            // // fromLinkable: true, toLinkable: true,\r\n            // alignment: go.Spot.Center,\r\n            // alignmentFocus: go.Spot.Center,\r\n            // resizeAdornmentTemplate: diagram.__trtd.nodeResizeAdornmentTemplate(),\r\n            // // contextMenu: $(go.Adornment),\r\n            // contextMenu: diagram.__trtd.getNodeContextMenu(),\r\n            // selectionAdornmentTemplate: diagram.__trtd.getNodeSelectionAdornmentTemplate(),\r\n            // mouseOver: that.mouseOver,\r\n            // mouseLeave: that.mouseLeave,\r\n            // mouseDragEnter: that.mouseDragEnter,\r\n            // mouseDragLeave: that.mouseDragLeave,\r\n            // mouseDrop: that.mouseDrop\r\n        }\r\n        return properties\r\n    }\r\n\r\n    getNodeSelectionAdornmentTemplate(){\r\n      return  $(go.Adornment, \"Auto\",\r\n          $(go.Shape, \"Rectangle\",\r\n          // { fill: null, stroke: \"#9aa8b6\", strokeWidth: 1 }),\r\n          { fill: null, stroke: \"dodgerblue\", strokeWidth: 3 }),\r\n          $(go.Placeholder)\r\n        )  // end Adornment\r\n    }\r\n\r\n    getBinding(){\r\n        return [\r\n            new go.Binding(\"location\", \"loc\", go.Point.parse).makeTwoWay(go.Point.stringify),\r\n            new go.Binding(\"movable\", \"movable\").makeTwoWay(),\r\n            new go.Binding(\"isShadowed\", \"isShadowed\").makeTwoWay(),\r\n            new go.Binding(\"selectable\", \"selectable\").makeTwoWay(),\r\n            new go.Binding(\"angle\", \"angle\").makeTwoWay(),\r\n            new go.Binding(\"copyable\", \"copyable\").makeTwoWay(),\r\n        ]\r\n    }\r\n    getTextBuild(){\r\n        return $(go.TextBlock, {\r\n                name: \"TEXT\",\r\n                alignment: new go.Spot(0.5, 0.4),\r\n                font: \"bold 18px 幼圆\",\r\n                editable: true,\r\n                // flip:go.GraphObject.FlipHorizontal,\r\n                //margin: 3, editable: true,\r\n                stroke: \"black\",\r\n                isMultiline: true,\r\n                overflow: go.TextBlock.OverflowClip,\r\n                wrap: go.TextBlock.WrapDesiredSize,\r\n                textAlign: \"center\",\r\n                spacingAbove: 4,\r\n                spacingBelow: 4,\r\n                portId: \"TEXT\",\r\n                stretch: go.GraphObject.Uniform\r\n            },\r\n            new go.Binding(\"textAlign\", \"textAlign\", function(v) {\r\n                return ['start', 'center', 'end'].indexOf(v)>-1 ? v : \"center\";\r\n            }).makeTwoWay(),\r\n            new go.Binding(\"spacingAbove\", \"spacingline\", function(v) {\r\n                return helpers.tdTransToNum(v, 4);\r\n            }).makeTwoWay(),\r\n            new go.Binding(\"spacingBelow\", \"spacingline\", function(v) {\r\n                return helpers.tdTransToNum(v, 4);\r\n            }).makeTwoWay(),\r\n            new go.Binding(\"width\", \"width\", function(v) {\r\n                return v-30;\r\n            }).ofObject(\"main\"),\r\n            // new go.Binding(\"height\", \"height\", function (v) {\r\n            //   return v;\r\n            // }).ofObject(\"SHAPE\"),\r\n            new go.Binding(\"text\", \"text\").makeTwoWay(),\r\n            new go.Binding(\"stroke\", \"textStroke\").makeTwoWay(),\r\n            new go.Binding(\"font\", \"font\").makeTwoWay()\r\n        )\r\n      }\r\n      \r\n    getNodeTemplate(){\r\n        console.log(\"NodeBase.getNodeTemplate\")\r\n        var that = this;\r\n        return $(go.Node, \r\n            that.nodeProperties,\r\n            that.binding\r\n        );\r\n    }\r\n\r\n    click(e, node){\r\n        // console.log(node.data)\r\n        if(node.diagram.__trtd.nodeClickListener){\r\n            node.diagram.__trtd.nodeClickListener(node)\r\n        }\r\n    }\r\n\r\n    doubleClick(e, node){\r\n        e.diagram.__trtd.selectText(e, node)\r\n    }\r\n\r\n    mouseOver(e, node) {\r\n        // if(node.data.hyperlink){\r\n        //   var textObj = node.findObject('TEXT');\r\n        //   textObj.isUnderline = true;\r\n        // }\r\n\r\n        e.diagram.__trtd.showNodeRemarkTips(e, node);\r\n\r\n    }\r\n\r\n    mouseLeave(e, node) {\r\n        // if(node.data.hyperlink) {\r\n        //   var textObj = node.findObject('TEXT');\r\n        //   textObj.isUnderline = false;\r\n        // }\r\n        e.diagram.__trtd.removeNodeRemarkTips();\r\n    }\r\n    mouseDragEnter(e, obj) {\r\n        var node = obj.part;\r\n        var selnode = e.diagram.selection.first();\r\n        if (!(selnode instanceof go.Node) || selnode.category == \"3\" || selnode.category == \"text\" || selnode.key == 1) {\r\n            return;\r\n        }\r\n        //var sat = node.selectionAdornmentTemplate;\r\n        //var adorn = sat.copy();\r\n        //adorn.adornedObject = node;\r\n        //node.addAdornment(\"dragEnter\", adorn);\r\n\r\n        //if (!mayWorkFor(selnode, node)) return;\r\n        var shape = node.findObject(\"SHAPE\");\r\n        if (shape) {\r\n            shape._prevFill = shape.fill; // remember the original brush\r\n            shape.fill = \"darkred\";\r\n        }\r\n\r\n    }\r\n    mouseDragLeave(e, obj) {\r\n        var node = obj.part;\r\n        var shape = node.findObject(\"SHAPE\");\r\n        if (shape && shape._prevFill) {\r\n            shape.fill = shape._prevFill; // restore the original brush\r\n        }\r\n        //node.removeAdornment(\"dragEnter\");\r\n    }\r\n    mouseDrop(e, obj) {\r\n        var node = obj.part;\r\n        var selnode = e.diagram.selection.first();\r\n        if (!(selnode instanceof go.Node) || selnode.data.category == \"3\" || selnode.data.category == \"text\" || selnode.data.key == 1) {\r\n            return;\r\n        }\r\n\r\n        if (node.data.isparent) {\r\n            var child = e.diagram.findNodeForKey(node.data.isparent);\r\n            while (child.data.next) {\r\n                child = e.diagram.findNodeForKey(child.data.next);\r\n            }\r\n            if (child.data.key == selnode.data.key) {\r\n                //最后一个子节点拖放到父节点上时，不做任何操作\r\n                return;\r\n            }\r\n            e.diagram.__trtd.setNodeAsSibling(selnode, child);\r\n        } else {\r\n            e.diagram.__trtd.setNodeAsChildren(selnode, node);\r\n        }\r\n    }\r\n}\r\n\r\nmodule.exports = NodeBase\n\n\n// WEBPACK FOOTER //\n// ./src/nodeTemplate/base.js","var $ = go.GraphObject.make;\r\n\r\nmodule.exports = // 返回图片天盘的独立节点模板\r\nfunction createPictureSingleNodeTemplate (diagram) {\r\n    // var $ = go.GraphObject.make;\r\n    var properties = {\r\n        figure: \"Circle\",\r\n        fill: \"white\",\r\n        strokeWidth: 1,\r\n        stroke: \"#767678\",\r\n        fontSize: 15,\r\n        font: \"sans-serif\"\r\n    };\r\n    return $(go.Node, \"Auto\", {\r\n        name: \"NODE\",\r\n        \"_controlExpand\": true,\r\n        layerName: \"Background\",\r\n        // layerName: \"Foreground\",\r\n        zOrder: 20,\r\n        locationSpot: go.Spot.Center,\r\n        resizeCellSize: new go.Size(10, 10),\r\n        locationObjectName: \"SHAPE\",\r\n        resizable: true,\r\n        resizeObjectName: \"SHAPE\", // user can resize the Shape\r\n        rotatable: true,\r\n        rotateObjectName: \"SHAPE\", // rotate the Shape without rotating the label\r\n        doubleClick: function (e, node) {\r\n            // interactions.selectText(e, node)\r\n            console.log(node.data)\r\n            if(node.diagram.__trtd.nodeDoubleClickListener){\r\n                node.diagram.__trtd.nodeDoubleClickListener(node)\r\n            }\r\n            \r\n        },\r\n        click: function(e, node) {\r\n            console.log(node.data)\r\n            if(node.diagram.__trtd.nodeClickListener){\r\n                node.diagram.__trtd.nodeClickListener(node)\r\n            }\r\n            // showNodeToolBar(e,node);\r\n        },\r\n        selectable: true,\r\n        movable: true,\r\n        angle: 0,\r\n        //toMaxLinks: 1,\r\n        layoutConditions: go.Part.LayoutStandard,\r\n        //layoutConditions:~go.Part.LayoutAdded,\r\n        // fromLinkable: true, toLinkable: true,\r\n        alignment: go.Spot.Center,\r\n        alignmentFocus: go.Spot.Center,\r\n        resizeAdornmentTemplate: diagram.__trtd.nodeResizeAdornmentTemplate(),\r\n        //rotateAdornmentTemplate: nodeRotateAdornmentTemplate,\r\n        contextMenu: diagram.__trtd.nodeContextMenu,\r\n        selectionAdornmentTemplate: function() {\r\n            var $ = go.GraphObject.make;\r\n            return $(go.Adornment, \"Spot\",\r\n                $(go.Panel, \"Auto\",\r\n                    $(go.Shape, { fill: null, stroke: \"blue\", strokeWidth: 1 }),\r\n                    $(go.Placeholder) // this represents the selected Node\r\n\r\n                ),\r\n                //$(\"TreeExpanderButton\",\r\n                $(go.Panel, \"Vertical\", {\r\n                        name: \"ButtonIcon1\",\r\n                        alignment: new go.Spot(0, 1, -20, 20),\r\n                        alignmentFocus: go.Spot.Center,\r\n                        width: 60,\r\n                        height: 60,\r\n                        isActionable: true,\r\n                        // click: interactions.expandCollapse // this function is defined below\r\n                    },\r\n\r\n                    $(go.Shape, \"Circle\", {\r\n                        fill: \"rgba(1,1,1,0)\",\r\n                        strokeWidth: 0,\r\n                        stroke: \"green\",\r\n                        width: 50,\r\n                        height: 50\r\n                    })\r\n\r\n                )\r\n            ); // end Adornment\r\n        }(),\r\n        contextMenu: function() {\r\n            var $ = go.GraphObject.make;\r\n            return $(go.Adornment, \"Vertical\",\r\n                $(\"ContextMenuButton\",\r\n                    $(go.TextBlock, \"删除\"), {\r\n                        click: function(e, obj) {\r\n                            e.diagram.commandHandler.deleteSelection();\r\n                        }\r\n                    }),\r\n                $(\"ContextMenuButton\",\r\n                    $(go.TextBlock, \"居中\"), {\r\n                        click: function(e, obj) {\r\n                            centerPicture();\r\n                        }\r\n                    }),\r\n                $(\"ContextMenuButton\",\r\n                    $(go.TextBlock, \"等宽高\"), {\r\n                        click: function(e, obj) {\r\n                            equalWidthHeightPicture();\r\n                        }\r\n                    }),\r\n                $(\"ContextMenuButton\",\r\n                    $(go.TextBlock, \"原始比例\", { stroke: \"gray\" }), {\r\n                        click: function(e, obj) {\r\n                            //equalWidthHeightPicture();\r\n                        }\r\n                    }),\r\n                $(\"ContextMenuButton\",\r\n                    $(go.TextBlock, \"至于顶层\"), {\r\n                        click: function(e, obj) {\r\n                            //bringToBackground();\r\n                            bringToLayer(\"Foreground\");\r\n                        }\r\n                    }),\r\n                $(\"ContextMenuButton\",\r\n                    $(go.TextBlock, \"至于底层\"), {\r\n                        click: function(e, obj) {\r\n                            bringToLayer(\"Background\");\r\n                        }\r\n                    }),\r\n                $(\"ContextMenuButton\",\r\n                    $(go.TextBlock, \"上移一层\"), {\r\n                        click: function(e, obj) {\r\n                            bringToLayer(null);\r\n                        }\r\n                    }),\r\n                $(\"ContextMenuButton\",\r\n                    $(go.TextBlock, \"固定\",\r\n                        new go.Binding(\"text\", \"\", function(d, obj) {\r\n                            var node = obj.part;\r\n                            return node.data.selectable != undefined ? (node.data.selectable ? \"固定\" : \"取消固定\") : \"固定\";\r\n                        })\r\n                    ), {\r\n                        name: \"fixnode\",\r\n                        click: function(e, obj) {\r\n                            var diagram = obj.diagram;\r\n                            var node = obj.part;\r\n                            diagram.startTransaction();\r\n                            //node.setProperties({\"movable\":node.data.movable?(!node.data.movable):true});\r\n                            diagram.model.setDataProperty(node.data, \"selectable\", node.data.selectable != undefined ? (!node.data.selectable) : false);\r\n                            diagram.commitTransaction();\r\n                        }\r\n                    }\r\n                )\r\n            );\r\n        }()},\r\n        new go.Binding(\"location\", \"loc\", go.Point.parse).makeTwoWay(go.Point.stringify),\r\n        new go.Binding(\"isShadowed\", \"isShadowed\").makeTwoWay(),\r\n        new go.Binding(\"selectable\", \"selectable\").makeTwoWay(),\r\n        new go.Binding(\"movable\", \"movable\").makeTwoWay(),\r\n        new go.Binding(\"layerName\", \"layerName\", function(v, d) {\r\n            return v ? v : \"\";\r\n        }).makeTwoWay(function(v) {\r\n            return v;\r\n        }),\r\n        $(go.TextBlock, // the text label\r\n            new go.Binding(\"text\", \"text\")),\r\n        $(go.Picture, // the icon showing the logo\r\n            // You should set the desiredSize (or width and height)\r\n            // whenever you know what size the Picture should be.\r\n            { name: \"SHAPE\" }, {\r\n                successFunction: function(pict, evt) {\r\n                    if ((!pict.width || !pict.height) && (!pict.part.data.width || !pict.part.data.height)) {\r\n                        pict.width = pict.element.width;\r\n                        pict.height = pict.element.height;\r\n                    }\r\n                }\r\n            }, {\r\n                sourceCrossOrigin: function(pict) {\r\n                    return \"\";\r\n                }\r\n            },\r\n            new go.Binding(\"source\", \"picture\", function(v){\r\n                    \r\n                return v+\"?\"+Date.now()\r\n\r\n            }).makeTwoWay(function(v){\r\n                if(v){\r\n                    v = v.replace(/\\?.*$/g,\"\")\r\n                    return v\r\n                }else{\r\n                    return \"\"\r\n                }\r\n            }),\r\n            new go.Binding(\"width\", \"width\", function(v, d) {\r\n                return v;\r\n            }).makeTwoWay(function(v) {\r\n                return v;\r\n            }),\r\n            new go.Binding(\"height\", \"height\", function(v, d) {\r\n                return v;\r\n            }).makeTwoWay(function(v) {\r\n                return v;\r\n            }),\r\n            new go.Binding(\"angle\", \"pictureangle\").makeTwoWay(),\r\n            new go.Binding(\"opacity\", \"opacity\", function(v, d) {\r\n                return v ? parseFloat(v) : 1;\r\n            }).makeTwoWay(function(v) {\r\n                return v;\r\n            })\r\n        )\r\n    );\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/nodeTemplate/createPictureSingleNodeTemplate.js","var $ = go.GraphObject.make;\r\n\r\nmodule.exports = function createTextNodeTemplate (diagram) {\r\n    var properties = {\r\n        figure: \"Rectangle\",\r\n        fill: \"rgba(0,0,0,0)\",\r\n        strokeWidth: 1,\r\n        stroke: \"rgba(0,0,0,0)\",\r\n        fontSize: 15,\r\n        font: \"sans-serif\"\r\n    };\r\n    return $(go.Node, \"Spot\", {\r\n            \"_controlExpand\": true,\r\n            layerName: \"Foreground\",\r\n            movable: true,\r\n            locationSpot: go.Spot.Center,\r\n            resizeCellSize: new go.Size(10, 10),\r\n            locationObjectName: \"SHAPE\",\r\n            resizable: true,\r\n            resizeObjectName: \"SHAPE\", // user can resize the Shape\r\n            rotatable: true,\r\n            location: new go.Point(0, 0),\r\n            //rotateObjectName: \"SHAPE\",  // rotate the Shape without rotating the label\r\n            // doubleClick: selectText,\r\n            toMaxLinks: 1,\r\n            layoutConditions: go.Part.LayoutStandard,\r\n            //layoutConditions:~go.Part.LayoutAdded,\r\n            // fromLinkable: true, toLinkable: true,\r\n            alignment: go.Spot.Center,\r\n            alignmentFocus: go.Spot.Center,\r\n            contextMenu: diagram.__trtd.getNodeContextMenu(),\r\n            doubleClick: function (e, node){\r\n                e.diagram.__trtd.selectText(e, node)\r\n            }\r\n\r\n            // selectionAdornmentTemplate: nodeSelectionAdornmentTemplate,\r\n        },\r\n        new go.Binding(\"locationSpot\", \"locationSpot\", function(v){\r\n            console.log(\"locationSpot1\")\r\n            return go.Spot.parse(v)\r\n        }).makeTwoWay(function(v){\r\n            console.log(\"locationSpot2\")\r\n            return go.Spot.stringify(v)\r\n        }),\r\n        new go.Binding(\"deletable\", \"deletable\").makeTwoWay(),\r\n        new go.Binding(\"movable\", \"movable\").makeTwoWay(),\r\n        new go.Binding(\"location\", \"loc\", go.Point.parse).makeTwoWay(go.Point.stringify),\r\n        new go.Binding(\"isShadowed\", \"isShadowed\").makeTwoWay(),\r\n        new go.Binding(\"angle\", \"angle\").makeTwoWay(),\r\n        new go.Binding(\"selectable\", \"selectable\").makeTwoWay(),\r\n        new go.Binding(\"layerName\", \"layerName\", function(v, d) {\r\n            return v ? v : \"\";\r\n        }).makeTwoWay(function(v) {\r\n            return v;\r\n        }),\r\n        $(go.Shape, {\r\n                strokeDashArray: null,\r\n                // strokeDashOffset:10,\r\n                name: \"SHAPE\",\r\n                figure: \"Rectangle\",\r\n                fill: \"rgba(0,0,0,0)\",\r\n                fromLinkable: true,\r\n                toLinkable: true,\r\n                cursor: \"pointer\",\r\n                minSize: new go.Size(50, 50),\r\n                strokeWidth: 2,\r\n                stroke: \"rgba(0,0,0,0)\",\r\n                portId: \"\",\r\n                width:150\r\n            },\r\n            new go.Binding(\"strokeDashArray\", \"strokeDashArray\", function(v) {\r\n                return [v.split()[0], v.split()[1]];\r\n            }).makeTwoWay(function(v) {\r\n                return v[0] + \" \" + v[1];\r\n            }), //保留，设置边线样式\r\n            new go.Binding(\"fill\", \"fill\", function(v, obj) {\r\n                return v instanceof go.Brush ? v.color : v;\r\n            }).makeTwoWay(),\r\n            // new go.Binding(\"fill\", \"isSelected\", function(s, obj) { return s ? \"red\" : obj.part.data.color; }).ofObject()),\r\n            new go.Binding(\"width\", \"width\", function(v) {\r\n                //alert(v);\r\n                return v;\r\n            }).makeTwoWay(function(v) {\r\n                return v;\r\n            }),\r\n            new go.Binding(\"height\", \"height\", function(v) {\r\n                //alert(v);\r\n                return v;\r\n            }).makeTwoWay(function(v) {\r\n                return v;\r\n            }),\r\n            new go.Binding(\"stroke\", \"stroke\", function(v) {\r\n                return v instanceof go.Brush ? v.stroke : v;\r\n            }).makeTwoWay(),\r\n            new go.Binding(\"strokeWidth\", \"strokeWidth\", function(d) {\r\n                return d;\r\n            }).makeTwoWay(function(d) {\r\n                return d;\r\n            }),\r\n            new go.Binding(\"figure\", \"figure\").makeTwoWay(), {\r\n                figure: properties.figure,\r\n                fill: properties.fill,\r\n                strokeWidth: properties.strokeWidth,\r\n                stroke: properties.stroke\r\n            }\r\n        ),\r\n        $(go.Shape, {\r\n                name: \"SHAPE_Back\",\r\n                figure: \"Rectangle\",\r\n                fill: \"rgba(0,0,0,0)\",\r\n                // fromLinkable: true,\r\n                // toLinkable: true,\r\n                strokeWidth: 0\r\n            },\r\n            new go.Binding(\"width\", \"width\", function(v) {\r\n                return v;\r\n            }).ofObject(\"SHAPE\"),\r\n            new go.Binding(\"height\", \"height\", function(v) {\r\n                return v;\r\n            }).ofObject(\"SHAPE\")\r\n        ),\r\n        $(go.TextBlock, {\r\n                name: \"TEXT\",\r\n                alignment: new go.Spot(0.5, 0.5),\r\n                font: \"bold \" + diagram.__trtd.InitialFontSize + \"px 幼圆\",\r\n                editable: true,\r\n                //margin: 3, editable: true,\r\n                stroke: \"black\",\r\n                isMultiline: true,\r\n                overflow: go.TextBlock.OverflowClip,\r\n                wrap: go.TextBlock.WrapDesiredSize,\r\n                textAlign: \"center\",\r\n                // verticalAlignment: go.Spot.Bottom,\r\n                spacingAbove: 4,\r\n                spacingBelow: 4,\r\n                portId: \"TEXT\",\r\n                stretch: go.GraphObject.Fill\r\n            },\r\n            new go.Binding(\"textAlign\", \"textAlign\", function(v) {\r\n                return _.contains(['start', 'center', 'end'], v) ? v : \"center\";\r\n            }).makeTwoWay(),\r\n            new go.Binding(\"spacingAbove\", \"spacingline\", function(v) {\r\n                return helpers.tdTransToNum(v, 4);\r\n            }).makeTwoWay(),\r\n            new go.Binding(\"spacingBelow\", \"spacingline\", function(v) {\r\n                return helpers.tdTransToNum(v, 4);\r\n            }).makeTwoWay(),\r\n            new go.Binding(\"width\", \"width\", function(v) {\r\n                return v;\r\n            }).ofObject(\"SHAPE\"),\r\n            // new go.Binding(\"height\", \"height\", function (v) {\r\n            //   return v;\r\n            // }).ofObject(\"SHAPE\"),\r\n            new go.Binding(\"text\", \"text\").makeTwoWay(),\r\n            new go.Binding(\"stroke\", \"textStroke\").makeTwoWay(),\r\n            new go.Binding(\"font\", \"font\").makeTwoWay()\r\n        )\r\n    );\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/nodeTemplate/createTextNodeTemplate.js","// 返回图片天盘节点模板\r\nvar $ = go.GraphObject.make;\r\n\r\nmodule.exports = function createPictureNodeTemplate (diagram) {\r\n    // var $ = go.GraphObject.make;\r\n\r\n    return $(go.Node, \"Auto\", {\r\n            \"_controlExpand\": true,\r\n            layerName: \"default\",\r\n            locationSpot: go.Spot.Center,\r\n            resizeCellSize: new go.Size(10, 10),\r\n            locationObjectName: \"SHAPE\",\r\n            resizable: true,\r\n            resizeObjectName: \"SHAPE\", // user can resize the Shape\r\n            rotatable: false,\r\n            //rotateObjectName: \"SHAPE\",  // rotate the Shape without rotating the label\r\n            doubleClick: function (e, node) {\r\n                interactions.selectText(e, node)\r\n            },\r\n            //toMaxLinks: 1,\r\n            layoutConditions: go.Part.LayoutStandard,\r\n            //layoutConditions:~go.Part.LayoutAdded,    \r\n            // fromLinkable: true, toLinkable: true,\r\n            alignment: go.Spot.Center,\r\n            alignmentFocus: go.Spot.Center,\r\n            resizeAdornmentTemplate: diagram.__trtd.nodeResizeAdornmentTemplate(),\r\n\r\n            contextMenu: diagram.__trtd.getNodeContextMenu(),\r\n            selectionAdornmentTemplate: diagram.__trtd.getNodeSelectionAdornmentTemplate()\r\n        //layoutConditions: go.Part.LayoutStandard & ~go.Part.LayoutNodeSized & ~go.Part.LayoutAdded\r\n        },\r\n        new go.Binding(\"location\", \"loc\", go.Point.parse).makeTwoWay(go.Point.stringify),\r\n        new go.Binding(\"isShadowed\", \"isShadowed\").makeTwoWay(),\r\n        $(go.Panel, \"Spot\",\r\n            $(go.Picture, // the icon showing the logo\r\n                // You should set the desiredSize (or width and height)\r\n                // whenever you know what size the Picture should be.\r\n                { name: \"SHAPE\" }, {\r\n                    sourceCrossOrigin: function(pict) {\r\n                        return \"Anonymous\";\r\n                    }\r\n                },\r\n                new go.Binding(\"source\", \"picture\", function(v){\r\n                    \r\n                    return v+\"?\"+Date.now()\r\n\r\n                }).makeTwoWay(function(v){\r\n                    if(v){\r\n                        v = v.replace(/\\?.*$/g,\"\")\r\n                        return v\r\n                    }else{\r\n                        return \"\"\r\n                    }\r\n                }),\r\n                new go.Binding(\"width\", \"width\", function(v, d) {\r\n                    return v;\r\n                }).makeTwoWay(function(v) {\r\n                    return v;\r\n                }),\r\n                new go.Binding(\"height\", \"height\", function(v, d) {\r\n                    return v;\r\n                }).makeTwoWay(function(v) {\r\n                    return v;\r\n                })\r\n            ),\r\n            $(go.TextBlock, {\r\n                    name: \"TEXT\",\r\n                    alignment: new go.Spot(0.5, 0.5),\r\n                    font: \"bold \" + diagram.__trtd.InitialFontSize + \"px 幼圆\",\r\n                    //margin: 3, editable: true,\r\n                    stroke: \"black\",\r\n                    isMultiline: true,\r\n                    overflow: go.TextBlock.OverflowClip,\r\n                    wrap: go.TextBlock.WrapDesiredSize,\r\n                    textAlign: \"center\",\r\n                    spacingAbove: 4,\r\n                    spacingBelow: 4,\r\n                    portId: \"TEXT\",\r\n                    stretch: go.GraphObject.Fill\r\n                        //,width:100\r\n                },\r\n                new go.Binding(\"textAlign\", \"textAlign\", function(v) {\r\n                    return _.contains(['start', 'center', 'end'], v) ? v : \"center\";\r\n                }).makeTwoWay(),\r\n                new go.Binding(\"spacingAbove\", \"spacingline\", function(v) {\r\n                    return tdTransToNum(v, 4);\r\n                }).makeTwoWay(),\r\n                new go.Binding(\"spacingBelow\", \"spacingline\", function(v) {\r\n                    return tdTransToNum(v, 4);\r\n                }).makeTwoWay(),\r\n                //new go.Binding(\"width\",\"width\",function(v){return v/2 * Math.sqrt(2)+7;}).ofObject(\"SHAPE\"),\r\n                new go.Binding(\"maxSize\", \"width\", function(v) {\r\n                    var va = v / 2 * Math.sqrt(2);\r\n                    return new go.Size(va, va);\r\n                }).ofObject(\"SHAPE\"),\r\n                // new go.Binding(\"height\",\"width\",function(v){return v/2 * Math.sqrt(2);;}).ofObject(\"SHAPE\"),\r\n                new go.Binding(\"text\", \"text\").makeTwoWay(),\r\n                new go.Binding(\"stroke\", \"textStroke\").makeTwoWay(),\r\n                new go.Binding(\"font\", \"font\").makeTwoWay()\r\n            )\r\n        ), {\r\n            toolTip: $(go.Adornment, \"Auto\",\r\n                $(go.Shape, { fill: \"#FFFFCC\" }),\r\n                $(go.TextBlock, { margin: 4 }, // the tooltip shows the result of calling nodeInfo(data)\r\n                    new go.Binding(\"text\", \"\", function(d) {\r\n                        return d.text;\r\n                    })\r\n                )\r\n            )\r\n        }\r\n    );\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/nodeTemplate/createPictureNodeTemplate.js","var $ = go.GraphObject.make\r\nvar svg = require('../datas/svg.template');\r\n\r\n// 返回svg节点\r\nmodule.exports = function createNodeSvgTemplate (diagram) {\r\n    var properties = {\r\n        figure: \"Circle\",\r\n        fill: \"white\",\r\n        strokeWidth: 2,\r\n        stroke: \"black\",\r\n        fontSize: 15,\r\n        font: \"sans-serif\"\r\n    };\r\n    return $(go.Node, \"Spot\",{\r\n                name: \"NODE\",\r\n                \"_controlExpand\": true,\r\n                layerName: \"Background\",\r\n                locationSpot: go.Spot.Center,\r\n                resizeCellSize: new go.Size(10, 10),\r\n                locationObjectName: \"BACKGROUND\",\r\n                resizable: true,\r\n                resizeObjectName: \"BACKGROUND\", // user can resize the Shape\r\n                rotatable: true,\r\n                rotateObjectName: \"BACKGROUND\", // rotate the Shape without rotating the label\r\n                click: function(e, node){\r\n                    // console.log(node.data);\r\n                },\r\n                doubleClick: function (e, node) {\r\n                    doubleClickCreateNodeType(e);\r\n                },\r\n                selectable: true,\r\n                selectionObjectName:\"BACKGROUND\",\r\n                movable: true,\r\n                angle: 0,\r\n                //toMaxLinks: 1,\r\n                layoutConditions: go.Part.LayoutStandard,\r\n                //layoutConditions:~go.Part.LayoutAdded,\r\n                // fromLinkable: true, toLinkable: true,\r\n                alignment: go.Spot.Center,\r\n                alignmentFocus: go.Spot.Center,\r\n                resizeAdornmentTemplate: diagram.__trtd.nodeResizeAdornmentTemplate(),\r\n                // rotateAdornmentTemplate: nodeRotateAdornmentTemplate,\r\n                contextMenu: diagram.__trtd.getNodeContextMenu(),\r\n                // contextMenu: $(go.Adornment),\r\n            },\r\n            new go.Binding(\"location\", \"loc\", go.Point.parse).makeTwoWay(go.Point.stringify),\r\n            new go.Binding(\"isShadowed\", \"isShadowed\").makeTwoWay(),\r\n            new go.Binding(\"selectable\", \"selectable\").makeTwoWay(),\r\n            new go.Binding(\"movable\", \"movable\").makeTwoWay(),\r\n            new go.Binding(\"deletable\", \"deletable\").makeTwoWay(),\r\n            $(go.Shape, {\r\n                name: \"SHAPE\",\r\n                geometryString: svg.threeWheel,\r\n                fill: \"black\",\r\n                strokeWidth: 5, \r\n                stroke: \"black\",\r\n                minSize: new go.Size(50, 50),\r\n                },\r\n                new go.Binding(\"fill\", \"fill\").makeTwoWay(function(v){\r\n                    return v;\r\n                }),\r\n                new go.Binding(\"stroke\", \"stroke\").makeTwoWay(function(v){\r\n                    return v;\r\n                }),\r\n                new go.Binding(\"strokeWidth\", \"strokeWidth\").makeTwoWay(function(v){\r\n                    return v;\r\n                }),\r\n                new go.Binding(\"desiredSize\", \"desiredSize\", function(v) {\r\n                    // var va = (v / 2) * Math.sqrt(2);\r\n                    // console.log(\"desiredSize\",v)\r\n                    return v\r\n                }).ofObject(\"BACKGROUND\"),\r\n                new go.Binding(\"angle\", \"angle\", function(v) {\r\n                    // var va = (v / 2) * Math.sqrt(2);\r\n                    // console.log(\"desiredSize\",v)\r\n                    return v\r\n                }).ofObject(\"BACKGROUND\"),\r\n                new go.Binding(\"geometryString\", \"geometryValue\", function(v) {\r\n                    return svg[v];\r\n                }),\r\n            ),\r\n            $(go.Shape, \"Rectangle\",{\r\n                name: 'BACKGROUND',\r\n                fill: \"rgba(1,1,1,0)\",\r\n                // width: 450,\r\n                // height: 450,\r\n                stroke: \"rgba(1,1,1,0)\",\r\n                // minSize: new go.Size(50, 50),\r\n                },\r\n                new go.Binding(\"desiredSize\", \"desiredSize\", function(v, d) {\r\n                    // console.log(\"vd m\", v, d )\r\n                    if(!v) return d.part.findObject(\"SHAPE\").measuredBounds.size;\r\n                    return go.Size.parse(v)\r\n                }).makeTwoWay(function(v) {\r\n                    return go.Size.stringify(v)\r\n                }),\r\n                new go.Binding(\"angle\", \"angle\").makeTwoWay(function(v){\r\n                    return v;\r\n                }),\r\n                // new go.Binding(\"desiredSize\", \"height\", function(v) {\r\n                //     var radius = parseInt(v ? v : 100);\r\n                //     var size = new go.Size(radius, radius);\r\n                //     return size;\r\n                // }).makeTwoWay(function(v) {\r\n                //     return v.height;\r\n                // }),\r\n                // background: \"#555\",\r\n                // stroke: \"red\"}\r\n            ),\r\n    );\r\n}\r\n\r\nfunction doubleClickCreateNodeType(e){\r\n    // console.log('eeeeeeeeeeeeeee:', e);\r\n    var myDiagram = e.diagram;\r\n    myDiagram.startTransaction();\r\n    var text = { text: \"双击编辑文本\", category: 'text' };\r\n    text.loc = go.Point.stringify(myDiagram.lastInput.documentPoint);\r\n    myDiagram.model.addNodeData(text);\r\n    myDiagram.commitTransaction()\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/nodeTemplate/createNodeSvgTemplate.js","var $ = go.GraphObject.make;\r\n\r\nmodule.exports = // 返回天盘模板\r\nfunction createNodeTemplate (diagram) {\r\n    var properties = {\r\n        figure: \"Circle\",\r\n        fill: \"white\",\r\n        strokeWidth: 2,\r\n        stroke: \"black\",\r\n        fontSize: 15,\r\n        font: \"sans-serif\"\r\n    };\r\n\r\n    return $(go.Node, \"Spot\", {\r\n        \"_controlExpand\": true,\r\n        layerName: \"default\",\r\n        locationSpot: go.Spot.Center,\r\n        resizeCellSize: new go.Size(10, 10),\r\n        locationObjectName: \"SHAPE\",\r\n        resizable: true,\r\n        resizeObjectName: \"SHAPE\", // user can resize the Shape\r\n        rotatable: false,\r\n        location: new go.Point(0, 0),\r\n        click: function(e, node) {\r\n            console.log(node.data)\r\n            if(node.diagram.__trtd.nodeClickListener){\r\n                node.diagram.__trtd.nodeClickListener(node)\r\n            }\r\n            // showNodeToolBar(e,node);\r\n        },\r\n        //rotateObjectName: \"SHAPE\",  // rotate the Shape without rotating the label\r\n        doubleClick: function (e, node){\r\n            e.diagram.__trtd.selectText(e, node)\r\n        },\r\n        toMaxLinks: 1,\r\n        layoutConditions: go.Part.LayoutStandard,\r\n        //layoutConditions:~go.Part.LayoutAdded,\r\n        // fromLinkable: true, toLinkable: true,\r\n        alignment: go.Spot.Center,\r\n        alignmentFocus: go.Spot.Center,\r\n        resizeAdornmentTemplate: diagram.__trtd.nodeResizeAdornmentTemplate(),\r\n        // contextMenu: $(go.Adornment),\r\n        contextMenu: diagram.__trtd.getNodeContextMenu(),\r\n        selectionAdornmentTemplate: diagram.__trtd.getNodeSelectionAdornmentTemplate(),\r\n        mouseOver: function(e, node) {\r\n            // if(node.data.hyperlink){\r\n            //   var textObj = node.findObject('TEXT');\r\n            //   textObj.isUnderline = true;\r\n            // }\r\n\r\n            diagram.__trtd.showNodeRemarkTips(e, node);\r\n        },\r\n        mouseLeave: function(e, node) {\r\n            // if(node.data.hyperlink) {\r\n            //   var textObj = node.findObject('TEXT');\r\n            //   textObj.isUnderline = false;\r\n            // }\r\n            diagram.__trtd.removeNodeRemarkTips();\r\n        },\r\n        mouseDragEnter: function(e, obj) {\r\n            var node = obj.part;\r\n            var selnode = e.diagram.selection.first();\r\n            if (!(selnode instanceof go.Node) || selnode.category == \"3\" || selnode.category == \"text\" || selnode.key == 1) {\r\n                return;\r\n            }\r\n            //var sat = node.selectionAdornmentTemplate;\r\n            //var adorn = sat.copy();\r\n            //adorn.adornedObject = node;\r\n            //node.addAdornment(\"dragEnter\", adorn);\r\n\r\n            //if (!mayWorkFor(selnode, node)) return;\r\n            var shape = node.findObject(\"SHAPE\");\r\n            if (shape) {\r\n                shape._prevFill = shape.fill; // remember the original brush\r\n                shape.fill = \"darkred\";\r\n            }\r\n\r\n        },\r\n        mouseDragLeave: function(e, obj) {\r\n            var node = obj.part;\r\n            var shape = node.findObject(\"SHAPE\");\r\n            if (shape && shape._prevFill) {\r\n                shape.fill = shape._prevFill; // restore the original brush\r\n            }\r\n            //node.removeAdornment(\"dragEnter\");\r\n        },\r\n        mouseDrop: function(e, obj) {\r\n            var node = obj.part;\r\n            var selnode = e.diagram.selection.first();\r\n            if (!(selnode instanceof go.Node) || selnode.data.category == \"3\" || selnode.data.category == \"text\" || selnode.data.key == 1) {\r\n                return;\r\n            }\r\n\r\n            if (node.data.isparent) {\r\n                var child = e.diagram.findNodeForKey(node.data.isparent);\r\n                while (child.data.next) {\r\n                    child = e.diagram.findNodeForKey(child.data.next);\r\n                }\r\n                if (child.data.key == selnode.data.key) {\r\n                    //最后一个子节点拖放到父节点上时，不做任何操作\r\n                    return;\r\n                }\r\n                e.diagram.__trtd.setNodeAsSibling(selnode, child);\r\n            } else {\r\n                e.diagram.__trtd.setNodeAsChildren(selnode, node);\r\n            }\r\n        }},\r\n        new go.Binding(\"location\", \"loc\", go.Point.parse).makeTwoWay(go.Point.stringify),\r\n        new go.Binding(\"isShadowed\", \"isShadowed\").makeTwoWay(),\r\n        new go.Binding(\"selectable\", \"selectable\").makeTwoWay(),\r\n        new go.Binding(\"movable\", \"movable\").makeTwoWay(),\r\n        new go.Binding(\"deletable\", \"deletable\").makeTwoWay(),\r\n        $(go.Shape, {\r\n                strokeDashArray: null,\r\n                // strokeDashOffset:10,\r\n                name: \"SHAPE\",\r\n                figure: \"Circle\",\r\n                fill: \"rgba(0,0,0,0)\",\r\n                fromLinkable: true,\r\n                toLinkable: true,\r\n                cursor: \"pointer\",\r\n                minSize: new go.Size(50, 50),\r\n                strokeWidth: 2,\r\n                stroke: \"black\",\r\n                portId: \"\"\r\n\r\n            },\r\n            new go.Binding(\"strokeDashArray\", \"strokeDashArray\", function(v) {\r\n                try {\r\n                    var val = [parseInt(v.split(\" \")[0]), parseInt(v.split(\" \")[1])];\r\n                } catch (e) {\r\n                    var val = null;\r\n                }\r\n                return val;\r\n            }).makeTwoWay(function(v) {\r\n                return v[0] + \" \" + v[1];\r\n            }), //保留，设置边线样式\r\n            new go.Binding(\"fill\", \"fill\", function(v, obj) {\r\n                return v instanceof go.Brush ? v.color : v;\r\n            }).makeTwoWay(),\r\n            // new go.Binding(\"fill\", \"isSelected\", function(s, obj) { return s ? \"red\" : obj.part.data.color; }).ofObject()),\r\n            new go.Binding(\"desiredSize\", \"radius\", function(v) {\r\n                //alert(v);\r\n                var radius = parseInt(v ? v : 100);\r\n                var size = new go.Size(radius, radius);\r\n                return size;\r\n            }).makeTwoWay(function(v) {\r\n                return v.width;\r\n            }),\r\n            new go.Binding(\"stroke\", \"stroke\", function(v) {\r\n                return v instanceof go.Brush ? v.stroke : v;\r\n            }).makeTwoWay(),\r\n\r\n            new go.Binding(\"strokeWidth\", \"strokeWidth\", function(d) {\r\n                return d;\r\n            }).makeTwoWay(function(d) {\r\n                return d;\r\n            }),\r\n            new go.Binding(\"figure\", \"figure\").makeTwoWay(), {\r\n                figure: properties.figure,\r\n                fill: properties.fill,\r\n                strokeWidth: properties.strokeWidth,\r\n                stroke: properties.stroke\r\n            }\r\n        ),\r\n        $(go.Shape, {\r\n                name: \"SHAPE_Back\",\r\n                figure: \"Rectangle\",\r\n                fill: \"rgba(128,128,128,0)\",\r\n                fromLinkable: true,\r\n                toLinkable: true,\r\n                strokeWidth: 0\r\n            },\r\n            new go.Binding(\"desiredSize\", \"width\", function(v) {\r\n                var va = (v / 2) * Math.sqrt(2);\r\n                return new go.Size(va - 3, va - 3);\r\n            }).ofObject(\"SHAPE\")\r\n        ),\r\n    \r\n        $(go.Panel, \"Table\",\r\n            $(go.RowColumnDefinition, { column: 0, width: 0 }\r\n                // new go.Binding('width','hyperlink',function(v){\r\n                //   return v?10:0;\r\n                // })\r\n            ),\r\n            $(go.Shape, 'Rectangle', {\r\n                row: 0,\r\n                column: 0,\r\n                // width:10,\r\n                fill: 'rgba(0,255,0,0)',\r\n                strokeWidth: 0\r\n            }),\r\n            $(go.Panel, \"Auto\", { row: 1, column: 0 },\r\n                $(go.Shape, \"RoundedRectangle\", { fill: \"rgba(0,0,0,0)\", strokeWidth: 0 }),\r\n                $(go.Picture, {\r\n                        alignment: go.Spot.Left,\r\n                        click: function(e) {\r\n                            alert('picture clicked');\r\n                        },\r\n                        name: 'Picture',\r\n                        // source: 'media/images/Katong/little-boy-black.png',\r\n                        desiredSize: new go.Size(10, 10)\r\n                    }\r\n\r\n                    // new go.Binding(\"source\", \"key\", findHeadShot)\r\n                )\r\n            ),\r\n            $(go.Shape, 'Rectangle', {\r\n                row: 2,\r\n                column: 0,\r\n                // width:10,\r\n                fill: 'rgba(0,0,0,0)',\r\n                strokeWidth: 0\r\n            }),\r\n            $(go.Panel, \"Auto\", { row: 0, column: 1, rowSpan: 3 },\r\n                $(go.TextBlock, {\r\n                        // stretch: go.GraphObject.Vertical,\r\n                        name: \"TEXT\",\r\n                        alignment: new go.Spot(0.5, 0.5),\r\n                        font: \"bold \" + diagram.__trtd.InitialFontSize + \"px 幼圆\",\r\n                        // editable: true,\r\n                        //margin: 3, editable: true,\r\n                        stroke: \"black\",\r\n                        isMultiline: true,\r\n                        overflow: go.TextBlock.OverflowClip,\r\n                        wrap: go.TextBlock.WrapDesiredSize,\r\n                        textAlign: \"center\",\r\n                        spacingAbove: 4,\r\n                        spacingBelow: 4,\r\n                        portId: \"TEXT\",\r\n                        stretch: go.GraphObject.Fill,\r\n                        click: function(e, node) {\r\n\r\n                        }\r\n                    },\r\n                    new go.Binding(\"textAlign\", \"textAlign\", function(v) {\r\n                        return _.contains(['start', 'center', 'end'], v) ? v : \"center\";\r\n                    }).makeTwoWay(),\r\n                    new go.Binding(\"spacingAbove\", \"spacingline\", function(v) {\r\n                        return tdTransToNum(v, 4);\r\n                    }).makeTwoWay(),\r\n                    new go.Binding(\"spacingBelow\", \"spacingline\", function(v) {\r\n                        return tdTransToNum(v, 4);\r\n                    }).makeTwoWay(),\r\n                    new go.Binding(\"width\", \"width\", function(v) {\r\n                        var va = v / 2 * Math.sqrt(2);\r\n                        return va;\r\n                    }).ofObject(\"SHAPE\"),\r\n                    new go.Binding(\"text\", \"text\").makeTwoWay(),\r\n                    new go.Binding(\"stroke\", \"textStroke\").makeTwoWay(),\r\n                    new go.Binding(\"font\", \"font\").makeTwoWay()\r\n                )\r\n            )\r\n        )\r\n    );\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/nodeTemplate/createNodeTemplate.js","var svg = {\n    'threeWheel': 'M 225 0 C 100.736 0 0 100.735 0 225 s 100.736 225 225 225 c 124.265 0 225.001 -100.734 225.001 -225 C 450.002 100.735 349.265 0 225 0 Z M 225 1.515 c 62.006 0 118.106 25.257 158.591 66.037 c -38.634 133.172 -160.888 157.047 -160.888 157.047 l 0.047 0.083 h -0.051 C 123.453 130.609 19.61 161.966 9.597 165.291 C 35.716 70.857 122.255 1.515 225 1.515 Z M 1.517 225 c 0 -20.075 2.663 -39.524 7.627 -58.035 c 6.686 -2.295 111.992 -36.362 212.807 58.54 c -3.347 10.815 -36.032 125.634 54.089 217.118 c -16.395 3.83 -33.479 5.859 -51.04 5.859 C 101.575 448.482 1.517 348.428 1.517 225 Z M 277.292 442.318 c -89.298 -94.891 -57.746 -204.506 -53.915 -216.53 l 0.076 0.135 c 0 0 126.301 -26.492 161.022 -157.465 c 39.584 40.319 64.008 95.575 64.008 156.542 C 448.483 330.418 375.489 418.773 277.292 442.318 Z',\n    'fireWheel': 'M225.000,450.000 C100.736,450.000 -0.000,349.264 -0.000,225.000 C-0.000,100.736 100.736,-0.000 225.000,-0.000 C349.264,-0.000 450.000,100.736 450.000,225.000 C450.000,349.264 349.264,450.000 225.000,450.000 ZM225.000,448.000 C338.085,448.000 431.498,363.821 446.026,254.709 C432.978,302.699 389.123,338.000 337.000,338.000 C274.592,338.000 224.000,287.408 224.000,225.000 C224.000,163.696 174.304,114.000 113.000,114.000 C51.696,114.000 2.000,163.696 2.000,225.000 C2.000,348.159 101.841,448.000 225.000,448.000 ZM225.000,2.000 C111.915,2.000 18.502,86.179 3.974,195.291 C17.022,147.301 60.877,112.000 113.000,112.000 C175.408,112.000 226.000,162.592 226.000,225.000 C226.000,286.304 275.696,336.000 337.000,336.000 C398.304,336.000 448.000,286.304 448.000,225.000 C448.000,225.000 448.000,225.000 448.000,225.000 C448.000,101.841 348.159,2.000 225.000,2.000 Z',\n    'goldWheel': 'M449.993,0.008 L225.395,287.495 L355.004,449.995 L94.004,449.995 L224.597,287.502 L-0.008,0.008 L449.993,0.008 Z',\n    'waterWheel': 'M268.000,443.000 C299.658,443.000 328.270,429.976 348.785,409.000 L351.564,409.000 C330.601,431.167 300.917,445.000 268.000,445.000 C204.487,445.000 153.000,393.513 153.000,330.000 C153.000,282.847 181.389,242.341 222.000,224.593 L222.000,224.508 C263.076,207.589 292.000,167.180 292.000,120.000 C292.000,57.592 241.408,7.000 179.000,7.000 C148.889,7.000 121.551,18.800 101.296,38.000 L98.382,38.000 C119.136,17.594 147.595,5.000 179.000,5.000 C242.513,5.000 294.000,56.487 294.000,120.000 C294.000,167.153 265.611,207.659 225.000,225.407 L225.000,225.478 C183.921,242.396 155.000,282.817 155.000,330.000 C155.000,392.408 205.592,443.000 268.000,443.000 Z'\n}\n\nmodule.exports = svg;\n\n\n// WEBPACK FOOTER //\n// ./src/datas/svg.template.js","    var helpers = require('../helpers/helpers.gojs')\r\n\r\n    \r\n    function adustOliveText(d){\r\n            setTimeout(function(){\r\n              try{\r\n                console.log(\"check overflow\")\r\n                if(!d.text) return;\r\n                if(d.text && d.text.trim() == \"\") return;\r\n                if(d.lineCount %2 != 0){\r\n                  if(d.text[d.text.length-1] == \"\\n\"){\r\n                    d.text = d.text.substring(0, d.text.length-1)\r\n                    return;\r\n                  }\r\n                  d.text = d.text+\"\\n\"\r\n                }\r\n                // if(d && d.lineCount!=null && d.lineCount%2 != 0){\r\n                //   if(d.text && d.text[d.text.length-1] != \"\\n\"){\r\n                //     d.text+=\"\\n\"\r\n                //   }\r\n                // }\r\n              }catch(e){\r\n                console.error(e)\r\n              }\r\n            },100)\r\n    }\r\n\r\n\r\n    function adjustTextAngle(obj, shi, xu, group){\r\n        var groupTextAngle = group.data.textAngle|| \"vertical\" // \"vertical\"\r\n        var textAngle;\r\n        if(obj.data.order%2==0){ // 偶数\r\n            // 偶数实线在上\r\n            if(shi){\r\n\r\n                if(!shi.data.nangle){\r\n                    textAngle = groupTextAngle\r\n                }else{\r\n                    textAngle = shi.data.textAngle || groupTextAngle\r\n                }\r\n                // if(!shi.data.nloc){\r\n                //     shi.location = obj.location.copy().offset(obj.naturalBounds.width/2, -obj.naturalBounds.height/2)\r\n                // }\r\n                if(textAngle == \"horizontal\"){\r\n                    // if(!shi.data.nloc){\r\n                        shi.locationSpot = new go.Spot(1, 1, 0, 0)\r\n                    // }\r\n                    shi.angle = 0\r\n                    // \r\n                    // if(shi.data.textAlign == null){\r\n                        // shi.findObject(\"TEXT\").textAlign = \"center\";\r\n                        // }\r\n                    }\r\n                    shi.__location = obj.location.copy().offset(obj.naturalBounds.width/2, 0)\r\n                    shi.__location = computeNewRotateLoc(group.location, shi.__location, obj.angle)\r\n                    if(!shi.data.nloc){\r\n                        shi.location = obj.location.copy().offset(obj.naturalBounds.width/2, -obj.naturalBounds.height/2)\r\n                        shi.location = computeNewRotateLoc(group.location, shi.location, obj.angle)\r\n                        // shi.location = shi.__location.copy()\r\n                        // delete shi.__offset\r\n                        delete shi.__switchOrder\r\n                    }else{\r\n                        \r\n                        if(!shi.__offset){\r\n                            shi.__offset = shi.__location.copy().subtract(shi.location)\r\n                        }else{\r\n                            shi.location = shi.__location.copy().subtract(shi.__offset)\r\n                            // if(shi.__switchOrder){\r\n                            //     shi.__offset.x = -shi.__offset.x\r\n                            //     shi.__offset.y = -shi.__offset.y\r\n                            //     shi.location = shi.__location.copy().subtract(shi.__offset)\r\n                            //     delete shi.__switchOrder\r\n                            //     shi.__offset = shi.__location.copy().subtract(shi.location)\r\n                            // }else{\r\n                            //     shi.location = shi.__location.copy().subtract(shi.__offset)\r\n                            // }\r\n                            // xu.location = xu.__location.copy().offset(-Math.abs(xu.__offset.x), -Math.abs(xu.__offset.y))\r\n                            // xu.location = xu.__location.copy().subtract(xu.__offset)\r\n                        }\r\n                    }\r\n                if(textAngle == \"vertical\"){\r\n                    // if(!shi.data.nloc){\r\n                        shi.locationSpot = new go.Spot(0.5, 1, 0, 0)\r\n                    // }\r\n                    shi.angle = obj.angle\r\n                    // if(shi.data.textAlign == null){\r\n                        // obj.diagram.model.setDataProperty(shi.data,\"textAlign\", \"left\")\r\n                        // shi.findObject(\"TEXT\").textAlign = \"center\";\r\n                    // }\r\n                        \r\n                }\r\n            }\r\n            if(xu){\r\n                if(!xu.data.nangle){\r\n                    textAngle = groupTextAngle\r\n                }else{\r\n                    textAngle = xu.data.textAngle || groupTextAngle\r\n                }\r\n\r\n                if(textAngle == \"horizontal\"){\r\n                    // if(!xu.data.nloc){\r\n                        xu.locationSpot = new go.Spot(0, 0, 0, 0)\r\n                    // }\r\n                    xu.angle = 0\r\n                    // obj.diagram.model.setDataProperty(xu.data,\"textAlign\", \"left\")\r\n                    // if(xu.data.textAlign == null){\r\n                        // xu.findObject(\"TEXT\").textAlign = \"center\"\r\n                    // }\r\n                }\r\n                console.log(\"xuxuxuxuxxuxu\", xu.data.order)\r\n                xu.__location = obj.location.copy().offset(obj.naturalBounds.width/2, 0)\r\n                xu.__location = computeNewRotateLoc(group.location, xu.__location, obj.angle)\r\n                if(!xu.data.nloc){\r\n                    xu.location = obj.location.copy().offset(obj.naturalBounds.width/2, obj.naturalBounds.height/2)\r\n                    xu.location = computeNewRotateLoc(group.location, xu.location, obj.angle)\r\n                    // xu.location = xu.__location.copy()\r\n                    // delete xu.__offset\r\n                    delete xu.__switchOrder\r\n                }else{\r\n                    \r\n                    if(!xu.__offset){\r\n                        xu.__offset = xu.__location.copy().subtract(xu.location)\r\n                    }else{\r\n                        xu.location = xu.__location.copy().subtract(xu.__offset)\r\n                        // if(xu.__switchOrder){\r\n                        //     xu.__offset.x = -xu.__offset.x\r\n                        //     xu.__offset.y = -xu.__offset.y\r\n                        //     xu.location = xu.__location.copy().subtract(xu.__offset)\r\n                        //     delete xu.__switchOrder\r\n                        //     xu.__offset = xu.__location.copy().subtract(xu.location)\r\n                        // }else{\r\n                        //     xu.location = xu.__location.copy().subtract(xu.__offset)\r\n                        // }\r\n                        // xu.location = xu.__location.copy().offset(-Math.abs(xu.__offset.x), -Math.abs(xu.__offset.y))\r\n                        // xu.location = xu.__location.copy().subtract(xu.__offset)\r\n                    }\r\n                }\r\n                // if(xu.data.key == \"9fe41098-8d5a-e18f-b79a-b4693eacd39d\"){\r\n                //     console.log(`location: ${go.Point.stringify(xu.location)}\r\n                //     __location: ${go.Point.stringify(xu.__location)}\r\n                //     __offset: ${go.Point.stringify(xu.__offset)}\r\n                //     `)\r\n                // }\r\n                if(textAngle == \"vertical\"){\r\n                    // if(!xu.data.nloc){\r\n                        xu.locationSpot = new go.Spot(0.5, 0, 0, 0)\r\n                    // }\r\n                    xu.angle = obj.angle\r\n                    // obj.diagram.model.setDataProperty(xu.data,\"textAlign\", \"left\")\r\n                    // if(xu.data.textAlign == null){\r\n                        // xu.findObject(\"TEXT\").textAlign = \"center\"\r\n                    // }\r\n                }\r\n\r\n            }\r\n        }else{ // 奇数\r\n            // 奇数实线在下\r\n            if(shi){\r\n                if(!shi.data.nangle){\r\n                    textAngle = groupTextAngle\r\n                }else{\r\n                    textAngle = shi.data.textAngle || groupTextAngle\r\n                }\r\n                shi.__location = obj.location.copy().offset(obj.naturalBounds.width/2, 0)\r\n                shi.__location = computeNewRotateLoc(group.location, shi.__location, obj.angle)\r\n                if(!shi.data.nloc){\r\n                    shi.location = obj.location.copy().offset(obj.naturalBounds.width/2, obj.naturalBounds.height/2)\r\n                    shi.location = computeNewRotateLoc(group.location, shi.location, obj.angle)\r\n                    // shi.location = shi.__location.copy()\r\n                    // delete shi.__offset\r\n                    delete shi.__switchOrder \r\n                }else{\r\n                   \r\n                    if(!shi.__offset){\r\n                        shi.__offset = shi.__location.copy().subtract(shi.location)\r\n                    }\r\n                    else{\r\n                        shi.location = shi.__location.copy().subtract(shi.__offset)\r\n                        // if(shi.__switchOrder){\r\n                        //     shi.__offset.x = -shi.__offset.x\r\n                        //     shi.__offset.y = -shi.__offset.y\r\n                        //     shi.location = shi.__location.copy().subtract(shi.__offset)\r\n                        //     delete shi.__switchOrder\r\n                        //     shi.__offset = shi.__location.copy().subtract(shi.location)\r\n                        // }else{\r\n                        //     shi.location = shi.__location.copy().subtract(shi.__offset)\r\n                        // }\r\n                        // xu.location = xu.__location.copy().offset(-Math.abs(xu.__offset.x), -Math.abs(xu.__offset.y))\r\n                        // xu.location = xu.__location.copy().subtract(xu.__offset)\r\n                    }\r\n                }\r\n                if(textAngle == \"horizontal\"){\r\n                    // if(!shi.data.nloc){\r\n                        shi.locationSpot = new go.Spot(0, 0, 0, 0)\r\n                    // }\r\n                    shi.angle = 0\r\n                    // obj.diagram.model.setDataProperty(shi.data,\"textAlign\", \"left\")\r\n                    // if(shi.data.textAlign == null){\r\n                        // shi.findObject(\"TEXT\").textAlign = \"center\";\r\n                    // }\r\n                }\r\n                if(textAngle == \"vertical\"){\r\n                    // if(!shi.data.nloc){\r\n                    shi.locationSpot = new go.Spot(0.5, 0, 0, 0)\r\n                    // }\r\n                    shi.angle = obj.angle\r\n                    // if(shiTextColl[index].data.textAlign == null){\r\n                        // obj.diagram.model.setDataProperty(shiTextColl[index].data,\"textAlign\", \"left\")\r\n                        // shiTextColl[index].findObject(\"TEXT\").textAlign = \"center\";\r\n                    // }   \r\n                }\r\n            }\r\n            if(xu){\r\n                if(!xu.data.nangle){\r\n                    textAngle = groupTextAngle\r\n                }else{\r\n                    textAngle = xu.data.textAngle || groupTextAngle\r\n                }\r\n                xu.__location = obj.location.copy().offset(obj.naturalBounds.width/2, 0)\r\n                xu.__location = computeNewRotateLoc(group.location, xu.__location, obj.angle)\r\n                if(!xu.data.nloc){\r\n                    xu.location = obj.location.copy().offset(obj.naturalBounds.width/2, -obj.naturalBounds.height/2)\r\n                    xu.location = computeNewRotateLoc(group.location, xu.location, obj.angle)\r\n                    // xu.location = xu.__location.copy()\r\n                    // delete xu.__offset\r\n                    delete xu.__switchOrder\r\n                }else{\r\n                    \r\n                    if(!xu.__offset){\r\n                        xu.__offset = xu.__location.copy().subtract(xu.location)\r\n                    }else{\r\n                        xu.location = xu.__location.copy().subtract(xu.__offset)\r\n                        // if(xu.__switchOrder){\r\n                        //     xu.__offset.x = -xu.__offset.x\r\n                        //     xu.__offset.y = -xu.__offset.y\r\n                        //     xu.location = xu.__location.copy().subtract(xu.__offset)\r\n                        //     delete xu.__switchOrder\r\n                        //     xu.__offset = xu.__location.copy().subtract(xu.location)\r\n                        // }else{\r\n                        //     xu.location = xu.__location.copy().subtract(xu.__offset)\r\n                        // }\r\n                        // xu.location = xu.__location.copy().offset(-Math.abs(xu.__offset.x), -Math.abs(xu.__offset.y))\r\n                        // xu.location = xu.__location.copy().subtract(xu.__offset)\r\n                    }\r\n                }\r\n                // if(xu.data.key == \"9fe41098-8d5a-e18f-b79a-b4693eacd39d\"){\r\n                //     console.log(`location: ${go.Point.stringify(xu.location)}\r\n                //     __location: ${go.Point.stringify(xu.__location)}\r\n                //     __offset: ${go.Point.stringify(xu.__offset)}\r\n                //     `)\r\n                // }\r\n                if(textAngle == \"horizontal\"){\r\n                    // obj.diagram.model.setDataProperty(xu.data,\"textAlign\", \"right\")\r\n                    // if(xu.data.textAlign == null){\r\n                        // xu.findObject(\"TEXT\").textAlign = \"center\";\r\n                    // }\r\n                    // if(!xu.data.nloc){\r\n                        xu.locationSpot = new go.Spot(1, 1, 0, 0)\r\n                    // }\r\n                    xu.angle = 0\r\n                }\r\n\r\n                if(textAngle == \"vertical\"){\r\n                    // if(!xu.data.nloc){\r\n                        xu.locationSpot = new go.Spot(0.5, 1, 0, 0)\r\n                    // }\r\n                    xu.angle = obj.angle\r\n                    // obj.diagram.model.setDataProperty(xuTextColl[index].data,\"textAlign\", \"left\")\r\n                    // if(xuTextColl[index].data.textAlign == null){\r\n                        // xuTextColl[index].findObject(\"TEXT\").textAlign = \"center\"\r\n                    // }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    function layoutWaveGroup(it,diagram,group){\r\n\r\n        var collection = []\r\n        // var group = this.group\r\n        var oliveWidth = group.data.oliveWidth\r\n        var oliveHeight = group.data.oliveHeight\r\n        var shiStroke = group.data.shiStroke\r\n        var xuStroke = group.data.xuStroke\r\n        var centerStroke = group.data.centerStroke || \"#3f5369\"\r\n        var oliveType = group.data.oliveType||\"Ellipse\"\r\n        var haveTail = group.data.haveTail||false\r\n        var textAngle = group.data.textAngle|| \"vertical\" // \"vertical\"\r\n        // group.location = new go.Point(0,0)\r\n        var maxWidth = 0;\r\n        var maxHeight = 0;\r\n        var line;\r\n        var waveTotalSize = oliveWidth*2/3\r\n        var shiTextColl = []\r\n        var xuTextColl = []\r\n        var centerTextColl = []\r\n        var shiStrokeWidth, xuStrokeWidth,shiStrokeDashArray,xuStrokeDashArray\r\n        var autogroupConfig; // 自动布局配置\r\n        // 增加波形双螺旋的开放尾部\r\n        // var tailOlive = {\"category\":\"waveTail\", \r\n        //     \"text\":\"       \", \r\n        //     \"level\":0, \"key\": helpers.guid(), \r\n        //     \"group\":node.data.group, \r\n        //     \"loc\":node.data.loc,\r\n        //     \"desiredSize\":node.data.desiredSize, \r\n        //     \"order\": 2000,\r\n        // }\r\n\r\n        // if(oliveType == \"Wave\" && haveTail){\r\n        //     // 查找是否包含尾部\r\n        //     while(it.next()){\r\n        //         var node = it.value;\r\n        //         if(node.data.role == \"waveTail\"){\r\n\r\n        //         }\r\n        //     }\r\n        //     it.reset(); // 重置索引\r\n        // }\r\n\r\n        while (it.next()) {\r\n            var node = it.value;\r\n                // var item = git.value;\r\n            //   console.log(\"item:\",item)\r\n         \r\n            //   console.log(node.data)\r\n              if(node.data.role == \"shiText\"){\r\n                shiTextColl.push(node)\r\n              }\r\n              if(node.data.role == \"xuText\"){\r\n                xuTextColl.push(node)\r\n              }\r\n              if(node.data.role == \"centerText\"){\r\n                centerTextColl.push(node)\r\n              }\r\n            if (node instanceof go.Node) {\r\n            // position the node . . .\r\n                if(node.data.category == \"line\"){\r\n                    line = node;\r\n                    node.location = group.location.copy().offset(0,0)\r\n                    node.angle = group.angle\r\n                }\r\n                if(node.data.category == \"wave\"){\r\n                    // node.width = oliveWidth\r\n                    // node.desiredSize = new go.Size(200,100)\r\n\r\n                    if(oliveType == \"Ellipse\"){\r\n                        node.diagram.model.setDataProperty(node.data, \"oliveType\",\"Ellipse\")\r\n                        node.diagram.model.setDataProperty(node.data, \"desiredSize\",`${oliveWidth} ${oliveHeight}`)\r\n                    }else{\r\n                        // 设置橄榄类型为波形\r\n                        node.diagram.model.setDataProperty(node.data, \"oliveType\",\"Wave\")\r\n                        // 设置波形的尾部开放\r\n                        if(node.data.role == \"waveTail\"){\r\n                            node.diagram.model.setDataProperty(node.data, \"desiredSize\",`${oliveWidth/2} ${oliveHeight}`)\r\n                            node.diagram.model.setDataProperty(node.data, \"selectable\",false)\r\n                        }else{\r\n                            node.diagram.model.setDataProperty(node.data, \"desiredSize\",`${oliveWidth} ${oliveHeight}`)\r\n                        }\r\n                    }\r\n                    \r\n                    // if(node.findObject(\"TEXT\").lineCount %2 != 0){\r\n                    //     if(node.data.text && node.data.text[node.data.text.length-1] != \"\\n\"){\r\n                    //         node.data.text+=\"\\n\"\r\n                    //       }\r\n                    //     node.diagram.model.setDataProperty(node.data, \"text\",node.data.text)\r\n                    // }\r\n                    // if(node.data.role == \"waveTail\"){\r\n                    //     node.diagram.model.setDataProperty(node.data, \"desiredSize\",`${oliveWidth/2} ${oliveHeight}`)\r\n                    //     node.diagram.model.setDataProperty(node.data, \"selectable\",false)\r\n                    // }else{\r\n                    //     node.diagram.model.setDataProperty(node.data, \"desiredSize\",`${oliveWidth} ${oliveHeight}`)\r\n                    // }\r\n\r\n                    // if(node.naturalBounds.width > maxWidth){\r\n                    //     maxWidth = node.naturalBounds.width;\r\n                    //   }\r\n                    // if(node.naturalBounds.height > maxHeight){\r\n                    // maxHeight = node.naturalBounds.height;\r\n                    // }\r\n                    // if(node.measuredBounds.height > maxHeight){\r\n                    // maxHeight = node.measuredBounds.height;\r\n                    // }\r\n                    // if(node.findObject(\"main\").height > maxHeight){\r\n                    // maxHeight = node.findObject(\"main\").height;\r\n                    // }\r\n                    node.angle = group.angle\r\n                    waveTotalSize+=node.naturalBounds.width\r\n                    collection.push(node)\r\n                }\r\n            }\r\n        }\r\n\r\n\r\n        waveTotalSize = collection.length*oliveWidth + oliveWidth*2/3\r\n        if(haveTail){\r\n            waveTotalSize = collection.length*oliveWidth \r\n        }\r\n        console.log(`maxHeight:${maxHeight},maxWidth:${maxWidth}`)\r\n        line.findObject(\"SHAPE\").width = waveTotalSize\r\n        line.diagram.model.setDataProperty(line.data,\"stroke\", centerStroke)\r\n        // line.centerStroke\r\n        // line.height = 4\r\n        // if(group.resizeObject.width != waveTotalSize){\r\n            group.containingGroup.layout.isOngoing = true;\r\n            group.containingGroup.layout.isValidLayout = false;\r\n        // }\r\n        \r\n        // autogroupConfig = group.group.nonauto||\"\";\r\n        // var autogroupConfigObj = {}\r\n        // autogroupConfig = autogroupConfig.split(\",\")\r\n        // for(var i=0;i<autogroupConfig.length;i++){\r\n        //     autogroupConfigObj[autogroupConfig[i]] = true;\r\n        // }\r\n        group.resizeObject.width = waveTotalSize\r\n        group.resizeObject.height = oliveHeight\r\n        group.waveCount = collection.length;\r\n        xuStrokeWidth = group.data.xuStrokeWidth\r\n        shiStrokeWidth = group.data.shiStrokeWidth\r\n        shiStrokeDashArray = group.data.shiStrokeDashArray\r\n        xuStrokeDashArray = group.data.xuStrokeDashArray\r\n        collection = collection.sort(function(a,b){\r\n            // console.log(`Number(a.data.order)${Number(a.data.order)} > Number(b.data.order) ${Number(b.data.order)}`,Number(a.data.order) > Number(b.data.order))\r\n            return Number(a.data.order) - Number(b.data.order)\r\n        })\r\n        // shiTextColl.sort(function(a,b){\r\n        //     return a.data.order - b.data.order\r\n        // })\r\n        // xuTextColl.sort(function(a,b){\r\n        //     return a.data.order - b.data.order\r\n        // })\r\n        // centerTextColl.sort(function(a,b){\r\n        //     return a.data.order - b.data.order\r\n        // })\r\n        var lastOlive = null;// 记录最后一个橄榄的位置，用于增加开放尾部\r\n        var oldOrder = null;\r\n        collection.forEach(function(obj,index){\r\n            // obj.data.order = index + 1;\r\n            var newOrder = index +1 \r\n            // console.log(\"orderorderorderorderorderorderorderorderorderorder\",newOrder,obj.data.order)\r\n            // var oldOrder = obj.__oldOrder\r\n            if(!obj.__oldOrder){\r\n                oldOrder = obj.data.order\r\n            }else{\r\n                oldOrder = obj.__oldOrder\r\n            }\r\n            delete obj.__oldOrder\r\n            shiTextColl[index] = obj.diagram.findNodeForKey(obj.data.shiText)\r\n            xuTextColl[index] = obj.diagram.findNodeForKey(obj.data.xuText)\r\n            if(!obj.data.isNew && obj.data.role != \"waveTail\"){\r\n                if(oldOrder%2 != newOrder%2){\r\n                    if(shiTextColl[index].data.nloc){\r\n                        obj.diagram.model.setDataProperty(shiTextColl[index].data,\"nloc\", null)\r\n                        shiTextColl[index].__oldLocation = shiTextColl[index].location\r\n                    }\r\n                    else{\r\n                        // 之前是自动布局，如果有记录相对位置，则恢复\r\n                        // if(shiTextColl[index].__offset){\r\n                        //     obj.diagram.model.setDataProperty(shiTextColl[index].data,\"nloc\", true)\r\n                        //     // xu.__offset = xu.__location.copy().subtract(xu.location)\r\n                        //     // shiTextColl[index].location = shiTextColl[index].__location.copy().subtract(shiTextColl[index].__offset)\r\n                        //     // delete shiTextColl[index].__oldLocation\r\n                        // }\r\n                    }\r\n\r\n                    if(xuTextColl[index].data.nloc){\r\n                        obj.diagram.model.setDataProperty(xuTextColl[index].data,\"nloc\", null)\r\n                        xuTextColl[index].__oldLocation = xuTextColl[index].location\r\n                    }else{\r\n                        // if(xuTextColl[index].__offset){\r\n                        //     obj.diagram.model.setDataProperty(xuTextColl[index].data,\"nloc\", true)\r\n                        //     // xu.__offset = xu.__location.copy().subtract(xu.location)\r\n                        //     // xuTextColl[index].location = xuTextColl[index].__location.copy().subtract(xuTextColl[index].__offset)\r\n                        //     // delete shiTextColl[index].__oldLocation\r\n                        // }\r\n                    }\r\n                    // shiTextColl[index].__switchOrder = true;\r\n                    // xuTextColl[index].__switchOrder = true;\r\n                    // obj.diagram.model.setDataProperty(xuTextColl[index].data,\"nloc\", null)\r\n                    // shiTextColl[index].__offset.x = -shiTextColl[index].__offset.x\r\n                    // shiTextColl[index].__offset.y = -shiTextColl[index].__offset.y\r\n                }\r\n            }\r\n\r\n            obj.diagram.model.setDataProperty(obj.data,\"order\", newOrder)\r\n            if(!obj.data.nalign){\r\n                obj.diagram.model.setDataProperty(obj.data,\"textAlign\", \"center\")\r\n            }\r\n            if(shiStroke){\r\n                obj.diagram.model.setDataProperty(obj.data,\"shiStroke\", shiStroke)\r\n            }\r\n            if(xuStroke){\r\n                obj.diagram.model.setDataProperty(obj.data,\"xuStroke\", xuStroke)\r\n            }\r\n            if(xuStrokeWidth){\r\n                obj.diagram.model.setDataProperty(obj.data,\"xuStrokeWidth\", xuStrokeWidth)\r\n            }\r\n            if(shiStrokeWidth){\r\n                obj.diagram.model.setDataProperty(obj.data,\"shiStrokeWidth\", shiStrokeWidth)\r\n            }\r\n            if(shiStrokeDashArray){\r\n                obj.diagram.model.setDataProperty(obj.data,\"shiStrokeDashArray\", shiStrokeDashArray)\r\n            }\r\n            if(xuStrokeDashArray){\r\n                obj.diagram.model.setDataProperty(obj.data,\"xuStrokeDashArray\", xuStrokeDashArray)\r\n            }\r\n            \r\n            // obj.diagram.model.setDataProperty(obj.data,\"text\", obj.data.text+\" \"+newOrder)\r\n            obj.location = group.location.copy().offset(oliveWidth*(newOrder-1),0)\r\n            // obj.location = new go.Point(300*(obj.data.order-1),0)\r\n            // obj.\r\n            // var group = a.findNodeDataForKey(m.group)\r\n            var initCenterText = false\r\n            if(group.data.centerTextAngle == \"independent\"){\r\n                if(!obj.data.centerText){\r\n                    var loc = obj.location.copy().offset(obj.naturalBounds.width/2, 0)\r\n                    loc = computeNewRotateLoc(group.location, loc, obj.angle)\r\n                    var centerText = {\r\n                        \"text\":obj.data.text,\r\n                        \"minSize\":`${oliveWidth-30} 30`,\r\n                        \"deletable\":false,\r\n                        textAlign: obj.data.textAlign,\r\n                        \"font\":obj.data.font || \"18px 'Microsoft YaHei'\", \r\n                        textStroke:obj.data.textStroke,\r\n                        \"category\":\"autoText\", \r\n                        \"key\": helpers.guid(), \"width\": oliveWidth-30, \r\n                        \"role\":\"centerText\", \"level\":0, \"group\": obj.data.group, \r\n                        \"order\": newOrder,\r\n                        \"visible\": false,\r\n                        \"layerName\":\"Foreground\",\r\n                        locationSpot: go.Spot.stringify(new go.Spot(0.5, 0.5, 0, 0)),\r\n                        \"selectable\": false,\r\n                        \"olive\": obj.data.key,\r\n                        \"loc\": go.Point.stringify(loc),\r\n                        angle: 0\r\n                        }\r\n                    obj.diagram.model.addNodeData(centerText)\r\n                    // var objCenterText = obj.diagram.model.findNodeDataForKey(centerText.key)\r\n                    obj.diagram.model.setDataProperty(obj.data,\"centerText\", centerText.key)\r\n                    initCenterText = true;\r\n                }\r\n                var objCenterText = obj.diagram.findNodeForKey(obj.data.centerText)\r\n                if(objCenterText){\r\n                    if(!objCenterText.data.nalign){\r\n                        obj.diagram.model.setDataProperty(objCenterText.data,\"textAlign\", \"center\")\r\n                    }\r\n                    if(!obj.data.nangle){\r\n                        if(textAngle == \"vertical\"){\r\n                            obj.diagram.model.setDataProperty(objCenterText.data,\"visible\", false)\r\n                            obj.diagram.model.setDataProperty(obj.data,\"textVisible\", true)\r\n                        }\r\n                        if(textAngle == \"horizontal\"){\r\n                            obj.diagram.model.setDataProperty(objCenterText.data,\"visible\", true)\r\n                            obj.diagram.model.setDataProperty(obj.data,\"textVisible\", false)\r\n                            obj.diagram.model.setDataProperty(objCenterText.data,\"angle\", 0)\r\n                        }\r\n\r\n                    }\r\n                    if(!initCenterText){\r\n                        var loc = obj.location.copy().offset(obj.naturalBounds.width/2, 0)\r\n                        loc = computeNewRotateLoc(group.location, loc, obj.angle)\r\n                        obj.diagram.model.setDataProperty(objCenterText.data,\"loc\", go.Point.stringify(loc))\r\n                    }\r\n                    obj.diagram.model.setDataProperty(objCenterText.data,\"order\", newOrder)\r\n                    if(!objCenterText.data.nwidth){\r\n                        obj.diagram.model.setDataProperty(objCenterText.data,\"width\", oliveWidth-30)\r\n                    }\r\n                    obj.diagram.model.setDataProperty(objCenterText.data,\"minSize\", `${oliveWidth-30} 30`)\r\n                    // obj.diagram.model.setDataProperty(objCenterText,\"selectable\", true)\r\n                    // if(group.data.centerTextMode == \"followLine\"){\r\n                    //     obj.diagram.model.setDataProperty(objCenterText.data,\"textStroke\", centerStroke)\r\n                    // }else{\r\n                    //     // obj.diagram.model.setDataProperty(objCenterText.data,\"textStroke\", \"black\")\r\n                    // }\r\n                    if(helpers.checkPhone()){\r\n                        objCenterText.layerName = \"Background\"\r\n                    }\r\n                }\r\n            }\r\n            // if(group.data.centerTextMode == \"followLine\"){\r\n            //     obj.diagram.model.setDataProperty(obj.data,\"textStroke\", centerStroke)\r\n            // }else{\r\n            //     obj.diagram.model.setDataProperty(obj.data,\"textStroke\", \"black\")\r\n            // }\r\n            // if(textAngle == \"vertical\"){\r\n                if(obj.text && obj.text.trim() != \"\"){\r\n                    adustOliveText(obj.findObject(\"TEXT\"))\r\n                }\r\n            // }\r\n            if(shiTextColl[index]){\r\n\r\n                if(!shiTextColl[index].desiredSize.width){\r\n                    shiTextColl[index].updateTargetBindings()\r\n                }\r\n\r\n                obj.diagram.model.setDataProperty(shiTextColl[index].data,\"showBorder\", true)\r\n                if(!shiTextColl[index].data.nwidth){\r\n                    obj.diagram.model.setDataProperty(shiTextColl[index].data,\"width\", oliveWidth)\r\n                }\r\n                obj.diagram.model.setDataProperty(shiTextColl[index].data,\"minSize\", `${oliveWidth-30} 30`)\r\n                // obj.diagram.model.setDataProperty(shiTextColl[index].data,\"textAlign\", null)\r\n                // delete shiTextColl[index].data.textAlign\r\n                // 判断是否自动对齐\r\n                // if(!shiTextColl[index].data.nalign){\r\n                //     obj.diagram.model.setDataProperty(shiTextColl[index].data,\"textAlign\", \"center\")\r\n                // }\r\n                // // obj.diagram.model.setDataProperty(shiTextColl[index].data,\"showBorder\", true)\r\n                // if(!shiTextColl[index].__oldOrder){\r\n                //     shiTextColl[index].__oldOrder = shiTextColl[index].data.order\r\n                // }\r\n                // if(shiTextColl[index].__oldOrder ){\r\n                //     // order变化前后奇偶不同\r\n                //     if(oldOrder%2 != newOrder%2){\r\n                //         // shiTextColl[index].__switchOrder = true;\r\n                //         // shiTextColl[index].__offset.x = -shiTextColl[index].__offset.x\r\n                //         // shiTextColl[index].__offset.y = -shiTextColl[index].__offset.y\r\n                //     }\r\n                // }\r\n                // delete shiTextColl[index].__oldOrder\r\n                obj.diagram.model.setDataProperty(shiTextColl[index].data,\"order\", newOrder)\r\n                if(!shiTextColl[index].data.ncolor){\r\n                    obj.diagram.model.setDataProperty(shiTextColl[index].data,\"textStroke\", shiStroke)\r\n                }\r\n                // obj.diagram.model.setDataProperty(shiTextColl[index].data,\"order\", newOrder)\r\n                // if(!shiTextColl[index].data.ncolor){\r\n                //     obj.diagram.model.setDataProperty(shiTextColl[index].data,\"textStroke\", shiStroke)\r\n                // }\r\n            }\r\n            if(xuTextColl[index]) {\r\n                if(!xuTextColl[index].desiredSize.width){\r\n                    xuTextColl[index].updateTargetBindings()\r\n                }\r\n\r\n                obj.diagram.model.setDataProperty(xuTextColl[index].data,\"minSize\", `${oliveWidth-30} 30`)\r\n                obj.diagram.model.setDataProperty(xuTextColl[index].data,\"showBorder\", true)\r\n                if(!xuTextColl[index].data.nwidth){\r\n                    obj.diagram.model.setDataProperty(xuTextColl[index].data,\"width\", oliveWidth)\r\n                }\r\n                if(!xuTextColl[index].data.nalign){\r\n                    obj.diagram.model.setDataProperty(xuTextColl[index].data,\"textAlign\", \"center\")\r\n                }\r\n                // obj.diagram.model.setDataProperty(xuTextColl[index].data,\"textAlign\", null)\r\n                // delete xuTextColl[index].data.textAlign\r\n                // if(!xuTextColl[index].__oldOrder){\r\n                //     xuTextColl[index].__oldOrder = xuTextColl[index].data.order\r\n                // }\r\n                // if(xuTextColl[index].__oldOrder){\r\n                //     // order变化前后奇偶不同\r\n                //     if(xuTextColl[index].__oldOrder%2 != newOrder%2){\r\n                //         // xuTextColl[index].__switchOrder = true;\r\n                //         // xuTextColl[index].__offset.x = -xuTextColl[index].__offset.x\r\n                //         // xuTextColl[index].__offset.y = -xuTextColl[index].__offset.y\r\n                //     }\r\n                // }\r\n                // delete xuTextColl[index].__oldOrder\r\n                obj.diagram.model.setDataProperty(xuTextColl[index].data,\"order\", newOrder)\r\n                if(!xuTextColl[index].data.ncolor){\r\n                    obj.diagram.model.setDataProperty(xuTextColl[index].data,\"textStroke\", xuStroke)\r\n                }\r\n                // obj.diagram.model.setDataProperty(xuTextColl[index].data,\"order\", newOrder)\r\n                // if(!xuTextColl[index].data.ncolor){\r\n                //     obj.diagram.model.setDataProperty(xuTextColl[index].data,\"textStroke\", xuStroke)\r\n                // }\r\n            }\r\n            obj.__location = computeNewRotateLoc(group.location, obj.location.copy(), obj.angle)\r\n            adjustTextAngle(obj, shiTextColl[index],xuTextColl[index],group)\r\n            \r\n            obj.location = obj.__location\r\n            lastOlive = obj;\r\n            obj.diagram.model.setDataProperty(obj.data,\"isNew\", null)\r\n        })\r\n        \r\n    }\r\n\r\n    // define a custom grid layout that makes sure the length of each lane is the same\r\n    // and that each lane is broad enough to hold its subgraph\r\n    function WaveGroupLayout() {\r\n        go.Layout.call(this);\r\n        // go.GridLayout.call(this);\r\n        // this.cellSize = new go.Size(1, 1);\r\n        // this.wrappingColumn = Infinity;\r\n        // this.wrappingWidth = Infinity;\r\n        // this.spacing = new go.Size(0, 0);\r\n        // this.alignment = go.GridLayout.Position;\r\n      }\r\n      go.Diagram.inherit(WaveGroupLayout, go.Layout);\r\n  \r\n      function computeNewRotateLoc(rotateCenter,currentLoc, angle){\r\n          if(rotateCenter.equals(currentLoc)) return currentLoc\r\n        // 计算选择中心点到（0,0）点的偏移\r\n        var offset = new go.Point(0,0).subtract(rotateCenter.copy())\r\n        // 将原来的点偏移到相对0,0点的位置\r\n        var nodeOrigin = currentLoc.copy().offset(offset.x, offset.y)\r\n        var newNodeOrigin = nodeOrigin.rotate(angle)\r\n        var newNodeLoc = newNodeOrigin.copy().offset(-offset.x, -offset.y)\r\n        return newNodeLoc\r\n        // console.log(\"newNodeLoc\", newNodeLoc)\r\n      }\r\n      \r\n      WaveGroupLayout.prototype.doLayout = function(coll) {\r\n          console.log(\"WaveGroupLayout.doLayout\")\r\n        var diagram = this.diagram;\r\n        diagram.model.startTransaction(\"WaveGroupLayout\")\r\n        \r\n          // COLL might be a Diagram or a Group or some Iterable<Part>\r\n        var it = this.collectParts(coll).iterator;\r\n        var group = this.group\r\n        layoutWaveGroup(it, diagram, group)\r\n\r\n        go.Layout.prototype.doLayout.call(this, coll);\r\n        // diagram.model.addNodeData(tailOlive)\r\n        \r\n        diagram.model.commitTransaction(\"WaveGroupLayout\");\r\n        // setTimeout(()=>{\r\n        //     diagram.updateAllTargetBindings()\r\n        // })\r\n        return;\r\n        // return;\r\n        // var diagram = this.diagram;\r\n        if (diagram === null) return;\r\n        diagram.startTransaction(\"PoolLayout\");\r\n        // make sure all of the Group Shapes are big enough\r\n        // var minsize = computeMinPoolSize();\r\n        // diagram.findTopLevelGroups().each(function(lane) {\r\n        //   if (!(lane instanceof go.Group)) return;\r\n        //   var shape = lane.selectionObject;\r\n        //   if (shape !== null) {  // change the desiredSize to be big enough in both directions\r\n        //     var sz = computeLaneSize(lane);\r\n        //     shape.width = (!isNaN(shape.width)) ? Math.max(shape.width, sz.width) : sz.width;\r\n        //     shape.height = (isNaN(shape.height) ? minsize.height : Math.max(shape.height, minsize.height));\r\n        //     var cell = lane.resizeCellSize;\r\n        //     if (!isNaN(shape.width) && !isNaN(cell.width) && cell.width > 0) shape.width = Math.ceil(shape.width / cell.width) * cell.width;\r\n        //     if (!isNaN(shape.height) && !isNaN(cell.height) && cell.height > 0) shape.height = Math.ceil(shape.height / cell.height) * cell.height;\r\n        //   }\r\n        // });\r\n        // now do all of the usual stuff, according to whatever properties have been set on this GridLayout\r\n        go.GridLayout.prototype.doLayout.call(this, coll);\r\n        diagram.commitTransaction(\"PoolLayout\");\r\n      };\r\n      // end PoolLayout class\r\n\r\n      module.exports = WaveGroupLayout\r\n      module.exports.layoutWaveGroup = layoutWaveGroup\r\n      module.exports.adjustTextAngle = adjustTextAngle\n\n\n// WEBPACK FOOTER //\n// ./src/layout/waveGroupLayout.js","var $ = go.GraphObject.make;\r\nvar helpers = require('../helpers/helpers.gojs')\r\nvar createTextNodeTemplate = require('../nodeTemplate/createTextNodeTemplate')\r\nvar createPictureSingleNodeTemplate = require('../nodeTemplate/createPictureSingleNodeTemplate')\r\nvar nodeTemplateFactory = require('../nodeTemplate/factory')\r\nclass Trtd {\r\n    constructor(div, config){\r\n        console.log('trtd base')\r\n\t\tthis.config = config;\r\n\t\tthis.modelChangedListener = config.modelChangedListener;\r\n\t\tthis.showContextMenuListener = config.showContextMenuListener;\r\n\t\tthis.hideContextMenuListener = config.hideContextMenuListener;\r\n\t\tthis.ViewportBoundsChangedListener = config.ViewportBoundsChangedListener;\r\n\t\tthis.InitialLayoutCompleted = config.InitialLayoutCompleted;\r\n        this.cxElement = config.cxElement; // 外部传入的菜单dom元素\r\n        this.deleteCallback = config.deleteCallback; // 删除回调\r\n        this.canAddAxisGroup = config.canAddAxisGroup == null?true:config.canAddAxisGroup \r\n        this.createFigure = config.createFigure; // 外部创建figure方法，异步调用，返回盘的id，写入节点的figure属性，一般为id\r\n        this.openFigure = config.openFigure; // 外部打开figure方法，根据节点的figure属性打开盘\r\n        \r\n        this.useDefaultContext = config.useDefaultContext == null?true:config.useDefaultContext;\r\n        // if()\r\n        this.defaultCxElement = null; // 默认菜单dom元素\r\n        this.type = config.type;\r\n\r\n        this.div = div;\r\n        this.containerDivId = config.containerDivId||\"mainbox\"; // diagram的div父级div的id，菜单会建在这下面\r\n\t\tthis.diagram = {};\r\n        if(config.model != null && typeof(config.model) == \"object\" ){\r\n            console.log(\"dsfdf\")\r\n            config.model = JSON.stringify(config.model)\r\n        }\r\n        this.model = config.model;\r\n        this.tpid = config.tpid||Date.now();\r\n        this.InitialFontSize = 18\r\n        this.tdCurrentTheme = {\r\n            id: 6,\r\n            borderWidth: 2,\r\n            borderColor: \"black\",\r\n            groupColor: \"rgba(0,0,0,0)\",\r\n            groupStroke: \"rgba(0,0,0,0)\",\r\n            groupStrokeWidth: 0,\r\n            themeName: \"黑白\",\r\n            linkColor: \"black\",\r\n            colorRange: \"white\"\r\n        }\r\n        this.nodeClickListener = config.nodeClickListener;\r\n        this.nodeDoubleClickListener = config.nodeDoubleClickListener;\r\n        this.isModified = false; // 是否保存\r\n        this.lastModified = 0; // 保存的序号，每一次modified事件加1，不再变化时执行真实保存，用于提高性能\r\n        this.modifiedIndex = 0; // 保存的序号，每一次modified事件加1，不再变化时执行真实保存，用于提高性能\r\n\t\t// // 初始化diagram\r\n\t\t// this.initDiagram(div, config);\r\n\t\t// this.initListener();\r\n\t\t// // Then you will need to construct a Model (usually a GraphLinksModel) for the Diagram, initialize its data by setting its Model.nodeDataArray and other properties, and then set the diagram's model.\r\n        // if(this.model){\r\n        //     this.initModel();\r\n        // }\r\n    }\r\n    initDiagram(){\r\n        console.log(\"基类方法，子类需要实现，用来初始化画布\")\r\n    }\r\n    addNodeTemplate(){\r\n        console.log(\"基类方法，子类需要实现，用来初始化节点模板\")\r\n    }\r\n\r\n\r\n    /**\r\n     *  设置缩放比例\r\n     * @param value\r\n     */\r\n    resetZoom(value) {\r\n        // console.log(value)\r\n        this.diagram.commandHandler.resetZoom(value);\r\n    }\r\n    getDefaultCustomMenuDivStr(){\r\n        console.log(\"基类方法，子类需要实现，设置默认自定义菜单\")\r\n        return `\r\n        <ul>\r\n            <li trtd_action=\"addLevelNodeMenu\"><a class=\"i18n\" data-lang=\"insertsl\">插入同级节点</a></li>\r\n            <li trtd_action=\"addChildNodeMenu\"><a class=\"i18n\" data-lang=\"icn\">插入子节点</a></li>\r\n            <li trtd_action=\"duplicateNode\"><a class=\"i18n\" data-lang=\"duplicateNode\">复制节点</a></li>\r\n            <li trtd_action=\"deleteNodeMenu\"><a class=\"i18n\" data-lang=\"remove\">删除</a></li>\r\n            <li trtd_action=\"orderChildNode\"><a class=\"i18n\" data-lang=\"ordernode\">子节点编号</a></li>\r\n            <li trtd_action=\"clearOrderChildNode\"><a class=\"i18n\" data-lang=\"clearordernode\">取消子节点编号</a></li>\r\n            <li trtd_action=\"clearNodeTextMenu\"><a class=\"i18n\" data-lang=\"emptynodetext\">清空节点文本</a></li>\r\n            <li trtd_action=\"insertTianpanMenu\"><a class=\"i18n\" data-lang=\"insertnodetianpan\">插入天盘节点</a></li>\r\n            <li trtd_action=\"insertTextMenu\"><a class=\"i18n\" data-lang=\"inserttext\">插入文本</a></li>\r\n            <li trtd_action=\"locateRootNodeMenu\"><a class=\"i18n\" data-lang=\"locaterootnode\">定位根节点</a></li>\r\n            <li trtd_action=\"showAllNodesMenu\"><a class=\"i18n\" data-lang=\"displayallnodes\">显示所有节点</a></li>\r\n            <li trtd_action=\"fixPictureMenu\"><a class=\"i18n\" data-lang=\"fixnode\">固定节点</a></li>\r\n            <li trtd_action=\"activePictureMenu\"><a class=\"i18n\" data-lang=\"cancelfix\">取消固定</a></li>\r\n        \r\n            <li trtd_action=\"delYunpanAxis\"><a class=\"i18n\" data-lang=\"cancelfix\">删除 CTRL+DEL</a></li>\r\n            <li trtd_action=\"addYunpanAxis\"><a class=\"i18n\" data-lang=\"cancelfix\">增加 CTRL+X/Y</a></li>\r\n            <li trtd_action=\"addFollowerGround\"><a class=\"i18n\" data-lang=\"insertsl\">增加同级节点</a></li>\r\n            <li trtd_action=\"addNewCircle\"><a class=\"i18n\" data-lang=\"icn\">增加子节点</a></li>\r\n            <li trtd_action=\"apiDeleteSelection\"><a class=\"i18n\" data-lang=\"remove\">删除</a></li>\r\n        </ul>\r\n        `\r\n    }\r\n\r\n    getShowContextMenus(node){\r\n        console.log(\"基类方法，子类需要实现，显示默认自定义带单时控制哪些菜单需要显示\")\r\n\r\n        var showIds = '';\r\n\r\n        if (!node || node.data.isGroup) {\r\n            // myDiagram.clearSelection();\r\n            showIds = \"locateRootNodeMenu,showAllNodesMenu,insertTextMenu,insertTianpanMenu\";\r\n            // if(myDiagram.model.modelData.currentType == \"dipan\"){\r\n            //     cxElement.getElementsByClassName('removeOutCycleMenu')[0].style.display = 'block';\r\n            // }\r\n        } else {\r\n                if (!(node instanceof go.Group) && (!node.data.category || node.data.category == \"\" || node.data.category == \"0\" || node.data.category == \"1\" || node.data.category == \"4\")) { //天盘节点,非group\r\n                    showIds = \"addLevelNodeMenu,addChildNodeMenu,deleteNodeMenu,orderChildNode,clearOrderChildNode,\" + \"clearNodeTextMenu,duplicateNode\";\r\n                    console.log(\"2111\")\r\n                    if(node.selectable){\r\n                        showIds += \"fixPictureMenu\"\r\n                    }else{\r\n                        showIds += \"activePictureMenu\"\r\n                    }\r\n                }\r\n\r\n\r\n                if( node.data.category == \"8\" ||  node.data.category == \"text\"||  node.data.category == \"addtextTemplate\"){\r\n                    showIds = \"deleteNodeMenu,\" + \"duplicateNode\";\r\n                }\r\n\r\n                if( node.data.category === \"yunpanx\"||node.data.category === \"yunpany\"){\r\n                    console.log(\"222222222222\")\r\n                    showIds = \"delYunpanAxis,\" + \"addYunpanAxis\";\r\n                }\r\n\r\n                if( node.data.category === \"dipan\"){\r\n                    showIds = \"addFollowerGround,\" + \"addChildDipanNode,\"+\"deleteDipanNode\";\r\n                }\r\n                \r\n\r\n\r\n                // for (var _i2 = 0; _i2 < showIds.split(',').length; _i2++) {\r\n                //     if (showIds.split(',')[_i2]&&showIds.split(',')[_i2]!==\"fixPictureMenu\"&&showIds.split(',')[_i2]!==\"activePictureMenu\") {\r\n                //         helpers.getElementByAttr(cxElement,\"li\",\"trtd_action\",showIds.split(',')[_i2])[0].style.display = 'block'\r\n                //         // cxElement.getElementsByClassName(showIds.split(',')[_i2])[0].style.display = 'block';\r\n                //     }else if(showIds.split(',')[_i2]!==\"fixPictureMenu\"||showIds.split(',')[_i2]!==\"activePictureMenu\"){\r\n                //         if (node.selectable) {\r\n                //             cxElement.getElementsByClassName('fixPictureMenu')[0].style.display = 'block';\r\n                //             cxElement.getElementsByClassName('activePictureMenu')[0].style.display = 'none';\r\n                //         } else {\r\n                //             cxElement.getElementsByClassName('fixPictureMenu')[0].style.display = 'none';\r\n                //             cxElement.getElementsByClassName('activePictureMenu')[0].style.display = 'block';\r\n                //         }\r\n                //     }\r\n                // }\r\n            }\r\n\r\n        return showIds\r\n    }\r\n    insertPicture(source){\r\n        this.apiInsertPicture(source)\r\n    }\r\n    apiInsertPicture(source){\r\n        console.log(\"基类方法，子类需要实现，对外接口，插入图片\")\r\n        // console.log(source)\r\n        var myDiagram = this.diagram\r\n        var currentType = this.diagram.model.modelData.currentType;\r\n        // var globalProperties = tdGetModelData(null, myDiagram.model);\r\n        //var layerThickness = parseInt(globalProperties['layerThickness']); //默认值100\r\n        // 获取扇形半径\r\n       \r\n        // var layerThickness = myDiagram.model.modelData.layerThickness;\r\n        //获取中心圆半径\r\n        // var rootNodeRadius = parseInt(myDiagram.model.findNodeDataForKey(1).layerThickness);\r\n        // var tdDipanTextAngle = globalProperties['tdDipanTextAngle'];\r\n        var node = myDiagram.selection.first();\r\n        if (node && node.data.category == 'dipan' && !rootKey) return; //地盘节点不允许插入将诶点\r\n        // if(node) return; // 暂时关闭节点插入图片功能\r\n        myDiagram.model.startTransaction('setSourceOfPicture');\r\n        try{\r\n            var documentPoint = JSON.parse(localStorage.getItem(\"TRTD_documentPoint\"))\r\n            if(!documentPoint) documentPoint = myDiagram.lastInput.documentPoint\r\n        }catch(err){\r\n            var documentPoint = myDiagram.lastInput.documentPoint\r\n        }\r\n        if (node) {\r\n            // myDiagram.model.setDataProperty(node.data,'lastCategory', node.data.category);  //保存添加图片前的类别，以便移除图片时恢复\r\n            // if (node.data.category != \"3\" && node.data.category != 'text') {\r\n            //     myDiagram.model.setCategoryForNodeData(node.data, \"4\");\r\n            // }\r\n            if (node.data.category == '3') { //文字节点暂时不能添加图片\r\n                myDiagram.model.setDataProperty(node.data, \"picture\", source);\r\n            }\r\n        } else {\r\n            // var e = myDiagram.lastInput;\r\n            var nextkey = (myDiagram.model.nodeDataArray.length + 1).toString();\r\n            var follower = { key: nextkey, text: \"\", category: \"3\" };\r\n            myDiagram.model.makeNodeDataKeyUnique(follower);\r\n            follower.loc = go.Point.stringify(documentPoint);\r\n\r\n            //follower.picture = obj.children[0].src;\r\n            follower.picture = source;\r\n            myDiagram.model.addNodeData(follower);\r\n        }\r\n\r\n        myDiagram.model.commitTransaction('setSourceOfPicture');\r\n    }\r\n    apiGetTheme(){\r\n        var model = this.diagram.model;\r\n        var themeText = \"\"\r\n        for(var i=0;i<model.nodeDataArray.length;i++){\r\n            if(model.nodeDataArray[i].role == \"theme\" || model.nodeDataArray[i].role == \"themeText\"|| model.nodeDataArray[i].subRole == \"themeText\"){\r\n                themeText = model.nodeDataArray[i].text\r\n                break;\r\n            }\r\n        }\r\n        if(!themeText){\r\n            var root = model.findNodeDataForKey(1)\r\n            if(root){\r\n                themeText = root.text\r\n            }\r\n        }\r\n        return themeText\r\n    }\r\n    apiGetThemeNode(){\r\n        var model = this.diagram.model;\r\n        var themeText = null\r\n        var it = this.diagram.nodes;\r\n        var tmp;\r\n        while(it.next()){\r\n            tmp = it.value;\r\n            if(tmp.data.role == \"theme\" || tmp.data.role == \"themeText\"|| tmp.data.subRole == \"themeText\"){\r\n                themeText = tmp\r\n                break;\r\n            }     \r\n        }\r\n        // for(var i=0;i<model.nodeDataArray.length;i++){\r\n        //     if(model.nodeDataArray[i].role == \"theme\" || model.nodeDataArray[i].role == \"themeText\"|| model.nodeDataArray[i].subRole == \"themeText\"){\r\n        //         themeText = model.nodeDataArray[i]\r\n        //         break;\r\n        //     }\r\n        // }\r\n        if(!themeText){\r\n            var root = this.diagram.findNodeForKey(1)\r\n            if(root){\r\n                themeText = root\r\n            }\r\n        }\r\n        return themeText\r\n    }\r\n\r\n    insertFigure(source, figureId) { //rootKey表示属于某个地盘节点的背景\r\n        // console.log(source)\r\n        var myDiagram = this.diagram\r\n        var currentType = this.diagram.model.modelData.currentType;\r\n        // var globalProperties = tdGetModelData(null, myDiagram.model);\r\n        //var layerThickness = parseInt(globalProperties['layerThickness']); //默认值100\r\n        // 获取扇形半径\r\n       \r\n        // var layerThickness = myDiagram.model.modelData.layerThickness;\r\n        //获取中心圆半径\r\n        // var rootNodeRadius = parseInt(myDiagram.model.findNodeDataForKey(1).layerThickness);\r\n        // var tdDipanTextAngle = globalProperties['tdDipanTextAngle'];\r\n        var node = myDiagram.selection.first();\r\n        // if (node && node.data.category == 'dipan' && !rootKey) return; //地盘节点不允许插入将诶点\r\n        if(node) return; // 暂时关闭节点插入图片功能\r\n        myDiagram.model.startTransaction('setSourceOfPicture');\r\n        try{\r\n            var documentPoint = JSON.parse(localStorage.getItem(\"TRTD_documentPoint\"))\r\n        }catch(err){\r\n            var documentPoint = myDiagram.lastInput.documentPoint\r\n        }\r\n        if (node) {\r\n            // myDiagram.model.setDataProperty(node.data,'lastCategory', node.data.category);  //保存添加图片前的类别，以便移除图片时恢复\r\n            if (node.data.category != \"3\" && node.data.category != 'text') {\r\n                myDiagram.model.setCategoryForNodeData(node.data, \"4\");\r\n            }\r\n            if (node.data.category != 'text') { //文字节点暂时不能添加图片\r\n                myDiagram.model.setDataProperty(node.data, \"picture\", source);\r\n            }\r\n        } else {\r\n            // var e = myDiagram.lastInput;\r\n            var nextkey = (myDiagram.model.nodeDataArray.length + 1).toString();\r\n            var follower = { key: nextkey, text: \"\", category: \"3\" };\r\n            myDiagram.model.makeNodeDataKeyUnique(follower);\r\n            follower.loc = go.Point.stringify(documentPoint);\r\n            follower.figureId = figureId;\r\n\r\n            //follower.picture = obj.children[0].src;\r\n            follower.picture = source;\r\n            myDiagram.model.addNodeData(follower);\r\n        }\r\n\r\n        myDiagram.model.commitTransaction('setSourceOfPicture');\r\n\r\n    }\r\n\r\n\r\n\r\n// 复制单个节点\r\napiDuplicateNode() {\r\n    var myDiagram = this.diagram;\r\n    var node = myDiagram.selection.first();\r\n    if (!node) return;\r\n    myDiagram.startTransaction();\r\n    var newData = myDiagram.model.copyNodeData(node.data);\r\n    var location = node.location.copy();\r\n    location.offset(50, -50);\r\n    newData.loc = go.Point.stringify(location);\r\n    newData.level = 0;\r\n    newData = clearRelProperty(newData);\r\n    myDiagram.model.addNodeData(newData);\r\n    myDiagram.commitTransaction();\r\n    // 清除节点的关系属性，比如父节点索引，子节点索引等\r\n    function clearRelProperty(data) {\r\n        data.level = 0;\r\n        delete data.prev;\r\n        delete data.isparent;\r\n        delete data.next;\r\n        delete data.group;\r\n        delete data.parent;\r\n        return data;\r\n    }\r\n}\r\n\r\n    apiPreviewImage(background=\"white\", scale=1){\r\n        console.log(\"基类方法，子类需要实现，对外接口，预览图片，生成base64\")\r\n        var myDiagram = this.diagram;\r\n        var imageParas = {\r\n            scale: scale,\r\n            // background: \"rgba(0,0,0,0)\",\r\n            background: background,\r\n            type: \"image/png\",\r\n            maxSize: new go.Size(9000, 9000)\r\n        }\r\n        var list = new go.List(go.GraphObject);\r\n        myDiagram.nodes.each(function(p) {\r\n            var temp = p.findObject(\"figure\")\r\n            if(temp){\r\n                temp.visible = false;\r\n            }\r\n            if (!(p instanceof go.Group)) {\r\n                list.add(p);\r\n                if( p instanceof go.Node){\r\n                    if(p.data.role == \"centerText\"){\r\n                        p.layerName = \"Foreground\"\r\n                    }\r\n                }\r\n            }\r\n        })\r\n        myDiagram.links.each(function(p) {\r\n            list.add(p);\r\n        })\r\n        imageParas.parts = list.iterator;\r\n\r\n        var imgdata = myDiagram.makeImageData(imageParas);\r\n        myDiagram.nodes.each(function(p) {\r\n            var temp = p.findObject(\"figure\")\r\n            if(p.data.figure && temp){\r\n                temp.visible = true;\r\n            }\r\n            // if (!(p instanceof go.Group)) {\r\n            //     list.add(p);\r\n            //     if( p instanceof go.Node){\r\n            //         if(p.data.role == \"centerText\"){\r\n            //             p.layerName = \"Foreground\"\r\n            //         }\r\n            //     }\r\n            // }\r\n        })\r\n        return imgdata;\r\n    }\r\n    apiDeleteSelection(){\r\n        console.log(\"基类方法，子类需要实现，对外接口，删除选中的节点\")\r\n        this.diagram.toolManager.textEditingTool.doCancel();\r\n        this.diagram.commandHandler.deleteSelection();\r\n    }\r\n    apiUndo () {\r\n        this.diagram.commandHandler.undo();\r\n    }\r\n    apiRedo () {\r\n        this.diagram.commandHandler.redo();\r\n    }\r\n    saveModel(e){\r\n        // if (e.isTransactionFinished) {\r\n            // console.log('model changed and has been saved to localstorage');\r\n            helpers.saveModelToLocalStorage(this.tpid, this.diagram.model)\r\n            // helpers.checkModel(e.model)\r\n        // }\r\n    }\r\n\r\n    addNodeTemplateBase(){\r\n        var myDiagram = this.diagram\r\n        this.diagram.nodeTemplateMap.add(\"text\", createTextNodeTemplate(this.diagram));\r\n        this.diagram.nodeTemplateMap.add(\"3\", createPictureSingleNodeTemplate(this.diagram));\r\n\r\n        // myDiagram.nodeTemplateMap.add(\"cbian\",  nodeTemplateFactory(\"cbian\",{diagram:this.diagram}).getNodeTemplate())\r\n        myDiagram.nodeTemplateMap.add(\"pic\",  nodeTemplateFactory(\"pic\",{diagram:this.diagram}).getNodeTemplate())\r\n        myDiagram.nodeTemplateMap.add(\"autoText\", nodeTemplateFactory(\"autoText\",{diagram:myDiagram}).getNodeTemplate());\r\n        myDiagram.groupTemplateMap.add(\"picGroup\", nodeTemplateFactory(\"picGroup\",{diagram:myDiagram}).getNodeTemplate());\r\n    }\r\n    // 添加水罗盘，三门系统\r\n    addWater(){\r\n        console.log(\"addWater\")\r\n        var diagram = this.diagram\r\n        var node = diagram.selection.first();\r\n        var group = null\r\n        if(node && node.data.category == \"axisGroup\"){\r\n            group=node.data.key;\r\n        }\r\n        var e = diagram.lastInput\r\n        diagram.startTransaction(\"addCbian\")\r\n        var groupKey = helpers.guid()\r\n        \r\n        var basePoint = e.documentPoint\r\n        var groupData = {\"category\":\"picGroup\", \r\n         \"role\":\"cbian\", \"isGroup\":true, \"level\":0, \r\n        \"key\":groupKey, \"loc\":go.Point.stringify(basePoint), \"deletable\":true}\r\n        if(group){\r\n            groupData.group = group\r\n        }\r\n        \r\n        var picData = { \"group\":groupKey, \"text\":\"\", \r\n        \"resizable\":false, \"category\":\"pic\", \r\n        \"loc\":go.Point.stringify(basePoint),\r\n        \"picture\":\"https://static.365trtd.com/system/water/water.png\", \"width\":150, \"height\":150}\r\n        // \"picture\":\"https://static.365trtd.com/system/cbian/cbian.png\", \"width\":150, \"height\":150}\r\n        \r\n        var themeData = {\"text\":\"总结\", \"deletable\":true,  \"fill\":\"black\", \"iconVisible\":false, \r\n        \"locationSpot\":\"1 0 0 0\", \"textAlign\":\"center\", \"category\":\"autoText\", \r\n        \"loc\":go.Point.stringify(basePoint.copy().offset(3,-3)), \r\n        \"movable\":true, \"group\":groupKey}\r\n        var timeData = {\"text\":\"时间\", \"deletable\":true,  \"fill\":\"black\", \"iconVisible\":false, \r\n        \"locationSpot\":\"1 0 0 0\", \"textAlign\":\"center\", \"category\":\"autoText\", \r\n        \"loc\":go.Point.stringify(basePoint.copy().offset(150, 0)), \r\n        \"movable\":true, \"group\":groupKey}\r\n        var energeData = {\"text\":\"能量\", \"deletable\":true, \"fill\":\"black\", \"iconVisible\":false, \r\n        \"locationSpot\":\"1 0 0 0\", \"textAlign\":\"center\", \"category\":\"autoText\", \r\n        \"loc\":go.Point.stringify(basePoint.copy().offset(0, -150)), \r\n        \"movable\":true, \"group\":groupKey}\r\n        var text1Data = {\"text\":\"总结1\", \"deletable\":true,  \"textStroke\":\"#0e399d\", \"iconVisible\":false, \r\n        \"locationSpot\":\"0 0 0 0\", \"textAlign\":\"left\", \"category\":\"autoText\", \r\n        \"loc\":go.Point.stringify(basePoint.copy().offset(155*Math.cos(30*Math.PI/180), -150*Math.sin(30*Math.PI/180))), \r\n        \"movable\":true, \"group\":groupKey}\r\n        var text2Data = {\"text\":\"总结2\", \"deletable\":true, \"textStroke\":\"#FFC000\", \"iconVisible\":false, \r\n        \"locationSpot\":\"0 0.5 0 0\", \"textAlign\":\"left\", \"category\":\"autoText\", \r\n        \"loc\":go.Point.stringify(basePoint.copy().offset(145*Math.cos(45*Math.PI/180), -150*Math.sin(45*Math.PI/180))), \r\n        \"movable\":true, \"group\":groupKey}\r\n        var text3Data = {\"text\":\"总结3\", \"deletable\":true, \"textStroke\":\"#cb1c27\", \"iconVisible\":false, \r\n        \"locationSpot\":\"0 1 0 0\", \"textAlign\":\"left\", \"category\":\"autoText\", \r\n        \"loc\":go.Point.stringify(basePoint.copy().offset(145*Math.cos(70*Math.PI/180), -140*Math.sin(70*Math.PI/180))), \r\n        \"movable\":true, \"group\":groupKey}\r\n\r\n        diagram.model.addNodeData(text1Data)\r\n        diagram.model.addNodeData(text2Data)\r\n        diagram.model.addNodeData(text3Data)\r\n        diagram.model.addNodeData(themeData)\r\n        diagram.model.addNodeData(timeData)\r\n        diagram.model.addNodeData(energeData)\r\n        diagram.model.addNodeData(picData)\r\n        diagram.model.addNodeData(groupData)\r\n        \r\n    //     {\"text\":\"自由文本\",\r\n    //     \"deletable\":true, \r\n    //     \"role\":\"freeText\",\r\n    //     \"fill\":\"black\", \r\n    //     \"iconVisible\":false, \r\n    //     \"locationSpot\":\"0.5 0.5 0 0\", \r\n    //     \"textAlign\":\"center\", \r\n    //     \"category\":\"autoText\", \r\n    //     \"loc\": go.Point.stringify(e.documentPoint), \r\n    //     \"movable\":true, \"group\":node.data.key\r\n    //    }\r\n\r\n        diagram.commitTransaction(\"addWater\")\r\n    \r\n    }\r\n\r\n    initDiagramBase(div, config){\r\n        console.log(\"基类初始化画布，子类修改diagram\")\r\n        var myDiagram = this.diagram;\r\n        var that = this;\r\n        \r\n    // function onTextChanged(){}\r\n        // function saveModel() {}\r\n        var myDiagram = this.diagram;\r\n\r\n        function onTextChanged(e) {\r\n            e.diagram.isModified = true;\r\n            console.log(\"onTextChanged\")\r\n        }\r\n        \r\n        // //var $ = go.GraphObject.make; \r\n        // function saveModel(e) {\r\n        //     // console.log(e)\r\n        //     if (e.isTransactionFinished) {\r\n        //         console.log('model changed and has been saved to localstorage');\r\n        //         helpers.saveModelToLocalStorage(that.tpid, that.diagram.model)\r\n        //         helpers.checkModel(e.model)\r\n        //     }\r\n        // }\r\n        var defaultConfig = {\r\n            initialContentAlignment: go.Spot.Center,\r\n            initialAutoScale: go.Diagram.Uniform,\r\n            initialDocumentSpot: go.Spot.Center,\r\n            initialViewportSpot: go.Spot.Center,\r\n            \"toolManager.hoverDelay\": 100,\r\n            padding: -20,\r\n            click: function(e) {\r\n                // closeToolbarWindow();\r\n                // removeNodeToolBar();\r\n                console.log(\"eeee:\",e)\r\n                localStorage.setItem(\"TRTD_documentPoint\",go.Point.stringify(e.documentPoint))\r\n            },\r\n            \"draggingTool.isCopyEnabled\": false,\r\n            // \"rotatingTool.snapAngleEpsilon\": 10,\r\n            \"commandHandler.archetypeGroupData\": { text: \"Group\", isGroup: true, color: \"blue\" },\r\n        \r\n            // enable undo & redo\r\n            allowDrop: true,\r\n            \"undoManager.isEnabled\": true,\r\n            \"toolManager.mouseWheelBehavior\": go.ToolManager.WheelZoom,\r\n            maxScale: 5.0,\r\n            minScale: 0.05,\r\n            hasVerticalScrollbar: false,\r\n            hasHorizontalScrollbar: false,\r\n            scrollMode: go.Diagram.InfiniteScroll,\r\n            scrollMargin: 50,\r\n            \"animationManager.isEnabled\": false,\r\n        \r\n            //rotatingTool: go.GraphObject.make(TopRotatingTool),  // defined below\r\n            \r\n            maxSelectionCount: 1,\r\n            InitialLayoutCompleted:(e)=>{\r\n                console.info(\"hhhhhhhhhhhhhhhhhhhh InitialLayoutCompleted\")\r\n                e.diagram.animationManager.isEnabled = true\r\n                if(that.InitialLayoutCompleted){\r\n                    that.InitialLayoutCompleted(e)\r\n                }\r\n            },\r\n            // make sure users can only create trees\r\n\r\n            validCycle: go.Diagram.CycleDestinationTree,\r\n        \r\n            \"ModelChanged\": function(e){\r\n                if (!e.isTransactionFinished) {\r\n                    return;\r\n                }\r\n                // return;\r\n                that.isModified = true;\r\n                that.lastModified = Date.now();\r\n                that.modifiedIndex += 1;\r\n                setTimeout(()=>{\r\n                    // 如果已经保存则不处理\r\n                    if(!that.isModified) {\r\n                        console.log(\"已经保存，跳过\",diff,\",\",that.modifiedIndex)\r\n                        return;\r\n                    };\r\n                    // var now = Date.now()\r\n                    var diff = Date.now() - that.lastModified\r\n                    if(diff >=1000){\r\n                        console.log(\"大于1000毫秒需要保存\",diff,\",\",that.modifiedIndex)\r\n                        that.modifiedIndex = 0\r\n                        that.isModified = false\r\n                        that.saveModel(e)\r\n                        if(that.modelChangedListener){\r\n                            that.modelChangedListener(e.model)\r\n                        }\r\n                    }\r\n                },1100)\r\n\r\n            },\r\n        \r\n            \"TextEdited\": onTextChanged, //在下面定义\r\n            contextMenu: $(go.Adornment),\r\n            ViewportBoundsChanged:(e)=>{\r\n                // console.log(\"ViewportBoundsChangedListener\", e)\r\n                if(that.ViewportBoundsChangedListener){\r\n                    that.ViewportBoundsChangedListener(e)\r\n                }\r\n            }\r\n        }\r\n        \r\n        var diagramConfig = Object.assign(defaultConfig, config.diagramConfig);\r\n        delete diagramConfig.type;\r\n        delete diagramConfig.tpid;\r\n        delete diagramConfig.model;\r\n        delete diagramConfig.modelChangedListener; // 这里需要优化，传入的参数不一定能够在diagram里配置\r\n        delete diagramConfig.mouseOverListener;\r\n\t\tdelete diagramConfig.clickListener;\r\n        this.diagram = $(go.Diagram, div, diagramConfig);\r\n        this.diagram.__trtd = this;\r\n        var myDiagram = this.diagram;\r\n\r\n        var forelayer = myDiagram.findLayer(\"Foreground\");\r\n        myDiagram.addLayerBefore(go.GraphObject.make(go.Layer, { name: \"default\" }), forelayer);\r\n        myDiagram.addLayerBefore(go.GraphObject.make(go.Layer, { name: \"overflow\" }), forelayer);\r\n        for (var i = 10; i >= 0; i--) {\r\n            myDiagram.addLayerBefore(go.GraphObject.make(go.Layer, { name: i.toString() }), forelayer);\r\n        }\r\n        //myDiagram.toolManager.draggingTool.computeEffectiveCollection = computeEffectiveCollection;\r\n        myDiagram.toolManager.draggingTool.computeEffectiveCollection = computeEffectiveCollection;\r\n        myDiagram.toolManager.dragSelectingTool.isPartialInclusion = true;\r\n        \r\n        myDiagram.toolManager.rotatingTool.handleArchetype =\r\n                $(go.Panel, \"Auto\",\r\n                    $(go.Shape, \"BpmnActivityLoop\", { width: 30, height: 30, stroke: \"green\", fill: \"transparent\" }),\r\n                    $(go.Shape, \"Rectangle\", {\r\n                        width: 30,\r\n                        height: 30,\r\n                        stroke: \"green\",\r\n                        fill: \"transparent\",\r\n                        strokeWidth: 0\r\n                    })\r\n                );\r\n\r\n        myDiagram.toolManager.linkReshapingTool.handleArchetype =\r\n            $(go.Shape, \"Circle\", {\r\n                width: 30,\r\n                height: 30,\r\n                fill: \"lightblue\",\r\n                stroke: \"dodgerblue\"\r\n            });        \r\n\r\n        // only allow new links between ports of the same group\r\n        myDiagram.toolManager.linkingTool.linkValidation = sameGroup;\r\n        // only allow reconnecting an existing link to a port of the same color\r\n        myDiagram.toolManager.relinkingTool.linkValidation = sameGroup;\r\n        myDiagram.commandHandler.doKeyDown = (e)=>{\r\n            this.dokeyDownFn(e)\r\n        }\r\n        myDiagram.commandHandler.deleteSelection = function(){\r\n            console.log(\"deleteSelectiondeleteSelection\")\r\n            var node = that.diagram.selection.first();\r\n            if (!node) {\r\n                return;\r\n            }\r\n            // 不允许删除主题\r\n            if(node.data.role == \"theme\" || node.data.role == \"themeText\"|| node.data.subRole == \"themeText\"){\r\n                return;\r\n            }\r\n            var nodeCopy = JSON.parse(JSON.stringify(node.data))\r\n            that.deleteSelection();\r\n            if(that.deleteCallback){\r\n                that.deleteCallback(nodeCopy)\r\n            }\r\n        }\r\n        myDiagram.commandHandler.redo = function() {\r\n            var cmd = myDiagram.commandHandler;\r\n            //myDiagram.currentTool.doCancel();\r\n            //go.CommandHandler.prototype.redo.call(cmd);\r\n            myDiagram.clearSelection();\r\n            go.CommandHandler.prototype.redo.call(cmd);\r\n        };\r\n        myDiagram.commandHandler.undo = function() {\r\n            var cmd = myDiagram.commandHandler;\r\n\r\n            myDiagram.clearSelection();\r\n            if (myDiagram.toolManager) {\r\n                myDiagram.toolManager.textEditingTool.doCancel();\r\n            }\r\n            go.CommandHandler.prototype.undo.call(cmd);\r\n        };\r\n\r\n        myDiagram.toolManager.clickCreatingTool.archetypeNodeData = {\r\n            category: \"autoText\",\r\n            text: \"双击编辑文本\",\r\n            level: 0,\r\n            radius: 120,\r\n        };\r\n\r\n        this.addNodeTemplateBase()\r\n        this.addDiagramContextMenu();\r\n        // if(this.model){\r\n        //     this.initModel();\r\n        // }\r\n    }\r\n    removeNodeRemarkTips() {\r\n        var doms = document.getElementById('tooltip');\r\n        if (doms) {\r\n            doms.parentNode.removeChild(doms);\r\n        }\r\n    }\r\n\r\n    showNodeRemarkTips(e, node) {\r\n        var info = document.getElementById('tooltip');\r\n        if (!info || info.length == 0) {\r\n            let str = document.createElement('div');\r\n            str.setAttribute('id', 'tooltip');\r\n            str.setAttribute('style', 'word-wrap: break-word;word-break: break-all');\r\n            document.body.appendChild(str);\r\n            info = document.getElementById('tooltip');\r\n        }\r\n        var box = document.getElementById(\"tooltip\");\r\n    \r\n        if (!node.data.istemp && (node.data.text && node.data.text.trim() == \"\") && (node.data.remark && node.data.remark.trim() == \"\" || typeof(node.data.remark) == 'undefined')) return;\r\n    \r\n        if (node.data.istemp) {\r\n            var toolTipText = lang.trans('tempnodetips');\r\n        } else if(node.category === \"y\"||(node.category === \"LogicXor\"&&node.data.loc.split(' ')[1] === \"5\")){\r\n            var toolTipText =\"最右新增\";\r\n        }else if(node.category === \"x\"||(node.category === \"LogicXor\"&&node.data.loc.split(' ')[0] === \"-20\")){\r\n            var toolTipText =\"最上新增\";\r\n        }else {\r\n            var toolTipText = node.data.text + \"<br><hr>\";\r\n            toolTipText += node.data.remark ? node.data.remark : \"\";\r\n        }\r\n    \r\n        box.innerHTML = toolTipText;\r\n        // box.style.left = e.viewPoint.x + \"px\";\r\n        // box.style.top = e.viewPoint.y + \"px\";\r\n        if(node.category === \"y\"||node.category === \"x\"||node.category === \"LogicXor\"){\r\n            box.style.left = (e.event.clientX + 10) + \"px\";\r\n            box.style.top = (e.event.clientY - 10) + \"px\";\r\n        }else{\r\n            box.style.left = (e.event.clientX + 50) + \"px\";\r\n            box.style.top = (e.event.clientY - 50) + \"px\";\r\n        }\r\n        box.style.position = \"fixed\";\r\n        box.style.zIndex = 5555;\r\n        box.style.backgroundColor = \"#FFFFE1\";\r\n        // $(\"#tooltip\")[0].innerHtml = \"<p>aaaaaaaaa<br>bbbbbbbbbbbbb</p>\";\r\n    }\r\n\r\n    nodeResizeAdornmentTemplate () {\r\n        return $(go.Adornment, \"Spot\",\r\n            $(go.Placeholder), // takes size and position of adorned object\r\n            $(go.Shape, \"Circle\", // left resize handle\r\n                {\r\n                    alignment: go.Spot.TopLeft,\r\n                    alignmentFocus: go.Spot.BottomRight,\r\n                    cursor: \"col-resize\",\r\n                    desiredSize: new go.Size(30, 30),\r\n                    fill: \"lightblue\",\r\n                    stroke: \"dodgerblue\"\r\n                }),\r\n            $(go.Shape, \"Circle\", // right resize handle\r\n                {\r\n                    alignment: go.Spot.BottomRight,\r\n                    alignmentFocus: go.Spot.TopLeft,\r\n                    cursor: \"col-resize\",\r\n                    desiredSize: new go.Size(30, 30),\r\n                    fill: \"lightblue\",\r\n                    stroke: \"dodgerblue\"\r\n                })\r\n        )\r\n    }\r\n    // 创建默认菜单 this.defaultCxElement\r\n    customMenu () {\r\n        console.log(\"第一步创建默认的自定义菜单\")\r\n        if(this.defaultCxElement){\r\n            console.log(\"使用默认菜单，已经存在\")\r\n            return this.defaultCxElement;\r\n        }\r\n        console.log(this.useDefaultContext)\r\n        // 不使用默认菜单\r\n        if(!this.useDefaultContext){\r\n            \r\n            return null;\r\n        }\r\n        // 添加菜单选项\r\n        var str = this.getDefaultCustomMenuDivStr()\r\n        \r\n        let div = document.createElement('div');\r\n        // div.setAttribute('id', 'contextMenu');\r\n        div.setAttribute('class', 'context-menu');\r\n        div.innerHTML = str;\r\n        // document.getElementsByClassName('mainbox')[0].appendChild(div);\r\n        var mainbox = document.getElementById(this.containerDivId)\r\n        mainbox.appendChild(div);\r\n        let contextMeluDom = mainbox.getElementsByClassName('context-menu')[0]\r\n        this.defaultCxElement = contextMeluDom\r\n        this.bindMenuEventListener(contextMeluDom)\r\n        return contextMeluDom\r\n    }\r\n\r\n    bindMenuEventListener(cxElement){\r\n        let menuList = cxElement.getElementsByTagName('li');\r\n        console.log(\"创建的自定义菜单需要绑定一些事件\")\r\n        for(let i = 0; i < menuList.length; i++){\r\n            menuList[i].addEventListener('click', () => {\r\n                let val = menuList[i].getAttribute('trtd_action');\r\n                // cxcommand(this, val);\r\n                console.log(\"menuList[i].addEventListener('click'\")\r\n                this.diagram.__trtd[val]();\r\n                this.diagram.currentTool.stopTool();\r\n                return false\r\n                // setTimeout(()=>{\r\n                //     this.diagram.toolManager.contextMenuTool.hideContextMenu()\r\n                // },100)\r\n            })\r\n        }\r\n    }\r\n\r\n    addDiagramContextMenu(){\r\n      \r\n        // console.log(\"基类 addDiagramContextMenu\")\r\n        console.log(\"第二步 将自定义菜单与diagram绑定\")\r\n        // console.log(objNode)\r\n       \r\n\r\n        var that = this;\r\n        var myDiagram = this.diagram;\r\n        var cxTool = myDiagram.toolManager.contextMenuTool;\r\n        // This is the actual HTML context menu:\r\n\r\n        // var mainbox = document.getElementById('mainbox')\r\n        // mainbox.appendChild(div);\r\n        \r\n        // let menuList = mainbox.getElementsByClassName('context-menu')[0].getElementsByTagName('li');\r\n        // var cxElement = mainbox.getElementsByClassName('context-menu')[0]\r\n        console.log(this.cxElement)\r\n        \r\n        if(!this.cxElement){ // 外部没有传入菜单元素，则使用默认的菜单\r\n            if(!this.defaultCxElement){\r\n                this.defaultCxElement = this.customMenu()\r\n            }\r\n            var cxElement = this.defaultCxElement\r\n        }else{\r\n            var cxElement = this.cxElement\r\n        }\r\n        if(!cxElement){\r\n            return;\r\n        }\r\n        // We don't want the div acting as a context menu to have a (browser) context menu!\r\n        cxElement.addEventListener(\"contextmenu\", function(e) {\r\n            // this.onfocus();\r\n            e.preventDefault();\r\n            return false;\r\n        }, false);\r\n        // cxElement.addEventListener(\"blur\", function(e) {\r\n        //     cxTool.stopTool();\r\n        //     // maybe start another context menu\r\n        //     if (cxTool.canStart()) {\r\n        //         myDiagram.currentTool = cxTool;\r\n        //         cxTool.doMouseUp();\r\n        //     }\r\n        // }, false);\r\n        cxElement.tabIndex = \"1\";\r\n        // This is the override of ContextMenuTool.showContextMenu:\r\n        // This does not not need to call the base method.\r\n        cxTool.showContextMenu = function(contextmenu, obj) {\r\n            console.log('thisthisthis:', this.diagram);\r\n            console.log('thisthisthis:', this.diagram.model);\r\n    \r\n            console.log('this:', this.diagram.selection);\r\n            var diagram = this.diagram;\r\n            // console.log('diagram:', diagram);\r\n            if (diagram === null) return;\r\n            // Hide any other existing context menu\r\n            if (contextmenu !== this.currentContextMenu) {\r\n                this.hideContextMenu();\r\n            }\r\n\r\n            var node = myDiagram.findPartAt(myDiagram.lastInput.documentPoint, false);\r\n            this.currentContextMenu = contextmenu;\r\n            var mousePt = diagram.lastInput.viewPoint;\r\n            console.log(diagram.lastInput)\r\n            cxElement.style.left = mousePt.x + \"px\";\r\n            cxElement.style.top = mousePt.y + \"px\";\r\n            // console.log(diagram.lastInput.Dr.clientX)\r\n            // console.log(mousePt.x)\r\n            \r\n            // cxElement.style.left = diagram.lastInput.Dr.clientX + \"px\";\r\n            // cxElement.style.top = diagram.lastInput.Dr.clientY + \"px\";\r\n\r\n            if(that.showContextMenuListener){\r\n                return that.showContextMenuListener(this.diagram, node)\r\n            }\r\n\r\n            // ===========================================================\r\n            // Show only the relevant buttons given the current state.\r\n            var showMenus = that.getShowContextMenus(node)\r\n            let liL = cxElement.getElementsByTagName('li')\r\n            if(showMenus){\r\n                console.log(showMenus.split(',').length)\r\n                for(let i = 0; i < liL.length; i++){\r\n                    liL[i].style.display = 'none';\r\n                }\r\n                for(let i = 0; i < showMenus.split(',').length; i++){\r\n                    try{\r\n                        if(helpers.getElementByAttr(cxElement,\"li\",\"trtd_action\",showMenus.split(',')[i])[0]){\r\n                            helpers.getElementByAttr(cxElement,\"li\",\"trtd_action\",showMenus.split(',')[i])[0].style.display = 'block'\r\n                        }\r\n                        \r\n                    }catch(e){\r\n                        console.error(e)\r\n                        continue\r\n                    }\r\n                    // cxElement.getElementsByClassName(showIds.split(',')[i])[0].style.display = 'block';\r\n                }\r\n            }else{\r\n                if(showMenus == \"\"){\r\n                    for(let i = 0; i < liL.length; i++){\r\n                        liL[i].style.display = 'block';\r\n                    }\r\n                }else{\r\n                    for(let i = 0; i < liL.length; i++){\r\n                        liL[i].style.display = 'none';\r\n                    }\r\n                }\r\n            }\r\n\r\n            // Now show the whole context menu element\r\n            cxElement.style.display = \"block\";\r\n            // we don't bother overriding positionContextMenu, we just do it here:\r\n\r\n            // cxElement.style.left = x+10 + \"px\";\r\n            // cxElement.style.top = y-40 + \"px\";\r\n            // Remember that there is now a context menu showing\r\n            \r\n        }\r\n            // This is the corresponding override of ContextMenuTool.hideContextMenu:\r\n            // This does not not need to call the base method.\r\n        cxTool.hideContextMenu = function() {\r\n            if (this.currentContextMenu === null) return;\r\n            this.currentContextMenu = null;\r\n            cxElement.style.display = \"none\";\r\n            if(that.hideContextMenuListener){\r\n                return that.hideContextMenuListener(myDiagram)\r\n            }\r\n        }\r\n    }\r\n\r\n    getNodeContextMenu() {\r\n        return $(go.Adornment)\r\n\r\n        let style = {\r\n            // width: 120,\r\n            // height: 30,\r\n            // margin: 2,\r\n            // font: \"bold 14px sans-serif\",\r\n            // margin: 3,\r\n        }\r\n    \r\n        return $(go.Adornment, \"Vertical\",\r\n            $(\"ContextMenuButton\",\r\n                $(go.TextBlock, \"应用样式到所有同级节点\"), {\r\n                    click: function(e, obj) {\r\n                        menus.applyStyle2Level(e, obj);\r\n                    }\r\n                }),\r\n            $(\"ContextMenuButton\",\r\n                $(go.TextBlock, \"应用样式到同级节点\"), {\r\n                    click: function(e, obj) {\r\n                        menus.applyStyle2CurLevel(e, obj);\r\n                    }\r\n                }),\r\n            $(\"ContextMenuButton\",\r\n                $(go.TextBlock, \"应用样式到子节点\"), {\r\n                    click: function(e, obj) {\r\n                        menus.applyStyle2ChiLevel(e, obj);\r\n                    }\r\n                }),\r\n            $(\"ContextMenuButton\",\r\n                $(go.TextBlock, \"添加\"), {\r\n                    click: function(e, obj) {\r\n                        menus.addFollower(e);\r\n                    }\r\n                }),\r\n            $(\"ContextMenuButton\",\r\n                $(go.TextBlock, \"添加子节点\"), {\r\n                    click: function(e) {\r\n                        menus.startNewSpiral(e);\r\n                    }\r\n                }),\r\n            $(\"ContextMenuButton\",\r\n                $(go.TextBlock, \"定位当前节点\"), style, {\r\n                    click: function(e){\r\n\r\n                    }\r\n                }),\r\n    \r\n            $(\"ContextMenuButton\",\r\n                $(go.TextBlock, \"删除\"), style, {\r\n                    click: function(e, obj) {\r\n                        console.log('eeeeeeeeee:', e);\r\n                        e.diagram.commandHandler.deleteSelection();\r\n                    }\r\n                }),\r\n            // $(\"ContextMenuButton\",\r\n            //     $(go.TextBlock, \"添加图片\"), style, {\r\n            //         click: function(e, obj) {\r\n            //             insertPicture();\r\n            //         }\r\n            //     }),\r\n            // $(\"ContextMenuButton\",\r\n            //     $(go.TextBlock, \"移除图片\"), style, {\r\n            //         click: function(e, obj) {\r\n            //             removeNodePicture();\r\n            //         }\r\n            //     }),\r\n            $(\"ContextMenuButton\",\r\n                $(go.TextBlock, \"清空文本\"), style, {\r\n                    click: function(e, obj) {\r\n                        var myDiagram = e.diagram;\r\n                        var node = myDiagram.selection.first();\r\n                        if (node) {\r\n                            myDiagram.startTransaction();\r\n                            //node.data.text=\"\";\r\n                            myDiagram.model.setDataProperty(node.data, \"text\", \"\");\r\n                            myDiagram.commitTransaction();\r\n                        }\r\n                        //removeNodePicture();\r\n                    }\r\n                }),\r\n            $(\"ContextMenuButton\",\r\n                $(go.TextBlock, \"删除 DEL\"), style, {\r\n                    click: function(e, obj) {\r\n                        var myDiagram = e.diagram;\r\n                        var node = myDiagram.selection.first();\r\n                        if (node) {\r\n                            yunpan.yunpandel(e)\r\n                        }\r\n                        //removeNodePicture();\r\n                    }\r\n                }),\r\n            $(\"ContextMenuButton\",\r\n                $(go.TextBlock, \"增加 CTRL+X/Y\"), style, {\r\n                    click: function(e, obj) {\r\n                        var myDiagram = e.diagram;\r\n                        var node = myDiagram.selection.first();\r\n                        if (node) {\r\n                            if(node.data.loc.split(\" \")[1] === \"0\"&&node.data.category!==\"x\"){\r\n                                yunpan.addy(e)\r\n                            }else if(node.data.loc.split(\" \")[0] === \"0\"&&node.data.category!==\"y\"){\r\n                                yunpan.addx(e)\r\n                            }; \r\n                        }\r\n                        //removeNodePicture();\r\n                    }\r\n                }),\r\n            $(\"ContextMenuButton\",\r\n                $(go.TextBlock, \"删除 DEL\"), style, {\r\n                    click: function(e, obj) {\r\n                        var myDiagram = e.diagram;\r\n                        var node = myDiagram.selection.first();\r\n                        if (node) {\r\n                            yunpan.yunpandel(e)\r\n                        }\r\n                        //removeNodePicture();\r\n                    }\r\n                }),\r\n            $(\"ContextMenuButton\",\r\n                $(go.TextBlock, \"增加同级节点\"), style, {\r\n                    click: function(e, obj) {\r\n                        var myDiagram = e.diagram;\r\n                        var node = myDiagram.selection.first();\r\n                        if(myDiagram.selection.first().data.istemp){\r\n                            return\r\n                        }\r\n                        dipan.addFollowerGround(e);\r\n                    }\r\n                }),\r\n            $(\"ContextMenuButton\",\r\n                $(go.TextBlock, \"增加子节点\"), style, {\r\n                    click: function(e, obj) {\r\n                        var myDiagram = e.diagram;\r\n                        var node = myDiagram.selection.first();\r\n                        if(node.data.parent){\r\n                            var parentNode = node.diagram.findNodeForKey(node.data.parent);\r\n                            if(parentNode.data.istemp){\r\n                                return\r\n                            }\r\n                        }\r\n                        dipan.addNewCircle(e);\r\n                    }\r\n                }),\r\n            $(\"ContextMenuButton\",\r\n                $(go.TextBlock, \"删除\"), style, {\r\n                    click: function(e, obj) {\r\n                        var myDiagram = e.diagram;\r\n                        var node = myDiagram.selection.first();\r\n                        if(node.data.parent){\r\n                            var parentNode = node.diagram.findNodeForKey(node.data.parent);\r\n                            if(parentNode.data.istemp){\r\n                                return\r\n                            }\r\n                        }\r\n                        dipan.addNewCircle(e);\r\n                    }\r\n                }),\r\n                $(\"ContextMenuButton\",\r\n                $(go.TextBlock, \"复制副本\"), style, {\r\n                    click: function(e, obj) {\r\n                        var myDiagram = e.diagram;\r\n                        var node = myDiagram.selection.first();\r\n                        if(myDiagram.selection.first().data.istemp){\r\n                            return\r\n                        }\r\n                        dipan.addFollowerGround(e);\r\n                    }\r\n                }),\r\n            $(\"ContextMenuButton\",\r\n                $(go.TextBlock, \"权限设置\"), style, {\r\n                    click: function(e, obj) {\r\n                        var myDiagram = e.diagram;\r\n                        var node = myDiagram.selection.first();\r\n                        if(node.data.parent){\r\n                            var parentNode = node.diagram.findNodeForKey(node.data.parent);\r\n                            if(parentNode.data.istemp){\r\n                                return\r\n                            }\r\n                        }\r\n                        dipan.addNewCircle(e);\r\n                    }\r\n                }),\r\n            $(\"ContextMenuButton\",\r\n                $(go.TextBlock, \"删除\"), style, {\r\n                    click: function(e, obj) {\r\n                        var myDiagram = e.diagram;\r\n                        var node = myDiagram.selection.first();\r\n                        if(node.data.parent){\r\n                            var parentNode = node.diagram.findNodeForKey(node.data.parent);\r\n                            if(parentNode.data.istemp){\r\n                                return\r\n                            }\r\n                        }\r\n                        dipan.addNewCircle(e);\r\n                    }\r\n                })\r\n    \r\n        );\r\n    }\r\n\r\n    dokeyDownFn() {   \r\n            //快捷键\r\n            // function dokeyDownFn (myDiagram) {\r\n            var myDiagram = this.diagram;\r\n            var diagram = this.diagram;\r\n            var e = this.diagram.lastInput;\r\n            var cmd = myDiagram.commandHandler;\r\n            var node = myDiagram.selection.first();\r\n\r\n            if (e.event.altKey) {\r\n                if (e.key == \"Q\") {\r\n                    autoLayoutAll();\r\n                    return;\r\n                } else if (e.key == \"R\") {\r\n                    centerNode();\r\n                    return;\r\n                } else if (e.key == \"C\") {\r\n                    centerCurrentNode();\r\n                    return;\r\n                } else if (e.key == \"A\") {\r\n                    zoomToFit();\r\n                    return;\r\n                }\r\n            }\r\n            if (e.event.keyCode >= 65 && e.event.keyCode <= 90 && !e.event.altKey && !e.event.ctrlKey && !e.event.shiftKey) {\r\n                // e.bubbles = true;\r\n                e.bubbles = false;\r\n                diagram.__trtd.selectText(e);\r\n                return true;\r\n            }\r\n\r\n            if (e.event.keyCode === 13) { // could also check for e.control or e.shift\r\n                if (node && node.data.category == 'Root' ) {\r\n                    diagram.__trtd.addFollowerGround();\r\n                } else if(node && node.data.category == 'dipan'){\r\n                    diagram.__trtd.addFollowerGround();\r\n                }\r\n\r\n            } else if (e.event.keyCode === 9) { // could also check for e.control or e.shift\r\n                if (node && node.data.category == 'Root') {\r\n\r\n                    diagram.__trtd.addNewCircle();\r\n                } else if(node && node.data.category == 'dipan'){\r\n                    diagram.__trtd.addNewCircle();\r\n                }\r\n            } else if (e.key === \"t\") { // could also check for e.control or e.shift\r\n                if (cmd.canCollapseSubGraph()) {\r\n                    cmd.collapseSubGraph();\r\n                } else if (cmd.canExpandSubGraph()) {\r\n                    cmd.expandSubGraph();\r\n                }\r\n            } else if (e.key == \"Del\") {\r\n                if (myDiagram.selection.count == 0) {\r\n                    return;\r\n                }\r\n                diagram.__trtd.deleteSelection();\r\n            } else if (e.event.keyCode == 113) { //F2,覆盖地盘默认行为\r\n                diagram.__trtd.selectText();\r\n            } else if (e.event.keyCode == 37) { //左\r\n                diagram.__trtd.moveWithinNodes('left');\r\n            } else if (e.event.keyCode == 38) { //上\r\n                diagram.__trtd.moveWithinNodes('up');\r\n            } else if (e.event.keyCode == 39) { //右\r\n                diagram.__trtd.moveWithinNodes('right');\r\n            } else if (e.event.keyCode == 40) { //下\r\n                diagram.__trtd.moveWithinNodes('down');\r\n            } else {\r\n                // call base method with no arguments\r\n                go.CommandHandler.prototype.doKeyDown.call(cmd);\r\n            }\r\n            e.bubbles = false; //阻止事件冒泡到dom\r\n        // };\r\n\r\n        // return this.dokeyDownFn(this);\r\n    }\r\n}\r\n\r\nfunction computeEffectiveCollection(parts) {\r\n    var coll = new go.Set(go.Part);\r\n    var node = parts.first();\r\n    if (node) {\r\n        if(node.containingGroup && node.containingGroup.data.category == \"labelGroup\"){\r\n            var it = node.containingGroup.findSubGraphParts().iterator;\r\n            coll.add(node.containingGroup)\r\n            while(it.next()){\r\n                var n = it.value;\r\n                coll.add(n)\r\n            }\r\n        }else{\r\n            helpers.travelParts(node, function(p) {\r\n                coll.add(p);\r\n            })\r\n        }\r\n    } else {\r\n        coll.addAll(parts);\r\n    }\r\n    var tool = this;\r\n\r\n    return go.DraggingTool.prototype.computeEffectiveCollection.call(this, coll);\r\n};\r\n\r\nfunction sameGroup(fromnode, fromport, tonode, toport) {\r\n    //a node has 2 outer links at most\r\n    if (fromnode.findLinksOutOf().count >= 2) return;\r\n    //root node has 1 outer links at most\r\n    if (fromnode.findLinksOutOf().count >= 1 && fromnode.data.key == 1) return;\r\n    return fromnode.data.group === tonode.data.group;\r\n    // this could look at the fromport.fill and toport.fill instead,\r\n    // assuming that the ports are Shapes, which they are because portID was set on them,\r\n    // and that there is a data Binding on the Shape.fill\r\n}\r\n\r\nfunction cxcommand (obj, val) {\r\n    var diagram = obj.diagram;\r\n    var myDiagram = obj.diagram;\r\n    if (!(diagram.currentTool instanceof go.ContextMenuTool)) return;\r\n    switch (val) {\r\n        // case \"Paste\": diagram.commandHandler.pasteSelection(diagram.lastInput.documentPoint); break;\r\n        case \"addChildNodeMenu\":\r\n            tdAddChildNode(obj);\r\n            break;\r\n        case \"addLevelNodeMenu\":\r\n            tdAddLevelNode(obj);\r\n            break;\r\n        case \"changeDipanBgMenu\":\r\n            changeDipanBackgroundImg();\r\n            break;\r\n        case \"removeDipanBgMenu\":\r\n            removeDipanBackgroundImg(obj);\r\n            break;\r\n        case \"deleteNodeMenu\":\r\n            myDiagram.toolManager.textEditingTool.doCancel();\r\n            myDiagram.commandHandler.deleteSelection();\r\n            break;\r\n        case \"addNodePictureMenu\":\r\n            // jQuery(\"#insertimage\").modal('show');\r\n            // document.getElementById('insertimage').modal('show');\r\n            break; //特殊处理\r\n        case \"removeNodePictureMenu\":\r\n            removeNodePicture(obj);\r\n            break;\r\n        case \"clearNodeTextMenu\":\r\n            var node = myDiagram.selection.first();\r\n            if (node) {\r\n                myDiagram.startTransaction();\r\n                myDiagram.model.setDataProperty(node.data, \"text\", \"\");\r\n                myDiagram.commitTransaction();\r\n            };\r\n            break;\r\n        case \"locateRootNodeMenu\":\r\n            centerNode(obj);\r\n            break;\r\n        case \"showAllNodesMenu\":\r\n            zoomToFit(obj);\r\n            break;\r\n        case \"removeOutCycleMenu\":\r\n            removeOutCycle(obj);\r\n            break;\r\n        case \"centerPictureMenu\":\r\n            centerPicture(obj);\r\n            break;\r\n        case \"equalWidthHeightPictureMenu\":\r\n            equalWidthHeightPicture(obj);\r\n            break;\r\n        case \"bringToTopMenu\":\r\n            bringToLayer(\"Foreground\", obj);\r\n            break;\r\n        case \"bringToBackgroundMenu\":\r\n            bringToLayer(\"Background\", obj);\r\n            break;\r\n        case \"bringUpMenu\":\r\n            bringToLayer(null, obj);\r\n            break;\r\n        case \"layoutGroupMenu\":\r\n            autoLayoutAll(true, obj);\r\n            break;\r\n\r\n        case \"insertTextMenu\":\r\n            insertTextNode(obj);\r\n            break;\r\n        case \"duplicateNode\":\r\n            duplicateNode(obj);\r\n            break; // 复制节点\r\n        case \"insertTianpanMenu\":\r\n            myDiagram.toolManager.clickCreatingTool.insertPart(myDiagram.lastInput.documentPoint);\r\n            break;\r\n        //固定节点\r\n        case \"fixPictureMenu\":   \r\n        case \"activePictureMenu\":\r\n            //var node = myDiagram.findPartAt(myDiagram.lastInput.documentPoint, false);\r\n            var node = myDiagram.selection.first();\r\n            myDiagram.startTransaction();\r\n            myDiagram.model.setDataProperty(node.data, \"selectable\", node.data.selectable != undefined ? (!node.data.selectable) : false);\r\n            myDiagram.commitTransaction();\r\n            break;\r\n        case \"orderChildNode\":\r\n            orderChildNode(obj);\r\n            break;\r\n        case \"clearOrderChildNode\":\r\n            clearOrderChildNode(obj);\r\n            break;\r\n        case \"delYunpanAxis\":\r\n            // yunpan.yunpandel(obj);\r\n            break;\r\n        case \"addYunpanAxis\":\r\n            // var node = myDiagram.selection.first();\r\n            // if(node.data.loc.split(\" \")[1] === \"0\"&&node.data.category!==\"x\"){\r\n            //     yunpan.addy(obj)\r\n            // }else if(node.data.loc.split(\" \")[0] === \"0\"&&node.data.category!==\"y\"){\r\n            //     yunpan.addx(obj)\r\n            // }; \r\n            break;\r\n        case \"addLevelDipanNode\":\r\n            if(myDiagram.selection.first().data.istemp){\r\n                return\r\n            }\r\n            obj.addFollowerGround();\r\n            break;\r\n        case \"addChildDipanNode\":\r\n            var node = myDiagram.selection.first();\r\n                if(node.data.parent){\r\n                    var parentNode = node.diagram.findNodeForKey(node.data.parent);\r\n                    if(parentNode.data.istemp){\r\n                        return\r\n                    }\r\n                }\r\n            obj.addNewCircle(obj);\r\n            break;\r\n        case \"deleteDipanNode\":\r\n        // myDiagram.commandHandler.deleteSelection();\r\n        obj.deleteSelection();\r\n        break;\r\n    }\r\n    diagram.currentTool.stopTool();\r\n}\r\n\r\n\r\n\r\n\r\n// module.exports.Trtd = Trtd;\r\nmodule.exports.Trtd = Trtd;\n\n\n// WEBPACK FOOTER //\n// ./src/diagram/trtd.js","\r\n// var sampleNodeTemplate = require('./sampleNodeTemplate')\r\nvar waveNodeTemplate = require('./waveNodeTemplate')\r\nvar waveTailNodeTemplate = require('./waveTailNodeTemplate')\r\nvar waveGroupNodeTemplate = require('./waveGroupNodeTemplate')\r\nvar axisGroupNodeTemplate = require('./axisGroupNodeTemplate')\r\nvar iconTextNodeTemplate = require('./iconTextNodeTemplate')\r\nvar autoTextNodeTemplate = require('./autoTextNodeTemplate')\r\nvar labelGroupNodeTemplate = require('./labelGroupNodeTemplate')\r\n// var cbianNodeTemplate = require('./cbianNodeTemplate')\r\nvar picNodeTemplate = require('./picNodeTemplate')\r\nvar picGroupNodeTemplate = require('./picGroupNodeTemplate')\r\nvar yunGroupNodeTemplate = require('./yunGroupNodeTemplate')\r\nvar yunpanGroupNodeTemplate = require('./yunpanGroupNodeTemplate')\r\nvar shapeNodeTemplate = require('./shapeNodeTemplate')\r\nvar shapeTextNodeTemplate = require('./shapeTextNodeTemplate')\r\n\r\nmodule.exports =  function(nodeType, options){\r\n    var temp = `${nodeType}NodeTemplate`\r\n    console.log(\"factory:\",temp)\r\n    var nodeTemplateClass = eval(temp)\r\n    return new nodeTemplateClass(options)\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/nodeTemplate/factory.js","\n\tvar localization = {\n\t\t\"trtd\":{\n\t\t\t// \"en\":\"Spherical Revolving World\",\n\t\t\t\"en\":\"Turn Round TD\",\n\t\t\t\"chn\":\"圆转天地\"\n\t\t},\n\t\t\"save\":{\n\t\t\t\"en\":\"Save\",\n\t\t\t\"chn\":\"保存\"\n\t\t},\n\t\t\"preview\":{\n\t\t\t\"en\":\"Preview\",\n\t\t\t\"chn\":\"预览\"\n\t\t},\n\t\t\"logout\":{\n\t\t\t\"en\":\"Log out\",\n\t\t\t\"chn\":\"退出\"\n\t\t},\n\t\t\"menu\":{\n\t\t\t\"en\":\"Menu\",\n\t\t\t\"chn\":\"菜单\"\n\t\t},\n\t\t\"usual\":{\n\t\t\t\"en\":\"Common\",\n\t\t\t\"chn\":\"常用\"\n\t\t},\n\t\t\"thinking\":{\n\t\t\t\"en\":\"Train of Thought\",\n\t\t\t\"chn\":\"思路\"\n\t\t},\n\t\t\"appearance\":{\n\t\t\t\"en\":\"Appearance\",\n\t\t\t\"chn\":\"外观\"\n\t\t},\n\t\t\"view\":{\n\t\t\t\"en\":\"View\",\n\t\t\t\"chn\":\"视图\"\n\t\t},\n\t\t\"insertll\":{\n\t\t\t\"en\":\"Insert the Lower Leve\",\n\t\t\t\"chn\":\"插入下级\"\n\t\t},\n\t\t\"insertsl\":{\n\t\t\t\"en\":\"Insert Sibling Level\",\n\t\t\t\"chn\":\"插入同级\"\n\t\t},\n\t\t\"undo\":{\n\t\t\t\"en\":\"Undo\",\n\t\t\t\"chn\":\"撤销\"\n\t\t},\n\t\t\"redo\":{\n\t\t\t\"en\":\"Redo\",\n\t\t\t\"chn\":\"重做\"\n\t\t},\n\t\t\"cte\":{\n\t\t\t\"en\":\"Click to edit\",\n\t\t\t\"chn\":\"单击编辑\"\n\t\t},\n\t\t\"dce\":{\n\t\t\t\"en\":\"Double Click to Edit\",\n\t\t\t\"chn\":\"双击编辑内容\"\n\t\t},\n\t\t\"centertheme\":{\n\t\t\t\"en\":\"Central Theme\",\n\t\t\t\"chn\":\"中心主题\"\n\t\t},\n\t\t\"edit\":{\n\t\t\t\"en\":\"Edit\",\n\t\t\t\"chn\":\"编辑\"\n\t\t},\n\t\t\"remove\":{\n\t\t\t\"en\":\"Delete\",\n\t\t\t\"chn\":\"删除\"\n\t\t},\n\t\t\"radius\":{\n\t\t\t\"en\":\"Size\",\n\t\t\t\"chn\":\"大小\"\n\t\t},\n\t\t\"shape\":{\n\t\t\t\"en\":\"Shape\",\n\t\t\t\"chn\":\"形状\"\n\t\t},\n\t\t\"borderwidth\":{\n\t\t\t\"en\":\"Border Width\",\n\t\t\t\"chn\":\"边框宽度\"\n\t\t},\n\t\t\"noborder\":{\n\t\t\t\"en\":\"No Border\",\n\t\t\t\"chn\":\"无边框\"\n\t\t},\n\t\t\"borderstyle\":{\n\t\t\t\"en\":\"Border Style\",\n\t\t\t\"chn\":\"边框样式\"\n\t\t},\n\t\t\"fillcolor\":{\n\t\t\t\"en\":\"Fill Color\",\n\t\t\t\"chn\":\"填充色\"\n\t\t},\n\t\t\"bordercolor\":{\n\t\t\t\"en\":\"Border Color\",\n\t\t\t\"chn\":\"边框颜色\"\n\t\t},\n\t\t\"image\":{\n\t\t\t\"en\":\"Pictures\",\n\t\t\t\"chn\":\"图片\"\n\t\t},\n\t\t\"insert\":{\n\t\t\t\"en\":\"Insert\",\n\t\t\t\"chn\":\"插入\"\n\t\t},\n\t\t\"delete\":{\n\t\t\t\"en\":\"Remove\",\n\t\t\t\"chn\":\"移除\"\n\t\t},\n\t\t\"remark\":{\n\t\t\t\"en\":\"Comment\",\n\t\t\t\"chn\":\"备注\"\n\t\t},\n\t\t\"removeallnode\":{\n\t\t\t\"en\":\"Empty Nodes\",\n\t\t\t\"chn\":\"清空节点\"\n\t\t},\n\t\t\"removeallline\":{\n\t\t\t\"en\":\"Delete Lines\",\n\t\t\t\"chn\":\"清空连线\"\n\t\t},\n\t\t\"arrangelayout\":{\n\t\t\t\"en\":\"Arrange layout\",\n\t\t\t\"chn\":\"整理布局\"\n\t\t},\n\t\t\"previewSubPan\":{\n\t\t\t\"en\":\"Preview SubPan\",\n\t\t\t\"chn\":\"预览子盘\"\n\t\t},\n        \"arrowstyle\":{\n            \"en\":\"Arrow Style\",\n            \"chn\":\"箭头样式\"\n        },\n        \"linkstyle\":{\n            \"en\":\"Link Style\",\n            \"chn\":\"弧样式\"\n        },\n\t\t\"clearText\":{\n\t\t\t\"en\":\"Clear Text\",\n\t\t\t\"chn\":\"清空文本\"\n\t\t},\n\t\t\"tdautolayout\":{\n\t\t\t// \"en\":\"Auto-placement of the TianPan\",\n\t\t\t\"en\":\"Auto layout\",\n\t\t\t\"chn\":\"天盘自动布局\"\n\t\t},\n\t\t\"jumptonewnode\":{\n\t\t\t// \"en\":\"Automatically Redirect to the New Nodes\",\n\t\t\t\"en\":\"Auto locate\",\n\t\t\t\"chn\":\"自动跳转到新的节点\"\n\t\t},\n\t\t\"theme\":{\n\t\t\t\"en\":\"Subject\",\n\t\t\t\"chn\":\"主题\"\n\t\t},\n\t\t\"backcolor\":{\n\t\t\t\"en\":\"Background Color\",\n\t\t\t\"chn\":\"背景颜色\"\n\t\t},\n\t\t\"objofaction\":{\n\t\t\t\"en\":\"Object\",\n\t\t\t\"chn\":\"作用对象\"\n\t\t},\n\t\t\"oneobj\":{\n\t\t\t\"en\":\"Single Node\",\n\t\t\t\"chn\":\"单个节点\"\n\t\t},\n\t\t\"sibobj\":{\n\t\t\t\"en\":\"Sibling Nodes\",\n\t\t\t\"chn\":\"同级节点\"\n\t\t},\n\t\t\"allsibobj\":{\n\t\t\t\"en\":\"All Sibling Nodes\",\n\t\t\t\"chn\":\"所有同级节点\"\n\t\t},\n\t\t\"allnodes\":{\n\t\t\t\"en\":\"All Nodes\",\n\t\t\t\"chn\":\"所有节点\"\n\t\t},\n\t\t\"shade\":{\n\t\t\t\"en\":\"Shade\",\n\t\t\t\"chn\":\"阴影\"\n\t\t},\n\t\t\"font\":{\n\t\t\t\"en\":\"Font\",\n\t\t\t\"chn\":\"字体\"\n\t\t},\n\t\t\"fontsize\":{\n\t\t\t\"en\":\"Font Size\",\n\t\t\t\"chn\":\"字号\"\n\t\t},\n\t\t\"compactdegree\":{\n\t\t\t\"en\":\"Compact Level\",\n\t\t\t\"chn\":\"紧凑程度\"\n\t\t},\n\t\t\"compact\":{\n\t\t\t\"en\":\"Compact\",\n\t\t\t\"chn\":\"紧凑\"\n\t\t},\n\t\t\"sparse\":{\n\t\t\t\"en\":\"Sparse\",\n\t\t\t\"chn\":\"稀疏\"\n\t\t},\n\t\t\"eq\":{\n\t\t\t\"en\":\"Equal Interval\",\n\t\t\t\"chn\":\"等间距\"\n\t\t},\n\t\t\"spread\":{\n\t\t\t\"en\":\"Spread\",\n\t\t\t\"chn\":\"展开\"\n\t\t},\n\t\t\"firstl\":{\n\t\t\t\"en\":\"First Layer\",\n\t\t\t\"chn\":\"第一层\"\n\t\t},\n\t\t\"secondl\":{\n\t\t\t\"en\":\"Second Layer\",\n\t\t\t\"chn\":\"第二层\"\n\t\t},\n\t\t\"threel\":{\n\t\t\t\"en\":\"Third Layer\",\n\t\t\t\"chn\":\"第三层\"\n\t\t},\n\t\t\"fourl\":{\n\t\t\t\"en\":\"Fourth Layer\",\n\t\t\t\"chn\":\"第四层\"\n\t\t},\n\t\t\"fifthl\":{\n\t\t\t\"en\":\"Fifth Layer\",\n\t\t\t\"chn\":\"第五层\"\n\t\t},\n\t\t\"localnodes\":{\n\t\t\t\"en\":\"Location Nodes\",\n\t\t\t\"chn\":\"定位节点\"\n\t\t},\n\t\t\"rootnode\":{\n\t\t\t\"en\":\"Root Node\",\n\t\t\t\"chn\":\"根节点\"\n\t\t},\n\t\t\"currentnode\":{\n\t\t\t\"en\":\"Current Nodes\",\n\t\t\t\"chn\":\"当前节点\"\n\t\t},\n\t\t\"displayallnodes\":{\n\t\t\t\"en\":\"Display All Nodes\",\n\t\t\t\"chn\":\"显示所有节点\"\n\t\t},\n\t\t\"return\":{\n\t\t\t\"en\":\"Back\",\n\t\t\t\"chn\":\"返回\"\n\t\t},\n\t\t\"tianpan\":{\n\t\t\t\"en\":\"TianPan\",\n\t\t\t\"chn\":\"天盘\"\n\t\t},\n\t\t\"dipan\":{\n\t\t\t\"en\":\"DiPan\",\n\t\t\t\"chn\":\"地盘\"\n\t\t},\n\t\t\"open\":{\n\t\t\t\"en\":\"Open\",\n\t\t\t\"chn\":\"打开\"\n\t\t},\n\t\t\"saveas\":{\n\t\t\t\"en\":\"Save As\",\n\t\t\t\"chn\":\"另存为\"\n\t\t},\n\t\t\"help\":{\n\t\t\t\"en\":\"Help\",\n\t\t\t\"chn\":\"帮助\"\n\t\t},\n\t\t\"new\":{\n\t\t\t\"en\":\"New\",\n\t\t\t\"chn\":\"新建\"\n\t\t},\n\t\t\"commontemplate\":{\n\t\t\t\"en\":\"Common template\",\n\t\t\t\"chn\":\"常用模板\"\n\t\t},\n\t\t\"openlocalfile\":{\n\t\t\t\"en\":\"Open local file\",\n\t\t\t\"chn\":\"打开本地文件\"\n\t\t},\n\t\t\"importtext\":{\n\t\t\t\"en\":\"Import outline text\",\n\t\t\t\"chn\":\"导入大纲文本\"\n\t\t},\n\t\t\"recentlyfile\":{\n\t\t\t\"en\":\"Recently used files\",\n\t\t\t\"chn\":\"最近使用的文件\"\n\t\t},\n\t\t\"exportdata\":{\n\t\t\t\"en\":\"Export Data\",\n\t\t\t\"chn\":\"另存为txt数据\"\n\t\t},\n\t\t\"exporttext\":{\n\t\t\t\"en\":\"Export Outline Text\",\n\t\t\t\"chn\":\"导出大纲文本\"\n\t\t},\n\t\t\"exportimg\":{\n\t\t\t\"en\":\"Export Pictures\",\n\t\t\t\"chn\":\"导出图片\"\n\t\t},\n\t\t\"websupport\":{\n\t\t\t\"en\":\"Website Support\",\n\t\t\t\"chn\":\"网站支持\"\n\t\t},\n\t\t\"techsupport\":{\n\t\t\t\"en\":\"Technical Support\",\n\t\t\t\"chn\":\"技术支持\"\n\t\t},\n\t\t\"techsupportqq\":{\n\t\t\t\"en\":\"Technical Support to QQ Groups\",\n\t\t\t\"chn\":\"技术支持QQ群\"\n\t\t},\n\t\t\"shortcutkey\":{\n\t\t\t\"en\":\"Shortcut Key\",\n\t\t\t\"chn\":\"快捷键\"\n\t\t},\n\t\t\"addchildnode\":{\n\t\t\t\"en\":\"Add Child\",\n\t\t\t\"chn\":\"增加子节点\"\n\t\t},\n\t\t\"addsibnode\":{\n\t\t\t\"en\":\"Add Sibling\",\n\t\t\t\"chn\":\"增加同级节点\"\n\t\t},\n\t\t\"key\":{\n\t\t\t\"en\":\"Key\",\n\t\t\t\"chn\":\"键\"\n\t\t},\n\t\t\"or\":{\n\t\t\t\"en\":\"Or\",\n\t\t\t\"chn\":\"或\"\n\t\t},\n\t\t\"confirmedittext\":{\n\t\t\t\"en\":\"Confirm the completion of editing text\",\n\t\t\t\"chn\":\"编辑完文字确认\"\n\t\t},\n\t\t\"editnewline\":{\n\t\t\t\"en\":\"Edit text newline\",\n\t\t\t\"chn\":\"编辑文字换行\"\n\t\t},\n\t\t\"canceltextedit\":{\n\t\t\t\"en\":\"Cancel Text Editing\",\n\t\t\t\"chn\":\"取消编辑文字\"\n\t\t},\n\t\t\"activetextedit\":{\n\t\t\t\"en\":\"Activate Text Editing\",\n\t\t\t\"chn\":\"激活编辑文字\"\n\t\t},\n\t\t\"sanpak\":{\n\t\t\t\"en\":\"Select a node and press any key\",\n\t\t\t\"chn\":\"选中节点后按任意字母键\"\n\t\t},\n\t\t\"auxview\":{\n\t\t\t\"en\":\"Auxiliary View\",\n\t\t\t\"chn\":\"辅助查看\"\n\t\t},\n\t\t\"focusselectnode\":{\n\t\t\t\"en\":\"Focus on selected nodes\",\n\t\t\t\"chn\":\"聚焦选中节点\"\n\t\t},\n\t\t\"locateselectednode\":{\n\t\t\t\"en\":\"Locate selected nodes\",\n\t\t\t\"chn\":\"定位选中节点\"\n\t\t},\n\t\t\"locaterootnode\":{\n\t\t\t\"en\":\"Locate Root Nodes\",\n\t\t\t\"chn\":\"定位根节点\"\n\t\t},\n\t\t\"bigcanvas\":{\n\t\t\t\"en\":\"Enlarge Canvas\",\n\t\t\t\"chn\":\"放大画布\"\n\t\t},\n\t\t\"smallcanvas\":{\n\t\t\t\"en\":\"Narrow Canvas\",\n\t\t\t\"chn\":\"缩小画布\"\n\t\t},\n\t\t\"switchnode\":{\n\t\t\t\"en\":\"Switch selected nodes\",\n\t\t\t\"chn\":\"切换选择的节点\"\n\t\t},\n\t\t\"mttnsn\":{\n\t\t\t\"en\":\"Move to the next sibling node\",\n\t\t\t\"chn\":\"移动到下一个同级节点\"\n\t\t},\n\t\t\"mttlsn\":{\n\t\t\t\"en\":\"Move to the last sibling node\",\n\t\t\t\"chn\":\"移动到上一个节点\"\n\t\t},\n\t\t\"mttfsn\":{\n\t\t\t\"en\":\"Move to the first child node\",\n\t\t\t\"chn\":\"移动到第一个节点\"\n\t\t},\n\t\t\"mtfn\":{\n\t\t\t\"en\":\"Move to Father Node\",\n\t\t\t\"chn\":\"移动到父节点\"\n\t\t},\n\t\t\"direckey\":{\n\t\t\t\"en\":\"Direction Key\",\n\t\t\t\"chn\":\"方向键\"\n\t\t},\n\t\t\"servicetd\":{\n\t\t\t\"en\":\"Send Feedback\",\n\t\t\t\"chn\":\"我要给圆转天地提意见\"\n\t\t},\n\t\t\"cbottc\":{\n\t\t\t\"en\":\"Change background of the DiPan\",\n\t\t\t\"chn\":\"更换地盘背景\"\n\t\t},\n\t\t\"rbottc\":{\n\t\t\t\"en\":\"Remove background of the DiPan\",\n\t\t\t\"chn\":\"移除地盘背景\"\n\t\t},\n\t\t\"icn\":{\n\t\t\t\"en\":\"Insert child nodes\",\n\t\t\t\"chn\":\"插入子节点\"\n\t\t},\n\t\t\"addnodepic\":{\n\t\t\t\"en\":\"Add Node Pictures\",\n\t\t\t\"chn\":\"添加节点图片\"\n\t\t},\n\t\t\"removepicture\":{\n\t\t\t\"en\":\"Remove Pictures\",\n\t\t\t\"chn\":\"移除图片\"\n\t\t},\n\t\t\"emptynodetext\":{\n\t\t\t\"en\":\"Empty Node Text\",\n\t\t\t\"chn\":\"清空节点文本\"\n\t\t},\n\t\t\"insertnodetianpan\":{\n\t\t\t\"en\":\"Insert Nodes of TianPan\",\n\t\t\t\"chn\":\"插入天盘节点\"\n\t\t},\n\t\t\"inserttext\":{\n\t\t\t\"en\":\"Insert Text\",\n\t\t\t\"chn\":\"插入文本\"\n\t\t},\n\t\t\"centerpicture\":{\n\t\t\t\"en\":\"Center Pictures\",\n\t\t\t\"chn\":\"居中图片\"\n\t\t},\n\t\t\"ewah\":{\n\t\t\t\"en\":\"Equal Width and Hight\",\n\t\t\t\"chn\":\"等宽高\"\n\t\t},\n\t\t\"bringtofront\":{\n\t\t\t\"en\":\"Bring to Front\",\n\t\t\t\"chn\":\"置于顶层\"\n\t\t},\n\t\t\"bringtobottom\":{\n\t\t\t\"en\":'Bring to Bottom',\n\t\t\t\"chn\":\"置于底层\"\n\t\t},\n\t\t\"bringforward\":{\n\t\t\t\"en\":\"Bring Forward\",\n\t\t\t\"chn\":\"上移一层\"\n\t\t},\n\t\t\"fixnode\":{\n\t\t\t\"en\":\"Fixed Nodes\",\n\t\t\t\"chn\":\"固定节点\"\n\t\t},\n\t\t\"cancelfix\":{\n\t\t\t\"en\":\"Cancel Fixed\",\n\t\t\t\"chn\":\"取消固定\"\n\t\t},\n\t\t//strings:\"Theme Colors,Standard Colors,Web Colors,Theme Colors,Back to Palette,History,No history yet.\"\n\t\t\"themecolor\":{\n\t\t\t\"en\":\"Theme Colors\",\n\t\t\t\"chn\":\"主题颜色\"\n\t\t},\n\t\t\"standardcolor\":{\n\t\t\t\"en\":\"Standard Colors\",\n\t\t\t\"chn\":\"标准颜色\"\n\t\t},\n\t\t\"webcolor\":{\n\t\t\t\"en\":\"Web Colors\",\n\t\t\t\"chn\":\"更多颜色\"\n\t\t},\n\t\t\"backtop\":{\n\t\t\t\"en\":\"Back to Palette\",\n\t\t\t\"chn\":\"返回主题颜色\"\n\t\t},\n\t\t\"history\":{\n\t\t\t\"en\":\"History\",\n\t\t\t\"chn\":\"历史\"\n\t\t},\n\t\t\"nohistory\":{\n\t\t\t\"en\":\"No history yet\",\n\t\t\t\"chn\":\"暂无历史\"\n\t\t},\n\t\t\"week\":{\n\t\t\t\"en\":\"Week\",\n\t\t\t\"chn\":\"最近一周\"\n\t\t},\n\t\t\"Jan\":{\n\t\t\t\"en\":\"January\",\n\t\t\t\"chn\":\"一月\"\n\t\t},\n\t\t\"Feb\":{\n\t\t\t\"en\":\"February\",\n\t\t\t\"chn\":\"二月\"\n\t\t},\n\t\t\"Mar\":{\n\t\t\t\"en\":\"March\",\n\t\t\t\"chn\":\"三月\"\n\t\t},\n\t\t\"Apr\":{\n\t\t\t\"en\":\"April\",\n\t\t\t\"chn\":\"四月\"\n\t\t},\n\t\t\"May\":{\n\t\t\t\"en\":\"May\",\n\t\t\t\"chn\":\"五月\"\n\t\t},\n\t\t\"Jun\":{\n\t\t\t\"en\":\"June\",\n\t\t\t\"chn\":\"六月\"\n\t\t},\n\t\t\"Jul\":{\n\t\t\t\"en\":\"July\",\n\t\t\t\"chn\":\"七月\"\n\t\t},\n\t\t\"Aug\":{\n\t\t\t\"en\":\"August\",\n\t\t\t\"chn\":\"八月\"\n\t\t},\n\t\t\"Sep\":{\n\t\t\t\"en\":\"September\",\n\t\t\t\"chn\":\"九月\"\n\t\t},\n\t\t\"Oct\":{\n\t\t\t\"en\":\"October\",\n\t\t\t\"chn\":\"十月\"\n\t\t},\n\t\t\"Nov\":{\n\t\t\t\"en\":\"November\",\n\t\t\t\"chn\":\"十一月\"\n\t\t},\n\t\t\"Dec\":{\n\t\t\t\"en\":\"December\",\n\t\t\t\"chn\":\"十二月\"\n\t\t},\n\t\t\"insertimg\":{\n\t\t\t\"en\":\"Insert Pictures\",\n\t\t\t\"chn\":\"插入图片\"\n\t\t},\n\t\t\"imglist\":{\n\t\t\t\"en\":\"Pictures list\",\n\t\t\t\"chn\":\"图片列表\"\n\t\t},\n\t\t\"uploadimg\":{\n\t\t\t\"en\":\"Upload Picture\",\n\t\t\t\"chn\":\"上传图片\"\n\t\t},\n\t\t\"katong\":{\n\t\t\t\"en\":\"Cartoon Picture\",\n\t\t\t\"chn\":\"卡通图片\"\n\t\t},\n\t\t\"numbericon\":{\n\t\t\t\"en\":\"Number Icons\",\n\t\t\t\"chn\":\"数字图片\"\n\t\t},\n\t\t\"qipao\":{\n\t\t\t\"en\":\"Bubble\",\n\t\t\t\"chn\":\"气泡\"\n\t\t},\n\t\t\"custompic\":{\n\t\t\t\"en\":\"Custom Picture\",\n\t\t\t\"chn\":\"自定义图片\"\n\t\t},\n\t\t\"picture\":{\n\t\t\t\"en\":\"Picture\",\n\t\t\t\"chn\":\"图片\"\n\t\t},\n\t\t\"cancel\":{\n\t\t\t\"en\":\"Cancel\",\n\t\t\t\"chn\":\"取消\"\n\t\t},\n\t\t\"ok\":{\n\t\t\t\"en\":\"Ok\",\n\t\t\t\"chn\":\"确定\"\n\t\t},\n\t\t\"previewimg\":{\n\t\t\t\"en\":\"Preview Pictures\",\n\t\t\t\"chn\":\"预览图片\"\n\t\t},\n\t\t\"copyimg\":{\n\t\t\t\"en\":\"Copy Picture\",\n\t\t\t\"chn\":\"复制图片\"\n\t\t},\n\t\t\"copyimgsucces\":{\n\t\t\t\"en\":\"Already Copy Picture Into Clipboard\",\n\t\t\t\"chn\":\"成功复制图片到粘贴板\"\n\t\t},\n\t\t\"dragtoupload\":{\n\t\t\t\"en\":\"Drag to Upload Picture\",\n\t\t\t\"chn\":\"拖拽到此处上传\"\n\t\t},\n\t\t\"linkaddress\":{\n\t\t\t\"en\":\"Link Address\",\n\t\t\t\"chn\":\"链接地址\"\n\t\t},\n\t\t\"insertremark\":{\n\t\t\t\"en\":\"Insert Comment\",\n\t\t\t\"chn\":\"插入备注\"\n\t\t},\n\t\t\"insertlink\":{\n\t\t\t'en':\"Insert Link\",\n\t\t\t\"chn\":\"插入链接\"\n\t\t},\n\t\t\"copy\":{\n\t\t\t\"en\":\"copy\",\n\t\t\t\"chn\":\"复制\"\n\t\t},\n\t\t\"picdin\":{\n\t\t\t\"en\":\"Picture definition\",\n\t\t\t\"chn\":\"图片清晰度\"\n\t\t},\n\t\t\"hsacc\":{\n\t\t\t\"en\":\"Hierarchical Subject\",\n\t\t\t\"chn\":\"天盘层级主题\"\n\t\t},\n\t\t\"mtwtb\":{\n\t\t\t\"en\":\"Bold Border Subject\",\n\t\t\t\"chn\":\"天盘白字粗变主题\"\n\t\t},\n\t\t\"officetheme\":{\n\t\t\t\"en\":\"Office Subject\",\n\t\t\t\"chn\":\"Office主题\"\n\t\t},\n\t\t\"lctheme\":{\n\t\t\t\"en\":\"Light-coloured Subject\",\n\t\t\t\"chn\":\"浅色主题\"\n\t\t},\n\t\t\"web2theme\":{\n\t\t\t\"en\":\"web2.0 Subject\",\n\t\t\t\"chn\":\"Web2.0主题\"\n\t\t},\n\t\t\"metrotheme\":{\n\t\t\t\"en\":\"Metro Subject\",\n\t\t\t\"chn\":\"Metro主题\"\n\t\t},\n\t\t\"retrotheme\":{\n\t\t\t\"en\":\"Retro Subject\",\n\t\t\t\"chn\":\"复古主题\"\n\t\t},\n\t\t\"bustheme\":{\n\t\t\t\"en\":\"Business Subject\",\n\t\t\t\"chn\":\"商业主题\"\n\t\t},\n\t\t\"hiet1\":{\n\t\t\t\"en\":\"Hierachy Subject 1\",\n\t\t\t\"chn\":\"层次主题1\"\n\t\t},\n\t\t\"hiet2\":{\n\t\t\t\"en\":\"Hierachy Subject 2\",\n\t\t\t\"chn\":\"层次主题2\"\n\t\t},\n\t\t\"eayth\":{\n\t\t\t\"en\":\"Earlier Version Subject\",\n\t\t\t\"chn\":\"旧版主题\"\n\t\t},\n\t\t\"blankth\":{\n\t\t\t\"en\":\"Pure-black Subject\",\n\t\t\t\"chn\":\"纯黑色主题\"\n\t\t},\n\t\t\"transthe\":{\n\t\t\t\"en\":\"Transparent Subject\",\n\t\t\t\"chn\":\"透明主题\"\n\t\t},\n\t\t\"randomdipan\":{\n\t\t\t\"en\":\"Random Subject of the DiPan\",\n\t\t\t\"chn\":\"随机地盘主题\"\n\t\t},\n\t\t\"radomcolor1\":{\n\t\t\t\"en\":\"Random Colour 1\",\n\t\t\t\"chn\":\"随机色彩1\"\n\t\t},\n\t\t\"radomcolor2\":{\n\t\t\t\"en\":\"Random Colour 1\",\n\t\t\t\"chn\":\"随机色彩2\"\n\t\t},\n\t\t\"mylocalfile\":{\n\t\t\t\"en\":\"My local file\",\n\t\t\t\"chn\":\"我的本地文件\"\n\t\t},\n\t\t\"ut2c\":{\n\t\t\t\"en\":\"Up to 20 characters\",\n\t\t\t\"chn\":\"最多20个字符\"\n\t\t},\n\t\t\"success\":{\n\t\t\t\"en\":\"Success\",\n\t\t\t\"chn\":\"成功\"\n\t\t},\n\t\t\"danger\":{\n\t\t\t\"en\":\"Fail\",\n\t\t\t\"chn\":\"失败\"\n\t\t},\n\t\t\"info\":{\n\t\t\t\"en\":\"Info\",\n\t\t\t\"chn\":\"提示\"\n\t\t},\n\t\t\"strf\":{\n\t\t\t\"en\":\"Save the file in:Menu->Open->Recently used file\",\n\t\t\t\"chn\":\"文件保存在:菜单->打开->最近使用文件中\"\n\t\t},\n\t\t\"netonffline\":{\n\t\t\t\"en\":\"Network is not connected, commonly used template download failed\",\n\t\t\t\"chn\":\"网络未连接，常用模板下载失败\"\n\t\t},\n\t\t\"cantcheckver\":{\n\t\t\t\"en\":\"The network is not connected, the version of the test failed\",\n\t\t\t\"chn\":\"网络未连接，版本检测失败\"\n\t\t},\n\t\t\"spacebar\":{\n\t\t\t\"en\":\"Space bar\",\n\t\t\t\"chn\":\"空格键\"\n\t\t},\n\t\t\"supportmail\":{\n\t\t\t\"en\":\"Support Mail\",\n\t\t\t\"chn\":\"技术支持邮箱\"\n\t\t},\n\t\t\"updatesuccess\":{\n\t\t\t\"en\":\"Update sucess\",\n\t\t\t\"chn\":\"更新成功\"\n\t\t},\n\t\t\"blankText\":{\n\t\t\t\"en\":\"Blank text\",\n\t\t\t\"chn\":\"空白文本\"\n\t\t},\n\n\t  /**simditor\n\t  \t*\n\t  \t**/\n\t  \t'blockquote': {\n\t  \t\t'en':'Block Quote',\n\t  \t\t'chn':'引用'\n\t  \t},\n\t    'bold': {\n\t    \t'en':'Bold',\n\t    \t'chn':'加粗文字'\n\t    },\n\t    'code': {\n\t    \t'en':'Code',\n\t    \t'chn':'插入代码'\n\t    },\n\t    'color': {\n\t    \t'en':'Text Color',\n\t    \t'chn':'文字颜色'\n\t    },\n\t    'coloredText': {\n\t    \t'en':'Colored Text',\n\t    \t'chn':'彩色文字'\n\t    },\n\t    'hr': {\n\t    \t'en':'Horizontal Line',\n\t    \t'chn':'分隔线'\n\t    },\n\t    'image': {\n\t    \t'en':'Insert Image',\n\t    \t'chn':'插入图片'\n\t    },\n\t    'externalImage': {\n\t    \t'en':'External Image',\n\t    \t'chn':'外链图片'\n\t    },\n\t    'uploadImage': {\n\t    \t'en':'Upload Image',\n\t    \t'chn':'上传图片'\n\t    },\n\t    'uploadFailed': {\n\t    \t'en':'Upload failed',\n\t    \t'chn':'上传失败了'\n\t    },\n\t    'uploadError': {\n\t    \t'en':'Error occurs during upload',\n\t    \t'chn':'上传出错了'\n\t    },\n\t    'imageUrl': {\n\t    \t'en':'Url',\n\t    \t'chn':'图片地址'\n\t    },\n\t    'imageSize': {\n\t    \t'en':'Size',\n\t    \t'chn':'图片尺寸'\n\t    },\n\t    'imageAlt': {\n\t    \t'en':'Alt',\n\t    \t'chn':'图片描述'\n\t    },\n\t    'restoreImageSize': {\n\t    \t'en':'Restore Origin Size',\n\t    \t'chn':'还原图片尺寸'\n\t    },\n\t    'uploading': {\n\t    \t'en':'Uploading',\n\t    \t'chn':'正在上传'\n\t    },\n\t    'indent': {\n\t    \t'en':'Indent',\n\t    \t'chn':'向右缩进'\n\t    },\n\t    'outdent': {\n\t    \t'en':'Outdent',\n\t    \t'chn':'向左缩进'\n\t    },\n\t    'italic': {\n\t    \t'en':'Italic',\n\t    \t'chn':'斜体文字'\n\t    },\n\t    'link': {\n\t    \t'en':'Insert Link',\n\t    \t'chn':'插入链接'\n\t    },\n\t    'linkText': {\n\t    \t'en':'Text',\n\t    \t'chn':'链接文字'\n\t    },\n\t    'linkUrl': {\n\t    \t'en':'Url',\n\t    \t'chn':'链接地址'\n\t    },\n\t    'linkTarget': {\n\t    \t'en':'Target',\n\t    \t'chn':'打开方式'\n\t    },\n\t    'openLinkInCurrentWindow': {\n\t    \t'en':'Open link in current window',\n\t    \t'chn':'在新窗口中打开'\n\t    },\n\t    'openLinkInNewWindow': {\n\t    \t'en':'Open link in new window',\n\t    \t'chn':'在当前窗口中打开'\n\t    },\n\t    'removeLink': {\n\t    \t'en':'Remove Link',\n\t    \t'chn':'移除链接'\n\t    },\n\t    'ol': {\n\t    \t'en':'Ordered List',\n\t    \t'chn':'有序列表'\n\t    },\n\t    'ul': {\n\t    \t'en':'Unordered List',\n\t    \t'chn':'无序列表'\n\t    },\n\t    'strikethrough': {\n\t    \t'en':'Strikethrough',\n\t    \t'chn':'删除线文字'\n\t    },\n\t    'table': {\n\t    \t'en':'Table',\n\t    \t'chn':'表格'\n\t    },\n\t    'deleteRow': {\n\t    \t'en':'Delete Row',\n\t    \t'chn':'删除行'\n\t    },\n\t    'insertRowAbove': {\n\t    \t'en':'Insert Row Above',\n\t    \t'chn':'在上面插入行'\n\t    },\n\t    'insertRowBelow': {\n\t    \t'en':'Insert Row Below',\n\t    \t'chn':'在下面插入行'\n\t    },\n\t    'deleteColumn': {\n\t    \t'en':'Delete Column',\n\t    \t'chn':'删除列'\n\t    },\n\t    'insertColumnLeft': {\n\t    \t'en':'Insert Column Left',\n\t    \t'chn':'在左边插入列'\n\t    },\n\t    'insertColumnRight': {\n\t    \t'en':'Insert Column Right',\n\t    \t'chn':'在右边插入列'\n\t    },\n\t    'deleteTable': {\n\t    \t'en':'Delete Table',\n\t    \t'chn':'删除表格'\n\t    },\n\t    'title': {\n\t    \t'en':'Title',\n\t    \t'chn':'标题'\n\t    },\n\t    'normalText': {\n\t    \t'en':'Text',\n\t    \t'chn':'普通文本'\n\t    },\n\t    'underline': {\n\t    \t'en':'Underline',\n\t    \t'chn':'下划线文字'\n\t    },\n\t    'alignment': {\n\t    \t'en':'Alignment',\n\t    \t'chn':'水平对齐'\n\t    },\n\t    'alignCenter': {\n\t    \t'en':'Align Center',\n\t    \t'chn':'居中'\n\t    },\n\t    'alignLeft': {\n\t    \t'en':'Align Left',\n\t    \t'chn':'居左'\n\t    },\n\t    'alignRight': {\n\t    \t'en':'Align Right',\n\t    \t'chn':'居右'\n\t    },\n\t    'selectLanguage': {\n\t    \t'en':'Select Language',\n\t    \t'chn':'选择程序语言'\n\t    },\n\t    'fontScale': {\n\t    \t'en':'Font Size',\n\t    \t'chn':'字体大小'\n\t    },\n\t    'fontScaleXLarge': {\n\t    \t'en':'X Large Size',\n\t    \t'chn':'超大字体'\n\t    },\n\t    'fontScaleLarge': {\n\t    \t'en':'Large Size',\n\t    \t'chn':'大号字体'\n\t    },\n\t    'fontScaleNormal': {\n\t    \t'en':'Normal Size',\n\t    \t'chn':'正常大小'\n\t    },\n\t    'fontScaleSmall': {\n\t    \t'en':'Small Size',\n\t    \t'chn':'小号字体'\n\t    },\n\t    'fontScaleXSmall': {\n\t    \t'en':'X Small Size',\n\t    \t'chn':'超小字体'\n\t    },\n\t    'savesuccess':{\n\t    \t'en':'Save successful',\n\t    \t'chn':'保存成功'\n\t    },\n\t    'failsuccess':{\n\t    \t'en':'Save failed',\n\t    \t'chn':'保存失败'\n\t    },\n\t\t'layoutmode':{\n\t    \t'en':'Layout Mode',\n\t    \t'chn':'布局方式'\n\t\t},\n\t\t'outequaldivid':{\n\t\t\t'en':'Divided by the last layer',\n\t\t\t'chn':'外圈均分'\n\t\t},\n\t\t'innerequaldivid':{\n\t\t\t'en':'Divided by the first layer',\n\t\t\t'chn':'内圈均分'\n\t\t},\n\t\t'givenlayer':{\n\t\t\t'en':'Designate',\n\t\t\t'chn':'指定层均分'\n\t\t},\n\t\t'textdirection':{\n\t\t\t'en':'Text Direction',\n\t\t\t'chn':'文字方向'\n\t\t},\n\t\t'textrotate':{\n\t\t\t'en':'Rotate',\n\t\t\t'chn':'旋转'\n\t\t},\n\t\t'textoutside':{\n\t\t\t'en':'Toward the outside',\n\t\t\t'chn':'放射'\n\t\t},\n\t\t'upwards':{\n\t\t\t'en':'Upwards',\n\t\t\t'chn':'正向'\n\t\t},\n\t\t'sectorthickness':{\n\t\t\t'en':'Sector thickness',\n\t\t\t'chn':'扇区宽度'\n\t\t},\n\t\t'thicknessrange':{\n\t\t\t'en':'Range 100~300',\n\t\t\t'chn':'范围 100~300'\n\t\t},\n\t\t'currentfile':{\n\t\t\t'en':\"Current File\",\n\t\t\t'chn':'编辑中'\n\t\t},\n\t\t'uploadsuccess':{\n\t\t\t'en':'Upload successful',\n\t\t\t'chn':'上传成功'\n\t\t},\n\t\t'deletenodeinfo':{\n\t\t\t'en':'Are you sure to delete the node and its child nodes?',\n\t\t\t'chn':'删除节点会删除它的所有子节点，确实要删除吗？'\n\t\t},\n\t\t'exporttdp':{\n\t\t\t'en':'Save as .tdp shared file',\n\t\t\t'chn':'另存为.tdp共享文件'\n\t\t},\n\t\t\"hypertype\":{\n\t\t\t\"en\":\"Type\",\n\t\t\t\"chn\":\"链接类型\"\n\t\t},\n\t\t\"url\":{\n\t\t\t\"en\":\"URL\",\n\t\t\t\"chn\":\"网址\"\n\t\t},\n\t\t\"localfile\":{\n\t\t\t\"en\":\"Local file\",\n\t\t\t\"chn\":\"本地文件\"\n\t\t},\n\t\t\"tiandipan\":{\n\t\t\t\"en\":\"Tianpan or Dipan\",\n\t\t\t\"chn\":\"天地盘\"\n\t\t},\n\t\t\"link\":{\n\t\t\t\"en\":\"Hyperlink\",\n\t\t\t\"chn\":\"链接\"\n\t\t},\n\t\toutlineeditor:{\n\t\t\ten: \"Outline Editor\",\n\t\t\tchn: \"大纲编辑\"\n\t\t},\n\t\tmodificationbuttons: {\n\t\t\ten: \"Modification Buttons\",\n\t\t\tchn: \"修改按钮\"\n\t\t},\n\t\tbrowsingbuttons: {\n\t\t\ten: \"Browsing Buttons\",\n\t\t\tchn: \"浏览按钮\"\n\t\t},\n\t\tshow: {\n\t\t\ten: \"Show\",\n\t\t\tchn: \"显示\"\n\t\t},\n\t\thide: {\n\t\t\ten: \"Hide\",\n\t\t\tchn:\"隐藏\"\n\t\t},\n\t\tnewnode: {\n\t\t\ten: \"New Node\",\n\t\t\tchn: \"新节点\"\n\t\t},\n\t\tmoveupnode: {\n\t\t\ten: \"Move up\",\n\t\t\tchn: \"上移节点\"\n\t\t},\n\t\tmovedownnode: {\n\t\t\ten: \"Move down\",\n\t\t\tchn: \"下移节点\"\n\t\t},\n\t\tremovenode: {\n\t\t\ten: \"Remove\",\n\t\t\tchn: \"删除节点\"\n\t\t},\n\t\teditnode: {\n\t\t\ten: \"Edit Node\",\n\t\t\tchn: \"编辑节点\"\n\t\t},\n\t\tprevnode: {\n\t\t\ten: \"Select Previous\",\n\t\t\tchn: \"上一个节点\"\n\t\t},\n\t\tnextnode: {\n\t\t\ten: \"Select Next\",\n\t\t\tchn: \"下一个节点\"\n\t\t},\n\t\texpandnode: {\n\t\t\ten: \"Expand\",\n\t\t\tchn: \"展开节点\"\n\t\t},\n\t\tcollapsenode: {\n\t\t\ten: \"Collapse\",\n\t\t\tchn: \"折叠节点\"\n\t\t},\n\t\texpandall: {\n\t\t\ten: \"Expand All\",\n\t\t\tchn: \"全部展开\"\n\t\t},\n\t\tcollapseall: {\n\t\t\ten: \"Collapse All\",\n\t\t\tchn: \"全部折叠\"\n\t\t},\n\t\tpreview: {\n\t\t\ten: \"Preview\",\n\t\t\tchn: \"预览\"\n\t\t},\n\t\tcancel: {\n\t\t\ten: \"Cancel\",\n\t\t\tchn: \"取消\"\n\t\t},\n\t\tapply: {\n\t\t\ten: \"Apply\",\n\t\t\tchn: \"应用\"\n\t\t},\n\t\t'openpreviewimg':{\n\t\t\t'en':'Preview image is loading',\n\t\t\t'chn':'正在打开预览图片'\n\t\t},\n\t\t'tempnodetips':{\n\t\t\t'en':'This is a temp node',\n\t\t\t'chn':'这是临时节点'\n\t\t},\n\t\tbuildtdp:{\n\t\t\ten:'Build .tdp shared file',\n\t\t\tchn:'生成.tdp文件下载'\n        },\n\t\t'deleteconfirm':{\n\t\t\ten:'Are you sure to clear all the nodes?',\n\t\t\tchn:'确定要清空节点？'\n\t\t},\n\t\t\"selecttargertnode\": {\n\t\t\ten: \"Select Target Node\",\n\t\t\tcn: \"请选择目标节点\"\n\t\t},\n\t\t\"link2web\": {\n\t\t\ten: \"Link to Webpage\",\n\t\t\tcn: \"链接网页\"\n\t\t},\n\t\t\"link2node\": {\n\t\t\ten: \"Link to Node\",\n\t\t\tcn: \"链接节点\"\n\t\t},\n\t\t\"removelink\": {\n\t\t\ten: \"Remove Link\",\n\t\t\tcn: \"移除节点\"\n\t\t},\n\t\t\"addtemp\": {\n\t\t\ten: \"Add Template\",\n\t\t\tcn: \"添加模板\"\n\t\t},\n\t\tbuildtdp:{\n\t\t\ten:'Build .tdp shared file',\n\t\t\tchn:'生成.tdp文件下载'\n        },\n\t\t'deleteconfirm':{\n\t\t\ten:'Are you sure to clear all the nodes?',\n\t\t\tchn:'确定要清空节点？'\n        },\n\t\tsuccess:{\n        \ten:'Success',\n        \tchn:\"成功\"\n        },\n\t\twarning:{\n        \ten:'Warning',\n        \tchn:'警告'\n        },\n\t\terror:{\n        \ten:'Failed',\n        \tchn:'失败'\n\t\t},\n\t\t\t\t\"unsupportfile\": {\n\t\t\ten: \"Unsupported File!\",\n\t\t\tcn: \"不支持该导入文件\"\n\t\t}\n\t}\n\tvar trans = function(key){\n\t\treturn localization[key] ? (localization[key][localStorage.getItem(\"language\")] ? localization[key][localStorage.getItem(\"language\")] :localization[key]['chn']) : key;\n\t};\n\nmodule.exports = {trans:trans};\n\n\n// WEBPACK FOOTER //\n// ./src/assets/localization.js","// 'use strict';\n\nlet typeModules = {};\nconsole.log(\"hardcorelog   aaaaaaaaaaaaaaa\")\ntypeModules['tianpan'] = require(`./diagram/tianpan`)\ntypeModules['dipan'] = require(`./diagram/dipan`)\ntypeModules['jin'] = require(`./diagram/jin`)\ntypeModules['huo'] = require(`./diagram/huo`)\ntypeModules['shui'] = require(`./diagram/shui`)\ntypeModules['yunpan'] = require(`./diagram/yunpan`)\ntypeModules['wheel'] = require(`./diagram/wheel`)\ntypeModules['dspiral'] = require(`./diagram/dspiral`)\n// typeModules['yunpanhome'] = require(`./diagram/yunpanhome`)\n\n\nif(IS_PROD){\n    console.log(\"生产环境屏蔽调试日志\")\n    // console.log   = function(){\n        \n    // }\n}\n// console.error   = function(...messages){\n//     logger.error(`${JSON.stringify(messages)}`)\n// }\n\nclass Trtd {\n\tconstructor(div, config){\n\n\t\ttry{\n            if(config.model){\n                var tmpModel = go.Model.fromJson(config.model);\n                if(tmpModel && tmpModel.modelData && tmpModel.modelData.type){\n                    config.type = tmpModel.modelData.type\n                }\n            }\n        }catch(e){\n            console.error(e)\n        }\n\t\tconsole.log(\"type:\",config.type)\n\t\tvar trtdClass = typeModules[config.type]\n\t\treturn new trtdClass(div, config);\n\t}\n}\n\nTrtd.go = go;\n/*eslint-disable no-undef */\nTrtd.version = TRTD_VERSION\n/*eslint-enable no-undef */\nconsole.info(`Trtd version:${Trtd.version}`)\nif (typeof window !== 'undefined') {\n\twindow.Trtd = Trtd;\n}\n\n// export default Trtd;\nmodule.exports = Trtd\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","//\n\nvar $ = go.GraphObject.make;\nvar Base = require(\"./base\");\nvar helpers = require(\"../helpers/helpers.gojs\");\n\n// this is a Part.dragComputation function for limiting where a Node may be dragged\nfunction stayInGroup(part, pt, gridpt) {\n  // don't constrain top-level nodes\n  var grp = part.containingGroup;\n  if (grp === null) return pt;\n  // try to stay within the background Shape of the Group\n  var back = grp.resizeObject;\n  if (back === null) return pt;\n  // allow dragging a Node out of a Group if the Shift key is down\n  if (part.diagram.lastInput.shift) return pt;\n  var p1 = back.getDocumentPoint(go.Spot.TopLeft);\n  var p2 = back.getDocumentPoint(go.Spot.BottomRight);\n  var b = part.actualBounds;\n  var loc = part.location;\n  // find the padding inside the group's placeholder that is around the member parts\n  // var m = grp.placeholder.padding;\n  // now limit the location appropriately\n  var x = Math.max(p1.x, Math.min(pt.x, p2.x - b.width - 1)) + (loc.x - b.x);\n  var y = Math.max(p1.y, Math.min(pt.y, p2.y - b.height - 1)) + (loc.y - b.y);\n  return new go.Point(x, y);\n}\n\nclass WaveNodeTemplate extends Base {\n  constructor(options) {\n    super(options);\n    // this.nodeProperties = {}\n  }\n\n  makeGeo(data, shape, options) {\n    // this is much more efficient than calling go.GraphObject.make:\n    var { radiusX = 150, radiusY = 100 } = data;\n    radiusX = shape.part.findObject(\"main\").width / 2;\n    radiusY = shape.part.findObject(\"main\").height / 2;\n    // console.log(\"makeGeo999999999999999999999999999\",radiusX,radiusY)\n    var geo = new go.Geometry().add(\n      new go.PathFigure(0, 0) // start point\n        .add(\n          new go.PathSegment(\n            go.PathSegment.SvgArc,\n            radiusX * 2,\n            0,\n            radiusX,\n            radiusY,\n            0,\n            1,\n            options.clockwiseFlag ? 1 : 0\n          )\n        )\n    );\n    geo.defaultStretch = go.GraphObject.Fill;\n    return geo;\n  }\n\n  makeGeoWave(data, shape, options) {\n    // this is much more efficient than calling go.GraphObject.make:\n    var { radiusX = 150, radiusY = 100 } = data;\n    radiusX = shape.part.findObject(\"main\").width / 2;\n    radiusY = shape.part.findObject(\"main\").height / 2;\n    // console.log(\"makeGeo999999999999999999999999999\",radiusX,radiusY)\n    var seg = new go.PathSegment(\n      go.PathSegment.QuadraticBezier,\n      radiusX * 2,\n      0, //describe the end point\n      radiusX,\n      radiusY * (options.clockwiseFlag ? -1 : 1) // describe the only control point\n      // radiusX*2,0,radiusX, radiusY,0,1,options.clockwiseFlag?1:0\n    );\n\n    if (data.role == \"waveTail\") {\n      seg = new go.PathSegment(\n        go.PathSegment.QuadraticBezier,\n        radiusX,\n        radiusY * (options.clockwiseFlag ? -1 : 1), //describe the end point\n        radiusX / 2,\n        radiusY * (options.clockwiseFlag ? -1 : 1) // describe the only control point\n        // radiusX*2,0,radiusX, radiusY,0,1,options.clockwiseFlag?1:0\n      );\n\n      // seg = new go.PathSegment(go.PathSegment.Bezier,\n      //   radiusX, radiusY*(options.clockwiseFlag?-1:1), //describe the end point\n      //   x1, y1 ,//describe the first control point\n      //   x2, y2, // describe the second control point\n      //   radiusX, radiusY*(options.clockwiseFlag?-1:1), // describe the only control point\n      // // radiusX*2,0,radiusX, radiusY,0,1,options.clockwiseFlag?1:0\n      //     )\n    }\n\n    // seg.endX = radiusX\n    // seg.endY = 0\n    var geo = new go.Geometry().add(\n      new go.PathFigure(0, 0) // start point\n        .add(seg)\n    );\n    geo.defaultStretch = go.GraphObject.None;\n    return geo;\n  }\n\n  getShiHalfEllipseShape() {\n    return $(\n      go.Shape,\n      {\n        name: \"XU\",\n        strokeWidth: 2,\n        stroke: \"#cb1c27\",\n        fill: \"rgba(0,66,0,0)\",\n        // background: \"yellow\",\n        stretch: go.GraphObject.Uniform,\n        alignment: go.Spot.Bottom,\n        alignmentFocus: go.Spot.Bottom\n        // row:1, column:0,margin:0\n      },\n      // new go.Binding(\"alignment\",\"\",function(data, shape){\n      //   if(data.flip){\n      //     return go.Spot.Top\n      //   }\n      //   return go.Spot.Bottom\n      // }),\n      // new go.Binding(\"alignmentFocus\",\"\",function(data, shape){\n      //   if(data.flip){\n      //     return go.Spot.Top\n      //   }\n      //   return go.Spot.Bottom\n      // }),\n      new go.Binding(\"geometry\", \"\", (data, shape) => {\n        var clockwiseFlag = 0;\n        if (data.order % 2 == 0) {\n          clockwiseFlag = 1;\n        }\n        if (data.flip) {\n          // clockwiseFlag = 1;\n        }\n        // console.log(`data.oliveType: ${data.oliveType}`)\n        if (data.oliveType == \"Ellipse\") {\n          // console.log(``)\n          return this.makeGeo(data, shape, { clockwiseFlag: clockwiseFlag });\n        }\n        return this.makeGeoWave(data, shape, { clockwiseFlag: clockwiseFlag });\n      }),\n      new go.Binding(\"stroke\", \"shiStroke\").makeTwoWay(),\n      new go.Binding(\"strokeWidth\", \"shiStrokeWidth\").makeTwoWay(),\n      // new go.Binding(\"strokeDashArray\", \"shiStrokeDashArray\").makeTwoWay(),\n      new go.Binding(\"strokeDashArray\", \"shiStrokeDashArray\", function(v) {\n        return JSON.parse(v);\n      }).makeTwoWay(function(v) {\n        return JSON.stringify(v);\n      }),\n      new go.Binding(\"desiredSize\", \"desiredSize\", function(v) {\n        var size = new go.Size(v.width, v.height / 2);\n        // console.log(\"v:\",v)\n        return size;\n      }).ofObject(\"main\")\n    );\n  }\n\n  getXuHalfEllipseShape() {\n    return $(\n      go.Shape,\n      {\n        name: \"SHI\",\n        strokeWidth: 2,\n        stroke: \"#0e399d\",\n        fill: \"rgba(0,66,0,0)\",\n        // background: \"gray\",\n        stretch: go.GraphObject.Uniform,\n        alignment: go.Spot.Bottom,\n        strokeDashArray: [10, 5],\n        alignmentFocus: go.Spot.Bottom\n        // row:1, column:0,margin:0\n      },\n      // new go.Binding(\"alignment\",\"\",function(data, shape){\n      //   if(data.flip){\n      //     return go.Spot.Top\n      //   }\n      //   return go.Spot.Bottom\n      // }),\n      // new go.Binding(\"alignmentFocus\",\"\",function(data, shape){\n      //   if(data.flip){\n      //     return go.Spot.Top\n      //   }\n      //   return go.Spot.Bottom\n      // }),\n      new go.Binding(\"geometry\", \"\", (data, shape) => {\n        var clockwiseFlag = 1;\n        if (data.order % 2 == 0) {\n          clockwiseFlag = 0;\n        }\n        // if(data.flip){\n        //   clockwiseFlag = 0;\n        // }\n        // console.log(`data.oliveType1: ${data.oliveType}`)\n        if (data.oliveType == \"Ellipse\") {\n          // console.log(`data.oliveType2: ${data.oliveType}`)\n          return this.makeGeo(data, shape, { clockwiseFlag: clockwiseFlag });\n        }\n        // console.log(`data.oliveType3: ${data.oliveType}`)\n        return this.makeGeoWave(data, shape, { clockwiseFlag: clockwiseFlag });\n      }),\n      new go.Binding(\"stroke\", \"xuStroke\").makeTwoWay(),\n      new go.Binding(\"strokeWidth\", \"xuStrokeWidth\").makeTwoWay(),\n      // new go.Binding(\"strokeDashArray\", \"xuStrokeDashArray\").makeTwoWay(),\n      new go.Binding(\"strokeDashArray\", \"xuStrokeDashArray\", function(v) {\n        return JSON.parse(v);\n      }).makeTwoWay(function(v) {\n        return JSON.stringify(v);\n      }),\n      new go.Binding(\"desiredSize\", \"desiredSize\", function(v) {\n        var size = new go.Size(v.width, v.height / 2);\n        // console.log(\"v:\",v)\n        return size;\n      }).ofObject(\"main\")\n    );\n  }\n\n  getTailShiShape() {\n    return $(\n      go.Shape,\n      {\n        name: \"XU\",\n        strokeWidth: 2,\n        stroke: \"#cb1c27\",\n        fill: \"rgba(0,66,0,0)\",\n        // background: \"yellow\",\n        stretch: go.GraphObject.None,\n        alignment: go.Spot.Bottom,\n        alignmentFocus: go.Spot.Bottom\n        // row:1, column:0,margin:0\n      },\n      // new go.Binding(\"alignment\",\"\",function(data, shape){\n      //   if(data.flip){\n      //     return go.Spot.Top\n      //   }\n      //   return go.Spot.Bottom\n      // }),\n      // new go.Binding(\"alignmentFocus\",\"\",function(data, shape){\n      //   if(data.flip){\n      //     return go.Spot.Top\n      //   }\n      //   return go.Spot.Bottom\n      // }),\n      new go.Binding(\"geometry\", \"\", (data, shape) => {\n        var clockwiseFlag = 0;\n        if (data.order % 2 == 0) {\n          clockwiseFlag = 1;\n        }\n        if (data.flip) {\n          // clockwiseFlag = 1;\n        }\n\n        return this.makeGeoWave(data, shape, { clockwiseFlag: !clockwiseFlag });\n      }),\n      new go.Binding(\"stroke\", \"shiStroke\").makeTwoWay(),\n\n      new go.Binding(\"desiredSize\", \"desiredSize\", function(v) {\n        var size = new go.Size(v.width, v.height / 2);\n        // console.log(\"v:\",v)\n        return size;\n      }).ofObject(\"main\")\n    );\n  }\n\n  getTailXuShape() {\n    return $(\n      go.Shape,\n      {\n        name: \"TailXu\",\n        strokeWidth: 2,\n        stroke: \"#0e399d\",\n        fill: \"rgba(0,66,0,0)\",\n        // background: \"gray\",\n        stretch: go.GraphObject.None,\n        alignment: go.Spot.Bottom,\n        strokeDashArray: [10, 5],\n        alignmentFocus: go.Spot.Bottom\n        // row:1, column:0,margin:0\n      },\n      // new go.Binding(\"alignment\",\"\",function(data, shape){\n      //   if(data.flip){\n      //     return go.Spot.Top\n      //   }\n      //   return go.Spot.Bottom\n      // }),\n      // new go.Binding(\"alignmentFocus\",\"\",function(data, shape){\n      //   if(data.flip){\n      //     return go.Spot.Top\n      //   }\n      //   return go.Spot.Bottom\n      // }),\n      new go.Binding(\"geometry\", \"\", (data, shape) => {\n        var clockwiseFlag = 1;\n        if (data.order % 2 == 0) {\n          clockwiseFlag = 0;\n        }\n        // if(data.flip){\n        //   clockwiseFlag = 0;\n        // }\n        return this.makeGeoWave(data, shape, { clockwiseFlag: !clockwiseFlag });\n      }),\n      new go.Binding(\"desiredSize\", \"desiredSize\", function(v) {\n        var size = new go.Size(v.width, v.height / 2);\n        // console.log(\"v:\",v)\n        return size;\n      }).ofObject(\"main\")\n    );\n  }\n\n  getTextBuild() {\n    return $(\n      go.TextBlock,\n      {\n        name: \"TEXT\",\n        alignment: new go.Spot(0.5, 0.4),\n        font: \"18px 'Microsoft YaHei'\",\n        editable: false,\n        // flip:go.GraphObject.FlipHorizontal,\n        //margin: 3, editable: true,\n        // background: \"gray\",\n        angle: 0,\n        stroke: \"black\",\n        isMultiline: true,\n        textEdited: function(textBlock, oldv, newv) {\n          // if(textBlock.part.containingGroup.data.textAngle == \"horizontal\"){\n          var centerText = textBlock.part.diagram.model.findNodeDataForKey(\n            textBlock.part.data.centerText\n          );\n          if (centerText) {\n            console.log(\"centerTextcenterTextcenterTextcenterText\");\n            textBlock.part.diagram.model.startTransaction(\"text\");\n            textBlock.part.diagram.model.setDataProperty(\n              centerText,\n              \"text\",\n              newv\n            );\n            textBlock.part.diagram.model.commitTransaction(\"text\");\n          }\n          //   return;\n          // }\n          setTimeout(function() {\n            console.log(\"textEditedtextEditedtextEdited\", textBlock.lineCount);\n            if (!textBlock.text) return;\n            if (textBlock.text && textBlock.text.trim() == \"\") return;\n            if (textBlock.lineCount % 2 != 0) {\n              if (newv[newv.length - 1] == \"\\n\") {\n                textBlock.text = newv.substring(0, newv.length - 1);\n                return;\n              }\n              textBlock.text = newv + \"\\n\";\n            }\n          }, 100);\n\n          var enterCount = 0;\n          textBlock.part.containingGroup.layout.isValidLayout = false;\n          // for(var i=0;i<newv.length;i++){\n\n          // }\n          // textBlock.part.updateTargetBindings()\n\n          // if(textBlock.lineCount %2 != 0){\n          //   if(newv[newv.length-1] == \"\\n\"){\n          //     textBlock.text = newv.substring(0, newv.length-1)\n          //     return;\n          //   }\n          //   textBlock.text = newv+\"\\n\"\n          // }\n        },\n        overflow: go.TextBlock.OverflowClip,\n        wrap: go.TextBlock.WrapDesiredSize,\n        textAlign: \"center\",\n        spacingAbove: 4,\n        spacingBelow: 4,\n        portId: \"TEXT\",\n        stretch: go.GraphObject.Uniform\n      },\n      new go.Binding(\"visible\", \"textVisible\").makeTwoWay(),\n      new go.Binding(\"alignment\", \"\", function(v, textBlock) {\n        // console.log('textBlock', textBlock.lineCount)\n        // if(textBlock.lineCount%2 == 0){\n        //   return new go.Spot(0.5,0.5)\n        // }\n        return new go.Spot(0.5, 0.5);\n      }),\n      new go.Binding(\"textAlign\", \"textAlign\", function(v) {\n        // return ['start', 'center', 'end'].indexOf(v)>-1 ? v : \"center\";\n        return v;\n      }).makeTwoWay(),\n      new go.Binding(\"spacingAbove\", \"spacingline\", function(v) {\n        return helpers.tdTransToNum(v, 4);\n      }).makeTwoWay(),\n      new go.Binding(\"spacingBelow\", \"spacingline\", function(v) {\n        return helpers.tdTransToNum(v, 4);\n      }).makeTwoWay(),\n      new go.Binding(\"width\", \"width\", function(v) {\n        return v - 30;\n      }).ofObject(\"main\"),\n      // new go.Binding(\"height\", \"height\", function (v) {\n      //   return v;\n      // }).ofObject(\"SHAPE\"),\n      new go.Binding(\"text\", \"text\", function(text, d) {\n        // console.log(\"d.lineCount,d.lineCountd.lineCount\",text,d.lineCount)\n        // setTimeout(function(){\n        //   if(d && d.lineCount!=null && d.lineCount%2 != 0){\n        //     if(text && text[text.length-1] != \"\\n\"){\n        //       d.text+=\"\\n\"\n        //     }\n        //   }\n        // },100)\n        // setTimeout(function(){\n        //   try{\n        //     console.log(\"check overflow\")\n        //     if(!d.text) return;\n        //     if(d.text && d.text.trim() == \"\") return;\n        //     if(d.lineCount %2 != 0){\n        //       if(d.text[d.text.length-1] == \"\\n\"){\n        //         d.text = d.text.substring(0, d.text.length-1)\n        //         return;\n        //       }\n        //       d.text = d.text+\"\\n\"\n        //     }\n        //     // if(d && d.lineCount!=null && d.lineCount%2 != 0){\n        //     //   if(d.text && d.text[d.text.length-1] != \"\\n\"){\n        //     //     d.text+=\"\\n\"\n        //     //   }\n        //     // }\n        //   }catch(e){\n        //     console.error(e)\n        //   }\n        // },100)\n        return text;\n        // console.log(\"sdfsdfsdfsdfsdfdsfdsfsd\")\n        console.log(text, \":\", d.lineCount);\n        if (d.lineCount % 2 != 0) {\n          return text + \"\\n\";\n        } else {\n          return text;\n        }\n      }).makeTwoWay(function(text, d) {\n        console.log(\"text write write\", d.lineCount);\n        return text;\n        if (d.lineCount % 2 != 0) {\n          return text + \"\\n\";\n        } else {\n          return text;\n        }\n      }),\n      new go.Binding(\"stroke\", \"textStroke\").makeTwoWay(),\n      new go.Binding(\"font\", \"font\").makeTwoWay()\n    );\n  }\n\n  getNodeSelectionAdornmentTemplate() {\n    return $(\n      go.Adornment,\n      \"Spot\",\n      {\n        // isShadowed: true,\n      },\n      $(\n        go.Panel,\n        \"Auto\",\n        $(\n          go.Shape,\n          {\n            isPanelMain: true,\n            fill: null,\n            stroke: \"dodgerblue\",\n            strokeWidth: 3\n          }\n          // new go.Binding(\"fill\",\"\",function(e,obj){\n          //   var radBrush = $(go.Brush, \"Radial\", { 0: \"rgba(248,248,242,0)\", 1: 'RGB(255,242,0)' });\n          //   return radBrush;\n          // })\n          //\n        ),\n        $(go.Placeholder) // this represents the selected Node\n      ),\n\n      // ),\n      // the button to create a \"next\" node, at the top-right corner\n      $(\n        \"CircleButton\",\n        {\n          name: \"AddChild\",\n          toolTip: $(\n            go.Adornment,\n            \"Auto\",\n            $(go.Shape, { fill: \"#FFFFCC\" }),\n            $(\n              go.TextBlock,\n              { textAlign: \"center\", margin: new go.Margin(8, 4, 4, 4) }, // the tooltip shows the result of calling nodeInfo(data)\n              new go.Binding(\"text\", \"\", function(d) {\n                return \"增加橄榄\";\n              })\n            )\n          ),\n          alignment: go.Spot.Right,\n          alignmentFocus: go.Spot.Left,\n          width: 50,\n          height: 50,\n          click: function(e) {\n            e.diagram.__trtd.addOlive();\n          } // this function is defined below\n        },\n        $(go.Shape, \"PlusLine\", {\n          stroke: \"#770077\",\n          desiredSize: new go.Size(25, 25)\n        })\n      ),\n      $(\n        \"CircleButton\",\n        {\n          name: \"RemoveChild\",\n          toolTip: $(\n            go.Adornment,\n            \"Auto\",\n            $(go.Shape, { fill: \"#FFFFCC\" }),\n            $(\n              go.TextBlock,\n              { textAlign: \"center\", margin: new go.Margin(8, 4, 4, 4) }, // the tooltip shows the result of calling nodeInfo(data)\n              new go.Binding(\"text\", \"\", function(d) {\n                return \"删除橄榄\";\n              })\n            )\n          ),\n          alignment: go.Spot.Left,\n          alignmentFocus: go.Spot.Right,\n          width: 50,\n          height: 50,\n          click: function(e) {\n            e.diagram.__trtd.deleteSelection();\n          } // this function is defined below\n        },\n        $(go.Shape, \"MinusLine\", {\n          stroke: \"#770077\",\n          desiredSize: new go.Size(25, 25)\n        })\n      ),\n      $(\n        \"Button\",\n        {\n          name: \"AddLevel\",\n          toolTip: $(\n            go.Adornment,\n            \"Auto\",\n            $(go.Shape, { fill: \"#FFFFCC\" }),\n            $(\n              go.TextBlock,\n              { textAlign: \"center\", margin: new go.Margin(8, 4, 4, 4) }, // the tooltip shows the result of calling nodeInfo(data)\n              new go.Binding(\"text\", \"\", function(d) {\n                return \"增加同级节点\";\n              })\n            )\n          ),\n          alignment: new go.Spot(1, 0.5, 15, 0),\n          width: 30,\n          height: 30,\n          click: function(e) {\n            e.diagram.__trtd.addOlive();\n          } // this function is defined below\n        },\n        $(go.Shape, \"PlusLine\", {\n          stroke: \"#227700\",\n          desiredSize: new go.Size(15, 15)\n        }),\n        new go.Binding(\"visible\", \"level\", function(level) {\n          return level != 0; // hidden this button if current node is root node\n        })\n      )\n      // $(go.Panel, \"Auto\", {        // 放大镜\n      //         name: \"ButtonIcon1\",\n      //         alignment: new go.Spot(0, 1, 5, -5),\n      //         //alignment: go.Spot.BottomLeft,\n      //         //alignmentFocus: go.Spot.BottomLeft,\n      //         width: 60,\n      //         height: 60,\n      //         isActionable: true,\n      //         click: expandCollapse // this function is defined below\n      //     },\n\n      //     $(go.Shape, \"Circle\", {\n      //         fill: \"rgba(1,1,1,0)\",\n      //         strokeWidth: 0,\n      //         stroke: \"green\",\n      //         width: 50,\n      //         height: 50\n      //     }),\n      //     $(go.Shape, {\n      //             '_para1': true,\n      //             name: \"ButtonIcon\",\n      //             fill: \"red\",\n      //             strokeWidth: 2,\n      //             stroke: \"#767678\",\n      //             geometryString: icons[\"zoomout\"], // default value for isTreeExpanded is true\n      //             desiredSize: new go.Size(30, 30)\n      //         },\n      //         new go.Binding(\"geometryString\", \"\", function(d, button) {\n      //             // console.log('dddddd:', d);\n      //             // console.log('button:', button);\n      //             // var myDiagram = d.diagram;\n      //             // var node = myDiagram.selection.first();\n      //             // if (node[\"_controlExpand\"]) {\n      //             //     return icons[\"zoomout\"];\n      //             // } else {\n      //             //     return icons[\"zoomin\"];\n      //             // }\n      //             return icons[\"zoomin\"];\n      //         })\n      //     )\n      // )\n    );\n  }\n\n  nodeResizeAdornmentTemplate() {\n    return $(\n      go.Adornment,\n      \"Spot\",\n      $(go.Placeholder), // takes size and position of adorned object\n      // $(go.Shape, \"Circle\", // left resize handle\n      //     {\n      //         alignment: go.Spot.TopLeft,\n      //         alignmentFocus: go.Spot.BottomRight,\n      //         cursor: \"col-resize\",\n      //         desiredSize: new go.Size(30, 30),\n      //         fill: \"lightblue\",\n      //         stroke: \"dodgerblue\"\n      //     }),\n      $(\n        go.Shape,\n        \"Circle\", // right resize handle\n        {\n          alignment: go.Spot.BottomRight,\n          alignmentFocus: go.Spot.TopLeft,\n          cursor: \"col-resize\",\n          desiredSize: new go.Size(30, 30),\n          fill: \"lightblue\",\n          stroke: \"dodgerblue\"\n        }\n      )\n    );\n  }\n\n  getNodeTemplate() {\n    var diagram = this.diagram;\n    var that = this;\n    return $(\n      go.Node,\n      \"Spot\",\n      {\n        // isClipping: true,\n        __trtdNode: that,\n        layerName: \"overflow\",\n        zOrder: 5,\n        // copyable: false,\n        // dragComputation: stayInGroup,\n        movable: true,\n        resizable: false,\n        // locationObjectName: \"main\",\n        resizeObjectName: \"main\",\n        selectionObjectName: \"main\",\n        rotatable: false,\n        resizeAdornmentTemplate: that.nodeResizeAdornmentTemplate(),\n        layoutConditions:\n          ~go.Part.LayoutStandard &\n          go.Part.LayoutRemoved &\n          go.Part.LayoutAdded &\n          go.Part.LayoutNodeSized,\n        locationSpot: go.Spot.LeftCenter,\n        // toolTip:  // define a tooltip for each node that displays the color as text\n        // $(go.Adornment, \"Spot\",\n        //   $(go.TextBlock, { margin: 4 },\n        //     new go.Binding(\"text\", \"\", function(data,p){\n        //       // console.log(\"tooltip:\",p,data)\n        //       var tips = [\"双击编辑文字\",\"尝试按方向键快捷移动到下一个对象\",\"按回车键增加橄榄\"]\n        //       var isPhone = helpers.checkPhone()\n        //       if(isPhone){\n        //         return \"\"\n        //       }\n        //       var elt = Math.floor(tips.length * Math.random())\n        //       return tips[elt]\n        //     })\n        //   )\n        // ),  // end of Adornment\n        click: (e, node) => {\n          console.log(node.data);\n          if (!node.containingGroup) return;\n          var it = node.containingGroup.findSubGraphParts().iterator;\n          while (it.next()) {\n            var n = it.value;\n            if (\n              n.data.category == \"autoText\" &&\n              (n.data.role == \"xuText\" || n.data.role == \"shiText\")\n            ) {\n              if (n.data.order == node.data.order) {\n                // locateNode = n;\n                if (n.data.text == \"\" || n.data.text.trim() == \"\") {\n                  n.findObject(\"textBorder\").visible = true;\n                }\n                //   n.areaBackground = \"mediumslateblue\"\n              } else {\n                n.findObject(\"textBorder\").visible = false;\n              }\n            }\n          }\n        },\n        mouseOver: function(e, node) {\n          // if(node.data.hyperlink){\n          //   var textObj = node.findObject('TEXT');\n          //   textObj.isUnderline = true;\n          // }\n          if (!node.containingGroup) return;\n          // var it = node.containingGroup.findSubGraphParts().iterator;\n          // while (it.next()) {\n          //     var n = it.value;\n          //     if(n.data.category == \"autoText\"){\n          //         if(n.data.order == node.data.order){\n          //             // locateNode = n;\n          //             if(n.data.text == \"\" || n.data.text.trim() == \"\"){\n          //               n.findObject(\"textBorder\").visible = true;\n          //             }\n          //           //   n.areaBackground = \"mediumslateblue\"\n          //         }\n          //     }\n          // }\n\n          var shiText = node.diagram.findNodeForKey(node.data.shiText);\n          if (shiText) {\n            shiText.findObject(\"textBorder\").visible = true;\n          }\n          var xuText = node.diagram.findNodeForKey(node.data.xuText);\n          if (xuText) {\n            xuText.findObject(\"textBorder\").visible = true;\n          }\n          var centerText = node.diagram.findNodeForKey(node.data.centerText);\n          if (centerText) {\n            centerText.layerName = \"Background\";\n          }\n\n          // diagram.__trtd.showNodeRemarkTips(e, node);\n        },\n        contextMenu: $(go.Adornment),\n\n        mouseDragEnter: function(e, obj) {\n          var node = obj.part;\n          var selnode = e.diagram.selection.first();\n\n          // 常变\n          if (\n            selnode.data.category != \"wave\" &&\n            !(\n              selnode.data.category == \"picGroup\" &&\n              selnode.data.role == \"cbian\"\n            )\n          ) {\n            return;\n          }\n          var centerText = node.diagram.findNodeForKey(node.data.centerText);\n          if (centerText) {\n            centerText.layerName = \"Background\";\n          }\n          //var sat = node.selectionAdornmentTemplate;\n          //var adorn = sat.copy();\n          //adorn.adornedObject = node;\n          //node.addAdornment(\"dragEnter\", adorn);\n\n          //if (!mayWorkFor(selnode, node)) return;\n          var shape = node.findObject(\"main\");\n          if (shape) {\n            shape._prevFill = shape.fill; // remember the original brush\n            shape.fill = \"RGBA(146,208,80,0.5)\";\n          }\n        },\n        mouseDragLeave: function(e, obj) {\n          var node = obj.part;\n          var shape = node.findObject(\"main\");\n          if (shape && shape._prevFill) {\n            shape.fill = shape._prevFill; // restore the original brush\n          }\n          var centerText = node.diagram.findNodeForKey(node.data.centerText);\n          if (centerText) {\n            if (!helpers.checkPhone()) {\n              centerText.layerName = \"Foreground\";\n            }\n          }\n          //node.removeAdornment(\"dragEnter\");\n        },\n        mouseDrop: function(e, obj) {\n          var node = obj.part;\n          console.log(\"mouseDropmouseDropmouseDropmouseDrop\");\n          var selnode = e.diagram.selection.first();\n          if (!selnode) return;\n          // 常变\n          if (\n            selnode.data.category == \"picGroup\" &&\n            selnode.data.role == \"cbian\"\n          ) {\n            var it = selnode.findSubGraphParts().iterator;\n            var deleteObjs = [];\n            var cbian = {};\n            while (it.next()) {\n              var n = it.value;\n              if (n.data.category == \"autoText\") {\n                if (n.data.locationSpot == \"0 0 0 0\") {\n                  cbian.shiText = n.data.text;\n                }\n                if (n.data.locationSpot == \"0 0.5 0 0\") {\n                  cbian.centerText = n.data.text;\n                }\n                if (n.data.locationSpot == \"0 1 0 0\") {\n                  cbian.xuText = n.data.text;\n                }\n              }\n              deleteObjs.push(n.data);\n            }\n            e.diagram.startTransaction(\"mouseDrop\");\n            // 删除总结图\n            e.diagram.model.removeNodeDataCollection(deleteObjs);\n            var backupSelnode = JSON.parse(JSON.stringify(selnode.data));\n            e.diagram.model.removeNodeData(selnode.data);\n\n            // 添加新橄榄\n            e.diagram.__trtd.addOlive(node, cbian);\n            e.diagram.commitTransaction(\"mouseDrop\");\n            return;\n          }\n\n          if (selnode.data.category != \"wave\") {\n            return;\n          }\n          if (!node) {\n            // node.containingGroup.layout.isValidLayout = false\n            return;\n          }\n          if (selnode.data.group != obj.data.group) {\n            return;\n          }\n          e.diagram.startTransaction(\"mouseDrop\");\n          selnode.__oldOrder = selnode.data.order;\n          e.diagram.model.setDataProperty(\n            selnode.data,\n            \"order\",\n            node.data.order + 0.5\n          );\n          var xuText = e.diagram.findNodeForKey(selnode.data.xuText);\n          var shiText = e.diagram.findNodeForKey(selnode.data.shiText);\n          // shiText.__oldOrder = shiText.data.order\n          // xuText.__oldOrder = xuText.data.order\n          e.diagram.model.setDataProperty(\n            shiText,\n            \"order\",\n            node.data.order + 0.5\n          );\n          e.diagram.model.setDataProperty(\n            xuText,\n            \"order\",\n            node.data.order + 0.5\n          );\n          // node.containingGroup.layout.isValidLayout = false\n          e.diagram.commitTransaction(\"mouseDrop\");\n          return;\n          if (node.data.isparent) {\n            var child = e.diagram.findNodeForKey(node.data.isparent);\n            while (child.data.next) {\n              child = e.diagram.findNodeForKey(child.data.next);\n            }\n            if (child.data.key == selnode.data.key) {\n              //最后一个子节点拖放到父节点上时，不做任何操作\n              return;\n            }\n            e.diagram.__trtd.setNodeAsSibling(selnode, child);\n          } else {\n            e.diagram.__trtd.setNodeAsChildren(selnode, node);\n          }\n        },\n        mouseLeave: function(e, node) {\n          if (!node.containingGroup) return;\n          var it = node.containingGroup.findSubGraphParts().iterator;\n          while (it.next()) {\n            var n = it.value;\n            if (n.data.category == \"autoText\") {\n              // if(n.data.order == node.data.order+1){\n              //     locateNode = n;\n              // }\n              n.findObject(\"textBorder\").visible = false;\n              // n.areaBackground = null\n            }\n          }\n          try {\n            var centerText = e.diagram.findNodeForKey(node.data.centerText);\n            if (centerText) {\n              centerText.layerName = \"Foreground\";\n            }\n          } catch (e) {\n            console.error(\"wave node template error:\", e);\n          }\n        },\n        selectionAdornmentTemplate: this.getNodeSelectionAdornmentTemplate(),\n        doubleClick: function(e, node) {\n          if (!node) return;\n          if (!node.containingGroup) return;\n          if (\n            node.containingGroup.data.textAngle == \"horizontal\" &&\n            node.containingGroup.data.centerTextAngle == \"independent\"\n          ) {\n            // 如果文字方向为正向，且中线文字为正向\n            node.findObject(\"TEXT\").visible = true;\n            var centerText = node.diagram.findNodeForKey(node.data.centerText);\n            if (centerText) {\n              centerText.visible = false;\n            }\n          }\n          setTimeout(() => {\n            e.diagram.__trtd.selectText(e, node);\n          }, 100);\n        }\n      },\n      this.binding,\n      $(\n        go.Shape,\n        \"Rectangle\",\n        {\n          name: \"main\",\n          // layerName: \"overflow\",\n          fill: \"rgba(0,0,0,0)\",\n          stroke: null,\n          width: 300,\n          height: 150\n        },\n        new go.Binding(\"areaBackground\", \"isHighlighted\", function(h, shape) {\n          // node.areaBackground = \"RGB(107,208,137)\"\n          if (h) return \"RGBA(146,208,80,0.5)\";\n          return null;\n          var c = shape.part.data.color;\n          return c ? c : \"white\";\n        }).ofObject(), // binding source is Node.isHighlighted\n        new go.Binding(\"fill\", \"fill\").makeTwoWay(),\n        // new go.Binding(\"fill\", \"fill\").makeTwoWay(),\n        new go.Binding(\"desiredSize\", \"desiredSize\", function(v, d) {\n          // console.log(\"vd m\", v, d )\n          // if(!v) return d.part.findObject(\"SHAPE\").measuredBounds.size;\n          return go.Size.parse(v);\n        }).makeTwoWay(function(v) {\n          return go.Size.stringify(v);\n        })\n      ),\n      // $(go.Panel, \"Spot\",{\n      //   // isClipping: true,\n      //   background: \"green\",\n      //   position: new go.Point(0,0),\n      //   alignment: go.Spot.Center,\n      //   alignmentFocus: go.Spot.Center,\n      // },\n      // $(go.Shape, \"Rectangle\",{\n      //   alignment: go.Spot.Center,\n      //   alignmentFocus: go.Spot.Center,\n      // },\n      // new go.Binding(\"desiredSize\", \"desiredSize\", function(v) {\n      //     var size = new go.Size(v.width, v.height)\n      //     // console.log(\"v:\",v)\n      //     return size\n      //     }).ofObject(\"main\"),\n      // ),\n      this.getShiHalfEllipseShape(),\n      this.getXuHalfEllipseShape(),\n      // $(go.Adornment,\n      // { locationSpot: go.Spot.Top },\n      // $(go.Shape, \"BpmnActivityLoop\",\n      //   { width: 12, height: 12, cursor: \"pointer\",\n      //     background: \"transparent\", stroke: \"dodgerblue\", strokeWidth: 2 })\n      // ),\n      // ),\n\n      // $(go.Panel,\"Spot\",{\n      //   stretch: go.GraphObject.Uniform,\n      //   background:\"gray\",\n      //   // locationSpot: go.Spot.LeftCenter,\n      //   alignment: go.Spot.Right,\n      //   // strokeDashArray: [10, 5],\n      //   alignmentFocus: go.Spot.Left,\n      // },\n      //   this.getTailXuShape(),\n      //   this.getTailShiShape(),\n      // ),\n\n      // this.getUpHalfEllipseShape(),\n      this.getTextBuild(),\n      $(\n        go.Shape,\n        {\n          geometryString: \"M540.5696 556.81024a81.8176 81.8176 0 0 1-53.0432-19.47648l-225.4848-191.52896a81.92 81.92 0 1 1 106.0864-124.86656l172.4416 146.47296 172.4416-146.47296a81.92 81.92 0 0 1 106.0864 124.86656l-225.4848 191.52896a81.7152 81.7152 0 0 1-53.0432 19.47648z m53.06368 246.23104l225.44384-191.52896a81.92 81.92 0 1 0-106.0864-124.84608l-172.40064 146.47296-172.48256-146.47296a81.92 81.92 0 1 0-106.04544 124.86656l225.52576 191.52896a81.7152 81.7152 0 0 0 53.00224 19.47648c18.88256 0 37.76512-6.49216 53.0432-19.49696z\",\n            // \"M16 0c-8.837 0-16 7.163-16 16s7.163 16 16 16 16-7.163 16-16-7.163-16-16-16zM16 29c-7.18 0-13-5.82-13-13s5.82-13 13-13 13 5.82 13 13-5.82 13-13 13zM12 8c-1.105 0-2 0.895-2 2s0.895 2 2 2h5.172l-8.586 8.586c-0.781 0.781-0.781 2.047 0 2.829 0.39 0.39 0.902 0.586 1.414 0.586s1.024-0.195 1.414-0.586l8.586-8.586v5.172c0 1.105 0.895 2 2 2s2-0.895 2-2v-12h-12z\",\n          visible: false,\n          name: \"figure\",\n          cursor: \"pointer\",\n          alignment: go.Spot.TopRight,\n          alignmentFocus: go.Spot.TopRight,\n          width: 14,\n          height: 14,\n          fill: \"green\",\n          toolTip: $(\n            \"ToolTip\",\n            $(\n              go.Panel,\n              \"Vertical\",\n              $(\n                go.Picture,\n                new go.Binding(\"source\", \"src\", function(s) {\n                  return \"images/\" + s + \".png\";\n                })\n              ),\n              $(go.TextBlock, {text:\"进入子盘\", margin: 3 })\n            )\n          ),\n          click: function(e) {\n            console.log(\"click figure\", e);\n            var node = e.targetObject.part;\n            e.diagram.__trtd.openFigure({\n              figure: node.data.figure,\n              title: node.data.text,\n              key: node.data.key,\n              node: node\n            });\n          }\n        },\n        // new go.Binding(\"geometry\", \"geo\", function(){\n\n        // })),\n        new go.Binding(\"visible\", \"figure\", function(v) {\n          console.log(\"----------------------\");\n          if (v) {\n            return true;\n          } else {\n            return false;\n          }\n        })\n      )\n    );\n  }\n}\n\nmodule.exports = WaveNodeTemplate;\n// export default WaveNodeTemplate\n\n\n\n// WEBPACK FOOTER //\n// ./src/nodeTemplate/waveNodeTemplate.js","var $ = go.GraphObject.make;\r\nvar Base = require('./base')\r\nvar helpers = require('../helpers/helpers.gojs')\r\n  \r\n\r\n  \r\n\r\nclass WaveNodeTemplate extends Base {\r\n    constructor(options){\r\n        super(options)\r\n        // this.nodeProperties = {}\r\n        \r\n    }\r\n\r\n    makeGeo(data, shape, options) {\r\n      // this is much more efficient than calling go.GraphObject.make:\r\n      var {radiusX=150,radiusY=100} = data\r\n      radiusX = shape.part.findObject(\"main\").width/2\r\n      radiusY = shape.part.findObject(\"main\").height/2\r\n      // console.log(\"makeGeo999999999999999999999999999\",radiusX,radiusY)\r\n      var geo =  new go.Geometry()\r\n        .add(new go.PathFigure(0, 0)  // start point\r\n          .add(new go.PathSegment(go.PathSegment.SvgArc,\r\n          radiusX*2,0,radiusX, radiusY,0,1,options.clockwiseFlag?1:0\r\n              )\r\n            )\r\n          )\r\n          geo.defaultStretch = go.GraphObject.Fill;\r\n          return geo;\r\n    }\r\n\r\n    makeGeoWave(data, shape, options) {\r\n      // this is much more efficient than calling go.GraphObject.make:\r\n      var {radiusX=150,radiusY=100} = data\r\n      radiusX = shape.part.findObject(\"main\").width/2\r\n      radiusY = shape.part.findObject(\"main\").height/2\r\n      // console.log(\"makeGeo999999999999999999999999999\",radiusX,radiusY)\r\n      var geo =  new go.Geometry()\r\n        .add(new go.PathFigure(0, 0)  // start point\r\n          .add(new go.PathSegment(go.PathSegment.QuadraticBezier,\r\n            radiusX*2, 0, //describe the end point\r\n            radiusX, radiusY*(options.clockwiseFlag?-1:1), // describe the only control point\r\n          // radiusX*2,0,radiusX, radiusY,0,1,options.clockwiseFlag?1:0\r\n              )\r\n            )\r\n          )\r\n          geo.defaultStretch = go.GraphObject.Fill;\r\n          return geo;\r\n    }\r\n\r\n    getShiHalfEllipseShape(){\r\n      return $(go.Shape, {name:\"XU\", \r\n      strokeWidth:2,\r\n      stroke: \"#cb1c27\", fill:\"rgba(0,66,0,0)\",\r\n        // background: \"yellow\",\r\n        stretch: go.GraphObject.Uniform,\r\n        alignment: go.Spot.Bottom,\r\n        alignmentFocus: go.Spot.Bottom,\r\n        // row:1, column:0,margin:0\r\n        \r\n      },\r\n        // new go.Binding(\"alignment\",\"\",function(data, shape){\r\n        //   if(data.flip){\r\n        //     return go.Spot.Top\r\n        //   }\r\n        //   return go.Spot.Bottom\r\n        // }),\r\n        // new go.Binding(\"alignmentFocus\",\"\",function(data, shape){\r\n        //   if(data.flip){\r\n        //     return go.Spot.Top\r\n        //   }\r\n        //   return go.Spot.Bottom\r\n        // }),\r\n          new go.Binding(\"geometry\", \"\", (data, shape)=>{\r\n            var clockwiseFlag = 0;\r\n            if(data.order%2 == 0){\r\n              clockwiseFlag = 1;\r\n            }\r\n            if(data.flip){\r\n              // clockwiseFlag = 1;\r\n            }\r\n            \r\n            return this.makeGeoWave(data, shape, {clockwiseFlag:clockwiseFlag})\r\n          }),\r\n          new go.Binding(\"stroke\", \"shiStroke\").makeTwoWay(),\r\n          \r\n          new go.Binding(\"desiredSize\", \"desiredSize\", function(v) {\r\n                var size = new go.Size(v.width, v.height/2)\r\n                // console.log(\"v:\",v)\r\n                return size\r\n            }).ofObject(\"main\")\r\n        )\r\n    }\r\n    getXuHalfEllipseShape(){\r\n      return $(go.Shape, {name:\"SHI\", \r\n      strokeWidth:2,\r\n      stroke: \"#0e399d\", fill:\"rgba(0,66,0,0)\",\r\n        // background: \"gray\",\r\n        stretch: go.GraphObject.Uniform,\r\n        alignment: go.Spot.Bottom,\r\n        strokeDashArray: [10, 5],\r\n        alignmentFocus: go.Spot.Bottom,\r\n        // row:1, column:0,margin:0\r\n      },\r\n          // new go.Binding(\"alignment\",\"\",function(data, shape){\r\n          //   if(data.flip){\r\n          //     return go.Spot.Top\r\n          //   }\r\n          //   return go.Spot.Bottom\r\n          // }),\r\n          // new go.Binding(\"alignmentFocus\",\"\",function(data, shape){\r\n          //   if(data.flip){\r\n          //     return go.Spot.Top\r\n          //   }\r\n          //   return go.Spot.Bottom\r\n          // }),\r\n          new go.Binding(\"geometry\", \"\", (data, shape)=>{\r\n            var clockwiseFlag = 1;\r\n            if(data.order%2 == 0){\r\n              clockwiseFlag = 0;\r\n            }\r\n            // if(data.flip){\r\n            //   clockwiseFlag = 0;\r\n            // }\r\n            return this.makeGeoWave(data, shape, {clockwiseFlag:clockwiseFlag})\r\n          }),\r\n          new go.Binding(\"desiredSize\", \"desiredSize\", function(v) {\r\n                var size = new go.Size(v.width, v.height/2)\r\n                // console.log(\"v:\",v)\r\n                return size\r\n            }).ofObject(\"main\")\r\n        )\r\n    }\r\n    getTailShiShape(){\r\n      return $(go.Shape, {name:\"XU\", \r\n      strokeWidth:2,\r\n      stroke: \"#cb1c27\", fill:\"rgba(0,66,0,0)\",\r\n        // background: \"yellow\",\r\n        stretch: go.GraphObject.None,\r\n        alignment:  go.Spot.Bottom,\r\n        alignmentFocus: go.Spot.Bottom,\r\n        // row:1, column:0,margin:0\r\n      },\r\n        // new go.Binding(\"alignment\",\"\",function(data, shape){\r\n        //   if(data.flip){\r\n        //     return go.Spot.Top\r\n        //   }\r\n        //   return go.Spot.Bottom\r\n        // }),\r\n        // new go.Binding(\"alignmentFocus\",\"\",function(data, shape){\r\n        //   if(data.flip){\r\n        //     return go.Spot.Top\r\n        //   }\r\n        //   return go.Spot.Bottom\r\n        // }),\r\n          new go.Binding(\"geometry\", \"\", (data, shape)=>{\r\n            var clockwiseFlag = 0;\r\n            if(data.order%2 == 0){\r\n              clockwiseFlag = 1;\r\n            }\r\n            if(data.flip){\r\n              // clockwiseFlag = 1;\r\n            }\r\n            \r\n            return this.makeGeoWave(data, shape, {clockwiseFlag:!clockwiseFlag})\r\n          }),\r\n          new go.Binding(\"stroke\", \"shiStroke\").makeTwoWay(),\r\n          \r\n          new go.Binding(\"desiredSize\", \"desiredSize\", function(v) {\r\n                var size = new go.Size(v.width, v.height/2)\r\n                // console.log(\"v:\",v)\r\n                return size\r\n            }).ofObject(\"main\")\r\n        )\r\n    }\r\n    getTailXuShape(){\r\n      return $(go.Shape, {name:\"TailXu\", \r\n      strokeWidth:2,\r\n      stroke: \"#0e399d\", fill:\"rgba(0,66,0,0)\",\r\n        // background: \"gray\",\r\n        stretch: go.GraphObject.None,\r\n        alignment:  go.Spot.Bottom,\r\n        strokeDashArray: [10, 5],\r\n        alignmentFocus: go.Spot.Bottom,\r\n        // row:1, column:0,margin:0\r\n      },\r\n          // new go.Binding(\"alignment\",\"\",function(data, shape){\r\n          //   if(data.flip){\r\n          //     return go.Spot.Top\r\n          //   }\r\n          //   return go.Spot.Bottom\r\n          // }),\r\n          // new go.Binding(\"alignmentFocus\",\"\",function(data, shape){\r\n          //   if(data.flip){\r\n          //     return go.Spot.Top\r\n          //   }\r\n          //   return go.Spot.Bottom\r\n          // }),\r\n          new go.Binding(\"geometry\", \"\", (data, shape)=>{\r\n            var clockwiseFlag = 1;\r\n            if(data.order%2 == 0){\r\n              clockwiseFlag = 0;\r\n            }\r\n            // if(data.flip){\r\n            //   clockwiseFlag = 0;\r\n            // }\r\n            return this.makeGeoWave(data, shape, {clockwiseFlag:!clockwiseFlag})\r\n          }),\r\n          new go.Binding(\"desiredSize\", \"desiredSize\", function(v) {\r\n                var size = new go.Size(v.width, v.height/2)\r\n                // console.log(\"v:\",v)\r\n                return size\r\n            }).ofObject(\"main\")\r\n        )\r\n    }\r\n    getTextBuild(){\r\n      return $(go.TextBlock, {\r\n              name: \"TEXT\",\r\n              alignment: new go.Spot(0.5, 0.4),\r\n              font: \"18px 'Microsoft YaHei'\",\r\n              editable: false,\r\n              // flip:go.GraphObject.FlipHorizontal,\r\n              //margin: 3, editable: true,\r\n              \r\n              stroke: \"black\",\r\n              isMultiline: true,\r\n              overflow: go.TextBlock.OverflowClip,\r\n              wrap: go.TextBlock.WrapDesiredSize,\r\n              textAlign: \"center\",\r\n              spacingAbove: 4,\r\n              spacingBelow: 4,\r\n              portId: \"TEXT\",\r\n              stretch: go.GraphObject.Uniform\r\n          },\r\n          new go.Binding(\"textAlign\", \"textAlign\", function(v) {\r\n              return ['start', 'center', 'end'].indexOf(v)>-1 ? v : \"center\";\r\n          }).makeTwoWay(),\r\n          new go.Binding(\"spacingAbove\", \"spacingline\", function(v) {\r\n              return helpers.tdTransToNum(v, 4);\r\n          }).makeTwoWay(),\r\n          new go.Binding(\"spacingBelow\", \"spacingline\", function(v) {\r\n              return helpers.tdTransToNum(v, 4);\r\n          }).makeTwoWay(),\r\n          new go.Binding(\"width\", \"width\", function(v) {\r\n              return v-30;\r\n          }).ofObject(\"main\"),\r\n          // new go.Binding(\"height\", \"height\", function (v) {\r\n          //   return v;\r\n          // }).ofObject(\"SHAPE\"),\r\n          new go.Binding(\"text\", \"text\").makeTwoWay(),\r\n          new go.Binding(\"stroke\", \"textStroke\").makeTwoWay(),\r\n          new go.Binding(\"font\", \"font\").makeTwoWay()\r\n      )\r\n    }\r\n\r\n    getNodeSelectionAdornmentTemplate(){\r\n      return $(go.Adornment, \"Spot\",\r\n      {\r\n        // isShadowed: true,\r\n      },\r\n          $(go.Panel, \"Auto\",\r\n              $(go.Shape, { \r\n                isPanelMain: true,\r\n                 fill: null, \r\n                 stroke: \"dodgerblue\", strokeWidth: 3 },\r\n                  // new go.Binding(\"fill\",\"\",function(e,obj){\r\n                  //   var radBrush = $(go.Brush, \"Radial\", { 0: \"rgba(248,248,242,0)\", 1: 'RGB(255,242,0)' });\r\n                  //   return radBrush;\r\n                  // })\r\n                  // \r\n              ),\r\n              $(go.Placeholder) // this represents the selected Node\r\n\r\n          ),\r\n          \r\n\r\n\r\n        // ),\r\n          // the button to create a \"next\" node, at the top-right corner\r\n          $(\"CircleButton\", {\r\n                  name: \"AddChild\",\r\n                  toolTip: $(go.Adornment, \"Auto\",\r\n                      $(go.Shape, { fill: \"#FFFFCC\" }),\r\n                      $(go.TextBlock, { textAlign: 'center', margin: new go.Margin(8, 4, 4, 4) }, // the tooltip shows the result of calling nodeInfo(data)\r\n                          new go.Binding(\"text\", \"\", function(d) {\r\n                              return \"增加橄榄\";\r\n                          }))\r\n                  ),\r\n                  alignment: go.Spot.Right,\r\n                  alignmentFocus: go.Spot.Left,\r\n                  width: 50,\r\n                  height: 50,\r\n                  click: function (e) {\r\n                      e.diagram.__trtd.addOlive()\r\n                  } // this function is defined below\r\n              },\r\n              $(go.Shape, \"PlusLine\", { stroke: '#770077', desiredSize: new go.Size(25, 25) })\r\n          ),\r\n\r\n          $(\"Button\", {\r\n                  name: \"AddLevel\",\r\n                  toolTip: $(go.Adornment, \"Auto\",\r\n                      $(go.Shape, { fill: \"#FFFFCC\" }),\r\n                      $(go.TextBlock, { textAlign: 'center', margin: new go.Margin(8, 4, 4, 4) }, // the tooltip shows the result of calling nodeInfo(data)\r\n                          new go.Binding(\"text\", \"\", function(d) {\r\n                              return \"增加同级节点\";\r\n                          }))\r\n                  ),\r\n                  alignment: new go.Spot(1, 0.5, 15, 0),\r\n                  width: 30,\r\n                  height: 30,\r\n                  click: function (e) {\r\n                      e.diagram.__trtd.addOlive()\r\n                  } // this function is defined below\r\n              },\r\n              $(go.Shape, \"PlusLine\", { stroke: \"#227700\", desiredSize: new go.Size(15, 15) }),\r\n              new go.Binding(\"visible\", \"level\", function(level) {\r\n                  return level != 0; // hidden this button if current node is root node\r\n\r\n              })\r\n          ),\r\n          // $(go.Panel, \"Auto\", {        // 放大镜\r\n          //         name: \"ButtonIcon1\",\r\n          //         alignment: new go.Spot(0, 1, 5, -5),\r\n          //         //alignment: go.Spot.BottomLeft,\r\n          //         //alignmentFocus: go.Spot.BottomLeft,\r\n          //         width: 60,\r\n          //         height: 60,\r\n          //         isActionable: true,\r\n          //         click: expandCollapse // this function is defined below\r\n          //     },\r\n\r\n          //     $(go.Shape, \"Circle\", {\r\n          //         fill: \"rgba(1,1,1,0)\",\r\n          //         strokeWidth: 0,\r\n          //         stroke: \"green\",\r\n          //         width: 50,\r\n          //         height: 50\r\n          //     }),\r\n          //     $(go.Shape, {\r\n          //             '_para1': true,\r\n          //             name: \"ButtonIcon\",\r\n          //             fill: \"red\",\r\n          //             strokeWidth: 2,\r\n          //             stroke: \"#767678\",\r\n          //             geometryString: icons[\"zoomout\"], // default value for isTreeExpanded is true\r\n          //             desiredSize: new go.Size(30, 30)\r\n          //         },\r\n          //         new go.Binding(\"geometryString\", \"\", function(d, button) {\r\n          //             // console.log('dddddd:', d);\r\n          //             // console.log('button:', button);\r\n          //             // var myDiagram = d.diagram;\r\n          //             // var node = myDiagram.selection.first();\r\n          //             // if (node[\"_controlExpand\"]) {\r\n          //             //     return icons[\"zoomout\"];\r\n          //             // } else {\r\n          //             //     return icons[\"zoomin\"];\r\n          //             // }\r\n          //             return icons[\"zoomin\"];\r\n          //         })\r\n          //     )\r\n          // )\r\n      );\r\n    }\r\n\r\n    getNodeTemplate(){\r\n      var diagram = this.diagram\r\n      return $(go.Node,\"Spot\",{\r\n        // isClipping: true,\r\n        layerName: \"default\",\r\n        zOrder:5,\r\n        movable: false,\r\n        resizable: false,\r\n        resizeObjectName: \"main\",\r\n        selectionObjectName: \"main\",\r\n        rotatable: false,\r\n        layoutConditions: go.Part.LayoutStandard & go.Part.LayoutRemoved & go.Part.LayoutAdded & go.Part.LayoutNodeSized,\r\n        locationSpot: go.Spot.LeftCenter,\r\n        toolTip:  // define a tooltip for each node that displays the color as text\r\n        $(\"ToolTip\",\r\n          $(go.TextBlock, { margin: 4 },\r\n            new go.Binding(\"text\", \"\", function(data,p){\r\n              // console.log(\"tooltip:\",p,data)\r\n              var tips = [\"双击编辑文字\",\"尝试按方向键快捷移动到下一个对象\"]\r\n              var elt = Math.floor(tips.length * Math.random())\r\n              return tips[elt]\r\n            })\r\n          )\r\n        ),  // end of Adornment\r\n        click: (e, node)=>{\r\n          console.log(node.data)\r\n        },\r\n        mouseOver: function(e, node) {\r\n          // if(node.data.hyperlink){\r\n          //   var textObj = node.findObject('TEXT');\r\n          //   textObj.isUnderline = true;\r\n          // }\r\n          if(!node.containingGroup) return;\r\n          var it = node.containingGroup.findSubGraphParts().iterator;\r\n          while (it.next()) {\r\n              var n = it.value;\r\n              if(n.data.category == \"autoText\"){\r\n                  if(n.data.order == node.data.order){\r\n                      // locateNode = n;\r\n                      n.findObject(\"textBorder\").visible = true;\r\n                    //   n.areaBackground = \"mediumslateblue\"\r\n                  }\r\n              }\r\n          }\r\n          // diagram.__trtd.showNodeRemarkTips(e, node);\r\n      },\r\n      contextMenu: $(go.Adornment),\r\n      mouseLeave: function(e, node) {\r\n        if(!node.containingGroup) return;\r\n        var it = node.containingGroup.findSubGraphParts().iterator;\r\n        while (it.next()) {\r\n            var n = it.value;\r\n            if(n.data.category == \"autoText\"){\r\n                // if(n.data.order == node.data.order+1){\r\n                //     locateNode = n;\r\n                // }\r\n                n.findObject(\"textBorder\").visible = false;\r\n                // n.areaBackground = null\r\n            }\r\n        }\r\n      },\r\n        selectionAdornmentTemplate: this.getNodeSelectionAdornmentTemplate(),\r\n        doubleClick: function (e, node){\r\n          e.diagram.__trtd.selectText(e, node)\r\n        },\r\n      },\r\n      this.binding,\r\n      $(go.Shape, \"Ellipse\",\r\n      { name:\"main\",fill: \"rgba(0,0,0,0)\", stroke: null, width: 300, height: 150 },\r\n        new go.Binding(\"fill\", \"fill\").makeTwoWay(),\r\n        // new go.Binding(\"fill\", \"fill\").makeTwoWay(),\r\n        new go.Binding(\"desiredSize\", \"desiredSize\", function(v, d) {\r\n            // console.log(\"vd m\", v, d )\r\n            // if(!v) return d.part.findObject(\"SHAPE\").measuredBounds.size;\r\n            return go.Size.parse(v)\r\n        }).makeTwoWay(function(v) {\r\n            return go.Size.stringify(v)\r\n        }),\r\n      ),\r\n      // $(go.Panel, \"Spot\",{\r\n      //   // isClipping: true,\r\n      //   background: \"green\",\r\n      //   position: new go.Point(0,0),\r\n      //   alignment: go.Spot.Center,\r\n      //   alignmentFocus: go.Spot.Center,\r\n      // },\r\n      // $(go.Shape, \"Rectangle\",{\r\n      //   alignment: go.Spot.Center,\r\n      //   alignmentFocus: go.Spot.Center,\r\n      // },\r\n      // new go.Binding(\"desiredSize\", \"desiredSize\", function(v) {\r\n      //     var size = new go.Size(v.width, v.height)\r\n      //     // console.log(\"v:\",v)\r\n      //     return size\r\n      //     }).ofObject(\"main\"),\r\n      // ),\r\n      this.getShiHalfEllipseShape(),\r\n      this.getXuHalfEllipseShape(),\r\n      // $(go.Adornment,\r\n      // { locationSpot: go.Spot.Top },\r\n      // $(go.Shape, \"BpmnActivityLoop\",\r\n      //   { width: 12, height: 12, cursor: \"pointer\",\r\n      //     background: \"transparent\", stroke: \"dodgerblue\", strokeWidth: 2 })\r\n      // ),\r\n      // ),\r\n\r\n      // $(go.Panel,\"Spot\",{\r\n      //   stretch: go.GraphObject.Uniform,\r\n      //   background:\"gray\",\r\n      //   // locationSpot: go.Spot.LeftCenter,\r\n      //   alignment: go.Spot.Right,\r\n      //   // strokeDashArray: [10, 5],\r\n      //   alignmentFocus: go.Spot.Left,\r\n      // },\r\n      //   this.getTailXuShape(),\r\n      //   this.getTailShiShape(),\r\n      // ),\r\n\r\n      // this.getUpHalfEllipseShape(),\r\n      this.getTextBuild()\r\n      )\r\n    }\r\n}\r\n\r\nmodule.exports = WaveNodeTemplate\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/nodeTemplate/waveTailNodeTemplate.js","var $ = go.GraphObject.make;\r\nvar Base = require('./base')\r\nvar helpers = require('../helpers/helpers.gojs')\r\nvar waveGroupLayout = require(\"../layout/waveGroupLayout\")\r\n\r\nclass WaveNodeTemplate extends Base {\r\n    constructor(options){\r\n        super(options)\r\n        // this.nodeProperties = {}\r\n        \r\n    }\r\n    \r\n    nodeResizeAdornmentTemplate () {\r\n        return $(go.Adornment, \"Spot\",\r\n            $(go.Placeholder), // takes size and position of adorned object\r\n            // $(go.Shape, \"Circle\", // left resize handle\r\n            //     {\r\n            //         alignment: go.Spot.TopLeft,\r\n            //         alignmentFocus: go.Spot.BottomRight,\r\n            //         cursor: \"col-resize\",\r\n            //         desiredSize: new go.Size(30, 30),\r\n            //         fill: \"lightblue\",\r\n            //         stroke: \"dodgerblue\"\r\n            //     }),\r\n            $(go.Shape, \"Circle\", // right resize handle\r\n                {\r\n                    alignment: go.Spot.BottomRight,\r\n                    alignmentFocus: go.Spot.TopLeft,\r\n                    cursor: \"col-resize\",\r\n                    desiredSize: new go.Size(30, 30),\r\n                    fill: \"lightblue\",\r\n                    stroke: \"dodgerblue\"\r\n                })\r\n        )\r\n    }\r\n\r\n    getNodeTemplate(){\r\n      var that = this\r\n      return $(go.Group, \"Spot\",\r\n      { selectionObjectName: \"PH\",\r\n        layerName: \"default\",\r\n        locationObjectName: \"PH\",\r\n        resizeObjectName:\"PH\",\r\n        // rotatable: false\r\n        resizable: true,\r\n        locationSpot: go.Spot.LeftCenter,\r\n        \r\n        // rotationSpot: go.Spot.LeftCenter,\r\n        alignment: go.Spot.Left,\r\n        alignmentFocus: go.Spot.Left,\r\n        // rotateObject:\"PH\",\r\n        click: (e, node)=>{\r\n          console.log(node.data)\r\n          var it = node.findSubGraphParts().iterator;\r\n          while (it.next()) {\r\n              var n = it.value;\r\n              if(n.data.category == \"autoText\"){\r\n                  n.findObject(\"textBorder\").visible = false;\r\n              }\r\n          }\r\n        },\r\n        selectionAdornmentTemplate: this.getNodeSelectionAdornmentTemplate(),\r\n        resizeAdornmentTemplate: that.nodeResizeAdornmentTemplate(),\r\n        mouseOver: function(e, node) {\r\n            console.log(\"group.......................\")\r\n            // if(node.data.hyperlink){\r\n            //   var textObj = node.findObject('TEXT');\r\n            //   textObj.isUnderline = true;\r\n            // }\r\n            // if(!node) return;\r\n            var it = node.findSubGraphParts().iterator;\r\n            while (it.next()) {\r\n                var n = it.value;\r\n                if(n.data.category == \"autoText\"&& (node.data.role == \"xuText\" || node.data.role == \"shiText\" )){\r\n                    // if(n.data.order == node.data.order){\r\n                        // locateNode = n;\r\n                        if(n.data.text == \"\"|| n.data.text.trim() == \"\"){\r\n                          n.findObject(\"textBorder\").visible = true;\r\n                        }\r\n                      //   n.areaBackground = \"mediumslateblue\"\r\n                    // }\r\n                }\r\n            }\r\n            // diagram.__trtd.showNodeRemarkTips(e, node);\r\n        },\r\n        mouseLeave: function(e, node) {\r\n          // if(!node) return;\r\n          var it = node.findSubGraphParts().iterator;\r\n          while (it.next()) {\r\n              var n = it.value;\r\n              if(n.data.category == \"autoText\"){\r\n                  // if(n.data.order == node.data.order+1){\r\n                  //     locateNode = n;\r\n                  // }\r\n                  n.findObject(\"textBorder\").visible = false;\r\n                  // n.areaBackground = null\r\n              }\r\n          }\r\n        },\r\n        rotatable: true,\r\n        contextMenu: $(go.Adornment),\r\n        // resizable: true,\r\n        // layoutConditions: go.Part.LayoutStandard,\r\n        layoutConditions: go.Part.LayoutStandard & go.Part.LayoutRemoved & go.Part.LayoutAdded & go.Part.LayoutNodeSized,\r\n        layout: new waveGroupLayout()\r\n        // layout: $(go.GridLayout,{\r\n        //   spacing: new go.Size(0,0),\r\n        //   cellSize: go.Size.parse(300,150),\r\n        //   arrangement:go.GridLayout.LeftToRight,\r\n        //   alignment: go.GridLayout.Location,\r\n        //   comparer:function(pa, pb) {\r\n        //     var da = pa.data;\r\n        //     var db = pb.data;\r\n        //     if (da.order < db.order) return -1;\r\n        //     if (da.order > db.order) return 1;\r\n        //     return 0;\r\n        //   }\r\n        // }) \r\n      },\r\n      new go.Binding(\"angle\", \"angle\").makeTwoWay(function(v,data){\r\n\r\n        return v;\r\n      }),\r\n      // new go.Binding(\"copyable\", \"copyable\").makeTwoWay(),\r\n      new go.Binding(\"isShadowed\", \"isShadowed\").makeTwoWay(),\r\n      new go.Binding(\"selectable\", \"selectable\").makeTwoWay(),\r\n      new go.Binding(\"movable\", \"movable\").makeTwoWay(),\r\n      new go.Binding(\"deletable\", \"deletable\").makeTwoWay(),\r\n        $(go.Shape,  // using a Shape instead of a Placeholder\r\n          { name: \"PH\",\r\n          figure:\"Rectangle\",\r\n          // rotationSpot: go.Spot.LeftCenter,\r\n          // spot1: new go.Spot(0.01, 0.01),\r\n          // spot2: new go.Spot(0.99, 0.99),\r\n            // width: 600,\r\n            // height:300,\r\n            alignment: new go.Spot(0,0.5),\r\n            // locationSpot: go.Spot.LeftCenter,\r\n            stroke:\"#9aa8b6\" ,\r\n            strokeWidth: 0,\r\n            minSize: new go.Size(300,70),\r\n            maxSize: new go.Size(NaN,400),\r\n            fill: \"rgba(88,0,0,0)\" },\r\n          new go.Binding(\"desiredSize\", \"desiredSize\", function(v,data){\r\n            return go.Size.parse(v)\r\n          }).makeTwoWay(go.Size.stringify)\r\n        ),\r\n        new go.Binding(\"location\", \"loc\", go.Point.parse).makeTwoWay(go.Point.stringify),\r\n        // $(go.Placeholder,    // represents the area of all member parts,\r\n        //   { padding: 0}\r\n        // ),  // with some extra padding around them\r\n\r\n        // $(go.TextBlock,  // group title\r\n        //   { font: \"Bold 12pt Sans-Serif\" },\r\n        //   new go.Binding(\"text\", \"key\")\r\n        // )\r\n      )\r\n    }\r\n}\r\n\r\nmodule.exports = WaveNodeTemplate\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/nodeTemplate/waveGroupNodeTemplate.js","var $ = go.GraphObject.make;\r\nvar Base = require('./base')\r\nvar helpers = require('../helpers/helpers.gojs')\r\nvar axisGroupLayout = require(\"../layout/axisGroupLayout\")\r\n\r\nclass AxisNodeTemplate extends Base {\r\n    constructor(options){\r\n        super(options)\r\n        // this.nodeProperties = {}\r\n        \r\n    }\r\n    \r\n    addFreeText(e, node){\r\n      console.log(\"eeeeeeeeeee\",e)\r\n      var data = {\"text\":\"自由文本\",\r\n      \"deletable\":true, \r\n      \"role\":\"freeText\",\r\n      \"fill\":\"black\", \r\n      \"iconVisible\":false, \r\n      \"locationSpot\":\"0.5 0.5 0 0\", \r\n      \"textAlign\":\"center\", \r\n      \"category\":\"autoText\", \r\n      \"loc\": go.Point.stringify(e.documentPoint), \r\n      \"movable\":true, \"group\":node.data.key\r\n     }\r\n     this.diagram.startTransaction(\"addFreeText\")\r\n     this.diagram.model.addNodeData(data);\r\n     this.diagram.commitTransaction(\"addFreeText\")\r\n    }\r\n\r\n    getNodeTemplate(){\r\n      var that = this\r\n      return $(go.Group, \"Auto\",\r\n      { selectionObjectName: \"PH\",\r\n      layerName: \"Background\",\r\n        locationObjectName: \"PH\",\r\n        locationSpot: go.Spot.BottomLeft ,\r\n        // rotationSpot: go.Spot.LeftCenter,\r\n        rotatable: false,\r\n        alignment: go.Spot.Left,\r\n        alignmentFocus: go.Spot.Left,\r\n        // rotateObject:\"PH\",\r\n        click: (e, node)=>{\r\n          console.log(node.data)\r\n          var it = node.findSubGraphParts().iterator;\r\n          while (it.next()) {\r\n              var n = it.value;\r\n              if(n.data.category == \"autoText\"){\r\n                  n.findObject(\"textBorder\").visible = false;\r\n              }\r\n          }\r\n          return;\r\n          if(node.isSelected) return;\r\n          var it = node.findSubGraphParts().iterator;\r\n          var n;\r\n          while (it.next()) {\r\n              n = it.value;\r\n              if(n.data.role == \"labelGroup\"){\r\n                  n.__trtdNode.switchBorder(n, true)\r\n                  break;\r\n              }\r\n          }\r\n          if(n){\r\n            setTimeout(function(){\r\n              n.__trtdNode.switchBorder(n, false)\r\n            },3000)\r\n          }\r\n        },\r\n        doubleClick: function (e, node){\r\n          that.addFreeText(e, node)\r\n        },\r\n        mouseOver: function(e, node) {\r\n          // if(node.data.hyperlink){\r\n          //   var textObj = node.findObject('TEXT');\r\n          //   textObj.isUnderline = true;\r\n          // }\r\n          // if(!node.containingGroup) return;\r\n          return;\r\n          if(that.diagram.selection.count >0) return;\r\n\r\n          var it = node.findSubGraphParts().iterator;\r\n          var n;\r\n          while (it.next()) {\r\n              n = it.value;\r\n              if(n.data.role == \"labelGroup\"){\r\n                  // n.__trtdNode.switchBorder(n, true)\r\n                  break;\r\n              }\r\n          }\r\n          // 给显示隐藏一个缓冲，以显得不那么突兀\r\n          if(n){\r\n            setTimeout(function(){\r\n              if(that.diagram.selection.count >0) return;\r\n              n.__trtdNode.switchBorder(n, true)\r\n              if(that.diagram.selection.count <=0) return;\r\n              setTimeout(function(){\r\n                n.__trtdNode.switchBorder(n, false)\r\n              },3000)\r\n            },100)\r\n          }\r\n          // diagram.__trtd.showNodeRemarkTips(e, node);\r\n      },\r\n      contextMenu: $(go.Adornment),\r\n      mouseLeave: function(e, node) {\r\n        // if(!node.containingGroup) return;\r\n        var it = node.findSubGraphParts().iterator;\r\n        while (it.next()) {\r\n            var n = it.value;\r\n            if(n.data.role == \"labelGroup\"){\r\n                // n.__trtdNode.switchBorder(n, false)\r\n                break;\r\n            }\r\n        }\r\n        if(n){\r\n          setTimeout(function(){\r\n            n.__trtdNode.switchBorder(n, false)\r\n          },3000)\r\n        }\r\n      },\r\n        // rotatable: true,\r\n        // resizable: true,\r\n        // layoutConditions: go.Part.LayoutStandard,\r\n        layoutConditions: go.Part.LayoutStandard & go.Part.LayoutRemoved & go.Part.LayoutAdded & go.Part.LayoutNodeSized,\r\n        layout: new axisGroupLayout()\r\n        // layout: $(go.GridLayout,{\r\n        //   spacing: new go.Size(0,0),\r\n        //   cellSize: go.Size.parse(300,150),\r\n        //   arrangement:go.GridLayout.LeftToRight,\r\n        //   alignment: go.GridLayout.Location,\r\n        //   comparer:function(pa, pb) {\r\n        //     var da = pa.data;\r\n        //     var db = pb.data;\r\n        //     if (da.order < db.order) return -1;\r\n        //     if (da.order > db.order) return 1;\r\n        //     return 0;\r\n        //   }\r\n        // }) \r\n      },\r\n      new go.Binding(\"angle\", \"angle\").makeTwoWay(function(v,data){\r\n\r\n        return v;\r\n      }),\r\n      new go.Binding(\"copyable\", \"copyable\").makeTwoWay(),\r\n        $(go.Shape,  // using a Shape instead of a Placeholder\r\n          { name: \"PH\",\r\n          figure:\"Rectangle\",\r\n          // rotationSpot: go.Spot.LeftCenter,\r\n          // spot1: new go.Spot(0.01, 0.01),\r\n          // spot2: new go.Spot(0.99, 0.99),\r\n            // width: 600,\r\n            // height:300,\r\n            stroke:\"yellow\" ,\r\n            strokeWidth:0,\r\n            fill: \"rgba(0,0,0,0)\" },\r\n          // new go.Binding(\"desiredSize\", \"desiredSize\", function(v,data){\r\n          //   return go.Size.parse(v)\r\n          //   console.log('1111111111111111111111')\r\n          //   // for(var i=0;i<)\r\n          //   var model = data.part.diagram.model;\r\n          //   var group = data.part.data;\r\n          //   var maxWidth = 0;\r\n          //   var maxHeight = 0;\r\n          //   for(var i = 0;i<model.nodeDataArray.length;i++){\r\n          //     if(group.key != model.nodeDataArray[i].group){\r\n          //       continue;\r\n          //     }\r\n          //     if(model.nodeDataArray[i].desiredSize){\r\n          //       console.log(model.nodeDataArray[i].desiredSize)\r\n          //       var size = go.Size.parse(model.nodeDataArray[i].desiredSize)\r\n          //       if(size.width > maxWidth){\r\n          //         maxWidth = size.width;\r\n          //       }\r\n          //       if(size.height > maxHeight){\r\n          //         maxHeight = size.height;\r\n          //       }\r\n          //     }\r\n          //   }\r\n          //   // var group = that.diagram.findNodeForKey(data.part.data.key)\r\n          //   // var git = group.memberParts;\r\n          //   // var maxWidth = 0;\r\n          //   // var maxHeight = 0;\r\n          //   // while (git.next()) {\r\n          //   //   var item = git.value;\r\n          //   //   console.log(\"item:\",item)\r\n          //   //   if(item.naturalBounds.width > maxWidth){\r\n          //   //     maxWidth = item.naturalBounds.width;\r\n          //   //   }\r\n          //   //   if(item.naturalBounds.height > maxHeight){\r\n          //   //     maxHeight = item.naturalBounds.height;\r\n          //   //   }\r\n          //   //   console.log(`maxHeight:${maxHeight},maxWidth:${maxWidth}`)\r\n      \r\n          //   // }           \r\n          //   return go.Size.parse(`${maxWidth+100} ${maxHeight}`)         \r\n          //   // group.diagram.model.setDataProperty(group.data, \"desiredSize\", `${maxWidth+100} ${maxHeight}`) \r\n          // }).makeTwoWay(go.Size.stringify)\r\n        ),\r\n        new go.Binding(\"location\", \"loc\", go.Point.parse).makeTwoWay(go.Point.stringify),\r\n        // $(go.Placeholder,    // represents the area of all member parts,\r\n        //   { padding: 0}\r\n        // ),  // with some extra padding around them\r\n\r\n        // $(go.TextBlock,  // group title\r\n        //   { font: \"Bold 12pt Sans-Serif\" },\r\n        //   new go.Binding(\"text\", \"key\")\r\n        // )\r\n      )\r\n    }\r\n}\r\n\r\nmodule.exports = AxisNodeTemplate\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/nodeTemplate/axisGroupNodeTemplate.js","    // define a custom grid layout that makes sure the length of each lane is the same\r\n    // and that each lane is broad enough to hold its subgraph\r\n    function AxisGroupLayout() {\r\n        go.Layout.call(this);\r\n        // go.GridLayout.call(this);\r\n        // this.cellSize = new go.Size(1, 1);\r\n        // this.wrappingColumn = Infinity;\r\n        // this.wrappingWidth = Infinity;\r\n        // this.spacing = new go.Size(0, 0);\r\n        // this.alignment = go.GridLayout.Position;\r\n      }\r\n      go.Diagram.inherit(AxisGroupLayout, go.Layout);\r\n  \r\n      function computeNewRotateLoc(rotateCenter,currentLoc, angle){\r\n          if(rotateCenter.equals(currentLoc)) return currentLoc\r\n        // 计算选择中心点到（0,0）点的偏移\r\n        var offset = new go.Point(0,0).subtract(rotateCenter.copy())\r\n        // 将原来的点偏移到相对0,0点的位置\r\n        var nodeOrigin = currentLoc.copy().offset(offset.x, offset.y)\r\n        var newNodeOrigin = nodeOrigin.rotate(angle)\r\n        var newNodeLoc = newNodeOrigin.copy().offset(-offset.x, -offset.y)\r\n        return newNodeLoc\r\n        // console.log(\"newNodeLoc\", newNodeLoc)\r\n      }\r\n      AxisGroupLayout.prototype.doLayout = function(coll) {\r\n          console.log(\"AxisGroupLayout.doLayout\")\r\n        var diagram = this.diagram;\r\n        diagram.startTransaction(\"AxisGroupLayout\")\r\n          // COLL might be a Diagram or a Group or some Iterable<Part>\r\n         \r\n        var it = this.collectParts(coll).iterator;\r\n        var collection = []\r\n        var dataCollection =[]\r\n        var group = this.group\r\n        // group.location = new go.Point(0,0)\r\n        var maxWidth = 0;\r\n        var maxHeight = 0;\r\n        var centerLine, axisX, axisY,axisXText, axisYText, themeText, labelText1,labelText2,labelText3,labelGroup,waveGroup\r\n        var shiTextColl = []\r\n        var xuTextColl = []\r\n        var oliveWidth\r\n        var oliveHeight\r\n        while (it.next()) {\r\n            var node = it.value;\r\n                // var item = git.value;\r\n            //   console.log(\"item:\",item)\r\n\r\n            dataCollection.push(node.data)\r\n            if(node.data.category == \"wave\"){\r\n                collection.push(node)\r\n            }\r\n            if(!(node instanceof go.Node)){\r\n              continue;\r\n            }\r\n            // 处理文本节点的位置和定位位置\r\n            // if(node.data.category == \"text\"){\r\n              if(node.data.role == \"axisYText\"){\r\n                axisYText = node;\r\n              }\r\n              if(node.data.role == \"axisXText\"){\r\n                axisXText = node;\r\n              }\r\n              if(node.data.role == \"themeText\"){\r\n                themeText = node;\r\n              }\r\n              if(node.data.role == \"shiText\"){\r\n                shiTextColl.push(node)\r\n              }\r\n              if(node.data.role == \"xuText\"){\r\n                xuTextColl.push(node)\r\n              }\r\n            // }\r\n            // 处理label文本节点的位置和定位位置\r\n            // if(node.data.category == \"iconText\"){\r\n              if(node.data.role == \"labelText1\"){\r\n                labelText1 = node;\r\n              }\r\n              if(node.data.role == \"labelText2\"){\r\n                labelText2 = node;\r\n              }\r\n              if(node.data.role == \"labelText3\"){\r\n                labelText3 = node;\r\n              }\r\n              if(node.data.role == \"labelGroup\"){\r\n                labelGroup = node;\r\n              }\r\n            // }\r\n\r\n              if(node.naturalBounds.width > maxWidth){\r\n                maxWidth = node.naturalBounds.width;\r\n              }\r\n              if(node.naturalBounds.height > maxHeight){\r\n                maxHeight = node.naturalBounds.height;\r\n              }\r\n            \r\n            \r\n            if (node.data.category == \"line\") {\r\n                if(node.data.role == \"centerLine\"){\r\n                  centerLine = node;\r\n                }\r\n            }\r\n            if (node.data.group == group.key) {\r\n            // position the node . . .\r\n                if(node.data.category == \"line\"){\r\n                    if(node.data.role == \"axisX\") {\r\n                      node.angle = 0;\r\n                      axisX = node\r\n                    };\r\n                    if(node.data.role == \"axisY\") {\r\n                      axisY = node\r\n                      node.angle = 270;\r\n                    }\r\n                    node.location = group.location.copy().offset(0,0)\r\n                    // node.angle = 270\r\n                }\r\n                if(node.data.category == \"waveGroup\"){\r\n                    waveGroup = node;\r\n                    // node.angle = group.angle\r\n                    oliveWidth = node.data.oliveWidth\r\n                    oliveHeight = node.data.oliveHeight\r\n                    node.location = group.location.copy().offset(0,0)\r\n                    // node.layout.isOngoing = true;\r\n                    // node.layout.isValidLayout = false;\r\n                    // collection.push(node)\r\n                }\r\n\r\n            }\r\n        }\r\n        console.log(`maxHeight:${maxHeight},maxWidth:${maxWidth}`)\r\n        // line.width = 2000\r\n        // line.height = 4\r\n        if(axisY) {\r\n          axisY.angle = 270;\r\n        }\r\n        if(axisX) {\r\n          axisX.angle = 0\r\n        }\r\n        if(waveGroup){\r\n          // var x1 = centerLine.width * Math.cos(Math.abs(360-centerLine.angle%360) / 180 * Math.PI)\r\n          console.log(`waveGroup.width:${waveGroup.width}`)\r\n          var x1 = waveGroup.resizeObject.width * Math.cos(Math.abs(360-waveGroup.angle%360) / 180 * Math.PI)\r\n          var y1 = 10\r\n          var x2 = waveGroup.resizeObject.width * Math.sin(Math.abs(360-waveGroup.angle%360)/ 180 * Math.PI)\r\n          var y2 = 10\r\n          // axisX.desiredSize = new go.Size(x1, y1)\r\n          // axisY.desiredSize = new go.Size(x2, y2)\r\n          this.diagram.model.setDataProperty(axisX.data, \"desiredSize\",`${x1} ${y1}`)\r\n          this.diagram.model.setDataProperty(axisY.data, \"desiredSize\",`${x2} ${y2}`)\r\n          group.width = x1\r\n          group.height = x2\r\n          var shiStroke = waveGroup.data.shiStroke\r\n          var xuStroke = waveGroup.data.xuStroke\r\n          var centerStroke = waveGroup.data.centerStroke || \"#3f5369\"\r\n\r\n          // this.diagram.model.setDataProperty(axisY.data, \"desiredSize\",axisY.width)\r\n        }\r\n\r\n        if(axisXText){\r\n          axisXText.location = group.location.copy().offset(x1, 0)\r\n          axisXText.locationSpot = go.Spot.Top\r\n        }\r\n        if(axisYText){\r\n          axisYText.location = group.location.copy().offset(-10, -x2)\r\n          axisYText.locationSpot = go.Spot.Right\r\n        }\r\n        if(themeText){\r\n          // themeText.location = group.location.copy().offset(0, 0)\r\n          // themeText.locationSpot = new go.Spot(0.7,0,0,0)\r\n        }\r\n        // if(labelText1){\r\n        //   labelText1.location = group.location.copy().offset(0, -x2).offset(40,10)\r\n        // }\r\n        // if(labelText2){\r\n        //   labelText2.location = group.location.copy().offset(0, -x2).offset(40,80)\r\n        // }\r\n        // if(labelText3){\r\n        //   labelText3.location = group.location.copy().offset(0, -x2).offset(40,150)\r\n        // }\r\n        if(labelGroup){\r\n          var itl = labelGroup.findSubGraphParts().iterator;\r\n          while (itl.next()) {\r\n            var n = itl.value;\r\n            if(n.data.role == \"labelText1\"){\r\n              labelText1 = n\r\n            }\r\n            if(n.data.role == \"labelText2\"){\r\n              labelText2 = n\r\n            }\r\n            if(n.data.role == \"labelText3\"){\r\n              labelText3 = n\r\n            }\r\n          }\r\n          if(waveGroup){\r\n            waveGroup.labelText1 = labelText1\r\n            waveGroup.labelText2 = labelText2\r\n            waveGroup.labelText3 = labelText3\r\n          }\r\n          // var tmp1 = group.location.copy().offset(0, -x2).offset(30,0)\r\n          // labelGroup.location = tmp1\r\n          // labelGroup.diagram.model.setDataProperty(labelGroup.data,\"loc\",go.Point.stringify(tmp1))\r\n          // setTimeout(()=>{\r\n          //   diagram.startTransaction(\"labelGroup\");\r\n          //   labelGroup.layout.isOngoing = true;\r\n          //   labelGroup.layout.isValidLayout = false;\r\n          //   diagram.commitTransaction(\"labelGroup\");\r\n          // },350)\r\n          // labelGroup.location = group.location.copy().offset(0, -x2).offset(40,10)\r\n        }\r\n        if(shiStroke && labelText1){\r\n          this.diagram.model.setDataProperty(labelText1.data, \"fill\",shiStroke)\r\n        }\r\n        if(xuStroke && labelText2){\r\n          this.diagram.model.setDataProperty(labelText2.data, \"fill\",xuStroke)\r\n        }\r\n        if(centerStroke && labelText3){\r\n          this.diagram.model.setDataProperty(labelText3.data, \"fill\",centerStroke)\r\n        }\r\n        // collection.sort(function(a,b){\r\n        //     return a.data.order > b.data.order\r\n        // })\r\n        // shiTextColl.sort(function(a,b){\r\n        //     return a.data.order > b.data.order\r\n        // })\r\n        // xuTextColl.sort(function(a,b){\r\n        //     return a.data.order > b.data.order\r\n        // })\r\n        // for(var i=0;i<xuTextColl.length;i++){\r\n        //   xuTextColl[i].location = computeNewRotateLoc(collection[i].location, collection[i].location.copy().offset(collection[i].width/2,collection[i].height/2),collection[i].angle)\r\n        // }\r\n        // collection.forEach(function(obj){\r\n        //     obj.location = group.location.copy().offset(300*(obj.data.order-1),0)\r\n        //     // obj.location = new go.Point(300*(obj.data.order-1),0)\r\n        //     // obj.\r\n        //     // var group = a.findNodeDataForKey(m.group)\r\n        //     obj.location = computeNewRotateLoc(group.location, obj.location, obj.angle)\r\n        // })\r\n        go.Layout.prototype.doLayout.call(this, coll);\r\n        diagram.commitTransaction(\"AxisGroupLayout\");\r\n        // diagram.updateAllTargetBindings()\r\n        return;\r\n        // return;\r\n        // var diagram = this.diagram;\r\n        if (diagram === null) return;\r\n        diagram.startTransaction(\"PoolLayout\");\r\n        // make sure all of the Group Shapes are big enough\r\n        // var minsize = computeMinPoolSize();\r\n        // diagram.findTopLevelGroups().each(function(lane) {\r\n        //   if (!(lane instanceof go.Group)) return;\r\n        //   var shape = lane.selectionObject;\r\n        //   if (shape !== null) {  // change the desiredSize to be big enough in both directions\r\n        //     var sz = computeLaneSize(lane);\r\n        //     shape.width = (!isNaN(shape.width)) ? Math.max(shape.width, sz.width) : sz.width;\r\n        //     shape.height = (isNaN(shape.height) ? minsize.height : Math.max(shape.height, minsize.height));\r\n        //     var cell = lane.resizeCellSize;\r\n        //     if (!isNaN(shape.width) && !isNaN(cell.width) && cell.width > 0) shape.width = Math.ceil(shape.width / cell.width) * cell.width;\r\n        //     if (!isNaN(shape.height) && !isNaN(cell.height) && cell.height > 0) shape.height = Math.ceil(shape.height / cell.height) * cell.height;\r\n        //   }\r\n        // });\r\n        // now do all of the usual stuff, according to whatever properties have been set on this GridLayout\r\n        go.GridLayout.prototype.doLayout.call(this, coll);\r\n        diagram.commitTransaction(\"PoolLayout\");\r\n      };\r\n      // end PoolLayout class\r\n\r\n      module.exports = AxisGroupLayout\n\n\n// WEBPACK FOOTER //\n// ./src/layout/axisGroupLayout.js","var $ = go.GraphObject.make;\r\nvar Base = require('./base')\r\nvar helpers = require('../helpers/helpers.gojs')\r\n  \r\nclass IconTextTemplate extends Base {\r\n    constructor(options){\r\n        super(options)\r\n        // this.nodeProperties = {}\r\n        \r\n    }\r\n\r\n    makeGeo(data, shape, options) {\r\n      // this is much more efficient than calling go.GraphObject.make:\r\n      var {radiusX=150,radiusY=100} = data\r\n      var geo =  new go.Geometry()\r\n        .add(new go.PathFigure(0, 0)  // start point\r\n          .add(new go.PathSegment(go.PathSegment.SvgArc,\r\n          radiusX*2,0,radiusX, radiusY,0,1,options.clockwiseFlag?1:0\r\n              )\r\n            )\r\n          )\r\n          geo.defaultStretch = go.GraphObject.Fill;\r\n          return geo;\r\n    }\r\n\r\n    getShiHalfEllipseShape(){\r\n      return $(go.Shape, {name:\"XU\", stroke: \"red\", fill:\"rgba(0,66,0,0)\",\r\n        // background: \"yellow\",\r\n        stretch: go.GraphObject.Uniform,\r\n        alignment: go.Spot.Bottom,\r\n        alignmentFocus: go.Spot.Bottom,\r\n        // row:1, column:0,margin:0\r\n      },\r\n        // new go.Binding(\"alignment\",\"\",function(data, shape){\r\n        //   if(data.flip){\r\n        //     return go.Spot.Top\r\n        //   }\r\n        //   return go.Spot.Bottom\r\n        // }),\r\n        // new go.Binding(\"alignmentFocus\",\"\",function(data, shape){\r\n        //   if(data.flip){\r\n        //     return go.Spot.Top\r\n        //   }\r\n        //   return go.Spot.Bottom\r\n        // }),\r\n          new go.Binding(\"geometry\", \"\", (data, shape)=>{\r\n            var clockwiseFlag = 0;\r\n            if(data.order%2 == 0){\r\n              data.flip = true;\r\n            }\r\n            if(data.flip){\r\n              clockwiseFlag = 1;\r\n            }\r\n            return this.makeGeo(data, shape, {clockwiseFlag:clockwiseFlag})\r\n          }),\r\n          new go.Binding(\"desiredSize\", \"desiredSize\", function(v) {\r\n                var size = new go.Size(v.width, v.height/2)\r\n                // console.log(\"v:\",v)\r\n                return size\r\n            }).ofObject(\"main\")\r\n        )\r\n    }\r\n    getXuHalfEllipseShape(){\r\n      return $(go.Shape, {name:\"SHI\", stroke: \"blue\", fill:\"rgba(0,66,0,0)\",\r\n        // background: \"gray\",\r\n        stretch: go.GraphObject.Uniform,\r\n        alignment: go.Spot.Bottom,\r\n        strokeDashArray: [5, 5],\r\n        alignmentFocus: go.Spot.Bottom,\r\n        // row:1, column:0,margin:0\r\n      },\r\n          // new go.Binding(\"alignment\",\"\",function(data, shape){\r\n          //   if(data.flip){\r\n          //     return go.Spot.Top\r\n          //   }\r\n          //   return go.Spot.Bottom\r\n          // }),\r\n          // new go.Binding(\"alignmentFocus\",\"\",function(data, shape){\r\n          //   if(data.flip){\r\n          //     return go.Spot.Top\r\n          //   }\r\n          //   return go.Spot.Bottom\r\n          // }),\r\n          new go.Binding(\"geometry\", \"\", (data, shape)=>{\r\n            var clockwiseFlag = 1;\r\n            if(data.order%2 == 0){\r\n              data.flip = true;\r\n            }\r\n            if(data.flip){\r\n              clockwiseFlag = 0;\r\n            }\r\n            return this.makeGeo(data, shape, {clockwiseFlag:clockwiseFlag})\r\n          }),\r\n          new go.Binding(\"desiredSize\", \"desiredSize\", function(v) {\r\n                var size = new go.Size(v.width, v.height/2)\r\n                // console.log(\"v:\",v)\r\n                return size\r\n            }).ofObject(\"main\")\r\n        )\r\n    }\r\n    getTextBuild(){\r\n      return $(go.TextBlock, {\r\n              name: \"TEXT\",\r\n              alignment: new go.Spot(0.5, 0.4),\r\n              font: \"bold 18px 幼圆\",\r\n              editable: true,\r\n              // flip:go.GraphObject.FlipHorizontal,\r\n              //margin: 3, editable: true,\r\n              \r\n              stroke: \"black\",\r\n              isMultiline: true,\r\n              overflow: go.TextBlock.OverflowClip,\r\n              wrap: go.TextBlock.WrapDesiredSize,\r\n              textAlign: \"center\",\r\n              spacingAbove: 4,\r\n              spacingBelow: 4,\r\n              portId: \"TEXT\",\r\n              stretch: go.GraphObject.Uniform\r\n          },\r\n          new go.Binding(\"textAlign\", \"textAlign\", function(v) {\r\n              return ['start', 'center', 'end'].indexOf(v)>-1 ? v : \"center\";\r\n          }).makeTwoWay(),\r\n          new go.Binding(\"spacingAbove\", \"spacingline\", function(v) {\r\n              return helpers.tdTransToNum(v, 4);\r\n          }).makeTwoWay(),\r\n          new go.Binding(\"spacingBelow\", \"spacingline\", function(v) {\r\n              return helpers.tdTransToNum(v, 4);\r\n          }).makeTwoWay(),\r\n          new go.Binding(\"width\", \"width\", function(v) {\r\n              return v-30;\r\n          }).ofObject(\"main\"),\r\n          // new go.Binding(\"height\", \"height\", function (v) {\r\n          //   return v;\r\n          // }).ofObject(\"SHAPE\"),\r\n          new go.Binding(\"text\", \"text\").makeTwoWay(),\r\n          new go.Binding(\"stroke\", \"textStroke\").makeTwoWay(),\r\n          new go.Binding(\"font\", \"font\").makeTwoWay()\r\n      )\r\n    }\r\n    getNodeTemplate(){\r\n      return $(go.Node,\"Spot\",{\r\n        locationObjectName: \"TEXT\",\r\n        movable: true,\r\n        resizable: true,\r\n        resizeObjectName: \"TEXT\",\r\n        selectionObjectName:\"TEXT\",\r\n        // rotatable: false,\r\n        layoutConditions: go.Part.LayoutStandard & go.Part.LayoutRemoved & go.Part.LayoutAdded & go.Part.LayoutNodeSized,\r\n        locationSpot: go.Spot.LeftCenter,\r\n        click: (e, node)=>{\r\n          console.log(node.data)\r\n        },\r\n        doubleClick: function (e, node){\r\n          e.diagram.__trtd.selectText(e, node)\r\n        },\r\n        resizeAdornmentTemplate:  // specify what resize handles there are and how they look\r\n        $(go.Adornment, \"Spot\",\r\n          $(go.Placeholder),  // takes size and position of adorned object\r\n          // $(go.Shape, \"Circle\",  // left resize handle\r\n          //   { alignment: go.Spot.Left, cursor: \"col-resize\",\r\n          //     desiredSize: new go.Size(9, 9), fill: \"lightblue\", stroke: \"dodgerblue\" }),\r\n          $(go.Shape, \"Circle\",  // right resize handle\r\n            { alignment: go.Spot.Right, cursor: \"col-resize\",\r\n              desiredSize: new go.Size(9, 9), fill: \"lightblue\", stroke: \"dodgerblue\" }),\r\n          // $(go.TextBlock, // show the width as text\r\n          //   { alignment: go.Spot.Top, alignmentFocus: new go.Spot(0.5, 1, 0, -2),\r\n          //     stroke: \"dodgerblue\" },\r\n          //   new go.Binding(\"text\", \"adornedObject\",\r\n          //                  function(shp) { return shp.naturalBounds.width.toFixed(0); })\r\n          //       .ofObject())\r\n        ),\r\n      },\r\n      new go.Binding(\"movable\", \"movable\").makeTwoWay(),\r\n      new go.Binding(\"deletable\", \"deletable\").makeTwoWay(),\r\n      // $(go.TextBlock,{\r\n      //   name:\"label\",\r\n      //   // height:30,\r\n        \r\n      //   alignment: go.Spot.Center,\r\n      //   verticalAlignment: go.Spot.Center,\r\n      //   // isMultiline: false,\r\n      //   overflow: go.TextBlock.OverflowEllipsis,\r\n      //   // overflow: go.TextBlock.OverflowClip,\r\n      //   // wrap: go.TextBlock.WrapDesiredSize,\r\n      //   wrap: go.TextBlock.wrap,\r\n      //   stretch: go.GraphObject.Fill,\r\n      //   maxLines: 1,\r\n      //   stroke: \"black\",\r\n      //   editable: true,\r\n      //   textAlign: \"start\",\r\n      //   font: \"18px 'Microsoft YaHei'\"\r\n      // },\r\n      // new go.Binding(\"text\", \"label\").makeTwoWay(),\r\n      // ),\r\n      $(go.TextBlock,{\r\n        name:\"TEXT\",\r\n        width:200, height:30,\r\n        maxSize: new go.Size(NaN, 70),\r\n        minSize: new go.Size(NaN, 70),\r\n        alignment: go.Spot.Center,\r\n        verticalAlignment: go.Spot.Center,\r\n        isMultiline: false,\r\n        overflow: go.TextBlock.OverflowEllipsis,\r\n        // overflow: go.TextBlock.OverflowClip,\r\n        // wrap: go.TextBlock.WrapDesiredSize,\r\n        // wrap: go.TextBlock.wrap,\r\n        stretch: go.GraphObject.Fill,\r\n        maxLines: 5,\r\n        stroke: \"black\",\r\n        editable: true,\r\n        textAlign: \"start\",\r\n        font: \"18px 'Microsoft YaHei'\"\r\n      },\r\n      new go.Binding(\"text\", \"text\").makeTwoWay(),\r\n      new go.Binding(\"width\", \"width\", function(v) {\r\n          //alert(v);\r\n          return v;\r\n      }).makeTwoWay(function(v) {\r\n          return v;\r\n      }),\r\n      new go.Binding(\"height\", \"height\", function(v) {\r\n          //alert(v);\r\n          return v;\r\n      }).makeTwoWay(function(v) {\r\n          return v;\r\n      }),\r\n      ),\r\n      $(go.Panel,\"Vertical\",\r\n        {alignment: go.Spot.Left,\r\n        alignmentFocus: go.Spot.Right,\r\n        },\r\n        $(go.Shape,{\r\n          name:\"ICON\",\r\n          width:16,\r\n          height:16,\r\n          click: function(e){\r\n            console.log(\"icon click\")\r\n          },\r\n          figure:\"Diamond\",\r\n          fill:\"red\",\r\n          strokeWidth:0,\r\n          margin: 3\r\n        },\r\n\r\n        new go.Binding(\"location\", \"loc\", go.Point.parse).makeTwoWay(go.Point.stringify),\r\n        new go.Binding(\"figure\", \"figure\").makeTwoWay(),\r\n        new go.Binding(\"fill\", \"fill\", function(v, obj) {\r\n          return v\r\n      }).makeTwoWay(),\r\n        new go.Binding(\"height\", \"height\", function(v) {\r\n            if(!v) v=30\r\n            return v*2/3;\r\n        }).ofObject(\"label\"),\r\n        new go.Binding(\"width\", \"height\", function(v) {\r\n          if(!v) v=30\r\n            return v*2/3;\r\n        }).ofObject(\"label\"),\r\n        ),\r\n      )\r\n      \r\n      // this.binding,\r\n      // $(go.Shape, \"Ellipse\",\r\n      // { name:\"main\",fill: \"lightgreen\", stroke: null, width: 300, height: 150 },\r\n      //   new go.Binding(\"desiredSize\", \"desiredSize\", function(v, d) {\r\n      //       // console.log(\"vd m\", v, d )\r\n      //       // if(!v) return d.part.findObject(\"SHAPE\").measuredBounds.size;\r\n      //       return go.Size.parse(v)\r\n      //   }).makeTwoWay(function(v) {\r\n      //       return go.Size.stringify(v)\r\n      //   }),\r\n      // ),\r\n      // this.getShiHalfEllipseShape(),\r\n      // this.getXuHalfEllipseShape(),\r\n\r\n      // // this.getUpHalfEllipseShape(),\r\n      // this.getTextBuild()\r\n      )\r\n    }\r\n}\r\n\r\nmodule.exports = IconTextTemplate\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/nodeTemplate/iconTextNodeTemplate.js","var $ = go.GraphObject.make;\nvar Base = require('./base')\nvar helpers = require('../helpers/helpers.gojs')\n  \nclass AutoTextTemplate extends Base {\n    constructor(options){\n        super(options)\n        // this.nodeProperties = {}\n        \n    }\n\n    clearBorder(node){\n        if(node.data.showBorder){\n            // if(node.data.text == \"\"){\n                node.findObject(\"textBorder\").visible = false;\n            // }\n        }\n    }\n\n    \n    makeGeo(data, shape, options) {\n      // this is much more efficient than calling go.GraphObject.make:\n      var {radiusX=150,radiusY=100} = data\n      var geo =  new go.Geometry()\n        .add(new go.PathFigure(0, 0)  // start point\n          .add(new go.PathSegment(go.PathSegment.SvgArc,\n          radiusX*2,0,radiusX, radiusY,0,1,options.clockwiseFlag?1:0\n              )\n            )\n          )\n          geo.defaultStretch = go.GraphObject.Fill;\n          return geo;\n    }\n    getNodeTemplate(){\n       var properties = {\n          figure: \"Rectangle\",\n          fill: \"rgba(0,0,0,0)\",\n          strokeWidth: 1,\n          stroke: \"rgba(0,0,0,0)\",\n          fontSize: 15,\n          font: \"sans-serif\"\n      };\n      var that = this\n      var diagram = this.diagram\n      return $(go.Node, \"Spot\", {\n              \"_controlExpand\": true,\n              __trtdNode: that,\n              layerName: \"Foreground\",\n              zOrder: 10,\n              movable: true,\n            //   copyable: false,\n              visible: true,\n              locationSpot: go.Spot.Center,\n              resizeCellSize: new go.Size(10, 10),\n            //   locationObjectName: \"textBorder\",\n            //   selectionObjectName: \"textBorder\",\n              resizable: true,\n            //   selectable: false,\n            //   clickable: false,\n              // resizeObjectName: \"SHAPE\", // user can resize the Shape\n              rotatable: false,\n              location: new go.Point(0, 0),\n              //rotateObjectName: \"SHAPE\",  // rotate the Shape without rotating the label\n              // doubleClick: selectText,\n              toMaxLinks: 1,\n              mouseDrop: function(e, obj) {\n                var node = obj.part;\n                var selnode = e.diagram.selection.first();\n\n                   // 常变\n                   if(selnode.data.category == \"picGroup\" && selnode.data.role == \"cbian\" && node.data.role == \"centerText\"){\n                       var oliveNode = e.diagram.findNodeForKey(node.data.olive)\n                       if(!oliveNode) return;\n                    var it = selnode.findSubGraphParts().iterator;\n                    var deleteObjs = []\n                    var cbian = {}\n                    while (it.next()) {\n                        var n = it.value;\n                        if(n.data.category == \"autoText\"){\n                        if(n.data.locationSpot == \"0 0 0 0\"){\n                            cbian.shiText = n.data.text;\n                        }\n                        if(n.data.locationSpot == \"0 0.5 0 0\"){\n                            cbian.centerText = n.data.text;\n                        }\n                        if(n.data.locationSpot == \"0 1 0 0\"){\n                            cbian.xuText = n.data.text;\n                        }\n                        }\n                        deleteObjs.push(n.data)\n                    }\n                    e.diagram.startTransaction(\"mouseDrop\")\n                    // 删除总结图\n                    e.diagram.model.removeNodeDataCollection(deleteObjs)\n                    var backupSelnode = JSON.parse(JSON.stringify(selnode.data))\n                    e.diagram.model.removeNodeData(selnode.data)\n        \n                    // 添加新橄榄\n                    e.diagram.__trtd.addOlive(oliveNode, cbian)\n                    e.diagram.commitTransaction(\"mouseDrop\")\n                    return;\n                }\n\n            \n\n                // 互换要点文字,只有云盘里的文字可以互换\n                if(selnode.data.subRole == \"coreText\" && node.data.subRole == \"coreText\" || \n                    selnode.data.subRole == \"yunpanText\" && node.data.subRole == \"yunpanText\"){\n                    e.diagram.model.startTransaction(\"coreTextExchange\")\n                    var selOrderX = selnode.data.orderX\n                    var selOrderY = selnode.data.orderY\n                    var selDimKey = selnode.data.dimKey\n                    e.diagram.model.setDataProperty(selnode.data, \"orderX\", node.data.orderX)\n                    e.diagram.model.setDataProperty(selnode.data, \"orderY\", node.data.orderY)\n                    e.diagram.model.setDataProperty(selnode.data, \"dimKey\", node.data.dimKey)\n                    e.diagram.model.setDataProperty(node.data, \"orderX\", selOrderX)\n                    e.diagram.model.setDataProperty(node.data, \"orderY\", selOrderY)\n                    e.diagram.model.setDataProperty(node.data, \"dimKey\", selDimKey)\n                    e.diagram.model.commitTransaction(\"coreTextExchange\")\n                }\n\n                // 云盘互换维度\n                if(selnode.data.subRole == \"dimText\" && node.data.subRole == \"dimText\" && \n                    selnode.data.category == node.data.category){\n                        if(selnode.data.group!= node.data.group) return;\n                        if(!selnode.containingGroup) return;\n                        if(selnode.containingGroup.data.category != \"yunpanGroup\") return;\n                        if(!(selnode.data.dimX == node.data.dimX  || selnode.data.dimY == node.data.dimY )){\n                            return;\n                        }\n\n                        e.diagram.model.startTransaction(\"dimTextExchange\")\n                        var selOrderX = selnode.data.dimX\n                        var selOrderY = selnode.data.dimY\n                        var it = node.containingGroup.findSubGraphParts().iterator;\n                        var nodeCoreTexts = []\n                        var selnodeCoreTexts = []\n                        var yunnodeCoreTexts = []\n                        var yunselnodeCoreTexts = []\n                        var normDim = \"X\"\n                        if(selnode.data.dimX == 0){\n                            normDim  = \"Y\"\n                        }\n                        var selOrder = selnode.data[\"dim\"+normDim]\n                        var nodeOrder = node.data[\"dim\"+normDim]\n                        while (it.next()) {\n                            var n = it.value;\n                            if(n.data.subRole == \"yunpanText\"){\n                                if(n.data[\"order\"+normDim] == nodeOrder){\n                                    yunnodeCoreTexts.push(n)\n                                }\n                                if(n.data[\"order\"+normDim] == selOrder){\n                                    yunselnodeCoreTexts.push(n)\n                                }\n                            }\n                        }\n                        var tmpX,tmpY;\n                        for(var i=0;i<yunnodeCoreTexts.length;i++){\n                            e.diagram.model.setDataProperty(yunnodeCoreTexts[i].data, \"order\"+normDim, selOrder)\n                        }\n                        for(var i=0;i<yunselnodeCoreTexts.length;i++){\n                            e.diagram.model.setDataProperty(yunselnodeCoreTexts[i].data, \"order\"+normDim, nodeOrder)\n                        }\n                        e.diagram.model.setDataProperty(selnode.data, \"dim\"+normDim, nodeOrder)\n                        e.diagram.model.setDataProperty(node.data, \"dim\"+normDim, selOrder)\n                        e.diagram.model.commitTransaction(\"dimTextExchange\")\n                    return;\n                    }\n\n                // 互换维度\n                if(selnode.data.subRole == \"dimText\" && node.data.subRole == \"dimText\"){\n                    e.diagram.model.startTransaction(\"dimTextExchange\")\n                    var selOrderX = selnode.data.dimX\n                    var selOrderY = selnode.data.dimY\n                    var it = node.containingGroup.findSubGraphParts().iterator;\n                    var nodeCoreTexts = []\n                    var selnodeCoreTexts = []\n                    var yunnodeCoreTexts = []\n                    var yunselnodeCoreTexts = []\n                    var normDim = \"X\"\n                    if(selnode.data.dimX == 0){\n                        normDim  = \"Y\"\n                    }\n                    while (it.next()) {\n                        var n = it.value;\n                        if(n.data.dimKey == node.data.key){\n                            nodeCoreTexts.push(n)\n                        }\n                        if(n.data.dimKey == selnode.data.key){\n                            selnodeCoreTexts.push(n)\n                        }\n                        if(n.data.subRole == \"yunpanText\"){\n                            if(n.data[\"order\"+normDim] == node.data[\"order\"+normDim]){\n                                yunnodeCoreTexts.push(n)\n                            }\n                            if(n.data[\"order\"+normDim] == selnode.data[\"order\"+normDim]){\n                                yunselnodeCoreTexts.push(n)\n                            }\n                        }\n                    }\n                    console.log(\"selnodeCoreTextsselnodeCoreTextsselnodeCoreTexts\",selnodeCoreTexts.length)\n                    var centerOrderX = (node.containingGroup.__yunPointsX.length+1)/2\n                    var centerOrderY = (node.containingGroup.__yunPointsY.length+1)/2\n\n                    if(selnode.data.dimX > centerOrderX){\n                        selnodeCoreTexts.sort(function(a,b){\n                            return a.data.orderX - b.data.orderX\n                        })\n                    }\n                    if(selnode.data.dimX == centerOrderX){\n                        if(selnode.data.dimY > centerOrderY){\n                            selnodeCoreTexts.sort(function(a,b){\n                                return a.data.orderY - b.data.orderY\n                            })\n                        }else{\n                            selnodeCoreTexts.sort(function(a,b){\n                                return b.data.orderY -a.data.orderY\n                            })\n                        }\n                    }\n                    if(selnode.data.dimX < centerOrderX){\n                        selnodeCoreTexts.sort(function(a,b){\n                            return  b.data.orderX - a.data.orderX\n                        })\n                    }\n\n                    if(node.data.dimX > centerOrderX){\n                        nodeCoreTexts.sort(function(a,b){\n                            return a.data.orderX - b.data.orderX\n                        })\n                    }\n                    if(node.data.dimX == centerOrderX){\n                        if(node.data.dimY > centerOrderY){\n                            nodeCoreTexts.sort(function(a,b){\n                                return a.data.orderY - b.data.orderY\n                            })\n                        }else{\n                            nodeCoreTexts.sort(function(a,b){\n                                return b.data.orderY -a.data.orderY\n                            })\n                        }\n                    }\n                    if(node.data.dimX < centerOrderX){\n                        nodeCoreTexts.sort(function(a,b){\n                            return  b.data.orderX - a.data.orderX\n                        })\n                    }\n\n                    var tmpX,tmpY;\n                    for(var i=0;i<selnodeCoreTexts.length;i++){\n                        tmpX = selnodeCoreTexts[i].data.orderX;\n                        tmpY = selnodeCoreTexts[i].data.orderY;\n                        e.diagram.model.setDataProperty(selnodeCoreTexts[i].data, \"orderX\", nodeCoreTexts[i].data.orderX)\n                        e.diagram.model.setDataProperty(selnodeCoreTexts[i].data, \"orderY\", nodeCoreTexts[i].data.orderY)\n                        e.diagram.model.setDataProperty(nodeCoreTexts[i].data, \"orderX\", tmpX)\n                        e.diagram.model.setDataProperty(nodeCoreTexts[i].data, \"orderY\", tmpY)\n                    }\n                    e.diagram.model.setDataProperty(selnode.data, \"dimX\", node.data.dimX)\n                    e.diagram.model.setDataProperty(selnode.data, \"dimY\", node.data.dimY)\n                    e.diagram.model.setDataProperty(node.data, \"dimX\", selOrderX)\n                    e.diagram.model.setDataProperty(node.data, \"dimY\", selOrderY)\n                    e.diagram.model.commitTransaction(\"dimTextExchange\")\n                }\n\n\n                \n\n                if (selnode.data.category != \"wave\") {\n                    return;\n                }\n                if(node.data.role != \"centerText\"){\n                    return;\n                }\n                if(!node){\n                  // node.containingGroup.layout.isValidLayout = false\n                  return;\n                }\n                if(selnode.data.group != obj.data.group){\n                  return;\n                }\n                e.diagram.startTransaction(\"mouseDrop\")\n                selnode.__oldOrder = selnode.data.order\n                e.diagram.model.setDataProperty(selnode.data, \"order\",node.data.order+0.5)\n                var xuText = e.diagram.model.findNodeDataForKey(selnode.data.xuText)\n                var shiText = e.diagram.model.findNodeDataForKey(selnode.data.shiText)\n                e.diagram.model.setDataProperty(shiText, \"order\",node.data.order+0.5)\n                e.diagram.model.setDataProperty(xuText, \"order\",node.data.order+0.5)\n                // node.containingGroup.layout.isValidLayout = false\n                e.diagram.commitTransaction(\"mouseDrop\")\n              },\n              mouseDragEnter: function(e, obj) {\n                var node = obj.part;\n                var selnode = e.diagram.selection.first();\n                if(!selnode) return;\n                if(selnode.data.subRole == \"coreText\" && node.data.subRole == \"coreText\" || \n                selnode.data.subRole == \"yunpanText\" && node.data.subRole == \"yunpanText\"){\n                    selnode.areaBackground = null\n                    node.areaBackground = \"RGB(107,208,137)\"\n                }\n                if(selnode.data.subRole == \"dimText\" && node.data.subRole == \"dimText\"){\n                    selnode.areaBackground = null\n                    node.areaBackground = \"RGB(107,208,137)\"\n                }\n\n                if(node.data.role == \"centerText\"){\n                    node.layerName = \"Background\"\n                }\n                // if (!(selnode instanceof go.Node)  || selnode.data.role != \"freeText\"  || selnode.category != \"autoText\" ||selnode.data.subRole != \"coreText\") {\n                //     return;\n                // }\n\n\n\n                // //var sat = node.selectionAdornmentTemplate;\n                // //var adorn = sat.copy();\n                // //adorn.adornedObject = node;\n                // //node.addAdornment(\"dragEnter\", adorn);\n    \n                // //if (!mayWorkFor(selnode, node)) return;\n                // var shape = node.findObject(\"SHAPE\");\n                // if (shape) {\n                //     shape._prevFill = shape.fill; // remember the original brush\n                //     shape.fill = \"darkred\";\n                // }\n    \n            },\n            mouseDragLeave: function(e, obj) {\n                var node = obj.part;\n                var selnode = e.diagram.selection.first();\n                // var shape = node.findObject(\"SHAPE\");\n                if(selnode.data.subRole == \"coreText\" && node.data.subRole == \"coreText\"|| \n                selnode.data.subRole == \"yunpanText\" && node.data.subRole == \"yunpanText\"){\n                    node.areaBackground = null\n                }\n                if(selnode.data.subRole == \"dimText\" && node.data.subRole == \"dimText\"){\n                    node.areaBackground = null\n                }\n                if(node.data.role == \"centerText\"){\n                    node.layerName = \"Foreground\"\n                }\n                //node.removeAdornment(\"dragEnter\");\n            },\n              selectionChanged: (node)=>{\n                console.log(\"selectionChanged\",node)\n\n                if(node.data.category != \"autoText\" || node.data.orderX ==null \n                || node.data.orderY ==null || node.data.role != \"freeText\" || (node.data.subRole !=\"coreText\"&& node.data.subRole !=\"yunpanText\")){\n                    return;\n                }\n\n                if( !node.containingGroup || (node.containingGroup.data.category != \"yunGroup\" && node.containingGroup.data.category != \"yunpanGroup\")){\n                    return;\n                }\n\n                if(node.containingGroup.data.beginSpark != \"line\"){\n                    return;\n                }\n                if(node.containingGroup.__yunPointsX && node.containingGroup.__yunPointsY){\n                    var centerOrderX = (node.containingGroup.__yunPointsX.length+1)/2\n                    var centerOrderY = (node.containingGroup.__yunPointsY.length+1)/2\n                    if(node.data.orderX == centerOrderX && node.data.orderY == centerOrderY){\n                        // 中心文字不参与变色\n                        return;\n                    }\n                    var orderX = node.data.orderX, orderY=node.data.orderY\n                    if(orderX == centerOrderX){\n                        orderX = orderY\n                    }\n                    if(orderY == centerOrderY){\n                        orderY = orderX\n                    }\n                    var shapeStrokes = node.containingGroup.data.shapeStrokes\n                    var showShape = node.containingGroup.data.showShape; // 是否显示矩形\n                    if(node.isSelected){\n                        if(node.containingGroup.data.snapType == \"between\"){\n                            var diff = Math.max(Math.abs(node.data.orderX - centerOrderX), Math.abs(node.data.orderY - centerOrderY))+1\n                        }else{\n                            var diff = Math.max(Math.abs(node.data.orderX - centerOrderX), Math.abs(node.data.orderY - centerOrderY))\n                        }\n                        console.log(\"diff:\",diff,node.data.orderX,node.data.orderY)\n                        var it = node.containingGroup.findSubGraphParts().iterator;\n\n                        console.log(\"showShape\",showShape)\n                        // var beginSpark = node.containingGroup.data.beginSpark; // 是否显示矩形\n                        var shape = null;\n                        while (it.next()) {\n                            var n = it.value;\n                            if(n.data.category == \"autoText\" && n.data.orderX !=null \n                            && n.data.orderY !=null && n.data.role == \"freeText\" ){\n                                n.findObject(\"textBorder\").visible = false;\n                                // if((Math.abs(n.data.orderX-centerOrderX) == Math.abs(orderX-centerOrderX) \n                                //     || Math.abs(n.data.orderX-centerOrderY) == Math.abs(orderY-centerOrderY)) \n                                // && !(Math.abs(n.data.orderX-centerOrderY) < Math.abs(orderY-centerOrderY) \n                                //     && Math.abs(n.data.orderX-centerOrderX) < Math.abs(orderX-centerOrderX))){\n                                //     n.areaBackground = \"red\"\n                                // }\n\n                                if(Math.abs(n.data.orderX-centerOrderX) == Math.abs(orderX-centerOrderX)\n                                && Math.abs(n.data.orderY-centerOrderY) <= Math.abs(orderY-centerOrderY)\n                                ||Math.abs(n.data.orderX-centerOrderX) <= Math.abs(orderX-centerOrderX)\n                                && Math.abs(n.data.orderY-centerOrderY) == Math.abs(orderY-centerOrderY)){\n                                    // n.findObject(\"place\").visible = true;\n                                    n.areaBackground = \"white\"\n                                    n.zOrder = 999\n                                }\n\n                            }\n                            if(n.data.category == \"shape\" && n.data.role == \"background\"){\n                                var obj = n.findObject(\"SHAPE\")\n                                // console.log(\"dfsdfsdfsdf\", obj)\n                                if(n.data.gridWidth == diff*2){\n                                    shape = obj;\n                                    // if(showShape){\n                                        // n.visible = true\n                                    // }\n                                    if(!obj.__prestroke){\n                                        obj.__prestroke = obj.stroke\n                                        obj.stroke = \"rgba(255,0,0,0.5)\"\n                                    }\n                                }else{\n                                    if(obj.__prestroke){\n                                        obj.stroke = obj.__prestroke\n                                        delete obj.__prestroke\n                                    }\n                                }\n                            }\n\n                        }\n                        if(!shape){\n                            if(node.containingGroup.data.snapType == \"between\"){\n                                var gridWidth = diff*2;\n                            }else{\n                                var gridWidth = diff*2\n                            }\n                            console.log(\"addShape\")\n                            node.diagram.model.startTransaction(\"addShape\");\n                            var shapeData = {\"deletable\":true, \n                            \"role\":\"background\", \n                            \"category\":\"shape\", \n                            // \"loc\":\"-1532.0268216255727 9.121091688849674\", \n                            \"loc\":go.Point.stringify(new go.Point(node.containingGroup.__yunPointsX[centerOrderX-1],node.containingGroup.__yunPointsY[centerOrderY-1])), \n                            \"movable\":true, \n                            \"group\":-19, \n                            \"key\": helpers.guid(), \n                            \"orderX\":10, \n                            \"orderY\":10, \n                            \"gridWidth\":gridWidth, \n                            \"stroke\":shapeStrokes[diff-1],\n                             \"visible\":true, \"strokeDashArray\":\"[0,0]\", \"strokeWidth\":3,\n                            //   \"desiredSize\":\"1263 1263\"\n                            };\n                             node.diagram.model.addNodeData(shapeData)\n                            node.diagram.model.commitTransaction(\"addShape\");\n                            setTimeout(()=>{\n                                var nod = node.diagram.findNodeForKey(shapeData.key)\n                                console.log(\"add shape add shape\")\n                                if(nod){\n                                    // nod.visible = true\n                                    var obj = nod.findObject(\"SHAPE\")\n                                    if(!obj.__prestroke){\n                                        obj.__prestroke = obj.stroke\n                                        obj.stroke = \"rgba(255,0,0,0.5)\"\n                                    }\n                                }\n                            },100)\n                        }\n                    }else{\n                        var it = node.containingGroup.findSubGraphParts().iterator;\n                        while (it.next()) {\n                            var n = it.value;\n                            if(n.data.category == \"autoText\" && n.data.orderX !=null \n                            && n.data.orderY !=null && n.data.role == \"freeText\" ){\n                                // n.findObject(\"textBorder\").visible = false;\n                                // if((n.data.orderX == orderX || n.data.orderY == orderY) \n                                // && !(n.data.orderX < orderX && n.data.orderY <orderY )){\n                                //     n.areaBackground = \"red\"\n                                // }\n\n                                if(Math.abs(n.data.orderX-centerOrderX) == Math.abs(orderX-centerOrderX)\n                                && Math.abs(n.data.orderY-centerOrderY) <= Math.abs(orderY-centerOrderY)\n                                ||Math.abs(n.data.orderX-centerOrderX) <= Math.abs(orderX-centerOrderX)\n                                && Math.abs(n.data.orderY-centerOrderY) == Math.abs(orderY-centerOrderY)){\n                                    // n.findObject(\"textBorder\").visible = true;\n                                    // n.findObject(\"place\").visible = false;\n                                    n.areaBackground = null\n                                    n.zOrder = NaN\n                                }\n\n                            }\n                            if(n.data.category == \"shape\" && n.data.role == \"background\"){\n                                var obj = n.findObject(\"SHAPE\")\n                                // console.log(\"dfsdfsdfsdf\", obj)\n                                if(!showShape){\n                                    // n.visible = false\n                                    obj.stroke = \"rgba(255,0,0,0)\"\n                                }\n                                if(n.data.gridWidth == diff*2){\n                                    if(!obj.__prestroke){\n                                        obj.__prestroke = obj.stroke\n                                        obj.stroke = \"rgba(255,0,0,0.7)\"\n\n                                    }\n                                }else{\n                                    \n                                    if(obj.__prestroke){\n                                        obj.stroke = obj.__prestroke\n                                        delete obj.__prestroke\n                                    }\n                                }\n                            }\n                        }\n                    }\n\n                }\n\n              },\n              click: (e, node)=>{\n                console.log(node.data)\n\n                // if(node.data.role == \"centerText\"){\n                //     var waveNode = node.diagram.findNodeForKey(node.data.olive)\n                //     node.layerName = \"Background\"\n                //     if(waveNode){\n                //         node.diagram.select(waveNode)\n                //     }\n                // }\n                // e.diagram.model.startTransaction(\"click\")\n                // e.diagram.model.setDataProperty(node.data, \"dimKey\", -124)\n                // e.diagram.model.setDataProperty(node.data,\"dimKey\", -73)\n                // e.diagram.model.setDataProperty(node.data,\"dimKey\", -141)\n                // e.diagram.model.setDataProperty(node.data,\"dimKey\", -74)\n\n\n\n\n                // e.diagram.model.setDataProperty(node.data, \"dimKey\", -124)\n                // e.diagram.model.setDataProperty(node.data,\"dimKey\", -141)\n                // e.diagram.model.setDataProperty(node.data,\"dimKey\", -158)\n                // e.diagram.model.setDataProperty(node.data,\"dimKey\", -176)\n                // e.diagram.model.setDataProperty(node.data,\"dimKey\", -73)\n                // e.diagram.model.setDataProperty(node.data,\"dimKey\", -74)\n                // e.diagram.model.setDataProperty(node.data,\"dimKey\", -175)\n                // e.diagram.model.setDataProperty(node.data,\"dimKey\", -177)\n                // node.data.dimKey = -124\n                // node.data.dimKey = -141\n                // node.data.dimKey = -158\n                // node.data.dimKey = -176\n                // node.data.dimKey = -73\n                // node.data.dimKey = -74\n                // node.data.dimKey = -175\n                // node.data.dimKey = -177\n                \n                // e.diagram.model.commitTransaction(\"click\")\n\n              },\n            //   rotateAdornmentTemplate:  // specify appearance of rotation handle\n            //   $(go.Adornment,\n            //     { locationSpot: go.Spot.Center },\n            //     $(go.Shape, \"BpmnActivityLoop\",\n            //       { width: 12, height: 12, cursor: \"pointer\",\n            //         background: \"transparent\", stroke: \"dodgerblue\", strokeWidth: 2 })\n            //     ),\n              mouseOver: function(e, node) {\n                // if(node.data.hyperlink){\n                //   var textObj = node.findObject('TEXT');\n                //   textObj.isUnderline = true;\n                // }\n                console.log(\"mouseOvermouseOvermouseOver\")\n                if(node.data.showBorder){\n                    if(node.data.text == \"\" && (node.data.role == \"xuText\" || node.data.role == \"shiText\" )){\n                        node.findObject(\"textBorder\").visible = true;\n                    }\n                }\n                if(node.data.role == \"centerText\"){\n                    node.layerName = \"Background\"\n                    // node.diagram.model.startTransaction(\"centerText\")\n                    // node.diagram.model.setDataProperty(node.data,\"layerName\", \"Background\")\n                    // node.diagram.model.commitTransaction(\"centerText\")\n                }\n                //   node.areaBackground = \"mediumslateblue\"\n                // }\n\n                // if(!node.containingGroup) return;\n                // var it = node.containingGroup.findSubGraphParts().iterator;\n                // while (it.next()) {\n                //     var n = it.value;\n                //     if(n.data.category == \"autoText\"){\n                //         if(n.data.order == node.data.order){\n                //             // locateNode = n;\n                //             n.areaBackground = \"mediumslateblue\"\n                //         }\n                //     }\n                // }\n                // diagram.__trtd.showNodeRemarkTips(e, node);\n                },\n            mouseLeave: function(e, node) {\n            //   if(node.data.text == \"\"){\n                if(node.data.showBorder){\n                    // if(node.data.text == \"\"){\n                        node.findObject(\"textBorder\").visible = false;\n                    // }\n                }\n                if(node.data.role == \"centerText\"){\n                    node.layerName = \"Foreground\"\n                    // node.diagram.model.startTransaction(\"centerText\")\n                    // node.diagram.model.setDataProperty(node.data,\"layerName\", \"Foreground\")\n                    // node.diagram.model.commitTransaction(\"centerText\")\n                }\n                // node.areaBackground = null\n            //   }\n            },\n            //   layoutConditions: go.Part.LayoutStandard,\n              layoutConditions: go.Part.LayoutStandard & go.Part.LayoutRemoved & go.Part.LayoutAdded & ~go.Part.LayoutNodeSized,\n              //layoutConditions:~go.Part.LayoutAdded,\n              // fromLinkable: true, toLinkable: true,\n              alignment: go.Spot.Center,\n              alignmentFocus: go.Spot.Center,\n              contextMenu: diagram.__trtd.getNodeContextMenu(),\n              resizeAdornmentTemplate:  // specify what resize handles there are and how they look\n              $(go.Adornment, \"Spot\",\n                $(go.Placeholder),  // takes size and position of adorned object\n                $(go.Shape, \"Circle\",  // left resize handle\n                  { alignment: go.Spot.Left, cursor: \"col-resize\",\n                    desiredSize: new go.Size(9, 9), fill: \"lightblue\", stroke: \"dodgerblue\" }),\n                $(go.Shape, \"Circle\",  // right resize handle\n                  { alignment: go.Spot.Right, cursor: \"col-resize\",\n                    desiredSize: new go.Size(9, 9), fill: \"lightblue\", stroke: \"dodgerblue\" }),\n              $(go.Shape, \"Circle\",  // right resize handle\n              { alignment: go.Spot.Top, cursor: \"col-resize\",\n              desiredSize: new go.Size(9, 9), fill: \"lightblue\", stroke: \"dodgerblue\" }),\n              $(go.Shape, \"Circle\",  // right resize handle\n              { alignment: go.Spot.Bottom, cursor: \"col-resize\",\n              desiredSize: new go.Size(9, 9), fill: \"lightblue\", stroke: \"dodgerblue\" }),\n                // $(go.TextBlock, // show the width as text\n                //   { alignment: go.Spot.Top, alignmentFocus: new go.Spot(0.5, 1, 0, -2),\n                //     stroke: \"dodgerblue\" },\n                //   new go.Binding(\"text\", \"adornedObject\",\n                //                  function(shp) { return shp.naturalBounds.width.toFixed(0); })\n                //       .ofObject())\n              ),\n              doubleClick: function (e, node){\n                  e.diagram.__trtd.selectText(e, node)\n              }\n\n              // selectionAdornmentTemplate: nodeSelectionAdornmentTemplate,\n          },\n          new go.Binding(\"locationSpot\", \"locationSpot\", function(v){\n              return go.Spot.parse(v)\n          }).makeTwoWay(function(v){\n              return go.Spot.stringify(v)\n          }),\n          new go.Binding(\"visible\", \"visible\").makeTwoWay(),\n          new go.Binding(\"deletable\", \"deletable\").makeTwoWay(),\n          new go.Binding(\"movable\", \"movable\").makeTwoWay(),\n          new go.Binding(\"rotatable\", \"rotatable\").makeTwoWay(),\n          new go.Binding(\"location\", \"loc\", go.Point.parse).makeTwoWay(go.Point.stringify),\n          new go.Binding(\"isShadowed\", \"isShadowed\").makeTwoWay(),\n          new go.Binding(\"angle\", \"angle\").makeTwoWay(),\n          new go.Binding(\"selectable\", \"selectable\").makeTwoWay(),\n          new go.Binding(\"copyable\", \"copyable\").makeTwoWay(),\n          new go.Binding(\"layerName\", \"layerName\", function(v, d) {\n              return v ? v : \"\";\n          }),\n          $(go.TextBlock, {\n                  name: \"TEXT\",\n                  alignment: new go.Spot(0, 0),\n                  font: \"18px 'Microsoft YaHei'\",\n                  editable: false,\n                //   areaBackground:\"gray\",\n                  //margin: 3, editable: true,\n                //   background:\"yellow\",\n                  stroke: \"black\",\n                  isMultiline: true,\n                  overflow: go.TextBlock.OverflowClip,\n                  wrap: go.TextBlock.WrapDesiredSize,\n                  textAlign: \"center\",\n                  verticalAlignment: go.Spot.Center,\n                  spacingAbove: 4,\n                  spacingBelow: 4,\n                  portId: \"TEXT\",\n                  margin:5,\n                  maxSize:new go.Size(600,NaN),\n                  minSize: new go.Size(10,10),\n                  stretch: go.GraphObject.UniformToFill,\n                  textEdited: function(textBlock,oldv,newv){\n\n                    // // if(textBlock.part.containingGroup.data.textAngle == \"horizontal\"){\n                    //   var centerText = textBlock.part.diagram.model.findNodeDataForKey(textBlock.part.data.centerText)\n                    //   if(centerText){\n                    //     console.log(\"centerTextcenterTextcenterTextcenterText\")\n                    var part = textBlock.part\n                    if(newv.trim() == \"\" &&(part.data.role == \"shiText\" || part.data.role == \"xuText\")){\n                        textBlock.part.diagram.model.startTransaction(\"text\")\n                        textBlock.part.diagram.model.setDataProperty(textBlock.part.data,\"nloc\", null)\n                        textBlock.part.diagram.model.commitTransaction(\"text\")\n                    }\n                    //   }\n                    // //   return;\n                    // // }\n                    // setTimeout(function(){\n                    //   console.log(\"textEditedtextEditedtextEdited\",textBlock.lineCount)\n                    //   if(!textBlock.text) return;\n                    //   if(textBlock.text && textBlock.text.trim() == \"\") return;\n                    //   if(textBlock.lineCount %2 != 0){\n                    //     if(newv[newv.length-1] == \"\\n\"){\n                    //       textBlock.text = newv.substring(0, newv.length-1)\n                    //       return;\n                    //     }\n                    //     textBlock.text = newv+\"\\n\"\n                    //   }\n                    // },100)\n                    \n                    // var enterCount = 0;\n                    if(textBlock.part.data.role && textBlock.part.data.role.indexOf(\"labelText\") > -1 ){\n                        textBlock.part.containingGroup.layout.isValidLayout = false\n                    }\n                    // for(var i=0;i<newv.length;i++){\n                      \n                    // }\n                    // textBlock.part.updateTargetBindings()\n    \n                    // if(textBlock.lineCount %2 != 0){\n                    //   if(newv[newv.length-1] == \"\\n\"){\n                    //     textBlock.text = newv.substring(0, newv.length-1)\n                    //     return;\n                    //   }\n                    //   textBlock.text = newv+\"\\n\"\n                    // }\n                  },\n              },\n              new go.Binding(\"areaBackground\", \"isHighlighted\", function(h, shape) {\n                // node.areaBackground = \"RGB(107,208,137)\"\n                if (h) return \"RGBA(146,208,80,0.5)\";\n                return null\n                var c = shape.part.data.color;\n                return c ? c : \"white\";\n              }).ofObject(),  // binding source is Node.isHighlighted\n              new go.Binding(\"background\", \"background\", function(v) {\n                  return v;\n              }).makeTwoWay(),\n              new go.Binding(\"areaBackground\", \"areaBackground\", function(v) {\n                  return v;\n              }).makeTwoWay(),\n              new go.Binding(\"textAlign\", \"textAlign\", function(v) {\n                  return v;\n              }).makeTwoWay(),\n              new go.Binding(\"spacingAbove\", \"spacingline\", function(v) {\n                  return helpers.tdTransToNum(v, 4);\n              }).makeTwoWay(),\n              new go.Binding(\"spacingBelow\", \"spacingline\", function(v) {\n                  return helpers.tdTransToNum(v, 4);\n              }).makeTwoWay(),\n              new go.Binding(\"maxSize\",\"\",function(data,d,m){\n                  // console.log(\"maxSize\",v,m,d)\n                  var width = NaN\n                  var height = NaN\n                  if(data.width){\n                      width = parseInt(data.width)\n                  }\n                  if(data.height){\n                      height = parseInt(data.height)\n                  }\n\n                  return new go.Size(width,height)\n              }),\n              new go.Binding(\"minSize\",\"minSize\",function(v){\n                  // console.log(\"maxSize\",v,m,d)\n\n                  return go.Size.parse(v)\n              }),\n              // new go.Binding(\"width\", \"width\", function(v) {\n              //     return v;\n              // }).makeTwoWay(),\n              // new go.Binding(\"height\", \"height\", function(v) {\n              //     return v;\n              // }).makeTwoWay(),\n              // new go.Binding(\"height\", \"height\", function (v) {\n              //   return v;\n              // }).ofObject(\"SHAPE\"),\n              new go.Binding(\"text\", \"text\").makeTwoWay(),\n              new go.Binding(\"stroke\", \"textStroke\").makeTwoWay(),\n              new go.Binding(\"font\", \"font\").makeTwoWay()\n          ),\n          $(go.Panel,\"Vertical\",\n            {alignment: go.Spot.Left,\n            alignmentFocus: go.Spot.Right,\n            },\n            $(go.Shape,{\n                name:\"ICON\",\n                width:16,\n                height:16,\n                visible: false,\n                click: function(e){\n                    console.log(\"icon click\")\n                },\n                figure:\"Circle\",\n                fill:\"red\",\n                strokeWidth:0,\n                margin: 3\n            },\n    \n            // new go.Binding(\"location\", \"loc\", go.Point.parse).makeTwoWay(go.Point.stringify),\n            new go.Binding(\"figure\", \"figure\").makeTwoWay(),\n            new go.Binding(\"visible\", \"iconVisible\").makeTwoWay(),\n            new go.Binding(\"fill\", \"fill\", function(v, obj) {\n                return v\n            }).makeTwoWay()\n            )\n        ),\n        $(go.Shape,\"Rectangle\",{\n            name: \"textBorder\",\n            stroke: \"green\",\n            strokeWidth: 3,\n            strokeDashArray: [10, 5],\n            visible:false,\n            fill:\"transparent\",\n            alignment: go.Spot.Center,\n            // alignmentFocus: go.Spot.Right,\n            width:100,\n            height:270, \n        },\n        new go.Binding(\"stroke\",\"textStroke\"),\n        new go.Binding(\"desiredSize\",\"\", function(v,d){\n            // console.log(\"vvvvvvvvvvvvv,\",v,d)\n            if(!helpers.checkPhone()){\n                // return new go.Size(Math.max(d.part.naturalBounds.width,100)-3, Math.max(d.part.naturalBounds.height,100)-3);\n                return new go.Size(d.part.naturalBounds.width-3, d.part.naturalBounds.height-3);\n            }\n            var olive = d.part.diagram.findNodeForKey(d.part.data.olive)\n            return new go.Size(olive.naturalBounds.width-3, olive.naturalBounds.height);\n            // return new go.Size(d.part.actualBounds.width-3, d.part.actualBounds.height-3);\n        })\n    ),\n        $(go.Shape,\"Circle\",{\n            name: \"place\",\n            stroke: \"red\",\n            strokeWidth: 1,\n            strokeDashArray: null,\n            visible:false,\n            fill:\"transparent\",\n            alignment: go.Spot.Center,\n            // alignmentFocus: go.Spot.Right,\n            width:50,\n            height:50, \n        },\n        new go.Binding(\"stroke\",\"placeStroke\"),\n        ),\n        $(\n            go.Shape,\n            {\n              geometryString: \"M540.5696 556.81024a81.8176 81.8176 0 0 1-53.0432-19.47648l-225.4848-191.52896a81.92 81.92 0 1 1 106.0864-124.86656l172.4416 146.47296 172.4416-146.47296a81.92 81.92 0 0 1 106.0864 124.86656l-225.4848 191.52896a81.7152 81.7152 0 0 1-53.0432 19.47648z m53.06368 246.23104l225.44384-191.52896a81.92 81.92 0 1 0-106.0864-124.84608l-172.40064 146.47296-172.48256-146.47296a81.92 81.92 0 1 0-106.04544 124.86656l225.52576 191.52896a81.7152 81.7152 0 0 0 53.00224 19.47648c18.88256 0 37.76512-6.49216 53.0432-19.49696z\",\n                // \"M16 0c-8.837 0-16 7.163-16 16s7.163 16 16 16 16-7.163 16-16-7.163-16-16-16zM16 29c-7.18 0-13-5.82-13-13s5.82-13 13-13 13 5.82 13 13-5.82 13-13 13zM12 8c-1.105 0-2 0.895-2 2s0.895 2 2 2h5.172l-8.586 8.586c-0.781 0.781-0.781 2.047 0 2.829 0.39 0.39 0.902 0.586 1.414 0.586s1.024-0.195 1.414-0.586l8.586-8.586v5.172c0 1.105 0.895 2 2 2s2-0.895 2-2v-12h-12z\",\n              visible: false,\n              name: \"figure\",\n              cursor: \"pointer\",\n              alignment: new go.Spot(1,0,5,-5),\n              alignmentFocus: go.Spot.RightCenter,\n              width: 14,\n              height: 14,\n              fill: \"green\",\n              toolTip: $(\n                \"ToolTip\",\n                $(\n                  go.Panel,\n                  \"Vertical\",\n                  $(\n                    go.Picture,\n                    new go.Binding(\"source\", \"src\", function(s) {\n                      return \"images/\" + s + \".png\";\n                    })\n                  ),\n                  $(go.TextBlock, {text:\"进入子盘\", margin: 3 })\n                )\n              ),\n              click: function(e) {\n                console.log(\"click figure\", e);\n                var node = e.targetObject.part;\n                e.diagram.__trtd.openFigure({\n                  figure: node.data.figure,\n                  title: node.data.text,\n                  key: node.data.key,\n                  node: node\n                });\n              }\n            },\n            // new go.Binding(\"geometry\", \"geo\", function(){\n    \n            // })),\n            new go.Binding(\"visible\", \"figure\", function(v) {\n              console.log(\"----------------------\");\n              if (v) {\n                return true;\n              } else {\n                return false;\n              }\n            })\n          )\n      )\n    }\n}\n\nmodule.exports = AutoTextTemplate\n\n\n\n// WEBPACK FOOTER //\n// ./src/nodeTemplate/autoTextNodeTemplate.js","var $ = go.GraphObject.make;\r\nvar Base = require('./base')\r\nvar helpers = require('../helpers/helpers.gojs')\r\n// var labelGroupLayout = require(\"../layout/labelGroupLayout\")\r\n\r\nclass LabelGroupNodeTemplate extends Base {\r\n    constructor(options){\r\n        super(options)\r\n        // this.nodeProperties = {}\r\n        \r\n    }\r\n    \r\n    switchBorder(group,flag){\r\n      // group.diagram.startTransaction()\r\n      // group.findObject(\"groupBorder\").opacity = flag?1:0;\r\n      group.findObject(\"groupBorder\").opacity = flag?1:0;\r\n      // group.diagram.commitTransaction()\r\n    }\r\n\r\n    hiddenAllText(group){\r\n      console.log(\"hiddenAllTexthiddenAllTexthiddenAllText\")\r\n      group.diagram.startTransaction()\r\n      var it = group.findSubGraphParts().iterator;\r\n      var oldStatus = null;\r\n      while (it.next()) {\r\n          var n = it.value;\r\n          if(oldStatus==null){\r\n            oldStatus = n.visible;\r\n          }\r\n          if(n.data.category == \"autoText\"){\r\n             group.diagram.model.setDataProperty(n.data,\"visible\", !oldStatus)\r\n          }\r\n      }\r\n      group.diagram.commitTransaction()\r\n    }\r\n\r\n    addLabelText(e, node){\r\n      \r\n      var data = {\"text\":\"说明：内容\",\r\n       \"deletable\":true, \r\n       \"fill\":\"black\", \r\n       \"iconVisible\":true, \r\n       \"locationSpot\":\"0 0 0 0\", \r\n       \"textAlign\":\"start\", \r\n       \"category\":\"autoText\", \r\n       \"loc\": `${node.location.x+30} ${node.location.y}`, \r\n       \"movable\":false, \"group\":node.data.key\r\n      }\r\n      this.diagram.startTransaction(\"addLabelText\")\r\n      this.diagram.model.addNodeData(data);\r\n      this.diagram.commitTransaction(\"addLabelText\")\r\n    }\r\n\r\n    getNodeTemplate(){\r\n      var that = this\r\n      return $(go.Group, \"Spot\",\r\n      { \r\n        __trtdNode: that,\r\n        // copyable: false,\r\n        // selectionObjectName: \"groupBorder\",\r\n        layerName: \"default\",\r\n        locationObjectName: \"groupBorder\",\r\n        zOrder: 5,\r\n        // margin:30,\r\n        // padding:30,\r\n        background:\"rgba(0,0,0,0)\",\r\n        rotatable: false,\r\n        minSize: new go.Size(200,100),\r\n        locationSpot: go.Spot.Center,\r\n        toolTip:  // define a tooltip for each node that displays the color as text\r\n        $(\"ToolTip\",\r\n          $(go.TextBlock, { margin: 4 },\r\n            new go.Binding(\"text\", \"\", function(data,p){\r\n              // console.log(\"tooltip:\",p,data)\r\n              return \"双击显示/隐藏\"\r\n            })\r\n          )\r\n        ),  // end of Adornment\r\n        // rotationSpot: go.Spot.LeftCenter,\r\n        // alignment: go.Spot.Left,\r\n        // alignmentFocus: go.Spot.Left,\r\n        // rotateObject:\"PH\",\r\n        click: (e, node)=>{\r\n          console.log(node.data)\r\n        },\r\n        selectable: true,\r\n        // selectionAdornmentTemplate: this.getNodeSelectionAdornmentTemplate(),\r\n        doubleClick: function (e, node){\r\n            // that.addLabelText(e, node)\r\n            that.hiddenAllText(node)\r\n            that.switchBorder(node, false)\r\n            // that.diagram.clearSelection();\r\n        },\r\n        // rotatable: true,\r\n        mouseOver: function(e, node) {\r\n          // console.log(\"211111\")\r\n          // if(node.data.hyperlink){\r\n          //   var textObj = node.findObject('TEXT');\r\n          //   textObj.isUnderline = true;\r\n          // }\r\n          // if(node.data.text == \"\"){\r\n            // if(group.findObject(\"groupBorder\").visible){\r\n              that.switchBorder(node, true)\r\n            // }\r\n            // node.background = \"rgba(125,125,125,0.01)\"\r\n          // }\r\n\r\n          if(!node.containingGroup) return;\r\n          var it = node.containingGroup.findSubGraphParts().iterator;\r\n          node.diagram.startTransaction()\r\n          while (it.next()) {\r\n              var n = it.value;\r\n              if(n.data.category == \"autoText\"){\r\n                  if(n.data.role && n.data.role.indexOf(\"labelText\")>-1){\r\n                      // locateNode = n;\r\n                      n.diagram.model.setDataProperty(n.data, \"minSize\", \"120 30\")\r\n                      // n.areaBackground = \"mediumslateblue\"\r\n                  }\r\n              }\r\n          }\r\n          node.diagram.commitTransaction()\r\n          // diagram.__trtd.showNodeRemarkTips(e, node);\r\n          },\r\n      mouseLeave: function(e, node) {\r\n        // if(node.data.text == \"\"){\r\n          // node.background = \"rgba(0,0,0,0)\"\r\n          that.switchBorder(node, false)\r\n        // }\r\n      },\r\n        // resizable: true,\r\n        // layoutConditions: go.Part.LayoutStandard,\r\n        layoutConditions: go.Part.LayoutStandard & go.Part.LayoutRemoved & go.Part.LayoutAdded & go.Part.LayoutNodeSized,\r\n        // layout: new waveGroupLayout()\r\n        layout: $(go.GridLayout,{\r\n          isInitial: false,\r\n          isOngoing: false,\r\n          spacing: new go.Size(0,0),\r\n          cellSize: go.Size.parse(300,150),\r\n          arrangement:go.GridLayout.LeftToRight,\r\n          wrappingColumn:1,\r\n          isRealtime: false,\r\n          alignment: go.GridLayout.Location,\r\n          // comparer:function(pa, pb) {\r\n          //   var da = pa.data;\r\n          //   var db = pb.data;\r\n          //   if (da.order < db.order) return -1;\r\n          //   if (da.order > db.order) return 1;\r\n          //   return 0;\r\n          // }\r\n        }) \r\n      },\r\n      new go.Binding(\"location\", \"loc\", function(v){\r\n        // console.log(\"go.Point.parsego.Point.parsego.Point.parse\")\r\n        return go.Point.parse(v)\r\n      }).makeTwoWay(go.Point.stringify),\r\n      new go.Binding(\"angle\", \"angle\").makeTwoWay(function(v,data){\r\n\r\n        return v;\r\n      }),\r\n      new go.Binding(\"isShadowed\", \"isShadowed\").makeTwoWay(),\r\n      new go.Binding(\"copyable\", \"copyable\").makeTwoWay(),\r\n      new go.Binding(\"movable\", \"movable\").makeTwoWay(),\r\n      new go.Binding(\"deletable\", \"deletable\").makeTwoWay(),\r\n\r\n      $(go.Placeholder,    // represents the area of all member parts,\r\n        { padding: 30,\r\n          alignment: go.Spot.Center,\r\n          // stroke: \"blue\",\r\n          // strokeWidth: 2,\r\n          name:\"placeholder\",\r\n        }\r\n      ),  // with some extra padding around them\r\n        // $(go.Shape,  // using a Shape instead of a Placeholder\r\n        //   { name: \"PH\",\r\n        //   figure:\"Rectangle\",\r\n        //   // rotationSpot: go.Spot.LeftCenter,\r\n        //   // spot1: new go.Spot(0.01, 0.01),\r\n        //   // spot2: new go.Spot(0.99, 0.99),\r\n        //   // areaBackground: \"red\",\r\n        //     // width: 600,\r\n        //     // height:300,\r\n        //     stroke:\"blue\" ,\r\n        //     strokeWidth: 2,\r\n        //     fill: \"rgba(0,0,0,0)\" \r\n        //   },\r\n        // ),\r\n\r\n        // new go.Binding(\"width\", \"width\").ofObject(\"\")\r\n        $(go.Shape,\"Rectangle\",{\r\n          name: \"groupBorder\",\r\n          stroke: \"green\",\r\n          strokeWidth: 3,\r\n          strokeDashArray: [10, 5],\r\n          visible:true,\r\n          opacity: 0,\r\n          // margin:30,\r\n          fill:null,\r\n          alignment: go.Spot.Center,\r\n          alignmentFocus: go.Spot.Center,\r\n          // width:200,\r\n          // height:150, \r\n      },\r\n      // new go.Binding(\"width\",\"width\").ofObject(\"placeholder\"),\r\n      // new go.Binding(\"height\",\"height\").ofObject(\"placeholder\"),\r\n      new go.Binding(\"desiredSize\",\"\", function(v,d){\r\n          console.log(\"vvvvvvvvvvvvv,\",v,d)\r\n          // if(d.part.placeholder.measuredBounds.width < 200){\r\n          //   return new go.Size(200,200)\r\n          // }\r\n          // var width = Math.max(d.part.placeholder.measuredBounds.width, 200)\r\n          // var height = Math.max(d.part.placeholder.measuredBounds.height, 200)\r\n          return new go.Size(d.part.measuredBounds.width-3, d.part.measuredBounds.height-3);\r\n          // return d.part.placeholder.actualBounds;\r\n      }).ofObject(\"\")\r\n    )\r\n\r\n        // $(go.TextBlock,  // group title\r\n        //   { font: \"Bold 12pt Sans-Serif\" },\r\n        //   new go.Binding(\"text\", \"key\")\r\n        // )\r\n      )\r\n    }\r\n}\r\n\r\nmodule.exports = LabelGroupNodeTemplate\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/nodeTemplate/labelGroupNodeTemplate.js","\r\n\r\nvar $ = go.GraphObject.make;\r\nvar Base = require('./base')\r\nvar helpers = require('../helpers/helpers.gojs')\r\n  \r\n\r\nclass PicNodeTemplate extends Base {\r\n    constructor(options){\r\n        super(options)\r\n        // this.nodeProperties = {}\r\n        \r\n    }\r\n\r\n  \r\n\r\n    getNodeSelectionAdornmentTemplate(){\r\n      return  $(go.Adornment, \"Spot\",\r\n                $(go.Panel, \"Auto\",\r\n                    $(go.Shape, { fill: null, stroke: \"dodgerblue\", strokeWidth: 1 }),\r\n                    $(go.Placeholder) // this represents the selected Node\r\n\r\n                ),\r\n                //$(\"TreeExpanderButton\",\r\n                $(go.Panel, \"Vertical\", {\r\n                        name: \"ButtonIcon1\",\r\n                        alignment: new go.Spot(0, 1, -20, 20),\r\n                        alignmentFocus: go.Spot.Center,\r\n                        width: 60,\r\n                        height: 60,\r\n                        isActionable: true,\r\n                        // click: interactions.expandCollapse // this function is defined below\r\n                    },\r\n\r\n                    $(go.Shape, \"Circle\", {\r\n                        fill: \"rgba(1,1,1,0)\",\r\n                        strokeWidth: 0,\r\n                        stroke: \"green\",\r\n                        width: 50,\r\n                        height: 50\r\n                    })\r\n\r\n                )\r\n            ); // end Adornment;\r\n    }\r\n\r\n    nodeResizeAdornmentTemplate () {\r\n      return $(go.Adornment, \"Spot\",\r\n          $(go.Placeholder), // takes size and position of adorned object\r\n          $(go.Shape, \"Circle\", // left resize handle\r\n              {\r\n                  alignment: go.Spot.TopLeft,\r\n                  alignmentFocus: go.Spot.BottomRight,\r\n                  cursor: \"col-resize\",\r\n                  desiredSize: new go.Size(30, 30),\r\n                  fill: \"lightblue\",\r\n                  stroke: \"dodgerblue\"\r\n              }),\r\n          $(go.Shape, \"Circle\", // right resize handle\r\n              {\r\n                  alignment: go.Spot.BottomRight,\r\n                  alignmentFocus: go.Spot.TopLeft,\r\n                  cursor: \"col-resize\",\r\n                  desiredSize: new go.Size(30, 30),\r\n                  fill: \"lightblue\",\r\n                  stroke: \"dodgerblue\"\r\n              })\r\n      )\r\n  }\r\n\r\n    getNodeTemplate(){\r\n      var diagram = this.diagram\r\n      var that = this;\r\n      return $(go.Node, \"Spot\", {\r\n        name: \"NODE\",\r\n        \"_controlExpand\": true,\r\n        layerName: \"Background\",\r\n        locationSpot: go.Spot.BottomLeft,\r\n        resizeCellSize: new go.Size(10, 10),\r\n        locationObjectName: \"SHAPE\",\r\n        resizable: true,\r\n        resizeObjectName: \"SHAPE\", // user can resize the Shape\r\n        rotatable: true,\r\n        rotateObjectName: \"SHAPE\", // rotate the Shape without rotating the label\r\n        doubleClick: function (e, node) {\r\n            // interactions.selectText(e, node)\r\n            console.log(node.data)\r\n            if(node.diagram.__trtd.nodeDoubleClickListener){\r\n                node.diagram.__trtd.nodeDoubleClickListener(node)\r\n            }\r\n            \r\n        },\r\n        click: function(e, node) {\r\n            console.log(node.data)\r\n            if(node.diagram.__trtd.nodeClickListener){\r\n                node.diagram.__trtd.nodeClickListener(node)\r\n            }\r\n            // showNodeToolBar(e,node);\r\n        },\r\n        selectable: true,\r\n        movable: true,\r\n        angle: 0,\r\n        //toMaxLinks: 1,\r\n        layoutConditions: go.Part.LayoutStandard,\r\n        //layoutConditions:~go.Part.LayoutAdded,\r\n        // fromLinkable: true, toLinkable: true,\r\n        alignment: go.Spot.Center,\r\n        alignmentFocus: go.Spot.Center,\r\n        resizeAdornmentTemplate: that.nodeResizeAdornmentTemplate(),\r\n        //rotateAdornmentTemplate: nodeRotateAdornmentTemplate,\r\n        contextMenu: diagram.__trtd.nodeContextMenu,\r\n        selectionAdornmentTemplate: that.getNodeSelectionAdornmentTemplate(),\r\n        contextMenu: $(go.Adornment),\r\n      },\r\n        new go.Binding(\"location\", \"loc\", go.Point.parse).makeTwoWay(go.Point.stringify),\r\n        new go.Binding(\"isShadowed\", \"isShadowed\").makeTwoWay(),\r\n        new go.Binding(\"selectable\", \"selectable\").makeTwoWay(),\r\n        new go.Binding(\"movable\", \"movable\").makeTwoWay(),\r\n        new go.Binding(\"resizable\", \"resizable\").makeTwoWay(),\r\n        new go.Binding(\"deletable\", \"deletable\").makeTwoWay(),\r\n        new go.Binding(\"layerName\", \"layerName\", function(v, d) {\r\n            return v ? v : \"\";\r\n        }).makeTwoWay(function(v) {\r\n            return v;\r\n        }),\r\n        // $(go.TextBlock, // the text label\r\n        //     new go.Binding(\"text\", \"text\")),\r\n        $(go.Picture, // the icon showing the logo\r\n            // You should set the desiredSize (or width and height)\r\n            // whenever you know what size the Picture should be.\r\n   \r\n            { name: \"SHAPE\" ,\r\n            width: 400,\r\n            height:400,\r\n        }, {\r\n                successFunction: function(pict, evt) {\r\n                    if ((!pict.width || !pict.height) && (!pict.part.data.width || !pict.part.data.height)) {\r\n                        pict.width = pict.element.width;\r\n                        pict.height = pict.element.height;\r\n                    }\r\n                }\r\n            }, {\r\n                sourceCrossOrigin: function(pict) {\r\n                    return \"\";\r\n                }\r\n            },\r\n            new go.Binding(\"source\", \"picture\", function(v){\r\n                    \r\n                return v+\"?\"+Date.now()\r\n\r\n            }).makeTwoWay(function(v){\r\n                if(v){\r\n                    v = v.replace(/\\?.*$/g,\"\")\r\n                    return v\r\n                }else{\r\n                    return \"\"\r\n                }\r\n            }),\r\n            new go.Binding(\"width\", \"width\", function(v, d) {\r\n                return v;\r\n            }).makeTwoWay(function(v) {\r\n                return v;\r\n            }),\r\n            new go.Binding(\"height\", \"height\", function(v, d) {\r\n                return v;\r\n            }).makeTwoWay(function(v) {\r\n                return v;\r\n            }),\r\n            new go.Binding(\"angle\", \"angle\").makeTwoWay(),\r\n            new go.Binding(\"opacity\", \"opacity\", function(v, d) {\r\n                return v ? parseFloat(v) : 1;\r\n            }).makeTwoWay(function(v) {\r\n                return v;\r\n            })\r\n        )\r\n      )\r\n    }\r\n}\r\n\r\nmodule.exports = PicNodeTemplate\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/nodeTemplate/picNodeTemplate.js","\r\n\r\nvar $ = go.GraphObject.make;\r\nvar Base = require('./base')\r\nvar helpers = require('../helpers/helpers.gojs')\r\n  \r\n\r\nclass PicGroupNodeTemplate extends Base {\r\n    constructor(options){\r\n        super(options)\r\n        // this.nodeProperties = {}\r\n        \r\n    }\r\n\r\n  \r\n\r\n    getNodeSelectionAdornmentTemplate(){\r\n      return  $(go.Adornment, \"Spot\",\r\n                $(go.Panel, \"Auto\",\r\n                    $(go.Shape, { fill: null, stroke: \"dodgerblue\", strokeWidth: 1 }),\r\n                    $(go.Placeholder) // this represents the selected Node\r\n\r\n                ),\r\n                //$(\"TreeExpanderButton\",\r\n                $(go.Panel, \"Vertical\", {\r\n                        name: \"ButtonIcon1\",\r\n                        alignment: new go.Spot(0, 1, -20, 20),\r\n                        alignmentFocus: go.Spot.Center,\r\n                        width: 60,\r\n                        height: 60,\r\n                        isActionable: true,\r\n                        // click: interactions.expandCollapse // this function is defined below\r\n                    },\r\n\r\n                    $(go.Shape, \"Circle\", {\r\n                        fill: \"rgba(1,1,1,0)\",\r\n                        strokeWidth: 0,\r\n                        stroke: \"green\",\r\n                        width: 50,\r\n                        height: 50\r\n                    })\r\n                )\r\n            ); // end Adornment;\r\n    }\r\n\r\n    nodeResizeAdornmentTemplate () {\r\n      return $(go.Adornment, \"Spot\",\r\n          $(go.Placeholder), // takes size and position of adorned object\r\n          $(go.Shape, \"Circle\", // left resize handle\r\n              {\r\n                  alignment: go.Spot.TopLeft,\r\n                  alignmentFocus: go.Spot.BottomRight,\r\n                  cursor: \"col-resize\",\r\n                  desiredSize: new go.Size(30, 30),\r\n                  fill: \"lightblue\",\r\n                  stroke: \"dodgerblue\"\r\n              }),\r\n          $(go.Shape, \"Circle\", // right resize handle\r\n              {\r\n                  alignment: go.Spot.BottomRight,\r\n                  alignmentFocus: go.Spot.TopLeft,\r\n                  cursor: \"col-resize\",\r\n                  desiredSize: new go.Size(30, 30),\r\n                  fill: \"lightblue\",\r\n                  stroke: \"dodgerblue\"\r\n              })\r\n      )\r\n  }\r\n\r\n  addFreeText(e, node){\r\n    console.log(\"eeeeeeeeeee\",e)\r\n    var data = {\"text\":\"总结文本\",\r\n    \"deletable\":true, \r\n    \"fill\":\"black\", \r\n    \"iconVisible\":false, \r\n    \"locationSpot\":\"0 0.5 0 0\", \r\n    \"textAlign\":\"left\", \r\n    \"category\":\"autoText\", \r\n    \"loc\": go.Point.stringify(e.documentPoint), \r\n    \"movable\":true, \"group\":node.data.key\r\n   }\r\n   this.diagram.startTransaction(\"addFreeText\")\r\n   this.diagram.model.addNodeData(data);\r\n   this.diagram.commitTransaction(\"addFreeText\")\r\n  }\r\n\r\n    getNodeTemplate(){\r\n      var diagram = this.diagram\r\n      var that = this;\r\n      return  $(go.Group, \"Auto\",\r\n      { \r\n        __trtdNode: that,\r\n        // selectionObjectName: \"groupBorder\",\r\n        layerName: \"default\",\r\n        locationObjectName: \"placeholder\",\r\n        zOrder: 5,\r\n        // margin:30,\r\n        // padding:30,\r\n        background:\"rgba(0,0,0,0)\",\r\n        rotatable: false,\r\n        // minSize: new go.Size(200,100),\r\n        locationSpot: go.Spot.BottomLeft,\r\n        click: (e, node)=>{\r\n          console.log(node.data)\r\n        },\r\n        layout: $(go.Layout),\r\n        doubleClick: function (e, node){\r\n            // that.addLabelText(e, node)\r\n            that.addFreeText(e, node)\r\n        },\r\n        contextMenu: $(go.Adornment),\r\n        layoutConditions: go.Part.LayoutStandard & go.Part.LayoutRemoved & go.Part.LayoutAdded & go.Part.LayoutNodeSized,\r\n\r\n      },\r\n      new go.Binding(\"location\", \"loc\", function(v){\r\n        // console.log(\"go.Point.parsego.Point.parsego.Point.parse\")\r\n        return go.Point.parse(v)\r\n      }).makeTwoWay(go.Point.stringify),\r\n      new go.Binding(\"angle\", \"angle\").makeTwoWay(function(v,data){\r\n\r\n        return v;\r\n      }),\r\n      new go.Binding(\"isShadowed\", \"isShadowed\").makeTwoWay(),\r\n      new go.Binding(\"selectable\", \"selectable\").makeTwoWay(),\r\n      new go.Binding(\"movable\", \"movable\").makeTwoWay(),\r\n      new go.Binding(\"deletable\", \"deletable\").makeTwoWay(),\r\n      new go.Binding(\"layerName\", \"layerName\").makeTwoWay(),\r\n\r\n      $(go.Placeholder,    // represents the area of all member parts,\r\n        { padding: 30,\r\n          alignment: go.Spot.Center,\r\n          name:\"placeholder\",\r\n        }\r\n      ),  // with some extra padding around them\r\n      )\r\n    }\r\n}\r\n\r\nmodule.exports = PicGroupNodeTemplate\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/nodeTemplate/picGroupNodeTemplate.js","var $ = go.GraphObject.make;\r\nvar Base = require('./base')\r\nvar helpers = require('../helpers/helpers.gojs')\r\nvar yunGroupLayout = require(\"../layout/yunGroupLayout\")\r\n\r\nclass YunNodeTemplate extends Base {\r\n    constructor(options){\r\n        super(options)\r\n        // this.nodeProperties = {}\r\n        this.defaultTextFont = \"20px 'Microsoft YaHei'\"\r\n        \r\n    }\r\n    \r\n\r\n    snapToGrid(data, node){\r\n\r\n      if(data.subRole == \"coreText\" || data.subRole == \"themeText\"){\r\n        return;\r\n      }\r\n      var p = go.Point.parse(data.loc)\r\n      if(node.__yunPointsX && node.__yunPointsY ){\r\n        if(p.x >= node.__yunPointsX[0] && p.x <= node.__yunPointsX[node.__yunPointsX.length-1] \r\n          && p.y >= node.__yunPointsY[node.__yunPointsY.length-1] && p.y <= node.__yunPointsY[0] ){\r\n            // 在画布格子范围内的位置才对齐网格\r\n            var minX=20000,minY=20000,tmp,orderX,orderY;\r\n            for(var i=0;i<node.__yunPointsX.length;i++){\r\n              tmp = Math.abs(p.x - node.__yunPointsX[i])\r\n              if(tmp< minX){\r\n                minX = tmp;\r\n                orderX = i+1;\r\n              }\r\n            }\r\n            for(var i=0;i<node.__yunPointsY.length;i++){\r\n              tmp = Math.abs(p.y - node.__yunPointsY[i])\r\n              if(tmp< minY){\r\n                minY = tmp;\r\n                orderY = i+1;\r\n              }\r\n            }\r\n\r\n            if(orderX!=null && orderY!=null){\r\n              // var x = node.__yunPointsX[orderX-1]\r\n              // var y = node.__yunPointsX[orderY-1]\r\n              // x = -1300\r\n              // y = -1300\r\n              // data.loc = \"-1688.105387366997 -121.19730986224602\"\r\n              data.orderX = orderX\r\n              data.orderY = orderY\r\n            }\r\n          }else{\r\n            delete data.orderX\r\n            delete data.orderY\r\n          }\r\n     }\r\n    }\r\n\r\n    addFreeText(e, node){\r\n      console.log(\"addFreeTextaddFreeText begin\",e)\r\n      var gridWidth = node.data.gridWidth\r\n      var p = e.documentPoint\r\n      var that = this;\r\n      var data = {\"text\":\"灵感\",\r\n      \"deletable\":true, \r\n      \"role\":\"freeText\",\r\n      \"fill\":\"black\", \r\n      \"iconVisible\":false, \r\n      \"locationSpot\":\"0.5 0.5 0 0\", \r\n      \"minSize\":`30 30`,\r\n      // \"width\":`${gridWidth-10}`,\r\n      font: that.defaultTextFont,\r\n      \"textAlign\":\"center\", \r\n      \"category\":\"autoText\", \r\n      \"loc\": go.Point.stringify(p), \r\n      \"movable\":true, \"group\":node.data.key\r\n     }\r\n    //  console.log()\r\n     \r\n\r\n      this.snapToGrid(data, node)\r\n     this.diagram.startTransaction(\"addFreeText\")\r\n     this.diagram.model.addNodeData(data);\r\n     this.diagram.commitTransaction(\"addFreeText\")\r\n     node.layout.isValidLayout = false\r\n     console.log(\"addFreeTextaddFreeText end\",e)\r\n    }\r\n\r\n    getNodeTemplate(){\r\n      var that = this\r\n      return $(go.Group, \"Auto\",\r\n      { selectionObjectName: \"PH\",\r\n      __trtdNode: that,\r\n      layerName: \"default\",\r\n      padding: 0,\r\n      margin: 0,\r\n      copyable: true,\r\n      zOrder: 15,\r\n        locationObjectName: \"PH\",\r\n        locationSpot: new go.Spot(0,1,0,-0),\r\n        // rotationSpot: go.Spot.LeftCenter,\r\n        rotatable: false,\r\n        alignment: go.Spot.Left,\r\n        alignmentFocus: go.Spot.Left,\r\n        // rotateObject:\"PH\",\r\n        click: (e, node)=>{\r\n          console.log(node.data)\r\n          var it = node.findSubGraphParts().iterator;\r\n          while (it.next()) {\r\n              var n = it.value;\r\n              if(n.data.category == \"autoText\"){\r\n                  n.findObject(\"textBorder\").visible = false;\r\n              }\r\n          }\r\n          node.layout.isValidLayout = false\r\n          return;\r\n          if(node.isSelected) return;\r\n          var it = node.findSubGraphParts().iterator;\r\n          var n;\r\n          while (it.next()) {\r\n              n = it.value;\r\n              if(n.data.role == \"labelGroup\"){\r\n                  n.__trtdNode.switchBorder(n, true)\r\n                  break;\r\n              }\r\n          }\r\n          if(n){\r\n            setTimeout(function(){\r\n              n.__trtdNode.switchBorder(n, false)\r\n            },3000)\r\n          }\r\n        },\r\n        doubleClick: function (e, node){\r\n          that.addFreeText(e, node)\r\n        },\r\n        mouseOver: function(e, node) {\r\n          // if(node.data.hyperlink){\r\n          //   var textObj = node.findObject('TEXT');\r\n          //   textObj.isUnderline = true;\r\n          // }\r\n          // if(!node.containingGroup) return;\r\n          return;\r\n          // diagram.__trtd.showNodeRemarkTips(e, node);\r\n      },\r\n      contextMenu: $(go.Adornment),\r\n      mouseLeave: function(e, node) {\r\n        // if(!node.containingGroup) return;\r\n        var it = node.findSubGraphParts().iterator;\r\n        while (it.next()) {\r\n            var n = it.value;\r\n            if(n.data.role == \"labelGroup\"){\r\n                // n.__trtdNode.switchBorder(n, false)\r\n                break;\r\n            }\r\n        }\r\n        // if(n){\r\n        //   setTimeout(function(){\r\n        //     n.__trtdNode.switchBorder(n, false)\r\n        //   },3000)\r\n        // }\r\n      },\r\n        // rotatable: true,\r\n        // resizable: true,\r\n        // layoutConditions: go.Part.LayoutStandard,\r\n        layoutConditions: go.Part.LayoutStandard & go.Part.LayoutRemoved & go.Part.LayoutAdded & go.Part.LayoutNodeSized,\r\n        layout: new yunGroupLayout()\r\n        // layout: $(go.GridLayout,{\r\n        //   spacing: new go.Size(0,0),\r\n        //   cellSize: go.Size.parse(300,150),\r\n        //   arrangement:go.GridLayout.LeftToRight,\r\n        //   alignment: go.GridLayout.Location,\r\n        //   comparer:function(pa, pb) {\r\n        //     var da = pa.data;\r\n        //     var db = pb.data;\r\n        //     if (da.order < db.order) return -1;\r\n        //     if (da.order > db.order) return 1;\r\n        //     return 0;\r\n        //   }\r\n        // }) \r\n      },\r\n      new go.Binding(\"deletable\", \"deletable\").makeTwoWay(function(v,data){\r\n        return v;\r\n      }),\r\n      new go.Binding(\"copyable\", \"copyable\").makeTwoWay(),\r\n      new go.Binding(\"angle\", \"angle\").makeTwoWay(function(v,data){\r\n        return v;\r\n      }),\r\n      new go.Binding(\"zOrder\", \"zOrder\").makeTwoWay(function(v,data){\r\n        return v;\r\n      }),\r\n      new go.Binding(\"locationSpot\", \"\", function(data){\r\n        // console.log(\"data:\",data)\r\n        return new go.Spot(0,1,data.gridWidth,-data.gridHeight)\r\n      }),\r\n        \r\n        $(go.Shape,  // using a Shape instead of a Placeholder\r\n          { name: \"PH\",\r\n          figure:\"Rectangle\",\r\n          // rotationSpot: go.Spot.LeftCenter,\r\n          // spot1: new go.Spot(0.01, 0.01),\r\n          // spot2: new go.Spot(0.99, 0.99),\r\n            // width: 600,\r\n            // height:300,\r\n            stroke:\"yellow\" ,\r\n            strokeWidth:0,\r\n            fill: \"rgba(0,0,255,0.0)\" },\r\n          // new go.Binding(\"desiredSize\", \"desiredSize\", function(v,data){\r\n          //   return go.Size.parse(v)\r\n          //   console.log('1111111111111111111111')\r\n          //   // for(var i=0;i<)\r\n          //   var model = data.part.diagram.model;\r\n          //   var group = data.part.data;\r\n          //   var maxWidth = 0;\r\n          //   var maxHeight = 0;\r\n          //   for(var i = 0;i<model.nodeDataArray.length;i++){\r\n          //     if(group.key != model.nodeDataArray[i].group){\r\n          //       continue;\r\n          //     }\r\n          //     if(model.nodeDataArray[i].desiredSize){\r\n          //       console.log(model.nodeDataArray[i].desiredSize)\r\n          //       var size = go.Size.parse(model.nodeDataArray[i].desiredSize)\r\n          //       if(size.width > maxWidth){\r\n          //         maxWidth = size.width;\r\n          //       }\r\n          //       if(size.height > maxHeight){\r\n          //         maxHeight = size.height;\r\n          //       }\r\n          //     }\r\n          //   }\r\n          //   // var group = that.diagram.findNodeForKey(data.part.data.key)\r\n          //   // var git = group.memberParts;\r\n          //   // var maxWidth = 0;\r\n          //   // var maxHeight = 0;\r\n          //   // while (git.next()) {\r\n          //   //   var item = git.value;\r\n          //   //   console.log(\"item:\",item)\r\n          //   //   if(item.naturalBounds.width > maxWidth){\r\n          //   //     maxWidth = item.naturalBounds.width;\r\n          //   //   }\r\n          //   //   if(item.naturalBounds.height > maxHeight){\r\n          //   //     maxHeight = item.naturalBounds.height;\r\n          //   //   }\r\n          //   //   console.log(`maxHeight:${maxHeight},maxWidth:${maxWidth}`)\r\n      \r\n          //   // }           \r\n          //   return go.Size.parse(`${maxWidth+100} ${maxHeight}`)         \r\n          //   // group.diagram.model.setDataProperty(group.data, \"desiredSize\", `${maxWidth+100} ${maxHeight}`) \r\n          // }).makeTwoWay(go.Size.stringify)\r\n        ),\r\n        new go.Binding(\"location\", \"loc\", go.Point.parse).makeTwoWay(go.Point.stringify),\r\n        // $(go.Placeholder,    // represents the area of all member parts,\r\n        //   { padding: 0}\r\n        // ),  // with some extra padding around them\r\n\r\n        // $(go.TextBlock,  // group title\r\n        //   { font: \"Bold 12pt Sans-Serif\" },\r\n        //   new go.Binding(\"text\", \"key\")\r\n        // )\r\n      )\r\n    }\r\n}\r\n\r\nmodule.exports = YunNodeTemplate\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/nodeTemplate/yunGroupNodeTemplate.js","    // define a custom grid layout that makes sure the length of each lane is the same\r\n    // and that each lane is broad enough to hold its subgraph\r\n    function YunGroupLayout() {\r\n        go.Layout.call(this);\r\n        // go.GridLayout.call(this);\r\n        // this.cellSize = new go.Size(1, 1);\r\n        // this.wrappingColumn = Infinity;\r\n        // this.wrappingWidth = Infinity;\r\n        // this.spacing = new go.Size(0, 0);\r\n        // this.alignment = go.GridLayout.Position;\r\n      }\r\n      go.Diagram.inherit(YunGroupLayout, go.Layout);\r\n  \r\n      function computeNewRotateLoc(rotateCenter,currentLoc, angle){\r\n          if(rotateCenter.equals(currentLoc)) return currentLoc\r\n        // 计算选择中心点到（0,0）点的偏移\r\n        var offset = new go.Point(0,0).subtract(rotateCenter.copy())\r\n        // 将原来的点偏移到相对0,0点的位置\r\n        var nodeOrigin = currentLoc.copy().offset(offset.x, offset.y)\r\n        var newNodeOrigin = nodeOrigin.rotate(angle)\r\n        var newNodeLoc = newNodeOrigin.copy().offset(-offset.x, -offset.y)\r\n        return newNodeLoc\r\n        // console.log(\"newNodeLoc\", newNodeLoc)\r\n      }\r\n      YunGroupLayout.prototype.doLayout = function(coll) {\r\n          console.log(\"YunGroupLayout.doLayout\")\r\n        var diagram = this.diagram;\r\n        diagram.startTransaction(\"YunGroupLayout\")\r\n          // COLL might be a Diagram or a Group or some Iterable<Part>\r\n         \r\n        var it = this.collectParts(coll).iterator;\r\n        var collection = []\r\n        var dataCollection =[]\r\n        var group = this.group\r\n        var gridWidth = group.data.gridWidth\r\n        var gridHeight = group.data.gridHeight\r\n        // group.location = new go.Point(0,0)\r\n        var maxWidth = 0;\r\n        var maxHeight = 0;\r\n        var centerLine, axisX, axisY,axisXText, axisYText, themeText, labelText1,labelText2,labelText3,labelGroup,waveGroup\r\n        var shiTextColl = []\r\n        var xuTextColl = []\r\n        var verticalLines = []\r\n        var horizontalLines = []\r\n        var freelLines = []\r\n        var allLines = []\r\n        var freeTexts = []\r\n        var shapeNodes = []\r\n        var snapType = group.data.snapType || \"grid\"\r\n        var showShape = group.data.showShape; // 是否显示矩形\r\n        var beginSpark = group.data.beginSpark; // 是否开始火花\r\n        var shapeStrokes = group.data.shapeStrokes; // 是否开始火花\r\n        var oliveWidth\r\n        var oliveHeight\r\n        while (it.next()) {\r\n            var node = it.value;\r\n                // var item = git.value;\r\n            //   console.log(\"item:\",item)\r\n\r\n            dataCollection.push(node.data)\r\n            if(node.data.category == \"wave\"){\r\n                collection.push(node)\r\n            }\r\n            if(!(node instanceof go.Node)){\r\n              continue;\r\n            }\r\n            \r\n            if(node.data.role == \"background\"){\r\n              shapeNodes.push(node)\r\n            }\r\n            // 处理文本节点的位置和定位位置\r\n            // if(node.data.category == \"text\"){\r\n              if(node.data.role == \"axisYText\"){\r\n                axisYText = node;\r\n              }\r\n              if(node.data.role == \"axisXText\"){\r\n                axisXText = node;\r\n              }\r\n              if(node.data.role == \"themeText\"){\r\n                themeText = node;\r\n              }\r\n              if(node.data.role == \"shiText\"){\r\n                shiTextColl.push(node)\r\n              }\r\n              if(node.data.role == \"xuText\"){\r\n                xuTextColl.push(node)\r\n              }\r\n            // }\r\n            // 处理label文本节点的位置和定位位置\r\n            // if(node.data.category == \"iconText\"){\r\n              if(node.data.role == \"labelText1\"){\r\n                labelText1 = node;\r\n              }\r\n              if(node.data.role == \"labelText2\"){\r\n                labelText2 = node;\r\n              }\r\n              if(node.data.role == \"labelText3\"){\r\n                labelText3 = node;\r\n              }\r\n              if(node.data.role == \"labelGroup\"){\r\n                labelGroup = node;\r\n              }\r\n            // }\r\n\r\n              if(node.naturalBounds.width > maxWidth){\r\n                maxWidth = node.naturalBounds.width;\r\n              }\r\n              if(node.naturalBounds.height > maxHeight){\r\n                maxHeight = node.naturalBounds.height;\r\n              }\r\n            \r\n            \r\n              if(node.data.role == \"freeText\"){\r\n                freeTexts.push(node);\r\n              }\r\n            if (node.data.category == \"line\") {\r\n\r\n                allLines.push(node)\r\n                if(node.data.role == \"verticalLine\"){\r\n                  verticalLines.push(node);\r\n                }\r\n                if(node.data.role == \"horizontalLine\"){\r\n                  horizontalLines.push(node);\r\n                }\r\n                if(node.data.role == \"freelLine\"){\r\n                  freelLines.push(node);\r\n                }\r\n            }\r\n            if (node.data.group == group.key) {\r\n            // position the node . . .\r\n                if(node.data.category == \"line\"){\r\n                    if(node.data.role == \"axisX\") {\r\n                      node.angle = 0;\r\n                      axisX = node\r\n                      node.location = group.location.copy().offset(0,0)\r\n                    };\r\n                    if(node.data.role == \"axisY\") {\r\n                      axisY = node\r\n                      node.angle = 270;\r\n                      node.location = group.location.copy().offset(0,0)\r\n                    }\r\n                    // node.angle = 270\r\n                }\r\n                // if(node.data.category == \"waveGroup\"){\r\n                //     waveGroup = node;\r\n                //     // node.angle = group.angle\r\n                //     oliveWidth = node.data.oliveWidth\r\n                //     oliveHeight = node.data.oliveHeight\r\n                //     node.location = group.location.copy().offset(0,0)\r\n                //     // node.layout.isOngoing = true;\r\n                //     // node.layout.isValidLayout = false;\r\n                //     // collection.push(node)\r\n                // }\r\n\r\n            }\r\n        }\r\n        console.log(`maxHeight:${maxHeight},maxWidth:${maxWidth}`)\r\n\r\n\r\n\r\n        verticalLines.sort(function(a,b){\r\n            return a.data.order - b.data.order\r\n        })\r\n        horizontalLines.sort(function(a,b){\r\n            return a.data.order - b.data.order\r\n        })\r\n        freelLines.sort(function(a,b){\r\n            return a.data.order - b.data.order\r\n        })\r\n\r\n        if(snapType == \"between\"){\r\n          var x1 = verticalLines.length*gridWidth+gridWidth\r\n          var x2 = horizontalLines.length*gridHeight+gridHeight\r\n        }else{\r\n          var x1 = verticalLines.length*gridWidth\r\n          var x2 = horizontalLines.length*gridHeight\r\n        }\r\n\r\n        var allPointsX = [];\r\n        var allPointsY = [];\r\n        var centerOrderX = (horizontalLines.length+1)/2\r\n        var centerOrderY = (verticalLines.length+1)/2\r\n        allLines.forEach(function(obj, index){\r\n          // obj.diagram.model.setDataProperty(obj.data, \"strokeWidth\",1)\r\n          // obj.diagram.model.setDataProperty(obj.data, \"stroke\",\"rgba(0,0,0,0.3)\")\r\n          if( obj.data.role == \"axisX\" ||  obj.data.role == \"axisY\") return;\r\n          // if(obj.data.subRole == \"dim\"){\r\n          //   obj.diagram.model.setDataProperty(obj.data, \"strokeDashArray\",\"[0, 0]\")\r\n          //   obj.diagram.model.setDataProperty(obj.data, \"strokeWidth\",3)\r\n          //   obj.diagram.model.setDataProperty(obj.data, \"stroke\",\"RGBA(164, 177, 198, 1)\")\r\n          // }else{\r\n          //   obj.diagram.model.setDataProperty(obj.data, \"strokeDashArray\",\"[15, 10]\")\r\n          //   obj.diagram.model.setDataProperty(obj.data, \"strokeWidth\",1)\r\n          //   obj.diagram.model.setDataProperty(obj.data, \"stroke\",\"rgba(0,0,0,0.3)\")\r\n          // }\r\n        })\r\n\r\n        verticalLines.forEach(function(obj,index){\r\n          var newOrder = index+1;\r\n          obj.diagram.model.setDataProperty(obj.data,\"order\", newOrder)\r\n          obj.location = group.location.copy().offset(gridWidth*(newOrder),0)\r\n          obj.angle = 270;\r\n          obj.diagram.model.setDataProperty(obj.data, \"desiredSize\",`${x2+20} 10`)\r\n          // obj.diagram.model.setDataProperty(obj.data, \"showArrow\",false)\r\n          // obj.diagram.model.setDataProperty(obj.data, \"selectable\",false)\r\n          if(snapType == \"between\"){\r\n            if(newOrder < centerOrderX){\r\n              allPointsX.push(obj.location.x-gridWidth/2)\r\n            }\r\n            if(newOrder == centerOrderX){\r\n              allPointsX.push(obj.location.x)\r\n            }\r\n            if(newOrder > centerOrderX){\r\n              allPointsX.push(obj.location.x+gridWidth/2)\r\n            }\r\n          }else{\r\n            allPointsX.push(obj.location.x)\r\n          }\r\n\r\n\r\n          // obj.diagram.model.setDataProperty(obj.data, \"strokeWidth\",1)\r\n          // obj.diagram.model.setDataProperty(obj.data, \"stroke\",\"rgba(0,0,0,0.3)\")\r\n          // obj.diagram.model.setDataProperty(obj.data, \"strokeDashArray\",\"[10, 5]\")\r\n        })\r\n        horizontalLines.forEach(function(obj,index){\r\n          var newOrder = index+1;\r\n          obj.diagram.model.setDataProperty(obj.data,\"order\", newOrder)\r\n          obj.location = group.location.copy().offset(0,-gridHeight*(newOrder))\r\n          obj.angle = 0;\r\n          obj.diagram.model.setDataProperty(obj.data, \"desiredSize\",`${x1+20} 10`)\r\n          // obj.diagram.model.setDataProperty(obj.data, \"showArrow\",false)\r\n          // obj.diagram.model.setDataProperty(obj.data, \"selectable\",false)\r\n          if(snapType == \"between\"){\r\n            if(newOrder < centerOrderY){\r\n              allPointsY.push(obj.location.y+gridHeight/2)\r\n            }\r\n            if(newOrder == centerOrderY){\r\n              allPointsY.push(obj.location.y)\r\n            }\r\n            if(newOrder > centerOrderY){\r\n              allPointsY.push(obj.location.y-gridHeight/2)\r\n            }\r\n          }else{\r\n              allPointsY.push(obj.location.y)\r\n          }\r\n          // obj.diagram.model.setDataProperty(obj.data, \"strokeWidth\",1)\r\n          // obj.diagram.model.setDataProperty(obj.data, \"stroke\",\"rgba(0,0,0,0.3)\")\r\n          // obj.diagram.model.setDataProperty(obj.data, \"strokeDashArray\",\"[10, 5]\")\r\n        })\r\n        // allPointsX.unshift(allPointsX[0]-gridWidth)\r\n        // allPointsX.push(allPointsX[allPointsX.length-1]+gridWidth)\r\n        // allPointsY.unshift(allPointsY[0]-gridLength)\r\n        // allPointsY.push(allPointsY[allPointsY.length-1]+gridLength)\r\n        this.group.__yunPointsX = allPointsX\r\n        this.group.__yunPointsY = allPointsY\r\n        freelLines.forEach(function(obj,index){\r\n          // var newOrder = index+1;\r\n          // obj.diagram.model.setDataProperty(obj.data,\"order\", newOrder)\r\n          // obj.location = new go.Point(allPointsX[9], allPointsY[9])\r\n          // obj.angle = 315;\r\n          // obj.diagram.model.setDataProperty(obj.data, \"desiredSize\",`${gridWidth*20-5} 10`)\r\n          // obj.diagram.model.setDataProperty(obj.data, \"showArrow\",false)\r\n          // obj.diagram.model.setDataProperty(obj.data, \"selectable\",true)\r\n          // obj.diagram.model.setDataProperty(obj.data, \"strokeWidth\",1)\r\n          // obj.diagram.model.setDataProperty(obj.data, \"zOrder\",10)\r\n          // obj.diagram.model.setDataProperty(obj.data, \"showArrow\",true)\r\n          // obj.diagram.model.setDataProperty(obj.data, \"showBeginArrow\",true)\r\n          // obj.diagram.model.setDataProperty(obj.data, \"showEndArrow\",true)\r\n          // obj.diagram.model.setDataProperty(obj.data, \"locationSpot\",`0.5 0.5 0 0`)\r\n          // obj.diagram.model.setDataProperty(obj.data, \"stroke\",\"rgba(0,0,0,0.3)\")\r\n          // obj.diagram.model.setDataProperty(obj.data, \"strokeDashArray\",\"[5, 5]\")\r\n          // obj.diagram.model.setDataProperty(obj.data, \"selectable\",false)\r\n        })\r\n\r\n\r\n\r\n        shapeNodes.forEach(function(obj,index){\r\n          obj.diagram.model.setDataProperty(obj.data, \"visible\",true)\r\n          if(!showShape){\r\n            obj.diagram.model.setDataProperty(obj.data, \"stroke\", \"rgba(255,0,0,0)\")\r\n          }else{\r\n            try{\r\n              obj.diagram.model.setDataProperty(obj.data, \"stroke\", shapeStrokes[obj.data.gridWidth/2-1])\r\n            }catch(e){\r\n              console.log(e)\r\n            }\r\n          }\r\n            if(obj.data.desiredSize){\r\n              return;\r\n            }\r\n            obj.data.orderX = centerOrderX\r\n            obj.data.orderY = centerOrderY\r\n            obj.location = new go.Point(allPointsX[obj.data.orderX-1], allPointsY[obj.data.orderY-1])\r\n            var shapeWidth = obj.data.gridWidth||2;\r\n            if(snapType == \"between\"){\r\n              var desiredSize = new go.Size(gridWidth*(shapeWidth-1), gridHeight*(shapeWidth-1))\r\n              obj.diagram.model.setDataProperty(obj.data, \"strokeWidth\", gridWidth)\r\n            }else{\r\n              var desiredSize = new go.Size(gridWidth*shapeWidth+3, gridHeight*shapeWidth+3)\r\n              obj.diagram.model.setDataProperty(obj.data, \"strokeWidth\", 3)\r\n            }\r\n            // obj.desiredSize = desiredSize;\r\n            obj.diagram.model.setDataProperty(obj.data, \"desiredSize\",go.Size.stringify(desiredSize))\r\n            // obj.diagram.model.setDataProperty(obj.data, \"visible\",true)\r\n            obj.diagram.model.setDataProperty(obj.data, \"strokeDashArray\",\"[0,0]\")\r\n            \r\n        })\r\n\r\n        // var dist = Math.max(gridHeight,gridWidth)\r\n        freeTexts.forEach(function(obj,index){\r\n          // var newOrder = index+1;\r\n          // obj.diagram.model.setDataProperty(obj.data,\"order\", newOrder)\r\n          // obj.location = group.location.copy()\r\n          // obj.angle = 315;\r\n          // obj.diagram.model.setDataProperty(obj.data, \"desiredSize\",`${x1+20} 10`)\r\n          // obj.diagram.model.setDataProperty(obj.data, \"minSize\",`60 50`)\r\n          // obj.diagram.model.setDataProperty(obj.data, \"width\",`${gridWidth-10}`)\r\n          // obj.diagram.model.setDataProperty(obj.data, \"height\",`${gridHeight-10}`)\r\n          // obj.diagram.model.setDataProperty(obj.data, \"width\",`${gridWidth*3}`)\r\n          // delete obj.data.width\r\n          // obj.diagram.model.setDataProperty(obj.data, \"textAlign\",`center`)\r\n          // obj.diagram.model.setDataProperty(obj.data, \"locationSpot\",`0.5 0.5 0 0`)\r\n          // obj.diagram.model.setDataProperty(obj.data, \"strokeDashArray\",\"[10, 5]\")\r\n          // obj.diagram.model.setDataProperty(obj.data, \"font\", group.__trtdNode.defaultTextFont)\r\n\r\n      // if(node.__yunPointsY && node.__yunPointsX){\r\n      //       for(var i=0;i<allPointsX.length;i++){\r\n      //         if(obj)\r\n      //       }\r\n      //    }\r\n      // if(obj.data.text.indexOf(\"自由文本\") >-1){\r\n      //   console.log(\"ddd\",obj.data.text)\r\n      //   var order = obj.data.text.replace(\"自由文本\",\"\").split(\",\")\r\n      //   if(order.length == 2){\r\n      //     obj.data.orderX = order[0]\r\n      //     obj.data.orderY = order[1]\r\n      //     obj.location = new go.Point(allPointsX[obj.data.orderX-1], allPointsY[obj.data.orderY-1])\r\n      //   }\r\n      // }\r\n\r\n        // if(obj.data.text.length == 1){\r\n        //   if(obj.data.subRole == null){\r\n        //     obj.diagram.model.setDataProperty(obj.data, \"subRole\",\"coreText\")\r\n        //     obj.diagram.model.setDataProperty(obj.data, \"deletable\", false)\r\n        //   }\r\n        // }\r\n\r\n        // if(obj.data.text.indexOf(\"维度\") >-1){\r\n        //   console.log(\"ddd\",obj.data.text)\r\n        //   // var order = obj.data.text.replace(\"维度\",\"\").split(\",\")\r\n        //   obj.diagram.model.setDataProperty(obj.data, \"subRole\",\"dimText\")\r\n        //   // obj.diagram.model.setDataProperty(obj.data, \"dimKey\", null)\r\n        //   delete obj.data.dimKey\r\n        //   obj.diagram.model.setDataProperty(obj.data, \"deletable\", false)\r\n        //   // obj.diagram.model.setDataProperty(obj.data, \"width\", null)\r\n        //   // obj.diagram.model.setDataProperty(obj.data, \"height\", null)\r\n        // }\r\n          obj.areaBackground = null\r\n          obj.diagram.model.setDataProperty(obj.data, \"height\", null)\r\n          obj.diagram.model.setDataProperty(obj.data, \"width\", null)\r\n          // obj.findObject(\"place\").visible = false;\r\n          // console.log(\"verticalLines.length+1)/2verticalLines.length+1)/2\",(verticalLines.length+1)/2)\r\n          if(group.data.autoSnapText){\r\n            // 计算普通文字位置\r\n            if(obj.data.orderX && obj.data.orderY){\r\n              obj.location = new go.Point(allPointsX[obj.data.orderX-1], allPointsY[obj.data.orderY-1])\r\n              \r\n              obj.location = new go.Point(allPointsX[obj.data.orderX-1], allPointsY[obj.data.orderY-1])\r\n            }\r\n            // 计算维度文字位置\r\n            if(obj.data.subRole == \"dimText\" && obj.data.dimX!=null && obj.data.dimY!=null){\r\n              console.log(\"dimText\")\r\n              var dimXLoc, dimYLoc;\r\n              dimXLoc = allPointsX[obj.data.dimX-1]\r\n              dimYLoc = allPointsY[obj.data.dimY-1]\r\n\r\n              if(obj.data.dimX >= allPointsX.length){\r\n                dimXLoc = allPointsX[allPointsX.length-1]+gridWidth\r\n                // if(snapType != \"between\"){\r\n                //   dimXLoc += gridWidth/3\r\n                // }\r\n              }\r\n              if(obj.data.dimY >= allPointsY.length){\r\n                dimYLoc = allPointsY[allPointsY.length-1]-gridHeight\r\n                // if(snapType != \"between\"){\r\n                //   dimYLoc -= gridHeight/3\r\n                // }\r\n              }\r\n              if(obj.data.dimX <= 0){\r\n                dimXLoc = allPointsX[0]-gridWidth\r\n                if(snapType != \"between\"&& obj.data.dimY < allPointsY.length){\r\n                  dimXLoc -= gridWidth/2\r\n                }\r\n              }\r\n              if(obj.data.dimY <= 0){\r\n                dimYLoc = allPointsY[0]+gridHeight\r\n                if(snapType != \"between\" && obj.data.dimX < allPointsX.length){\r\n                  dimYLoc += gridHeight/2\r\n                }\r\n              }\r\n              obj.location = new go.Point(dimXLoc, dimYLoc)\r\n            }\r\n          }\r\n          if(obj.data.orderY == centerOrderY||obj.data.dimY == centerOrderY){\r\n            // console.log(\"Ddddddd\")\r\n            obj.diagram.model.setDataProperty(obj.data, \"width\",gridWidth-10)\r\n            // delete obj.data.height\r\n            obj.diagram.model.setDataProperty(obj.data, \"height\", null)\r\n          }\r\n          if(obj.data.orderX == centerOrderX || obj.data.dimX == centerOrderX ){\r\n            // console.log(\"Ddddddd\")\r\n            obj.diagram.model.setDataProperty(obj.data, \"height\",gridHeight-10)\r\n            obj.diagram.model.setDataProperty(obj.data, \"width\", null)\r\n            // delete obj.data.width\r\n          }\r\n\r\n          if(Math.abs(obj.data.orderX-centerOrderX) <= 1 && Math.abs(obj.data.orderY-centerOrderY) <= 1){\r\n            // 中心节点\r\n            if(snapType != \"between\"){\r\n              obj.diagram.model.setDataProperty(obj.data, \"width\",gridWidth-10)\r\n              obj.diagram.model.setDataProperty(obj.data, \"height\",gridHeight-10)\r\n            }\r\n          }\r\n\r\n          if(Math.abs(obj.data.orderX-centerOrderX) == 0 && Math.abs(obj.data.orderY-centerOrderY) == 0){\r\n            // 中心节点\r\n            // obj.diagram.model.setDataProperty(obj.data, \"textStroke\",`red`)\r\n            // obj.diagram.model.setDataProperty(obj.data, \"deletable\", false)\r\n            // obj.diagram.model.setDataProperty(obj.data, \"subRole\", \"themeText\")\r\n            // obj.diagram.model.setDataProperty(obj.data, \"height\",`${gridHeight-10}`)\r\n            if(snapType == \"between\"){\r\n              obj.diagram.model.setDataProperty(obj.data, \"width\",gridWidth+gridWidth-10)\r\n              obj.diagram.model.setDataProperty(obj.data, \"height\",gridHeight+gridHeight-10)\r\n            }else{\r\n              obj.diagram.model.setDataProperty(obj.data, \"width\",gridWidth-10)\r\n              obj.diagram.model.setDataProperty(obj.data, \"height\",gridHeight-10)\r\n            }\r\n          }\r\n          // else{\r\n          //   // var list = verticalLines[0].layer.findObjectsNear(obj.location, dist)\r\n          //   // console.log(\"list\",list)\r\n          //   var x=obj.location.x,y=obj.location.y, xi,yi;\r\n          //     for(var i=0;i<allPointsX.length;i++){\r\n          //       if(x<allPointsX[i]){\r\n          //         x = allPointsX[i]\r\n          //         xi = i\r\n          //         break;\r\n          //       }\r\n          //     }\r\n          //     for(var i=0;i<allPointsY.length;i++){\r\n          //       if(y<=allPointsY[i]){\r\n          //         y = allPointsY[i]\r\n          //         yi = i;\r\n          //         break;\r\n          //       }\r\n          //     }\r\n\r\n          //     if(x != -9000 && y != 9000){\r\n          //       obj.location = new go.Point(x, y)\r\n          //       obj.data.orderX = xi + 1;\r\n          //       obj.data.orderY = yi + 1;\r\n          //     }\r\n          //     console.log(\"sdfdsfsd\")\r\n          // }\r\n\r\n          // obj.diagram.model.setDataProperty(obj.data, \"selectable\",false)\r\n        })\r\n\r\n        if(axisXText){\r\n          // axisXText.location = group.location.copy().offset(x1+30, 0)\r\n          // axisXText.locationSpot = go.Spot.Top\r\n        }\r\n        if(axisYText){\r\n          // axisYText.location = group.location.copy().offset(-10, -(x2+30))\r\n          // axisYText.locationSpot = go.Spot.Right\r\n        }\r\n        if(axisY) {\r\n          axisY.angle = 270;\r\n          this.diagram.model.setDataProperty(axisY.data, \"desiredSize\",`${x2+30} 10`)\r\n        }\r\n        if(axisX) {\r\n          axisX.angle = 0\r\n          this.diagram.model.setDataProperty(axisX.data, \"desiredSize\",`${x1+30} 10`)\r\n        }\r\n        // line.width = 2000\r\n        // line.height = 4\r\n        group.width = x1+gridWidth*2\r\n        group.height = x2+gridHeight*2\r\n        // group.location = group.location.copy().offset(-gridWidth, gridHeight)\r\n        // this.diagram.model.setDataProperty(group.data, \"loc\",go.Point.stringify(group.location.copy().offset(-gridWidth, gridHeight)))\r\n        go.Layout.prototype.doLayout.call(this, coll);\r\n        diagram.commitTransaction(\"YunGroupLayout\");\r\n        // diagram.updateAllTargetBindings()\r\n        return;\r\n        // return;\r\n        // var diagram = this.diagram;\r\n        if (diagram === null) return;\r\n        diagram.startTransaction(\"PoolLayout\");\r\n        // make sure all of the Group Shapes are big enough\r\n        // var minsize = computeMinPoolSize();\r\n        // diagram.findTopLevelGroups().each(function(lane) {\r\n        //   if (!(lane instanceof go.Group)) return;\r\n        //   var shape = lane.selectionObject;\r\n        //   if (shape !== null) {  // change the desiredSize to be big enough in both directions\r\n        //     var sz = computeLaneSize(lane);\r\n        //     shape.width = (!isNaN(shape.width)) ? Math.max(shape.width, sz.width) : sz.width;\r\n        //     shape.height = (isNaN(shape.height) ? minsize.height : Math.max(shape.height, minsize.height));\r\n        //     var cell = lane.resizeCellSize;\r\n        //     if (!isNaN(shape.width) && !isNaN(cell.width) && cell.width > 0) shape.width = Math.ceil(shape.width / cell.width) * cell.width;\r\n        //     if (!isNaN(shape.height) && !isNaN(cell.height) && cell.height > 0) shape.height = Math.ceil(shape.height / cell.height) * cell.height;\r\n        //   }\r\n        // });\r\n        // now do all of the usual stuff, according to whatever properties have been set on this GridLayout\r\n        go.GridLayout.prototype.doLayout.call(this, coll);\r\n        diagram.commitTransaction(\"PoolLayout\");\r\n      };\r\n      // end PoolLayout class\r\n\r\n      module.exports = YunGroupLayout\n\n\n// WEBPACK FOOTER //\n// ./src/layout/yunGroupLayout.js","var $ = go.GraphObject.make;\r\nvar Base = require('./base')\r\nvar helpers = require('../helpers/helpers.gojs')\r\nvar yunGroupLayout = require(\"../layout/yunpanGroupLayout\")\r\n\r\nclass YunNodeTemplate extends Base {\r\n    constructor(options){\r\n        super(options)\r\n        // this.nodeProperties = {}\r\n        this.defaultTextFont = \"20px 'Microsoft YaHei'\"\r\n        \r\n    }\r\n    \r\n\r\n    snapToGrid(data, node){\r\n\r\n      if(data.subRole == \"coreText\" || data.subRole == \"themeText\"){\r\n        return;\r\n      }\r\n      var p = go.Point.parse(data.loc)\r\n      if(node.__yunPointsX && node.__yunPointsY ){\r\n        if(p.x >= node.__yunPointsX[0] && p.x <= node.__yunPointsX[node.__yunPointsX.length-1] \r\n          && p.y >= node.__yunPointsY[node.__yunPointsY.length-1] && p.y <= node.__yunPointsY[0] ){\r\n            // 在画布格子范围内的位置才对齐网格\r\n            var minX=20000,minY=20000,tmp,orderX,orderY;\r\n            for(var i=0;i<node.__yunPointsX.length;i++){\r\n              tmp = Math.abs(p.x - node.__yunPointsX[i])\r\n              if(tmp< minX){\r\n                minX = tmp;\r\n                orderX = i+1;\r\n              }\r\n            }\r\n            for(var i=0;i<node.__yunPointsY.length;i++){\r\n              tmp = Math.abs(p.y - node.__yunPointsY[i])\r\n              if(tmp< minY){\r\n                minY = tmp;\r\n                orderY = i+1;\r\n              }\r\n            }\r\n\r\n            if(orderX!=null && orderY!=null){\r\n              // var x = node.__yunPointsX[orderX-1]\r\n              // var y = node.__yunPointsX[orderY-1]\r\n              // x = -1300\r\n              // y = -1300\r\n              // data.loc = \"-1688.105387366997 -121.19730986224602\"\r\n              data.orderX = orderX\r\n              data.orderY = orderY\r\n            }\r\n          }else{\r\n            delete data.orderX\r\n            delete data.orderY\r\n          }\r\n     }\r\n    }\r\n\r\n    addFreeText(e, node){\r\n      console.log(\"addFreeTextaddFreeText begin\",e)\r\n      var gridWidth = node.data.gridWidth\r\n      var p = e.documentPoint\r\n      var that = this;\r\n      var data = {\"text\":\"节点\",\r\n      \"deletable\":true, \r\n      \"role\":\"freeText\",\r\n      \"fill\":\"black\", \r\n      \"iconVisible\":false, \r\n      \"locationSpot\":\"0.5 0.5 0 0\", \r\n      \"minSize\":`30 30`,\r\n      \"subRole\":\"yunpanText\",\r\n\r\n      // \"width\":`${gridWidth-10}`,\r\n      font: that.defaultTextFont,\r\n      \"textAlign\":\"center\", \r\n      \"category\":\"autoText\", \r\n      \"loc\": go.Point.stringify(p), \r\n      \"movable\":true, \"group\":node.data.key\r\n     }\r\n    //  console.log()\r\n     \r\n\r\n      this.snapToGrid(data, node)\r\n     this.diagram.startTransaction(\"addFreeText\")\r\n     this.diagram.model.addNodeData(data);\r\n     this.diagram.commitTransaction(\"addFreeText\")\r\n     node.layout.isValidLayout = false\r\n     console.log(\"addFreeTextaddFreeText end\",e)\r\n    }\r\n    addFreeShapeText(e, node){\r\n      console.log(\"addFreeTextaddFreeText begin\",e)\r\n      var gridWidth = node.data.gridWidth\r\n      var p = e.documentPoint\r\n      var that = this;\r\n      var data = {\"text\":\"节点\",\r\n      \"deletable\":true, \r\n      \"role\":\"freeText\",\r\n      \"fill\":\"#F2F2F2\", \r\n      \"iconVisible\":false, \r\n      \"locationSpot\":\"0.5 0.5 0 0\", \r\n      \"minSize\":`30 30`,\r\n      \"subRole\":\"yunpanText\",\r\n      desiredSize: go.Size.stringify(new go.Size(gridWidth-10,gridWidth-10)),\r\n      // \"width\":`${gridWidth-10}`,\r\n      font: that.defaultTextFont,\r\n      \"textAlign\":\"center\", \r\n      \"category\":\"shapeText\", \r\n      \"loc\": go.Point.stringify(p), \r\n      \"movable\":true, \"group\":node.data.key\r\n     }\r\n    //  console.log()\r\n     \r\n\r\n      this.snapToGrid(data, node)\r\n     this.diagram.startTransaction(\"addFreeText\")\r\n     this.diagram.model.addNodeData(data);\r\n     this.diagram.commitTransaction(\"addFreeText\")\r\n     node.layout.isValidLayout = false\r\n     console.log(\"addFreeTextaddFreeText end\",e)\r\n    }\r\n\r\n    getNodeTemplate(){\r\n      var that = this\r\n      return $(go.Group, \"Auto\",\r\n      { selectionObjectName: \"PH\",\r\n      __trtdNode: that,\r\n      layerName: \"default\",\r\n      padding: 0,\r\n      margin: 0,\r\n      copyable: false,\r\n      zOrder: 15,\r\n        locationObjectName: \"PH\",\r\n        locationSpot: new go.Spot(0,1,0,-0),\r\n        // rotationSpot: go.Spot.LeftCenter,\r\n        rotatable: false,\r\n        alignment: go.Spot.Left,\r\n        alignmentFocus: go.Spot.Left,\r\n        // rotateObject:\"PH\",\r\n        click: (e, node)=>{\r\n          console.log(node.data)\r\n          var it = node.findSubGraphParts().iterator;\r\n          while (it.next()) {\r\n              var n = it.value;\r\n              if(n.data.category == \"autoText\"){\r\n                  n.findObject(\"textBorder\").visible = false;\r\n              }\r\n          }\r\n          node.layout.isValidLayout = false\r\n          return;\r\n          if(node.isSelected) return;\r\n          var it = node.findSubGraphParts().iterator;\r\n          var n;\r\n          while (it.next()) {\r\n              n = it.value;\r\n              if(n.data.role == \"labelGroup\"){\r\n                  n.__trtdNode.switchBorder(n, true)\r\n                  break;\r\n              }\r\n          }\r\n          if(n){\r\n            setTimeout(function(){\r\n              n.__trtdNode.switchBorder(n, false)\r\n            },3000)\r\n          }\r\n        },\r\n        doubleClick: function (e, node){\r\n          that.addFreeShapeText(e, node)\r\n        },\r\n        mouseOver: function(e, node) {\r\n          // if(node.data.hyperlink){\r\n          //   var textObj = node.findObject('TEXT');\r\n          //   textObj.isUnderline = true;\r\n          // }\r\n          // if(!node.containingGroup) return;\r\n          return;\r\n          // diagram.__trtd.showNodeRemarkTips(e, node);\r\n      },\r\n      contextMenu: $(go.Adornment),\r\n      mouseLeave: function(e, node) {\r\n        // if(!node.containingGroup) return;\r\n        var it = node.findSubGraphParts().iterator;\r\n        while (it.next()) {\r\n            var n = it.value;\r\n            if(n.data.role == \"labelGroup\"){\r\n                // n.__trtdNode.switchBorder(n, false)\r\n                break;\r\n            }\r\n        }\r\n        // if(n){\r\n        //   setTimeout(function(){\r\n        //     n.__trtdNode.switchBorder(n, false)\r\n        //   },3000)\r\n        // }\r\n      },\r\n        // rotatable: true,\r\n        // resizable: true,\r\n        // layoutConditions: go.Part.LayoutStandard,\r\n        layoutConditions: go.Part.LayoutStandard & go.Part.LayoutRemoved & go.Part.LayoutAdded & go.Part.LayoutNodeSized,\r\n        layout: new yunGroupLayout()\r\n        // layout: $(go.GridLayout,{\r\n        //   spacing: new go.Size(0,0),\r\n        //   cellSize: go.Size.parse(300,150),\r\n        //   arrangement:go.GridLayout.LeftToRight,\r\n        //   alignment: go.GridLayout.Location,\r\n        //   comparer:function(pa, pb) {\r\n        //     var da = pa.data;\r\n        //     var db = pb.data;\r\n        //     if (da.order < db.order) return -1;\r\n        //     if (da.order > db.order) return 1;\r\n        //     return 0;\r\n        //   }\r\n        // }) \r\n      },\r\n      new go.Binding(\"deletable\", \"deletable\").makeTwoWay(function(v,data){\r\n        return v;\r\n      }),\r\n      new go.Binding(\"copyable\", \"copyable\").makeTwoWay(),\r\n      new go.Binding(\"angle\", \"angle\").makeTwoWay(function(v,data){\r\n        return v;\r\n      }),\r\n      new go.Binding(\"zOrder\", \"zOrder\").makeTwoWay(function(v,data){\r\n        return v;\r\n      }),\r\n      new go.Binding(\"locationSpot\", \"\", function(data){\r\n        // console.log(\"data:\",data)\r\n        return new go.Spot(0,1,data.gridWidth,-data.gridHeight)\r\n      }),\r\n        \r\n        $(go.Shape,  // using a Shape instead of a Placeholder\r\n          { name: \"PH\",\r\n          figure:\"Rectangle\",\r\n          // rotationSpot: go.Spot.LeftCenter,\r\n          // spot1: new go.Spot(0.01, 0.01),\r\n          // spot2: new go.Spot(0.99, 0.99),\r\n            // width: 600,\r\n            // height:300,\r\n            stroke:\"yellow\" ,\r\n            strokeWidth:0,\r\n            fill: \"rgba(0,0,255,0.0)\" },\r\n          // new go.Binding(\"desiredSize\", \"desiredSize\", function(v,data){\r\n          //   return go.Size.parse(v)\r\n          //   console.log('1111111111111111111111')\r\n          //   // for(var i=0;i<)\r\n          //   var model = data.part.diagram.model;\r\n          //   var group = data.part.data;\r\n          //   var maxWidth = 0;\r\n          //   var maxHeight = 0;\r\n          //   for(var i = 0;i<model.nodeDataArray.length;i++){\r\n          //     if(group.key != model.nodeDataArray[i].group){\r\n          //       continue;\r\n          //     }\r\n          //     if(model.nodeDataArray[i].desiredSize){\r\n          //       console.log(model.nodeDataArray[i].desiredSize)\r\n          //       var size = go.Size.parse(model.nodeDataArray[i].desiredSize)\r\n          //       if(size.width > maxWidth){\r\n          //         maxWidth = size.width;\r\n          //       }\r\n          //       if(size.height > maxHeight){\r\n          //         maxHeight = size.height;\r\n          //       }\r\n          //     }\r\n          //   }\r\n          //   // var group = that.diagram.findNodeForKey(data.part.data.key)\r\n          //   // var git = group.memberParts;\r\n          //   // var maxWidth = 0;\r\n          //   // var maxHeight = 0;\r\n          //   // while (git.next()) {\r\n          //   //   var item = git.value;\r\n          //   //   console.log(\"item:\",item)\r\n          //   //   if(item.naturalBounds.width > maxWidth){\r\n          //   //     maxWidth = item.naturalBounds.width;\r\n          //   //   }\r\n          //   //   if(item.naturalBounds.height > maxHeight){\r\n          //   //     maxHeight = item.naturalBounds.height;\r\n          //   //   }\r\n          //   //   console.log(`maxHeight:${maxHeight},maxWidth:${maxWidth}`)\r\n      \r\n          //   // }           \r\n          //   return go.Size.parse(`${maxWidth+100} ${maxHeight}`)         \r\n          //   // group.diagram.model.setDataProperty(group.data, \"desiredSize\", `${maxWidth+100} ${maxHeight}`) \r\n          // }).makeTwoWay(go.Size.stringify)\r\n        ),\r\n        new go.Binding(\"location\", \"loc\", go.Point.parse).makeTwoWay(go.Point.stringify),\r\n        // $(go.Placeholder,    // represents the area of all member parts,\r\n        //   { padding: 0}\r\n        // ),  // with some extra padding around them\r\n\r\n        // $(go.TextBlock,  // group title\r\n        //   { font: \"Bold 12pt Sans-Serif\" },\r\n        //   new go.Binding(\"text\", \"key\")\r\n        // )\r\n      )\r\n    }\r\n}\r\n\r\nmodule.exports = YunNodeTemplate\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/nodeTemplate/yunpanGroupNodeTemplate.js","    // define a custom grid layout that makes sure the length of each lane is the same\r\n    // and that each lane is broad enough to hold its subgraph\r\n    function YunGroupLayout() {\r\n        go.Layout.call(this);\r\n        // go.GridLayout.call(this);\r\n        // this.cellSize = new go.Size(1, 1);\r\n        // this.wrappingColumn = Infinity;\r\n        // this.wrappingWidth = Infinity;\r\n        // this.spacing = new go.Size(0, 0);\r\n        // this.alignment = go.GridLayout.Position;\r\n      }\r\n      go.Diagram.inherit(YunGroupLayout, go.Layout);\r\n  \r\n      function computeNewRotateLoc(rotateCenter,currentLoc, angle){\r\n          if(rotateCenter.equals(currentLoc)) return currentLoc\r\n        // 计算选择中心点到（0,0）点的偏移\r\n        var offset = new go.Point(0,0).subtract(rotateCenter.copy())\r\n        // 将原来的点偏移到相对0,0点的位置\r\n        var nodeOrigin = currentLoc.copy().offset(offset.x, offset.y)\r\n        var newNodeOrigin = nodeOrigin.rotate(angle)\r\n        var newNodeLoc = newNodeOrigin.copy().offset(-offset.x, -offset.y)\r\n        return newNodeLoc\r\n        // console.log(\"newNodeLoc\", newNodeLoc)\r\n      }\r\n      YunGroupLayout.prototype.doLayout = function(coll) {\r\n          console.log(\"YunGroupLayout.doLayout\")\r\n        var diagram = this.diagram;\r\n        diagram.startTransaction(\"YunGroupLayout\")\r\n          // COLL might be a Diagram or a Group or some Iterable<Part>\r\n         \r\n        var it = this.collectParts(coll).iterator;\r\n        var collection = []\r\n        var dataCollection =[]\r\n        var group = this.group\r\n        var gridWidth = group.data.gridWidth\r\n        var gridHeight = group.data.gridHeight\r\n        // group.location = new go.Point(0,0)\r\n        var maxWidth = 0;\r\n        var maxHeight = 0;\r\n        var centerLine, axisX, axisY,axisXText, axisYText, themeText, labelText1,labelText2,labelText3,labelGroup,waveGroup\r\n        var shiTextColl = []\r\n        var xuTextColl = []\r\n        var verticalLines = []\r\n        var horizontalLines = []\r\n        var freelLines = []\r\n        var allLines = []\r\n        var freeTexts = []\r\n        var shapeNodes = []\r\n        var horizontalDim = []\r\n        var verticalDim = []\r\n        var snapType = group.data.snapType || \"grid\"\r\n        var showShape = group.data.showShape; // 是否显示矩形\r\n        var beginSpark = group.data.beginSpark; // 是否开始火花\r\n        var shapeStrokes = group.data.shapeStrokes; // 是否开始火花\r\n        var oliveWidth\r\n        var oliveHeight\r\n        while (it.next()) {\r\n            var node = it.value;\r\n                // var item = git.value;\r\n            //   console.log(\"item:\",item)\r\n\r\n            dataCollection.push(node.data)\r\n            if(node.data.category == \"wave\"){\r\n                collection.push(node)\r\n            }\r\n            if(!(node instanceof go.Node)){\r\n              continue;\r\n            }\r\n            \r\n            if(node.data.dimX == 0 && node.data.subRole == \"dimText\"){\r\n              verticalDim.push(node)\r\n            }\r\n            if(node.data.dimY == 0 && node.data.subRole == \"dimText\"){\r\n              horizontalDim.push(node)\r\n            }\r\n            if(node.data.role == \"background\"){\r\n              shapeNodes.push(node)\r\n            }\r\n            // 处理文本节点的位置和定位位置\r\n            // if(node.data.category == \"text\"){\r\n              if(node.data.role == \"axisYText\"){\r\n                axisYText = node;\r\n              }\r\n              if(node.data.role == \"axisXText\"){\r\n                axisXText = node;\r\n              }\r\n              if(node.data.role == \"themeText\"){\r\n                themeText = node;\r\n              }\r\n              if(node.data.role == \"shiText\"){\r\n                shiTextColl.push(node)\r\n              }\r\n              if(node.data.role == \"xuText\"){\r\n                xuTextColl.push(node)\r\n              }\r\n            // }\r\n            // 处理label文本节点的位置和定位位置\r\n            // if(node.data.category == \"iconText\"){\r\n              if(node.data.role == \"labelText1\"){\r\n                labelText1 = node;\r\n              }\r\n              if(node.data.role == \"labelText2\"){\r\n                labelText2 = node;\r\n              }\r\n              if(node.data.role == \"labelText3\"){\r\n                labelText3 = node;\r\n              }\r\n              if(node.data.role == \"labelGroup\"){\r\n                labelGroup = node;\r\n              }\r\n            // }\r\n\r\n              if(node.naturalBounds.width > maxWidth){\r\n                maxWidth = node.naturalBounds.width;\r\n              }\r\n              if(node.naturalBounds.height > maxHeight){\r\n                maxHeight = node.naturalBounds.height;\r\n              }\r\n            \r\n            \r\n              if(node.data.role == \"freeText\"){\r\n                freeTexts.push(node);\r\n              }\r\n            if (node.data.category == \"line\") {\r\n\r\n                allLines.push(node)\r\n                if(node.data.role == \"verticalLine\"){\r\n                  verticalLines.push(node);\r\n                }\r\n                if(node.data.role == \"horizontalLine\"){\r\n                  horizontalLines.push(node);\r\n                }\r\n                if(node.data.role == \"freelLine\"){\r\n                  freelLines.push(node);\r\n                }\r\n            }\r\n            if (node.data.group == group.key) {\r\n            // position the node . . .\r\n                if(node.data.category == \"line\"){\r\n                    if(node.data.role == \"axisX\") {\r\n                      node.angle = 0;\r\n                      axisX = node\r\n                      node.location = group.location.copy().offset(0,0)\r\n                    };\r\n                    if(node.data.role == \"axisY\") {\r\n                      axisY = node\r\n                      node.angle = 270;\r\n                      node.location = group.location.copy().offset(0,0)\r\n                    }\r\n                    // node.angle = 270\r\n                }\r\n                // if(node.data.category == \"waveGroup\"){\r\n                //     waveGroup = node;\r\n                //     // node.angle = group.angle\r\n                //     oliveWidth = node.data.oliveWidth\r\n                //     oliveHeight = node.data.oliveHeight\r\n                //     node.location = group.location.copy().offset(0,0)\r\n                //     // node.layout.isOngoing = true;\r\n                //     // node.layout.isValidLayout = false;\r\n                //     // collection.push(node)\r\n                // }\r\n\r\n            }\r\n        }\r\n        console.log(`maxHeight:${maxHeight},maxWidth:${maxWidth}`)\r\n\r\n\r\n\r\n        verticalLines.sort(function(a,b){\r\n            return a.data.order - b.data.order\r\n        })\r\n        horizontalLines.sort(function(a,b){\r\n            return a.data.order - b.data.order\r\n        })\r\n        freelLines.sort(function(a,b){\r\n          return a.data.order - b.data.order\r\n        })\r\n        // verticalDim.sort(function(a,b){\r\n        //     return a.data.dimY - b.data.dimY\r\n        // })\r\n        // horizontalDim.sort(function(a,b){\r\n        //     return a.data.dimX - b.data.dimX\r\n        // })\r\n        // horizontalLines.forEach(function(obj,index){\r\n        //   var newOrder = index+1;\r\n        //   obj.diagram.model.setDataProperty(obj.data,\"dimX\", newOrder)\r\n        // })\r\n        // verticalDim.forEach(function(obj,index){\r\n        //   var newOrder = index+1;\r\n        //   obj.diagram.model.setDataProperty(obj.data,\"dimY\", newOrder)\r\n        // })\r\n        if(snapType == \"between\"){\r\n          var x1 = verticalLines.length*gridWidth+gridWidth\r\n          var x2 = horizontalLines.length*gridHeight+gridHeight\r\n        }else{\r\n          var x1 = verticalLines.length*gridWidth\r\n          var x2 = horizontalLines.length*gridHeight\r\n        }\r\n\r\n        var allPointsX = [];\r\n        var allPointsY = [];\r\n        var centerOrderX = (horizontalLines.length+1)/2\r\n        var centerOrderY = (verticalLines.length+1)/2\r\n        allLines.forEach(function(obj, index){\r\n          // obj.diagram.model.setDataProperty(obj.data, \"strokeWidth\",1)\r\n          \r\n          // obj.diagram.model.setDataProperty(obj.data, \"stroke\",\"rgba(0,0,0,0.3)\")\r\n          if( obj.data.role == \"axisX\" ||  obj.data.role == \"axisY\") return;\r\n          // if(obj.data.subRole == \"dim\"){\r\n          //   obj.diagram.model.setDataProperty(obj.data, \"strokeDashArray\",\"[0, 0]\")\r\n          //   obj.diagram.model.setDataProperty(obj.data, \"strokeWidth\",3)\r\n          //   obj.diagram.model.setDataProperty(obj.data, \"stroke\",\"RGBA(164, 177, 198, 1)\")\r\n          // }else{\r\n          //   obj.diagram.model.setDataProperty(obj.data, \"strokeDashArray\",\"[15, 10]\")\r\n          //   obj.diagram.model.setDataProperty(obj.data, \"strokeWidth\",1)\r\n          //   obj.diagram.model.setDataProperty(obj.data, \"stroke\",\"rgba(0,0,0,0.3)\")\r\n          // }\r\n        })\r\n\r\n        verticalLines.forEach(function(obj,index){\r\n          var newOrder = index+1;\r\n          obj.diagram.model.setDataProperty(obj.data,\"order\", newOrder)\r\n          obj.location = group.location.copy().offset(gridWidth*(newOrder),0)\r\n          obj.angle = 270;\r\n          obj.diagram.model.setDataProperty(obj.data, \"deletable\", true)\r\n          obj.diagram.model.setDataProperty(obj.data, \"desiredSize\",`${x2+20} 10`)\r\n          // obj.diagram.model.setDataProperty(obj.data, \"showArrow\",false)\r\n          // obj.diagram.model.setDataProperty(obj.data, \"selectable\",false)\r\n          if(snapType == \"between\"){\r\n            if(newOrder < centerOrderX){\r\n              allPointsX.push(obj.location.x-gridWidth/2)\r\n            }\r\n            if(newOrder == centerOrderX){\r\n              allPointsX.push(obj.location.x)\r\n            }\r\n            if(newOrder > centerOrderX){\r\n              allPointsX.push(obj.location.x+gridWidth/2)\r\n            }\r\n          }else{\r\n            allPointsX.push(obj.location.x)\r\n          }\r\n\r\n\r\n          // obj.diagram.model.setDataProperty(obj.data, \"strokeWidth\",1)\r\n          // obj.diagram.model.setDataProperty(obj.data, \"stroke\",\"rgba(0,0,0,0.3)\")\r\n          // obj.diagram.model.setDataProperty(obj.data, \"strokeDashArray\",\"[10, 5]\")\r\n        })\r\n        horizontalLines.forEach(function(obj,index){\r\n          var newOrder = index+1;\r\n          obj.diagram.model.setDataProperty(obj.data,\"order\", newOrder)\r\n          obj.diagram.model.setDataProperty(obj.data, \"deletable\", true)\r\n          obj.location = group.location.copy().offset(0,-gridHeight*(newOrder))\r\n          obj.angle = 0;\r\n          obj.diagram.model.setDataProperty(obj.data, \"desiredSize\",`${x1+20} 10`)\r\n          // obj.diagram.model.setDataProperty(obj.data, \"showArrow\",false)\r\n          // obj.diagram.model.setDataProperty(obj.data, \"selectable\",false)\r\n          if(snapType == \"between\"){\r\n            if(newOrder < centerOrderY){\r\n              allPointsY.push(obj.location.y+gridHeight/2)\r\n            }\r\n            if(newOrder == centerOrderY){\r\n              allPointsY.push(obj.location.y)\r\n            }\r\n            if(newOrder > centerOrderY){\r\n              allPointsY.push(obj.location.y-gridHeight/2)\r\n            }\r\n          }else{\r\n              allPointsY.push(obj.location.y)\r\n          }\r\n          // obj.diagram.model.setDataProperty(obj.data, \"strokeWidth\",1)\r\n          // obj.diagram.model.setDataProperty(obj.data, \"stroke\",\"rgba(0,0,0,0.3)\")\r\n          // obj.diagram.model.setDataProperty(obj.data, \"strokeDashArray\",\"[10, 5]\")\r\n        })\r\n        // allPointsX.unshift(allPointsX[0]-gridWidth)\r\n        // allPointsX.push(allPointsX[allPointsX.length-1]+gridWidth)\r\n        // allPointsY.unshift(allPointsY[0]-gridLength)\r\n        // allPointsY.push(allPointsY[allPointsY.length-1]+gridLength)\r\n        this.group.__yunPointsX = allPointsX\r\n        this.group.__yunPointsY = allPointsY\r\n        freelLines.forEach(function(obj,index){\r\n          // var newOrder = index+1;\r\n          // obj.diagram.model.setDataProperty(obj.data,\"order\", newOrder)\r\n          // obj.location = new go.Point(allPointsX[9], allPointsY[9])\r\n          // obj.angle = 315;\r\n          // obj.diagram.model.setDataProperty(obj.data, \"desiredSize\",`${gridWidth*20-5} 10`)\r\n          // obj.diagram.model.setDataProperty(obj.data, \"showArrow\",false)\r\n          // obj.diagram.model.setDataProperty(obj.data, \"selectable\",true)\r\n          // obj.diagram.model.setDataProperty(obj.data, \"strokeWidth\",1)\r\n          // obj.diagram.model.setDataProperty(obj.data, \"zOrder\",10)\r\n          // obj.diagram.model.setDataProperty(obj.data, \"showArrow\",true)\r\n          // obj.diagram.model.setDataProperty(obj.data, \"showBeginArrow\",true)\r\n          // obj.diagram.model.setDataProperty(obj.data, \"showEndArrow\",true)\r\n          // obj.diagram.model.setDataProperty(obj.data, \"locationSpot\",`0.5 0.5 0 0`)\r\n          // obj.diagram.model.setDataProperty(obj.data, \"stroke\",\"rgba(0,0,0,0.3)\")\r\n          // obj.diagram.model.setDataProperty(obj.data, \"strokeDashArray\",\"[5, 5]\")\r\n          // obj.diagram.model.setDataProperty(obj.data, \"selectable\",false)\r\n        })\r\n\r\n\r\n\r\n        // shapeNodes.forEach(function(obj,index){\r\n        //   obj.diagram.model.setDataProperty(obj.data, \"visible\",true)\r\n        //   if(!showShape){\r\n        //     obj.diagram.model.setDataProperty(obj.data, \"stroke\", \"rgba(255,0,0,0)\")\r\n        //   }else{\r\n        //     try{\r\n        //       obj.diagram.model.setDataProperty(obj.data, \"stroke\", shapeStrokes[obj.data.gridWidth/2-1])\r\n        //     }catch(e){\r\n        //       console.log(e)\r\n        //     }\r\n        //   }\r\n        //     if(obj.data.desiredSize){\r\n        //       return;\r\n        //     }\r\n        //     obj.data.orderX = centerOrderX\r\n        //     obj.data.orderY = centerOrderY\r\n        //     obj.location = new go.Point(allPointsX[obj.data.orderX-1], allPointsY[obj.data.orderY-1])\r\n        //     var shapeWidth = obj.data.gridWidth||2;\r\n        //     if(snapType == \"between\"){\r\n        //       var desiredSize = new go.Size(gridWidth*(shapeWidth-1), gridHeight*(shapeWidth-1))\r\n        //       obj.diagram.model.setDataProperty(obj.data, \"strokeWidth\", gridWidth)\r\n        //     }else{\r\n        //       var desiredSize = new go.Size(gridWidth*shapeWidth+3, gridHeight*shapeWidth+3)\r\n        //       obj.diagram.model.setDataProperty(obj.data, \"strokeWidth\", 3)\r\n        //     }\r\n        //     // obj.desiredSize = desiredSize;\r\n        //     obj.diagram.model.setDataProperty(obj.data, \"desiredSize\",go.Size.stringify(desiredSize))\r\n        //     // obj.diagram.model.setDataProperty(obj.data, \"visible\",true)\r\n        //     obj.diagram.model.setDataProperty(obj.data, \"strokeDashArray\",\"[0,0]\")\r\n            \r\n        // })\r\n\r\n        // var dist = Math.max(gridHeight,gridWidth)\r\n        freeTexts.forEach(function(obj,index){\r\n          // var newOrder = index+1;\r\n          // obj.diagram.model.setDataProperty(obj.data,\"order\", newOrder)\r\n          // obj.location = group.location.copy()\r\n          // obj.angle = 315;\r\n          // obj.diagram.model.setDataProperty(obj.data, \"desiredSize\",`${x1+20} 10`)\r\n          // obj.diagram.model.setDataProperty(obj.data, \"minSize\",`60 50`)\r\n          // obj.diagram.model.setDataProperty(obj.data, \"width\",`${gridWidth-10}`)\r\n          // obj.diagram.model.setDataProperty(obj.data, \"height\",`${gridHeight-10}`)\r\n          // obj.diagram.model.setDataProperty(obj.data, \"width\",`${gridWidth*3}`)\r\n          // delete obj.data.width\r\n          // obj.diagram.model.setDataProperty(obj.data, \"textAlign\",`center`)\r\n          // obj.diagram.model.setDataProperty(obj.data, \"locationSpot\",`0.5 0.5 0 0`)\r\n          // obj.diagram.model.setDataProperty(obj.data, \"strokeDashArray\",\"[10, 5]\")\r\n          // obj.diagram.model.setDataProperty(obj.data, \"font\", group.__trtdNode.defaultTextFont)\r\n\r\n      // if(node.__yunPointsY && node.__yunPointsX){\r\n      //       for(var i=0;i<allPointsX.length;i++){\r\n      //         if(obj)\r\n      //       }\r\n      //    }\r\n      // if(obj.data.text.indexOf(\"自由文本\") >-1){\r\n      //   console.log(\"ddd\",obj.data.text)\r\n      //   var order = obj.data.text.replace(\"自由文本\",\"\").split(\",\")\r\n      //   if(order.length == 2){\r\n      //     obj.data.orderX = order[0]\r\n      //     obj.data.orderY = order[1]\r\n      //     obj.location = new go.Point(allPointsX[obj.data.orderX-1], allPointsY[obj.data.orderY-1])\r\n      //   }\r\n      // }\r\n\r\n        // if(obj.data.text.length == 1){\r\n        //   if(obj.data.subRole == null){\r\n        //     obj.diagram.model.setDataProperty(obj.data, \"subRole\",\"coreText\")\r\n        //     obj.diagram.model.setDataProperty(obj.data, \"deletable\", false)\r\n        //   }\r\n        // }\r\n\r\n        // if(obj.data.text.indexOf(\"维度\") >-1){\r\n        //   console.log(\"ddd\",obj.data.text)\r\n        //   // var order = obj.data.text.replace(\"维度\",\"\").split(\",\")\r\n        //   obj.diagram.model.setDataProperty(obj.data, \"subRole\",\"dimText\")\r\n        //   // obj.diagram.model.setDataProperty(obj.data, \"dimKey\", null)\r\n        //   delete obj.data.dimKey\r\n        //   obj.diagram.model.setDataProperty(obj.data, \"deletable\", false)\r\n        //   // obj.diagram.model.setDataProperty(obj.data, \"width\", null)\r\n        //   // obj.diagram.model.setDataProperty(obj.data, \"height\", null)\r\n        // }\r\n          obj.areaBackground = null\r\n          // obj.diagram.model.setDataProperty(obj.data, \"height\", null)\r\n          // obj.diagram.model.setDataProperty(obj.data, \"width\", null)\r\n          // obj.findObject(\"place\").visible = false;\r\n          // console.log(\"verticalLines.length+1)/2verticalLines.length+1)/2\",(verticalLines.length+1)/2)\r\n          if(group.data.autoSnapText){\r\n            // 计算普通文字位置\r\n            if(obj.data.orderX && obj.data.orderY){\r\n              obj.location = new go.Point(allPointsX[obj.data.orderX-1], allPointsY[obj.data.orderY-1])\r\n              \r\n              obj.location = new go.Point(allPointsX[obj.data.orderX-1], allPointsY[obj.data.orderY-1])\r\n            }\r\n            // 计算维度文字位置\r\n            if(obj.data.subRole == \"dimText\" && obj.data.dimX!=null && obj.data.dimY!=null){\r\n              console.log(\"dimText\")\r\n              obj.diagram.model.setDataProperty(obj.data, \"deletable\", true)\r\n              var dimXLoc, dimYLoc;\r\n              dimXLoc = allPointsX[obj.data.dimX-1]\r\n              dimYLoc = allPointsY[obj.data.dimY-1]\r\n\r\n              // if(obj.data.dimX > allPointsX.length+1){\r\n              //   dimXLoc = allPointsX[allPointsX.length-1]+gridWidth\r\n              //   // if(snapType != \"between\"){\r\n              //   //   dimXLoc += gridWidth/3\r\n              //   // }\r\n              // }\r\n              // if(obj.data.dimY > allPointsY.length+1){\r\n              //   dimYLoc = allPointsY[allPointsY.length-1]-gridHeight\r\n              //   // if(snapType != \"between\"){\r\n              //   //   dimYLoc -= gridHeight/3\r\n              //   // }\r\n              // }\r\n              if(obj.data.dimX <= 0){\r\n                dimXLoc = allPointsX[0]-gridWidth/2-10\r\n                if(snapType != \"between\"&& obj.data.dimY <= allPointsY.length){\r\n                  dimXLoc -= gridWidth/2\r\n                }\r\n              }\r\n              if(obj.data.dimY <= 0){\r\n                dimYLoc = allPointsY[0]+gridHeight/2\r\n                if(snapType != \"between\" && obj.data.dimX <= allPointsX.length){\r\n                  dimYLoc += gridHeight/2\r\n                }\r\n              }\r\n              obj.location = new go.Point(dimXLoc, dimYLoc)\r\n            }\r\n          }\r\n          // if(obj.data.orderY == centerOrderY||obj.data.dimY == centerOrderY){\r\n          //   // console.log(\"Ddddddd\")\r\n          //   obj.diagram.model.setDataProperty(obj.data, \"width\",`${gridWidth-10}`)\r\n          //   // delete obj.data.height\r\n          //   obj.diagram.model.setDataProperty(obj.data, \"height\", null)\r\n          // }\r\n          // if(obj.data.orderX == centerOrderX || obj.data.dimX == centerOrderX ){\r\n          //   // console.log(\"Ddddddd\")\r\n          //   obj.diagram.model.setDataProperty(obj.data, \"height\",`${gridHeight-10}`)\r\n          //   obj.diagram.model.setDataProperty(obj.data, \"width\", null)\r\n          //   // delete obj.data.width\r\n          // }\r\n\r\n          // if(Math.abs(obj.data.orderX-centerOrderX) <= 1 && Math.abs(obj.data.orderY-centerOrderY) <= 1){\r\n          //   // 中心节点\r\n          //   if(snapType != \"between\"){\r\n          //     obj.diagram.model.setDataProperty(obj.data, \"width\",`${gridWidth-10}`)\r\n          //     obj.diagram.model.setDataProperty(obj.data, \"height\",`${gridHeight-10}`)\r\n          //   }\r\n          // }\r\n\r\n          // if(Math.abs(obj.data.orderX-centerOrderX) == 0 && Math.abs(obj.data.orderY-centerOrderY) == 0){\r\n          //   // 中心节点\r\n          //   // obj.diagram.model.setDataProperty(obj.data, \"textStroke\",`red`)\r\n          //   // obj.diagram.model.setDataProperty(obj.data, \"deletable\", false)\r\n          //   // obj.diagram.model.setDataProperty(obj.data, \"subRole\", \"themeText\")\r\n          //   // obj.diagram.model.setDataProperty(obj.data, \"height\",`${gridHeight-10}`)\r\n          //   if(snapType == \"between\"){\r\n          //     obj.diagram.model.setDataProperty(obj.data, \"width\",`${gridWidth+gridWidth-10}`)\r\n          //     obj.diagram.model.setDataProperty(obj.data, \"height\",`${gridHeight+gridHeight-10}`)\r\n          //   }else{\r\n          //     obj.diagram.model.setDataProperty(obj.data, \"width\",`${gridWidth-10}`)\r\n          //     obj.diagram.model.setDataProperty(obj.data, \"height\",`${gridHeight-10}`)\r\n          //   }\r\n          // }\r\n          // else{\r\n          //   // var list = verticalLines[0].layer.findObjectsNear(obj.location, dist)\r\n          //   // console.log(\"list\",list)\r\n          //   var x=obj.location.x,y=obj.location.y, xi,yi;\r\n          //     for(var i=0;i<allPointsX.length;i++){\r\n          //       if(x<allPointsX[i]){\r\n          //         x = allPointsX[i]\r\n          //         xi = i\r\n          //         break;\r\n          //       }\r\n          //     }\r\n          //     for(var i=0;i<allPointsY.length;i++){\r\n          //       if(y<=allPointsY[i]){\r\n          //         y = allPointsY[i]\r\n          //         yi = i;\r\n          //         break;\r\n          //       }\r\n          //     }\r\n\r\n          //     if(x != -9000 && y != 9000){\r\n          //       obj.location = new go.Point(x, y)\r\n          //       obj.data.orderX = xi + 1;\r\n          //       obj.data.orderY = yi + 1;\r\n          //     }\r\n          //     console.log(\"sdfdsfsd\")\r\n          // }\r\n\r\n          // obj.diagram.model.setDataProperty(obj.data, \"selectable\",false)\r\n        })\r\n\r\n        if(axisXText){\r\n          axisXText.location = group.location.copy().offset(x1+50, 0)\r\n          axisXText.locationSpot = go.Spot.Left\r\n        }\r\n        if(axisYText){\r\n          axisYText.location = group.location.copy().offset(0, -(x2+50))\r\n          axisYText.locationSpot = go.Spot.Bottom\r\n        }\r\n        if(axisY) {\r\n          axisY.angle = 270;\r\n          this.diagram.model.setDataProperty(axisY.data, \"desiredSize\",`${x2+30} 10`)\r\n        }\r\n        if(axisX) {\r\n          axisX.angle = 0\r\n          this.diagram.model.setDataProperty(axisX.data, \"desiredSize\",`${x1+30} 10`)\r\n        }\r\n        // line.width = 2000\r\n        // line.height = 4\r\n        group.width = x1+gridWidth*2\r\n        group.height = x2+gridHeight*2\r\n        // group.location = group.location.copy().offset(-gridWidth, gridHeight)\r\n        // this.diagram.model.setDataProperty(group.data, \"loc\",go.Point.stringify(group.location.copy().offset(-gridWidth, gridHeight)))\r\n        go.Layout.prototype.doLayout.call(this, coll);\r\n        diagram.commitTransaction(\"YunGroupLayout\");\r\n        // diagram.updateAllTargetBindings()\r\n        return;\r\n        // return;\r\n        // var diagram = this.diagram;\r\n        if (diagram === null) return;\r\n        diagram.startTransaction(\"PoolLayout\");\r\n        // make sure all of the Group Shapes are big enough\r\n        // var minsize = computeMinPoolSize();\r\n        // diagram.findTopLevelGroups().each(function(lane) {\r\n        //   if (!(lane instanceof go.Group)) return;\r\n        //   var shape = lane.selectionObject;\r\n        //   if (shape !== null) {  // change the desiredSize to be big enough in both directions\r\n        //     var sz = computeLaneSize(lane);\r\n        //     shape.width = (!isNaN(shape.width)) ? Math.max(shape.width, sz.width) : sz.width;\r\n        //     shape.height = (isNaN(shape.height) ? minsize.height : Math.max(shape.height, minsize.height));\r\n        //     var cell = lane.resizeCellSize;\r\n        //     if (!isNaN(shape.width) && !isNaN(cell.width) && cell.width > 0) shape.width = Math.ceil(shape.width / cell.width) * cell.width;\r\n        //     if (!isNaN(shape.height) && !isNaN(cell.height) && cell.height > 0) shape.height = Math.ceil(shape.height / cell.height) * cell.height;\r\n        //   }\r\n        // });\r\n        // now do all of the usual stuff, according to whatever properties have been set on this GridLayout\r\n        go.GridLayout.prototype.doLayout.call(this, coll);\r\n        diagram.commitTransaction(\"PoolLayout\");\r\n      };\r\n      // end PoolLayout class\r\n\r\n      module.exports = YunGroupLayout\n\n\n// WEBPACK FOOTER //\n// ./src/layout/yunpanGroupLayout.js","\r\n\r\nvar $ = go.GraphObject.make;\r\nvar Base = require('./base')\r\nvar helpers = require('../helpers/helpers.gojs')\r\n  \r\n\r\nclass shapeNodeTemplate extends Base {\r\n    constructor(options){\r\n        super(options)\r\n        // this.nodeProperties = {}\r\n        \r\n    }\r\n\r\n  \r\n\r\n    getNodeSelectionAdornmentTemplate(){\r\n      return  $(go.Adornment, \"Spot\",\r\n                $(go.Panel, \"Auto\",\r\n                    $(go.Shape, { fill: null, stroke: \"dodgerblue\", strokeWidth: 1 }),\r\n                    $(go.Placeholder) // this represents the selected Node\r\n\r\n                ),\r\n                //$(\"TreeExpanderButton\",\r\n                $(go.Panel, \"Vertical\", {\r\n                        name: \"ButtonIcon1\",\r\n                        alignment: new go.Spot(0, 1, -20, 20),\r\n                        alignmentFocus: go.Spot.Center,\r\n                        width: 60,\r\n                        height: 60,\r\n                        isActionable: true,\r\n                        // click: interactions.expandCollapse // this function is defined below\r\n                    },\r\n\r\n                    $(go.Shape, \"Circle\", {\r\n                        fill: \"rgba(1,1,1,0)\",\r\n                        strokeWidth: 0,\r\n                        stroke: \"green\",\r\n                        width: 50,\r\n                        height: 50\r\n                    })\r\n\r\n                )\r\n            ); // end Adornment;\r\n    }\r\n\r\n    nodeResizeAdornmentTemplate () {\r\n      return $(go.Adornment, \"Spot\",\r\n          $(go.Placeholder), // takes size and position of adorned object\r\n          $(go.Shape, \"Circle\", // left resize handle\r\n              {\r\n                  alignment: go.Spot.TopLeft,\r\n                  alignmentFocus: go.Spot.BottomRight,\r\n                  cursor: \"col-resize\",\r\n                  desiredSize: new go.Size(30, 30),\r\n                  fill: \"lightblue\",\r\n                  stroke: \"dodgerblue\"\r\n              }),\r\n          $(go.Shape, \"Circle\", // right resize handle\r\n              {\r\n                  alignment: go.Spot.BottomRight,\r\n                  alignmentFocus: go.Spot.TopLeft,\r\n                  cursor: \"col-resize\",\r\n                  desiredSize: new go.Size(30, 30),\r\n                  fill: \"lightblue\",\r\n                  stroke: \"dodgerblue\"\r\n              })\r\n      )\r\n  }\r\n\r\n    getNodeTemplate(){\r\n      var diagram = this.diagram\r\n      var that = this;\r\n      return $(go.Node, \"Spot\", {\r\n        name: \"NODE\",\r\n        \"_controlExpand\": true,\r\n        layerName: \"default\",\r\n        zOrder: 13,\r\n        locationSpot: go.Spot.Center,\r\n        resizeCellSize: new go.Size(10, 10),\r\n        locationObjectName: \"SHAPE\",\r\n        resizable: true,\r\n        resizeObjectName: \"SHAPE\", // user can resize the Shape\r\n        rotatable: true,\r\n        rotateObjectName: \"SHAPE\", // rotate the Shape without rotating the label\r\n        doubleClick: function (e, node) {\r\n            // interactions.selectText(e, node)\r\n            console.log(node.data)\r\n            if(node.diagram.__trtd.nodeDoubleClickListener){\r\n                node.diagram.__trtd.nodeDoubleClickListener(node)\r\n            }\r\n            \r\n        },\r\n        click: function(e, node) {\r\n            console.log(node.data)\r\n            if(node.diagram.__trtd.nodeClickListener){\r\n                node.diagram.__trtd.nodeClickListener(node)\r\n            }\r\n            // showNodeToolBar(e,node);\r\n        },\r\n        selectable: true,\r\n        movable: true,\r\n        angle: 0,\r\n        //toMaxLinks: 1,\r\n        layoutConditions: go.Part.LayoutStandard,\r\n        //layoutConditions:~go.Part.LayoutAdded,\r\n        // fromLinkable: true, toLinkable: true,\r\n        alignment: go.Spot.Center,\r\n        alignmentFocus: go.Spot.Center,\r\n        resizeAdornmentTemplate: that.nodeResizeAdornmentTemplate(),\r\n        //rotateAdornmentTemplate: nodeRotateAdornmentTemplate,\r\n        contextMenu: diagram.__trtd.nodeContextMenu,\r\n        selectionAdornmentTemplate: that.getNodeSelectionAdornmentTemplate(),\r\n        contextMenu: $(go.Adornment),\r\n      },\r\n        new go.Binding(\"location\", \"loc\", go.Point.parse).makeTwoWay(go.Point.stringify),\r\n        new go.Binding(\"isShadowed\", \"isShadowed\").makeTwoWay(),\r\n        new go.Binding(\"selectable\", \"selectable\").makeTwoWay(),\r\n        new go.Binding(\"movable\", \"movable\").makeTwoWay(),\r\n        new go.Binding(\"resizable\", \"resizable\").makeTwoWay(),\r\n        new go.Binding(\"deletable\", \"deletable\").makeTwoWay(),\r\n        new go.Binding(\"visible\", \"visible\"),\r\n        new go.Binding(\"zOrder\", \"zOrder\"),\r\n        new go.Binding(\"layerName\", \"layerName\", function(v, d) {\r\n            return v ? v : \"\";\r\n        }).makeTwoWay(function(v) {\r\n            return v;\r\n        }),\r\n        $(go.Shape, {\r\n            strokeDashArray: null,\r\n            // strokeDashOffset:10,\r\n            // padding: -1,\r\n            margin: 0,\r\n            name: \"SHAPE\",\r\n            figure: \"Rectangle\",\r\n            fill: \"rgba(0,0,0,0)\",\r\n            // fromLinkable: true,\r\n            // toLinkable: true,\r\n            // cursor: \"pointer\",\r\n            minSize: new go.Size(50, 50),\r\n            strokeWidth: 3,\r\n            stroke: \"RGBA(255,0,0,0.2)\",\r\n            portId: \"\"\r\n\r\n        },\r\n        new go.Binding(\"fill\", \"fill\").makeTwoWay(),\r\n        new go.Binding(\"strokeWidth\", \"strokeWidth\").makeTwoWay(),\r\n        new go.Binding(\"figure\", \"figure\").makeTwoWay(),\r\n        new go.Binding(\"stroke\", \"stroke\").makeTwoWay(),\r\n        new go.Binding(\"desiredSize\", \"desiredSize\", function(v) {\r\n            var size = new go.Size.parse(v)\r\n            return size;\r\n        }).makeTwoWay(function(v) {\r\n            return go.Size.stringify(v)\r\n        }),\r\n        new go.Binding(\"strokeDashArray\", \"strokeDashArray\", function(v) {\r\n            return JSON.parse(v)\r\n        }).makeTwoWay(function(v) {\r\n            return JSON.stringify(v)\r\n        }),\r\n        ),\r\n      )\r\n    }\r\n}\r\n\r\nmodule.exports = shapeNodeTemplate\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/nodeTemplate/shapeNodeTemplate.js","var $ = go.GraphObject.make;\r\nvar Base = require('./base')\r\nvar helpers = require('../helpers/helpers.gojs')\r\n  \r\nclass AutoTextTemplate extends Base {\r\n    constructor(options){\r\n        super(options)\r\n        // this.nodeProperties = {}\r\n        \r\n    }\r\n\r\n    clearBorder(node){\r\n        if(node.data.showBorder){\r\n            // if(node.data.text == \"\"){\r\n                node.findObject(\"textBorder\").visible = false;\r\n            // }\r\n        }\r\n    }\r\n\r\n    makeGeo(data, shape, options) {\r\n      // this is much more efficient than calling go.GraphObject.make:\r\n      var {radiusX=150,radiusY=100} = data\r\n      var geo =  new go.Geometry()\r\n        .add(new go.PathFigure(0, 0)  // start point\r\n          .add(new go.PathSegment(go.PathSegment.SvgArc,\r\n          radiusX*2,0,radiusX, radiusY,0,1,options.clockwiseFlag?1:0\r\n              )\r\n            )\r\n          )\r\n          geo.defaultStretch = go.GraphObject.Fill;\r\n          return geo;\r\n    }\r\n    getNodeTemplate(){\r\n       var properties = {\r\n          figure: \"Rectangle\",\r\n          fill: \"rgba(0,0,0,0)\",\r\n          strokeWidth: 1,\r\n          stroke: \"rgba(0,0,0,0)\",\r\n          fontSize: 15,\r\n          font: \"sans-serif\"\r\n      };\r\n      var that = this\r\n      var diagram = this.diagram\r\n      return $(go.Node, \"Spot\", {\r\n              \"_controlExpand\": true,\r\n              __trtdNode: that,\r\n              layerName: \"Foreground\",\r\n              zOrder: 15,\r\n              movable: true,\r\n              isShadowed :true,\r\n     \r\n            //   shadowBlur : null,\r\n              shadowColor :\"#57617a\",\r\n              shadowOffset:new go.Point(0,0),\r\n            //   copyable: false,\r\n              visible: true,\r\n              locationSpot: go.Spot.Center,\r\n              resizeCellSize: new go.Size(10, 10),\r\n            //   locationObjectName: \"textBorder\",\r\n              selectionObjectName: \"SHAPE\",\r\n              resizable: true,\r\n            //   selectable: false,\r\n            //   clickable: false,\r\n              resizeObjectName: \"SHAPE\", // user can resize the Shape\r\n              rotatable: false,\r\n              location: new go.Point(0, 0),\r\n              //rotateObjectName: \"SHAPE\",  // rotate the Shape without rotating the label\r\n              // doubleClick: selectText,\r\n              toMaxLinks: 1,\r\n              mouseDrop: function(e, obj) {\r\n                var node = obj.part;\r\n                var selnode = e.diagram.selection.first();\r\n\r\n                   // 常变\r\n                   if(selnode.data.category == \"picGroup\" && selnode.data.role == \"cbian\" && node.data.role == \"centerText\"){\r\n                       var oliveNode = e.diagram.findNodeForKey(node.data.olive)\r\n                       if(!oliveNode) return;\r\n                    var it = selnode.findSubGraphParts().iterator;\r\n                    var deleteObjs = []\r\n                    var cbian = {}\r\n                    while (it.next()) {\r\n                        var n = it.value;\r\n                        if(n.data.category == \"autoText\"){\r\n                        if(n.data.locationSpot == \"0 0 0 0\"){\r\n                            cbian.shiText = n.data.text;\r\n                        }\r\n                        if(n.data.locationSpot == \"0 0.5 0 0\"){\r\n                            cbian.centerText = n.data.text;\r\n                        }\r\n                        if(n.data.locationSpot == \"0 1 0 0\"){\r\n                            cbian.xuText = n.data.text;\r\n                        }\r\n                        }\r\n                        deleteObjs.push(n.data)\r\n                    }\r\n                    e.diagram.startTransaction(\"mouseDrop\")\r\n                    // 删除总结图\r\n                    e.diagram.model.removeNodeDataCollection(deleteObjs)\r\n                    var backupSelnode = JSON.parse(JSON.stringify(selnode.data))\r\n                    e.diagram.model.removeNodeData(selnode.data)\r\n        \r\n                    // 添加新橄榄\r\n                    e.diagram.__trtd.addOlive(oliveNode, cbian)\r\n                    e.diagram.commitTransaction(\"mouseDrop\")\r\n                    return;\r\n                }\r\n\r\n            \r\n\r\n                // 互换要点文字,只有云盘里的文字可以互换\r\n                if(selnode.data.subRole == \"coreText\" && node.data.subRole == \"coreText\" || \r\n                    selnode.data.subRole == \"yunpanText\" && node.data.subRole == \"yunpanText\"){\r\n                    e.diagram.model.startTransaction(\"coreTextExchange\")\r\n                    var selOrderX = selnode.data.orderX\r\n                    var selOrderY = selnode.data.orderY\r\n                    var selDimKey = selnode.data.dimKey\r\n                    e.diagram.model.setDataProperty(selnode.data, \"orderX\", node.data.orderX)\r\n                    e.diagram.model.setDataProperty(selnode.data, \"orderY\", node.data.orderY)\r\n                    e.diagram.model.setDataProperty(selnode.data, \"dimKey\", node.data.dimKey)\r\n                    e.diagram.model.setDataProperty(node.data, \"orderX\", selOrderX)\r\n                    e.diagram.model.setDataProperty(node.data, \"orderY\", selOrderY)\r\n                    e.diagram.model.setDataProperty(node.data, \"dimKey\", selDimKey)\r\n                    e.diagram.model.commitTransaction(\"coreTextExchange\")\r\n                }\r\n\r\n                // 云盘互换维度\r\n                if(selnode.data.subRole == \"dimText\" && node.data.subRole == \"dimText\" && \r\n                    selnode.data.category == node.data.category){\r\n                        if(selnode.data.group!= node.data.group) return;\r\n                        if(!selnode.containingGroup) return;\r\n                        if(selnode.containingGroup.data.category != \"yunpanGroup\") return;\r\n                        if(!(selnode.data.dimX == node.data.dimX  || selnode.data.dimY == node.data.dimY )){\r\n                            return;\r\n                        }\r\n\r\n                        e.diagram.model.startTransaction(\"dimTextExchange\")\r\n                        var selOrderX = selnode.data.dimX\r\n                        var selOrderY = selnode.data.dimY\r\n                        var it = node.containingGroup.findSubGraphParts().iterator;\r\n                        var nodeCoreTexts = []\r\n                        var selnodeCoreTexts = []\r\n                        var yunnodeCoreTexts = []\r\n                        var yunselnodeCoreTexts = []\r\n                        var normDim = \"X\"\r\n                        if(selnode.data.dimX == 0){\r\n                            normDim  = \"Y\"\r\n                        }\r\n                        var selOrder = selnode.data[\"dim\"+normDim]\r\n                        var nodeOrder = node.data[\"dim\"+normDim]\r\n                        while (it.next()) {\r\n                            var n = it.value;\r\n                            if(n.data.subRole == \"yunpanText\"){\r\n                                if(n.data[\"order\"+normDim] == nodeOrder){\r\n                                    yunnodeCoreTexts.push(n)\r\n                                }\r\n                                if(n.data[\"order\"+normDim] == selOrder){\r\n                                    yunselnodeCoreTexts.push(n)\r\n                                }\r\n                            }\r\n                        }\r\n                        var tmpX,tmpY;\r\n                        for(var i=0;i<yunnodeCoreTexts.length;i++){\r\n                            e.diagram.model.setDataProperty(yunnodeCoreTexts[i].data, \"order\"+normDim, selOrder)\r\n                        }\r\n                        for(var i=0;i<yunselnodeCoreTexts.length;i++){\r\n                            e.diagram.model.setDataProperty(yunselnodeCoreTexts[i].data, \"order\"+normDim, nodeOrder)\r\n                        }\r\n                        e.diagram.model.setDataProperty(selnode.data, \"dim\"+normDim, nodeOrder)\r\n                        e.diagram.model.setDataProperty(node.data, \"dim\"+normDim, selOrder)\r\n                        e.diagram.model.commitTransaction(\"dimTextExchange\")\r\n                    return;\r\n                    }\r\n\r\n                // 互换维度\r\n                if(selnode.data.subRole == \"dimText\" && node.data.subRole == \"dimText\"){\r\n                    e.diagram.model.startTransaction(\"dimTextExchange\")\r\n                    var selOrderX = selnode.data.dimX\r\n                    var selOrderY = selnode.data.dimY\r\n                    var it = node.containingGroup.findSubGraphParts().iterator;\r\n                    var nodeCoreTexts = []\r\n                    var selnodeCoreTexts = []\r\n                    var yunnodeCoreTexts = []\r\n                    var yunselnodeCoreTexts = []\r\n                    var normDim = \"X\"\r\n                    if(selnode.data.dimX == 0){\r\n                        normDim  = \"Y\"\r\n                    }\r\n                    while (it.next()) {\r\n                        var n = it.value;\r\n                        if(n.data.dimKey == node.data.key){\r\n                            nodeCoreTexts.push(n)\r\n                        }\r\n                        if(n.data.dimKey == selnode.data.key){\r\n                            selnodeCoreTexts.push(n)\r\n                        }\r\n                        if(n.data.subRole == \"yunpanText\"){\r\n                            if(n.data[\"order\"+normDim] == node.data[\"order\"+normDim]){\r\n                                yunnodeCoreTexts.push(n)\r\n                            }\r\n                            if(n.data[\"order\"+normDim] == selnode.data[\"order\"+normDim]){\r\n                                yunselnodeCoreTexts.push(n)\r\n                            }\r\n                        }\r\n                    }\r\n                    console.log(\"selnodeCoreTextsselnodeCoreTextsselnodeCoreTexts\",selnodeCoreTexts.length)\r\n                    var centerOrderX = (node.containingGroup.__yunPointsX.length+1)/2\r\n                    var centerOrderY = (node.containingGroup.__yunPointsY.length+1)/2\r\n\r\n                    if(selnode.data.dimX > centerOrderX){\r\n                        selnodeCoreTexts.sort(function(a,b){\r\n                            return a.data.orderX - b.data.orderX\r\n                        })\r\n                    }\r\n                    if(selnode.data.dimX == centerOrderX){\r\n                        if(selnode.data.dimY > centerOrderY){\r\n                            selnodeCoreTexts.sort(function(a,b){\r\n                                return a.data.orderY - b.data.orderY\r\n                            })\r\n                        }else{\r\n                            selnodeCoreTexts.sort(function(a,b){\r\n                                return b.data.orderY -a.data.orderY\r\n                            })\r\n                        }\r\n                    }\r\n                    if(selnode.data.dimX < centerOrderX){\r\n                        selnodeCoreTexts.sort(function(a,b){\r\n                            return  b.data.orderX - a.data.orderX\r\n                        })\r\n                    }\r\n\r\n                    if(node.data.dimX > centerOrderX){\r\n                        nodeCoreTexts.sort(function(a,b){\r\n                            return a.data.orderX - b.data.orderX\r\n                        })\r\n                    }\r\n                    if(node.data.dimX == centerOrderX){\r\n                        if(node.data.dimY > centerOrderY){\r\n                            nodeCoreTexts.sort(function(a,b){\r\n                                return a.data.orderY - b.data.orderY\r\n                            })\r\n                        }else{\r\n                            nodeCoreTexts.sort(function(a,b){\r\n                                return b.data.orderY -a.data.orderY\r\n                            })\r\n                        }\r\n                    }\r\n                    if(node.data.dimX < centerOrderX){\r\n                        nodeCoreTexts.sort(function(a,b){\r\n                            return  b.data.orderX - a.data.orderX\r\n                        })\r\n                    }\r\n\r\n                    var tmpX,tmpY;\r\n                    for(var i=0;i<selnodeCoreTexts.length;i++){\r\n                        tmpX = selnodeCoreTexts[i].data.orderX;\r\n                        tmpY = selnodeCoreTexts[i].data.orderY;\r\n                        e.diagram.model.setDataProperty(selnodeCoreTexts[i].data, \"orderX\", nodeCoreTexts[i].data.orderX)\r\n                        e.diagram.model.setDataProperty(selnodeCoreTexts[i].data, \"orderY\", nodeCoreTexts[i].data.orderY)\r\n                        e.diagram.model.setDataProperty(nodeCoreTexts[i].data, \"orderX\", tmpX)\r\n                        e.diagram.model.setDataProperty(nodeCoreTexts[i].data, \"orderY\", tmpY)\r\n                    }\r\n                    e.diagram.model.setDataProperty(selnode.data, \"dimX\", node.data.dimX)\r\n                    e.diagram.model.setDataProperty(selnode.data, \"dimY\", node.data.dimY)\r\n                    e.diagram.model.setDataProperty(node.data, \"dimX\", selOrderX)\r\n                    e.diagram.model.setDataProperty(node.data, \"dimY\", selOrderY)\r\n                    e.diagram.model.commitTransaction(\"dimTextExchange\")\r\n                }\r\n\r\n\r\n                \r\n\r\n                if (selnode.data.category != \"wave\") {\r\n                    return;\r\n                }\r\n                if(node.data.role != \"centerText\"){\r\n                    return;\r\n                }\r\n                if(!node){\r\n                  // node.containingGroup.layout.isValidLayout = false\r\n                  return;\r\n                }\r\n                if(selnode.data.group != obj.data.group){\r\n                  return;\r\n                }\r\n                e.diagram.startTransaction(\"mouseDrop\")\r\n                selnode.__oldOrder = selnode.data.order\r\n                e.diagram.model.setDataProperty(selnode.data, \"order\",node.data.order+0.5)\r\n                var xuText = e.diagram.model.findNodeDataForKey(selnode.data.xuText)\r\n                var shiText = e.diagram.model.findNodeDataForKey(selnode.data.shiText)\r\n                e.diagram.model.setDataProperty(shiText, \"order\",node.data.order+0.5)\r\n                e.diagram.model.setDataProperty(xuText, \"order\",node.data.order+0.5)\r\n                // node.containingGroup.layout.isValidLayout = false\r\n                e.diagram.commitTransaction(\"mouseDrop\")\r\n              },\r\n              mouseDragEnter: function(e, obj) {\r\n                var node = obj.part;\r\n                var selnode = e.diagram.selection.first();\r\n                if(!selnode) return;\r\n                if(selnode.data.subRole == \"coreText\" && node.data.subRole == \"coreText\" || \r\n                selnode.data.subRole == \"yunpanText\" && node.data.subRole == \"yunpanText\"){\r\n                    selnode.areaBackground = null\r\n                    node.areaBackground = \"RGB(107,208,137)\"\r\n                }\r\n                if(selnode.data.subRole == \"dimText\" && node.data.subRole == \"dimText\"){\r\n                    selnode.areaBackground = null\r\n                    node.areaBackground = \"RGB(107,208,137)\"\r\n                }\r\n\r\n                if(node.data.role == \"centerText\"){\r\n                    node.layerName = \"Background\"\r\n                }\r\n                // if (!(selnode instanceof go.Node)  || selnode.data.role != \"freeText\"  || selnode.category != \"autoText\" ||selnode.data.subRole != \"coreText\") {\r\n                //     return;\r\n                // }\r\n\r\n\r\n\r\n                // //var sat = node.selectionAdornmentTemplate;\r\n                // //var adorn = sat.copy();\r\n                // //adorn.adornedObject = node;\r\n                // //node.addAdornment(\"dragEnter\", adorn);\r\n    \r\n                // //if (!mayWorkFor(selnode, node)) return;\r\n                // var shape = node.findObject(\"SHAPE\");\r\n                // if (shape) {\r\n                //     shape._prevFill = shape.fill; // remember the original brush\r\n                //     shape.fill = \"darkred\";\r\n                // }\r\n    \r\n            },\r\n            mouseDragLeave: function(e, obj) {\r\n                var node = obj.part;\r\n                var selnode = e.diagram.selection.first();\r\n                // var shape = node.findObject(\"SHAPE\");\r\n                if(selnode.data.subRole == \"coreText\" && node.data.subRole == \"coreText\"|| \r\n                selnode.data.subRole == \"yunpanText\" && node.data.subRole == \"yunpanText\"){\r\n                    node.areaBackground = null\r\n                }\r\n                if(selnode.data.subRole == \"dimText\" && node.data.subRole == \"dimText\"){\r\n                    node.areaBackground = null\r\n                }\r\n                if(node.data.role == \"centerText\"){\r\n                    node.layerName = \"Foreground\"\r\n                }\r\n                //node.removeAdornment(\"dragEnter\");\r\n            },\r\n              selectionChanged: (node)=>{\r\n                console.log(\"selectionChanged\",node)\r\n\r\n                if(node.data.category != \"autoText\" || node.data.orderX ==null \r\n                || node.data.orderY ==null || node.data.role != \"freeText\" || node.data.subRole !=\"coreText\"|| node.data.subRole !=\"yunpanText\"){\r\n                    return;\r\n                }\r\n\r\n                if( !node.containingGroup || node.containingGroup.data.category != \"yunGroup\" || node.containingGroup.data.category != \"yunpanGroup\"){\r\n                    return;\r\n                }\r\n\r\n                if(node.containingGroup.data.beginSpark != \"line\"){\r\n                    return;\r\n                }\r\n                if(node.containingGroup.__yunPointsX && node.containingGroup.__yunPointsY){\r\n                    var centerOrderX = (node.containingGroup.__yunPointsX.length+1)/2\r\n                    var centerOrderY = (node.containingGroup.__yunPointsY.length+1)/2\r\n                    if(node.data.orderX == centerOrderX && node.data.orderY == centerOrderY){\r\n                        // 中心文字不参与变色\r\n                        return;\r\n                    }\r\n                    var orderX = node.data.orderX, orderY=node.data.orderY\r\n                    if(orderX == centerOrderX){\r\n                        orderX = orderY\r\n                    }\r\n                    if(orderY == centerOrderY){\r\n                        orderY = orderX\r\n                    }\r\n                    var shapeStrokes = node.containingGroup.data.shapeStrokes\r\n                    var showShape = node.containingGroup.data.showShape; // 是否显示矩形\r\n                    if(node.isSelected){\r\n                        if(node.containingGroup.data.snapType == \"between\"){\r\n                            var diff = Math.max(Math.abs(node.data.orderX - centerOrderX), Math.abs(node.data.orderY - centerOrderY))+1\r\n                        }else{\r\n                            var diff = Math.max(Math.abs(node.data.orderX - centerOrderX), Math.abs(node.data.orderY - centerOrderY))\r\n                        }\r\n                        console.log(\"diff:\",diff,node.data.orderX,node.data.orderY)\r\n                        var it = node.containingGroup.findSubGraphParts().iterator;\r\n\r\n                        console.log(\"showShape\",showShape)\r\n                        // var beginSpark = node.containingGroup.data.beginSpark; // 是否显示矩形\r\n                        var shape = null;\r\n                        while (it.next()) {\r\n                            var n = it.value;\r\n                            if(n.data.category == \"autoText\" && n.data.orderX !=null \r\n                            && n.data.orderY !=null && n.data.role == \"freeText\" ){\r\n                                n.findObject(\"textBorder\").visible = false;\r\n                                // if((Math.abs(n.data.orderX-centerOrderX) == Math.abs(orderX-centerOrderX) \r\n                                //     || Math.abs(n.data.orderX-centerOrderY) == Math.abs(orderY-centerOrderY)) \r\n                                // && !(Math.abs(n.data.orderX-centerOrderY) < Math.abs(orderY-centerOrderY) \r\n                                //     && Math.abs(n.data.orderX-centerOrderX) < Math.abs(orderX-centerOrderX))){\r\n                                //     n.areaBackground = \"red\"\r\n                                // }\r\n\r\n                                if(Math.abs(n.data.orderX-centerOrderX) == Math.abs(orderX-centerOrderX)\r\n                                && Math.abs(n.data.orderY-centerOrderY) <= Math.abs(orderY-centerOrderY)\r\n                                ||Math.abs(n.data.orderX-centerOrderX) <= Math.abs(orderX-centerOrderX)\r\n                                && Math.abs(n.data.orderY-centerOrderY) == Math.abs(orderY-centerOrderY)){\r\n                                    // n.findObject(\"place\").visible = true;\r\n                                    n.areaBackground = \"white\"\r\n                                    n.zOrder = 999\r\n                                }\r\n\r\n                            }\r\n                            if(n.data.category == \"shape\" && n.data.role == \"background\"){\r\n                                var obj = n.findObject(\"SHAPE\")\r\n                                // console.log(\"dfsdfsdfsdf\", obj)\r\n                                if(n.data.gridWidth == diff*2){\r\n                                    shape = obj;\r\n                                    // if(showShape){\r\n                                        // n.visible = true\r\n                                    // }\r\n                                    if(!obj.__prestroke){\r\n                                        obj.__prestroke = obj.stroke\r\n                                        obj.stroke = \"rgba(255,0,0,0.5)\"\r\n                                    }\r\n                                }else{\r\n                                    if(obj.__prestroke){\r\n                                        obj.stroke = obj.__prestroke\r\n                                        delete obj.__prestroke\r\n                                    }\r\n                                }\r\n                            }\r\n\r\n                        }\r\n                        if(!shape){\r\n                            if(node.containingGroup.data.snapType == \"between\"){\r\n                                var gridWidth = diff*2;\r\n                            }else{\r\n                                var gridWidth = diff*2\r\n                            }\r\n                            console.log(\"addShape\")\r\n                            node.diagram.model.startTransaction(\"addShape\");\r\n                            var shapeData = {\"deletable\":true, \r\n                            \"role\":\"background\", \r\n                            \"category\":\"shape\", \r\n                            // \"loc\":\"-1532.0268216255727 9.121091688849674\", \r\n                            \"loc\":go.Point.stringify(new go.Point(node.containingGroup.__yunPointsX[centerOrderX-1],node.containingGroup.__yunPointsY[centerOrderY-1])), \r\n                            \"movable\":true, \r\n                            \"group\":-19, \r\n                            \"key\": helpers.guid(), \r\n                            \"orderX\":10, \r\n                            \"orderY\":10, \r\n                            \"gridWidth\":gridWidth, \r\n                            \"stroke\":shapeStrokes[diff-1],\r\n                             \"visible\":true, \"strokeDashArray\":\"[0,0]\", \"strokeWidth\":3,\r\n                            //   \"desiredSize\":\"1263 1263\"\r\n                            };\r\n                             node.diagram.model.addNodeData(shapeData)\r\n                            node.diagram.model.commitTransaction(\"addShape\");\r\n                            setTimeout(()=>{\r\n                                var nod = node.diagram.findNodeForKey(shapeData.key)\r\n                                console.log(\"add shape add shape\")\r\n                                if(nod){\r\n                                    // nod.visible = true\r\n                                    var obj = nod.findObject(\"SHAPE\")\r\n                                    if(!obj.__prestroke){\r\n                                        obj.__prestroke = obj.stroke\r\n                                        obj.stroke = \"rgba(255,0,0,0.5)\"\r\n                                    }\r\n                                }\r\n                            },100)\r\n                        }\r\n                    }else{\r\n                        var it = node.containingGroup.findSubGraphParts().iterator;\r\n                        while (it.next()) {\r\n                            var n = it.value;\r\n                            if(n.data.category == \"autoText\" && n.data.orderX !=null \r\n                            && n.data.orderY !=null && n.data.role == \"freeText\" ){\r\n                                // n.findObject(\"textBorder\").visible = false;\r\n                                // if((n.data.orderX == orderX || n.data.orderY == orderY) \r\n                                // && !(n.data.orderX < orderX && n.data.orderY <orderY )){\r\n                                //     n.areaBackground = \"red\"\r\n                                // }\r\n\r\n                                if(Math.abs(n.data.orderX-centerOrderX) == Math.abs(orderX-centerOrderX)\r\n                                && Math.abs(n.data.orderY-centerOrderY) <= Math.abs(orderY-centerOrderY)\r\n                                ||Math.abs(n.data.orderX-centerOrderX) <= Math.abs(orderX-centerOrderX)\r\n                                && Math.abs(n.data.orderY-centerOrderY) == Math.abs(orderY-centerOrderY)){\r\n                                    // n.findObject(\"textBorder\").visible = true;\r\n                                    // n.findObject(\"place\").visible = false;\r\n                                    n.areaBackground = null\r\n                                    n.zOrder = NaN\r\n                                }\r\n\r\n                            }\r\n                            if(n.data.category == \"shape\" && n.data.role == \"background\"){\r\n                                var obj = n.findObject(\"SHAPE\")\r\n                                // console.log(\"dfsdfsdfsdf\", obj)\r\n                                if(!showShape){\r\n                                    // n.visible = false\r\n                                    obj.stroke = \"rgba(255,0,0,0)\"\r\n                                }\r\n                                if(n.data.gridWidth == diff*2){\r\n                                    if(!obj.__prestroke){\r\n                                        obj.__prestroke = obj.stroke\r\n                                        obj.stroke = \"rgba(255,0,0,0.7)\"\r\n\r\n                                    }\r\n                                }else{\r\n                                    \r\n                                    if(obj.__prestroke){\r\n                                        obj.stroke = obj.__prestroke\r\n                                        delete obj.__prestroke\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                }\r\n\r\n              },\r\n              click: (e, node)=>{\r\n                console.log(node.data)\r\n\r\n                // if(node.data.role == \"centerText\"){\r\n                //     var waveNode = node.diagram.findNodeForKey(node.data.olive)\r\n                //     node.layerName = \"Background\"\r\n                //     if(waveNode){\r\n                //         node.diagram.select(waveNode)\r\n                //     }\r\n                // }\r\n                // e.diagram.model.startTransaction(\"click\")\r\n                // e.diagram.model.setDataProperty(node.data, \"dimKey\", -124)\r\n                // e.diagram.model.setDataProperty(node.data,\"dimKey\", -73)\r\n                // e.diagram.model.setDataProperty(node.data,\"dimKey\", -141)\r\n                // e.diagram.model.setDataProperty(node.data,\"dimKey\", -74)\r\n\r\n\r\n\r\n\r\n                // e.diagram.model.setDataProperty(node.data, \"dimKey\", -124)\r\n                // e.diagram.model.setDataProperty(node.data,\"dimKey\", -141)\r\n                // e.diagram.model.setDataProperty(node.data,\"dimKey\", -158)\r\n                // e.diagram.model.setDataProperty(node.data,\"dimKey\", -176)\r\n                // e.diagram.model.setDataProperty(node.data,\"dimKey\", -73)\r\n                // e.diagram.model.setDataProperty(node.data,\"dimKey\", -74)\r\n                // e.diagram.model.setDataProperty(node.data,\"dimKey\", -175)\r\n                // e.diagram.model.setDataProperty(node.data,\"dimKey\", -177)\r\n                // node.data.dimKey = -124\r\n                // node.data.dimKey = -141\r\n                // node.data.dimKey = -158\r\n                // node.data.dimKey = -176\r\n                // node.data.dimKey = -73\r\n                // node.data.dimKey = -74\r\n                // node.data.dimKey = -175\r\n                // node.data.dimKey = -177\r\n                \r\n                // e.diagram.model.commitTransaction(\"click\")\r\n\r\n              },\r\n            //   rotateAdornmentTemplate:  // specify appearance of rotation handle\r\n            //   $(go.Adornment,\r\n            //     { locationSpot: go.Spot.Center },\r\n            //     $(go.Shape, \"BpmnActivityLoop\",\r\n            //       { width: 12, height: 12, cursor: \"pointer\",\r\n            //         background: \"transparent\", stroke: \"dodgerblue\", strokeWidth: 2 })\r\n            //     ),\r\n              mouseOver: function(e, node) {\r\n                // if(node.data.hyperlink){\r\n                //   var textObj = node.findObject('TEXT');\r\n                //   textObj.isUnderline = true;\r\n                // }\r\n                console.log(\"mouseOvermouseOvermouseOver\")\r\n                if(node.data.showBorder){\r\n                    if(node.data.text == \"\" && (node.data.role == \"xuText\" || node.data.role == \"shiText\" )){\r\n                        node.findObject(\"textBorder\").visible = true;\r\n                    }\r\n                }\r\n                if(node.data.role == \"centerText\"){\r\n                    node.layerName = \"Background\"\r\n                    // node.diagram.model.startTransaction(\"centerText\")\r\n                    // node.diagram.model.setDataProperty(node.data,\"layerName\", \"Background\")\r\n                    // node.diagram.model.commitTransaction(\"centerText\")\r\n                }\r\n                //   node.areaBackground = \"mediumslateblue\"\r\n                // }\r\n\r\n                // if(!node.containingGroup) return;\r\n                // var it = node.containingGroup.findSubGraphParts().iterator;\r\n                // while (it.next()) {\r\n                //     var n = it.value;\r\n                //     if(n.data.category == \"autoText\"){\r\n                //         if(n.data.order == node.data.order){\r\n                //             // locateNode = n;\r\n                //             n.areaBackground = \"mediumslateblue\"\r\n                //         }\r\n                //     }\r\n                // }\r\n                // diagram.__trtd.showNodeRemarkTips(e, node);\r\n                },\r\n            mouseLeave: function(e, node) {\r\n            //   if(node.data.text == \"\"){\r\n                if(node.data.showBorder){\r\n                    // if(node.data.text == \"\"){\r\n                        node.findObject(\"textBorder\").visible = false;\r\n                    // }\r\n                }\r\n                if(node.data.role == \"centerText\"){\r\n                    node.layerName = \"Foreground\"\r\n                    // node.diagram.model.startTransaction(\"centerText\")\r\n                    // node.diagram.model.setDataProperty(node.data,\"layerName\", \"Foreground\")\r\n                    // node.diagram.model.commitTransaction(\"centerText\")\r\n                }\r\n                // node.areaBackground = null\r\n            //   }\r\n            },\r\n            //   layoutConditions: go.Part.LayoutStandard,\r\n              layoutConditions: go.Part.LayoutStandard & go.Part.LayoutRemoved & go.Part.LayoutAdded & ~go.Part.LayoutNodeSized,\r\n              //layoutConditions:~go.Part.LayoutAdded,\r\n              // fromLinkable: true, toLinkable: true,\r\n              alignment: go.Spot.Center,\r\n              alignmentFocus: go.Spot.Center,\r\n              contextMenu: diagram.__trtd.getNodeContextMenu(),\r\n              resizeAdornmentTemplate:  // specify what resize handles there are and how they look\r\n              $(go.Adornment, \"Spot\",\r\n                $(go.Placeholder),  // takes size and position of adorned object\r\n            //     $(go.Shape, \"Circle\",  // left resize handle\r\n            //       { alignment: go.Spot.Left, cursor: \"col-resize\",\r\n            //         desiredSize: new go.Size(9, 9), fill: \"lightblue\", stroke: \"dodgerblue\" }),\r\n            //     $(go.Shape, \"Circle\",  // right resize handle\r\n            //       { alignment: go.Spot.Right, cursor: \"col-resize\",\r\n            //         desiredSize: new go.Size(9, 9), fill: \"lightblue\", stroke: \"dodgerblue\" }),\r\n            //   $(go.Shape, \"Circle\",  // right resize handle\r\n            //   { alignment: go.Spot.Top, cursor: \"col-resize\",\r\n            //   desiredSize: new go.Size(9, 9), fill: \"lightblue\", stroke: \"dodgerblue\" }),\r\n              $(go.Shape, \"Circle\",  // right resize handle\r\n              { alignment: go.Spot.BottomRight, cursor: \"col-resize\",\r\n              desiredSize: new go.Size(15, 15), fill: \"lightblue\", stroke: \"dodgerblue\" }),\r\n                // $(go.TextBlock, // show the width as text\r\n                //   { alignment: go.Spot.Top, alignmentFocus: new go.Spot(0.5, 1, 0, -2),\r\n                //     stroke: \"dodgerblue\" },\r\n                //   new go.Binding(\"text\", \"adornedObject\",\r\n                //                  function(shp) { return shp.naturalBounds.width.toFixed(0); })\r\n                //       .ofObject())\r\n              ),\r\n              doubleClick: function (e, node){\r\n                  e.diagram.__trtd.selectText(e, node)\r\n              }\r\n\r\n              // selectionAdornmentTemplate: nodeSelectionAdornmentTemplate,\r\n          },\r\n          new go.Binding(\"locationSpot\", \"locationSpot\", function(v){\r\n              return go.Spot.parse(v)\r\n          }).makeTwoWay(function(v){\r\n              return go.Spot.stringify(v)\r\n          }),\r\n          new go.Binding(\"type\", \"type\", function(v){\r\n              return go.Panel[v]\r\n          }),\r\n          new go.Binding(\"visible\", \"visible\").makeTwoWay(),\r\n          new go.Binding(\"deletable\", \"deletable\").makeTwoWay(),\r\n          new go.Binding(\"movable\", \"movable\").makeTwoWay(),\r\n          new go.Binding(\"rotatable\", \"rotatable\").makeTwoWay(),\r\n          new go.Binding(\"location\", \"loc\", go.Point.parse).makeTwoWay(go.Point.stringify),\r\n          new go.Binding(\"isShadowed\", \"isShadowed\").makeTwoWay(),\r\n          new go.Binding(\"angle\", \"angle\").makeTwoWay(),\r\n          new go.Binding(\"selectable\", \"selectable\").makeTwoWay(),\r\n          new go.Binding(\"copyable\", \"copyable\").makeTwoWay(),\r\n          new go.Binding(\"layerName\", \"layerName\", function(v, d) {\r\n              return v ? v : \"\";\r\n          }),\r\n          $(go.Shape, {\r\n            strokeDashArray: null,\r\n            opacity:0.7,\r\n            stretch: go.GraphObject.UniformToFill,\r\n            // locationSpot: go.Spot.Center,  // the location is the center of the Shape\r\n            // strokeDashOffset:10,\r\n            name: \"SHAPE\",\r\n            figure: \"Circle\",\r\n            fill: \"rgba(0,255,0,1)\",\r\n            fromLinkable: false,\r\n            toLinkable: false,\r\n            width:100,\r\n            height:100,\r\n            cursor: \"pointer\",\r\n            minSize: new go.Size(50, 50),\r\n            // maxSize: new go.Size(100, 100),\r\n            strokeWidth: 1,\r\n            stroke: \"black\",\r\n            portId: \"\"\r\n\r\n        },\r\n        new go.Binding(\"strokeDashArray\", \"shiStrokeDashArray\", function(v) {\r\n            return JSON.parse(v)\r\n        }).makeTwoWay(function(v) {\r\n            return JSON.stringify(v)\r\n        }),\r\n        new go.Binding(\"fill\", \"fill\", function(v, obj) {\r\n            return v instanceof go.Brush ? v.color : v;\r\n        }).makeTwoWay(),\r\n        // new go.Binding(\"fill\", \"isSelected\", function(s, obj) { return s ? \"red\" : obj.part.data.color; }).ofObject()),\r\n        new go.Binding(\"desiredSize\", \"desiredSize\", function(v, d) {\r\n            // console.log(\"vd m\", v, d )\r\n            // if(!v) return d.part.findObject(\"SHAPE\").measuredBounds.size;\r\n            return go.Size.parse(v)\r\n        }).makeTwoWay(function(v) {\r\n            console.log(\"sizesizesizesize\")\r\n            // var size = new go.Size(v.width, v.height)\r\n            return go.Size.stringify(v)\r\n        }),\r\n        new go.Binding(\"stroke\", \"stroke\", function(v) {\r\n            return v instanceof go.Brush ? v.stroke : v;\r\n        }).makeTwoWay(),\r\n\r\n        new go.Binding(\"strokeWidth\", \"strokeWidth\", function(d) {\r\n            return d;\r\n        }).makeTwoWay(function(d) {\r\n            return d;\r\n        }),\r\n        new go.Binding(\"figure\", \"figure\").makeTwoWay(), \r\n        new go.Binding(\"opacity\", \"opacity\").makeTwoWay(), \r\n        // {\r\n        //     figure: properties.figure,\r\n        //     fill: properties.fill,\r\n        //     strokeWidth: properties.strokeWidth,\r\n        //     stroke: properties.stroke\r\n        // }\r\n    ),\r\n    // $(go.Shape, {\r\n    //         name: \"SHAPE_Back\",\r\n    //         figure: \"Rectangle\",\r\n    //         fill: \"rgba(128,128,128,0)\",\r\n    //         fromLinkable: true,\r\n    //         toLinkable: true,\r\n    //         strokeWidth: 0\r\n    //     },\r\n    //     new go.Binding(\"desiredSize\", \"width\", function(v) {\r\n    //         var va = (v / 2) * Math.sqrt(2);\r\n    //         return new go.Size(va - 3, va - 3);\r\n    //     }).ofObject(\"SHAPE\")\r\n    // ),\r\n          $(go.TextBlock, {\r\n                  name: \"TEXT\",\r\n                  alignment: new go.Spot(0.5, 0.5),\r\n                  font: \"18px 'Microsoft YaHei'\",\r\n                  editable: false,\r\n                //   areaBackground:\"gray\",\r\n                  //margin: 3, editable: true,\r\n                //   background:\"yellow\",\r\n                  stroke: \"black\",\r\n                  isMultiline: true,\r\n                  overflow: go.TextBlock.OverflowClip,\r\n                  wrap: go.TextBlock.WrapDesiredSize,\r\n                  textAlign: \"center\",\r\n                  verticalAlignment: go.Spot.Center,\r\n                  spacingAbove: 4,\r\n                  spacingBelow: 4,\r\n                  portId: \"TEXT\",\r\n                  margin:0,\r\n                  maxSize:new go.Size(600,NaN),\r\n                  minSize: new go.Size(10,10),\r\n                  stretch: go.GraphObject.UniformToFill,\r\n                  textEdited: function(textBlock,oldv,newv){\r\n\r\n                    // // if(textBlock.part.containingGroup.data.textAngle == \"horizontal\"){\r\n                    //   var centerText = textBlock.part.diagram.model.findNodeDataForKey(textBlock.part.data.centerText)\r\n                    //   if(centerText){\r\n                    //     console.log(\"centerTextcenterTextcenterTextcenterText\")\r\n                    var part = textBlock.part\r\n                    if(newv.trim() == \"\" &&(part.data.role == \"shiText\" || part.data.role == \"xuText\")){\r\n                        textBlock.part.diagram.model.startTransaction(\"text\")\r\n                        textBlock.part.diagram.model.setDataProperty(textBlock.part.data,\"nloc\", null)\r\n                        textBlock.part.diagram.model.commitTransaction(\"text\")\r\n                    }\r\n                    //   }\r\n                    // //   return;\r\n                    // // }\r\n                    // setTimeout(function(){\r\n                    //   console.log(\"textEditedtextEditedtextEdited\",textBlock.lineCount)\r\n                    //   if(!textBlock.text) return;\r\n                    //   if(textBlock.text && textBlock.text.trim() == \"\") return;\r\n                    //   if(textBlock.lineCount %2 != 0){\r\n                    //     if(newv[newv.length-1] == \"\\n\"){\r\n                    //       textBlock.text = newv.substring(0, newv.length-1)\r\n                    //       return;\r\n                    //     }\r\n                    //     textBlock.text = newv+\"\\n\"\r\n                    //   }\r\n                    // },100)\r\n                    \r\n                    // var enterCount = 0;\r\n                    if(textBlock.part.data.role && textBlock.part.data.role.indexOf(\"labelText\") > -1 ){\r\n                        textBlock.part.containingGroup.layout.isValidLayout = false\r\n                    }\r\n                    // for(var i=0;i<newv.length;i++){\r\n                      \r\n                    // }\r\n                    // textBlock.part.updateTargetBindings()\r\n    \r\n                    // if(textBlock.lineCount %2 != 0){\r\n                    //   if(newv[newv.length-1] == \"\\n\"){\r\n                    //     textBlock.text = newv.substring(0, newv.length-1)\r\n                    //     return;\r\n                    //   }\r\n                    //   textBlock.text = newv+\"\\n\"\r\n                    // }\r\n                  },\r\n              },\r\n              new go.Binding(\"background\", \"background\", function(v) {\r\n                  return v;\r\n              }).makeTwoWay(),\r\n              new go.Binding(\"areaBackground\", \"areaBackground\", function(v) {\r\n                  return v;\r\n              }).makeTwoWay(),\r\n              new go.Binding(\"textAlign\", \"textAlign\", function(v) {\r\n                  return v;\r\n              }).makeTwoWay(),\r\n              new go.Binding(\"spacingAbove\", \"spacingline\", function(v) {\r\n                  return helpers.tdTransToNum(v, 4);\r\n              }).makeTwoWay(),\r\n              new go.Binding(\"spacingBelow\", \"spacingline\", function(v) {\r\n                  return helpers.tdTransToNum(v, 4);\r\n              }).makeTwoWay(),\r\n              new go.Binding(\"maxSize\",\"\",function(data,d,m){\r\n                  // console.log(\"maxSize\",v,m,d)\r\n                  var width = NaN\r\n                  var height = NaN\r\n                  if(data.width){\r\n                      width = data.width\r\n                  }\r\n                  if(data.height){\r\n                      height = data.height\r\n                  }\r\n\r\n                  return new go.Size(width,height)\r\n              }),\r\n              new go.Binding(\"minSize\",\"minSize\",function(v){\r\n                  // console.log(\"maxSize\",v,m,d)\r\n\r\n                  return go.Size.parse(v)\r\n              }),\r\n              // new go.Binding(\"width\", \"width\", function(v) {\r\n              //     return v;\r\n              // }).makeTwoWay(),\r\n              // new go.Binding(\"height\", \"height\", function(v) {\r\n              //     return v;\r\n              // }).makeTwoWay(),\r\n              // new go.Binding(\"height\", \"height\", function (v) {\r\n              //   return v;\r\n              // }).ofObject(\"SHAPE\"),\r\n              new go.Binding(\"text\", \"text\").makeTwoWay(),\r\n              new go.Binding(\"stroke\", \"textStroke\").makeTwoWay(),\r\n              new go.Binding(\"font\", \"font\").makeTwoWay()\r\n          ),\r\n        //   $(go.Panel,\"Vertical\",\r\n        //     {alignment: go.Spot.Left,\r\n        //     alignmentFocus: go.Spot.Right,\r\n        //     },\r\n        //     $(go.Shape,{\r\n        //         name:\"ICON\",\r\n        //         width:16,\r\n        //         height:16,\r\n        //         visible: false,\r\n        //         click: function(e){\r\n        //             console.log(\"icon click\")\r\n        //         },\r\n        //         figure:\"Circle\",\r\n        //         fill:\"red\",\r\n        //         strokeWidth:0,\r\n        //         margin: 3\r\n        //     },\r\n    \r\n        //     // new go.Binding(\"location\", \"loc\", go.Point.parse).makeTwoWay(go.Point.stringify),\r\n        //     new go.Binding(\"figure\", \"figure\").makeTwoWay(),\r\n        //     new go.Binding(\"visible\", \"iconVisible\").makeTwoWay(),\r\n        //     new go.Binding(\"fill\", \"fill\", function(v, obj) {\r\n        //         return v\r\n        //     }).makeTwoWay()\r\n        //     )\r\n        // ),\r\n    //     $(go.Shape,\"Rectangle\",{\r\n    //         name: \"textBorder\",\r\n    //         stroke: \"green\",\r\n    //         strokeWidth: 3,\r\n    //         strokeDashArray: [10, 5],\r\n    //         visible:false,\r\n    //         fill:\"transparent\",\r\n    //         alignment: go.Spot.Center,\r\n    //         // alignmentFocus: go.Spot.Right,\r\n    //         width:100,\r\n    //         height:270, \r\n    //     },\r\n    //     new go.Binding(\"stroke\",\"textStroke\"),\r\n    //     new go.Binding(\"desiredSize\",\"\", function(v,d){\r\n    //         // console.log(\"vvvvvvvvvvvvv,\",v,d)\r\n    //         if(!helpers.checkPhone()){\r\n    //             // return new go.Size(Math.max(d.part.naturalBounds.width,100)-3, Math.max(d.part.naturalBounds.height,100)-3);\r\n    //             return new go.Size(d.part.naturalBounds.width-3, d.part.naturalBounds.height-3);\r\n    //         }\r\n    //         var olive = d.part.diagram.findNodeForKey(d.part.data.olive)\r\n    //         return new go.Size(olive.naturalBounds.width-3, olive.naturalBounds.height);\r\n    //         // return new go.Size(d.part.actualBounds.width-3, d.part.actualBounds.height-3);\r\n    //     })\r\n    // ),\r\n        // $(go.Shape,\"Circle\",{\r\n        //     name: \"place\",\r\n        //     stroke: \"red\",\r\n        //     strokeWidth: 1,\r\n        //     strokeDashArray: null,\r\n        //     visible:false,\r\n        //     fill:\"transparent\",\r\n        //     alignment: go.Spot.Center,\r\n        //     // alignmentFocus: go.Spot.Right,\r\n        //     width:50,\r\n        //     height:50, \r\n        // },\r\n        // new go.Binding(\"stroke\",\"placeStroke\"),\r\n        // )\r\n      )\r\n    }\r\n}\r\n\r\nmodule.exports = AutoTextTemplate\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/nodeTemplate/shapeTextNodeTemplate.js","/**\r\n * 天盘连接线的布局\r\n */\r\n'use strict';\r\n\r\n// import * as go from 'gojs';\r\n\r\n// let menus = require('../templates/menu');\r\nvar $ = go.GraphObject.make;\r\n\r\nfunction SmoothLink() {\r\n    go.Link.call(this);\r\n}\r\n\r\nfunction computeOffset(newR, newStartAngle) {\r\n    //console.log(\"newStartAngle:\"+newStartAngle);\r\n    var ctl2, dy, dx; //需要调整\r\n    if (newStartAngle >= 0 && newStartAngle <= 90) {\r\n        dy = newR * Math.sin(newStartAngle * Math.PI / 180);\r\n        dx = newR * Math.cos(newStartAngle * Math.PI / 180);\r\n        return [dx, dy];\r\n    } else if (newStartAngle > 90 && newStartAngle <= 180) {\r\n        dy = newR * Math.sin((180 - newStartAngle) * Math.PI / 180);\r\n        dx = newR * Math.cos((180 - newStartAngle) * Math.PI / 180);\r\n        return [-dx, dy];\r\n    } else if (newStartAngle > 180 && newStartAngle <= 270) {\r\n        dy = newR * Math.sin((newStartAngle - 180) * Math.PI / 180);\r\n        dx = newR * Math.cos((newStartAngle - 180) * Math.PI / 180);\r\n        return [-dx, -dy];\r\n    } else if (newStartAngle > 270 && newStartAngle <= 360) {\r\n        dy = newR * Math.sin((360 - newStartAngle) * Math.PI / 180);\r\n        dx = newR * Math.cos((360 - newStartAngle) * Math.PI / 180);\r\n        return [dx, -dy];\r\n    }\r\n}\r\n\r\n// var tdCurrentTheme = menus.tdCurrentTheme;\r\n// 根据根节点与两个节点的位置计算出圆心在AB中垂线与 过根节点且平行于AB的射线的交点 D\r\nfunction computeNewCenter(O, A, B) {\r\n    var C = new go.Point((A.x + B.x) / 2, (A.y + B.y) / 2); //AB的中点\r\n    if (O.equals(A)) {\r\n        var locD = C.copy();\r\n        var r = Math.sqrt(C.distanceSquaredPoint(A));\r\n        var direction = (A.directionPoint(B) + 90) % 360;\r\n        var distance = r * 0.15;\r\n        var offset = computeOffset(distance, direction);\r\n        locD.offset(offset[0], offset[1]); //圆心坐标\r\n        r = Math.sqrt(locD.distanceSquaredPoint(A));\r\n        return [r, locD.x, locD.y];\r\n    }\r\n    var OC = Math.sqrt(O.distanceSquaredPoint(C));\r\n    var directionOC = O.directionPoint(C);\r\n    var directionFlagOD = O.distanceSquaredPoint(B) < O.distanceSquaredPoint(A);\r\n    if (directionFlagOD) {\r\n        var directionOD = B.directionPoint(A); //OD平行于AB\r\n    } else {\r\n        var directionOD = A.directionPoint(B); //OD平行于AB\r\n    }\r\n\r\n    var angleDOC = Math.abs(directionOC - directionOD);\r\n    if (angleDOC > 90 && angleDOC < 180) {\r\n        angleDOC = 180 - angleDOC;\r\n    } else if (angleDOC >= 180) {\r\n        angleDOC = 360 - angleDOC; //角doc是润角\r\n    }\r\n    // if(O.distanceSquaredPoint(B) > O.distanceSquaredPoint(A)){\r\n    //   directionOD = B.directionPoint(A);\r\n    // }\r\n    var OD = OC * Math.cos(angleDOC * Math.PI / 180);\r\n    var offset = computeOffset(OD, directionOD);\r\n    var locD = O.copy();\r\n    locD.offset(offset[0], offset[1]); //圆心坐标\r\n    var r = Math.sqrt(locD.distanceSquaredPoint(A));\r\n    return [r, locD.x, locD.y];\r\n    // return locD;\r\n}\r\n\r\ngo.Diagram.inherit(SmoothLink, go.Link);\r\n\r\nSmoothLink.prototype.makeGeometry = function() {\r\n    // get the Geometry created by the standard behavior\r\n    var geo = go.Link.prototype.makeGeometry.call(this);\r\n    if (geo.type !== go.Geometry.Path || geo.figures.length === 0) return geo;\r\n    return geo;\r\n};\r\n\r\n/** @override */\r\nSmoothLink.prototype.computePoints = function() {\r\n\r\n    var myDiagram = this.diagram;\r\n\r\n    var nodes = [];\r\n    if (this.fromNode == null || this.toNode == null) return true;\r\n    if (this.fromNode.location.equals(this.toNode.location)) {\r\n        return false;\r\n    }\r\n    var start = this.fromNode.location.copy();\r\n    var end = this.toNode.location.copy();\r\n\r\n    if (!start.isReal() || !end.isReal()) {\r\n        return true;\r\n    }\r\n    var A = start;\r\n    var B = end;\r\n    var O = myDiagram.findNodeForKey(this.toNode.data.parent);\r\n    if (!O) return true;\r\n    O = O.location;\r\n    var cent = computeNewCenter(O, A, B);\r\n\r\n\r\n\r\n    var centInfo = cent;\r\n    var centorPoint = new go.Point(centInfo[1], centInfo[2]);\r\n\r\n    this.micenter = centorPoint;\r\n    var rcenter = centInfo[0];\r\n    var rstart = this.fromNode.actualBounds.width / 2;\r\n    var rend = this.toNode.actualBounds.width / 2;\r\n    var center2mid = (2 * rcenter * rcenter - rstart * rstart) / (2 * rcenter); //大圆到大圆与开始节点交点中点的距离，然后求出夹角\r\n    var af = Math.acos(center2mid / rcenter) * 180 / Math.PI;\r\n\r\n    var geo = new go.Geometry(go.Geometry.Line);\r\n    geo.startX = centorPoint.x;\r\n    geo.startY = centorPoint.y;\r\n    geo.endX = this.fromNode.location.x;\r\n    geo.endY = this.fromNode.location.y;\r\n    if(!af){\r\n        af = 0;\r\n    }\r\n    geo.rotate(af, centorPoint.x, centorPoint.y); //相对圆心旋转，顺时针\r\n    var start2 = new go.Point(geo.endX, geo.endY);\r\n    // var start2 = new go.Point(this.fromNode.location.x, this.fromNode.location.y);\r\n\r\n    center2mid = (2 * rcenter * rcenter - rend * rend) / (2 * rcenter); //大圆到大圆与开始节点交点中点的距离，然后求出夹角\r\n    af = Math.acos(center2mid / rcenter) * 180 / Math.PI;\r\n    geo.endX = this.toNode.location.x;\r\n    geo.endY = this.toNode.location.y;\r\n    if(!af){\r\n        af = 0;\r\n    }\r\n    geo.rotate(-af, centorPoint.x, centorPoint.y); //相对圆心旋转,逆时针\r\n    var end2 = new go.Point(geo.endX, geo.endY);\r\n\r\n    //console.log(Math.abs(centorPoint.directionPoint(start2) - centorPoint.directionPoint(end2)));\r\n    //var result = computeControlPoint(start,midPoint,end,centInfo);\r\n    var result = computeControlPoint(start2, null, end2, centInfo);\r\n\r\n    var ctl1 = result[0];\r\n    var ctl2 = result[1];\r\n\r\n    this.clearPoints();\r\n    if (isNaN(start2.x) || isNaN(start2.y)) {\r\n        start2 = this.fromNode.location.copy();\r\n    }\r\n    if (isNaN(end2.x) || isNaN(end2.y)) {\r\n        end2 = this.toNode.location.copy();\r\n    }\r\n    //start1.rotate();\r\n    this.points.add(start2);\r\n    this.points.add(result[0]);\r\n    this.points.add(result[1]);\r\n    this.points.add(end2);\r\n\r\n    var oust = \"\";\r\n    return true;\r\n};\r\n\r\n\r\nfunction computeControlPoint(p1, p2, p3) {\r\n\r\n    var result;\r\n    result = arguments[3] ? arguments[3] : triangleCircle(p1, p2, p3);\r\n    var radius = result[0];\r\n    var cent = new go.Point(result[1], result[2]);\r\n\r\n    //起始节点的弧度\r\n    var sweep = Math.abs(cent.directionPoint(p1) - cent.directionPoint(p3));\r\n    sweep = sweep > 180 ? 360 - sweep : sweep;\r\n    //console.log(\"sweep:\"+sweep);\r\n    var newR = radius / Math.cos(sweep / 3 * Math.PI / 180);\r\n    var geo = new go.Geometry(go.Geometry.Line);\r\n    geo.startX = cent.x;\r\n    geo.startY = cent.y;\r\n    geo.endX = p1.x;\r\n    geo.endY = p1.y;\r\n    geo.rotate(sweep / 3, cent.x, cent.y); //相对圆心旋转3分之1弧度\r\n    var newStartAngle = cent.direction(geo.endX, geo.endY);\r\n    var ctl1;\r\n    result = computeOffset(newR, newStartAngle);\r\n    ctl1 = cent.copy().offset(result[0], result[1]);\r\n\r\n    geo.rotate(sweep / 3, cent.x, cent.y); //相对圆心旋转3分之1弧度\r\n    newStartAngle = cent.direction(geo.endX, geo.endY);\r\n\r\n    var ctl2; //需要调整\r\n    result = computeOffset(newR, newStartAngle);\r\n    ctl2 = cent.copy().offset(result[0], result[1]);\r\n\r\n    return [ctl1, ctl2];\r\n}\r\n\r\n\r\nfunction createTianpanLink(diagram) {\r\n    return $(SmoothLink, {\r\n            curve: go.Link.Bezier,\r\n            layerName: \"\",\r\n            isTreeLink: true,\r\n            //curve: go.Link.Bezier,\r\n            curviness: 30,\r\n            //smoothness:1,\r\n            adjusting: go.Link.Stretch,\r\n            relinkableFrom: true,\r\n            relinkableTo: true,\r\n            reshapable: true,\r\n            layoutConditions: go.Part.LayoutStandard & ~go.Part.LayoutNodeSized,\r\n            mouseDragEnter: function(e, obj) {\r\n                var link = obj.part;\r\n                var shape = link.findObject(\"SHAPE\");\r\n                shape._preStoke = shape.stroke;\r\n                shape.stroke = \"darkred\";\r\n                shape._preStrokeWidth = shape.strokeWidth;\r\n                shape.strokeWidth = 5;\r\n            },\r\n            mouseDragLeave: function(e, obj) {\r\n                var link = obj.part;\r\n                var shape = link.findObject(\"SHAPE\");\r\n                shape.stroke = shape._preStoke;\r\n                shape.strokeWidth = shape._preStrokeWidth;\r\n            },\r\n            mouseDrop: function(e, obj) {\r\n                var link = obj.part;\r\n                var draggedNode = e.diagram.selection.first();\r\n                if (!draggedNode instanceof go.Node) {\r\n                    return;\r\n                }\r\n                if (!draggedNode instanceof go.Group) {\r\n                    return;\r\n                }\r\n                if (draggedNode.data.key == 1) {\r\n                    return;\r\n                }\r\n                var fromNode = link.fromNode,\r\n                    toNode = link.toNode;\r\n                //disconnectFromTreeStructure(draggedNode);\r\n                if (toNode.data.parent == fromNode.data.key) {\r\n                    e.diagram.__trtd.setNodeAsChildren(draggedNode, fromNode);\r\n                } else {\r\n                    e.diagram.__trtd.setNodeAsSibling(draggedNode, fromNode);\r\n                }\r\n            }\r\n        }, // negate curviness if not clockwise\r\n        $(go.Shape, {\r\n                name: \"SHAPE\",\r\n                stroke: \"#767678\",\r\n                strokeWidth: 3\r\n            },\r\n            new go.Binding(\"strokeWidth\", \"strokeWidth\").makeTwoWay(),\r\n            new go.Binding(\"stroke\", \"color\").makeTwoWay(),\r\n            new go.Binding(\"strokeDashArray\", \"strokeDashArray\", function(v) {\r\n                try {\r\n                    var val = [parseInt(v.split(\" \")[0]), parseInt(v.split(\" \")[1])];\r\n                } catch (e) {\r\n                    var val = null;\r\n                }\r\n                return val;\r\n            }).makeTwoWay(function(v) {\r\n                return v[0] + \" \" + v[1];\r\n            }) //保留，设置边线样式\r\n\r\n        ),\r\n        $(go.Shape, {\r\n                name: \"Arrow\",\r\n                toArrow: \"Triangle\",\r\n                stroke: \"#767678\",\r\n                strokeWidth: 3\r\n            },\r\n            new go.Binding(\"strokeWidth\", \"strokeWidth\"),\r\n            new go.Binding(\"fill\", \"color\"),\r\n            new go.Binding(\"stroke\", \"color\"),\r\n            new go.Binding(\"toArrow\", \"toArrow\")\r\n        ),\r\n        new go.Binding(\"curviness\", \"curviness\").makeTwoWay(),\r\n        new go.Binding(\"points\").makeTwoWay()\r\n\r\n    );\r\n}\r\n\r\n\r\nmodule.exports = createTianpanLink\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/linkTemplate/createTianpanLink.js","// require('./core/core.controller')(Trtd);\r\n// import * as go from 'gojs';\r\nvar helpers = require('../helpers/helpers.gojs')\r\nlet lang = require('../assets/localization');\r\nvar createPictureSingleNodeTemplate = require('../nodeTemplate/createPictureSingleNodeTemplate')\r\n// var createPictureNodeTemplate = require('../nodeTemplate/createPictureNodeTemplate')\r\nvar TRTD_BASE = require('./trtd').Trtd\r\n\r\nvar $ = go.GraphObject.make;\r\n\r\nclass Trtd extends TRTD_BASE {\r\n\tconstructor(div, config){\r\n       \r\n        super(div, config)\r\n\t\tthis.config = config;\r\n\t\tthis.modelChangedListener = config.modelChangedListener;\r\n\t\tthis.type = config.type;\r\n\t\tthis.diagram = {};\r\n        this.model = config.model;\r\n        // this.tpid = config.tpid;\r\n        this.readOnly = false;// 控制是否只读\r\n        if(config.readOnly != null){\r\n            this.readOnly = config.readOnly\r\n        }\r\n        this.initDiagramBase(div, config); // 基类初始化diagram\r\n\t\t// 初始化diagram\r\n        this.diagram = this.initDiagram(div, config);\r\n        // this.diagram.__trtd = this;\r\n\t\tthis.initListener();\r\n\t\t// Then you will need to construct a Model (usually a GraphLinksModel) for the Diagram, initialize its data by setting its Model.nodeDataArray and other properties, and then set the diagram's model.\r\n        if(this.model){\r\n            this.initModel();\r\n        }\r\n\t}\r\n/**\r\n * method 初始化diagram\r\n * @param {*} div \r\n * @param {*} config \r\n */\r\n\tinitDiagram(div, config){\r\n        var myDiagram = this.diagram;\r\n        \r\n        var defaultConfig = {\r\n            // initialAutoScale: go.Diagram.Uniform,\r\n            // initialContentAlignment: go.Spot.Center,\r\n            // initialDocumentSpot: go.Spot.Center,\r\n            // initialViewportSpot: go.Spot.Center,\r\n            \"undoManager.isEnabled\": true,\r\n            // \"toolManager.hoverDelay\": 100,\r\n            // \"toolManager.mouseWheelBehavior\": go.ToolManager.WheelZoom,\r\n            // maxScale: 5.0,\r\n            // minScale: 0.05,\r\n            allowMove: true,\r\n            // allowDrop: true,\r\n            // hasVerticalScrollbar: false,\r\n            // hasHorizontalScrollbar: false,\r\n            // \"draggingTool.isCopyEnabled\": false,\r\n            // BackgroundSingleClicked: function(e) {\r\n            // \tcloseToolbarWindow();\r\n            // },\r\n            \"animationManager.isEnabled\": false,\r\n            // scrollMode: go.Diagram.InfiniteScroll,\r\n            // validCycle: go.Diagram.CycleDestinationTree,\r\n            // scrollMargin: 50,\r\n            // \"ModelChanged\": function(e){\r\n            //     that.saveModel(e)\r\n            // },\r\n            // \"TextEdited\": onTextChanged,\r\n        };\r\n        var diagramConfig = Object.assign(defaultConfig, config.diagramConfig);\r\n        this.diagram.setProperties(diagramConfig);\r\n       \r\n        \r\n        this.addNodeTemplate();\r\n        // this.customMenu();\r\n        // this.addDiagramContextMenu();\r\n        // this.addLinkTemplate();\r\n        // this.addGroupTemplate();\r\n        return myDiagram\r\n    }\r\n    getTdData(){\r\n        return this.diagram.model.toJson()\r\n    }\r\n    // 以下两个方法控制菜单显示\r\n    getDefaultCustomMenuDivStr(){\r\n        return `\r\n        <ul>\r\n            <li trtd_action=\"addFollowerGround\"><a class=\"i18n\" data-lang=\"insertsl\">增加同级节点</a></li>\r\n            <li trtd_action=\"addNewCircle\"><a class=\"i18n\" data-lang=\"icn\">增加子节点</a></li>\r\n            <li trtd_action=\"apiDeleteSelection\"><a class=\"i18n\" data-lang=\"remove\">删除</a></li>\r\n        </ul>\r\n        `\r\n    }\r\n    getShowContextMenus(node){\r\n        if(node){\r\n            return \"addFollowerGround,\" + \"addNewCircle,\"+\"apiDeleteSelection\";\r\n        }else{\r\n            return \"none\"\r\n        }\r\n    }\r\n\r\n    addTextNode(message){\r\n        console.log('eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee:');\r\n        var myDiagram = this.diagram;\r\n        myDiagram.startTransaction();\r\n        var text = { text: message||lang.trans('blankText'), category: 'text' };\r\n        text.loc = go.Point.stringify(myDiagram.lastInput.documentPoint);\r\n        myDiagram.model.addNodeData(text);\r\n        myDiagram.commitTransaction()\r\n    }\r\n\r\n\r\n    /**\r\n     * method 初始化model\r\n     */\r\n\tinitModel(model){\r\n        if(model){\r\n            this.model = model;\r\n        }\r\n        console.log('initModel')\r\n        var tmpModel = go.Model.fromJson(this.model);\r\n        if(tmpModel.modelData.currentType == 'dipan'){\r\n            tmpModel.nodeDataArray = tmpModel.nodeDataArray.filter((d)=>{\r\n                if(!d.isGroup){\r\n                    delete d.group\r\n                    return true;\r\n                }\r\n            })\r\n            // tmpModel.nodeDataArray = \r\n            tmpModel.linkDataArray=[]\r\n        }\r\n\r\n        this.diagram.layout.isInitial = false;\r\n        //randomUrl(tmpModel);\r\n        tmpModel.modelData.type = this.type\r\n        // tmpModel.modelData.version = Trtd.version\r\n        this.diagram.model = tmpModel;\r\n        // configModel(myDiagram.model);\r\n        this.groundLayout(this.diagram);\r\n        this.diagram.updateAllTargetBindings();\r\n    }\r\n    loadModel(model){\r\n       \r\n        this.initModel(model)\r\n    }\r\n    /**\r\n     * method: 初始化监听方法\r\n     */\r\n\tinitListener(){\r\n\t\tconsole.log('initListener')\r\n    }\r\n    /**\r\n     * 添加节点模板\r\n     */\r\n\r\n   \r\n    addNodeTemplate(){\r\n\r\n        var that = this;\r\n        var myDiagram = this.diagram\r\n      \r\n        var globalProperties = this.tdGetModelData(null, myDiagram.model,myDiagram); //获取所有全局属性到一个对象中,从localstorage中\r\n        //var layerThickness = myDiagram.model.modelData.layerThickness;\r\n        var layerThickness = parseInt(globalProperties['layerThickness']);\r\n        console.log(layerThickness)\r\n        \r\n        var tdDipanTextAngle = globalProperties['tdDipanTextAngle'];\r\n        console.log(tdDipanTextAngle)\r\n        myDiagram.nodeTemplateMap.add(\"dipan\", this.createDipanTemplate(layerThickness,tdDipanTextAngle));\r\n        myDiagram.nodeTemplateMap.add(\"Root\", this.getDipanRootTemplate(layerThickness));\r\n        myDiagram.nodeTemplateMap.add(\"3\", createPictureSingleNodeTemplate(this.diagram));\r\n        // myDiagram.nodeTemplateMap.add(\"4\", createPictureNodeTemplate(this.diagram));\r\n        // myDiagram.nodeTemplateMap.add(\"text\", this.createTextNodeTemplate());\r\n        \r\n    }\r\n\r\n    \r\n    createTextNodeTemplate () {\r\n    var properties = {\r\n        figure: \"Rectangle\",\r\n        fill: \"rgba(0,0,0,0)\",\r\n        strokeWidth: 1,\r\n        stroke: \"rgba(0,0,0,0)\",\r\n        fontSize: 15,\r\n        font: \"sans-serif\"\r\n    };\r\n    return $(go.Node, \"Spot\", {\r\n            \"_controlExpand\": true,\r\n            layerName: \"Foreground\",\r\n            locationSpot: go.Spot.Center,\r\n            resizeCellSize: new go.Size(10, 10),\r\n            locationObjectName: \"SHAPE\",\r\n            resizable: true,\r\n            resizeObjectName: \"SHAPE\", // user can resize the Shape\r\n            rotatable: true,\r\n            location: new go.Point(0, 0),\r\n            //rotateObjectName: \"SHAPE\",  // rotate the Shape without rotating the label\r\n            // doubleClick: selectText,\r\n            toMaxLinks: 1,\r\n            layoutConditions: go.Part.LayoutStandard,\r\n            //layoutConditions:~go.Part.LayoutAdded,\r\n            // fromLinkable: true, toLinkable: true,\r\n            alignment: go.Spot.Center,\r\n            alignmentFocus: go.Spot.Center,\r\n            contextMenu: this.getNodeContextMenu\r\n            // selectionAdornmentTemplate: nodeSelectionAdornmentTemplate,\r\n        },\r\n        new go.Binding(\"location\", \"loc\", go.Point.parse).makeTwoWay(go.Point.stringify),\r\n        new go.Binding(\"isShadowed\", \"isShadowed\").makeTwoWay(),\r\n        new go.Binding(\"angle\", \"angle\").makeTwoWay(),\r\n        new go.Binding(\"selectable\", \"selectable\").makeTwoWay(),\r\n        new go.Binding(\"layerName\", \"layerName\", function(v, d) {\r\n            return v ? v : \"\";\r\n        }).makeTwoWay(function(v) {\r\n            return v;\r\n        }),\r\n        $(go.Shape, {\r\n                strokeDashArray: null,\r\n                // strokeDashOffset:10,\r\n                name: \"SHAPE\",\r\n                figure: \"Rectangle\",\r\n                fill: \"rgba(0,0,0,0)\",\r\n                fromLinkable: true,\r\n                toLinkable: true,\r\n                cursor: \"pointer\",\r\n                minSize: new go.Size(50, 50),\r\n                strokeWidth: 2,\r\n                stroke: \"rgba(0,0,0,0)\",\r\n                portId: \"\",\r\n                width:150\r\n            },\r\n            new go.Binding(\"strokeDashArray\", \"strokeDashArray\", function(v) {\r\n                return [v.split()[0], v.split()[1]];\r\n            }).makeTwoWay(function(v) {\r\n                return v[0] + \" \" + v[1];\r\n            }), //保留，设置边线样式\r\n            new go.Binding(\"fill\", \"fill\", function(v, obj) {\r\n                return v instanceof go.Brush ? v.color : v;\r\n            }).makeTwoWay(),\r\n            // new go.Binding(\"fill\", \"isSelected\", function(s, obj) { return s ? \"red\" : obj.part.data.color; }).ofObject()),\r\n            new go.Binding(\"width\", \"width\", function(v) {\r\n                //alert(v);\r\n                return v;\r\n            }).makeTwoWay(function(v) {\r\n                return v;\r\n            }),\r\n            new go.Binding(\"height\", \"height\", function(v) {\r\n                //alert(v);\r\n                return v;\r\n            }).makeTwoWay(function(v) {\r\n                return v;\r\n            }),\r\n            new go.Binding(\"stroke\", \"stroke\", function(v) {\r\n                return v instanceof go.Brush ? v.stroke : v;\r\n            }).makeTwoWay(),\r\n            new go.Binding(\"strokeWidth\", \"strokeWidth\", function(d) {\r\n                return d;\r\n            }).makeTwoWay(function(d) {\r\n                return d;\r\n            }),\r\n            new go.Binding(\"figure\", \"figure\").makeTwoWay(), {\r\n                figure: properties.figure,\r\n                fill: properties.fill,\r\n                strokeWidth: properties.strokeWidth,\r\n                stroke: properties.stroke\r\n            }\r\n        ),\r\n        $(go.Shape, {\r\n                name: \"SHAPE_Back\",\r\n                figure: \"Rectangle\",\r\n                fill: \"rgba(0,0,0,0)\",\r\n                // fromLinkable: true,\r\n                // toLinkable: true,\r\n                strokeWidth: 0\r\n            },\r\n            new go.Binding(\"width\", \"width\", function(v) {\r\n                return v;\r\n            }).ofObject(\"SHAPE\"),\r\n            new go.Binding(\"height\", \"height\", function(v) {\r\n                return v;\r\n            }).ofObject(\"SHAPE\")\r\n        ),\r\n        $(go.TextBlock, {\r\n                name: \"TEXT\",\r\n                alignment: new go.Spot(0.5, 0.5),\r\n                font: \"bold \" + 22 + \"px 幼圆\",\r\n                editable: true,\r\n                //margin: 3, editable: true,\r\n                stroke: \"black\",\r\n                isMultiline: true,\r\n                overflow: go.TextBlock.OverflowClip,\r\n                wrap: go.TextBlock.WrapDesiredSize,\r\n                textAlign: \"center\",\r\n                spacingAbove: 4,\r\n                spacingBelow: 4,\r\n                portId: \"TEXT\",\r\n                stretch: go.GraphObject.Fill\r\n            },\r\n            new go.Binding(\"textAlign\", \"textAlign\", function(v) {\r\n                return _.contains(['start', 'center', 'end'], v) ? v : \"center\";\r\n            }).makeTwoWay(),\r\n            new go.Binding(\"spacingAbove\", \"spacingline\", function(v) {\r\n                return helpers.tdTransToNum(v, 4);\r\n            }).makeTwoWay(),\r\n            new go.Binding(\"spacingBelow\", \"spacingline\", function(v) {\r\n                return helpers.tdTransToNum(v, 4);\r\n            }).makeTwoWay(),\r\n            new go.Binding(\"width\", \"width\", function(v) {\r\n                return v;\r\n            }).ofObject(\"SHAPE\"),\r\n            // new go.Binding(\"height\", \"height\", function (v) {\r\n            //   return v;\r\n            // }).ofObject(\"SHAPE\"),\r\n            new go.Binding(\"text\", \"text\").makeTwoWay(),\r\n            new go.Binding(\"stroke\", \"textStroke\").makeTwoWay(),\r\n            new go.Binding(\"font\", \"font\").makeTwoWay()\r\n        )\r\n    );\r\n}\r\n\r\n    /**\r\n     * method 地盘模板\r\n     * @param {*} layerThickness \r\n     * @param {*} tdDipanTextAngle \r\n     */\r\n    createDipanTemplate (layerThickness, tdDipanTextAngle) {\r\n        console.log(layerThickness)\r\n        if (layerThickness == null) {\r\n            var layerThickness = 100;\r\n        }\r\n\r\n        if (tdDipanTextAngle == null) {\r\n            var tdDipanTextAngle = \"zhengli\";\r\n        }\r\n        var that = this;\r\n        var $ = go.GraphObject.make;\r\n        return $(go.Node, \"Spot\", {\r\n                locationSpot: go.Spot.Center, // Node.location is the center of the TextBlock\r\n                locationObjectName: \"MAIN\",\r\n                selectionObjectName: \"SHAPE\",\r\n                click: function(e, node) {\r\n                    console.log(node.data)\r\n                    if(that.readOnly){\r\n                        if(node.diagram.__trtd.nodeClickListener){\r\n                            node.diagram.__trtd.nodeClickListener(node);\r\n                        }\r\n                    }\r\n                \r\n                },\r\n                contextMenu: this.getNodeContextMenu,\r\n                movable: false,\r\n                doubleClick: function(e){\r\n                    console.log(\"that.readOnlythat.readOnly\",that.readOnly)\r\n                    if(that.readOnly){\r\n                        return;\r\n                    }\r\n\r\n                    var myDiagram = e.diagram;\r\n                    var node = myDiagram.selection.first();\r\n                    // if(node.data.istemp) return;\r\n                    if (!node) return;\r\n                    // removeNodeRemarkTips();\r\n                    var tb = myDiagram.selection.first().findObject('TEXT');\r\n                    if (tb) myDiagram.commandHandler.editTextBlock(tb);\r\n                    helpers.simulateEnterWithAlt(e);\r\n                    changeTemp2normal(myDiagram)\r\n                },\r\n                selectionAdorned:!that.readOnly,\r\n                selectionAdornmentTemplate: \r\n                     $(go.Adornment, \"Spot\",\r\n                        $(go.Panel, \"Auto\",\r\n                            $(go.Shape, { fill: 'rgba(255,232,211,0.1)', stroke: \"blue\", strokeWidth: 2 }),\r\n                            $(go.Placeholder) // this represents the selected Node\r\n                        ),\r\n                        // the button to create a \"next\" node, at the top-right corner\r\n                        $(\"Button\", {\r\n                                alignment: go.Spot.RightCenter,\r\n                                alignmentFocus: go.Spot.Bottom,\r\n                                width: 30,\r\n                                height: 30,\r\n                \r\n                                click: (e) => {\r\n                                    console.log(e.diagram.selection.first().data)\r\n                                    console.log(e.diagram.selection.first().data.parent)\r\n                                    var node = e.diagram.selection.first();\r\n                                    if(node.data.parent){\r\n                                        var parentNode = node.diagram.findNodeForKey(node.data.parent);\r\n                                        if(parentNode.data.istemp){\r\n                                            return\r\n                                        }\r\n                                    }\r\n                                    that.addNewCircle(e) // this function is defined below\r\n                                } \r\n                                \r\n                            },\r\n                            $(go.Shape, \"PlusLine\", { desiredSize: new go.Size(15, 15) })\r\n                        ),\r\n                        // end button\r\n                        $(\"Button\", {\r\n                                alignment: go.Spot.BottomCenter,\r\n                                width: 30,\r\n                                height: 30,\r\n                                //visible:function(d){\r\n                                //    return !isUndefined(d.istemp)&&d.istemp?false:true;\r\n                                //},\r\n                                click: function(e) {\r\n                                    console.log(e)\r\n                                    console.log(e.diagram.selection.first().data)\r\n                                    //判断临时节点\r\n                                    if(e.diagram.selection.first().data.istemp){\r\n                                        return\r\n                                    }\r\n                                    \r\n                                    that.addFollowerGround(e);\r\n                                    } // this function is defined below\r\n                                    \r\n                            },\r\n                            $(go.Shape, \"PlusLine\", { desiredSize: new go.Size(15, 15) })\r\n                        ) \r\n                        //备注\r\n                    ),\r\n                mouseOver: function(e, node) {\r\n                },\r\n                mouseLeave: function(e, node) {\r\n                    //removeNodeRemarkTips();\r\n                },\r\n                mouseDragEnter: function(e, node, prev) {\r\n                    return;\r\n                },\r\n                mouseDragLeave: function(e, node, next) {\r\n                    return;\r\n                },\r\n                mouseDrop: function(e, node) {\r\n                    return;\r\n                }\r\n            },\r\n            new go.Binding(\"angle\", \"dangle\"),\r\n            new go.Binding(\"location\", \"loc\", go.Point.parse).makeTwoWay(go.Point.stringify),\r\n            new go.Binding(\"selectionAdorned\", \"selectionAdorned\", function(v, d) {\r\n                console.log(v)\r\n                return v ? v : \"\";\r\n            }).makeTwoWay(function(v) {\r\n                return v;\r\n            }),\r\n            $(go.Shape, {\r\n                    figure: \"Rectangle\",\r\n                    name: \"MAIN\",\r\n                    fill: \"rgba(255,255,0,0)\", // default value, but also data-bound\r\n                    strokeWidth: 0,\r\n                    stroke: \"red\",\r\n                    height: 1\r\n                },\r\n                new go.Binding('width', 'layerThickness', function(data) {\r\n                    return parseInt(data || 100);\r\n                })\r\n            ),\r\n            $(go.Shape, {\r\n                    name: \"SHAPE\",\r\n                    fill: \"lightgray\", // default value, but also data-bound\r\n                    strokeWidth: 2,\r\n                    margin: 5,\r\n                    stroke: \"green\",\r\n                    alignment: go.Spot.Right,\r\n                    alignmentFocus: go.Spot.Right,\r\n                    portId: \"\" // so links will go to the shape, not the whole node\r\n                },\r\n                new go.Binding(\"geometry\", \"\", function(data) {\r\n                return makeAnnularWedge(data);\r\n                }),\r\n                new go.Binding(\"fill\", \"fill\", function(v) {\r\n                    return v instanceof go.Brush ? v.color : v;\r\n                }).makeTwoWay(),\r\n                new go.Binding(\"stroke\", \"stroke\", function(v) {\r\n                    return v instanceof go.Brush ? v.stroke : v;\r\n                }).makeTwoWay(),\r\n                new go.Binding(\"strokeWidth\", \"strokeWidth\", function(d) {\r\n                    return d;\r\n                }).makeTwoWay(function(d) {\r\n                    return d;\r\n                })\r\n            ),\r\n            $(go.Shape, {\r\n                    figure: \"Rectangle\",\r\n                    name: \"LOCATE\",\r\n                    fill: \"rgba(0,255,0,0)\", // default value, but also data-bound\r\n                    strokeWidth: 0,\r\n                    stroke: \"green\",\r\n                    height: 20,\r\n                    alignment: go.Spot.Right,\r\n                    alignmentFocus: go.Spot.Right\r\n                },\r\n                new go.Binding('width', 'layerThickness', function(data) {\r\n                    return parseInt(data || 100);\r\n                })\r\n            ),\r\n            $(go.TextBlock, {\r\n                    name: \"TEXT\",\r\n                    isMultiline: true,\r\n                    click: function(e, node) {\r\n                \r\n                    },\r\n                    textAlign: \"center\",\r\n                    editable: false,\r\n                    wrap: go.TextBlock.WrapDesiredSize,\r\n                    overflow: go.TextBlock.OverflowClip,\r\n                    spacingAbove: 4,\r\n                    spacingBelow: 4,\r\n                    font: \"bold 15px 幼圆\"\r\n                },\r\n                new go.Binding(\"text\").makeTwoWay(),\r\n                new go.Binding(\"textAlign\", \"textAlign\", function(v) {\r\n                    return _.contains(['start', 'center', 'end'], v) ? v : \"center\";\r\n                }).makeTwoWay(),\r\n                new go.Binding(\"spacingAbove\", \"spacingline\", function(v) {\r\n                    return helpers.tdTransToNum(v, 4);\r\n                }).makeTwoWay(),\r\n                new go.Binding(\"spacingBelow\", \"spacingline\", function(v) {\r\n                    return helpers.tdTransToNum(v, 4);\r\n                }).makeTwoWay(),\r\n                new go.Binding(\"stroke\", \"textStroke\").makeTwoWay(),\r\n                new go.Binding(\"font\", \"font\").makeTwoWay(),\r\n                new go.Binding(\"width\", \"\", function(data, obj) {\r\n                    var tdDipanTextAngle = data.tdDipanTextAngle || 'xuanzhuan';\r\n                    var layerThickness = parseInt(data.layerThickness || 100);\r\n                    var maxWidth = data.sweep / 180 * data.dradius * Math.PI * 0.7;\r\n                    if (tdDipanTextAngle == 'fangshe') {\r\n                        return maxWidth;\r\n                    }\r\n                    if (tdDipanTextAngle == 'zhengli') {\r\n                        return layerThickness * 0.7;\r\n                    }\r\n                    if (tdDipanTextAngle == 'xuanzhuan') {\r\n                        return layerThickness * 0.7;\r\n                    }\r\n                }),\r\n\r\n                new go.Binding(\"angle\", \"textAngle\").makeTwoWay(),\r\n                new go.Binding('alignment', 'tdDipanTextAngle', function(data) {\r\n                    var tdDipanTextAngle = data || 'xuanzhuan';\r\n                    var alignment = go.Spot.Center;\r\n                    switch (tdDipanTextAngle) {\r\n                        case 'xuanzhuan':\r\n                            alignment = go.Spot.Center;\r\n                            break;\r\n                        case 'fangshe':\r\n                            alignment = go.Spot.Left;\r\n                            break;\r\n                        case 'zhengli':\r\n                            alignment = go.Spot.Center;\r\n                            break;\r\n                    }\r\n                    return alignment;\r\n                }),\r\n                new go.Binding('alignmentFocus', 'tdDipanTextAngle', function(data) {\r\n                    var tdDipanTextAngle = data || 'xuanzhuan';\r\n                    var alignmentFocus = go.Spot.Center;\r\n                    switch (tdDipanTextAngle) {\r\n                        case 'xuanzhuan':\r\n                            alignmentFocus = go.Spot.Center;\r\n                            break;\r\n                        case 'fangshe':\r\n                            alignmentFocus = go.Spot.Left;\r\n                            break;\r\n                        case 'zhengli':\r\n                            alignmentFocus = go.Spot.Center;\r\n                            break;\r\n                    }\r\n                    return alignmentFocus;\r\n                })\r\n            \r\n            )\r\n        );\r\n\r\n\r\n \r\n    }\r\n\r\n    getDipanRootTemplate(layerThickness){\r\n        var that = this;\r\n        return $(go.Node, \"Auto\", {\r\n            locationSpot: go.Spot.Center,\r\n            selectionAdorned: true,\r\n            movable: false,\r\n            \r\n            click: function(e, node) {\r\n                //showNodeToolBar(e, node);\r\n                //showTempToolBar(e, node);\r\n                console.log(node.data)\r\n                if(that.readOnly){\r\n                    if(node.diagram.__trtd.nodeClickListener){\r\n                        node.diagram.__trtd.nodeClickListener(node);\r\n                    }\r\n                }\r\n                \r\n            },\r\n            doubleClick: function(e){\r\n                if(that.readOnly){\r\n                    return;\r\n                }\r\n                var myDiagram = e.diagram;\r\n                var node = myDiagram.selection.first();\r\n                if (!node) return;\r\n                // removeNodeRemarkTips();\r\n                var tb = myDiagram.selection.first().findObject('TEXT');\r\n                if (tb) myDiagram.commandHandler.editTextBlock(tb);\r\n                helpers.simulateEnterWithAlt(e);\r\n            },\r\n         \r\n            mouseOver: function(e, node) {\r\n                //showNodeRemarkTips(e, node);\r\n             \r\n            },\r\n            mouseLeave: function(e, node) {\r\n                //removeNodeRemarkTips();\r\n                //removeNodeToolBar();\r\n            },\r\n            selectionAdorned:!that.readOnly,\r\n            selectionAdornmentTemplate: $(go.Adornment, \"Spot\",\r\n                        $(go.Panel, \"Auto\",\r\n                            $(go.Shape, { fill: 'rgba(255,232,211,0.1)', stroke: \"blue\", strokeWidth: 2 }),\r\n                            $(go.Placeholder) // this represents the selected Node\r\n                        ),\r\n                        // the button to create a \"next\" node, at the top-right corner\r\n                        $(\"Button\", {\r\n                                alignment: go.Spot.RightCenter,\r\n                                alignmentFocus: go.Spot.Bottom,\r\n                                width: 30,\r\n                                height: 30,\r\n                \r\n                                click: (e) => {\r\n                                    console.log(e.diagram.selection.first().data)\r\n                                    console.log(e.diagram.selection.first().data.parent)\r\n                                    var node = e.diagram.selection.first();\r\n                                    if(node.data.parent){\r\n                                        var parentNode = node.diagram.findNodeForKey(node.data.parent);\r\n                                        if(parentNode.data.istemp){\r\n                                            return\r\n                                        }\r\n                                    }\r\n                                    this.addNewCircle(e) // this function is defined below\r\n                                } \r\n                                \r\n                            },\r\n                            $(go.Shape, \"PlusLine\", { desiredSize: new go.Size(15, 15) })\r\n                        ),\r\n                        //备注\r\n                \r\n                    ),\r\n            // contextMenu: $(go.Adornment, \"Vertical\",\r\n            //     $(\"ContextMenuButton\",\r\n            //         $(go.TextBlock, \"更换地盘背景\"), {\r\n            //             click: function(e, obj) {\r\n            //                 var backImage = tdDipanBackgroundImages[Math.floor(Math.random() * tdDipanBackgroundImages.length)];\r\n            //                 setSourceOfPicture(backImage, 1); //更换主题时，如果是保留颜色，则刷新背景图片\r\n            //             }\r\n            //         }),\r\n            //     $(\"ContextMenuButton\",\r\n            //         $(go.TextBlock, \"移除地盘背景\"), {\r\n            //             click: function(e, obj) {\r\n            //                 var backnodeData = null;\r\n            //                 var rootKey = obj.part.data.key;\r\n            //                 myDiagram.model.nodeDataArray.forEach(function(d) {\r\n            //                     if (d.rootKey == rootKey && d.category == '3') {\r\n            //                         backnodeData = d;\r\n            //                         return;\r\n            //                     }\r\n            //                 })\r\n            //                 if (backnodeData) {\r\n            //                     myDiagram.model.startTransaction();\r\n            //                     myDiagram.model.removeNodeData(backnodeData);\r\n            //                     myDiagram.model.commitTransaction();\r\n            //                 }\r\n            //             }\r\n            //         })\r\n            // ),\r\n            \r\n        \r\n            location: new go.Point(0, 0)\r\n        },\r\n        new go.Binding(\"width\", \"layerThickness\", function(v) {\r\n            return v ? v * 2 : 100 * 2;\r\n        }),\r\n        new go.Binding(\"height\", \"layerThickness\", function(v) {\r\n            return v ? v * 2 : 100 * 2;\r\n        }),\r\n        $(go.Shape, \"Circle\", {\r\n                name: \"SHAPE\",\r\n                fill: \"#FFBFBF\",\r\n                strokeWidth: 0,\r\n                // width: 100,\r\n                // height: 100,\r\n                spot1: go.Spot.TopLeft,\r\n                spot2: go.Spot.BottomRight\r\n            },\r\n            new go.Binding(\"fill\", \"fill\", function(v) {\r\n                return v instanceof go.Brush ? v.color : v;\r\n            }).makeTwoWay(),\r\n            new go.Binding(\"stroke\", \"stroke\", function(v) {\r\n                return v instanceof go.Brush ? v.stroke : v;\r\n            }).makeTwoWay(),\r\n        \r\n            new go.Binding(\"strokeWidth\", \"strokeWidth\", function(d) {\r\n                return d;\r\n            }).makeTwoWay(function(d) {\r\n                return d;\r\n            })\r\n        ),\r\n        $(go.TextBlock, {\r\n                name: \"TEXT\",\r\n                font: \"bold 23px 幼圆\",\r\n                textAlign: \"center\",\r\n                editable: false,\r\n                spacingAbove: 4,\r\n                isMultiline: true,\r\n                \r\n                spacingBelow: 4\r\n            },\r\n            new go.Binding(\"textAlign\", \"textAlign\", function(v) {\r\n                return _.contains(['start', 'center', 'end'], v) ? v : \"center\";\r\n            }).makeTwoWay(),\r\n            new go.Binding(\"spacingAbove\", \"spacingline\", function(v) {\r\n                return helpers.tdTransToNum(v, 4);\r\n            }).makeTwoWay(),\r\n            new go.Binding(\"spacingBelow\", \"spacingline\", function(v) {\r\n                return helpers.tdTransToNum(v, 4);\r\n            }).makeTwoWay(),\r\n            new go.Binding(\"text\").makeTwoWay(),\r\n            new go.Binding(\"stroke\", \"textStroke\").makeTwoWay(),\r\n            new go.Binding(\"width\", \"width\").makeTwoWay(),\r\n            new go.Binding(\"font\", \"font\").makeTwoWay(),\r\n            new go.Binding(\"angle\", \"textAngle\").makeTwoWay()\r\n        )\r\n        );\r\n        }\r\n\r\n    tdGetModelData1(name,model,myDiagram1) { //获取盘的model.modelData中的全局属性 \r\n        var defaultVal = {\r\n            currentType: 'dipan',\r\n            currentThemeID: 0,\r\n            layerThickness: 100,\r\n            splitLayer: 1,\r\n            layout: 'inner',\r\n            tdDipanTextAngle: 'xuanzhuan'\r\n        };\r\n        return Object.assign(defaultVal,model.modelData)\r\n    }\r\n    tdGetModelData(name,model) { //获取盘的model.modelData中的全局属性 \r\n        // if(myDiagram1){\r\n        //     myDiagram = myDiagram1\r\n        // }\r\n        var myDiagram = this.diagram\r\n        var  model = myDiagram.model\r\n        var defaultVal = {\r\n            currentType: 'tianpan',\r\n            currentThemeID: 0,\r\n            layerThickness: 100,\r\n            splitLayer: 1,\r\n            layout: 'inner',\r\n            tdDipanTextAngle: 'xuanzhuan'\r\n        };\r\n        console.log(\"getRootNodeData1111111111111111111111\")\r\n        var root = getRootNodeData(model);\r\n        if (typeof(name) != 'undefined' && name != null) { //返回指定的属性值\r\n            if (root) {\r\n                return root[name] || model.modelData[name] || defaultVal[name]\r\n            } else {\r\n                return model.modelData[name] || defaultVal[name];\r\n            }\r\n        }\r\n        //返回所有属性值\r\n        if (root) {\r\n            for (var key in defaultVal) {\r\n                if (root[key]) {\r\n                    defaultVal[key] = root[key];\r\n                } else {\r\n                    if (model.modelData && model.modelData[key]) {\r\n                        defaultVal[key] = model.modelData[key];\r\n                    }\r\n                }\r\n            }\r\n        } else {\r\n            for (var key in defaultVal) {\r\n                if (model.modelData && model.modelData[key]) {\r\n                    defaultVal[key] = model.modelData[key];\r\n                }\r\n            }\r\n        }\r\n        return defaultVal;\r\n    }\r\n    deleteSelection () {\r\n        // console.log(\"====================deleteSelection 优化\")\r\n        var myDiagram = this.diagram;\r\n        var node = myDiagram.selection.first();\r\n        console.log(`删除节点 ${JSON.stringify(node.data)}`)\r\n        console.log(node.data)\r\n        var cmd = myDiagram.commandHandler;\r\n        // if (node instanceof go.Group) {\r\n        //     return;\r\n        // }\r\n        var locateNode = null;\r\n    \r\n        if (!node || node.data.istemp) {\r\n            return;\r\n        }\r\n        if (node.data.key == 1 || node.data.key == 'g_1' || node.data.key == 'Root') {\r\n            //删除根节点触发清空节点\r\n            //clearAllNodesGround();\r\n             \r\n            return;\r\n        }\r\n    \r\n        myDiagram.model.startTransaction('all');\r\n        myDiagram.model.startTransaction('level1');\r\n    \r\n        // myDiagram.model.startTransaction(\"sub\");\r\n        myDiagram.model.setDataProperty(node.data, \"istemp\", true); //防止节点呗删除访问属性失败\r\n        // console.log(myDiagram.model.nodeDataArray)\r\n        this.deleteNode(node,myDiagram);\r\n        //removeOneNode(node); //zyy\r\n        \r\n        // console.log(myDiagram.model.nodeDataArray)\r\n        // myDiagram.model.commitTransaction(\"sub\");\r\n    \r\n        //统一删除节点\r\n        var maxCircle = this.getMaxCircle(myDiagram);\r\n        //找到所有要删除的节点\r\n        var nodes = [];\r\n        myDiagram.model.nodeDataArray.forEach(function(n) {\r\n            if (n.level > maxCircle) {//zyy 增加n.group!==\"g_1\"\r\n                nodes.push(n);\r\n            }\r\n        });\r\n        // myDiagram.model.startTransaction(\"deleteTempNode\");\r\n        //删除所有只有临时节点的层级\r\n        myDiagram.model.removeNodeDataCollection(nodes);\r\n        //删除最外圈节点的isparent属性\r\n        myDiagram.model.nodeDataArray.forEach(function(n) {\r\n            if (n.level == maxCircle && n.isparent != null) {\r\n                // delete n.isparent;\r\n                myDiagram.model.setDataProperty(n, 'isparent', null);\r\n            }\r\n        });\r\n        myDiagram.model.removeNodeData(node.data);\r\n        // go.CommandHandler.prototype.deleteSelection.call(cmd);\r\n        myDiagram.model.commitTransaction('level1');\r\n        this.groundLayout(myDiagram);\r\n        //changeTheme(myDiagram.model.modelData.currentThemeID, true);zyy\r\n      \r\n        myDiagram.model.commitTransaction('all');\r\n        var locateNode = null;\r\n        var tempArray = [\"next\",\"prev\",\"parent\"]\r\n        for(var i=0;i<tempArray.length;i++){\r\n            if(node.data[tempArray[i]]){\r\n                locateNode = myDiagram.findNodeForKey(node.data[tempArray[i]])\r\n                break;\r\n            }\r\n        }\r\n        // if(node.data.category === 'dipan'){\r\n            if (locateNode) {\r\n                // console.log('5612 locateNode................' +  locateNode)\r\n                // console.dir(locateNode)\r\n                //选中单个节点 bug问题：外圈都是临时节点的时候，无法选中 \r\n                myDiagram.select(locateNode);\r\n            } \r\n            \r\n        // }\r\n    }\r\n\r\n    deleteNode(node) {\r\n        console.log('删除节点 deleteNode')\r\n        console.log(node.data.key)\r\n        console.log(node.data)\r\n        var myDiagram  = this.diagram\r\n        var mainNode = null;\r\n            var preNode = node.data.prev ? myDiagram.findNodeForKey(node.data.prev) : null;\r\n            var nextNode = node.data.next ? myDiagram.findNodeForKey(node.data.next) : null;\r\n            var parentNode = node.data.parent ? myDiagram.findNodeForKey(node.data.parent) : null;\r\n    \r\n            // try {\r\n                // 如果有子节点，则删除所有子节点\r\n                if (node.data.isparent) {\r\n                    var firstNode = myDiagram.findNodeForKey(node.data.isparent)\r\n                    var nodes = []\r\n                    helpers.tdTravelTdpData(firstNode.data, myDiagram.model, nodes, function(data){\r\n                        return data\r\n                    })\r\n                    myDiagram.model.removeNodeDataCollection(nodes);\r\n    \r\n                    var maxCircles = this.getMaxCircle(myDiagram)\r\n                }\r\n                // 父节点存在的情况下\r\n                if (parentNode != null) {\r\n                    //当前节点为第一个子节点\r\n                    if (parentNode.data.isparent == node.data.key) {\r\n                        //如果当前节点是最后一个子节点\r\n                        if (nextNode == null) {\r\n                            myDiagram.model.setDataProperty(parentNode.data, \"isparent\", undefined);\r\n                        } else {\r\n                            myDiagram.model.setDataProperty(parentNode.data, \"isparent\", nextNode.data.key);\r\n                            myDiagram.model.setDataProperty(nextNode.data, \"prev\", undefined);\r\n                        }\r\n                    } else {\r\n                        myDiagram.model.setDataProperty(preNode.data, \"next\", nextNode == null ? null : nextNode.data.key);\r\n                        if (nextNode != null) {\r\n                            myDiagram.model.setDataProperty(nextNode.data, \"prev\", preNode.data.key);\r\n                        }\r\n                    }\r\n                }\r\n    \r\n                if(myDiagram.model.modelData.currentType == 'dipan'){\r\n                    // 删除的只剩下root节点时对root节点做处理\r\n                    var totalCount = 0;\r\n                    for(var i=0;i<myDiagram.model.nodeDataArray.length;i++){\r\n                        if(!myDiagram.model.nodeDataArray[i].istemp && !myDiagram.model.nodeDataArray[i].isGroup){\r\n                            totalCount++;\r\n                        }\r\n                        if(totalCount>1) break;\r\n                    }\r\n                    if(totalCount <= 1){  \r\n                        console.log(\"删除的只剩下root节点时对root节点做处理\")\r\n                        var dipanRoot = myDiagram.model.findNodeDataForKey(1);\r\n                        delete dipanRoot.group\r\n                    }\r\n                }\r\n            // } catch (ex) {\r\n            //     console.log(ex.message);\r\n            // }\r\n    \r\n        // }\r\n        myDiagram.isModified = true;\r\n    \r\n    \r\n    }\r\n\r\n    getMaxCircle() {\r\n        var myDiagram = this.diagram\r\n        var maxCircle = 0;\r\n        let nodeArr = [];\r\n        let nodeLevelArr = [];\r\n        let maxNodeArr = [];\r\n        let arr = [];\r\n        myDiagram.model.nodeDataArray.forEach(function(d) {\r\n            if(!d.istemp&&!d.isGroup){\r\n                nodeArr.push(d)\r\n                if(d.level){\r\n                    nodeLevelArr.push(d.level)\r\n                }\r\n            }else{\r\n                arr.push(d)\r\n            }\r\n        });\r\n        let max = Math.max.apply(null, nodeLevelArr);\r\n        // console.log(max)\r\n        nodeArr.forEach(function(node){\r\n            if(node.level === max){\r\n                maxNodeArr.push(node)\r\n            }\r\n        })\r\n        if(max ===-Infinity&&maxNodeArr.length === 0){\r\n            console.log(\"11111111111111\")\r\n            maxCircle = 0\r\n        }else if(max !== -Infinity&&maxNodeArr.length === 0){\r\n           maxCircle = max -1;\r\n        }else if(maxNodeArr.length > 0){\r\n           maxCircle = max;\r\n        }\r\n        // console.log(\"maxCircle\")\r\n        // console.log(maxCircle)\r\n        return maxCircle\r\n    }\r\n\r\n    addNewCircle(e) {\r\n        let myDiagram = this.diagram\r\n        var maxCircles = this.getMaxCircle()\r\n        var node = myDiagram.selection.first();\r\n        console.log(node.data)\r\n        if (!node) return;\r\n        if (node.data.isparent && myDiagram.findNodeForKey(node.data.isparent) && !myDiagram.findNodeForKey(node.data.isparent).visible) {\r\n            return;\r\n        }\r\n        myDiagram.model.startTransaction(\"addNewCircle\");\r\n        if (\"istemp\" in node.data && node.data.istemp) {\r\n            changeTemp2normal(myDiagram);\r\n            if (node.data.text == \"\") {\r\n               myDiagram.model.setDataProperty(node.data, \"text\", lang.trans('dce'));\r\n               //myDiagram.model.setDataProperty(node.data, \"text\", node.data.key)\r\n            }\r\n        }\r\n    \r\n        var firstnodeData = null;\r\n        if (node.data.isparent) {\r\n            firstnodeData = myDiagram.model.findNodeDataForKey(node.data.isparent);\r\n        }\r\n        if (firstnodeData != null && firstnodeData.istemp) {\r\n            myDiagram.model.setDataProperty(firstnodeData, \"istemp\", false);\r\n            myDiagram.model.setDataProperty(firstnodeData, \"text\", lang.trans('dce'));\r\n            //myDiagram.model.setDataProperty(node.data, \"text\", node.data.key)\r\n        } else {\r\n            var follower = this.addChildNodeData(node);\r\n            if (follower.level > maxCircles) {\r\n                maxCircles = follower.level;\r\n            }\r\n    \r\n            this.groundLayout(myDiagram);\r\n        }\r\n        myDiagram.model.commitTransaction(\"addNewCircle\");\r\n    }\r\n    \r\n     //modify nodeDataArray\r\n     addChildNodeData(node) {\r\n        // 去掉连线和group\r\n        console.log(\"===================================addChildNodeData:去掉连线和group、主题\")\r\n        var isautolayout = window.localStorage.getItem('isautolayout') == null ? true : window.localStorage.getItem('isautolayout') == 'true';\r\n        // var isautoselect =  window.localStorage.getItem('isautoselect') == null?true:window.localStorage.getItem('isautoselect') == 'true';\r\n        var myDiagram = node.diagram;\r\n        var result = arguments[1] ? arguments[1] : null;\r\n        var currentType = 'dipan'\r\n        //myDiagram.startTransaction();\r\n        var nextkey = (myDiagram.model.nodeDataArray.length + 1).toString();\r\n        //var follower = {key: nextkey, text: nextkey};\r\n        var follower = { key: nextkey, text: lang.trans('dce') };\r\n        //if (result != null) {\r\n        myDiagram.model.makeNodeDataKeyUnique(follower);\r\n        nextkey = follower.key;\r\n        var firstNode = null;\r\n        follower.level = node.data.level + 1;\r\n        follower.parent = node.data.key;\r\n        follower.prev = undefined;\r\n    \r\n        //如果已经有子节点\r\n        if (node.data.isparent) {\r\n            firstNode = myDiagram.model.findNodeDataForKey(node.data.isparent)\r\n            if(firstNode){\r\n                follower.next = firstNode.key;\r\n                myDiagram.model.setDataProperty(firstNode, \"prev\", follower.key);\r\n            }\r\n        }\r\n    \r\n        if (result != null) {\r\n            //只是用来填充的节点\r\n            follower.istemp = true;\r\n            follower.text = \"\";\r\n        }\r\n    \r\n        var sectotLayerThickNess  = myDiagram.model.modelData.layerThickness\r\n        console.log(\" myDiagram.model\", myDiagram.model);\r\n        // follower.fill = colorMap[follower.level % 5];\r\n        follower.dangle = node.data.dangle;\r\n        follower.dradius = node.data.dradius;\r\n        follower.sweep = node.data.sweep;\r\n        // zyy follower.loc = node.data.loc;\r\n        follower.layerThickness = sectotLayerThickNess || 100;\r\n        follower.tdDipanTextAngle = node.data.tdDipanTextAngle || 'xuanzhuan';\r\n        if (node.data.level != 0) {\r\n            follower.category = node.data.category;\r\n        }\r\n        if (node.data.category == \"Root\") {\r\n            follower.category = \"dipan\";\r\n        }\r\n    \r\n    \r\n        follower.strokeWidth = node.data.strokeWidth;\r\n        if (node.data.figure) {\r\n            follower.figure = node.data.figure;\r\n        }\r\n    \r\n        if (node.data.picture) {\r\n            follower.picture = node.data.picture;\r\n        }\r\n    \r\n        if (node.data.width) {\r\n            follower.width = node.data.width;\r\n        }\r\n        if (node.data.height) {\r\n            follower.height = node.data.height;\r\n        }\r\n        follower = applyTheme2Node(follower,myDiagram);\r\n        follower.font = node.data.font;\r\n        follower.textStroke = node.findObject(\"TEXT\").stroke;\r\n        myDiagram.model.setDataProperty(node.data, \"isparent\", nextkey);\r\n        follower.newAdd = true;\r\n        myDiagram.model.addNodeData(follower,myDiagram);\r\n        myDiagram.isModified = true;\r\n        return follower;\r\n    }\r\n    \r\n    addFollowerGround(e) {\r\n        let myDiagram = this.diagram;\r\n        if (myDiagram.selection.count == 0) return;\r\n        var node = myDiagram.selection.first();\r\n        if (node.data.key == 1) {\r\n            return;\r\n        }\r\n        if (!node) return;\r\n        var diagram = node.diagram;\r\n        // var isautolayout = window.localStorage.getItem('isautolayout') == null?true:window.localStorage.getItem('isautolayout') == 'true';\r\n        // var isautoselect =  window.localStorage.getItem('isautoselect') == null?true:window.localStorage.getItem('isautoselect') == 'true';\r\n        if (node === null || !(node instanceof go.Node) || node instanceof go.Group) return;\r\n        // root node is not allowed to add follower\r\n        // if (node.findLinksInto().count == 0) return;\r\n        myDiagram.model.startTransaction('all');\r\n        if (\"istemp\" in node.data && node.data.istemp) {\r\n            changeTemp2normal(myDiagram);\r\n            if (node.data.text == \"\") {\r\n                myDiagram.model.setDataProperty(node.data, \"text\", \"\");\r\n            }\r\n        }\r\n        // if(!isautolayout){\r\n        //   ControlAutoLayout(false);\r\n        // }else{\r\n        //   ControlAutoLayout(true);\r\n        // }\r\n        //myDiagram.model.startTransaction('addnode');\r\n        myDiagram.startTransaction('sub1');\r\n        var follower = this.addLevelNodeData(node);\r\n        myDiagram.commitTransaction('sub1');\r\n        this.groundLayout(myDiagram);\r\n        //changeTheme(myDiagram.model.modelData.currentThemeID, true);zyy颜色\r\n        myDiagram.model.commitTransaction('all');\r\n        var newnode = diagram.findNodeForData(follower);\r\n        if (newnode) {\r\n            // myDiagram.centerRect(newnode.actualBounds);\r\n            diagram.select(newnode);\r\n        }\r\n    \r\n    \r\n    }\r\n    \r\n    addLevelNodeData(node) {\r\n        console.log(\"======================去掉天盘\")\r\n        var isautolayout = window.localStorage.getItem('isautolayout') == null ? true : window.localStorage.getItem('isautolayout') == 'true';\r\n        // var isautoselect =  window.localStorage.getItem('isautoselect') == null?true:window.localStorage.getItem('isautoselect') == 'true';\r\n        var myDiagram = this.diagram;\r\n        var currentType = 'dipan';\r\n        var toKey = node.data.next;\r\n        //delete the next link\r\n    \r\n        var nextkey = (myDiagram.model.nodeDataArray.length + 1).toString();\r\n        //var follower = {key: nextkey, text: nextkey, color: \"yellow\"};\r\n    \r\n        var follower = { key: nextkey, text: lang.trans(\"dce\"), color: \"yellow\" };\r\n        myDiagram.model.makeNodeDataKeyUnique(follower);\r\n        nextkey = follower.key;\r\n        var nextnode = null;\r\n        if(toKey){\r\n            var nextnode = myDiagram.model.findNodeDataForKey(toKey);\r\n        }\r\n        myDiagram.model.startTransaction();\r\n    \r\n        follower = applyTheme2Node(follower, myDiagram);\r\n        //delete the next link\r\n        var deleteLink = null;\r\n    \r\n        //if has next node\r\n        if (nextnode != null) {\r\n            follower.next = nextnode.key;\r\n            myDiagram.model.setDataProperty(nextnode, \"prev\", follower.key);\r\n        }\r\n        follower.level = node.data.level;\r\n        follower.radius = node.data.radius;\r\n        follower.fill = node.data.fill;\r\n        //follower.fill =go.Brush.randomColor(128, 240);\r\n        follower.dangle = node.data.dangle;\r\n        follower.dradius = node.data.dradius;\r\n        // zyy follower.loc = node.data.loc;\r\n        follower.sweep = node.data.sweep;\r\n        follower.layerThickness = node.data.layerThickness || 100;\r\n        follower.tdDipanTextAngle = node.data.tdDipanTextAngle || 'xuanzhuan';\r\n    \r\n        follower.parent = node.data.parent;\r\n        follower.prev = node.data.key;\r\n        follower.strokeWidth = node.data.strokeWidth;\r\n        follower.stroke = node.data.stroke;\r\n        follower.font = node.data.font;\r\n        //follower.font = node.data.font;\r\n        follower.textStroke = node.findObject(\"TEXT\").stroke;\r\n        if (node.data.figure) {\r\n            follower.figure = node.data.figure;\r\n        }\r\n        follower.loc = node.data.loc;\r\n        if (node.data.width) {\r\n            follower.width = node.data.width;\r\n        }\r\n        if (node.data.height) {\r\n            follower.height = node.data.height;\r\n        }\r\n        follower.category = node.data.category;\r\n        follower.newAdd = true;\r\n        // add a new node\r\n        myDiagram.model.addNodeData(follower);\r\n        myDiagram.model.setDataProperty(node.data, \"next\", nextkey);\r\n    \r\n        myDiagram.model.commitTransaction();\r\n        myDiagram.isModified = true;\r\n        return follower;\r\n    }\r\n\r\n    moveWithinNodes(direction) {\r\n        var myDiagram = this.diagram;\r\n        var node = myDiagram.selection.first();\r\n        if(!node){\r\n            return;\r\n        }\r\n        if (!node) {\r\n            myDiagram.select(myDiagram.findNodeForKey(1));\r\n            return;\r\n        }\r\n        switch (direction) {\r\n            case 'left':\r\n                if (node.data.prev) {\r\n                    var prevNode = myDiagram.findNodeForKey(node.data.prev);\r\n                    if (prevNode) {\r\n                        myDiagram.select(prevNode);\r\n                    }\r\n                }\r\n                break;\r\n            case 'up':\r\n                if (node.data.parent) {\r\n                    var prevNode = myDiagram.findNodeForKey(node.data.parent);\r\n                    if (prevNode) {\r\n                        myDiagram.select(prevNode);\r\n                    }\r\n                }\r\n                break;\r\n            case 'right':\r\n                if (node.data.next) {\r\n                    var prevNode = myDiagram.findNodeForKey(node.data.next);\r\n                    if (prevNode) {\r\n                        myDiagram.select(prevNode);\r\n                    }\r\n                }\r\n                break;\r\n            case 'down':\r\n                if (node.data.isparent) {\r\n                    var prevNode = myDiagram.findNodeForKey(node.data.isparent);\r\n                    if (prevNode) {\r\n                        myDiagram.select(prevNode);\r\n                    }\r\n                }\r\n                break;\r\n        }\r\n    }\r\n\r\n    selectText(e) {\r\n        var myDiagram = this.diagram\r\n        var node = myDiagram.selection.first();\r\n        if (!node) return;\r\n        // removeNodeRemarkTips();\r\n        var tb = myDiagram.selection.first().findObject('TEXT');\r\n        if (tb) myDiagram.commandHandler.editTextBlock(tb);\r\n        helpers.simulateEnterWithAlt(e);\r\n    }\r\n\r\n    // 地盘布局\r\n    groundLayout(myDiagram) {\r\n        // var dipaninteractions = require('./dipan');\r\n        // var addChildNodeData = this.addChildNodeData\r\n        var myDiagram = this.diagram\r\n        var root = myDiagram.findNodeForKey(1);\r\n        var that = this;\r\n        if (!root) {\r\n            return;\r\n        }\r\n        root.location = new go.Point(0, 0);\r\n        var diagram = root.diagram;\r\n        if (diagram === null) return;\r\n        // make this Node the root\r\n        root.data.category = \"Root\";\r\n        // determine new distances from this new root node\r\n        //    var results = findDistances(somenode);\r\n        //    radialLayout(root);\r\n        var layout = getTdLayout(myDiagram);\r\n        if (layout == 'out') {\r\n            var maxCircles = this.getMaxCircle(myDiagram);\r\n    \r\n            var model = myDiagram.model;\r\n            helpers.tdTravelTdpData(root.data, model, [], function(d) {\r\n                if (d.level < maxCircles && typeof(d.isparent) == 'undefined') {\r\n                    var followerNode = myDiagram.findNodeForKey(d.key);\r\n                    that.addChildNodeData(followerNode, \"temp\");\r\n                }\r\n            });\r\n            changeLayout();\r\n        } else if (layout == 'inner') {\r\n            radialLayout(root,myDiagram);\r\n            // myDiagram.model.modelData.splitLayer = 1\r\n            // splitLayer = 1\r\n            // splitRadlayout(null, myDiagram.model, splitLayer);\r\n        } else {\r\n            splitLayer = myDiagram.model.modelData.splitLayer ? myDiagram.model.modelData.splitLayer : splitLayer;\r\n            splitRadlayout(null, myDiagram.model, splitLayer);\r\n        }\r\n        // setSourceOfPicture(null, 1); //重新计算背景图片宽高\r\n\r\n        function radialLayout(root,myDiagram) {\r\n            root.diagram.startTransaction(\"radial layout\");\r\n            // sort all results into Arrays of Nodes with the same distance\r\n            var nodes = {};\r\n            var maxlayer = 0;\r\n            // var globalProperties = tdGetModelData(null, myDiagram.model); //获取所有全局属性到一个对象中\r\n            // var layerThickness = parseInt(root.data.layerThickness || 100);\r\n            var layerThickness = myDiagram.model.modelData.layerThickness || 100;\r\n            var tdDipanTextAngle = root.data.tdDipanTextAngle || \"xuanzhuan\";\r\n        \r\n            root.diagram.model.setDataProperty(root.data, \"dangle\", 0);\r\n            root.diagram.model.setDataProperty(root.data, \"sweep\", 360);\r\n            root.diagram.model.setDataProperty(root.data, \"dradius\", 0);\r\n        \r\n        \r\n            myDiagram.nodes.each(function(n) {\r\n                n.data._laid = false;\r\n            });\r\n        \r\n            // now recursively position nodes, starting with the root\r\n            root.location = new go.Point(0, 0);\r\n            maxCircles = that.getMaxCircle(myDiagram);\r\n            radlay1(root, 1, 90, 360, layerThickness, tdDipanTextAngle,myDiagram);\r\n            root.diagram.commitTransaction(\"radial layout\");\r\n        }\r\n\r\n        function radlay1(node, layer, angle, sweep, layerThickness, tdDipanTextAngle,myDiagram) {\r\n            // var dipaninteractions = require('./dipan');\r\n            var addChildNodeData = that.addChildNodeData\r\n            try {\r\n                var nodes = getAllChilds(node);\r\n            } catch (e) {\r\n                console.error(e);\r\n            }\r\n            var parentKey = node.data.key;\r\n        \r\n            if (node.data.category >= 3) {\r\n                return;\r\n            }\r\n            // var globalProperties = tdGetModelData(null, myDiagram.model);   //获取所有全局属性到一个对象中\r\n            // var layerThickness = parseInt(globalProperties['layerThickness']);\r\n            // var tdDipanTextAngle = globalProperties['tdDipanTextAngle'];\r\n        \r\n            var found = nodes.length;\r\n            //if (found === 0) return;\r\n            if (found === 0 && node.data.level >= maxCircles) return;\r\n            if (found === 0) {\r\n                var newdata = that.addChildNodeData(node, \"temp\");\r\n        \r\n                var newnode = myDiagram.findNodeForData(newdata);\r\n                nodes.push(newnode);\r\n                //node.diagram.model.setDataProperty(newdata, \"istemp\", true);\r\n                found++;\r\n            }\r\n            var rootNode = myDiagram.model.findNodeDataForKey(1);\r\n            var rootRadius = parseInt(rootNode.layerThickness);\r\n            var radius = rootRadius + (layer - 1) * layerThickness;\r\n            var separator = sweep / found;\r\n            var start = angle - sweep / 2 + separator / 2;\r\n            for (var i = 0; i < found; i++) {\r\n                var n = nodes[i];\r\n                var a = start + i * separator;\r\n                var p = new go.Point(radius + layerThickness / 2, 0);\r\n                if (n.data._laid) {\r\n                    radlay1(n, layer + 1, n.data.dangle, n.data.sweep, layerThickness, tdDipanTextAngle,myDiagram);\r\n                    continue;\r\n                }\r\n                p.rotate(a);\r\n                // n.location = p;\r\n                n.diagram.model.setDataProperty(n.data, \"loc\", go.Point.stringify(p));\r\n                n.data._laid = true;\r\n                n.diagram.model.setDataProperty(n.data, \"dangle\", a);\r\n                n.diagram.model.setDataProperty(n.data, \"sweep\", separator);\r\n                n.diagram.model.setDataProperty(n.data, \"dradius\", radius);\r\n                n.diagram.model.setDataProperty(n.data, \"layerThickness\", layerThickness);\r\n                \r\n                // make sure text is never upside down\r\n                var label = n.findObject(\"TEXT\");\r\n                if (label !== null) {\r\n                    label.angle = ((a > 90 && a < 270 || a < -90) ? 180 : 0);\r\n                    //n.diagram.model.setDataProperty(n.data, \"textAngle\", label.angle);\r\n                    if (tdDipanTextAngle == 'xuanzhuan') { //文字方向旋转\r\n                        n.diagram.model.setDataProperty(n.data, \"textAngle\", label.angle);\r\n                    }\r\n                    if (tdDipanTextAngle == 'fangshe') { //文字方向旋转\r\n                        n.diagram.model.setDataProperty(n.data, \"textAngle\", 90);\r\n                    }\r\n                    if (tdDipanTextAngle == 'zhengli') { //文字方向正向\r\n                        n.diagram.model.setDataProperty(n.data, \"textAngle\", -a);\r\n                    }\r\n                    // console.log(\"text:\"+n.data.text+\",textangle:\"+n.data.textAngle+\";nodeAngle=\"+a  );\r\n                }\r\n                if (n.data.key == \"1\") {\r\n                    n.diagram.model.setDataProperty(n.data, \"textAngle\", 0);\r\n                }\r\n                radlay1(n, layer + 1, a, sweep / found, layerThickness, tdDipanTextAngle,myDiagram);\r\n            }\r\n        }\r\n\r\n        function getTdLayout(myDiagram) {\r\n            return myDiagram.model.modelData.layout ? myDiagram.model.modelData.layout : 'inner';\r\n        }\r\n\r\n        function getAllChilds(parentNode) {\r\n            try {\r\n                if (!parentNode.data.isparent) {\r\n                    return [];\r\n                }\r\n                var nodes = [],\r\n                    tmpDataObj;\r\n                if (!parentNode.data.isparent) return [];\r\n                var firstNode = parentNode.diagram.findNodeForKey(parentNode.data.isparent);\r\n                tmpDataObj = firstNode;\r\n                if (tmpDataObj) {\r\n                    nodes.push(firstNode);\r\n                    while (tmpDataObj.data.next) {\r\n                        tmpDataObj = parentNode.diagram.findNodeForKey(tmpDataObj.data.next);\r\n                        if (!tmpDataObj) break;\r\n                        nodes.push(tmpDataObj);\r\n                    }\r\n                }\r\n                return nodes;\r\n            } catch (e) {\r\n                console.error(e);\r\n            }\r\n        }\r\n        \r\n       // 外圈均分布局\r\n        function splitRadlayout(nodeData, model) {\r\n            if (nodeData == null) {\r\n                nodeData = model.findNodeDataForKey(1);\r\n            }\r\n            var rootNode = model.findNodeDataForKey(1);\r\n            var rootRadius = parseInt(rootNode.layerThickness);\r\n            console.log(\"rootRadius\", rootRadius);\r\n            model.nodeDataArray.forEach(function(d) {\r\n                d._laid = false;\r\n            });\r\n            // var globalProperties = tdGetModelData(null, myDiagram.model); //获取所有全局属性到一个对象中\r\n            // var root = getSubGraphRoot(nodeData, myDiagram);\r\n            // var layerThickness = parseInt(nodeData.layerThickness || 100);\r\n            var layerThickness = myDiagram.model.modelData.layerThickness;\r\n\r\n            var tdDipanTextAngle = nodeData.tdDipanTextAngle || \"xuanzhuan\";\r\n            var maxCircle = arguments[2] ? arguments[2] : getMaxCircle(myDiagram);\r\n            var result = getNumOfLevelChild(nodeData, model, maxCircle);\r\n            var childNum = result.count;\r\n            if (childNum <= 0) return;\r\n            var sweepUnit = 360.0 / childNum;\r\n            //setLevelSectionIndex(nodeData, model);\r\n\r\n            var length = model.nodeDataArray.length;\r\n\r\n            var collector = [];\r\n            if (nodeData.isparent) {\r\n                var firstChild = model.findNodeDataForKey(nodeData.isparent);\r\n            } else {\r\n                return;\r\n            }\r\n\r\n            helpers.tdTravelTdpData(firstChild, model, collector, function(d) {\r\n                return d;\r\n            });\r\n            var tmpArray;\r\n\r\n            for (var level = 1; level <= maxCircle; level++) {\r\n                tmpArray = _.filter(collector, function(item) {\r\n                    return (!item.isGroup && item.level == level);\r\n                });\r\n                var angle = 0;\r\n                var start = 0;\r\n                var radius = rootRadius + (level - 1) * layerThickness;\r\n                for (var index = 0; index < tmpArray.length; index++) {\r\n                    var data = tmpArray[index];\r\n                    data._laid = true;\r\n                    if (data.key == \"1\") {\r\n                        model.setDataProperty(n.data, \"textAngle\", 0);\r\n                        continue;\r\n                    }\r\n                    result = getNumOfLevelChild(data, model, maxCircle);\r\n                    childNum = result.count;\r\n                    if (childNum < 0) {\r\n                        continue;\r\n                    }\r\n                    if (childNum == 0) {\r\n                        var separator = sweepUnit;\r\n                    } else {\r\n                        var separator = childNum * sweepUnit;\r\n                    }\r\n                    if (index == 0) {\r\n                        start = -90;\r\n                    }\r\n\r\n                    angle = start + separator / 2;\r\n                    start += separator;\r\n                    var a = angle;\r\n                    var p = new go.Point(radius + layerThickness / 2, 0);\r\n                    // console.log('layerThickness', layerThickness, 'radius:', radius)\r\n                    p.rotate(a);\r\n                    // n.location = p;\r\n                    model.setDataProperty(data, \"loc\", go.Point.stringify(p));\r\n                    model.setDataProperty(data, \"dangle\", a);\r\n                    model.setDataProperty(data, \"sweep\", separator);\r\n                    model.setDataProperty(data, \"dradius\", radius);\r\n                    model.setDataProperty(data, \"layerThickness\", layerThickness);\r\n                    \r\n                    // make sure text is never upside down\r\n                    // var label = myDiagram.findNodeForKey(nodeData.key).findObject(\"TEXT\");\r\n                    //if (label !== null) {\r\n                    //label.angle = ((a > 90 && a < 270 || a < -90) ? 180 : 0);\r\n                    var tmpAngle = ((a > 90 && a < 270 || a < -90) ? 180 : 0);\r\n                    //if(a>80 && a < 100){\r\n                    //    label.angle = -a;\r\n                    //}\r\n                    if (tdDipanTextAngle == 'xuanzhuan') { //文字方向旋转\r\n                        model.setDataProperty(data, \"textAngle\", tmpAngle);\r\n                    }\r\n                    if (tdDipanTextAngle == 'fangshe') { //文字方向旋转\r\n                        var tmpAngle = (a > 0 && a < 180 || a < -180) ? 180 : 0;\r\n                        model.setDataProperty(data, \"textAngle\", 90);\r\n\r\n                        // label.width = 100;\r\n                    }\r\n                    //}\r\n                    if (tdDipanTextAngle == 'zhengli') { //文字方向正向\r\n                        model.setDataProperty(data, \"textAngle\", -a);\r\n                    }\r\n\r\n                }\r\n\r\n            }\r\n\r\n            // 指定层均分会调用内圈均分的函数\r\n            console.log()\r\n            if (maxCircle < this.getMaxCircle(myDiagram)) {\r\n                radlay1(myDiagram.findNodeForKey(1), 1, 90, 360, layerThickness, tdDipanTextAngle);\r\n            }\r\n        }\r\n \r\n        //获取node指定层子节点的个数,isAll是否是所有子孙\r\n        function getNumOfLevelChild(nodeData, model, level, isAll) {\r\n            var result = { count: 0, list: [] },\r\n                flag = false;\r\n            try {\r\n                if (nodeData.key == 1) {\r\n                    model.nodeDataArray.forEach(function(d) {\r\n                        if (isAll) {\r\n                            flag = d.level >= level\r\n                        } else {\r\n                            flag = d.level == level\r\n                        }\r\n                        if (!_.has(d, 'isGroup') && flag) {\r\n                            result.count += 1;\r\n                            result.list.push(d);\r\n                        }\r\n                    })\r\n                } else {\r\n                    //var result = 0;\r\n                    if (nodeData.isparent) {\r\n                        var firstChild = model.findNodeDataForKey(nodeData.isparent);\r\n                    } else {\r\n                        return result;\r\n                    }\r\n                    helpers.tdTravelTdpData(firstChild, model, [], function(d) {\r\n                        if (isAll) {\r\n                            flag = d.level >= level\r\n                        } else {\r\n                            flag = d.level == level\r\n                        }\r\n                        if (!_.has(d, 'isGroup') && flag) {\r\n                            result.count += 1;\r\n                            result.list.push(d);\r\n                        }\r\n                    });\r\n                }\r\n            } catch (e) {\r\n\r\n\r\n                console.log(e);\r\n                return { count: 0, list: [] };\r\n            }\r\n\r\n            return result;\r\n        }\r\n\r\n    }\r\n\r\n    //快捷键\r\n    dokeyDownFnq (diagram) {\r\n        var myDiagram = this.diagram;\r\n        var e = myDiagram.lastInput;\r\n        var cmd = myDiagram.commandHandler;\r\n        var node = myDiagram.selection.first();\r\n\r\n        // if (e.event.altKey) {\r\n        //     if (e.key == \"Q\") {\r\n        //         autoLayoutAll();\r\n        //         return;\r\n        //     } else if (e.key == \"R\") {\r\n        //         centerNode();\r\n        //         return;\r\n        //     } else if (e.key == \"C\") {\r\n        //         centerCurrentNode();\r\n        //         return;\r\n        //     } else if (e.key == \"A\") {\r\n        //         zoomToFit();\r\n        //         return;\r\n        //     }\r\n        // }\r\n        if (e.event.keyCode >= 65 && e.event.keyCode <= 90 && !e.event.altKey && !e.event.ctrlKey && !e.event.shiftKey) {\r\n            // e.bubbles = true;\r\n            e.bubbles = false;\r\n            this.selectText(e, diagram);\r\n            return true;\r\n        }\r\n\r\n        if (e.event.keyCode === 13) { // could also check for e.control or e.shift\r\n            if (node && node.data.category == 'Root' ) {\r\n                this.addFollowerGround();\r\n            } else if(node && node.data.category == 'dipan'){\r\n                this.addFollowerGround();\r\n            }\r\n\r\n        } else if (e.event.keyCode === 9) { // could also check for e.control or e.shift\r\n            if (node && node.data.category == 'Root') {\r\n\r\n                this.addNewCircle();\r\n            } else if(node && node.data.category == 'dipan'){\r\n                this.addNewCircle();\r\n            }\r\n        } else if (e.key === \"t\") { // could also check for e.control or e.shift\r\n            if (cmd.canCollapseSubGraph()) {\r\n                cmd.collapseSubGraph();\r\n            } else if (cmd.canExpandSubGraph()) {\r\n                cmd.expandSubGraph();\r\n            }\r\n        } else if (e.key == \"Del\") {\r\n            if (myDiagram.selection.count == 0) {\r\n                return;\r\n            }\r\n            e.diagram.commandHandler.deleteSelection();\r\n        } else if (e.event.keyCode == 113) { //F2,覆盖地盘默认行为\r\n            this.selectText();\r\n        } else if (e.event.keyCode == 37) { //左\r\n            this.moveWithinNodes('left');\r\n        } else if (e.event.keyCode == 38) { //上\r\n            this.moveWithinNodes('up');\r\n        } else if (e.event.keyCode == 39) { //右\r\n            this.moveWithinNodes('right');\r\n        } else if (e.event.keyCode == 40) { //下\r\n            this.moveWithinNodes('down');\r\n        } else {\r\n            // call base method with no arguments\r\n            go.CommandHandler.prototype.doKeyDown.call(cmd);\r\n        }\r\n        e.bubbles = false; //阻止事件冒泡到dom\r\n    }\r\n    \r\n    // 生成base64图片\r\n    downloadImage() {\r\n        var myDiagram = this.diagram;\r\n        var imgdata = myDiagram.makeImageData({\r\n            scale: 1.0,\r\n            background: \"#ffffff\",\r\n            type: \"image/png\",\r\n            maxSize: new go.Size(9000, 9000)\r\n        });\r\n\r\n        return imgdata;\r\n    }\r\n}\r\n\r\n//临时扇区转换为正式扇区\r\nfunction changeTemp2normal(myDiagram) {\r\n\r\n    var node = myDiagram.selection.first();\r\n    if (node.data.istemp) {\r\n        myDiagram.model.startTransaction();\r\n        var tmpNode = myDiagram.findNodeForKey(node.data.parent);\r\n        myDiagram.model.setDataProperty(node.data, \"istemp\", undefined);\r\n        var lastNode = null; //记录这一级扇区\r\n        while (tmpNode) {\r\n            if (tmpNode.data.istemp) {\r\n                myDiagram.model.setDataProperty(tmpNode.data, \"istemp\", undefined);\r\n                myDiagram.model.setDataProperty(tmpNode.data, \"text\", \"双击编辑内容\");\r\n                lastNode = tmpNode;\r\n            } else {\r\n                if (lastNode) {\r\n                    myDiagram.model.setDataProperty(tmpNode.data, \"isparent\", lastNode.data.key);\r\n                }\r\n                break;\r\n            }\r\n            tmpNode = myDiagram.findNodeForKey(tmpNode.data.parent);\r\n        }\r\n        myDiagram.model.commitTransaction();\r\n        myDiagram.isModified = true;\r\n    }\r\n}\r\n\r\n\r\nfunction computeEffectiveCollection(parts) {\r\n    var coll = new go.Set(go.Part);\r\n    var node = parts.first();\r\n    if (node) {\r\n        helpers.travelParts(node, function(p) {\r\n            coll.add(p);\r\n        })\r\n    } else {\r\n        coll.addAll(parts);\r\n    }\r\n    var tool = this;\r\n\r\n    return go.DraggingTool.prototype.computeEffectiveCollection.call(this, coll);\r\n};\r\n\r\nfunction applyTheme2Node(follower, myDiagram) {\r\n    var tdCurrentTheme = myDiagram.__trtd.tdCurrentTheme\r\n    // follower.strokeWidth = tdCurrentTheme.borderWidth;\r\n    // follower.stroke = tdCurrentTheme.borderColor;\r\n    myDiagram.model.setDataProperty(follower, 'strokeWidth', tdCurrentTheme.borderWidth);\r\n    myDiagram.model.setDataProperty(follower, 'stroke', tdCurrentTheme.borderColor);\r\n    if (tdCurrentTheme.colorRange == null) {\r\n        // follower.fill = randomColor({luminosity: 'light', count: 1})[0];\r\n        myDiagram.model.setDataProperty(follower, 'fill', randomColor({ luminosity: 'light', count: 1 })[0]);\r\n    } else if (tdCurrentTheme.colorRange instanceof Array) {\r\n        var tmpColor = \"white\";\r\n        if (follower.level >= tdCurrentTheme.colorRange.length) {\r\n            tmpColor = tdCurrentTheme.colorRange[follower.level % tdCurrentTheme.colorRange.length];\r\n        } else {\r\n            tmpColor = tdCurrentTheme.colorRange[follower.level];\r\n        }\r\n        // follower.fill = tmpColor;\r\n        myDiagram.model.setDataProperty(follower, 'fill', tmpColor);\r\n    } else if (tdCurrentTheme.colorRange == \"random\") {\r\n        //层级颜色一样的随机色\r\n        if (follower.prev) {\r\n            var preNode = myDiagram.findNodeForKey(follower.prev);\r\n            if (preNode) {\r\n                // follower.fill = preNode.data.fill;\r\n                myDiagram.model.setDataProperty(follower, 'fill', preNode.data.fill);\r\n            } else {\r\n                // follower.fill = randomColor({luminosity: 'light', count: 1})[0];\r\n                myDiagram.model.setDataProperty(follower, 'fill', randomColor({ luminosity: 'light', count: 1 })[0]);\r\n            }\r\n\r\n        } else {\r\n            // follower.fill = randomColor({luminosity: 'light', count: 1})[0];\r\n            myDiagram.model.setDataProperty(follower, 'fill', randomColor({ luminosity: 'light', count: 1 })[0]);\r\n        }\r\n    } else {\r\n        // follower.fill = \"rgba(0,0,0,0)\";\r\n        if (tdCurrentTheme.colorRange == \"white\") {\r\n            myDiagram.model.setDataProperty(follower, 'fill', \"white\");\r\n        } else {\r\n            myDiagram.model.setDataProperty(follower, 'fill', \"rgba(0,0,0,0)\");\r\n        }\r\n\r\n    }\r\n    return follower;\r\n}\r\n\r\n//生成地盘的figure形状\r\nfunction makeAnnularWedge(data, layerThickness) {\r\n    var sweep = data.sweep ? data.sweep : 360;\r\n    var layerThickness = data.layerThickness || 100;\r\n    var radius = data.dradius ? data.dradius : 100;\r\n    var p = new go.Point(radius + layerThickness, 0).rotate(-sweep / 2);\r\n    var q = new go.Point(radius, 0).rotate(sweep / 2);\r\n    var geo = new go.Geometry()\r\n        .add(new go.PathFigure(p.x, p.y)\r\n            .add(new go.PathSegment(go.PathSegment.Arc, -sweep / 2, sweep, 0, 0, radius + layerThickness, radius + layerThickness))\r\n            .add(new go.PathSegment(go.PathSegment.Line, q.x, q.y))\r\n            .add(new go.PathSegment(go.PathSegment.Arc, sweep / 2, -sweep, 0, 0, radius, radius).close()));\r\n    geo.normalize();\r\n    return geo;\r\n}\r\n\r\nfunction getRootNodeData(model) {\r\n    var root = null;\r\n    root = model.nodeDataArray.find((o)=>{\r\n        if(!o.isGroup && o.category == \"Root\" && o.level == 0){\r\n            return true;\r\n        }\r\n    })\r\n\r\n    return root;\r\n}\r\n\r\n\r\n\r\n\r\n\r\n// function cxcommand (obj, val) {\r\n//     var diagram = obj.diagram;\r\n//     var myDiagram = obj.diagram;\r\n//     if (!(diagram.currentTool instanceof go.ContextMenuTool)) return;\r\n//     switch (val) {\r\n//         // case \"Paste\": diagram.commandHandler.pasteSelection(diagram.lastInput.documentPoint); break;\r\n//         case \"addChildNodeMenu\":\r\n//             tdAddChildNode(obj);\r\n//             break;\r\n//         case \"addLevelNodeMenu\":\r\n//             tdAddLevelNode(obj);\r\n//             break;\r\n//         case \"changeDipanBgMenu\":\r\n//             changeDipanBackgroundImg();\r\n//             break;\r\n//         case \"removeDipanBgMenu\":\r\n//             removeDipanBackgroundImg(obj);\r\n//             break;\r\n//         case \"deleteNodeMenu\":\r\n//             myDiagram.toolManager.textEditingTool.doCancel();\r\n//             myDiagram.commandHandler.deleteSelection();\r\n//             break;\r\n//         case \"addNodePictureMenu\":\r\n//             // jQuery(\"#insertimage\").modal('show');\r\n//             // document.getElementById('insertimage').modal('show');\r\n//             break; //特殊处理\r\n//         case \"removeNodePictureMenu\":\r\n//             removeNodePicture(obj);\r\n//             break;\r\n//         case \"clearNodeTextMenu\":\r\n//             var node = myDiagram.selection.first();\r\n//             if (node) {\r\n//                 myDiagram.startTransaction();\r\n//                 myDiagram.model.setDataProperty(node.data, \"text\", \"\");\r\n//                 myDiagram.commitTransaction();\r\n//             };\r\n//             break;\r\n//         case \"locateRootNodeMenu\":\r\n//             centerNode(obj);\r\n//             break;\r\n//         case \"showAllNodesMenu\":\r\n//             zoomToFit(obj);\r\n//             break;\r\n//         case \"removeOutCycleMenu\":\r\n//             removeOutCycle(obj);\r\n//             break;\r\n//         case \"centerPictureMenu\":\r\n//             centerPicture(obj);\r\n//             break;\r\n//         case \"equalWidthHeightPictureMenu\":\r\n//             equalWidthHeightPicture(obj);\r\n//             break;\r\n//         case \"bringToTopMenu\":\r\n//             bringToLayer(\"Foreground\", obj);\r\n//             break;\r\n//         case \"bringToBackgroundMenu\":\r\n//             bringToLayer(\"Background\", obj);\r\n//             break;\r\n//         case \"bringUpMenu\":\r\n//             bringToLayer(null, obj);\r\n//             break;\r\n//         case \"layoutGroupMenu\":\r\n//             autoLayoutAll(true, obj);\r\n//             break;\r\n\r\n//         case \"insertTextMenu\":\r\n//             insertTextNode(obj);\r\n//             break;\r\n//         case \"duplicateNode\":\r\n//             duplicateNode(obj);\r\n//             break; // 复制节点\r\n//         case \"insertTianpanMenu\":\r\n//             myDiagram.toolManager.clickCreatingTool.insertPart(myDiagram.lastInput.documentPoint);\r\n//             break;\r\n//         //固定节点\r\n//         case \"fixPictureMenu\":   \r\n//         case \"activePictureMenu\":\r\n//             //var node = myDiagram.findPartAt(myDiagram.lastInput.documentPoint, false);\r\n//             var node = myDiagram.selection.first();\r\n//             myDiagram.startTransaction();\r\n//             myDiagram.model.setDataProperty(node.data, \"selectable\", node.data.selectable != undefined ? (!node.data.selectable) : false);\r\n//             myDiagram.commitTransaction();\r\n//             break;\r\n//         case \"orderChildNode\":\r\n//             orderChildNode(obj);\r\n//             break;\r\n//         case \"clearOrderChildNode\":\r\n//             clearOrderChildNode(obj);\r\n//             break;\r\n//         case \"delYunpanAxis\":\r\n//             yunpan.yunpandel(obj);\r\n//             break;\r\n//         case \"addYunpanAxis\":\r\n//             var node = myDiagram.selection.first();\r\n//             if(node.data.loc.split(\" \")[1] === \"0\"&&node.data.category!==\"x\"){\r\n//                 yunpan.addy(obj)\r\n//             }else if(node.data.loc.split(\" \")[0] === \"0\"&&node.data.category!==\"y\"){\r\n//                 yunpan.addx(obj)\r\n//             }; \r\n//             break;\r\n//         case \"addLevelDipanNode\":\r\n//             if(myDiagram.selection.first().data.istemp){\r\n//                 return\r\n//             }\r\n//             obj.addFollowerGround();\r\n//             break;\r\n//         case \"addChildDipanNode\":\r\n//             var node = myDiagram.selection.first();\r\n//                 if(node.data.parent){\r\n//                     var parentNode = node.diagram.findNodeForKey(node.data.parent);\r\n//                     if(parentNode.data.istemp){\r\n//                         return\r\n//                     }\r\n//                 }\r\n//             obj.addNewCircle(obj);\r\n//             break;\r\n//         case \"deleteDipanNode\":\r\n//         // myDiagram.commandHandler.deleteSelection();\r\n//         obj.deleteSelection();\r\n//         break;\r\n//     }\r\n//     diagram.currentTool.stopTool();\r\n// }\r\n\r\n\r\n// 清除节点的关系属性，比如父节点索引，子节点索引等\r\nfunction clearRelProperty(data) {\r\n    data.level = 0;\r\n    delete data.prev;\r\n    delete data.isparent;\r\n    delete data.next;\r\n    delete data.group;\r\n    delete data.parent;\r\n    return data;\r\n}\r\n\r\n// 复制单个节点\r\nfunction duplicateNode(obj) {\r\n    var myDiagram = obj.diagram;\r\n    var node = myDiagram.selection.first();\r\n    if (!node) return;\r\n    myDiagram.startTransaction();\r\n    var newData = myDiagram.model.copyNodeData(node.data);\r\n    var location = node.location.copy();\r\n    location.offset(50, -50);\r\n    newData.loc = go.Point.stringify(location);\r\n    newData.level = 0;\r\n    newData = clearRelProperty(newData);\r\n    myDiagram.model.addNodeData(newData);\r\n    myDiagram.commitTransaction();\r\n}\r\n\r\nTrtd.go = go;\r\n\r\n// if (typeof window !== 'undefined') {\r\n// \tif(window.Trtd){\r\n//         window.Trtd.dipan = Trtd;\r\n//     } else{\r\n//         window.Trtd = {\r\n//             dipan: Trtd\r\n//         }\r\n//     }\r\n// }\r\n\r\n// export default Trtd;\r\nmodule.exports = Trtd;\n\n\n// WEBPACK FOOTER //\n// ./src/diagram/dipan.js","\r\nvar Trtd_tianpan = require('./tianpan')\r\nvar createNodeTemplate = require('../nodeTemplate/createNodeTemplate')\r\nvar createPictureSingleNodeTemplate = require('../nodeTemplate/createPictureSingleNodeTemplate')\r\nvar createPictureNodeTemplate = require('../nodeTemplate/createPictureNodeTemplate')\r\nvar createTextNodeTemplate = require('../nodeTemplate/createTextNodeTemplate')\r\nvar createNodeSvgTemplate = require('../nodeTemplate/createNodeSvgTemplate')\r\n\r\n\r\nclass Trtd extends Trtd_tianpan {\r\n    constructor(div, config){\r\n        super(div, config)\r\n\t\t// this.config = config;\r\n\t\t// this.modelChangedListener = config.modelChangedListener;\r\n\t\t// this.type = config.type;\r\n\t\t// this.diagram = {};\r\n        // this.model = config.model;\r\n        // this.tpid = config.tpid||Date.now();\r\n        // this.InitialFontSize = 18\r\n        // this.tdCurrentTheme = {\r\n        //     id: 6,\r\n        //     borderWidth: 2,\r\n        //     borderColor: \"black\",\r\n        //     groupColor: \"rgba(0,0,0,0)\",\r\n        //     groupStroke: \"rgba(0,0,0,0)\",\r\n        //     groupStrokeWidth: 0,\r\n        //     themeName: \"黑白\",\r\n        //     linkColor: \"black\",\r\n        //     colorRange: \"white\"\r\n        // }\r\n\t\t// // 初始化diagram\r\n\t\t// this.initDiagram(div, config);\r\n\t\t// this.initListener();\r\n\t\t// // Then you will need to construct a Model (usually a GraphLinksModel) for the Diagram, initialize its data by setting its Model.nodeDataArray and other properties, and then set the diagram's model.\r\n        // if(this.model){\r\n        //     this.initModel();\r\n        // }\r\n    }\r\n\r\n     /**\r\n     * 添加节点模板\r\n     */\r\n    addNodeTemplate(){\r\n\r\n\r\n        // myDiagram.nodeTemplateMap.add(\"dipan\", this.createDipanTemplate(layerThickness,tdDipanTextAngle));\r\n        // myDiagram.nodeTemplateMap.add(\"Root\", this.getDipanRootTemplate(layerThickness));\r\n        // myDiagram.nodeTemplateMap.add(\"text\", );\r\n        var myDiagram = this.diagram\r\n        myDiagram.nodeTemplateMap.add(\"0\", createNodeTemplate(this.diagram));\r\n        myDiagram.nodeTemplateMap.add(\"1\", createNodeTemplate(this.diagram));\r\n        myDiagram.nodeTemplateMap.add(\"2\", createNodeTemplate(this.diagram));\r\n        myDiagram.nodeTemplateMap.add(\"3\", createPictureSingleNodeTemplate(this.diagram));\r\n        myDiagram.nodeTemplateMap.add(\"4\", createPictureNodeTemplate(this.diagram));\r\n        myDiagram.nodeTemplateMap.add(\"text\", createTextNodeTemplate(this.diagram));\r\n        myDiagram.nodeTemplateMap.add(\"\", createNodeTemplate(this.diagram));\r\n\r\n        myDiagram.nodeTemplateMap.add(\"8\",createNodeSvgTemplate(this.diagram));\r\n\r\n        \r\n    }\r\n}\r\n\r\n// export default Trtd;\r\nmodule.exports = Trtd;\n\n\n// WEBPACK FOOTER //\n// ./src/diagram/jin.js","\r\nvar Trtd_tianpan = require('./tianpan')\r\nvar createNodeTemplate = require('../nodeTemplate/createNodeTemplate')\r\nvar createPictureSingleNodeTemplate = require('../nodeTemplate/createPictureSingleNodeTemplate')\r\nvar createPictureNodeTemplate = require('../nodeTemplate/createPictureNodeTemplate')\r\nvar createTextNodeTemplate = require('../nodeTemplate/createTextNodeTemplate')\r\nvar createNodeSvgTemplate = require('../nodeTemplate/createNodeSvgTemplate')\r\n\r\n\r\nclass Trtd extends Trtd_tianpan {\r\n    constructor(div, config){\r\n        super(div, config)\r\n\t\t// this.config = config;\r\n\t\t// this.modelChangedListener = config.modelChangedListener;\r\n\t\t// this.type = config.type;\r\n\t\t// this.diagram = {};\r\n        // this.model = config.model;\r\n        // this.tpid = config.tpid||Date.now();\r\n        // this.InitialFontSize = 18\r\n        // this.tdCurrentTheme = {\r\n        //     id: 6,\r\n        //     borderWidth: 2,\r\n        //     borderColor: \"black\",\r\n        //     groupColor: \"rgba(0,0,0,0)\",\r\n        //     groupStroke: \"rgba(0,0,0,0)\",\r\n        //     groupStrokeWidth: 0,\r\n        //     themeName: \"黑白\",\r\n        //     linkColor: \"black\",\r\n        //     colorRange: \"white\"\r\n        // }\r\n\t\t// // 初始化diagram\r\n\t\t// this.initDiagram(div, config);\r\n\t\t// this.initListener();\r\n\t\t// // Then you will need to construct a Model (usually a GraphLinksModel) for the Diagram, initialize its data by setting its Model.nodeDataArray and other properties, and then set the diagram's model.\r\n        // if(this.model){\r\n        //     this.initModel();\r\n        // }\r\n    }\r\n\r\n     /**\r\n     * 添加节点模板\r\n     */\r\n    addNodeTemplate(){\r\n\r\n        // myDiagram.nodeTemplateMap.add(\"dipan\", this.createDipanTemplate(layerThickness,tdDipanTextAngle));\r\n        // myDiagram.nodeTemplateMap.add(\"Root\", this.getDipanRootTemplate(layerThickness));\r\n        // myDiagram.nodeTemplateMap.add(\"text\", );\r\n        var myDiagram = this.diagram\r\n        myDiagram.nodeTemplateMap.add(\"0\", createNodeTemplate(this.diagram));\r\n        myDiagram.nodeTemplateMap.add(\"1\", createNodeTemplate(this.diagram));\r\n        myDiagram.nodeTemplateMap.add(\"2\", createNodeTemplate(this.diagram));\r\n        myDiagram.nodeTemplateMap.add(\"3\", createPictureSingleNodeTemplate(this.diagram));\r\n        myDiagram.nodeTemplateMap.add(\"4\", createPictureNodeTemplate(this.diagram));\r\n        myDiagram.nodeTemplateMap.add(\"text\", createTextNodeTemplate(this.diagram));\r\n        myDiagram.nodeTemplateMap.add(\"\", createNodeTemplate(this.diagram));\r\n\r\n        myDiagram.nodeTemplateMap.add(\"8\",createNodeSvgTemplate(this.diagram));\r\n\r\n        \r\n    }\r\n}\r\n\r\n// export default Trtd;\r\nmodule.exports = Trtd;\n\n\n// WEBPACK FOOTER //\n// ./src/diagram/huo.js","\r\nvar Trtd_tianpan = require('./tianpan')\r\nvar createNodeTemplate = require('../nodeTemplate/createNodeTemplate')\r\nvar createPictureSingleNodeTemplate = require('../nodeTemplate/createPictureSingleNodeTemplate')\r\nvar createPictureNodeTemplate = require('../nodeTemplate/createPictureNodeTemplate')\r\nvar createTextNodeTemplate = require('../nodeTemplate/createTextNodeTemplate')\r\nvar createNodeSvgTemplate = require('../nodeTemplate/createNodeSvgTemplate')\r\n\r\n\r\nclass Trtd extends Trtd_tianpan {\r\n    constructor(div, config){\r\n        super(div, config)\r\n\t\t// this.config = config;\r\n\t\t// this.modelChangedListener = config.modelChangedListener;\r\n\t\t// this.type = config.type;\r\n\t\t// this.diagram = {};\r\n        // this.model = config.model;\r\n        // this.tpid = config.tpid||Date.now();\r\n        // this.InitialFontSize = 18\r\n        // this.tdCurrentTheme = {\r\n        //     id: 6,\r\n        //     borderWidth: 2,\r\n        //     borderColor: \"black\",\r\n        //     groupColor: \"rgba(0,0,0,0)\",\r\n        //     groupStroke: \"rgba(0,0,0,0)\",\r\n        //     groupStrokeWidth: 0,\r\n        //     themeName: \"黑白\",\r\n        //     linkColor: \"black\",\r\n        //     colorRange: \"white\"\r\n        // }\r\n\t\t// // 初始化diagram\r\n\t\t// this.initDiagram(div, config);\r\n\t\t// this.initListener();\r\n\t\t// // Then you will need to construct a Model (usually a GraphLinksModel) for the Diagram, initialize its data by setting its Model.nodeDataArray and other properties, and then set the diagram's model.\r\n        // if(this.model){\r\n        //     this.initModel();\r\n        // }\r\n    }\r\n\r\n     /**\r\n     * 添加节点模板\r\n     */\r\n    addNodeTemplate(){\r\n        var myDiagram = this.diagram\r\n\r\n        myDiagram.nodeTemplateMap.add(\"0\", createNodeTemplate(this.diagram));\r\n        myDiagram.nodeTemplateMap.add(\"1\", createNodeTemplate(this.diagram));\r\n        myDiagram.nodeTemplateMap.add(\"2\", createNodeTemplate(this.diagram));\r\n        myDiagram.nodeTemplateMap.add(\"3\", createPictureSingleNodeTemplate(this.diagram));\r\n        myDiagram.nodeTemplateMap.add(\"4\", createPictureNodeTemplate(this.diagram));\r\n        myDiagram.nodeTemplateMap.add(\"text\", createTextNodeTemplate(this.diagram));\r\n        myDiagram.nodeTemplateMap.add(\"\", createNodeTemplate(this.diagram));\r\n\r\n        myDiagram.nodeTemplateMap.add(\"8\",createNodeSvgTemplate(this.diagram));\r\n\r\n        \r\n    }\r\n}\r\n\r\n\r\n// export default Trtd;\r\nmodule.exports = Trtd;\n\n\n// WEBPACK FOOTER //\n// ./src/diagram/shui.js","\r\nvar Trtd_tianpan = require('./tianpan')\r\nvar $ = go.GraphObject.make;\r\n\r\n// var createNodeTemplate = require('../nodeTemplate/createNodeTemplate')\r\nvar createPictureSingleNodeTemplate = require('../nodeTemplate/createPictureSingleNodeTemplate')\r\nvar createPictureNodeTemplate = require('../nodeTemplate/createPictureNodeTemplate')\r\nvar createTextNodeTemplate = require('../nodeTemplate/createTextNodeTemplate')\r\nvar createNodeSvgTemplate = require('../nodeTemplate/createNodeSvgTemplate')\r\n\r\n\r\nclass Trtd extends Trtd_tianpan {\r\n    constructor(div, config){\r\n        super(div, config)\r\n        this.initDiagramYun(div, config)\r\n\t\t// this.config = config;\r\n\t\t// this.modelChangedListener = config.modelChangedListener;\r\n\t\t// this.type = config.type;\r\n\t\t// this.diagram = {};\r\n        // this.model = config.model;\r\n        // this.tpid = config.tpid||Date.now();\r\n        // this.InitialFontSize = 18\r\n        // this.tdCurrentTheme = {\r\n        //     id: 6,\r\n        //     borderWidth: 2,\r\n        //     borderColor: \"black\",\r\n        //     groupColor: \"rgba(0,0,0,0)\",\r\n        //     groupStroke: \"rgba(0,0,0,0)\",\r\n        //     groupStrokeWidth: 0,\r\n        //     themeName: \"黑白\",\r\n        //     linkColor: \"black\",\r\n        //     colorRange: \"white\"\r\n        // }\r\n\t\t// // 初始化diagram\r\n\t\t// this.initDiagram(div, config);\r\n\t\t// this.initListener();\r\n\t\t// // Then you will need to construct a Model (usually a GraphLinksModel) for the Diagram, initialize its data by setting its Model.nodeDataArray and other properties, and then set the diagram's model.\r\n        // if(this.model){\r\n        //     this.initModel();\r\n        // }\r\n    }\r\n\r\n    initDiagramYun(div, config){\r\n        // this.diagram.contextMenu = ()=>{\r\n        //     var that = this\r\n        //     return getYunpanNodeContextMenu;\r\n        // },\r\n        var myDiagram = this.diagram;\r\n        var defaultConfig = {\r\n            contextMenu:this.getYunpanNodeContextMenu,\r\n            \"animationManager.isEnabled\": false,\r\n        }\r\n        this.diagram.commandHandler.doKeyDown = ()=>{\r\n            var that = this\r\n            return yunpanDokeyDownFn(that);\r\n        }\r\n        var diagramConfig = Object.assign(defaultConfig, config.diagramConfig);\r\n        this.diagram.setProperties(diagramConfig);\r\n        this.addNodeTemplate();\r\n        return myDiagram\r\n    }\r\n     /**\r\n     * 添加节点模板\r\n     */\r\n    addNodeTemplate(){\r\n\r\n        var that = this;\r\n        var myDiagram = this.diagram\r\n        myDiagram.nodeTemplateMap.add(\"yunpanx\",createNodeTemplatex(that));\r\n        myDiagram.nodeTemplateMap.add(\"yunpany\",createNodeTemplatey(that));\r\n        myDiagram.nodeTemplateMap.add(\"y\",yTemplate(that));\r\n        myDiagram.nodeTemplateMap.add(\"x\",yTemplate(that));\r\n        myDiagram.nodeTemplateMap.add(\"ytext\",tTemplate());\r\n        myDiagram.nodeTemplateMap.add(\"xtext\",tTemplate());\r\n        myDiagram.nodeTemplateMap.add(\"LogicXor\",LogicXor(that));\r\n        myDiagram.nodeTemplateMap.add(\"addtextTemplate\",addtextTemplate());\r\n\r\n        \r\n    }\r\n}\r\n\r\n// 返回云盘(轴)\r\nfunction createNodeTemplatex (that) {\r\n    return $(go.Node, \"Vertical\",\r\n        {\r\n            movable:false,\r\n            //allowMove:false,\r\n            //selectable:false,\r\n            locationSpot: go.Spot.Bottom,\r\n            location: new go.Point(0,0),\r\n            //locationObjectName: \"LINE\",\r\n            angle: 90,\r\n            click: function(e, node) {\r\n                console.log(node.data)\r\n            \r\n                //  yunpanmune(e, node)\r\n                \r\n            },\r\n            //selectionAdorned:false,//取消选择的默认边框\r\n            selectionAdornmentTemplate: function() {\r\n                var $ = go.GraphObject.make;\r\n              \r\n                    return $(go.Adornment, \"Spot\",\r\n                        $(go.Panel, \"Auto\",\r\n                            \r\n                            $(go.Shape, {\r\n                                figure: \"Linev\", \r\n                                // fill: 'rgba(255,0,120,0.2)', \r\n                                fill:\"blue\",\r\n                                stroke: \"blue\", \r\n                                strokeWidth: 2,\r\n                                \r\n                            },\r\n                            ),\r\n                            $(go.Shape,\r\n                            { \r\n                                // geometry: go.Geometry.parse(\"m 8,0 l -8,4 8,4 0,-1 -6,-3 6,-3 0,-1 z\", false).rotate(90),\r\n                                geometry: go.Geometry.parse(\"M584.641736 896S299.62889 148.827862 0-128c0 0 413.707108 34.128461 584.641736 212.37111 0 0 163.261205-185.842992 584.641735-212.37111 0 0-486.056523 686.369398-584.641735 1024z\", true).rotate(180).scale(0.0117,0.0117),\r\n                                fill: \"blue\",\r\n                                stroke: \"blue\",\r\n                                strokeWidth: 0,\r\n                                alignment: new go.Spot(0.5, 0, 0, 0)\r\n                            }\r\n                            ),\r\n                            \r\n                            $(go.Placeholder) // this represents the selected Node\r\n\r\n                        ),\r\n\r\n                    );\r\n              \r\n                \r\n        \r\n            }(),\r\n        \r\n            //  contextMenu: function(e,node){\r\n            //     var diagram = node.diagram;\r\n            //     console.log(\"node.data\",node)\r\n            //     console.log(\"node.datanode.datanode.datanode.data\")\r\n            //     interactions.nodeContextMenu\r\n            //     //diagram.model.setDataProperty(node.data, \"stroke\",\"blue\");  \r\n            // },\r\n            contextMenu:getYunpanNodeContextMenu,\r\n\r\n            \r\n            mouseEnter:function(e,node){\r\n                var diagram = node.diagram\r\n                //diagram.model.setDataProperty(node.data, \"stroke\",\"blue\");  \r\n            },\r\n            mouseLeave:function(e,node){\r\n                //console.log(node.data)\r\n                var diagram = e.diagram\r\n                //diagram.model.setDataProperty(node.data, \"stroke\",\"#8799c4\");\r\n            },\r\n        },\r\n        new go.Binding(\"angle\", \"angle\").makeTwoWay(),\r\n        new go.Binding(\"location\", \"loc\",go.Point.parse).makeTwoWay(go.Point.stringify),\r\n        new go.Binding(\"selectable\", \"selectable\").makeTwoWay(),\r\n        // 箭头  \r\n        $(go.Shape, \r\n        { \r\n            // shape: \"BackwardV\",\r\n            // \"m 8,0 l -8,4 8,4 0,-1 -6,-3 6,-3 0,-1 z\"\r\n            // figure: \"Backward\",\r\n            geometry: go.Geometry.parse(\"M584.641736 896S299.62889 148.827862 0-128c0 0 413.707108 34.128461 584.641736 212.37111 0 0 163.261205-185.842992 584.641735-212.37111 0 0-486.056523 686.369398-584.641735 1024z\", true).rotate(180).scale(0.0117,0.0117),\r\n            fill: \"rgb(135,153,196)\",\r\n            stroke: \"#8799c4\",\r\n            strokeWidth: 0,\r\n            strokeDashArray: [0, 0],\r\n        },\r\n        new go.Binding(\"stroke\", \"stroke\").makeTwoWay(),\r\n        new go.Binding(\"fill\", \"stroke\").makeTwoWay(),\r\n        ),\r\n        // 坐标 \r\n        $(go.Shape,{ \r\n            name: 'LINE',\r\n            figure: \"Linev\",\r\n            //geometryString:geometryString,\r\n            //geometry: Y_geometry,\r\n            //fill: \"#8799c4\",\r\n            stroke: \"#8799c4\",\r\n            strokeWidth:2,\r\n        \r\n            strokeDashArray: [4, 2],\r\n            // position: new go.Point(0, 0)\r\n            // desiredSize: new go.Size(10, 100)\r\n        },\r\n        //new go.Binding(\"fill\", \"fill\").makeTwoWay(),\r\n        new go.Binding(\"stroke\", \"stroke\").makeTwoWay(),\r\n        new go.Binding(\"strokeDashArray\", \"strokeDashArray\").makeTwoWay(),\r\n        new go.Binding(\"geometryString\", \"geometryString\").makeTwoWay(),\r\n        new go.Binding(\"strokeWidth\", \"strokeWidth\").makeTwoWay(),\r\n        // new go.Binding(\"stroke\", \"isSelected\", function(sel,node) {\r\n        //     console.log(\"2333\")\r\n        //     if (sel) return \"red\"; else return \"stroke\";\r\n            \r\n        // }).ofObject(\"\")\r\n        new go.Binding(\"stroke\", \"stroke\", function(v) {\r\n                return v instanceof go.Brush ? v.stroke : v;\r\n            }).makeTwoWay()\r\n        ),\r\n        \r\n    )\r\n\r\n    \r\n}\r\nfunction createNodeTemplatey (that) {\r\n    return $(go.Node, \"Vertical\",\r\n        {\r\n            movable:false,\r\n            //allowMove:false,\r\n            //selectable:false,\r\n            locationSpot: go.Spot.Bottom,\r\n            location: new go.Point(0,0),\r\n            //locationObjectName: \"LINE\",\r\n            // angle: 0,\r\n            click: function(e, node) {\r\n                console.log(node.data)\r\n            \r\n                //  yunpanmune(e, node)\r\n                \r\n            },\r\n            //selectionAdorned:false,//取消选择的默认边框\r\n            selectionAdornmentTemplate: function() {\r\n                var $ = go.GraphObject.make;\r\n              \r\n                    return $(go.Adornment, \"Spot\",\r\n                        $(go.Panel, \"Auto\",\r\n                            \r\n                            $(go.Shape, {\r\n                                figure: \"Linev\", \r\n                                fill: 'rgba(255,0,120,0.2)', \r\n                                stroke: \"blue\", \r\n                                strokeWidth: 2, \r\n                            },\r\n                            ),\r\n                            $(go.Shape,\r\n                            { \r\n                                // geometry: go.Geometry.parse(\"m 8,0 l -8,4 8,4 0,-1 -6,-3 6,-3 0,-1 z\", false).rotate(90),\r\n                                geometry: go.Geometry.parse(\"M584.641736 896S299.62889 148.827862 0-128c0 0 413.707108 34.128461 584.641736 212.37111 0 0 163.261205-185.842992 584.641735-212.37111 0 0-486.056523 686.369398-584.641735 1024z\", true).rotate(180).scale(0.0117,0.0117),\r\n                                fill: \"blue\",\r\n                                stroke: \"blue\",\r\n                                strokeWidth: 0,\r\n                                alignment: new go.Spot(0.5, 0, 0, 0)\r\n                            }\r\n                            ),\r\n                            $(go.Placeholder) // this represents the selected Node\r\n                        ),\r\n                    );\r\n            }(),\r\n        \r\n            //  contextMenu: function(e,node){\r\n            //     var diagram = node.diagram;\r\n            //     console.log(\"node.data\",node)\r\n            //     console.log(\"node.datanode.datanode.datanode.data\")\r\n            //     interactions.nodeContextMenu\r\n            //     //diagram.model.setDataProperty(node.data, \"stroke\",\"blue\");  \r\n            // },\r\n            contextMenu:getYunpanNodeContextMenu,\r\n            mouseEnter:function(e,node){\r\n                var diagram = node.diagram\r\n                //diagram.model.setDataProperty(node.data, \"stroke\",\"blue\");  \r\n            },\r\n            mouseLeave:function(e,node){\r\n                //console.log(node.data)\r\n                var diagram = e.diagram\r\n                //diagram.model.setDataProperty(node.data, \"stroke\",\"#8799c4\");\r\n            },\r\n        },\r\n        new go.Binding(\"location\", \"loc\",go.Point.parse).makeTwoWay(go.Point.stringify),\r\n        new go.Binding(\"selectable\", \"selectable\").makeTwoWay(),\r\n        // 箭头  \r\n        $(go.Shape, \r\n        {\r\n            geometry: go.Geometry.parse(\"M584.641736 896S299.62889 148.827862 0-128c0 0 413.707108 34.128461 584.641736 212.37111 0 0 163.261205-185.842992 584.641735-212.37111 0 0-486.056523 686.369398-584.641735 1024z\", true).rotate(180).scale(0.0117,0.0117),\r\n            fill: \"rgb(135,153,196)\",\r\n            stroke: \"#8799c4\",\r\n            strokeWidth: 0,\r\n            strokeDashArray: [0, 0],\r\n        },\r\n        new go.Binding(\"stroke\", \"stroke\").makeTwoWay(),\r\n        new go.Binding(\"fill\", \"stroke\").makeTwoWay(),\r\n        ),\r\n        // 坐标 \r\n        $(go.Shape,{ \r\n            name: 'LINE',\r\n            figure: \"Linev\",\r\n            stroke: \"#8799c4\",\r\n            strokeWidth:2,\r\n            strokeDashArray: [4, 2],\r\n        },\r\n        new go.Binding(\"stroke\", \"stroke\").makeTwoWay(),\r\n        new go.Binding(\"strokeDashArray\", \"strokeDashArray\").makeTwoWay(),\r\n        new go.Binding(\"geometryString\", \"geometryString\").makeTwoWay(),\r\n        new go.Binding(\"strokeWidth\", \"strokeWidth\").makeTwoWay(),\r\n        new go.Binding(\"stroke\", \"stroke\", function(v) {\r\n                return v instanceof go.Brush ? v.stroke : v;\r\n            }).makeTwoWay()\r\n        ),\r\n        \r\n    )\r\n\r\n    \r\n}\r\n\r\n\r\n\r\n\r\n// 返回云盘(xy坐标轴)\r\nfunction yTemplate(that){\r\n    var $ = go.GraphObject.make;\r\n    return $(go.Node, \"Vertical\",\r\n    {\r\n        movable:false,\r\n        locationSpot: go.Spot.Bottom,\r\n        location: new go.Point(0,0),\r\n        //locationObjectName: \"LINE\",\r\n        angle: 0,\r\n        //selectionAdorned:false,//取消选择的默认边框\r\n        //desiredSize: new go.Size(400, 800),\r\n        click: function(e, node) {\r\n            console.log(node.data) \r\n        },\r\n        //点击\r\n        selectionAdornmentTemplate: function() {\r\n            var $ = go.GraphObject.make;\r\n                return $(go.Adornment, \"Spot\",\r\n                    $(go.Panel, \"Auto\",\r\n                        $(go.Shape, {\r\n                            figure: \"Linev\", \r\n                            // fill: 'rgba(255,0,120,0.2)', \r\n                            fill: \"blue\",\r\n                            stroke: \"blue\", \r\n                            strokeWidth: 2,\r\n                        },\r\n                        ),\r\n                        $(go.Shape,\r\n                        { \r\n                            geometry: go.Geometry.parse(\"M584.641736 896S299.62889 148.827862 0-128c0 0 413.707108 34.128461 584.641736 212.37111 0 0 163.261205-185.842992 584.641735-212.37111 0 0-486.056523 686.369398-584.641735 1024z\", true).rotate(180).scale(0.0117,0.0117),\r\n                            // fill: 'rgba(255,0,120,0.2)', \r\n                            fill: \"blue\",\r\n                            stroke: \"blue\",\r\n                            strokeWidth: 2,\r\n                            alignment: new go.Spot(0.5, 0, 0, 0)\r\n                        }\r\n                        ),\r\n                        \r\n                        $(go.Placeholder) // this represents the selected Node\r\n\r\n                    ),\r\n\r\n                );\r\n        }(),\r\n        // contextClick:function(e, node) {\r\n        //     addaxis(e, node)\r\n        // },\r\n        mouseHover:function(e,node){   \r\n            // that.showNodeRemarkTips(e, node);\r\n        },\r\n        mouseEnter:function(e,node){\r\n            var diagram = node.diagram\r\n            diagram.model.setDataProperty(node.data, \"stroke\",\"blue\");\r\n            diagram.model.setDataProperty(node.data, \"fill\",\"blue\")   \r\n  \r\n        },\r\n        mouseLeave:function(e,node){\r\n            //console.log(node.data)\r\n            var diagram = node.diagram\r\n         \r\n                that.removeNodeRemarkTips(); \r\n            \r\n                diagram.model.setDataProperty(node.data, \"stroke\",\"#8799c4\");\r\n                diagram.model.setDataProperty(node.data, \"fill\",\"#8799c4\");\r\n            //removeNodeRemarkTips()   \r\n        }, \r\n    },\r\n    new go.Binding(\"angle\", \"angle\").makeTwoWay(),\r\n    new go.Binding(\"location\", \"loc\",go.Point.parse).makeTwoWay(go.Point.stringify),\r\n    // 箭头  \r\n    $(go.Shape, \r\n    { \r\n        // shape: \"BackwardV\",\r\n        // \"m 8,0 l -8,4 8,4 0,-1 -6,-3 6,-3 0,-1 z\"\r\n        //figure: \"BackwardV\",\r\n        geometry: go.Geometry.parse(\"M584.641736 896S299.62889 148.827862 0-128c0 0 413.707108 34.128461 584.641736 212.37111 0 0 163.261205-185.842992 584.641735-212.37111 0 0-486.056523 686.369398-584.641735 1024z\", true).rotate(180).scale(0.0117,0.0117),\r\n        fill: \"#8799c4\",\r\n        stroke: \"#8799c4\",\r\n        // strokeWidth: 0,\r\n        // strokeDashArray: [0, 0],\r\n        // position: new go.Point(-6, -1)\r\n    },\r\n    new go.Binding(\"fill\", \"fill\").makeTwoWay(),\r\n    new go.Binding(\"stroke\", \"stroke\").makeTwoWay(),\r\n    new go.Binding(\"strokeWidth\", \"strokeWidth\").makeTwoWay(),\r\n    ),\r\n    // 坐标 \r\n    $(go.Shape,{ \r\n        name: 'LINE',\r\n        //geometry: Y_geometry,\r\n        width:0,\r\n        height:1000,\r\n        fill: \"#8799c4\",\r\n        stroke: \"#8799c4\",\r\n        strokeWidth: 2,\r\n       \r\n        //strokeDashArray: [4, 2],\r\n        // position: new go.Point(0, 0)\r\n        // desiredSize: new go.Size(10, 100)\r\n    },\r\n    new go.Binding(\"height\", \"height\").makeTwoWay(),\r\n    new go.Binding(\"fill\", \"fill\").makeTwoWay(),\r\n    new go.Binding(\"stroke\", \"stroke\").makeTwoWay(),\r\n    new go.Binding(\"strokeDashArray\", \"strokeDashArray\").makeTwoWay(),\r\n    new go.Binding(\"strokeWidth\", \"strokeWidth\").makeTwoWay(),\r\n    ),\r\n    \r\n   \r\n    )\r\n}\r\n\r\n\r\n//返回云盘文本\r\nfunction tTemplate(){\r\n    var $ = go.GraphObject.make;\r\n    return $(go.Node, \"Vertical\",\r\n    {\r\n        movable:false,\r\n        //locationSpot:locationSpot,\r\n        //locationSpot: go.Spot.Right,\r\n        selectionAdorned:false,//取消选择的默认边框\r\n        click: function(e, node) {\r\n            // showNodeToolBar(e,node);\r\n            console.log(node.data)\r\n        },\r\n       \r\n    },\r\n    //(\"locationSpot\", \"locationSpot\",node.data.group > 0 ? \"go.Spot.Right\":\"go.Spot.Top\").makeTwoWay(),\r\n    //new go.Binding(\"locationSpot\", \"locationSpot\",function(v,node)),\r\n    new go.Binding(\"location\", \"loc\",go.Point.parse).makeTwoWay(go.Point.stringify),\r\n    new go.Binding(\"locationSpot\", \"dir\", function(d) { return spotConverter(d, false); }),\r\n    $(go.Panel, \"Vertical\",\r\n    //{ width: 100, defaultStretch: go.GraphObject.None },\r\n    $(go.TextBlock, {\r\n            name: \"TEXT\",\r\n            alignment: new go.Spot(0, 1),\r\n            // font: \"bold 14px arial,\",\r\n            font: \"14px 微软雅黑\",\r\n            width:70,\r\n            // height:40,\r\n            //maxLines:7,\r\n            // spacingAbove: 4,\r\n            // spacingBelow: 4,\r\n            // editable :false,//禁止编辑\r\n            wrap: go.TextBlock.WrapDesiredSize,\r\n            // margin:5,\r\n            textAlign: \"center\",\r\n            // verticalAlignment :\"left\",\r\n            editable: true,\r\n            isMultiline: false,//单行\r\n            // margin: 10, \r\n            margin: 0, \r\n            stroke: \"black\",\r\n            isMultiline: true,\r\n            //overflow: go.TextBlock.OverflowClip,\r\n            //wrap: go.TextBlock.WrapDesiredSize,\r\n            alignment: go.Spot.Right,\r\n            portId: \"TEXT\",\r\n            stretch: go.GraphObject.Fill,\r\n            //background:\"green\"\r\n            // DoubleClick : false\r\n            \r\n        },\r\n        new go.Binding(\"text\", \"text\").makeTwoWay(),\r\n        new go.Binding(\"stroke\", \"textStroke\").makeTwoWay(),\r\n        new go.Binding(\"font\", \"font\").makeTwoWay(),\r\n        new go.Binding(\"margin\", \"margin\").makeTwoWay()\r\n        )\r\n    )\r\n    )}\r\n \r\n\r\nfunction spotConverter(dir, from) {\r\n    if (dir === \"right\") {\r\n    return  go.Spot.Right;\r\n    } else if(dir === \"top\") {\r\n    return (go.Spot.Top);\r\n    }\r\n}\r\n\r\n//返回云盘增加文本\r\nfunction addtextTemplate() {\r\n    var $ = go.GraphObject.make;\r\n    var properties = {\r\n        figure: \"Rectangle\",\r\n        fill: \"rgba(0,0,0,0)\",\r\n        strokeWidth: 1,\r\n        stroke: \"rgba(0,0,0,0)\",\r\n        fontSize: 15,\r\n        font: \"sans-serif\"\r\n    };\r\n\r\n    return $(go.Node, \"Spot\", {\r\n            \"_controlExpand\": true,\r\n            layerName: \"Foreground\",\r\n            locationSpot: go.Spot.Center,\r\n            resizeCellSize: new go.Size(10, 10),\r\n            locationObjectName: \"SHAPE\",\r\n            resizable: true,\r\n            resizeObjectName: \"SHAPE\", // user can resize the Shape\r\n            rotatable: true,\r\n            location: new go.Point(0, 0),\r\n            toMaxLinks: 1,\r\n            click: function(e, node) {\r\n                console.log(node.data)\r\n                // showNodeToolBar(e,node);\r\n            },\r\n            layoutConditions: go.Part.LayoutStandard,\r\n            alignment: go.Spot.Center,\r\n            alignmentFocus: go.Spot.Center\r\n        },\r\n        new go.Binding(\"location\", \"loc\", go.Point.parse).makeTwoWay(go.Point.stringify),\r\n        new go.Binding(\"isShadowed\", \"isShadowed\").makeTwoWay(),\r\n        new go.Binding(\"angle\", \"angle\").makeTwoWay(),\r\n        new go.Binding(\"selectable\", \"selectable\").makeTwoWay(),\r\n        new go.Binding(\"layerName\", \"layerName\", function(v, d) {\r\n            return v ? v : \"\";\r\n        }).makeTwoWay(function(v) {\r\n            return v;\r\n        }),\r\n        $(go.Shape, {\r\n                strokeDashArray: null,\r\n                // strokeDashOffset:10,\r\n                name: \"SHAPE\",\r\n                figure: \"Rectangle\",\r\n                fill: \"rgba(0,0,0,0)\",\r\n                fromLinkable: true,\r\n                toLinkable: true,\r\n                cursor: \"pointer\",\r\n                minSize: new go.Size(50, 50),\r\n                strokeWidth: 2,\r\n                stroke: \"rgba(0,0,0,0)\",\r\n                portId: \"\"\r\n            },\r\n            new go.Binding(\"strokeDashArray\", \"strokeDashArray\", function(v) {\r\n                return [v.split()[0], v.split()[1]];\r\n            }).makeTwoWay(function(v) {\r\n                return v[0] + \" \" + v[1];\r\n            }), //保留，设置边线样式\r\n            new go.Binding(\"fill\", \"fill\", function(v, obj) {\r\n                return v instanceof go.Brush ? v.color : v;\r\n            }).makeTwoWay(),\r\n            // new go.Binding(\"fill\", \"isSelected\", function(s, obj) { return s ? \"red\" : obj.part.data.color; }).ofObject()),\r\n            new go.Binding(\"width\", \"width\", function(v) {\r\n                //alert(v);\r\n                return v;\r\n            }).makeTwoWay(function(v) {\r\n                return v;\r\n            }),\r\n            new go.Binding(\"height\", \"height\", function(v) {\r\n                //alert(v);\r\n                return v;\r\n            }).makeTwoWay(function(v) {\r\n                return v;\r\n            }),\r\n            new go.Binding(\"stroke\", \"stroke\", function(v) {\r\n                return v instanceof go.Brush ? v.stroke : v;\r\n            }).makeTwoWay(),\r\n            new go.Binding(\"strokeWidth\", \"strokeWidth\", function(d) {\r\n                return d;\r\n            }).makeTwoWay(function(d) {\r\n                return d;\r\n            }),\r\n            new go.Binding(\"figure\", \"figure\").makeTwoWay(), {\r\n                figure: properties.figure,\r\n                fill: properties.fill,\r\n                strokeWidth: properties.strokeWidth,\r\n                stroke: properties.stroke\r\n            }\r\n        ),\r\n        $(go.Shape, {\r\n                name: \"SHAPE_Back\",\r\n                figure: \"Rectangle\",\r\n                fill: \"rgba(0,0,0,0)\",\r\n                // fromLinkable: true,\r\n                // toLinkable: true,\r\n                strokeWidth: 0\r\n            },\r\n            new go.Binding(\"width\", \"width\", function(v) {\r\n                return v;\r\n            }).ofObject(\"SHAPE\"),\r\n            new go.Binding(\"height\", \"height\", function(v) {\r\n                return v;\r\n            }).ofObject(\"SHAPE\")\r\n        ),\r\n        $(go.TextBlock, {\r\n                name: \"TEXT\",\r\n                alignment: new go.Spot(0.5, 0.5),\r\n                font: \"bold \" + 18 + \"px 幼圆\",\r\n                editable: true,\r\n                //margin: 3, editable: true,\r\n                stroke: \"black\",\r\n                isMultiline: true,\r\n                overflow: go.TextBlock.OverflowClip,\r\n                wrap: go.TextBlock.WrapDesiredSize,\r\n                textAlign: \"center\",\r\n                spacingAbove: 4,\r\n                spacingBelow: 4,\r\n                portId: \"TEXT\",\r\n                stretch: go.GraphObject.Fill\r\n            },\r\n            new go.Binding(\"textAlign\", \"textAlign\", function(v) {\r\n                return _.contains(['start', 'center', 'end'], v) ? v : \"center\";\r\n            }).makeTwoWay(),\r\n            new go.Binding(\"spacingAbove\", \"spacingline\", function(v) {\r\n                return tdTransToNum(v, 4);\r\n            }).makeTwoWay(),\r\n            new go.Binding(\"spacingBelow\", \"spacingline\", function(v) {\r\n                return tdTransToNum(v, 4);\r\n            }).makeTwoWay(),\r\n            new go.Binding(\"width\", \"width\", function(v) {\r\n                return v;\r\n            }).ofObject(\"SHAPE\"),\r\n            // new go.Binding(\"height\", \"height\", function (v) {\r\n            //   return v;\r\n            // }).ofObject(\"SHAPE\"),\r\n            new go.Binding(\"text\", \"text\").makeTwoWay(),\r\n            new go.Binding(\"stroke\", \"textStroke\").makeTwoWay(),\r\n            new go.Binding(\"font\", \"font\").makeTwoWay()\r\n        )\r\n    );\r\n}\r\n\r\n\r\n\r\n//提示框\r\n  var shapeShowblur = null;\r\n  var circleStroke = null;\r\n\r\n  function showToolTip(obj, diagram) {\r\n    var box = document.getElementById(\"infoBoxHolder\");\r\n    var contextMenu= document.getElementsByClassName(\"context-menu\")[0];\r\n    //  console.log(contextMenu)  \r\n    \r\n    if (obj !== null) {\r\n      var node = obj.part;\r\n      var e = diagram.lastInput;\r\n      var circle = node.findObject(\"CIRCLE\");\r\n      var shape= node.findObject(\"SHAPE\"); \r\n    //   console.log(circle)\r\n    if(circle !== null) circle.stroke = \"#57617a\";\r\n    if(shape !== null)  shape.shadowBlur = 10;\r\n\r\n    if (shapeShowblur !== null && shapeShowblur !== shape) {\r\n        \r\n        shapeShowblur.shadowBlur = 0;\r\n        shapeShowblur = shape;\r\n  \r\n        if(box&&(contextMenu.style.display === \"\"||contextMenu.style.display === \"none\")){\r\n            box.style.display = \"block\";\r\n        }\r\n    } else{\r\n        \r\n        shapeShowblur = shape;\r\n    }\r\n\r\n      \r\n      \r\n      if (circleStroke !== null && circleStroke !== circle) \r\n      circleStroke.stroke = null;\r\n      circleStroke = circle;\r\n        if(box&&(contextMenu.style.display === \"\"||contextMenu.style.display === \"none\")){\r\n            box.style.display = \"block\";\r\n        }\r\n    } else {\r\n      if (circleStroke !== null) \r\n      circleStroke.stroke = null;\r\n      circleStroke = null;\r\n    //   document.getElementById(\"infoBox\").innerHTML = \"\";\r\n     \r\n      \r\n    }\r\n\r\n    \r\n  }\r\n    \r\n\r\n  \r\n\r\n\r\n\r\n\r\n\r\n// myDiagram.nodeTemplate =\r\n// $(go.Node,\r\n//   $(go.Shape, \"Circle\",\r\n//     {\r\n//       desiredSize: new go.Size(28, 28),\r\n//       fill: radBrush, strokeWidth: 0, stroke: null\r\n//     }), // no outline\r\n//   {\r\n//     locationSpot: go.Spot.Center,\r\n//     click: showArrowInfo,  // defined below\r\n//     toolTip:  // define a tooltip for each link that displays its information\r\n//         $(\"ToolTip\",\r\n//           $(go.TextBlock, { margin: 4 },\r\n//             new go.Binding(\"text\", \"\", infoString).ofObject())\r\n//         )\r\n//   }\r\n// );\r\n\r\n//返回云盘图标\r\nfunction LogicXor(that){\r\n    var $ = go.GraphObject.make;\r\n    return $(go.Node, \"Vertical\",\r\n        {\r\n            movable:false,\r\n            locationSpot: go.Spot.Top,\r\n            location: new go.Point(860,5),\r\n            mouseHover:function(e,node){\r\n                that.showNodeRemarkTips(e, node);\r\n            },\r\n            mouseLeave:function(e,node){\r\n                that.removeNodeRemarkTips();    \r\n            },\r\n            click:function(e,node){\r\n             \r\n                console.log(node.data)\r\n                console.log(Number(node.data.loc.split(' ')[1])>0)\r\n                if(Number(node.data.loc.split(' ')[1])>0){\r\n                    addy(e)\r\n                }else{\r\n                    addx(e)\r\n                }\r\n            }\r\n        },     \r\n        new go.Binding(\"location\", \"loc\",go.Point.parse).makeTwoWay(go.Point.stringify),\r\n        $(go.Shape, {\r\n            figure: \"LogicXor\", \r\n            stroke: \"#8799c4\", \r\n            width:30,\r\n            strokeWidth: 2,\r\n            \r\n        },\r\n        )\r\n\r\n    )\r\n}\r\n\r\nfunction yunpanDokeyDownFn (that) {\r\n    // console.log('myDiagram:', diagram);\r\n    // var myDiagram = diagram.diagram;\r\n    // var e = myDiagram.lastInput;\r\n    // var cmd = myDiagram.commandHandler;\r\n    // var node = myDiagram.selection.first();\r\n    var diagram = that.diagram\r\n    // var that = this;\r\n    var myDiagram = that.diagram;\r\n    var e = myDiagram.lastInput;\r\n    var node = myDiagram.selection.first();\r\n    var cmd = myDiagram.commandHandler;\r\n    if (e.key === \"Del\"|| e.event.keyCode === 8) { \r\n        // console.log(myDiagram.model.nodeDataArray)\r\n        console.log(\"0\",myDiagram.model.nodeDataArray)\r\n        del(e)    \r\n    }\r\n\r\n    if(e.event.ctrlKey){\r\n        //增加y轴\r\n        if (e.event.keyCode === 89) {\r\n            if((node&&node.data.category!== \"addtextTemplate\")||(!node)){\r\n                addy(e);\r\n            }\r\n        }\r\n        //增加x轴\r\n        if (e.event.keyCode === 88) {\r\n            \r\n            if((node&&node.data.category!== \"addtextTemplate\")||(!node)){\r\n                addx(e);\r\n            }\r\n        }\r\n        e.bubbles = false; \r\n        }\r\n\r\n    }\r\n\r\n\r\nfunction getYunpanNodeContextMenu() {\r\n\r\n    return $(go.Adornment, \"Vertical\",\r\n        $(\"ContextMenuButton\",\r\n            $(go.TextBlock, \"删除 DEl\"), {\r\n                click: function(e,node) {\r\n                    del(e);\r\n                }\r\n            }),\r\n        $(\"ContextMenuButton\",\r\n            $(go.TextBlock, \"增加 CTRL+X/Y\"), {\r\n                click: function(e, node) {\r\n                    if(node.data.loc.split(\" \")[1] === \"0\"&&node.data.category!==\"x\"){\r\n                        addy(e)\r\n                    }else if(node.data.loc.split(\" \")[0] === \"0\"&&node.data.category!==\"y\"){\r\n                        addx(e)\r\n                    }; \r\n                }\r\n            })\r\n        \r\n    );\r\n}\r\n//云盘增加y轴节点\r\nfunction addy(e){\r\n    let myDiagram = e.diagram;\r\n    let node = myDiagram.selection.first();\r\n    let nodeDataArray = myDiagram.model.nodeDataArray;\r\n    console.log(nodeDataArray)\r\n    let yl = 0;\r\n    let stroke =\"#8799c4\";\r\n    let strokeDashArray=[4, 2];\r\n    let loc = 0;\r\n    let locy = '';\r\n    let height = 260 ;\r\n    nodeDataArray.forEach(function(data){\r\n        \r\n        if(data.category === \"y\"){\r\n            yl = data.height - 10  \r\n        }\r\n        \r\n        if(data.category===\"x\"){\r\n        //console.log(data)\r\n        height = data.height +200\r\n        myDiagram.model.startTransaction(\"addheight\");\r\n        myDiagram.model.setDataProperty(data, \"height\",height);\r\n        myDiagram.model.commitTransaction(\"addheight\");\r\n        }\r\n        if(data.category === 'LogicXor'){\r\n            let locL = +data.loc.split(' ')[0]\r\n            if(locL>0){\r\n                let loclc = (locL + 200) + \" 5\" \r\n                myDiagram.model.startTransaction();\r\n                myDiagram.model.setDataProperty(data, \"loc\",loclc);\r\n                myDiagram.model.commitTransaction();\r\n            }\r\n            \r\n        }\r\n    })\r\n    nodeDataArray.forEach(function(data){\r\n        if(data.loc.split(' ')[0] === '0'&&data.category!== \"addtextTemplate\"){\r\n            let l = height - 10;\r\n            let geometryStringx = \"M 0 0 L 0 \"+ l;\r\n            myDiagram.model.startTransaction(\"changel\");\r\n            myDiagram.model.setDataProperty(data, \"geometryString\",geometryStringx);\r\n            myDiagram.model.commitTransaction(\"changel\");\r\n        }\r\n    })\r\n    let geometryString= \"M 0 0 L 0 \"+yl\r\n    \r\n    if(node && (node.data.category === 'y'||node.data.loc.split(' ')[0] !== '0')&&node.data.category !== 'x'&&node.data.category !== 'LogicXor'&&node.data.category!== \"addtextTemplate\"){\r\n        //if()\r\n        console.log(node.data)\r\n        loc = +node.data.loc.split(' ')[0] + 200;\r\n        locy = loc + \" 0\"\r\n\r\n        //移动位置\r\n        nodeDataArray.forEach(function(data){\r\n            console.log(loc)\r\n            if(data.category !== 'LogicXor'&&data.category!== \"addtextTemplate\"){\r\n                let loco = +data.loc.split(' ')[0]\r\n                if(loco >= loc){\r\n                    loco = loco+200;\r\n                    var locy = loco + \" 0\"\r\n                    myDiagram.model.startTransaction(\"changeloc\");\r\n                    myDiagram.model.setDataProperty(data, \"loc\",locy);\r\n                    myDiagram.model.commitTransaction(\"changeloc\");\r\n                }\r\n            }\r\n            \r\n    })\r\n        \r\n    }else {\r\n        let arr =[]\r\n        nodeDataArray.forEach(function(data){\r\n            if(data.loc.split(' ')[0] !== '0'&&data.category !== 'LogicXor'&&data.category!== \"addtextTemplate\"){\r\n                arr.push(+data.loc.split(' ')[0])\r\n            }\r\n        })\r\n        if(arr.length === 0){\r\n            // geometryString = \"M 0 0 L 0 200\";\r\n            locy = \"200 0\"\r\n        }else{\r\n            var max= Math.max.apply(null,arr)+200 ;\r\n            locy = max + \" 0\" \r\n        }\r\n    }\r\n    \r\n    \r\n\r\n    let newy = {key:guid(),category: \"yunpany\",stroke:stroke,geometryString:geometryString,strokeDashArray:strokeDashArray,loc: locy };\r\n    let newytext = {key:guid(),category: \"xtext\",margin:10,\"textStroke\":\"#666666\",text:\"维度\"+locy.split(' ')[0]/200,loc: locy,dir: \"top\" };\r\n    myDiagram.model.startTransaction(\"addy\");\r\n    myDiagram.model.addNodeData(newy);\r\n    myDiagram.model.addNodeData(newytext);\r\n    myDiagram.model.commitTransaction(\"addy\");\r\n\r\n        \r\n}\r\n\r\n//云盘增加x轴节点\r\nfunction addx(e){\r\n    let myDiagram = e.diagram;\r\n    let node = myDiagram.selection.first();\r\n    let nodeDataArray = myDiagram.model.nodeDataArray;\r\n    let xl = 0;\r\n    let stroke =\"#8799c4\";\r\n    let strokeDashArray=[4, 2];\r\n    let loc = 0;\r\n    let locy = '';\r\n    let height = 260 ;\r\n    nodeDataArray.forEach(function(data){\r\n        \r\n        if(data.category === \"x\"){\r\n            xl = data.height - 10  \r\n        }\r\n        if(data.category===\"y\"){\r\n        //console.log(data)\r\n        height = data.height +200\r\n        myDiagram.model.startTransaction(\"addheight\");\r\n        myDiagram.model.setDataProperty(data, \"height\",height);\r\n        myDiagram.model.commitTransaction(\"addheight\");\r\n        }\r\n        if(data.category === 'LogicXor'){\r\n            let locL = +data.loc.split(' ')[1]\r\n            if(locL < 0){\r\n                let loclc =\"-20 \"+(locL - 200)\r\n                myDiagram.model.startTransaction();\r\n                myDiagram.model.setDataProperty(data, \"loc\",loclc);\r\n                myDiagram.model.commitTransaction();\r\n            }\r\n            \r\n        }\r\n    })\r\n    nodeDataArray.forEach(function(data){\r\n        if(data.loc.split(' ')[1] === '0'&&data.category!== \"addtextTemplate\"){\r\n            let l = height - 10;\r\n            let geometryStringx = \"M 0 0 L 0 \"+ l;\r\n            myDiagram.model.startTransaction(\"changel\");\r\n            myDiagram.model.setDataProperty(data, \"geometryString\",geometryStringx);\r\n            myDiagram.model.commitTransaction(\"changel\");\r\n        }\r\n    })\r\n    let geometryString= \"M 0 0 L 0 \"+xl\r\n    \r\n    if(node && (node.data.category === 'x'||node.data.loc.split(' ')[1] !== '0')&&node.data.category !== 'y'&&node.data.category !== 'LogicXor'&&node.data.category!== \"addtextTemplate\"){\r\n        //if()\r\n        console.log(node.data)\r\n        loc = +node.data.loc.split(' ')[1] - 200;\r\n        locy = \"0 \"+loc;\r\n\r\n        //移动位置\r\n        nodeDataArray.forEach(function(data){\r\n            console.log(loc)\r\n            if(data.category !== 'LogicXor'&&data.category!== \"addtextTemplate\"){\r\n                let loco = +data.loc.split(' ')[1]\r\n                if(loco <= loc){\r\n                    loco = loco-200;\r\n                    var locy = \"0 \"+loco\r\n                    myDiagram.model.startTransaction(\"changeloc\");\r\n                    myDiagram.model.setDataProperty(data, \"loc\",locy);\r\n                    myDiagram.model.commitTransaction(\"changeloc\");\r\n                }\r\n            }else{\r\n\r\n            }\r\n            \r\n    })\r\n        \r\n    }else {\r\n        let arr =[]\r\n        nodeDataArray.forEach(function(data){\r\n            if(data.loc.split(' ')[1] !== '0'&&data.category !== 'LogicXor'&&data.category!== \"addtextTemplate\"){\r\n                arr.push(+data.loc.split(' ')[1])\r\n            }\r\n        })\r\n        if(arr.length === 0){\r\n            // geometryString = \"M 0 0 L 0 200\";\r\n            locy = \"0 -200\"\r\n        }else{\r\n            var min= Math.min.apply(null,arr)-200 ;\r\n            locy = \"0 \"+min; \r\n        }\r\n    }\r\n    \r\n\r\n    let newx = {key:guid(),category: \"yunpanx\",stroke:stroke,geometryString:geometryString,strokeDashArray:strokeDashArray,loc: locy };\r\n    let newxtext = {key:guid(),category: \"ytext\",text:\"维度\"+Math.abs(+locy.split(' ')[1]/200),\"textStroke\":\"#666666\",loc: locy,dir: \"right\" };\r\n    myDiagram.model.startTransaction(\"addx\");\r\n    myDiagram.model.addNodeData(newx);\r\n    myDiagram.model.addNodeData(newxtext);\r\n    myDiagram.model.commitTransaction(\"addx\");\r\n\r\n\r\n}\r\n\r\n\r\n//云盘删除节点\r\nfunction del(e){\r\n    let myDiagram = e.diagram;\r\n    let node = myDiagram.selection.first();\r\n    console.log(\"1\",myDiagram.model.nodeDataArray)\r\n    //text和轴\r\n    if (node) {\r\n        console.log(\"11111111111111111111111\")\r\n        //非xy的坐标轴\r\n        console.log(node.data)\r\n        //判断点击y子轴\r\n        if(node.data.category === \"yunpany\"){\r\n           \r\n            let loc = node.data.loc\r\n            let locx = +node.data.loc.split(' ')[0]\r\n            console.log(locx)\r\n            myDiagram.model.nodeDataArray.forEach(function(data){\r\n\r\n                //如果不加判断，点击轴删除，只会删除轴，不会删除坐标\r\n                // debugger\r\n                // if(data.category===\"yunpany\"&&data.loc === loc){\r\n                //     myDiagram.model.startTransaction(\"deletAxis\");\r\n                //     //删除轴\r\n                //     myDiagram.model.removeNodeData(node.data);\r\n                //     myDiagram.model.removeNodeData(data);\r\n                //     myDiagram.model.commitTransaction(\"deletAxis\");\r\n                // }else\r\n                 if(data.category===\"xtext\"&&data.loc === loc){\r\n                    console.log(\"data\",data)\r\n                    myDiagram.model.startTransaction(\"delettext\");\r\n                    //删除轴\r\n                    myDiagram.model.removeNodeData(node.data);\r\n                    //删除text\r\n                    myDiagram.model.removeNodeData(data);\r\n                    \r\n                    myDiagram.model.commitTransaction(\"delettext\");\r\n                }\r\n        \r\n            })\r\n            //改变其他轴长度及坐标\r\n            console.log(\"2\",myDiagram.model.nodeDataArray)\r\n            changelen(locx,myDiagram)\r\n            \r\n        //x\r\n        }else if(node.data.category === \"yunpanx\"){\r\n            console.log(\"x\")\r\n            let loc = node.data.loc\r\n            let locx = +node.data.loc.split(' ')[1]\r\n            myDiagram.model.nodeDataArray.forEach(function(data){\r\n                // if(data.category===\"ytext\"&&data.loc === loc){\r\n                //     myDiagram.model.startTransaction(\"delettext\");\r\n                //     myDiagram.model.removeNodeData(data);\r\n                //     myDiagram.model.removeNodeData(node.data);\r\n                //     myDiagram.model.commitTransaction(\"delettext\");\r\n                // }else \r\n                if(data.category===\"ytext\"&&data.loc === loc){\r\n                    myDiagram.model.startTransaction(\"delettext\");\r\n                    myDiagram.model.removeNodeData(data);\r\n                    myDiagram.model.removeNodeData(node.data);\r\n                    myDiagram.model.commitTransaction(\"delettext\");\r\n                }\r\n                \r\n            \r\n            })\r\n            \r\n            changelenx(locx,myDiagram)\r\n            \r\n        }else if(node.data.category!==\"ytext\"&&node.data.category!==\"xtext\"&&node.data.category!==\"LogicXor\"&&node.data.category!==\"x\"&&node.data.category!==\"y\" ){\r\n            myDiagram.model.startTransaction();\r\n            myDiagram.model.removeNodeData(node.data);\r\n            myDiagram.model.commitTransaction();\r\n        }      \r\n        \r\n    }\r\n\r\n}\r\n\r\n//改变x轴长度\r\n\r\nfunction changelen(locx,myDiagram){\r\n    console.log(\"3\",myDiagram.model.nodeDataArray)\r\n    myDiagram.model.nodeDataArray.forEach(function(data){\r\n                                \r\n        //Math.abs(key)\r\n        let datalocx = +data.loc.split(' ')[0]\r\n        console.log(data.loc)\r\n        console.log(datalocx)\r\n        //改变位置\r\n        if(datalocx > locx){\r\n            if(data.category===\"yunpany\"||data.category===\"xtext\"){\r\n                let l = datalocx-200\r\n                let loc = l+\" 0\"\r\n                console.log(loc)\r\n                myDiagram.model.startTransaction(\"changea\");\r\n                myDiagram.model.setDataProperty(data, \"loc\",loc);\r\n                myDiagram.model.commitTransaction(\"changea\");\r\n            }\r\n            \r\n        }\r\n        //改变长度\r\n     \r\n            console.log(data)\r\n            if(data.category===\"x\"){\r\n                let height = data.height -200\r\n                myDiagram.model.startTransaction(\"cheight\");\r\n                myDiagram.model.setDataProperty(data, \"height\",height);\r\n                myDiagram.model.commitTransaction(\"cheight\");\r\n            }else if(data.category===\"yunpanx\"){\r\n                let gs = NaN\r\n                let l = (data.geometryString||\"\").split(' ')\r\n                console.log(l)\r\n                if(l[5]){\r\n                    gs = +l[5] - 200;\r\n                }else{\r\n                    gs = +l[3] - 200;\r\n                }\r\n                console.log(gs)\r\n                let gs2 = gs + \"\";\r\n                let gs3 = \"M 0 0  L 0 \"+gs2;\r\n                myDiagram.model.startTransaction(\"changea\");\r\n                myDiagram.model.setDataProperty(data, \"geometryString\",gs3);\r\n                myDiagram.model.commitTransaction(\"changea\");\r\n            }\r\n        \r\n        if(data.category === 'LogicXor'){\r\n            let locL = +data.loc.split(' ')[0]\r\n            if(locL > 0){\r\n                let loclc =(locL - 200) +\" 5\"\r\n                myDiagram.model.startTransaction();\r\n                myDiagram.model.setDataProperty(data, \"loc\",loclc);\r\n                myDiagram.model.commitTransaction();\r\n            }\r\n        }\r\n    })\r\n}\r\n\r\nfunction changelenx(locx,myDiagram){\r\n    console.log(myDiagram.model.nodeDataArray)\r\n    myDiagram.model.nodeDataArray.forEach(function(data){\r\n\r\n    let datalocx = +data.loc.split(' ')[1]\r\n    // console.log(data.loc)\r\n    // console.log(datalocx)\r\n    //改变位置\r\n    if(datalocx < locx){\r\n        if(data.category===\"yunpanx\"||data.category===\"ytext\"){\r\n            let l = datalocx+200\r\n            let loc = \"0 \"+l\r\n            console.log(\"节点\",data)\r\n            console.log(\"改变位置\",loc)\r\n            myDiagram.model.startTransaction(\"changea\");\r\n            myDiagram.model.setDataProperty(data, \"loc\",loc);\r\n            myDiagram.model.commitTransaction(\"changea\");\r\n        }\r\n        \r\n        \r\n    }\r\n    //改变长度\r\n    if(data.category===\"y\"){\r\n        let height = data.height -200\r\n        console.log(\"节点\",data)\r\n        console.log(\"改变坐标轴长度没有angle\",height)\r\n        myDiagram.model.startTransaction(\"cheight\");\r\n        myDiagram.model.setDataProperty(data, \"height\",height);\r\n        myDiagram.model.commitTransaction(\"cheight\");\r\n    }else if(data.category===\"yunpany\"){\r\n        let gs = NaN\r\n        let l = (data.geometryString||\"\").split(' ')\r\n        if(l[5]){\r\n            gs = +l[5] - 200;\r\n        }else{\r\n            gs = +l[3] - 200;\r\n        }\r\n        // console.log(gs)\r\n        let gs2 = gs + \"\";\r\n        let gs3 = \"M 0 0  L 0 \"+gs2;\r\n        console.log(\"节点\",data)\r\n        console.log(\"改变y轴长度没有angle\",gs3)\r\n        myDiagram.model.startTransaction(\"changea\");\r\n        myDiagram.model.setDataProperty(data, \"geometryString\",gs3);\r\n        myDiagram.model.commitTransaction(\"changea\");\r\n    }   \r\n\r\n    if(data.category === 'LogicXor'){\r\n            let locL = +data.loc.split(' ')[1]\r\n            if(locL < 0){\r\n                let loclc =\"-20 \"+(locL + 200) \r\n                myDiagram.model.startTransaction();\r\n                myDiagram.model.setDataProperty(data, \"loc\",loclc);\r\n                myDiagram.model.commitTransaction();\r\n            }\r\n        }\r\n    })\r\n}\r\nfunction guid() {\r\n    function S4() {\r\n        return (((1+Math.random())*0x10000)|0).toString(16).substring(1);\r\n    }\r\nreturn (S4()+S4()+\"-\"+S4()+\"-\"+S4()+\"-\"+S4()+\"-\"+S4()+S4()+S4());\r\n}\r\n\r\n// export default Trtd;\r\nmodule.exports = Trtd;\n\n\n// WEBPACK FOOTER //\n// ./src/diagram/yunpan.js","\r\nvar Trtd_tianpan = require('./tianpan')\r\nvar createNodeTemplate = require('../nodeTemplate/createNodeTemplate')\r\nvar createPictureSingleNodeTemplate = require('../nodeTemplate/createPictureSingleNodeTemplate')\r\nvar createPictureNodeTemplate = require('../nodeTemplate/createPictureNodeTemplate')\r\nvar createTextNodeTemplate = require('../nodeTemplate/createTextNodeTemplate')\r\nvar createNodeSvgTemplate = require('../nodeTemplate/createNodeSvgTemplate')\r\n\r\n\r\nclass Trtd extends Trtd_tianpan {\r\n    constructor(div, config){\r\n        super(div, config)\r\n\t\t// this.config = config;\r\n\t\t// this.modelChangedListener = config.modelChangedListener;\r\n\t\t// this.type = config.type;\r\n\t\t// this.diagram = {};\r\n        // this.model = config.model;\r\n        // this.tpid = config.tpid||Date.now();\r\n        // this.InitialFontSize = 18\r\n        // this.tdCurrentTheme = {\r\n        //     id: 6,\r\n        //     borderWidth: 2,\r\n        //     borderColor: \"black\",\r\n        //     groupColor: \"rgba(0,0,0,0)\",\r\n        //     groupStroke: \"rgba(0,0,0,0)\",\r\n        //     groupStrokeWidth: 0,\r\n        //     themeName: \"黑白\",\r\n        //     linkColor: \"black\",\r\n        //     colorRange: \"white\"\r\n        // }\r\n\t\t// // 初始化diagram\r\n\t\t// this.initDiagram(div, config);\r\n\t\t// this.initListener();\r\n\t\t// // Then you will need to construct a Model (usually a GraphLinksModel) for the Diagram, initialize its data by setting its Model.nodeDataArray and other properties, and then set the diagram's model.\r\n        // if(this.model){\r\n        //     this.initModel();\r\n        // }\r\n    }\r\n\r\n     /**\r\n     * 添加节点模板\r\n     */\r\n    addNodeTemplate(){\r\n\r\n        var that = this;\r\n        var myDiagram = this.diagram\r\n\r\n        // myDiagram.nodeTemplateMap.add(\"dipan\", this.createDipanTemplate(layerThickness,tdDipanTextAngle));\r\n        // myDiagram.nodeTemplateMap.add(\"Root\", this.getDipanRootTemplate(layerThickness));\r\n        // myDiagram.nodeTemplateMap.add(\"text\", );\r\n\r\n        myDiagram.nodeTemplateMap.add(\"0\", createNodeTemplate(this.diagram));\r\n        myDiagram.nodeTemplateMap.add(\"1\", createNodeTemplate(this.diagram));\r\n        myDiagram.nodeTemplateMap.add(\"2\", createNodeTemplate(this.diagram));\r\n        myDiagram.nodeTemplateMap.add(\"3\", createPictureSingleNodeTemplate(this.diagram));\r\n        myDiagram.nodeTemplateMap.add(\"4\", createPictureNodeTemplate(this.diagram));\r\n        myDiagram.nodeTemplateMap.add(\"text\", createTextNodeTemplate(this.diagram));\r\n        myDiagram.nodeTemplateMap.add(\"\", createNodeTemplate(this.diagram));\r\n\r\n        myDiagram.nodeTemplateMap.add(\"8\",createNodeSvgTemplate(this.diagram));\r\n\r\n        \r\n    }\r\n}\r\n\r\n// export default Trtd;\r\nmodule.exports = Trtd;\n\n\n// WEBPACK FOOTER //\n// ./src/diagram/wheel.js","\nvar Trtd_tianpan = require('./tianpan')\nvar createNodeTemplate = require('../nodeTemplate/createNodeTemplate')\nvar createPictureSingleNodeTemplate = require('../nodeTemplate/createPictureSingleNodeTemplate')\nvar createPictureNodeTemplate = require('../nodeTemplate/createPictureNodeTemplate')\nvar createTextNodeTemplate = require('../nodeTemplate/createTextNodeTemplate')\nvar createNodeSvgTemplate = require('../nodeTemplate/createNodeSvgTemplate')\nvar createArcNodeTemplate = require('../nodeTemplate/createArcNodeTemplate')\nvar createLineNodeTemplate = require('../nodeTemplate/createLineNodeTemplate')\nvar createWaveNodeTemplate = require('../nodeTemplate/createWaveNodeTemplate')\nvar nodeTemplateFactory = require('../nodeTemplate/factory')\nvar $ = go.GraphObject.make;\nvar GroupRotatingTool = require('../tools/GroupRotatingTool')\nvar helpers = require('../helpers/helpers.gojs')\nvar layoutWaveGroup = require(\"../layout/waveGroupLayout\").layoutWaveGroup;\nvar adjustTextAngle = require(\"../layout/waveGroupLayout\").adjustTextAngle;\n\n\nfunction computeNewRotateLoc(rotateCenter,currentLoc, angle){\n    if(rotateCenter.equals(currentLoc)) return currentLoc\n  // 计算选择中心点到（0,0）点的偏移\n  var offset = new go.Point(0,0).subtract(rotateCenter.copy())\n  // 将原来的点偏移到相对0,0点的位置\n  var nodeOrigin = currentLoc.copy().offset(offset.x, offset.y)\n  var newNodeOrigin = nodeOrigin.rotate(angle)\n  var newNodeLoc = newNodeOrigin.copy().offset(-offset.x, -offset.y)\n  return newNodeLoc\n  // console.log(\"newNodeLoc\", newNodeLoc)\n}\n\nrequire(\"../tools/textEditor\")\nclass Trtd extends Trtd_tianpan {\n    constructor(div, config){\n        super(div, config)\n        var that = this;\n        var diagramConfig = {\n            layout: $(go.Layout),\n            initialContentAlignment: go.Spot.Center,\n            initialAutoScale: go.Diagram.Uniform,\n            initialDocumentSpot: go.Spot.Center,\n            initialViewportSpot: go.Spot.Center,\n            rotatingTool: new GroupRotatingTool(),\n            PartResized: (e) =>{\n                console.log(\"PartResizedPartResizedPartResizedPartResized\")\n                var node = e.subject.part\n                if(!node) return;\n                // return;\n                if(node.data.category == \"waveGroup\"){\n                    console.log(\"PartResizedPartResized\")\n                    // wave 的宽高限制\n                    var maxWidth = 400;\n                    var maxHeight = 400;\n                    var oliveWidth, oliveHeight;\n                    var it = node.findSubGraphParts().iterator;\n                    var waveCount = 0\n                    var lastWave;\n                    while(it.next()){\n                        var n = it.value;\n                        if(n.data.category == \"wave\"){\n                            waveCount+=1;\n                            lastWave = n;\n                        }\n                    }\n                    console.log(\"actualBoundsactualBoundsactualBoundsactualBounds\")\n                    var nodeSize = node.resizeObject.actualBounds;\n                    var waveSize = lastWave.resizeObject.naturalBounds\n                    // oliveWidth = (nodeSize.width-100)/waveCount\n                    oliveWidth = (nodeSize.width-0)*5/3/waveCount\n                    oliveWidth = (nodeSize.width-0)*3/(waveCount*3+2)\n                    if(oliveWidth<100){\n                        oliveWidth=100\n                    }\n                    // oliveWidth = waveSize.width*waveCount + waveSize.width*2/3\n                    // oliveWidth = waveSize.width\n                    if( oliveWidth > maxWidth){\n                        oliveWidth = maxWidth;\n                        // nodeSize.width = maxWidth*waveCount+100;\n                    }\n                    oliveHeight = nodeSize.height;\n                    if( oliveHeight > maxHeight){\n                        oliveHeight = maxHeight;\n                        // nodeSize.height  = maxWidth;\n                    }\n                    if( oliveHeight > oliveWidth){\n                        oliveHeight = oliveWidth;\n                        // nodeSize.height  = maxWidth;\n                    }\n                    node.diagram.startTransaction()\n                    // node.diagram.model.setDataProperty(node.data, \"desiredSize\",`${nodeSize.width} ${nodeSize.height}`)\n                    node.diagram.model.setDataProperty(node.data, \"oliveHeight\", oliveHeight)\n                    node.diagram.model.setDataProperty(node.data, \"oliveWidth\", oliveWidth)\n                                 //     e.subject.part.layout.isOngoing = true;\n                    //     e.subject.part.layout.isValidLayout = false;\n                    var it = e.subject.part.findSubGraphParts().iterator;\n                    layoutWaveGroup(it,node.diagram,e.subject.part)\n                    // node.diagram.updateAllTargetBindings()\n                    it.reset()\n                    while(it.next()){\n                        it.value.updateTargetBindings()\n                    }\n                    \n                    node.diagram.commitTransaction()\n                    setTimeout(()=>{\n                        e.subject.part.layout.isOngoing = true;\n                        e.subject.part.layout.isValidLayout = false;\n                    },100)\n                }else if(node.data.category === \"autoText\"){\n                    e.diagram.startTransaction(\"resize\");\n                    e.diagram.model.setDataProperty(node.data, \"width\", e.subject.width);\n                    e.diagram.model.setDataProperty(node.data, \"nwidth\", true);\n                    e.diagram.commitTransaction(\"resize\");\n                }\n            },\n            SelectionMoved: (e)=>{\n                // console.log(\"SelectionMovedSelectionMoved\",e.subject)\n                // if (!e.isTransactionFinished) {\n                //     return;\n                // }\n                try{\n                    var selnode = e.subject.first()\n                    if(!selnode) return;\n                    if(selnode.data.category == \"wave\"){\n                        if(selnode.containingGroup){\n                            selnode.containingGroup.layout.isValidLayout = false;\n                        }\n                    }\n                    if(selnode.data.category == \"autoText\"){\n                        if((selnode.data.role == \"shiText\" || selnode.data.role == \"xuText\")){\n                            selnode.diagram.startTransaction()\n                            console.log(\"SelectionMovedSelectionMovedSelectionMoved\")\n                            if(!selnode.__location){\n                                var obj = selnode.diagram.findNodeForKey(selnode.data.olive)\n                                var group = selnode.containingGroup\n                                if(obj){\n                                    var loc = group.location.copy().offset(group.data.oliveWidth*(obj.data.order-1),0)\n                                    selnode.__location = loc.copy().offset(obj.naturalBounds.width/2, 0)\n                                    selnode.__location = computeNewRotateLoc(group.location, selnode.__location, obj.angle)\n                                }\n                            }\n                            if(selnode.__location){\n                                console.log(\"selnode.__locationselnode.__locationselnode.__location\")\n                                if(selnode.data.order %2 == 0){\n                                    selnode.__offset = selnode.__location.copy().subtract(selnode.location)\n                                }else{\n                                    selnode.__offset = selnode.__location.copy().subtract(selnode.location)\n                                }\n                                delete selnode.__oldOrder\n                            }\n                            delete selnode.__oldLocation\n                            if(selnode.data.text.trim() != \"\"){\n                                selnode.data.nloc = true;\n                                selnode.diagram.model.setDataProperty(selnode.data, \"nloc\", true)\n                            }\n                            selnode.diagram.commitTransaction()\n                        }\n                        if(selnode.containingGroup && (selnode.containingGroup.data.category == \"yunGroup\"||selnode.containingGroup.data.category == \"yunpanGroup\")){\n                            selnode.containingGroup.__trtdNode.snapToGrid(selnode.data, selnode.containingGroup)\n                            // selnode.containingGroup.layout.isOngoing = true;\n                            selnode.containingGroup.layout.isValidLayout = false;\n                        }\n                    }\n                    if(selnode.data.category == \"shapeText\"){\n                        if(selnode.containingGroup && (selnode.containingGroup.data.category == \"yunpanGroup\")){\n                            selnode.containingGroup.__trtdNode.snapToGrid(selnode.data, selnode.containingGroup)\n                            // selnode.containingGroup.layout.isOngoing = true;\n                            selnode.containingGroup.layout.isValidLayout = false;\n                        }\n                    }\n                }catch(err){\n                    console.log(err)\n                }\n                // if(e.subject)\n            },\n            // \"toolManager.hoverDelay\": 600,\n            // \"toolManager.toolTipDuration\": 3000,\n            click: function(e) {\n                // closeToolbarWindow();\n                // removeNodeToolBar();\n                console.log(\"eeeeeeee:\",e)\n                that.clearAllTextBorder()\n                localStorage.setItem(\"TRTD_documentPoint\",go.Point.stringify(e.documentPoint))\n            },\n        }\n        this.diagram.setProperties(diagramConfig);\n        \n        this.diagram.commandHandler.doKeyDown = (e)=>{\n            this.dokeyDownFn(e)\n            // var cmd = this.diagram.commandHandler;\n            // go.CommandHandler.prototype.doKeyDown.call(cmd);\n        }\n        this.diagram.commandHandler.canCopySelection = function(){\n            // this.dokeyDownFn(e)\n            console.log(\"canCopySelectioncanCopySelection\")\n            var node = that.diagram.selection.first()\n            if(node){\n                if(node.data.category == \"axisGroup\" || node.data.category == \"yunGroup\"){\n                    return true;\n                }else{\n                    return false;\n                }\n            }\n            var cmd = this.diagram.commandHandler;\n            return go.CommandHandler.prototype.canCopySelection.call(cmd);\n        }\n        this.diagram.commandHandler.pasteFromClipboard = function(e, obj){\n            var coll = go.CommandHandler.prototype.pasteFromClipboard.call(this);\n            \n            // this.diagram.moveParts(coll, this._lastPasteOffset);\n            // this._lastPasteOffset.add(this.pasteOffset);\n            var it = coll.iterator;\n            var shiTextColl = []\n            var xuTextColl = []\n            var waveColl = []\n            var centerTextColl = []\n            var waveGroup = null\n            var yunGroup = null;\n            while(it.next()){\n                var n = it.value;\n                if(n.data.role == \"shiText\"){\n                    shiTextColl.push(n)\n                    continue;\n                }\n                if(n.data.role == \"xuText\"){\n                    xuTextColl.push(n)\n                    continue;\n                }\n                if(n.data.role == \"centerText\"){\n                    centerTextColl.push(n)\n                    continue;\n                }\n                if(n.data.category == \"wave\" && n.data.role != \"waveTail\"){\n                    waveColl.push(n)\n                    continue;\n                }\n                if(n.data.category == \"waveGroup\"){\n                    waveGroup = n;\n                }\n            }\n            if(!waveGroup){\n                // coll.clear()\n                // coll.removeAll()\n                coll = new go.Set(go.Part)\n                return coll;\n            }\n\n            waveColl = waveColl.sort(function(a,b){\n                // console.log(`Number(a.data.order)${Number(a.data.order)} > Number(b.data.order) ${Number(b.data.order)}`,Number(a.data.order) > Number(b.data.order))\n                return Number(a.data.order) - Number(b.data.order)\n            })\n            shiTextColl.sort(function(a,b){\n                return Number(a.data.order) - Number(b.data.order)\n            })\n            xuTextColl.sort(function(a,b){\n                return Number(a.data.order) - Number(b.data.order)\n            })\n            centerTextColl.sort(function(a,b){\n                return Number(a.data.order) - Number(b.data.order)\n            })\n\n            waveColl.forEach(function(obj,index){\n                obj.data.shiText = shiTextColl[index].data.key\n                obj.data.xuText = xuTextColl[index].data.key\n                obj.data.centerText = centerTextColl[index].data.key\n                shiTextColl[index].data.olive = obj.data.key\n                xuTextColl[index].data.olive = obj.data.key\n            })\n            console.log(\"pasteFromClipboardpasteFromClipboard\")\n            return coll;\n            // var cmd = this.diagram.commandHandler;\n            // go.CommandHandler.prototype.doKeyDown.call(cmd);\n        }\n        this.diagram.commandHandler.deleteSelection = ()=>{\n         \n            return this.deleteSelection();\n        }\n        this.diagram.toolManager.resizingTool.computeReshape = function() { \n            if(this.adornedObject.part.data.category == \"shapeText\"){\n                return false\n            }\n            go.TextEditingTool.prototype.doCancel.call(this);\n\n        }\n        this.diagram.toolManager.textEditingTool.doCancel = function(){\n            // var textEditor = this.diagram.currentTextEditor;\n            // console.log(\"textEditor。。。。\")\n            var tool = this;\n            try{\n                if(this.textBlock){\n                    var node = this.textBlock.part;\n                }\n            }catch(e){\n                console.log(e)\n            }\n            setTimeout(()=>{\n                try{\n                    if(node && node.data.category == \"wave\"){\n                        if(node.containingGroup && node.containingGroup.data.textAngle == \"horizontal\" && node.containingGroup.data.centerTextAngle == \"independent\"){\n                            // 如果文字方向为正向，且中线文字为正向\n                            node.findObject(\"TEXT\").visible = false;\n                            var centerText = node.diagram.findNodeForKey(node.data.centerText)\n                            if(centerText){\n                              centerText.visible = true;\n                            }\n                          }\n                    }\n                }catch(e){\n                    console.info(e)\n                }\n            },100)\n            // var cmd = this.diagram.commandHandler;\n            // this.doCancel()\n            // go.CommandHandler.prototype.deleteSelection.call(cmd);\n            go.TextEditingTool.prototype.doCancel.call(tool);\n        }\n\n        this.diagram.toolManager.resizingTool.computeReshape = function() { \n            // 保持图片宽高比\n            if(this.adornedObject.part.data.category == \"pic\"){\n                return false; \n            }    \n            return true\n        }\n\n        if( window.TextEditor){\n            console.log(\"TextEditorTextEditorTextEditorTextEditorTextEditorTextEditorTextEditorTextEditorTextEditor\")\n            this.diagram.toolManager.textEditingTool.defaultTextEditor = window.TextEditor;\n        }\n        this.diagram.toolManager.clickCreatingTool.archetypeNodeData = {\n            category: \"autoText\",\n            \"font\":\"18px 'Microsoft YaHei'\",\n            text: \"空白文本\",\n            level: 0\n        };\n\n        this.diagram.groupTemplateMap.add(\"waveGroup1\",     $(go.Group, \"Spot\",\n        { selectionObjectName: \"SHAPE\" },\n        { locationObjectName: \"SHAPE\", locationSpot: go.Spot.Center },\n        new go.Binding(\"location\", \"loc\", go.Point.parse).makeTwoWay(go.Point.stringify),\n        { rotatable: true },\n        new go.Binding(\"angle\",\"angle\",function(v,m,a){\n            console.log(\"vvvvvvvvvvvvvvvvvvv:\",v,\" m:\",m,\" a:\",a)\n            // m.diagram.startTransaction()\n            // for(var i=0;i<m.diagram.model.nodeDataArray.length-1;i++){\n            //     if(m.diagram.model.nodeDataArray[i].group == m.key){\n            //         m.diagram.model.setDataProperty(m.diagram.model.nodeDataArray[i], \"angle\", v)\n            //     }\n            // }\n            // // var group = a.findNodeDataForKey(m.group)\n            // // a.setDataProperty(group, \"angle\", v)\n            // m.diagram.commitTransaction()\n            return v;\n        }).makeTwoWay(function(v,m,a){\n            console.log(\"v:\",v,\" m:\",m,\" a:\",a)\n            // a.startTransaction()\n            // for(var i=0;i<a.nodeDataArray.length-1;i++){\n            //     if(a.nodeDataArray[i].group == m.key){\n            //         a.setDataProperty(a.nodeDataArray[i], \"angle\", v)\n            //     }\n            // }\n            // // var group = a.findNodeDataForKey(m.group)\n            // // a.setDataProperty(group, \"angle\", v)\n            // a.commitTransaction()\n            return v;\n        }),\n        { resizable: true, resizeObjectName: \"SHAPE\" },\n        $(go.Panel, \"Vertical\",\n          $(go.TextBlock, { font: \"bold 12pt sans-serif\" },\n            new go.Binding(\"text\", \"key\")),\n          $(go.Shape, { name: \"SHAPE\", fill: \"transparent\" },\n            new go.Binding(\"desiredSize\", \"desiredSize\", go.Size.parse).makeTwoWay(go.Size.stringify))\n        )\n      ))\n\t\t// this.config = config;\n\t\t// this.modelChangedListener = config.modelChangedListener;\n\t\t// this.type = config.type;\n\t\t// this.diagram = {};\n        // this.model = config.model;\n        // this.tpid = config.tpid||Date.now();\n        // this.InitialFontSize = 18\n        // this.tdCurrentTheme = {\n        //     id: 6,\n        //     borderWidth: 2,\n        //     borderColor: \"black\",\n        //     groupColor: \"rgba(0,0,0,0)\",\n        //     groupStroke: \"rgba(0,0,0,0)\",\n        //     groupStrokeWidth: 0,\n        //     themeName: \"黑白\",\n        //     linkColor: \"black\",\n        //     colorRange: \"white\"\n        // }\n\t\t// // 初始化diagram\n\t\t// this.initDiagram(div, config);\n\t\t// this.initListener();\n\t\t// // Then you will need to construct a Model (usually a GraphLinksModel) for the Diagram, initialize its data by setting its Model.nodeDataArray and other properties, and then set the diagram's model.\n        // if(this.model){\n        //     this.initModel();\n        // }\n    }\n\n     /**\n     * 添加节点模板\n     */\n    addNodeTemplate(){\n\n        // myDiagram.nodeTemplateMap.add(\"dipan\", this.createDipanTemplate(layerThickness,tdDipanTextAngle));\n        // myDiagram.nodeTemplateMap.add(\"Root\", this.getDipanRootTemplate(layerThickness));\n        // myDiagram.nodeTemplateMap.add(\"text\", );\n        var myDiagram = this.diagram\n        myDiagram.nodeTemplateMap.add(\"0\", createNodeTemplate(this.diagram));\n        myDiagram.nodeTemplateMap.add(\"1\", createNodeTemplate(this.diagram));\n        myDiagram.nodeTemplateMap.add(\"2\", createNodeTemplate(this.diagram));\n        myDiagram.nodeTemplateMap.add(\"3\", createPictureSingleNodeTemplate(this.diagram));\n        myDiagram.nodeTemplateMap.add(\"4\", createPictureNodeTemplate(this.diagram));\n        myDiagram.nodeTemplateMap.add(\"text\", createTextNodeTemplate(this.diagram));\n        myDiagram.nodeTemplateMap.add(\"\", createNodeTemplate(this.diagram));\n\n        myDiagram.nodeTemplateMap.add(\"8\",createNodeSvgTemplate(this.diagram));\n        myDiagram.nodeTemplateMap.add(\"9\", createArcNodeTemplate(this.diagram));\n        myDiagram.nodeTemplateMap.add(\"line\", createLineNodeTemplate(this.diagram));\n        // myDiagram.nodeTemplateMap.add(\"wave\", createWaveNodeTemplate(this.diagram));\n        // var sampleNode = nodeTemplateFactory(\"sample\")\n        myDiagram.nodeTemplateMap.add(\"wave\", nodeTemplateFactory(\"wave\",{diagram:myDiagram}).getNodeTemplate());\n        myDiagram.nodeTemplateMap.add(\"waveTail\", nodeTemplateFactory(\"waveTail\",{diagram:myDiagram}).getNodeTemplate());\n        myDiagram.nodeTemplateMap.add(\"iconText\", nodeTemplateFactory(\"iconText\",{diagram:myDiagram}).getNodeTemplate());\n        // myDiagram.nodeTemplateMap.add(\"cbian\",  nodeTemplateFactory(\"cbian\",{diagram:this.diagram}).getNodeTemplate())\n        myDiagram.nodeTemplateMap.add(\"pic\",  nodeTemplateFactory(\"pic\",{diagram:this.diagram}).getNodeTemplate())\n        myDiagram.nodeTemplateMap.add(\"shape\",  nodeTemplateFactory(\"shape\",{diagram:this.diagram}).getNodeTemplate())\n        myDiagram.nodeTemplateMap.add(\"autoText\", nodeTemplateFactory(\"autoText\",{diagram:myDiagram}).getNodeTemplate());\n        myDiagram.nodeTemplateMap.add(\"shapeText\", nodeTemplateFactory(\"shapeText\",{diagram:myDiagram}).getNodeTemplate());\n        myDiagram.groupTemplateMap.add(\"labelGroup\", nodeTemplateFactory(\"labelGroup\",{diagram:myDiagram}).getNodeTemplate());\n        myDiagram.groupTemplateMap.add(\"picGroup\", nodeTemplateFactory(\"picGroup\",{diagram:myDiagram}).getNodeTemplate());\n        myDiagram.groupTemplateMap.add(\"waveGroup\",  nodeTemplateFactory(\"waveGroup\",{diagram:this.diagram}).getNodeTemplate())\n        myDiagram.groupTemplateMap.add(\"axisGroup\",  nodeTemplateFactory(\"axisGroup\",{diagram:this.diagram}).getNodeTemplate())\n        myDiagram.groupTemplateMap.add(\"yunGroup\",  nodeTemplateFactory(\"yunGroup\",{diagram:this.diagram}).getNodeTemplate())\n        myDiagram.groupTemplateMap.add(\"yunpanGroup\",  nodeTemplateFactory(\"yunpanGroup\",{diagram:this.diagram}).getNodeTemplate())\n        \n    }\n\n    deleteSelection(node){\n        var cmd = this.diagram.commandHandler;\n        if(!node){\n            node = this.diagram.selection.first()\n        }\n        var locateNode = null;\n        var shiText,xuText,centerText;\n        if(!node) return;\n        if(!node.canDelete()) return;\n        if(node.data.category == \"yunGroup\" && !node.data.deletable){   \n            return\n        }\n        this.diagram.startTransaction(\"deleteSelection1\");\n        var count = 0;\n        if(node){\n            if(node.data.category == \"axisGroup\"){\n                var it = node.findSubGraphParts().iterator;\n                while (it.next()) {\n                    var n = it.value;\n                    this.diagram.model.removeNodeData(n.data)\n                }\n                this.diagram.model.removeNodeData(node.data)\n            }\n            if(node.data.category == \"wave\" && node.containingGroup){\n                var it = node.containingGroup.findSubGraphParts().iterator;\n                while (it.next()) {\n                    var n = it.value;\n                    if(n.data.category == \"wave\" && n.data.role != \"waveTail\"){\n                        if(n.data.order == node.data.order+1){\n                            locateNode = n;\n                        }\n                        count++;\n                    }\n                    if(n.data.role == \"shiText\" && n.data.order == node.data.order){\n                        shiText = n;\n                    }\n                    if(n.data.role == \"xuText\" && n.data.order == node.data.order){\n                        xuText = n;\n                    }\n                    if(n.data.role == \"centerText\" && n.data.order == node.data.order){\n                        centerText = n;\n                    }\n\n                }\n                if(count<=1){\n                    this.diagram.commitTransaction(\"deleteSelection1\");\n                    return;\n                }\n                node.containingGroup.layout.isOngoing = true;\n                node.containingGroup.layout.isValidLayout = false;\n                if(node.containingGroup.containingGroup){\n                    node.containingGroup.containingGroup.layout.isOngoing = true;\n                    node.containingGroup.containingGroup.layout.isValidLayout = false; \n                }\n            }\n            // 云盘 维度删除\n            if(node.data.category == \"autoText\" &&  node.data.subRole == \"dimText\" && node.containingGroup && node.containingGroup.data.category == \"yunpanGroup\"){\n                var it = node.containingGroup.findSubGraphParts().iterator;\n                var deleteNodes = []\n                var deleteLines = []\n                var normDim = \"X\",unnormDim = \"Y\", lineRole = \"verticalLine\"\n                if(node.data.dimX == 0){\n                    normDim = \"Y\"\n                    unnormDim = \"X\"\n                    lineRole = \"horizontalLine\"\n                }\n                while (it.next()) {\n                    var n = it.value;\n                    if(n.data.subRole == \"dimText\" && n.data[\"dim\"+unnormDim] == 0){\n                        // if(n.data.order == node.data.order+1){\n                        //     locateNode = n;\n                        // }\n                        count++;\n                    }\n                    if(n.data.subRole == \"yunpanText\" && n.data[\"order\"+normDim] == node.data[\"dim\"+normDim]){\n                        deleteNodes.push(n.data)\n                    }\n                    if(n.data.category == \"line\"  && n.data.role == lineRole\n                    && n.data[\"order\"]  == node.data[\"dim\"+normDim]\n                    ){\n                        deleteLines.push(n.data)\n                    }\n                    // if(n.data.role == \"xuText\" && n.data.order == node.data.order){\n                    //     xuText = n;\n                    // }\n                    // if(n.data.role == \"centerText\" && n.data.order == node.data.order){\n                    //     centerText = n;\n                    // }\n\n                }\n                \n                if(count<=1){\n                    this.diagram.commitTransaction(\"deleteSelection1\");\n                    return;\n                }\n\n                it.reset()\n                while (it.next()) {\n                    var n = it.value;\n                    if(n.data.subRole == \"dimText\" && n.data[\"dim\"+unnormDim] == 0 && n.data[\"dim\"+normDim] > node.data[\"dim\"+normDim]){\n                        // if(n.data.order == node.data.order+1){\n                        //     locateNode = n;\n                        // }\n                        n.diagram.model.setDataProperty(n.data, \"dim\"+normDim, n.data[\"dim\"+normDim] - 1)\n                        // count++;\n                    }\n                    if(n.data.subRole == \"yunpanText\" && n.data[\"order\"+normDim] > node.data[\"dim\"+normDim]){\n                        n.diagram.model.setDataProperty(n.data, \"order\"+normDim, n.data[\"order\"+normDim] - 1)\n                    }\n                    if(n.data.category == \"line\"  && n.data.role == lineRole\n                    && n.data[\"order\"]  > node.data[\"dim\"+normDim]\n                    ){\n                        n.diagram.model.setDataProperty(n.data, \"order\", n.data[\"order\"] - 1)\n                    }\n                    // if(n.data.role == \"xuText\" && n.data.order == node.data.order){\n                    //     xuText = n;\n                    // }\n                    // if(n.data.role == \"centerText\" && n.data.order == node.data.order){\n                    //     centerText = n;\n                    // }\n\n                }\n\n                node.diagram.model.removeNodeDataCollection(deleteLines)\n                node.diagram.model.removeNodeDataCollection(deleteNodes)\n                node.containingGroup.layout.isOngoing = true;\n                node.containingGroup.layout.isValidLayout = false;\n                // if(node.containingGroup.containingGroup){\n                //     node.containingGroup.containingGroup.layout.isOngoing = true;\n                //     node.containingGroup.containingGroup.layout.isValidLayout = false; \n                // }\n            }\n\n\n        }\n        //myDiagram.currentTool.doCancel();\n        //go.CommandHandler.prototype.redo.call(cmd);\n        // myDiagram.clearSelection();\n        if(xuText){\n            this.diagram.model.removeNodeData(xuText.data)\n        }\n        if(shiText){\n            this.diagram.model.removeNodeData(shiText.data)\n        }\n        if(centerText){\n            this.diagram.model.removeNodeData(centerText.data)\n        }\n        go.CommandHandler.prototype.deleteSelection.call(cmd);\n\n        \n\n        this.diagram.commitTransaction(\"deleteSelection1\");\n        // this.layoutAllGroup()\n        // setTimeout(()=>{\n        //     // this.diagram.updateAllTargetBindings()\n        //     this.diagram.layoutDiagram(true)\n        // },500)\n        if (locateNode) {\n            this.diagram.select(locateNode);\n        }\n    }\n\n\n    layoutLabelGroup(){\n        console.log(\"layoutLabelGroup\")\n        setTimeout(()=>{\n            var it = this.diagram.nodes.iterator;\n            while (it.next()) {\n                var n = it.value;\n                if(n.data.category == \"labelGroup\"){\n                    n.layout.isOngoing = true;\n                    n.layout.isValidLayout = false;\n                }\n            }\n        },200)\n    }\n\n    layoutAllGroup(){\n        console.log(\"layoutAllGroup\")\n        var it = this.diagram.nodes.iterator;\n        while (it.next()) {\n            var n = it.value;\n            if(n.data.isGroup == true){\n                n.layout.isOngoing = true;\n                n.layout.isValidLayout = false;\n            }\n        }\n    }\n\n    // 拆分橄榄\n    splitOlive2Half(){\n        var diagram = this.diagram\n        var node = diagram.selection.first()\n        if(!node) return;\n        if(node.data.category != \"wave\"){\n            return;\n        }\n        if(node.data.order ==1) return;\n        if(!node.containingGroup){\n            return;\n        }\n        this.diagram.startTransaction(\"splitOlive2Half\")\n        node.containingGroup.layout.isOngoing = true;\n        node.containingGroup.layout.isValidLayout = false;\n        var axisData = this.addAxisGroup({emptyAxis: true})\n        if(!axisData) {\n            this.diagram.commitTransaction(\"splitOlive2Half\")\n            return;\n        }\n        var waveGroup;\n        for(var i=0;i<axisData.length;i++){\n            if(axisData[i].category == \"waveGroup\"){\n                waveGroup = axisData[i]\n                break;\n            }\n        }\n        if(!waveGroup) {\n            this.diagram.commitTransaction(\"splitOlive2Half\")\n            return;\n        };\n        var curOrder = node.data.order\n        var it = node.containingGroup.findSubGraphParts().iterator;\n        var splitOlive = []\n        while (it.next()) {\n            var n = it.value;\n            if(n.data.category == \"wave\" && n.data.order >= curOrder && n.data.role != \"waveTail\"){\n                splitOlive.push(n)\n            }\n        }\n        for(var i=0;i<splitOlive.length;i++){\n            this.diagram.model.setDataProperty(splitOlive[i].data, \"group\", waveGroup.key)\n            var shiText = this.diagram.model.findNodeDataForKey(splitOlive[i].data.shiText)\n            var centerText = this.diagram.model.findNodeDataForKey(splitOlive[i].data.centerText)\n            var xuText = this.diagram.model.findNodeDataForKey(splitOlive[i].data.xuText)\n            if(shiText){\n                this.diagram.model.setDataProperty(shiText, \"group\", waveGroup.key)\n            }\n            if(centerText){\n                this.diagram.model.setDataProperty(centerText, \"group\", waveGroup.key)\n            }\n            if(xuText){\n                this.diagram.model.setDataProperty(xuText, \"group\", waveGroup.key)\n            }\n        }\n \n        this.diagram.commitTransaction(\"splitOlive2Half\")\n    }\n\n    // 分离常变\n    splitOlive2Cbian(){\n        var diagram = this.diagram\n        var node = diagram.selection.first()\n        if(!node) return;\n        if(node.data.category != \"wave\"){\n           return;\n        }\n\n        this.diagram.startTransaction(\"splitOlive2Cbian\")\n        // 删除橄榄\n        var shiText = this.diagram.model.findNodeDataForKey(node.data.shiText)\n        var centerText = this.diagram.model.findNodeDataForKey(node.data.centerText)\n        var xuText = this.diagram.model.findNodeDataForKey(node.data.xuText)\n        var cbian = {\n            shiText: shiText.text,\n            centerText: centerText.text,\n            xuText: xuText.text,\n            basePoint:node.location.copy().offset(0,-300),\n            group: node.data.group\n        }\n        this.deleteSelection(node)\n        // 添加常变\n        this.addCbian(cbian)\n        this.diagram.commitTransaction(\"splitOlive2Cbian\")\n    }\n\n    // 增加常变\n    addCbian(cbian){\n        console.log(\"addCbian\")\n        var diagram = this.diagram\n        var node = diagram.selection.first();\n        var group = null\n        if(node && node.data.category == \"axisGroup\"){\n            group=node.data.key;\n        }\n        var e = diagram.lastInput\n        diagram.startTransaction(\"addCbian\")\n        var groupKey = helpers.guid()\n        \n        if(cbian && cbian.basePoint){\n            var basePoint = cbian.basePoint\n        }else{\n            var basePoint = e.documentPoint\n        }\n        var groupData = {\"category\":\"picGroup\", \n         \"role\":\"cbian\", \"isGroup\":true, \"level\":0, \n        \"key\":groupKey, \"loc\":go.Point.stringify(basePoint), \"deletable\":true}\n        if(group){\n            groupData.group = group\n        }\n        if(cbian && cbian.group){\n            groupData.group = cbian.group\n        }\n        var picData = { \"group\":groupKey, \"text\":\"\", \n        \"resizable\":false, \"category\":\"pic\", \n        \"loc\":go.Point.stringify(basePoint),\n        \"picture\":\"https://static.365trtd.com/system/cbian/cbian.png\", \"width\":150, \"height\":150}\n        // \"picture\":\"https://static.365trtd.com/system/cbian/cbian.png\", \"width\":150, \"height\":150}\n        \n        var themeData = {\"text\":\"总结\", \"deletable\":true,  \"fill\":\"black\", \"iconVisible\":false, \n        \"locationSpot\":\"1 0 0 0\", \"textAlign\":\"center\", \"category\":\"autoText\", \n        \"loc\":go.Point.stringify(basePoint.copy().offset(3,-3)), \n        \"movable\":true, \"group\":groupKey}\n        var timeData = {\"text\":\"时间\", \"deletable\":true,  \"fill\":\"black\", \"iconVisible\":false, \n        \"locationSpot\":\"1 0 0 0\", \"textAlign\":\"center\", \"category\":\"autoText\", \n        \"loc\":go.Point.stringify(basePoint.copy().offset(150, 0)), \n        \"movable\":true, \"group\":groupKey}\n        var energeData = {\"text\":\"能量\", \"deletable\":true, \"fill\":\"black\", \"iconVisible\":false, \n        \"locationSpot\":\"1 0 0 0\", \"textAlign\":\"center\", \"category\":\"autoText\", \n        \"loc\":go.Point.stringify(basePoint.copy().offset(0, -150)), \n        \"movable\":true, \"group\":groupKey}\n        var text1Data = {\"text\":\"总结1\", \"deletable\":true,  \"textStroke\":\"#0e399d\", \"iconVisible\":false, \n        \"locationSpot\":\"0 0 0 0\", \"textAlign\":\"left\", \"category\":\"autoText\", \n        \"loc\":go.Point.stringify(basePoint.copy().offset(155*Math.cos(30*Math.PI/180), -150*Math.sin(30*Math.PI/180))), \n        \"movable\":true, \"group\":groupKey}\n        var text2Data = {\"text\":\"总结3\", \"deletable\":true, \"textStroke\":\"#FFC000\", \"iconVisible\":false, \n        \"locationSpot\":\"0 0.5 0 0\", \"textAlign\":\"left\", \"category\":\"autoText\", \n        \"loc\":go.Point.stringify(basePoint.copy().offset(145*Math.cos(45*Math.PI/180), -150*Math.sin(45*Math.PI/180))), \n        \"movable\":true, \"group\":groupKey}\n        var text3Data = {\"text\":\"总结2\", \"deletable\":true, \"textStroke\":\"#cb1c27\", \"iconVisible\":false, \n        \"locationSpot\":\"0 1 0 0\", \"textAlign\":\"left\", \"category\":\"autoText\", \n        \"loc\":go.Point.stringify(basePoint.copy().offset(145*Math.cos(70*Math.PI/180), -140*Math.sin(70*Math.PI/180))), \n        \"movable\":true, \"group\":groupKey}\n\n        if(cbian){\n            text1Data.text = cbian.shiText;\n            text2Data.text = cbian.centerText;\n            text3Data.text = cbian.xuText;\n        }\n        diagram.model.addNodeData(text1Data)\n        diagram.model.addNodeData(text2Data)\n        diagram.model.addNodeData(text3Data)\n        diagram.model.addNodeData(themeData)\n        diagram.model.addNodeData(timeData)\n        diagram.model.addNodeData(energeData)\n        diagram.model.addNodeData(picData)\n        diagram.model.addNodeData(groupData)\n        \n    //     {\"text\":\"自由文本\",\n    //     \"deletable\":true, \n    //     \"role\":\"freeText\",\n    //     \"fill\":\"black\", \n    //     \"iconVisible\":false, \n    //     \"locationSpot\":\"0.5 0.5 0 0\", \n    //     \"textAlign\":\"center\", \n    //     \"category\":\"autoText\", \n    //     \"loc\": go.Point.stringify(e.documentPoint), \n    //     \"movable\":true, \"group\":node.data.key\n    //    }\n\n        diagram.commitTransaction(\"addCbian\")\n    }\n    adjustTextAngle(...obj){\n        adjustTextAngle(obj)\n    }\n    // 增加橄榄\n    addOlive(node, cbian){\n        console.log(\"addOliveaddOlive\")\n        var diagram = this.diagram\n        if(!node){\n            node = diagram.selection.first();\n        }\n        if(!node) return;\n        var count = 0\n        var labelGroup;\n        var it = node.containingGroup.findSubGraphParts().iterator;\n        var oliveWidth = node.containingGroup.data.oliveWidth;\n        while (it.next()) {\n            var n = it.value;\n            if(n.data.category == \"wave\"){\n                count++;\n            }\n        }\n        var maxOlive = 50;\n        if(node.containingGroup.data.maxOlive != null){\n            maxOlive = node.containingGroup.data.maxOlive\n        }\n        if(count>maxOlive){\n            return;\n        }\n        var curShiText = this.diagram.findNodeForKey(node.data.shiText)\n        var curXuText = this.diagram.findNodeForKey(node.data.xuText)\n        diagram.startTransaction(\"dspiral\")\n        var order = 1000;\n        if(node.data.order != null){\n            order = Number(node.data.order)+0.5;\n        }\n\n        var data = JSON.parse(JSON.stringify(node.data))\n        Object.assign(data, {\n            \"key\": helpers.guid(), \n            \"order\": order,\n            \"text\":\"\",\n        })\n        if(cbian){\n            data.text = cbian.centerText\n        }\n        delete data.centerText\n        delete data.__gohashid\n        delete data.hyperlink\n        delete data.remark\n        // var data =  {\"category\":\"wave\", \n        //     \"text\":\"\", \n        //     \"level\":0, \"key\": helpers.guid(), \n        //     \"group\":node.data.group, \n        //     \"loc\":node.data.loc,\n        //     \"desiredSize\":node.data.desiredSize, \n        //     \"order\": order,\n        //     \"font\": node.data.font,\n        //     \"textStroke\": node.data.textStroke,\n        //     \"textAlign\": node.data.textAlign,\n        //     \"spacingline\": node.data.spacingline,\n        // }\n        var shiText = JSON.parse(JSON.stringify(curShiText.data))\n        delete shiText.__gohashid\n        delete shiText.textAlign\n        delete shiText.hyperlink\n        delete shiText.remark\n        delete shiText.nloc\n        Object.assign(shiText, {\n            \"key\": helpers.guid(), \n            \"order\": order,\n            \"olive\": data.key,\n            \"text\":\"\",\n        })\n        if(cbian){\n            shiText.text = cbian.shiText\n        }\n        // var shiText = {\n        // \"text\":\"\",\n        // \"minSize\":`${oliveWidth-30} 30`,\n        // \"deletable\":false,\n        //  \"font\":curShiText.data.font || \"18px 'Microsoft YaHei'\", \n        // //  \"textStroke\": curShiText.textStroke,\n        //  \"textAlign\": curShiText.data.textAlign,\n        //  \"spacingline\": curShiText.data.spacingline,\n        //  \"category\":\"autoText\", \n        //  \"key\": helpers.guid(), \"width\":300, \n        //  \"role\":\"shiText\", \"level\":0, \"group\": node.data.group, \n        //  \"order\": order,\n        //  \"olive\": data.key,\n        // }\n        var xuText = JSON.parse(JSON.stringify(curXuText.data))\n        delete xuText.__gohashid\n        delete xuText.textAlign\n        delete xuText.hyperlink\n        delete xuText.remark\n        delete xuText.nloc\n        Object.assign(xuText, {\n            \"key\": helpers.guid(), \n            \"order\": order,\n            \"olive\": data.key,\n            \"text\":\"\",\n        })\n        if(cbian){\n            xuText.text = cbian.xuText\n        }\n        // var xuText = {\n        // \"text\":\"\",\n        // \"minSize\":`${oliveWidth-30} 30`,\n        // \"deletable\":false,\n        //  \"font\": curXuText.data.font || \"18px 'Microsoft YaHei'\", \n        //  \"textAlign\": curXuText.data.textAlign,\n        //  \"spacingline\": curXuText.data.spacingline,\n        //  \"category\":\"autoText\", \n        //  \"key\": helpers.guid(), \"width\":300, \n        //  \"role\":\"xuText\", \"level\":0, \"group\": node.data.group, \n        //  \"order\": order,\n        //  \"olive\": data.key\n        // }\n        data.shiText = shiText.key\n        data.xuText = xuText.key\n\n\n        console.log(\"orderorderorderorder:\",order)\n        if(node.containingGroup){\n            node.containingGroup.layout.isOngoing = true;\n            // node.containingGroup.layout.isInit = true;\n            node.containingGroup.layout.isValidLayout = false;\n            if(node.containingGroup.containingGroup){\n                node.containingGroup.containingGroup.layout.isOngoing = true;\n                node.containingGroup.containingGroup.layout.isValidLayout = false; \n            }\n        }\n        data.isNew = true\n        diagram.model.addNodeData(data);\n        diagram.model.addNodeData(shiText);\n        diagram.model.addNodeData(xuText);\n        //diagram.model.setDataProperty(node.containingGroup,\"width\",300)\n        // diagram.model.setDataProperty(node.containingGroup,\"width\",300)\n        diagram.commitTransaction(\"dspiral\")\n        // this.diagram.updateAllTargetBindings()\n        // setTimeout(()=>{\n        //     // this.diagram.updateAllTargetBindings()\n        //     // this.diagram.layoutDiagram(true)\n        //     node.containingGroup.layout.isOngoing = true;\n        //     // node.containingGroup.layout.isInit = true;\n        //     node.containingGroup.layout.isValidLayout = false;\n        //     if(node.containingGroup.containingGroup){\n        //         node.containingGroup.containingGroup.layout.isOngoing = true;\n        //         node.containingGroup.containingGroup.layout.isValidLayout = false; \n        //     }\n        // },500)\n        // this.layoutAllGroup()\n    }\n\n\n    getAxisGroupData(options){\n        var e = this.diagram.lastInput\n        // diagram.startTransaction(\"addCbian\")\n        // var groupKey = helpers.guid()\n        \n        var basePoint = e.documentPoint\n        var baseLoc = go.Point.stringify(basePoint)\n  var axisGroupKey = helpers.guid()\n  var labelGroupKey = helpers.guid()\n  var waveGroupKey = helpers.guid()\n  var olive1Key = helpers.guid()\n  var olive2Key = helpers.guid()\n  var olive3Key = helpers.guid()\n  var olive4Key = helpers.guid()\n  var olive1ShiTextKey = helpers.guid()\n  var olive1XuTextKey = helpers.guid()\n  var olive2ShiTextKey = helpers.guid()\n  var olive2XuTextKey = helpers.guid()\n  var olive3ShiTextKey = helpers.guid()\n  var olive3XuTextKey = helpers.guid()\n  var olive4ShiTextKey = helpers.guid()\n  var olive4XuTextKey = helpers.guid()\n  var olive1CenterTextKey = helpers.guid()\n  var olive2CenterTextKey = helpers.guid()\n  var olive3CenterTextKey = helpers.guid()\n  var olive4CenterTextKey = helpers.guid()\n\n  var temp = [\n  {\"category\":\"labelGroup\", \"group\":axisGroupKey, \"role\":\"labelGroup\", \"isGroup\":true, \"level\":0, \"key\":labelGroupKey, \"loc\":go.Point.stringify(basePoint.copy().offset(30,700)), \"deletable\":false, \"selectable\":false},\n{\"category\":\"waveGroup\",\"maxOlive\":15, \"deletable\":false, \"haveTail\":true, \"oliveType\":\"Wave\", \"shiStroke\":\"#0e399d\", \"xuStroke\":\"#cb1c27\", \"centerStroke\":\"rgba(9, 166, 9, 1)\", \"oliveWidth\":150, \"oliveHeight\":120, \"isGroup\":true, \"level\":0, \"key\":waveGroupKey, \"loc\":baseLoc, \"angle\":330.08938180947, \"group\":axisGroupKey, \"movable\":false, \"desiredSize\":\"700 120\", \"textAngle\":\"horizontal\", \"centerTextAngle\":\"independent\", \"centerTextMode\":\"independent\"},\n{\"category\":\"axisGroup\", \"isGroup\":true, \"level\":0, \"key\":axisGroupKey, \"loc\":baseLoc, \"angle\":0, \"desiredSize\":\"300 150\"},\n{\"category\":\"line\", \"level\":0, \"key\":-11, \"loc\":baseLoc, \"desiredSize\":\"700 1\", \"width\":1400, \"height\":1, \"group\":waveGroupKey, \"angle\":330.08938180947, \"role\":\"centerLine\", \"selectable\":false, \"stroke\":\"rgba(9, 166, 9, 1)\"},\n{\"category\":\"line\", \"level\":0, \"key\":-8, \"loc\":\"-91.91674008334496 -140.02427812707117\", \"desiredSize\":\"606.7630471788291 10\", \"width\":1400, \"height\":1, \"angle\":0, \"group\":axisGroupKey, \"role\":\"axisX\", \"selectable\":false, \"stroke\":\"#0e399d\"},\n{\"category\":\"line\", \"level\":0, \"key\":-7, \"loc\":\"-91.91674008334496 -140.02427812707117\", \"desiredSize\":\"349.05387059630493 10\", \"width\":1400, \"height\":1, \"angle\":270, \"group\":axisGroupKey, \"role\":\"axisY\", \"selectable\":false, \"stroke\":\"#cb1c27\"},\n{\"text\":\"能量\", \"deletable\":false, \"font\":\"24px 'Microsoft YaHei'\", \"category\":\"autoText\", \"loc\":\"-101.91674008334496 -489.0781487233761\", \"key\":-12, \"role\":\"axisYText\", \"locationSpot\":\"1 0.5 0 0\", \"group\":axisGroupKey, \"movable\":true},\n{\"text\":\"主题\", \"role\":\"themeText\", \"deletable\":false, \"font\":\"24px 'Microsoft YaHei'\", \"category\":\"autoText\", \"loc\":go.Point.stringify(basePoint.copy().offset(-30,0)), \"key\":-13, \"level\":0, \"group\":axisGroupKey, \"locationSpot\":\"0.5 0 0 0\", \"movable\":true, \"width\":300},\n{\"text\":\"时间\", \"deletable\":false, \"font\":\"24px 'Microsoft YaHei'\", \"category\":\"autoText\", \"loc\":\"514.8463070954841 -140.02427812707117\", \"key\":-14, \"role\":\"axisXText\", \"group\":axisGroupKey, \"locationSpot\":\"0.5 0 0 0\"},\n{\"text\":\"实线：\", \"deletable\":false, \"fill\":\"#cb1c27\", \"iconVisible\":true, \"locationSpot\":\"0 0 0 0\", \"textAlign\":\"start\", \"category\":\"autoText\", \"loc\":go.Point.stringify(basePoint.copy().offset(30,-350)), \"role\":\"labelText1\", \"movable\":true, \"group\":labelGroupKey, \"visible\":true, \"minSize\":\"120 30\"},\n{\"text\":\"虚线：\", \"deletable\":false, \"fill\":\"#0e399d\", \"iconVisible\":true, \"locationSpot\":\"0 0 0 0\", \"textAlign\":\"start\", \"category\":\"autoText\", \"loc\":go.Point.stringify(basePoint.copy().offset(30,-310)), \"role\":\"labelText2\", \"movable\":true, \"group\":labelGroupKey, \"visible\":true, \"minSize\":\"120 30\"},\n{\"text\":\"中线：\", \"deletable\":false, \"fill\":\"#3f5369\", \"iconVisible\":true, \"locationSpot\":\"0 0 0 0\", \"textAlign\":\"start\", \"category\":\"autoText\", \"loc\":go.Point.stringify(basePoint.copy().offset(30,-270)), \"role\":\"labelText3\", \"movable\":true, \"group\":labelGroupKey, \"visible\":true, \"minSize\":\"120 30\"},\n\n{\"category\":\"wave\", \"text\":\"\", \"role\":\"waveTail\", \"deletable\":false, \"selectable\":false, \"level\":0, \"key\":\"2d6ff2f1-0966-36bf-4e85-f5775ca0652b\", \"group\":waveGroupKey, \"loc\":\"710.0826118675676 -829.1890319396903\", \"desiredSize\":\"75 120\", \"order\":999, \"oliveType\":\"Wave\", \"angle\":330.08938180947, \"textAlign\":\"center\", \"shiStroke\":\"#0e399d\", \"xuStroke\":\"#cb1c27\", \"centerText\":\"df53d882-fe51-d78e-d8e3-8d9681578cb8\", \"textVisible\":false, \"isNew\":null},\n    ]\n    if(!options){\n        temp = temp.concat([\n            {\"category\":\"wave\", \"text\":\"1\\n\", \"level\":0, \"key\":olive1Key, \"group\":waveGroupKey, \"desiredSize\":\"150 120\", \"order\":1, \"shiText\":olive1ShiTextKey, \"xuText\":olive1XuTextKey, \"angle\":330.08938180947, \"loc\":\"-91.91674008334496 -140.02427812707123\", \"oliveType\":\"Ellipse\", \"textAlign\":\"center\", \"shiStroke\":\"#cb1c27\", \"xuStroke\":\"#0e399d\", \"centerText\":olive1CenterTextKey, \"textVisible\":false},\n            {\"deletable\":false, \"text\":\"\", \"font\":\"18px 'Microsoft YaHei'\", \"category\":\"autoText\", \"key\":olive1ShiTextKey, \"width\":150, \"role\":\"shiText\", \"level\":0, \"group\":waveGroupKey, \"order\":1, \"olive\":olive1Key, \"loc\":\"4.128618140465704 -125.47989214278559\", \"locationSpot\":\"0 0 0 0\", \"textStroke\":\"#cb1c27\", \"showBorder\":true, \"angle\":0, \"minSize\":\"120 30\", \"textAlign\":\"center\"},\n            {\"deletable\":false, \"text\":\"\", \"font\":\"18px 'Microsoft YaHei'\", \"category\":\"autoText\", \"key\":olive1XuTextKey, \"width\":150, \"role\":\"xuText\", \"level\":0, \"group\":waveGroupKey, \"order\":1, \"olive\":olive1Key, \"loc\":\"-56.2078366340385 -230.36321886941172\", \"locationSpot\":\"1 1 0 0\", \"textStroke\":\"#0e399d\", \"showBorder\":true, \"angle\":0, \"minSize\":\"120 30\", \"textAlign\":\"center\"},\n            {\"category\":\"wave\", \"text\":\"3\\n\", \"level\":0, \"key\":olive2Key, \"group\":waveGroupKey, \"desiredSize\":\"150 120\", \"order\":3, \"shiText\":olive2ShiTextKey, \"xuText\":olive2XuTextKey, \"angle\":330.08938180947, \"loc\":\"168.12456585043884 -289.61879409691636\", \"oliveType\":\"Ellipse\", \"textAlign\":\"center\", \"shiStroke\":\"#cb1c27\", \"xuStroke\":\"#0e399d\", \"centerText\":olive2CenterTextKey, \"textVisible\":false},\n            {\"deletable\":false, \"text\":\"\", \"font\":\"18px 'Microsoft YaHei'\", \"category\":\"autoText\", \"key\":olive2ShiTextKey, \"width\":150, \"role\":\"shiText\", \"level\":0, \"group\":waveGroupKey, \"order\":3, \"olive\":olive2Key, \"loc\":\"264.16992407424954 -275.07440811263075\", \"locationSpot\":\"0 0 0 0\", \"textStroke\":\"#cb1c27\", \"showBorder\":true, \"angle\":0, \"minSize\":\"120 30\", \"textAlign\":\"center\"},\n            {\"deletable\":false, \"text\":\"\", \"font\":\"18px 'Microsoft YaHei'\", \"category\":\"autoText\", \"key\":olive2XuTextKey, \"width\":150, \"role\":\"xuText\", \"level\":0, \"group\":waveGroupKey, \"order\":3, \"olive\":olive2Key, \"loc\":\"203.83346929974533 -379.9577348392569\", \"locationSpot\":\"1 1 0 0\", \"textStroke\":\"#0e399d\", \"showBorder\":true, \"angle\":0, \"minSize\":\"120 30\", \"textAlign\":\"center\"},\n            {\"category\":\"wave\", \"text\":\"2\\n\", \"level\":0, \"key\":olive3Key, \"group\":waveGroupKey, \"desiredSize\":\"150 120\", \"order\":2, \"shiText\":olive3ShiTextKey, \"xuText\":olive3XuTextKey, \"angle\":330.08938180947, \"loc\":\"38.10391288354694 -214.8215361119938\", \"oliveType\":\"Ellipse\", \"textAlign\":\"center\", \"shiStroke\":\"#cb1c27\", \"xuStroke\":\"#0e399d\", \"centerText\":olive3CenterTextKey, \"textVisible\":false},\n            {\"deletable\":false, \"text\":\"\", \"font\":\"18px 'Microsoft YaHei'\", \"category\":\"autoText\", \"key\":olive3ShiTextKey, \"width\":150, \"role\":\"shiText\", \"level\":0, \"group\":waveGroupKey, \"order\":2, \"olive\":olive3Key, \"loc\":\"73.8128163328534 -305.1604768543343\", \"locationSpot\":\"1 1 0 0\", \"textStroke\":\"#cb1c27\", \"showBorder\":true, \"angle\":0, \"minSize\":\"120 30\", \"textAlign\":\"center\"},\n            {\"deletable\":false, \"text\":\"\", \"font\":\"18px 'Microsoft YaHei'\", \"category\":\"autoText\", \"key\":olive3XuTextKey, \"width\":150, \"role\":\"xuText\", \"level\":0, \"group\":waveGroupKey, \"order\":2, \"olive\":olive3Key, \"loc\":\"134.1492711073576 -200.27715012770815\", \"locationSpot\":\"0 0 0 0\", \"textStroke\":\"#0e399d\", \"showBorder\":true, \"angle\":0, \"minSize\":\"120 30\", \"textAlign\":\"center\"},\n            {\"category\":\"wave\", \"text\":\"4\\n\", \"level\":0, \"key\":olive4Key, \"group\":waveGroupKey, \"desiredSize\":\"150 120\", \"order\":4, \"shiText\":olive4ShiTextKey, \"xuText\":olive4XuTextKey, \"angle\":330.08938180947, \"loc\":\"298.1452188173308 -364.41605208183887\", \"oliveType\":\"Ellipse\", \"textAlign\":\"center\", \"shiStroke\":\"#cb1c27\", \"xuStroke\":\"#0e399d\", \"centerText\":olive4CenterTextKey, \"textVisible\":false},\n            {\"deletable\":false, \"text\":\"\", \"font\":\"18px 'Microsoft YaHei'\", \"category\":\"autoText\", \"key\":olive4ShiTextKey, \"width\":150, \"role\":\"shiText\", \"level\":0, \"group\":waveGroupKey, \"order\":4, \"olive\":olive4Key, \"loc\":\"333.8541222666372 -454.7549928241794\", \"locationSpot\":\"1 1 0 0\", \"textStroke\":\"#cb1c27\", \"showBorder\":true, \"angle\":0, \"minSize\":\"120 30\", \"textAlign\":\"center\"},\n            {\"deletable\":false, \"text\":\"\", \"font\":\"18px 'Microsoft YaHei'\", \"category\":\"autoText\", \"key\":olive4XuTextKey, \"width\":150, \"role\":\"xuText\", \"level\":0, \"group\":waveGroupKey, \"order\":4, \"olive\":olive4Key, \"loc\":\"394.1905770411414 -349.87166609755326\", \"locationSpot\":\"0 0 0 0\", \"textStroke\":\"#0e399d\", \"showBorder\":true, \"angle\":0, \"minSize\":\"120 30\", \"textAlign\":\"center\"},\n            {\"text\":\"1\\n\", \"minSize\":\"120 30\", \"deletable\":false, \"textAlign\":\"center\", \"font\":\"18px 'Microsoft YaHei'\", \"category\":\"autoText\", \"key\":olive1CenterTextKey, \"width\":120, \"role\":\"centerText\", \"level\":0, \"group\":waveGroupKey, \"order\":1, \"visible\":true, \"layerName\":\"Foreground\", \"locationSpot\":\"0.5 0.5 0 0\", \"selectable\":false, \"olive\":olive1Key, \"loc\":\"-26.039609246786398 -177.92155550609866\", \"angle\":0},\n            {\"text\":\"2\\n\", \"minSize\":\"120 30\", \"deletable\":false, \"textAlign\":\"center\", \"font\":\"18px 'Microsoft YaHei'\", \"category\":\"autoText\", \"key\":olive3CenterTextKey, \"width\":120, \"role\":\"centerText\", \"level\":0, \"group\":waveGroupKey, \"order\":2, \"visible\":true, \"layerName\":\"Foreground\", \"locationSpot\":\"0.5 0.5 0 0\", \"selectable\":false, \"olive\":olive3Key, \"loc\":\"103.9810437201055 -252.71881349102122\", \"angle\":0},\n            {\"text\":\"3\\n\", \"minSize\":\"120 30\", \"deletable\":false, \"textAlign\":\"center\", \"font\":\"18px 'Microsoft YaHei'\", \"category\":\"autoText\", \"key\":olive2CenterTextKey, \"width\":120, \"role\":\"centerText\", \"level\":0, \"group\":waveGroupKey, \"order\":3, \"visible\":true, \"layerName\":\"Foreground\", \"locationSpot\":\"0.5 0.5 0 0\", \"selectable\":false, \"olive\":olive2Key, \"loc\":\"234.00169668699743 -327.5160714759438\", \"angle\":0},\n            {\"text\":\"4\\n\", \"minSize\":\"120 30\", \"deletable\":false, \"textAlign\":\"center\", \"font\":\"18px 'Microsoft YaHei'\", \"category\":\"autoText\", \"key\":olive4CenterTextKey, \"width\":120, \"role\":\"centerText\", \"level\":0, \"group\":waveGroupKey, \"order\":4, \"visible\":true, \"layerName\":\"Foreground\", \"locationSpot\":\"0.5 0.5 0 0\", \"selectable\":false, \"olive\":olive4Key, \"loc\":\"364.0223496538893 -402.3133294608663\", \"angle\":0},\n        ])\n    }\n  return temp\n    }\n    \n\n    // 增加拓扑\n    addAxisGroup(options){\n        console.log(\"addOliveaddOlive\")\n        var diagram = this.diagram\n        var axisGroupCount = 0;\n        for(var i=0;i<diagram.model.nodeDataArray.length;i++){\n            if(diagram.model.nodeDataArray[i].category == \"axisGroup\"){\n                axisGroupCount += 1;\n            }\n        }\n        // 最多插入13个拓扑\n        if(axisGroupCount > 13){\n            return;\n        }\n        var axisData = this.getAxisGroupData(options)\n        if(!axisData) return;\n        diagram.startTransaction(\"dspiral\")\n        for(var i=0;i<axisData.length;i++){\n            diagram.model.addNodeData(axisData[i]);\n        }\n       \n        //diagram.model.setDataProperty(node.containingGroup,\"width\",300)\n        // diagram.model.setDataProperty(node.containingGroup,\"width\",300)\n        diagram.commitTransaction(\"dspiral\")\n        return axisData\n        // this.diagram.updateAllTargetBindings()\n        // setTimeout(()=>{\n        //     // this.diagram.updateAllTargetBindings()\n        //     this.diagram.layoutDiagram(true)\n        // },500)\n        // this.layoutAllGroup()\n    }\n    // 选择文本节点\n    selectText(e) {\n        // console.log(\"selectTextselectTextselectText\")\n        var myDiagram = this.diagram\n        var node = myDiagram.selection.first();\n        if (!node) return;\n        // removeNodeRemarkTips();\n        // console.log(\"selectTExt\")\n\n        var tb = myDiagram.selection.first().findObject('TEXT');\n        if (tb) myDiagram.commandHandler.editTextBlock(tb);\n        // try{\n        //     var tmp;\n        //     if(node.containingGroup && node.containingGroup.data.category == \"waveGroup\"){\n        //         if(node.data.role == \"shiText\"){\n        //             if(node.containingGroup.labelText1 && node.data.text.trim() == \"\"){\n        //                 // node.data.text = node.containingGroup.labelText1.data.text\n        //                 tmp = node.containingGroup.labelText1.data.text.replace(\"实线：\",\"\")\n        //                 if(tmp != \"\"){\n        //                     myDiagram.currentTool.currentTextEditor.mainElement.value = tmp+\"：\"\n        //                 }\n        //             }\n        //         }\n        //         if(node.data.role == \"xuText\"){\n        //             if(node.containingGroup.labelText2 && node.data.text.trim() == \"\"){\n        //                 // node.data.text = node.containingGroup.labelText1.data.text\n        //                 tmp = node.containingGroup.labelText2.data.text.replace(\"虚线：\",\"\")\n        //                 if(tmp != \"\"){\n        //                     myDiagram.currentTool.currentTextEditor.mainElement.value = tmp+\"：\"\n        //                 }\n        //             }\n        //         }\n        //         if(node.data.category == \"wave\" || node.data.role == \"centerText\"){\n        //             if(node.containingGroup.labelText3 && node.data.text.trim() == \"\"){\n        //                 // node.data.text = node.containingGroup.labelText1.data.text\n        //                 tmp = node.containingGroup.labelText3.data.text.replace(\"中线：\",\"\")\n        //                 if(tmp != \"\"){\n        //                     myDiagram.currentTool.currentTextEditor.mainElement.value = tmp+\"：\"\n        //                 }\n        //             }\n        //         }\n        //     }\n        // }catch(e){\n        //     console.log(\"selectText:error:\",e)\n        // }\n        // 手机上支持换行，电脑上需要ctl+Enter键换行\n        if(!helpers.checkPhone()){\n            helpers.simulateEnterWithAlt(e);\n        }else{\n            var val = myDiagram.currentTool.currentTextEditor.mainElement.value\n            myDiagram.currentTool.currentTextEditor.mainElement.selectionStart = val.length; \n            myDiagram.currentTool.currentTextEditor.mainElement.selectionEnd = val.length; \n        }\n    }\n\n    clearAllTextBorder(){\n        var it = this.diagram.nodes.iterator;\n        while (it.next()) {\n            var n = it.value;\n            if(n.data.category == \"autoText\"){\n                  n.findObject(\"textBorder\").visible = false;\n            }\n        }\n    }\n    apiSwitchWaveTail(){\n        console.log(\"apiSwitchWaveTailapiSwitchWaveTail\")\n        var node = this.diagram.selection.first()\n        if(!node) return\n        this.diagram.startTransaction()\n        // this.diagram.model.setDataProperty(node.data, \"oliveType\", \"Ellipse\")\n        // this.diagram.model.setDataProperty(node.data, \"haveTail\", false)\n        var it = node.findSubGraphParts().iterator;\n        var waveTail= null; // 查找是否存在尾巴\n        var lastNode = null;\n        var loc;\n        while(it.next()){\n            var n = it.value;\n            lastNode = n;\n            if(n.data.role == \"waveTail\"){\n                waveTail = n;\n                break;\n            }\n        }\n        if(lastNode){\n            loc = lastNode.data.loc\n        }else{\n            loc = node.data.loc\n        }\n        if(waveTail){\n            this.diagram.model.removeNodeData(waveTail.data);\n            this.diagram.model.setDataProperty(node.data, \"haveTail\", false)\n        }else{\n            this.diagram.model.setDataProperty(node.data, \"haveTail\", true)\n            var tailOlive = {\"category\":\"wave\", \n                \"text\":\"\", \n                \"role\":\"waveTail\",\n                deletable:false,\n                \"selectable\": false,\n                \"deletable\": false,\n                \"level\":0, \"key\": helpers.guid(), \n                \"group\":node.data.key, \n                \"loc\": loc,\n                \"desiredSize\": `${node.data.oliveWidth} ${node.data.oliveHeight}`, \n                \"order\": 2000,\n            }\n            this.diagram.model.addNodeData(tailOlive)\n        }\n        node.layout.isOngoing = true;\n        node.layout.isValidLayout = false;\n        this.diagram.commitTransaction()\n    }\n\n    //切换为橄榄形状\n    apiSwitchToEllipse(){\n        console.log(\"apiSwitchToEllipse\")\n        var node = this.diagram.selection.first()\n        if(!node) return\n        this.diagram.startTransaction()\n        this.diagram.model.setDataProperty(node.data, \"oliveType\", \"Ellipse\")\n        // this.diagram.model.setDataProperty(node.data, \"haveTail\", false)\n        var it = node.findSubGraphParts().iterator;\n        var waveTail= null; // 查找是否存在尾巴\n\n        while(it.next()){\n            var n = it.value;\n            if(n.data.role == \"waveTail\"){\n                waveTail = n;\n                break;\n            }\n        }\n\n        if(waveTail){\n            this.diagram.model.removeNodeData(waveTail.data);\n        }\n        node.layout.isOngoing = true;\n        node.layout.isValidLayout = false;\n        if(node.containingGroup){\n            node.containingGroup.layout.isOngoing = true;\n            node.containingGroup.layout.isValidLayout = false;\n        }\n        this.diagram.commitTransaction()\n    }\n\n\n    \n    // 切换为螺旋形状\n    apiSwitchToWave(){\n        var node = this.diagram.selection.first()\n        if(!node) return\n        this.diagram.startTransaction(\"apiSwitchToWave\")\n        this.diagram.model.setDataProperty(node.data, \"oliveType\", \"Wave\")\n        // this.diagram.model.setDataProperty(node.data, \"haveTail\", true)\n        var it = node.findSubGraphParts().iterator;\n        var waveTail= null; // 查找是否存在尾巴\n        var lastNode = null;\n        var haveTail = node.data.haveTail\n        var loc;\n        while(it.next()){\n            var n = it.value;\n            lastNode = n;\n            if(n.data.role == \"waveTail\"){\n                waveTail = n;\n                break;\n            }\n        }\n        if(lastNode){\n            loc = lastNode.data.loc\n        }else{\n            loc = node.data.loc\n        }\n        if(!waveTail && haveTail == true){\n            var tailOlive = {\"category\":\"wave\", \n                \"text\":\"\", \n                \"role\":\"waveTail\",\n                deletable:false,\n                \"selectable\": false,\n                \"deletable\": false,\n                \"level\":0, \"key\": helpers.guid(), \n                \"group\":node.data.key, \n                \"loc\": loc,\n                \"desiredSize\": `${node.data.oliveWidth} ${node.data.oliveHeight}`, \n                \"order\": 2000,\n            }\n            this.diagram.model.addNodeData(tailOlive)\n        }\n        node.layout.isOngoing = true;\n        node.layout.isValidLayout = false;\n        if(node.containingGroup){\n            node.containingGroup.layout.isOngoing = true;\n            node.containingGroup.layout.isValidLayout = false;\n        }\n        this.diagram.commitTransaction(\"apiSwitchToWave\")\n    }\n\n    // 切换文字方向\n    apiSwitchTextAngle(textAngle){\n        var node = this.diagram.selection.first()\n        if(!node) return\n        var mapObj = {\n            \"horizontal\":\"vertical\",\n            \"vertical\":\"horizontal\",\n        }\n        console.log(\"apiSwitchTextAngle\")\n        \n        node.diagram.startTransaction(\"apiSwitchTextAngle\")\n        if(textAngle && [\"horizontal\",\"vertical\"].indexOf(textAngle) > -1){\n            node.diagram.model.setDataProperty(node.data, \"textAngle\", textAngle)\n            node.data.textAngle = textAngle\n        }else{\n           textAngle = mapObj[node.data.textAngle] || \"horizontal\"\n           node.diagram.model.setDataProperty(node.data, \"textAngle\", textAngle)\n            node.data.textAngle = textAngle\n            // }\n        }\n        // var angle = node.angle\n        // this.diagram.model.setDataProperty(node.data, \"angle\", angle+1)\n        // this.diagram.model.setDataProperty(node.data, \"angle\", angle)\n        // node.layout.isInit = true;\n        // setTimeout(()=>{\n            node.layout.isOngoing = true;\n            node.layout.isValidLayout = false;\n        // })\n        node.diagram.commitTransaction(\"apiSwitchTextAngle\")\n        // this.diagram.startTransaction(\"layout\")\n        // node.layout.isOngoing = true;\n        // node.layout.isValidLayout = false;\n        // this.diagram.commitTransaction(\"layout\")\n        // this.diagram.updateAllTargetBindings()\n        // this.diagram.layoutDiagram(true)\n    }\n\n    // 以下两个方法控制菜单显示\n    getDefaultCustomMenuDivStr(){\n        return `\n        <ul>\n            <li trtd_action=\"drillAnalyze\"><a class=\"i18n\" data-lang=\"cancelfix\">插入子盘</a></li>\n            <li trtd_action=\"addFollower\"><a class=\"i18n\" data-lang=\"insertsl\">插入同级节点</a></li>\n            <li trtd_action=\"startNewSpiral\"><a class=\"i18n\" data-lang=\"icn\">插入子节点</a></li>\n            <li trtd_action=\"apiDuplicateNode\"><a class=\"i18n\" data-lang=\"duplicateNode\">复制节点</a></li>\n            <li trtd_action=\"apiDeleteSelection\"><a class=\"i18n\" data-lang=\"remove\">删除</a></li>\n            <li trtd_action=\"splitOlive2Cbian\"><a class=\"i18n\" data-lang=\"remove\">分离</a></li>\n            <li trtd_action=\"splitOlive2Half\"><a class=\"i18n\" data-lang=\"remove\">拆分</a></li>\n            <li trtd_action=\"orderChildNode\"><a class=\"i18n\" data-lang=\"ordernode\">子节点编号</a></li>\n            <li trtd_action=\"clearOrderChildNode\"><a class=\"i18n\" data-lang=\"clearordernode\">取消子节点编号</a></li>\n            <li trtd_action=\"clearNodeTextMenu\"><a class=\"i18n\" data-lang=\"emptynodetext\">清空节点文本</a></li>\n            <li trtd_action=\"apiInsertTianpanNode\"><a class=\"i18n\" data-lang=\"insertnodetianpan\">插入天盘节点</a></li>\n            <li trtd_action=\"addTextNode\"><a class=\"i18n\" data-lang=\"inserttext\">插入文本</a></li>\n            <li trtd_action=\"locateRootNodeMenu\"><a class=\"i18n\" data-lang=\"locaterootnode\">定位根节点</a></li>\n            <li trtd_action=\"showAllNodesMenu\"><a class=\"i18n\" data-lang=\"displayallnodes\">显示所有节点</a></li>\n            <li trtd_action=\"fixPictureMenu\"><a class=\"i18n\" data-lang=\"fixnode\">固定节点</a></li>\n            <li trtd_action=\"activePictureMenu\"><a class=\"i18n\" data-lang=\"cancelfix\">取消固定</a></li>\n            <li trtd_action=\"apiSwitchToEllipse\"><a class=\"i18n\" data-lang=\"cancelfix\">切换为橄榄形状</a></li>\n            <li trtd_action=\"apiSwitchToWave\"><a class=\"i18n\" data-lang=\"cancelfix\">切换为螺旋形状</a></li>\n            <li trtd_action=\"apiSwitchWaveTail\"><a class=\"i18n\" data-lang=\"cancelfix\">添加/删除尾巴</a></li>\n            <li trtd_action=\"apiSwitchTextAngle\"><a class=\"i18n\" data-lang=\"cancelfix\">切换文字方向</a></li>\n            <li trtd_action=\"addCbian\"><a class=\"i18n\" data-lang=\"cancelfix\">添加总结图</a></li>\n            <li trtd_action=\"addAxisGroup\"><a class=\"i18n\" data-lang=\"cancelfix\">插入拓扑</a></li>\n            <li trtd_action=\"showRect\"><a class=\"i18n\" data-lang=\"cancelfix\">显示矩形线</a></li>\n            <li trtd_action=\"hideRect\"><a class=\"i18n\" data-lang=\"cancelfix\">隐藏矩形线</a></li>\n            <li trtd_action=\"offShowRedLine\"><a class=\"i18n\" data-lang=\"cancelfix\">关闭自动显示红线</a></li>\n            <li trtd_action=\"autoShowRedline\"><a class=\"i18n\" data-lang=\"cancelfix\">自动显示自旋红线</a></li>\n            <li trtd_action=\"bringupLayer\"><a class=\"i18n\" data-lang=\"cancelfix\">上移一层</a></li>\n            <li trtd_action=\"bringdownLayer\"><a class=\"i18n\" data-lang=\"cancelfix\">下移一层</a></li>\n            <li trtd_action=\"bringToBackground\"><a class=\"i18n\" data-lang=\"cancelfix\">置于底层</a></li>\n            <li trtd_action=\"bringToForeground\"><a class=\"i18n\" data-lang=\"cancelfix\">置于顶层</a></li>\n            <li trtd_action=\"addDimTtext\"><a class=\"i18n\" data-lang=\"cancelfix\">增加维度</a></li>\n        </ul>\n        `\n    }\n    getShowContextMenus(node){\n        var showIds = null\n        console.log(\"getShowContextMenus\")\n        if(node){\n            // 双螺旋可以添加常变\n            if([\"axisGroup\"].indexOf(node.data.category) > -1){\n                showIds = \"addCbian,apiDeleteSelection\"\n            }\n            if([\"picGroup\"].indexOf(node.data.category) > -1){\n                showIds = \"apiDeleteSelection\"\n            }\n\n            if([\"3\"].indexOf(node.data.category) > -1){\n                showIds = \"bringupLayer,apiDeleteSelection,bringdownLayer,bringToBackground,bringToForeground\"\n            }\n\n            if( [\"wave\"].indexOf(node.data.category) > -1){\n                if(node.data.deletable != null){\n                    if(node.data.deletable){\n                        showIds = \"apiDeleteSelection,splitOlive2Cbian,splitOlive2Half\";\n                    }\n                }else{\n                    if(node.deletable){\n                        showIds = \"apiDeleteSelection,splitOlive2Cbian,splitOlive2Half\";\n                    }\n                }\n            }\n            console.log(\"waveGroupwaveGroup\")\n            if( [\"waveGroup\"].indexOf(node.data.category) > -1){\n                showIds = \"apiSwitchTextAngle,\";\n                if(node.data.oliveType == \"Ellipse\"){\n                    showIds += \"apiSwitchToWave\"\n                }else{\n                    showIds += \"apiSwitchToEllipse,apiSwitchWaveTail\"\n                }\n                \n            }\n            if( [\"yunGroup\"].indexOf(node.data.category) > -1){\n                showIds = \"\";\n                if(node.data.showShape){\n                    showIds += \"hideRect\"\n                }else{\n                    showIds += \"showRect\"\n                }\n                if(node.data.beginSpark != \"line\"){\n                    showIds += \",autoShowRedline\"\n                }else{\n                    showIds += \",offShowRedLine\"\n                }\n            }\n            if( [\"autoText\"].indexOf(node.data.category) > -1 && [\"shiText\",\"xuText\"].indexOf(node.data.role) < 0){\n                showIds = \"apiDeleteSelection\";\n            }\n            if(node.data.subRole == \"dimText\" && node.containingGroup.data.category == \"yunpanGroup\"){\n                showIds = \"apiDeleteSelection,addDimTtext\"\n            }\n            if(node.data.category == \"shapeText\"&& node.containingGroup.data.category == \"yunpanGroup\"){\n                showIds = \"apiDeleteSelection\"\n            }\n\n            // 橄榄/文字节点可以拓扑钻取分析\n            if([\"wave\",\"autoText\"].indexOf(node.data.category)>-1){\n                if(node.data.text){\n                    showIds += \",drillAnalyze\"\n                }\n            }\n            // return \"addFollowerGround,\" + \"addNewCircle,\"+\"apiDeleteSelection\";\n        }else{\n            // return \"addFollowerGround\"\n            console.log(\"show menu ...............\", this.canAddAxisGroup)\n            if(this.canAddAxisGroup){\n                showIds = \"addCbian,addAxisGroup\"\n            }else{\n                showIds = \"addCbian\"\n\n            }\n            \n        }\n\n        return showIds;\n    }\n    \n    // 云盘增加维度\n    addDimTtext(){\n        var node = this.diagram.selection.first();\n        var myDiagram = this.diagram;\n        if(!node) return;\n        if(node.data.subRole != \"dimText\") return;\n        var count = 0\n        var it = node.containingGroup.findSubGraphParts().iterator;\n        var deleteNodes = []\n        var deleteLines = []\n        var curLine = null;\n        var normDim = \"X\",unnormDim = \"Y\", lineRole = \"verticalLine\"\n        if(node.data.dimX == 0){\n            normDim = \"Y\"\n            unnormDim = \"X\"\n            lineRole = \"horizontalLine\"\n        }\n        while (it.next()) {\n            var n = it.value;\n            if(n.data.subRole == \"dimText\" && n.data[\"dim\"+unnormDim] == 0){\n                // if(n.data.order == node.data.order+1){\n                //     locateNode = n;\n                // }\n                count++;\n            }\n            if(n.data.subRole == \"yunpanText\" && n.data[\"order\"+normDim] == node.data[\"dim\"+normDim]){\n                deleteNodes.push(n.data)\n            }\n            if(n.data.category == \"line\"  && n.data.role == lineRole\n            && n.data[\"order\"]  == node.data[\"dim\"+normDim]\n            ){\n                curLine = n\n            }\n            // if(n.data.role == \"xuText\" && n.data.order == node.data.order){\n            //     xuText = n;\n            // }\n            // if(n.data.role == \"centerText\" && n.data.order == node.data.order){\n            //     centerText = n;\n            // }\n\n        }\n        \n        if(count>=30){\n           \n            return;\n        }\n        this.diagram.startTransaction(\"addDimTtext\");\n        it.reset()\n        while (it.next()) {\n            var n = it.value;\n            if(n.data.subRole == \"dimText\" && n.data[\"dim\"+unnormDim] == 0 && n.data[\"dim\"+normDim] > node.data[\"dim\"+normDim]){\n                // if(n.data.order == node.data.order+1){\n                //     locateNode = n;\n                // }\n                n.diagram.model.setDataProperty(n.data, \"dim\"+normDim, n.data[\"dim\"+normDim] + 1)\n                // count++;\n            }\n            if(n.data.subRole == \"yunpanText\" && n.data[\"order\"+normDim] > node.data[\"dim\"+normDim]){\n                n.diagram.model.setDataProperty(n.data, \"order\"+normDim, n.data[\"order\"+normDim] + 1)\n            }\n            if(n.data.category == \"line\"  && n.data.role == lineRole\n            && n.data[\"order\"]  > node.data[\"dim\"+normDim]\n            ){\n                n.diagram.model.setDataProperty(n.data, \"order\", n.data[\"order\"] + 1)\n            }\n            // if(n.data.role == \"xuText\" && n.data.order == node.data.order){\n            //     xuText = n;\n            // }\n            // if(n.data.role == \"centerText\" && n.data.order == node.data.order){\n            //     centerText = n;\n            // }\n\n        }\n        var dimTextData = JSON.parse(JSON.stringify(node.data))\n        delete dimTextData.key;\n        delete dimTextData.__gohashid;\n        if(curLine){\n            var lineData = JSON.parse(JSON.stringify(curLine.data))\n            delete lineData.key;\n            delete lineData.__gohashid;\n            lineData[\"order\"] = lineData[\"order\"]+1;\n            node.diagram.model.addNodeData(lineData)\n        }\n        // Object.assign(dimTextData, {\n\n        // })\n        dimTextData[\"dim\"+normDim] = node.data[\"dim\"+normDim]+1;\n        dimTextData.text = \"维度\" + dimTextData[\"dim\"+normDim]\n        node.diagram.model.addNodeData(dimTextData)\n        // node.diagram.model.removeNodeDataCollection(deleteNodes)\n        node.containingGroup.layout.isOngoing = true;\n        node.containingGroup.layout.isValidLayout = false;\n        this.diagram.commitTransaction(\"addDimTtext\");\n    }\n\n    bringToBackground(){\n        var node = this.diagram.selection.first();\n        var myDiagram = this.diagram;\n        myDiagram.model.startTransaction();\n        myDiagram.model.setDataProperty(node.data, \"layerName\", \"Background\");\n        myDiagram.model.setDataProperty(node.data, \"zOrder\", 1);\n        myDiagram.model.commitTransaction();\n    }\n    bringToForeground(){\n        var node = this.diagram.selection.first();\n        var myDiagram = this.diagram;\n        myDiagram.model.startTransaction();\n        myDiagram.model.setDataProperty(node.data, \"layerName\", \"Foreground\");\n        myDiagram.model.setDataProperty(node.data, \"zOrder\", 999);\n        myDiagram.model.commitTransaction();\n    }\n\n    bringdownLayer(){\n        var node = this.diagram.selection.first();\n        var myDiagram = this.diagram;\n        if(!node) return;\n        var layerName = node.layerName;\n        var toLayerName = layerName\n        var zOrder = node.zOrder;\n        var toZOrder = 1;\n        if(layerName == \"Foreground\"){\n            toLayerName = \"default\"\n        }\n        if(layerName == \"default\"){\n            toLayerName = \"Background\"\n        }\n        if(layerName == \"Background\"){\n            toLayerName = \"Background\"\n        }\n        myDiagram.model.startTransaction();\n        myDiagram.model.setDataProperty(node.data, \"layerName\", toLayerName);\n        myDiagram.model.setDataProperty(node.data, \"zOrder\", toZOrder);\n        myDiagram.model.commitTransaction();\n    }\n    bringupLayer(){\n        var node = this.diagram.selection.first();\n        var myDiagram = this.diagram;\n        if(!node) return;\n        var layerName = node.layerName;\n        var toLayerName = layerName\n        var zOrder = node.zOrder;\n        var toZOrder = 999;\n        if(layerName == \"Background\"){\n            toLayerName = \"default\"\n        }\n        if(layerName == \"default\"){\n            toLayerName = \"Foreground\"\n        }\n        if(layerName == \"Foreground\"){\n            toLayerName = \"Foreground\"\n        }\n        myDiagram.model.startTransaction();\n        myDiagram.model.setDataProperty(node.data, \"layerName\", toLayerName);\n        myDiagram.model.setDataProperty(node.data, \"zOrder\", toZOrder);\n        myDiagram.model.commitTransaction();\n    }\n\n    bringToLayer(layerName, zOrder) {\n\n            var node = myDiagram.selection.first();\n            myDiagram.model.startTransaction();\n            if (node) {\n                if (layerName == null) {\n                    layerName = node.data.layerName ? node.data.layerName : \"\";\n                    var tempData = myDiagram.model.copyNodeData(node.data);\n                    myDiagram.model.removeNodeData(node.data);\n                    myDiagram.model.addNodeData(tempData);\n\n                } else {\n                    myDiagram.model.setDataProperty(node.data, \"layerName\", layerName);\n                }\n            }\n            myDiagram.model.commitTransaction();\n        }\n\n    showRect(){\n        var node = this.diagram.selection.first()\n        console.log(\"show shape\")\n        if(!node) return;\n        if(node.data.category != \"yunGroup\") return;\n        node.diagram.startTransaction(\"showRect\")\n        node.diagram.model.setDataProperty(node.data, \"showShape\", true)\n        var it = node.findSubGraphParts().iterator;\n        while (it.next()) {\n            var n = it.value;\n            if(n.data.role == \"background\"){\n                node.diagram.model.setDataProperty(n.data, \"visible\", true)\n            }\n        }\n        node.layout.isValidLayout = false\n        node.diagram.commitTransaction(\"showRect\")\n    }\n    hideRect(){\n        var node = this.diagram.selection.first()\n        if(!node) return;\n        if(node.data.category != \"yunGroup\") return;\n        node.diagram.startTransaction(\"hideRect\")\n        node.diagram.model.setDataProperty(node.data, \"showShape\", false)\n        var it = node.findSubGraphParts().iterator;\n        while (it.next()) {\n            var n = it.value;\n            if(n.data.role == \"background\"){\n                node.diagram.model.setDataProperty(n.data, \"visible\", true)\n                node.diagram.model.setDataProperty(n.data, \"stroke\", \"rgba(255,0,0,0)\")\n            }\n        }\n        node.diagram.commitTransaction(\"hideRect\")\n    }\n    autoShowRedline(){\n        var node = this.diagram.selection.first()\n        if(!node) return;\n        if(node.data.category != \"yunGroup\") return;\n        node.diagram.startTransaction(\"beginSpark\")\n        node.diagram.model.setDataProperty(node.data, \"beginSpark\", \"line\")\n        node.diagram.commitTransaction(\"beginSpark\")\n    }\n    offShowRedLine(){\n        var node = this.diagram.selection.first()\n        if(!node) return;\n        if(node.data.category != \"yunGroup\") return;\n        node.diagram.startTransaction(\"offShowRedLine\")\n        node.diagram.model.setDataProperty(node.data, \"beginSpark\", undefined)\n        node.diagram.commitTransaction(\"offShowRedLine\")\n    }\n    //快捷键\n    dokeyDownFn (e) {\n        console.log('dspirallllllllllllllllllllllllll:');\n        var diagram = this.diagram\n        var that = this;\n        var myDiagram = this.diagram;\n        var e = myDiagram.lastInput;\n        var cmd = myDiagram.commandHandler;\n        if (e.event.altKey) {\n            if (e.key == \"Q\") {\n                autoLayoutAll();\n                return;\n            } else if (e.key == \"R\") {\n                centerNode();\n                return;\n            } else if (e.key == \"C\") {\n                centerCurrentNode();\n                return;\n            } else if (e.key == \"A\") {\n                zoomToFit();\n                return;\n            }\n        }\n        if (e.event.keyCode >= 65 && e.event.keyCode <= 90 && !e.event.altKey && !e.event.ctrlKey && !e.event.shiftKey) {\n            e.bubbles = false;\n            var node = myDiagram.selection.first()\n            if(!node) return;\n            if(node.data.category == \"wave\" && node.containingGroup && node.containingGroup.data.textAngle == \"horizontal\" && node.containingGroup.data.centerTextAngle == \"independent\"){\n                node.findObject(\"TEXT\").visible = true;\n                var centerText = node.diagram.findNodeForKey(node.data.centerText)\n                if(centerText){\n                  centerText.visible = false;\n                }\n            }\n            setTimeout(()=>{\n                this.selectText(e, diagram);\n            },100)\n            return true;\n    \n        }\n        // console.log('catched in dokeydown ' + e.event.keyCode);\n        // console.log('catched in dokeydown ' + e.key);\n        if (e.event.keyCode === 13) { // could also check for e.control or e.shift\n            console.log(\"dspiral add Follower\")\n            var node = myDiagram.selection.first();\n            if (node && node.category == \"wave\") {\n                // this.addFollower(e, true);\n                this.addOlive()\n            }\n        } else if (e.event.keyCode === 9) { // could also check for e.control or e.shift\n            this.addFollower(true);\n        } else if (e.key === \"t\") { // could also check for e.control or e.shift\n            if (cmd.canCollapseSubGraph()) {\n                cmd.collapseSubGraph();\n            } else if (cmd.canExpandSubGraph()) {\n                cmd.expandSubGraph();\n            }\n        } else if (e.key == \"Del\") {\n            e.diagram.commandHandler.deleteSelection();\n        } else if (e.event.keyCode == 113) { //F2,不知道为什么失效了，重新赋予功能\n            // selectText();\n            this.selectText(e, diagram);\n        } else if (e.event.keyCode == 37) { //左\n            this.moveWithinNodes('left', diagram);\n            // go.CommandHandler.prototype.doKeyDown.call(cmd);\n        } else if (e.event.keyCode == 38) { //上\n            this.moveWithinNodes('up', diagram);\n            // go.CommandHandler.prototype.doKeyDown.call(cmd);\n        } else if (e.event.keyCode == 39) { //右\n            this.moveWithinNodes('right', diagram);\n            // go.CommandHandler.prototype.doKeyDown.call(cmd);\n        } else if (e.event.keyCode == 40) { //下\n            this.moveWithinNodes('down', diagram);\n            // go.CommandHandler.prototype.doKeyDown.call(cmd);\n        } else {\n            // call base method with no arguments\n            go.CommandHandler.prototype.doKeyDown.call(cmd);\n        }\n        e.bubbles = false; //阻止事件冒泡到dom\n    }\n\n    findPrevOlive(node){\n        if(node.data.order <= 1){\n            return null;\n        }\n        var prenode = null;\n        var it = node.containingGroup.findSubGraphParts().iterator;\n        while (it.next()) {\n            var n = it.value;\n            if(n.data.category == \"wave\"){\n                if(n.data.order == node.data.order-1){\n                    prenode = n;\n                    break;\n                }\n            }\n        }\n        return prenode;\n    }\n    findNextOlive(node){\n        var nextnode = null;\n        var it = node.containingGroup.findSubGraphParts().iterator;\n        while (it.next()) {\n            var n = it.value;\n            if(n.data.role == \"waveTail\"){\n                continue;\n            }\n            if(node.data.category == \"autoText\"){\n                if(n.data.role == \"shiText\"){\n                    if(n.data.order == node.data.order+1){\n                        nextnode = n;\n                        break;\n                    }\n                }\n            }else{\n                if(n.data.category == \"wave\"){\n                    if(n.data.order == node.data.order+1){\n                        nextnode = n;\n                        break;\n                    }\n                }\n            }\n\n        }\n        return nextnode;\n    }\n\n    findUpOlive(node){\n        var upnode = null;\n        if(node.data.category == \"wave\"){\n            if(node.data.order % 2 != 0){\n                upnode = this.diagram.findNodeForKey(node.data.xuText)\n            }else{\n                upnode = this.diagram.findNodeForKey(node.data.shiText)\n            }\n        }\n        if(node.data.role == \"xuText\"){\n            if(node.data.order % 2 != 0){\n                // upnode = this.diagram.findNodeForKey(node.data.xuText)\n            }else{\n                upnode = this.diagram.findNodeForKey(node.data.olive)\n            }\n        }\n        if(node.data.role == \"shiText\"){\n            if(node.data.order % 2 != 0){\n                upnode = this.diagram.findNodeForKey(node.data.olive)\n            }else{\n                // upnode = this.diagram.findNodeForKey(node.data.olive)\n            }\n        }\n        return upnode;        \n    }\n\n    findDownOlive(node){\n        var downnode = null;\n        if(node.data.category == \"wave\"){\n            if(node.data.order % 2 != 0){\n                downnode = this.diagram.findNodeForKey(node.data.shiText)\n            }else{\n                downnode = this.diagram.findNodeForKey(node.data.xuText)\n            }\n        }\n        if(node.data.role == \"xuText\"){\n            if(node.data.order % 2 != 0){\n                downnode = this.diagram.findNodeForKey(node.data.olive)\n            }else{\n                // downnode = this.diagram.findNodeForKey(node.data.olive)\n            }\n        }\n        if(node.data.role == \"shiText\"){\n            if(node.data.order % 2 != 0){\n                // downnode = this.diagram.findNodeForKey(node.data.olive)\n            }else{\n                downnode = this.diagram.findNodeForKey(node.data.olive)\n            }\n        }\n        return downnode;\n    }\n\n    moveWithinNodes(direction) {\n        var myDiagram = this.diagram;\n        var node = myDiagram.selection.first();\n        if(!node){\n            return;\n        }\n        // 火花矩阵文字\n        if(node.data.category == \"autoText\" && node.data.subRole == \"coreText\"){\n            if(!(node.containingGroup && node.containingGroup.data.category == \"yunGroup\" && node.containingGroup.data.category == \"yunpanGroup\")){\n                return;\n            }\n            var nextNode;\n            var centerOrderX = 30000\n            var centerOrderY = 30000\n            if(node.containingGroup.__yunPointsX && node.containingGroup.__yunPointsY){\n                centerOrderX = (node.containingGroup.__yunPointsX.length+1)/2\n                centerOrderY = (node.containingGroup.__yunPointsY.length+1)/2\n\n            }\n            switch (direction) {\n                case 'left':\n                    if(node.data.orderX == centerOrderX){\n                        return;\n                    } \n                    var it = node.containingGroup.findSubGraphParts().iterator;\n                    while (it.next()) {\n                        var n = it.value;\n                        if(n.data.subRole == \"coreText\" && n.data.dimKey == node.data.dimKey){\n                            if(Number(n.data.orderX) == Number(node.data.orderX)-1){\n                                nextNode = n;\n                                break;\n                            }\n                        }\n                    }\n                    break;\n                case 'up':\n                    if(node.data.orderY == centerOrderY){\n                        return;\n                    } \n                    var it = node.containingGroup.findSubGraphParts().iterator;\n                    while (it.next()) {\n                        var n = it.value;\n                        if(n.data.subRole == \"coreText\" && n.data.dimKey == node.data.dimKey){\n                            if(Number(n.data.orderY) == Number(node.data.orderY)+1){\n                                nextNode = n;\n                                break;\n                            }\n                        }\n                    }\n                    break;\n                case 'right':\n                    if(node.data.orderX == centerOrderX){\n                        return;\n                    } \n                    var it = node.containingGroup.findSubGraphParts().iterator;\n                    while (it.next()) {\n                        var n = it.value;\n                        if(n.data.subRole == \"coreText\" && n.data.dimKey == node.data.dimKey){\n                            if(Number(n.data.orderX) == Number(node.data.orderX)+1){\n                                nextNode = n;\n                                break;\n                            }\n                        }\n                    }\n                    break;\n                case 'down':\n                    if(node.data.orderY == centerOrderY){\n                        return;\n                    } \n                    var it = node.containingGroup.findSubGraphParts().iterator;\n                    while (it.next()) {\n                        var n = it.value;\n                        if(n.data.subRole == \"coreText\" && n.data.dimKey == node.data.dimKey){\n                            if(Number(n.data.orderY) == Number(node.data.orderY)-1){\n                                nextNode = n;\n                                break;\n                            }\n                        }\n                    }\n                    break;\n            }\n            if (nextNode) {\n                myDiagram.select(nextNode);\n            }\n        }\n\n        if(node.data.category == \"wave\" || node.data.role == \"shiText\" || node.data.role == \"xuText\"){\n            switch (direction) {\n                case 'left':\n                    var prevNode = this.findPrevOlive(node)\n                    if (prevNode) {\n                        myDiagram.select(prevNode);\n                    }\n                    break;\n                case 'up':\n                    var upNode = this.findUpOlive(node)\n                    if (upNode) {\n                        myDiagram.select(upNode);\n                    }\n                    break;\n                case 'right':\n                    var nextNode = this.findNextOlive(node)\n                    if (nextNode) {\n                        myDiagram.select(nextNode);\n                    }\n                    break;\n                case 'down':\n                    var downNode = this.findDownOlive(node)\n                    if (downNode) {\n                        myDiagram.select(downNode);\n                    }\n                    break;\n            }\n        }\n    }\n    // 拓扑分析\n    drillAnalyze(){\n        console.log(\"拓扑分析\")\n        var node = this.diagram.selection.first();\n        if(!node) return;\n        // 如果当前节点包含有figure属性\n        if(node.data.figure != null){\n            if(this.openFigure){\n                this.openFigure({\n                    figure: node.data.figure,\n                    title: node.data.text,\n                    key: node.data.key,\n                    node: node\n                })\n            }\n        }else{\n            if(this.createFigure){\n                var figure = this.createFigure({\n                    title: node.data.text||\"未命名拓扑\",\n                    key: node.data.key,\n                    node: node\n                })\n                // if(figure){\n                //     node.data.figure = figure;\n                // }\n            }\n        }\n\n    }\n}\n\n// export default Trtd;\nmodule.exports = Trtd;\n\n\n// WEBPACK FOOTER //\n// ./src/diagram/dspiral.js","var $ = go.GraphObject.make\r\nvar svg = require('../datas/svg.template');\r\n\r\n// 返回svg节点\r\nmodule.exports = function createArcNodeTemplate (diagram) {\r\n    var properties = {\r\n        figure: \"Circle\",\r\n        fill: \"white\",\r\n        strokeWidth: 2,\r\n        stroke: \"black\",\r\n        fontSize: 15,\r\n        font: \"sans-serif\"\r\n    };\r\n    return $(go.Node, \"Spot\",{\r\n                name: \"NODE\",\r\n                \"_controlExpand\": true,\r\n                layerName: \"Background\",\r\n                locationSpot: go.Spot.Center,\r\n                resizeCellSize: new go.Size(10, 10),\r\n                locationObjectName: \"SHAPE\",\r\n                resizable: true,\r\n                resizeObjectName: \"SHAPE\", // user can resize the Shape\r\n                rotatable: true,\r\n                rotateObjectName: \"SHAPE\", // rotate the Shape without rotating the label\r\n                click: function(e, node){\r\n                    // console.log(node.data);\r\n                },\r\n                doubleClick: function (e, node) {\r\n                    doubleClickCreateNodeType(e);\r\n                },\r\n                selectable: true,\r\n                selectionObjectName:\"SHAPE\",\r\n                movable: true,\r\n                angle: 0,\r\n                //toMaxLinks: 1,\r\n                layoutConditions: go.Part.LayoutStandard,\r\n                //layoutConditions:~go.Part.LayoutAdded,\r\n                // fromLinkable: true, toLinkable: true,\r\n                alignment: go.Spot.Center,\r\n                alignmentFocus: go.Spot.Center,\r\n                resizeAdornmentTemplate: diagram.__trtd.nodeResizeAdornmentTemplate(),\r\n                // rotateAdornmentTemplate: nodeRotateAdornmentTemplate,\r\n                contextMenu: diagram.__trtd.getNodeContextMenu(),\r\n                // contextMenu: $(go.Adornment),\r\n            },\r\n            new go.Binding(\"location\", \"loc\", go.Point.parse).makeTwoWay(go.Point.stringify),\r\n            $(go.Shape, {\r\n                name: \"SHAPE\",\r\n                // geometryString: \"M 0,0 a50,50 0 1,1 100,0\",\r\n                // geometryString: \"M 0 50 L 100 100 L 100 200\",\r\n                fill: \"white\",\r\n                strokeWidth: 3, \r\n                stroke: \"black\",\r\n                minSize: new go.Size(50, 50),\r\n                },\r\n                new go.Binding(\"fill\", \"fill\").makeTwoWay(function(v){\r\n                    return v;\r\n                }),\r\n                new go.Binding(\"stroke\", \"stroke\").makeTwoWay(function(v){\r\n                    return v;\r\n                }),\r\n                new go.Binding(\"strokeWidth\", \"strokeWidth\").makeTwoWay(function(v){\r\n                    return v;\r\n                }),\r\n                new go.Binding(\"desiredSize\", \"desiredSize\", function(v) {\r\n                    // var va = (v / 2) * Math.sqrt(2);\r\n                    // console.log(\"desiredSize\",v)\r\n                    return v\r\n                }).ofObject(\"BACKGROUND\"),\r\n                new go.Binding(\"angle\", \"angle\", function(v) {\r\n                    // var va = (v / 2) * Math.sqrt(2);\r\n                    // console.log(\"desiredSize\",v)\r\n                    return v\r\n                }).ofObject(\"BACKGROUND\"),\r\n                new go.Binding(\"geometryString\", \"geometryString\", function(v) {\r\n                    return v;\r\n                }),\r\n            ),\r\n            $(go.Shape, \"Rectangle\",{\r\n                name: 'BACKGROUND',\r\n                fill: \"rgba(1,1,1,0)\",\r\n                // width: 450,\r\n                // height: 450,\r\n                angle: 0,\r\n                stroke: \"rgba(1,1,1,0)\",\r\n                // minSize: new go.Size(50, 50),\r\n                },\r\n                new go.Binding(\"desiredSize\", \"desiredSize\", function(v, d) {\r\n                    // console.log(\"vd m\", v, d )\r\n                    if(!v) return d.part.findObject(\"SHAPE\").measuredBounds.size;\r\n                    return go.Size.parse(v)\r\n                }).makeTwoWay(function(v) {\r\n                    return go.Size.stringify(v)\r\n                }),\r\n                // new go.Binding(\"angle\", \"angle\").makeTwoWay(function(v){\r\n                //     return v;\r\n                // }),\r\n                // new go.Binding(\"desiredSize\", \"height\", function(v) {\r\n                //     var radius = parseInt(v ? v : 100);\r\n                //     var size = new go.Size(radius, radius);\r\n                //     return size;\r\n                // }).makeTwoWay(function(v) {\r\n                //     return v.height;\r\n                // }),\r\n                // background: \"#555\",\r\n                // stroke: \"red\"}\r\n            ),\r\n    );\r\n}\r\n\r\nfunction doubleClickCreateNodeType(e){\r\n    // console.log('eeeeeeeeeeeeeee:', e);\r\n    var myDiagram = e.diagram;\r\n    myDiagram.startTransaction();\r\n    var text = { text: \"双击编辑文本\", category: 'text' };\r\n    text.loc = go.Point.stringify(myDiagram.lastInput.documentPoint);\r\n    myDiagram.model.addNodeData(text);\r\n    myDiagram.commitTransaction()\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/nodeTemplate/createArcNodeTemplate.js","var $ = go.GraphObject.make\r\nvar svg = require('../datas/svg.template');\r\n\r\n// 返回svg节点\r\nmodule.exports = function createArcNodeTemplate (diagram) {\r\n    var properties = {\r\n        figure: \"Circle\",\r\n        fill: \"white\",\r\n        strokeWidth: 2,\r\n        stroke: \"black\",\r\n        fontSize: 15,\r\n        font: \"sans-serif\"\r\n    };\r\n    return $(go.Node, \"Spot\",{\r\n                name: \"NODE\",\r\n                zOrder: 10,\r\n                layerName: \"default\",\r\n                // isLayoutPositioned: false,\r\n                // defaultStretch: go.GraphObject.Horizontal,\r\n                padding: 0,\r\n                \"_controlExpand\": true,\r\n                // layerName: \"Foreground\",\r\n                locationSpot: go.Spot.LeftCenter,\r\n                resizeCellSize: new go.Size(1, 1),\r\n                locationObjectName: \"SHAPE\",\r\n                resizable: true,\r\n                resizeObjectName: \"SHAPE\", // user can resize the Shape\r\n                rotatable: true,\r\n                mouseDragEnter: function(e, obj) {\r\n                    console.log(\"mouseDragEnter line\")\r\n                },\r\n                mouseDrop: function(e, obj) {\r\n                    var node = obj.part;\r\n                    console.log(\"mouseDropmouseDropmouseDropmouseDrop line\")\r\n                },\r\n                // rotateObjectName: \"SHAPE\", // rotate the Shape without rotating the label\r\n                click: (e, node)=>{\r\n                    console.log(node.data)\r\n                },\r\n                deletable: false,\r\n                doubleClick: function (e, node) {\r\n                    // doubleClickCreateNodeType(e);\r\n                    if(!node.selectable){\r\n                        var part = e.diagram.findObjectAt(e.documentPoint,\r\n                          // Navigation function\r\n                            function(x) { return x.part; },\r\n                            // Because of the navigation function, x will always be a Part.\r\n                            function(x) { return x.canSelect() && x.data.category==\"wave\"; }\r\n                        )\r\n                        if(part){\r\n                            e.diagram.select(part)\r\n                            part.doubleClick(e, part)\r\n                        }\r\n                        // var it = parts.iterator;\r\n                        // while (it.next()) {\r\n                        //   console.log(\"#\" + it.key + \" is \" + it.value);\r\n                        // }\r\n                        \r\n                        console.log(\"partpart...........\",part)\r\n                    }\r\n                },\r\n                selectable: true,\r\n                selectionObjectName:\"SHAPE\",\r\n                movable: true,\r\n                angle: 0,\r\n                //toMaxLinks: 1,\r\n                layoutConditions: go.Part.LayoutStandard,\r\n                //layoutConditions:~go.Part.LayoutAdded,\r\n                // fromLinkable: true, toLinkable: true,\r\n                alignment: go.Spot.Center,\r\n                alignmentFocus: go.Spot.Center,\r\n                resizeAdornmentTemplate: diagram.__trtd.nodeResizeAdornmentTemplate(),\r\n                // rotateAdornmentTemplate: nodeRotateAdornmentTemplate,\r\n                contextMenu: $(go.Adornment),\r\n                // contextMenu: $(go.Adornment),\r\n            },\r\n            new go.Binding(\"zOrder\", \"zOrder\").makeTwoWay(),\r\n            new go.Binding(\"selectable\", \"selectable\").makeTwoWay(),\r\n            new go.Binding(\"locationSpot\", \"locationSpot\", function(v){\r\n                return go.Spot.parse(v)\r\n            }).makeTwoWay(function(v){\r\n                return go.Spot.stringify(v)\r\n            }),\r\n            new go.Binding(\"movable\", \"movable\").makeTwoWay(),\r\n            new go.Binding(\"visible\", \"visible\").makeTwoWay(),\r\n            new go.Binding(\"deletable\", \"deletable\").makeTwoWay(),\r\n            new go.Binding(\"location\", \"loc\", go.Point.parse).makeTwoWay(go.Point.stringify),\r\n            new go.Binding(\"angle\", \"angle\").makeTwoWay(function(v,m,a){\r\n                // console.log(\"wwwwwwwwwwwwwwwww:\",v,\" m:\",m.angle,\" a:\",a)\r\n                return v\r\n                a.startTransaction()\r\n                var group = a.findNodeDataForKey(m.group)\r\n                // a.setDataProperty(group, \"angle\", v)\r\n                for(var i=0;i<a.nodeDataArray.length-1;i++){\r\n                    if(a.nodeDataArray[i].group == group.key && a.nodeDataArray[i].category!=\"line\"){\r\n                        var nodeData = a.nodeDataArray[i]\r\n                        var lineLoc = go.Point.parse(m.loc)\r\n                        var nodeLoc = go.Point.parse(nodeData.loc)\r\n                        console.log('111111111')\r\n                        // distanceSquaredPoint\r\n                        var cp = lineLoc,_rotatePoint = lineLoc // 旋转中心\r\n                        \r\n                        var relativeLocation = nodeLoc.copy().subtract(lineLoc) // 原来的相对位置\r\n                        var newangle = v;\r\n                        var originalAngle = m.angle||0\r\n                        var ang = newangle - originalAngle;  // 直线旋转的角度\r\n                        // var cp = _rotatePoint; \r\n                        var angle = (nodeData.angle||0) + ang; // 橄榄旋转的角度\r\n                        var loc = cp.copy().add(relativeLocation);\r\n                        var dir = cp.directionPoint(loc);\r\n                        var newrad = (ang + dir) * (Math.PI / 180);\r\n                        var centerLocationOffset = lineLoc.copy().subtract(nodeLoc);\r\n                        // var locoffset = centerLocationOffset.copy();\r\n                        // locoffset.rotate(ang);\r\n                        var dist = Math.sqrt(cp.distanceSquaredPoint(loc));\r\n                        var offset = new go.Point(0,0).subtract(cp.copy())\r\n                        var cpOrigin = new go.Point(0,0)\r\n                        var nodeOrigin = nodeLoc.copy().offset(offset.x, offset.y)\r\n                        var newNodeOrigin = nodeOrigin.rotate(ang)\r\n                        var newNodeLoc = newNodeOrigin.copy().offset(-offset.x, -offset.y)\r\n                        console.log(\"newNodeLoc\", newNodeLoc)\r\n                        // var location = new go.Point(cp.x + dist * Math.cos(newrad),\r\n                        //     cp.y + dist * Math.sin(newrad)).subtract(locoffset); \r\n                        a.setDataProperty(nodeData, \"loc\", go.Point.stringify(newNodeLoc))                                   \r\n                        a.setDataProperty(nodeData, \"angle\", v)\r\n                    }\r\n                }\r\n                // var group = a.findNodeDataForKey(m.group)\r\n                a.setDataProperty(group, \"angle\", v)\r\n                a.commitTransaction()\r\n                return v;\r\n            }),\r\n\r\n                $(go.Shape, 'LineH', {\r\n                    name: \"SHAPE\",\r\n                    alignment: go.Spot.Left,alignmentFocus: go.Spot.Left,\r\n                    stretch: go.GraphObject.Horizontal,\r\n                    strokeCap: \"round\",\r\n                    // geometryString: \"M 0,0 a50,50 0 1,1 100,0\",\r\n                    // geometryString: \"M 0 50 L 100 100 L 100 200\",\r\n                    // margin: 10,\r\n                    strokeDashArray: [0, 0],\r\n                    width: 300,\r\n                    height:20,\r\n                    margin:0,\r\n                    fill: \"white\",\r\n                    strokeWidth: 3, \r\n                    stroke: \"black\",\r\n                    minSize: new go.Size(NaN, 10),\r\n                    maxSize: new go.Size(NaN, 20)\r\n                    },\r\n                    // $(go.TextBlock, \"alignment: Left\", { row: 0, column: 0 }),\r\n                    new go.Binding(\"fill\", \"fill\").makeTwoWay(function(v){\r\n                        return v;\r\n                    }),\r\n                    new go.Binding(\"stroke\", \"stroke\").makeTwoWay(function(v){\r\n                        return v;\r\n                    }),\r\n                    new go.Binding(\"strokeDashArray\", \"strokeDashArray\", function(v){\r\n                        return JSON.parse(v)\r\n                    }).makeTwoWay(function(v){\r\n                        return  JSON.stringify(v);\r\n                    }),\r\n                    new go.Binding(\"strokeWidth\", \"strokeWidth\").makeTwoWay(function(v){\r\n                        return v;\r\n                    }),\r\n                    // new go.Binding(\"width\", \"width\").makeTwoWay(),\r\n                    // new go.Binding(\"height\", \"height\").makeTwoWay(),\r\n                    new go.Binding(\"desiredSize\", \"desiredSize\", function(v, d) {\r\n                        // console.log(\"vd m\", v, d )\r\n                        if(!v) return d.part.findObject(\"SHAPE\").measuredBounds.size;\r\n                        return go.Size.parse(v)\r\n                    }).makeTwoWay(function(v) {\r\n                        return go.Size.stringify(v)\r\n                    }),\r\n\r\n                    // new go.Binding(\"geometryString\", \"geometryString\", function(v) {\r\n                    //     return v;\r\n                    // }),\r\n                ),\r\n                $(go.Shape, {\r\n                    name: \"BeginArrow\",\r\n                    visible: false,\r\n                    margin:0,\r\n                    alignment: new go.Spot(0,0.5,10,0),\r\n                     alignmentFocus: go.Spot.Right,\r\n                    geometryString: \"M 0,-4 l -8,4 8,4\",\r\n                    strokeCap: \"round\",\r\n                    // geometryString: \"M 0 50 L 100 100 L 100 200\",\r\n                    fill: \"black\",\r\n                    width:10,\r\n                    height:15,\r\n\r\n                    strokeWidth: 3, \r\n                    stroke: \"black\",\r\n                    // minSize: new go.Size(50, 50),\r\n                    },\r\n                    new go.Binding(\"fill\", \"stroke\",function(v){\r\n                        return v;\r\n                    }),\r\n                    new go.Binding(\"stroke\", \"stroke\").makeTwoWay(function(v){\r\n                        return v;\r\n                    }),\r\n                    new go.Binding(\"strokeWidth\", \"strokeWidth\").makeTwoWay(function(v){\r\n                        return v;\r\n                    }),\r\n                    new go.Binding(\"visible\", \"showBeginArrow\"),\r\n                    // new go.Binding(\"angle\", \"angle\", function(v) {\r\n                    //     // var va = (v / 2) * Math.sqrt(2);\r\n                    //     // console.log(\"desiredSize\",v)\r\n                    //     return v\r\n                    // }).ofObject(\"SHAPE\"),\r\n                    // new go.Binding(\"desiredSize\", \"desiredSize\", function(v) {\r\n                    //     // var va = (v / 2) * Math.sqrt(2);\r\n                    //     // console.log(\"desiredSize\",v)\r\n                    //     return v\r\n                    // }).ofObject(\"BACKGROUND\"),\r\n                    // new go.Binding(\"angle\", \"angle\", function(v) {\r\n                    //     // var va = (v / 2) * Math.sqrt(2);\r\n                    //     // console.log(\"desiredSize\",v)\r\n                    //     return v\r\n                    // }).ofObject(\"BACKGROUND\"),\r\n                    // new go.Binding(\"geometryString\", \"geometryStringArrow\", function(v) {\r\n                    //     return v;\r\n                    // }),\r\n                ),\r\n                $(go.Shape, {\r\n                    name: \"EndArrow\",\r\n                    visible: false,\r\n                    margin:0,\r\n                    alignment: new go.Spot(1,0.5,0,0),\r\n                     alignmentFocus: go.Spot.Right,\r\n                    geometryString: \"M 0,-4 l 8,4 -8,4\",\r\n                    strokeCap: \"round\",\r\n                    // geometryString: \"M 0 50 L 100 100 L 100 200\",\r\n                    fill: \"black\",\r\n                    width:10,\r\n                    height:15,\r\n\r\n                    strokeWidth: 3, \r\n                    stroke: \"black\",\r\n                    // minSize: new go.Size(50, 50),\r\n                    },\r\n                    new go.Binding(\"fill\", \"stroke\",function(v){\r\n                        return v;\r\n                    }),\r\n                    new go.Binding(\"stroke\", \"stroke\").makeTwoWay(function(v){\r\n                        return v;\r\n                    }),\r\n                    new go.Binding(\"strokeWidth\", \"strokeWidth\").makeTwoWay(function(v){\r\n                        return v;\r\n                    }),\r\n                    new go.Binding(\"visible\", \"showEndArrow\"),\r\n                    // new go.Binding(\"angle\", \"angle\", function(v) {\r\n                    //     // var va = (v / 2) * Math.sqrt(2);\r\n                    //     // console.log(\"desiredSize\",v)\r\n                    //     return v\r\n                    // }).ofObject(\"SHAPE\"),\r\n                    // new go.Binding(\"desiredSize\", \"desiredSize\", function(v) {\r\n                    //     // var va = (v / 2) * Math.sqrt(2);\r\n                    //     // console.log(\"desiredSize\",v)\r\n                    //     return v\r\n                    // }).ofObject(\"BACKGROUND\"),\r\n                    // new go.Binding(\"angle\", \"angle\", function(v) {\r\n                    //     // var va = (v / 2) * Math.sqrt(2);\r\n                    //     // console.log(\"desiredSize\",v)\r\n                    //     return v\r\n                    // }).ofObject(\"BACKGROUND\"),\r\n                    // new go.Binding(\"geometryString\", \"geometryStringArrow\", function(v) {\r\n                    //     return v;\r\n                    // }),\r\n                ),\r\n                $(go.Shape, {\r\n                    name: \"Arrow\",\r\n                    visible: true,\r\n                    margin:0,\r\n                    alignment: new go.Spot(1,0.5,5,0),\r\n                     alignmentFocus: go.Spot.Right,\r\n                    geometryString: \"F M 158,-4 l 8,4 -8,4 2,-4 z\",\r\n                    strokeCap: \"round\",\r\n                    // geometryString: \"M 0 50 L 100 100 L 100 200\",\r\n                    fill: \"black\",\r\n                    width:20,\r\n                    height:15,\r\n\r\n                    strokeWidth: 3, \r\n                    stroke: \"black\",\r\n                    // minSize: new go.Size(50, 50),\r\n                    },\r\n                    new go.Binding(\"fill\", \"stroke\",function(v){\r\n                        return v;\r\n                    }),\r\n                    new go.Binding(\"stroke\", \"stroke\").makeTwoWay(function(v){\r\n                        return v;\r\n                    }),\r\n                    new go.Binding(\"strokeWidth\", \"strokeWidth\").makeTwoWay(function(v){\r\n                        return v;\r\n                    }),\r\n                    new go.Binding(\"visible\", \"showArrow\"),\r\n                    // new go.Binding(\"angle\", \"angle\", function(v) {\r\n                    //     // var va = (v / 2) * Math.sqrt(2);\r\n                    //     // console.log(\"desiredSize\",v)\r\n                    //     return v\r\n                    // }).ofObject(\"SHAPE\"),\r\n                    // new go.Binding(\"desiredSize\", \"desiredSize\", function(v) {\r\n                    //     // var va = (v / 2) * Math.sqrt(2);\r\n                    //     // console.log(\"desiredSize\",v)\r\n                    //     return v\r\n                    // }).ofObject(\"BACKGROUND\"),\r\n                    // new go.Binding(\"angle\", \"angle\", function(v) {\r\n                    //     // var va = (v / 2) * Math.sqrt(2);\r\n                    //     // console.log(\"desiredSize\",v)\r\n                    //     return v\r\n                    // }).ofObject(\"BACKGROUND\"),\r\n                    // new go.Binding(\"geometryString\", \"geometryStringArrow\", function(v) {\r\n                    //     return v;\r\n                    // }),\r\n                )\r\n    )\r\n\r\n}\r\n\r\nfunction doubleClickCreateNodeType(e){\r\n    // console.log('eeeeeeeeeeeeeee:', e);\r\n    var myDiagram = e.diagram;\r\n    myDiagram.startTransaction();\r\n    var text = { text: \"双击编辑文本\", category: 'text' };\r\n    text.loc = go.Point.stringify(myDiagram.lastInput.documentPoint);\r\n    myDiagram.model.addNodeData(text);\r\n    myDiagram.commitTransaction()\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/nodeTemplate/createLineNodeTemplate.js","var $ = go.GraphObject.make\r\nvar svg = require('../datas/svg.template');\r\n\r\n\r\nfunction makeWave(tx, ty, curviness, repeat) {\r\n    // if (curviness === 0) {\r\n    //   var geo = new go.Geometry(go.Geometry.Line);\r\n    //   geo.startX = 0;\r\n    //   geo.startY = 0;\r\n    //   geo.endX = tx;\r\n    //   geo.endY = ty;\r\n    //   return geo;\r\n    // }\r\n    if(tx == null) tx = 300;\r\n    if(ty == null) ty = 400;\r\n    if(!repeat) repeat = 1\r\n    var ang = go.Point.direction(0, 0, tx, ty);\r\n    var rad = (ang / 180 * Math.PI) + Math.PI/2;\r\n    var offx = curviness * Math.cos(rad);\r\n    var offy = curviness * Math.sin(rad);\r\n    var geo = new go.Geometry();\r\n    var sx = tx/repeat; var sy = ty/repeat;\r\n    var x = 0; var y = 0;\r\n    var fig = new go.PathFigure(x, y, false);\r\n    for (var i = 0; i < repeat; i++) {\r\n      var odd = (i % 2 === 1);\r\n      fig.add(new go.PathSegment(go.PathSegment.Bezier,\r\n                                  x + sx, y + sy,\r\n                                  x + offx * (odd ? -1 : 1), y + offy * (odd ? -1 : 1),\r\n                                  x + sx + offx * (odd ? -1 : 1), y + sy + offy * (odd ? -1 : 1)));\r\n      x += sx;\r\n      y += sy;\r\n    }\r\n    geo.add(fig);\r\n    return geo;\r\n  }\r\n\r\n  function computeGeo1(data, shape, curviness) {\r\n    // var curviness = 30;\r\n    if(!curviness) curviness = 30;\r\n    // if (shape.stroke === \"red\") curviness = -30;\r\n    // else if (shape.stroke === \"green\") curviness = 0;\r\n    var geo = makeWave(data.x, data.y, curviness, data.repeat);\r\n    var offset = geo.normalize();\r\n    shape.position = new go.Point(-offset.x, -offset.y);\r\n    shape.isGeometryPositioned = true;\r\n    return geo;\r\n  }\r\n\r\n  function computeGeo(data, shape){\r\n    return go.Geometry.parse(\"M 0,80 A100,80 0 1 1 200,80\")\r\n  }\r\n  function computeGeo2(data, shape){\r\n    var geo =  go.Geometry.parse(\"M 0,80 A100,80 0 1 0 200,80\")\r\n    shape.isGeometryPositioned = true\r\n    shape.position = new go.Point(-100, -100)\r\n\r\n    return geo;\r\n  }\r\n\r\n// 返回svg节点\r\nmodule.exports = function createWaveNodeTemplate (diagram) {\r\n    var properties = {\r\n        figure: \"Circle\",\r\n        fill: \"white\",\r\n        strokeWidth: 2,\r\n        stroke: \"black\",\r\n        fontSize: 15,\r\n        font: \"sans-serif\"\r\n    };\r\n    // console.log(\"createWaveNodeTemplatecreateWaveNodeTemplatecreateWaveNodeTemplate\")\r\n    // return $(go.Node,\r\n    //     {\r\n    //         click:()=>{\r\n    //             console.log(\"createWaveNodeTemplate click\")\r\n    //         }            \r\n    //     },\r\n    //     $(go.Shape, { stroke: \"green\" },\r\n    //       new go.Binding(\"geometry\", \"\", computeGeo)),\r\n    //     $(go.Shape, { stroke: \"blue\" },\r\n    //       new go.Binding(\"geometry\", \"\", computeGeo)),\r\n    //     $(go.Shape, { stroke: \"red\", strokeDashArray: [10, 10] },\r\n    //       new go.Binding(\"geometry\", \"\", computeGeo))\r\n    //   );\r\n\r\n    return $(go.Node, \"Spot\",{\r\n                name: \"NODE\",\r\n                \"_controlExpand\": true,\r\n                layerName: \"Background\",\r\n                locationSpot: go.Spot.Center,\r\n                // resizeCellSize: new go.Size(10, 10),\r\n                locationObjectName: \"BACKGROUND\",\r\n                resizable: true,\r\n                resizeObjectName: \"BACKGROUND\", // user can resize the Shape\r\n                rotatable: true,\r\n                rotateObjectName: \"BACKGROUND\", // rotate the Shape without rotating the label\r\n                click: function(e, node){\r\n                    // console.log(node.data);\r\n                },\r\n                doubleClick: function (e, node) {\r\n                    doubleClickCreateNodeType(e);\r\n                },\r\n                selectable: true,\r\n                // selectionObjectName:\"SHAPE\",\r\n                movable: true,\r\n                // width: 200, height: 200,\r\n                angle: 0,\r\n                //toMaxLinks: 1,\r\n                layoutConditions: go.Part.LayoutStandard & go.Part.LayoutNodeSized & go.Part.LayoutAdded & go.Part.LayoutNodeSized,\r\n                //layoutConditions:~go.Part.LayoutAdded,\r\n                // fromLinkable: true, toLinkable: true,\r\n                alignment: go.Spot.Center,\r\n                alignmentFocus: go.Spot.Center,\r\n                resizeAdornmentTemplate: diagram.__trtd.nodeResizeAdornmentTemplate(),\r\n                // rotateAdornmentTemplate: nodeRotateAdornmentTemplate,\r\n                contextMenu: diagram.__trtd.getNodeContextMenu(),\r\n                // contextMenu: $(go.Adornment),\r\n            },\r\n            new go.Binding(\"location\", \"loc\", go.Point.parse).makeTwoWay(go.Point.stringify),\r\n            $(go.Shape, \"Rectangle\",{\r\n                name: 'BACKGROUND',\r\n                fill: \"rgba(1,1,1,0)\",\r\n                // width: 450,\r\n                // height: 450,\r\n                angle: 0,\r\n                stroke: \"rgba(1,1,1,1)\",\r\n                \r\n                // minSize: new go.Size(50, 50),\r\n                },\r\n                new go.Binding(\"desiredSize\", \"desiredSize\", function(v, d) {\r\n                    // console.log(\"vd m\", v, d )\r\n                    // if(!v) return d.part.findObject(\"SHAPE\").measuredBounds.size;\r\n                    return go.Size.parse(v)\r\n                }).makeTwoWay(function(v) {\r\n                    return go.Size.stringify(v)\r\n                }),\r\n            ),\r\n            // $(go.Shape, { stroke: \"green\" },\r\n            //     new go.Binding(\"geometry\", \"\", computeGeo),\r\n            //     new go.Binding(\"stroke\", \"stroke\").makeTwoWay(function(v){\r\n            //         return v;\r\n            //     }),\r\n            //     new go.Binding(\"strokeWidth\", \"strokeWidth\").makeTwoWay(function(v){\r\n            //         return v;\r\n            //     }),\r\n            // ),M 0 0 A80,60 0 1 0 160,0\r\n            // $(go.Panel, \"Vertical\",{\r\n            //     alignment: go.Spot.Center,\r\n            //     stretch: go.GraphObject.Fill,\r\n            //     },\r\n            //     new go.Binding(\"desiredSize\", \"desiredSize\", function(v) {\r\n            //         return v\r\n            //     }).ofObject(\"BACKGROUND\"),\r\n                $(go.Shape, { \r\n                    name:\"UP\",\r\n                    stroke: \"blue\", \r\n                    // geometryString:\"M 0,80 A100,80 0 1 1 200,80\",\r\n                    position:new go.Point(0, 0),\r\n                    isGeometryPositioned: true,\r\n                    alignment: go.Spot.Center,\r\n                    stretch: go.GraphObject.Fill\r\n                },\r\n                    new go.Binding(\"geometry\", \"\", computeGeo),\r\n                    new go.Binding(\"stroke\", \"stroke1\").makeTwoWay(function(v){\r\n                        return v;\r\n                    }),\r\n                    new go.Binding(\"strokeWidth\", \"strokeWidth\").makeTwoWay(function(v){\r\n                        return v;\r\n                    }),\r\n                    // new go.Binding(\"desiredSize\", \"desiredSize\", function(v, d) {\r\n                    //     // console.log(\"vd m\", v, d )\r\n                    //     // if(!v) return d.part.findObject(\"SHAPE\").measuredBounds.size;\r\n                    //     return go.Size.parse(v)\r\n                    // }).makeTwoWay(function(v) {\r\n                    //     return go.Size.stringify(v)\r\n                    // }),\r\n                ),\r\n                $(go.Shape, { \r\n                    name:\"DOWN\",\r\n                    stroke: \"red\", \r\n                    // geometryString:\"M 0,0 A100,80 0 1 0 200,0\", \r\n                    alignment: go.Spot.Center,\r\n                    strokeDashArray: [10, 10],\r\n                    isGeometryPositioned: true,\r\n                    position:new go.Point(-100, -100),\r\n                    stretch: go.GraphObject.Fill,\r\n                 },\r\n\r\n                    // new go.Binding(\"geometry\", \"\", computeGeo),\r\n                    new go.Binding(\"geometry\", \"\", computeGeo2),\r\n                    new go.Binding(\"stroke\", \"stroke2\").makeTwoWay(function(v){\r\n                        return v;\r\n                    }),\r\n                    new go.Binding(\"strokeWidth\", \"strokeWidth\").makeTwoWay(function(v){\r\n                        return v;\r\n                    })\r\n                ),\r\n\r\n                    // new go.Binding(\"desiredSize\", \"desiredSize\", function(v, d) {\r\n                    //     // console.log(\"vd m\", v, d )\r\n                    //     // if(!v) return d.part.findObject(\"SHAPE\").measuredBounds.size;\r\n                    //     return go.Size.parse(v)\r\n                    // }).makeTwoWay(function(v) {\r\n                    //     return go.Size.stringify(v)\r\n                    // }),\r\n                // )\r\n            \r\n            // $(go.Shape, {\r\n            //     name: \"SHAPE\",\r\n            //     // geometryString: \"M 0,0 a50,50 0 1,1 100,0\",\r\n            //     // geometryString: \"M 0 50 L 100 100 L 100 200\",\r\n            //     fill: \"white\",\r\n            //     strokeWidth: 3, \r\n            //     stroke: \"black\",\r\n            //     minSize: new go.Size(50, 50),\r\n            //     },\r\n            //     new go.Binding(\"fill\", \"fill\").makeTwoWay(function(v){\r\n            //         return v;\r\n            //     }),\r\n            //     new go.Binding(\"stroke\", \"stroke\").makeTwoWay(function(v){\r\n            //         return v;\r\n            //     }),\r\n            //     new go.Binding(\"strokeWidth\", \"strokeWidth\").makeTwoWay(function(v){\r\n            //         return v;\r\n            //     }),\r\n            //     new go.Binding(\"desiredSize\", \"desiredSize\", function(v) {\r\n            //         // var va = (v / 2) * Math.sqrt(2);\r\n            //         // console.log(\"desiredSize\",v)\r\n            //         return v\r\n            //     }).ofObject(\"BACKGROUND\"),\r\n            //     new go.Binding(\"angle\", \"angle\", function(v) {\r\n            //         // var va = (v / 2) * Math.sqrt(2);\r\n            //         // console.log(\"desiredSize\",v)\r\n            //         return v\r\n            //     }).ofObject(\"BACKGROUND\"),\r\n            //     new go.Binding(\"geometryString\", \"geometryString\", function(v) {\r\n            //         return v;\r\n            //     }),\r\n            // ),\r\n            // $(go.Shape, \"Rectangle\",{\r\n            //     name: 'BACKGROUND',\r\n            //     fill: \"rgba(1,1,1,0)\",\r\n            //     // width: 450,\r\n            //     // height: 450,\r\n            //     angle: 0,\r\n            //     stroke: \"rgba(1,1,1,0)\",\r\n            //     // minSize: new go.Size(50, 50),\r\n            //     },\r\n            //     new go.Binding(\"desiredSize\", \"desiredSize\", function(v, d) {\r\n            //         // console.log(\"vd m\", v, d )\r\n            //         if(!v) return d.part.findObject(\"SHAPE\").measuredBounds.size;\r\n            //         return go.Size.parse(v)\r\n            //     }).makeTwoWay(function(v) {\r\n            //         return go.Size.stringify(v)\r\n            //     }),\r\n            //     // new go.Binding(\"angle\", \"angle\").makeTwoWay(function(v){\r\n            //     //     return v;\r\n            //     // }),\r\n            //     // new go.Binding(\"desiredSize\", \"height\", function(v) {\r\n            //     //     var radius = parseInt(v ? v : 100);\r\n            //     //     var size = new go.Size(radius, radius);\r\n            //     //     return size;\r\n            //     // }).makeTwoWay(function(v) {\r\n            //     //     return v.height;\r\n            //     // }),\r\n            //     // background: \"#555\",\r\n            //     // stroke: \"red\"}\r\n            // ),\r\n    );\r\n}\r\n\r\nfunction doubleClickCreateNodeType(e){\r\n    // console.log('eeeeeeeeeeeeeee:', e);\r\n    var myDiagram = e.diagram;\r\n    myDiagram.startTransaction();\r\n    var text = { text: \"双击编辑文本\", category: 'text' };\r\n    text.loc = go.Point.stringify(myDiagram.lastInput.documentPoint);\r\n    myDiagram.model.addNodeData(text);\r\n    myDiagram.commitTransaction()\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/nodeTemplate/createWaveNodeTemplate.js","\"use strict\";\r\nvar $ = go.GraphObject.make;\r\n\r\n/*\r\n*  Copyright (C) 1998-2017 by Northwoods Software Corporation. All Rights Reserved.\r\n*/\r\n\r\n/**\r\n* @constructor\r\n* @class\r\n*/\r\nfunction GroupRotatingTool() {\r\n  go.RotatingTool.call(this);\r\n\r\n  // Internal state\r\n  // ._initialInfo holds references to all selected non-Link Parts and\r\n  // their initial relative points and angles\r\n  this._initialInfo = null;\r\n  this._rotatePoint = new go.Point();\r\n  this.handleAngle = 0\r\n  this.handleArchetype =\r\n    $(go.Panel, \"Auto\",\r\n        $(go.Shape, \"BpmnActivityLoop\", { width: 30, height: 30, stroke: \"green\", fill: \"transparent\" }),\r\n        $(go.Shape, \"Rectangle\", {\r\n            width: 30,\r\n            height: 30,\r\n            stroke: \"green\",\r\n            fill: \"transparent\",\r\n            strokeWidth: 0\r\n        })\r\n    );\r\n}\r\ngo.Diagram.inherit(GroupRotatingTool, go.RotatingTool);\r\n\r\nGroupRotatingTool.prototype.doActivate = function() {\r\n \r\n  go.RotatingTool.prototype.doActivate.call(this);\r\n\r\n  // var group = this.adornedObject.part;\r\n  var group = this.adornedObject.part; \r\n  if (group instanceof go.Group && group.data.category == \"waveGroup\") {\r\n    // if (group.placeholder !== null) throw new Error(\"GroupRotatingTool can't handle Placeholder in Group\");\r\n    // assume rotation about the location point\r\n    this._rotatePoint = group.location;\r\n    // remember initial points for each Part\r\n    var infos = new go.Map(go.Part, MultiplePartInfo);\r\n    var textAngle = group.data.textAngle|| \"vertical\" // \"vertical\"\r\n    this.walkTree(group, infos, textAngle);\r\n    this._initialInfo = infos;\r\n  }\r\n}\r\n\r\nGroupRotatingTool.prototype.walkTree = function(part, infos, textAngle) {\r\n  if (part === null || part instanceof go.Link) return;\r\n\r\n  // 文字方向为横向时\r\n  if(textAngle == \"horizontal\"){\r\n    console.log(\"textAngle\")\r\n    if(part.data.category == \"autoText\") return;\r\n  }\r\n  // saves original relative position and original angle\r\n  var loc = part.locationObject.getDocumentPoint(go.Spot.Center);\r\n  var locoffset = loc.copy().subtract(part.location);\r\n  var relloc = loc.subtract(this._rotatePoint);\r\n  infos.add(part, new MultiplePartInfo(relloc, locoffset, part.rotateObject.angle));\r\n  // recurse into Groups\r\n  if (part instanceof go.Group) {\r\n    var it = part.memberParts.iterator;\r\n    while (it.next()) this.walkTree(it.value, infos,textAngle);\r\n  }\r\n};\r\n\r\nfunction MultiplePartInfo(relativeloc, locoffset, rotationAngle) {\r\n  this.relativeLocation = relativeloc;\r\n  this.centerLocationOffset = locoffset;\r\n  this.rotationAngle = rotationAngle;  // in degrees\r\n}\r\n\r\n/**\r\n* Rotate all members of a selected Group about the rotatePoint.\r\n* @this {GroupRotatingTool}\r\n* @param {number} newangle\r\n*/\r\nGroupRotatingTool.prototype.rotate = function(newangle) {\r\n  console.log(\"newangle\",newangle)\r\n  var group = this.adornedObject.part;\r\n\r\n  if (group instanceof go.Group) {\r\n    if((newangle+360)%360<300|| (newangle+360)%360>340){\r\n        if((newangle+360)%360<300) newangle=300\r\n        if((newangle+360)%360>340) newangle=340\r\n\r\n      console.log('dayu.................')\r\n      // setTimeout(()=>{\r\n        // group.diagram.startTransaction()\r\n        // group.layout.isOngoing = true;\r\n        // group.layout.isValidLayout = false;\r\n        // if(group.containingGroup ){\r\n        //   group.containingGroup.layout.isOngoing = true;\r\n        //   group.containingGroup.layout.isValidLayout = false;\r\n        // }\r\n        // group.diagram.commitTransaction() \r\n\r\n      // },100)\r\n \r\n      // return;\r\n    }\r\n  }\r\n  go.RotatingTool.prototype.rotate.call(this, newangle);\r\n  \r\n\r\n\r\n  if (group instanceof go.Group) {\r\n\r\n    var ang = newangle - this.originalAngle;\r\n    var cp = this._rotatePoint;\r\n    group.diagram.startTransaction()\r\n    var it = this._initialInfo.iterator;\r\n    while (it.next()) {\r\n      var part = it.key;\r\n      if (part instanceof go.Link) return; // only Nodes and simple Parts\r\n      var info = it.value;\r\n\r\n      // part.rotateObject.angle = info.rotationAngle + ang;\r\n      var angle = info.rotationAngle + ang;\r\n\r\n      var loc = cp.copy().add(info.relativeLocation);\r\n      var dir = cp.directionPoint(loc);\r\n      var newrad = (ang + dir) * (Math.PI / 180);\r\n      var locoffset = info.centerLocationOffset.copy();\r\n      locoffset.rotate(ang);\r\n      var dist = Math.sqrt(cp.distanceSquaredPoint(loc));\r\n      // part.location = new go.Point(cp.x + dist * Math.cos(newrad),\r\n      //                              cp.y + dist * Math.sin(newrad)).subtract(locoffset);\r\n      var location = new go.Point(cp.x + dist * Math.cos(newrad),\r\n                                   cp.y + dist * Math.sin(newrad)).subtract(locoffset);                                   \r\n      group.diagram.model.setDataProperty(part.data, \"loc\", go.Point.stringify(location))                                   \r\n      group.diagram.model.setDataProperty(part.data, \"angle\", angle) \r\n      // var git = group.memberParts;\r\n      // console.log(\"item:\",git)\r\n      // var maxWidth = 0;\r\n      // var maxHeight = 0;\r\n      // while (git.next()) {\r\n      //   var item = git.value;\r\n      //   console.log(\"item:\",item)\r\n      //   if(item.naturalBounds.width > maxWidth){\r\n      //     maxWidth = item.naturalBounds.width;\r\n      //   }\r\n      //   if(item.naturalBounds.height > maxHeight){\r\n      //     maxHeight = item.naturalBounds.height;\r\n      //   }\r\n      //   console.log(`maxHeight:${maxHeight},maxWidth:${maxWidth}`)\r\n\r\n      // }                    \r\n      // group.diagram.model.setDataProperty(group.data, \"desiredSize\", `${maxWidth+100} ${maxHeight}`)   \r\n      \r\n      // that.diagram.startTransaction();\r\n      console.log(\"isValidLayoutisValidLayout\")\r\n      // var group = that.diagram.findNodeForKey(data.key)\r\n      group.layout.isOngoing = true;\r\n      group.layout.isValidLayout = false;\r\n      if(group.containingGroup ){\r\n        group.containingGroup.layout.isOngoing = true;\r\n        group.containingGroup.layout.isValidLayout = false;\r\n      }\r\n      // that.diagram.commitTransaction();\r\n      group.diagram.commitTransaction()                          \r\n    }\r\n  }\r\n}\r\n\r\n\r\nmodule.exports = GroupRotatingTool\n\n\n// WEBPACK FOOTER //\n// ./src/tools/GroupRotatingTool.js","// \"use strict\";\n/*\n*  Copyright (C) 1998-2019 by Northwoods Software Corporation. All Rights Reserved.\n*/\n\n// HTML + JavaScript text editor menu, made with HTMLInfo\n// This is a re-implementation of the default text editor\n// This file exposes one instance of HTMLInfo, window.TextEditor\n// See also TextEditor.html\n(function(window) {\n  var textarea = document.createElement('textarea');\n  textarea.id = \"myTextArea\";\n    console.log(\"TextEditorTextEditorTextEditorTextEditorTextEditorTextEditorTextEditorTextEditorTextEditorTextEditorTextEditorTextEditor222222222222\")\n  textarea.addEventListener('input', function(e) {\n    var tool = TextEditor.tool;\n    if (tool.textBlock === null) return;\n    var tempText = tool.measureTemporaryTextBlock(this.value);\n    var scale = this.textScale;\n    this.style.width = 20 + tempText.measuredBounds.width * scale + 'px';\n    this.rows = tempText.lineCount;\n  }, false);\n\n  var observe;\n  if (window.attachEvent) {\n    observe = function (element, handlers) {\n      handlers.forEach(t => {\n        element.attachEvent('on' + t.evt, t.handler);\n      });\n    };\n  } else {\n    observe = function (element, handlers) {\n      handlers.forEach(t => {\n        element.addEventListener(t.evt, t.handler, false);\n      });\n    };\n  }\n\n  function resize() {\n    textarea.style.minHeight = \"40px\";\n    textarea.style.height = 'auto';\n    textarea.style.height = textarea.scrollHeight + 'px';\n  }\n\n  function delayedResize() {\n    setTimeout(resize, 0);\n  }\n\n  observe(textarea, [\n    {\n      evt: \"change\",\n      handler: resize\n    },\n    {\n      evt: \"cut\",\n      handler: delayedResize\n    },\n    {\n      evt: \"paste\",\n      handler: delayedResize\n    },\n    {\n      evt: \"drop\",\n      handler: delayedResize\n    },\n    {\n      evt: \"keydown\",\n      handler: delayedResize\n    }\n  ]);\n\n  textarea.addEventListener('keydown', function(e) {\n    var tool = TextEditor.tool;\n    if (tool.textBlock === null) return;\n    var keynum = e.which;\n    if (keynum === 13) { // Enter\n      if (tool.textBlock.isMultiline === false) e.preventDefault();\n      tool.acceptText(go.TextEditingTool.Enter);\n      return;\n    } else if (keynum === 9) { // Tab\n      tool.acceptText(go.TextEditingTool.Tab);\n      e.preventDefault();\n      return;\n    } else if (keynum === 27) { // Esc\n      tool.doCancel();\n      if (tool.diagram !== null) tool.diagram.doFocus();\n    }\n  }, false);\n\n  // handle focus:\n  textarea.addEventListener('focus', function(e) {\n    var tool = TextEditor.tool;\n    if (!tool || tool.currentTextEditor === null) return;\n\n    if (tool.state === go.TextEditingTool.StateActive) {\n      tool.state = go.TextEditingTool.StateEditing;\n    }\n\n    if (tool.selectsTextOnActivate) {\n      textarea.select();\n      textarea.setSelectionRange(0, 9999);\n    }\n  }, false);\n\n  // Disallow blur.\n  // If the textEditingTool blurs and the text is not valid,\n  // we do not want focus taken off the element just because a user clicked elsewhere.\n  textarea.addEventListener('blur', function(e) {\n    var tool = TextEditor.tool;\n    if (!tool || tool.currentTextEditor === null || tool.state === go.TextEditingTool.StateNone) return;\n\n    textarea.focus();\n\n    if (tool.selectsTextOnActivate) {\n      textarea.select();\n      textarea.setSelectionRange(0, 9999);\n    }\n  }, false);\n\n\n  var TextEditor = new go.HTMLInfo();\n\n  TextEditor.valueFunction = function() { return textarea.value; }\n\n  TextEditor.mainElement = textarea; // to reference it more easily\n\n  // used to be in doActivate\n  TextEditor.show = function(textBlock, diagram, tool) {\n      console.log(\"show.......................\")\n    if (!(textBlock instanceof go.TextBlock)) return;\n\n    TextEditor.tool = tool;  // remember the TextEditingTool for use by listeners\n\n    // This is called during validation, if validation failed:\n    if (tool.state === go.TextEditingTool.StateInvalid) {\n      textarea.style.border = '3px solid red';\n      textarea.focus();\n      return;\n    }\n\n    // This part is called during initalization:\n\n    var loc = textBlock.getDocumentPoint(go.Spot.Center);\n    var pos = diagram.position;\n    var sc = diagram.scale;\n    var textscale = textBlock.getDocumentScale() * sc;\n    if (textscale < tool.minimumEditorScale) textscale = tool.minimumEditorScale;\n    // Add slightly more width/height to stop scrollbars and line wrapping on some browsers\n    // +6 is firefox minimum, otherwise lines will be wrapped improperly\n    var textwidth = (textBlock.naturalBounds.width * textscale) + 6;\n    var textheight = (textBlock.naturalBounds.height * textscale) + 2;\n    var left = (loc.x - pos.x) * sc;\n    var top = (loc.y - pos.y) * sc;\n\n    textarea.value = textBlock.text;\n    // the only way you can mix font and fontSize is if the font inherits and the fontSize overrides\n    // in the future maybe have textarea contained in its own div\n    diagram.div.style['font'] = textBlock.font;\n\n    var paddingsize = 1;\n    textarea.style['position'] = 'absolute';\n    textarea.style['zIndex'] = '100';\n    textarea.style['font'] = 'inherit';\n    textarea.style['fontSize'] = (textscale * 100) + '%';\n    textarea.style['lineHeight'] = 'normal';\n    textarea.style['width'] = (textwidth) + 'px';\n    textarea.style['left'] = ((left - (textwidth / 2) | 0) - paddingsize) + 'px';\n    textarea.style['top'] = ((top - (textheight / 2) | 0) - paddingsize) + 'px';\n    textarea.style['textAlign'] = textBlock.textAlign;\n    textarea.style['margin'] = '0';\n    textarea.style['padding'] = paddingsize + 'px';\n    textarea.style['border'] = '0';\n    textarea.style['outline'] = 'none';\n    textarea.style['whiteSpace'] = 'pre-wrap';\n    textarea.style['overflow'] = 'hidden'; // for proper IE wrap\n    textarea.rows = textBlock.lineCount;\n    textarea.textScale = textscale; // attach a value to the textarea, for convenience\n    textarea.className = 'goTXarea';\n\n    // Show:\n    diagram.div.appendChild(textarea);\n\n    // After adding, focus:\n    textarea.focus();\n    if (tool.selectsTextOnActivate) {\n      textarea.select();\n      textarea.setSelectionRange(0, 9999);\n    }\n\n    resize();\n  };\n\n  TextEditor.hide = function(diagram, tool) {\n    diagram.div.removeChild(textarea);\n    TextEditor.tool = null;  // forget reference to TextEditingTool\n  }\n\n  window.TextEditor = TextEditor;\n})(window);\n\n\n\n// WEBPACK FOOTER //\n// ./src/tools/textEditor.js"],"sourceRoot":""}