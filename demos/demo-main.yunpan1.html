<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>trtd core demo11</title>
    <link rel="stylesheet" href="./menus.css">
    <style>
        .diagramdiv{
            width: 1200px;
            height: 900px;
            /* background-color: darkcyan; */
            margin: 0 auto;
            /* margin: 50px auto; */
            /* border: solid 1px gray; */
            border: none;
            outline:0 none !important;
            outline: none !important;
        }
       :input{
           outline: 0;
       }
    </style>
</head>
<body>
    <div style="position:relative;height:100%" class="mainbox" id="mainbox">
        <div id="myDiagramDiv" class="diagramdiv"></div>
        <!-- <div id="savedModel"></div> -->
    </div>
</body>
<script src='https://cdnjs.cloudflare.com/ajax/libs/gojs/1.8.16/go.js'></script>
<script src='../lib/main.js'></script>

<script>
    // function change(v){
    //     console.log(v)
    // }
     var myDiagram;
    function load(){
        console.log('dddd',window.Trtd)
        console.log(window.Trtd)
       
        if(myDiagram){
            myDiagram.destroyNewInstance();
        }
        
        var jsonData = {
            "nodeDataArray": [ 
            {"key": guid(),"category": "yunpanx","stroke":"#8799c4","geometryString":"M 0 0 L 0 800","strokeDashArray": [4,2],"strokeWidth":2,"loc": "0 -200"},
            {"key": guid(),"category": "ytext" ,"text":"维度1","textStroke":"#666666","loc": "0 -200","dir": "right"}, 
            {"key": guid(),"category": "yunpanx","stroke":"#8799c4","geometryString":"M 0 0 L 0 800","strokeDashArray": [4, 2],"strokeWidth":2,"loc": "0 -400"},
            {"key": guid(),"category": "ytext" ,"text":"维度2","textStroke":"#666666","loc": "0 -400","dir": "right"}, 
            {"key": guid(),"category": "yunpanx","stroke":"#8799c4","geometryString":"M 0 0 L 0 800","strokeDashArray": [4, 2],"strokeWidth":2,"loc": "0 -600" },
            {"key": guid(),"category": "ytext" ,"text":"维度3","textStroke":"#666666","loc": "0 -600","dir": "right"}, 
            {"key": guid(),"category": "yunpany","stroke":"#8799c4","geometryString":"M 0 0 L 0 800","strokeDashArray": [4, 2],"strokeWidth":2,"loc": "200 0" },
            {"key": guid(),"category": "xtext" ,"text":"维度1","margin":10,"textStroke":"#666666","loc": "200 0","dir": "top"}, 
            {"key": guid(),"category": "yunpany","stroke":"#8799c4","geometryString":"M 0 0 L 0 800","strokeDashArray": [4, 2],"strokeWidth":2,"loc": "400 0" },
            {"key": guid(),"category": "xtext" ,"text":"维度2","margin":10,"textStroke":"#666666","loc": "400 0","dir": "top"}, 
            {"key": guid(),"category": "yunpany","stroke":"#8799c4","geometryString":"M 0 0 L 0 800","strokeDashArray": [4, 2],"strokeWidth":2,"loc": "600 0" },
            {"key": guid(),"category": "xtext" ,"text":"维度3","margin":10,"textStroke":"#666666","loc": "600 0","dir": "top"},
            {"key": guid(),"category": "x" ,"strokeWidth":2,"stroke":"#8799c4","height":810,"angle": 90,"loc": "0 0"},
            {"key": guid(),"category": "y","strokeWidth":2,"stroke":"#8799c4","height":810,"loc": "0 0"},
            {"key": guid(),"category": "LogicXor","strokeWidth":2,"stroke":"#8799c4","loc": "810 10"},
            {"key": guid(),"category": "LogicXor","strokeWidth":2,"stroke":"#8799c4","loc": "-25 -825"}
            ]
        }
        myDiagram = new Trtd("myDiagramDiv",{type:'yunpan',
            modelChangedListener:function(m){
                // console.log('from trtd:',m);
            }
            
        })
        // console.log(JSON.stringify(jsonData))
        myDiagram.loadModel(JSON.stringify(jsonData));

        function guid() {
            function S4() {
                return (((1+Math.random())*0x10000)|0).toString(16).substring(1);
            }
            return (S4()+S4()+"-"+S4()+"-"+S4()+"-"+S4()+"-"+S4()+S4()+S4());
        }

        // var tdData = myDiagram.getTdData();
        // console.log('tdData:', tdData);

        // myDiagram.downloadImage();
        // console.log('myDiagram.downloadImage():', myDiagram.downloadImage())
        // document.getElementsByTagName('img')[0].setAttribute('src', myDiagram.downloadImage())

        
        
        // 双击画布创建的节点类型
    
        // myDiagram.doubleClickCreateNodeType('0');
    }
    load();
</script>
<script src='./domjs.js'></script>
</html>