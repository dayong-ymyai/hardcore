<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>天盘hardcore.js</title>
    <link rel="stylesheet" href="./menus.css">
    <style>
        .diagramdiv{
            width: 100%;
            height: 500px;
            /* margin: 50px auto; */
            border: solid 1px #000;
        }
    </style>
</head>
<body>
    <div style="position:relative;height:100%" class="mainbox" id="mainbox">
        <div id="myDiagramDiv" class="diagramdiv"></div>
    </div>
</body>
<script src='https://cdnjs.cloudflare.com/ajax/libs/gojs/2.0.15/go.js'></script>
<!-- <script src='https://cdnjs.cloudflare.com/ajax/libs/gojs/2.0.15/go.js'></script> -->
<script src='figure.js'></script>
<script>
    go.licenseKey = "73f042e0b61c28c702d90776423d6bf919a075649a811ca00b0715f7ee083f46729ce97154d788d2c2fb46ab4e78c28d8d966f2e9549576ee531d38c10e7d2feb13323b5440a44dda21136c5ccaa2ca1ae2870e0d2b676a2d26785eded";
</script>
<script src='../lib/main.js'></script>
<script>
     var myDiagram;
    function load(){
        console.log('dddd',window.Trtd)
       
        if(myDiagram){
            myDiagram.diagram == null;
        }



         var jsonData = { "class": "go.GraphLinksModel",
  "modelData": {"currentType":"tianpan", "type":"tianpan", "currentThemeID":14, "backgroundColor":"#ffffff", "updatedAt":1565157332391},
  "nodeDataArray": [ 
{"key":"1", "text":"中心主题", "level":0, "font":"bold 18px 幼圆", "radius":120, "loc":"-11 10", "angle":0, "category":"0", "isparent":"14", "rad":33.00000000000007, "group":-2, "role":"theme"},
{"isGroup":true, "parent":"1", "fill":"rgba(0,0,0,0)", "stroke":"rgba(0,0,0,0)", "strokeWidth":0, "level":0, "key":-2, "loc":"97.55073105428676 34.22717817118479", "angle":0},
{"key":"8", "text":"", "level":1, "parent":"1", "prev":"9", "next":null, "radius":100, "group":-11, "fill":"white", "category":"0", "loc":"11.011459547983634 316.0820938265734", "strokeWidth":2, "stroke":"black", "font":"bold 18px 幼圆", "textStroke":"black", "newAdd":true, "angle":0, "isparent":"18", "rad":21.50000000000004},
{"key":"9", "text":"", "level":1, "parent":"1", "prev":"10", "next":"8", "radius":100, "group":-25, "fill":"white", "category":"0", "loc":"248.1447028085214 47.362514944306156", "strokeWidth":2, "stroke":"black", "font":"bold 18px 幼圆", "textStroke":"black", "newAdd":true, "angle":0, "isparent":"31", "rad":21.50000000000004},
{"key":"10", "text":"", "level":1, "parent":"1", "next":"9", "radius":100, "group":-19, "fill":"white", "category":"0", "loc":"25.49094491134909 -197.31575178812892", "strokeWidth":2, "stroke":"black", "font":"bold 18px 幼圆", "textStroke":"black", "newAdd":true, "angle":0, "isparent":"24", "rad":21.50000000000004, "prev":"14"},
{"isGroup":true, "group":-2, "parent":"8", "fill":"rgba(0,0,0,0)", "stroke":"rgba(0,0,0,0)", "strokeWidth":0, "level":1, "key":-11, "loc":"-7.136136471158807 251.39682922776947", "angle":9.24524311274043},
{"key":"17", "text":"", "level":2, "parent":"8", "prev":"18", "next":null, "radius":95, "group":-11, "fill":"white", "category":"0", "loc":"71.70189004852699 186.7115646289656", "strokeWidth":2, "stroke":"black", "font":"bold 18px 幼圆", "textStroke":"black", "newAdd":true, "angle":6.570796326794897},
{"key":"18", "text":"", "level":2, "parent":"8", "next":"17", "radius":95, "group":-11, "fill":"white", "category":"0", "loc":"-85.9741629908448 264.97153698401917", "strokeWidth":2, "stroke":"black", "font":"bold 18px 幼圆", "textStroke":"black", "newAdd":true, "angle":5},
{"isGroup":true, "group":-2, "parent":"10", "fill":"rgba(0,0,0,0)", "stroke":"rgba(0,0,0,0)", "strokeWidth":0, "level":1, "key":-19, "loc":"-21.751866358064916 -222.87103020940643", "angle":6.3},
{"key":"24", "text":"", "level":2, "parent":"10", "next":null, "radius":95, "group":-19, "fill":"white", "category":"0", "loc":"-71.49467762747895 -248.4263086306837", "strokeWidth":2, "stroke":"black", "font":"bold 18px 幼圆", "textStroke":"black", "newAdd":true, "angle":5},
{"isGroup":true, "group":-2, "parent":"9", "fill":"rgba(0,0,0,0)", "stroke":"rgba(0,0,0,0)", "strokeWidth":0, "level":1, "key":-25, "loc":"229.9971067893797 -17.32274965449878", "angle":7.870796326794896},
{"key":"27", "text":"", "level":2, "parent":"9", "prev":"31", "next":null, "radius":95, "group":-25, "fill":"white", "category":"0", "loc":"308.8351333090652 -82.00801425330388", "strokeWidth":2, "stroke":"black", "font":"bold 18px 幼圆", "textStroke":"black", "newAdd":true, "angle":6.570796326794897},
{"key":"31", "text":"", "color":"yellow", "strokeWidth":2, "stroke":"black", "fill":"white", "next":"27", "group":-25, "level":2, "radius":95, "parent":"9", "font":"bold 18px 幼圆", "textStroke":"black", "loc":"151.15908026969421 -3.748041898248914", "category":"0", "newAdd":true, "angle":5},
{"key":"14", "text":"双击编辑内容", "level":1, "parent":"1", "next":"10", "radius":100, "group":-2, "fill":"white", "category":"0", "loc":"-159.8616531991317 -68.44876166531608", "strokeWidth":2, "stroke":"black", "font":"bold 18px 幼圆", "textStroke":"black", "newAdd":true, "angle":5}
 ],
  "linkDataArray": [ 
{"from":"9", "to":"8", "level":1, "isTreeLink":true, "strokeWidth":2, "color":"black", "curviness":24.000000000000075, "unautoLink":false, "points":[241.65637954502307,97.94810242956088,220.24387673734557,194.7017514593752,153.73539499323005,270.0692155932066,60.39697794970725,303.35139972950856]},
{"from":"10", "to":"9", "level":1, "isTreeLink":true, "strokeWidth":2, "color":"black", "curviness":24.000000000000075, "unautoLink":false, "points":[75.84524935643657,-189.22600371717874,165.25233943059516,-164.65943024541926,228.77733025044785,-94.85066171264802,244.82650620612128,-3.5294251966222348]},
{"from":"8", "to":"18", "level":2, "isTreeLink":true, "strokeWidth":2, "color":"black", "points":[-34.713488806553755,338.6703451527586,-53.53122503780486,338.3085645489857,-70.17756820608346,328.9919598590991,-80.3266813091347,313.1416101690867], "curviness":21.50000000000004, "unautoLink":false},
{"from":"18", "to":"17", "level":2, "isTreeLink":true, "strokeWidth":2, "color":"black", "curviness":21.50000000000004, "unautoLink":false, "points":[-61.67487733381506,222.9977985686948,-39.721173817280885,197.9596287569734,-9.63920054528694,183.02892525906265,23.577905626153097,180.6839512277005]},
{"from":"31", "to":"27", "level":2, "isTreeLink":true, "strokeWidth":2, "color":"black", "curviness":21.50000000000004, "unautoLink":false, "points":[175.45836592672367,-45.721780313573106,197.41206944325756,-70.75995012529455,227.49404271525117,-85.69065362320555,260.71114888669103,-88.03562765456809]},
{"from":"9", "to":"31", "level":2, "isTreeLink":true, "strokeWidth":2, "color":"black", "curviness":21.50000000000004, "unautoLink":false, "points":[202.41975445398404,69.95076627049096,183.60201822273316,69.5889856667178,166.95567505445482,60.27238097683119,156.80656195140384,44.42203128681871]},
{"from":"10", "to":"24", "level":2, "isTreeLink":true, "strokeWidth":2, "color":"black", "curviness":21.50000000000004, "unautoLink":false, "points":[-20.2340034431881,-174.72750046194392,-39.05173967443943,-175.08928106571682,-55.69808284271818,-184.40588575560366,-65.84719594576939,-200.25623544561648]},
{"from":"1", "to":"14", "level":1, "isTreeLink":true, "strokeWidth":2, "color":"black", "points":[-62.34832855733613,42.92945724374847,-107.92479873318847,52.337485676916444,-148.9435099188467,27.343113228190134,-161.47815579233384,-17.47438654049312], "curviness":33.00000000000007, "unautoLink":false},
{"from":"14", "to":"10", "level":1, "isTreeLink":true, "strokeWidth":2, "color":"black", "curviness":40.70000000000031, "unautoLink":false, "points":[-137.54908542631233,-114.30886763317604,-111.05894785147694,-153.92106377771262,-71.62690230022855,-181.33632030163886,-25.268879125352655,-192.372042273699]}
 ]}
        // myDiagram.loadModel(JSON.stringify(jsonData));
        myDiagram = new Trtd("myDiagramDiv",{
                    modelChangedListener:function(m){
                        // console.log('from trtd:',m);
                    },
                    model: jsonData
                })
        // console.log('tdData:', tdData);
        // var tdData = myDiagram.getTdData();
        // console.log('tdData:', tdData);

        // myDiagram.downloadImage();
        // console.log('myDiagram.downloadImage():', myDiagram.downloadImage())
        // document.getElementsByTagName('img')[0].setAttribute('src', myDiagram.downloadImage())



        // setTimeout(function(){
            
        //     // 双击画布创建的节点类型
        //     myDiagram.addTextNode('新增文本节点');
        //     myDiagram.insertPicture('http://www.365trtd.com/media/images/qipao/gpsmapicons02_看图王.png');

        // },1000)


    }
    load();
</script>
<script src='./domjs.js'></script>
</html>