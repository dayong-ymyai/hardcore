<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>trtd core demo2</title>
    <link rel="stylesheet" href="./menus.css">
    <style>
        .diagramdiv{
            width: 100%;
            height: 500px;
            /* margin: 50px auto; */
            border: solid 1px #000;
        }
    </style>
</head>
<body>
    <div style="position:relative;height:100%" class="mainbox" id="mainbox">
        <div id="myDiagramDiv" class="diagramdiv"></div>
    </div>
</body>
<script src='https://cdnjs.cloudflare.com/ajax/libs/gojs/1.8.16/go.js'></script>
<script src='../lib/main.js'></script>

<script>
     var myDiagram;
    function load(){
        console.log('dddd',window.Trtd)
       
        if(myDiagram){
            myDiagram.diagram == null;
        }



         var jsonData = { "class": "go.GraphLinksModel",
  "modelData": {"currentType":"tianpan", "type":"tianpan", "currentThemeID":14, "backgroundColor":"#ffffff", "updatedAt":1565089791881},
  "nodeDataArray": [ 
{"key":"1", "text":"中心主题", "level":0, "font":"bold 18px 幼圆", "radius":120, "loc":"-11 10", "angle":0, "category":"0", "isparent":"10", "rad":40.70000000000031, "group":-2, "role":"theme"},
{"isGroup":true, "parent":"1", "fill":"rgba(0,0,0,0)", "stroke":"rgba(0,0,0,0)", "strokeWidth":0, "level":0, "key":-2, "loc":"43.425724097208615 -175.8139556210615", "angle":0},
{"key":"8", "text":"", "level":1, "parent":"1", "prev":"9", "next":null, "radius":100, "group":-11, "fill":"white", "category":"0", "loc":"306.9093371045635 17.39376998317927", "strokeWidth":2, "stroke":"black", "font":"bold 18px 幼圆", "textStroke":"black", "newAdd":true, "angle":0, "isparent":"18", "rad":21.50000000000004},
{"key":"9", "text":"", "level":1, "parent":"1", "prev":"10", "next":"8", "radius":100, "group":-25, "fill":"white", "category":"0", "loc":"54.17465361364418 -239.65115202769226", "strokeWidth":2, "stroke":"black", "font":"bold 18px 幼圆", "textStroke":"black", "newAdd":true, "angle":0, "isparent":"31", "rad":21.50000000000004},
{"key":"10", "text":"", "level":1, "parent":"1", "next":"9", "radius":100, "group":-19, "fill":"white", "category":"0", "loc":"-194.59603894559672 -86.753472720557", "strokeWidth":2, "stroke":"black", "font":"bold 18px 幼圆", "textStroke":"black", "newAdd":true, "angle":0, "isparent":"24", "rad":21.50000000000004},
{"isGroup":true, "group":-2, "parent":"8", "fill":"rgba(0,0,0,0)", "stroke":"rgba(0,0,0,0)", "strokeWidth":0, "level":1, "key":-11, "loc":"288.76174108542136 -47.291494615624686", "angle":7.7488935718910685},
{"key":"17", "text":"", "level":2, "parent":"8", "prev":"18", "next":null, "radius":95, "group":-11, "fill":"white", "category":"0", "loc":"367.5997676051073 -111.97675921442863", "strokeWidth":2, "stroke":"black", "font":"bold 18px 幼圆", "textStroke":"black", "newAdd":true, "angle":6.570796326794897},
{"key":"18", "text":"", "level":2, "parent":"8", "next":"17", "radius":95, "group":-11, "fill":"white", "category":"0", "loc":"209.92371456573545 -33.71678685937499", "strokeWidth":2, "stroke":"black", "font":"bold 18px 幼圆", "textStroke":"black", "newAdd":true, "angle":5},
{"isGroup":true, "group":-2, "parent":"10", "fill":"rgba(0,0,0,0)", "stroke":"rgba(0,0,0,0)", "strokeWidth":0, "level":1, "key":-19, "loc":"-241.83885021501075 -112.30875114183448", "angle":5},
{"key":"24", "text":"", "level":2, "parent":"10", "next":null, "radius":95, "group":-19, "fill":"white", "category":"0", "loc":"-291.5816614844248 -137.86402956311196", "strokeWidth":2, "stroke":"black", "font":"bold 18px 幼圆", "textStroke":"black", "newAdd":true, "angle":5},
{"isGroup":true, "group":-2, "parent":"9", "fill":"rgba(0,0,0,0)", "stroke":"rgba(0,0,0,0)", "strokeWidth":0, "level":1, "key":-25, "loc":"36.02705759450248 -304.3364166264972", "angle":6.374446785945534},
{"key":"27", "text":"", "level":2, "parent":"9", "prev":"31", "next":null, "radius":95, "group":-25, "fill":"white", "category":"0", "loc":"114.86508411418798 -369.02168122530236", "strokeWidth":2, "stroke":"black", "font":"bold 18px 幼圆", "textStroke":"black", "newAdd":true, "angle":6.570796326794897},
{"key":"31", "text":"", "color":"yellow", "strokeWidth":2, "stroke":"black", "fill":"white", "next":"27", "group":-25, "level":2, "radius":95, "parent":"9", "font":"bold 18px 幼圆", "textStroke":"black", "loc":"-42.810968925183005 -290.76170887024716", "category":"0", "newAdd":true, "angle":5}
 ],
  "linkDataArray": [ 
{"from":"9", "to":"8", "level":1, "isTreeLink":true, "strokeWidth":2, "color":"black", "curviness":24.000000000000075, "unautoLink":false, "points":[104.15580628500672,-229.50795836682028,199.78008626386585,-201.010459085661,270.7362100544716,-128.84422113990897,297.612724650676,-32.751748230138894]},
{"from":"1", "to":"10", "level":1, "isTreeLink":true, "strokeWidth":2, "color":"black", "points":[-59.85631034210658,46.5247989694094,-125.58743427058808,70.29695647157716,-188.4308775999624,33.09854879607417,-199.21183186171865,-35.96278011102972], "curviness":40.70000000000031, "unautoLink":false},
{"from":"10", "to":"9", "level":1, "isTreeLink":true, "strokeWidth":2, "color":"black", "curviness":24.000000000000075, "unautoLink":false, "points":[-172.63900919698375,-132.7848624955629,-133.75561263825412,-195.37893131641331,-70.21899800706453,-234.4293549342488,3.188766899256507,-240.85088364251834]},
{"from":"8", "to":"18", "level":2, "isTreeLink":true, "strokeWidth":2, "color":"black", "points":[261.1843887500264,39.982021309364484,242.3666525187753,39.62024070559157,225.7203093504967,30.303636015704996,215.57119624744547,14.453286325692517], "curviness":21.50000000000004, "unautoLink":false},
{"from":"18", "to":"17", "level":2, "isTreeLink":true, "strokeWidth":2, "color":"black", "curviness":21.50000000000004, "unautoLink":false, "points":[234.2230002227651,-75.69052527469933,256.1767037392993,-100.72869508642074,286.25867701129323,-115.65939858433148,319.47578318273327,-118.00437261569361]},
{"from":"31", "to":"27", "level":2, "isTreeLink":true, "strokeWidth":2, "color":"black", "curviness":21.50000000000004, "unautoLink":false, "points":[-18.511683268153533,-332.7354472855716,3.442020248380331,-357.773617097293,33.52399352037395,-372.704320595204,66.7410996918138,-375.04929462656656]},
{"from":"9", "to":"31", "level":2, "isTreeLink":true, "strokeWidth":2, "color":"black", "curviness":21.50000000000004, "unautoLink":false, "points":[8.449705259106821,-217.06290070150752,-10.368030972144059,-217.42468130528067,-27.0143741404224,-226.7412859951673,-37.163487243473384,-242.59163568517977]},
{"from":"10", "to":"24", "level":2, "isTreeLink":true, "strokeWidth":2, "color":"black", "curviness":21.50000000000004, "unautoLink":false, "points":[-240.32098730013394,-64.16522139437194,-259.13872353138527,-64.52700199814487,-275.785066699664,-73.84360668803168,-285.9341798027152,-89.6939563780445]}
 ]}
        // myDiagram.loadModel(JSON.stringify(jsonData));
        myDiagram = new Trtd("myDiagramDiv",{
                    modelChangedListener:function(m){
                        // console.log('from trtd:',m);
                    },
                    model: jsonData
                })
        // console.log('tdData:', tdData);
        // var tdData = myDiagram.getTdData();
        // console.log('tdData:', tdData);

        // myDiagram.downloadImage();
        // console.log('myDiagram.downloadImage():', myDiagram.downloadImage())
        // document.getElementsByTagName('img')[0].setAttribute('src', myDiagram.downloadImage())



        // setTimeout(function(){
            
        //     // 双击画布创建的节点类型
        //     myDiagram.addTextNode('新增文本节点');
        //     myDiagram.insertPicture('http://www.365trtd.com/media/images/qipao/gpsmapicons02_看图王.png');

        // },1000)


    }
    load();
</script>
<script src='./domjs.js'></script>
</html>